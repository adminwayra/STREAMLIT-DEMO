/*! For license information please see index.js.LICENSE.txt */
define(["@jupyter-widgets/base"],(__WEBPACK_EXTERNAL_MODULE__9146__=>(()=>{var __webpack_modules__={6489:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MapModel:()=>s,MapView:()=>u});var n=i(9644);const r=i(9146),o=i(6486),a=[20.5937,78.9629];class s extends r.DOMWidgetModel{defaults(){return{_view_name:"MapView",_model_name:"MapModel",_model_module:"@here/map-widget-for-jupyter",_view_module:"@here/map-widget-for-jupyter",api_key:"",center:a,zoom:3,heading:180,incline:0,tilt:0,bubbles:[],layers:[],objects:[],controls:[],basemap:null,style:null,bounds:[]}}}s.serializers=o.extend({layers:{deserialize:r.unpack_models},objects:{deserialize:r.unpack_models},controls:{deserialize:r.unpack_models},bubbles:{deserialize:r.unpack_models},style:{deserialize:r.unpack_models},basemap:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class u extends r.DOMWidgetView{remove_layer_view(t){this.obj.removeLayer(t.obj),t.remove()}add_layer_model(t){return console.log("MANN "+t+" "+t.state_change),this.create_child_view(t,{map_view:this}).then((t=>(t.obj?(this.obj.addLayer(t.obj),this.displayed.then((()=>{t.trigger("displayed",this)}))):console.log("MAP CHILD VIEW IS INCORRECT"),t)))}remove_object_view(t){this.obj.removeObject(t.obj),t.remove()}add_object_model(t){return console.log("Object MANN "+t+" "+t.state_change),this.create_child_view(t,{map_view:this}).then((t=>(this.obj.addObject(t.obj),this.displayed.then((()=>{t.trigger("displayed",this)})),t)))}remove_control_view(t){"SplitMapControl"===t.model.get("name")?(this.el.removeChild(t.main_map_container),this.map_container.style.width="100%",this.map_container.style.height="100%"):this.ui.removeControl(t.model.get("name")),t.remove()}add_control_model(t){return console.log("MANN "+t+" "+t.state_change),this.create_child_view(t,{map_view:this}).then((t=>(t.obj?(console.log("ADDED Control"),this.ui.addControl(t.model.get("name"),t.obj),this.displayed.then((()=>{t.trigger("displayed",this)}))):console.log("MAP CHILD VIEW IS INCORRECT"),t)))}remove_bubble_view(t){this.ui.removeBubble(t.obj),t.remove()}add_bubble_model(t){return console.log("bubble "+t+" "+t.state_change),this.create_child_view(t,{map_view:this}).then((t=>(t.obj?(console.log("ADDED Bubble"),this.ui.addBubble(t.obj),this.displayed.then((()=>{t.trigger("displayed",this)}))):console.log("BUBBLE CHILD VIEW IS INCORRECT"),t)))}render(){super.render(),this.el.classList.add("jupyter-widgets"),this.el.classList.add("mapjs-widgets"),this.map_container=document.createElement("div"),this.map_container.style.width="100%",this.map_container.style.height="100%",this.map_container.style.background="grey",this.el.appendChild(this.map_container),this.layer_views=new r.ViewList(this.add_layer_model,this.remove_layer_view,this),this.object_views=new r.ViewList(this.add_object_model,this.remove_object_view,this),this.control_views=new r.ViewList(this.add_control_model,this.remove_control_view,this),this.bubble_views=new r.ViewList(this.add_bubble_model,this.remove_bubble_view,this),console.log("HERE"),this.displayed.then(this.render_mapjs.bind(this))}render_mapjs(){this.create_obj().then((()=>(this.layer_views.update(this.model.get("layers")),this.object_views.update(this.model.get("objects")),this.control_views.update(this.model.get("controls")),this.bubble_views.update(this.model.get("bubbles")),this.mapjs_events(),this.model_events(),this)))}create_map(){var t=window.devicePixelRatio||1,e=new n.Z.Map(this.map_container,this.basemap,{center:{lat:this.model.get("center")[0],lng:this.model.get("center")[1]},zoom:this.model.get("zoom"),pixelRatio:t});let i=this.model.get("bounds"),r={heading:this.model.get("heading"),tilt:this.model.get("tilt"),incline:this.model.get("incline")};if(void 0!==i&&4==i.length){let t=new n.Z.geo.Rect(i[1],i[3],i[0],i[2]);r.bounds=t}e.getViewModel().setLookAtData(r),window.addEventListener("resize",(()=>e.getViewPort().resize())),this.behavior=new n.Z.mapevents.Behavior(new n.Z.mapevents.MapEvents(e)),this.obj=e,this.model.get("style")&&this.create_child_view(this.model.get("style")).then((t=>{this.obj.getBaseLayer().getProvider().setStyle(t.obj)})),this.ui=new n.Z.ui.UI(e),console.log("END OF CREATING OBJECT")}create_obj(){return this.layoutPromise.then((t=>{const e=this.model.get("basemap"),i=null!==e?this.create_child_view(e,{map_view:this.map_view}):Promise.resolve(null);return Promise.all([i]).then((t=>{this.el.global=this.el,console.log("SECOND HERE "+n.Z.service+" "+this.map_container+" "+this.model.get("api_key"));var e=window.devicePixelRatio||1;const i=t[0];var r=null!==i?i.obj:null;if(null===r){var o=new n.Z.service.Platform({apikey:this.model.get("api_key")}).createDefaultLayers({tileSize:1===e?256:512,ppi:1===e?void 0:320});this.basemap=o.vector.normal.map,this.create_map()}else this.basemap=r,this.create_map()}))}))}mapjs_events(){this.obj.addEventListener("mapviewchangeend",(t=>{console.log("HEREE EVENT CHANGE CENTER ");var e=t.target.getCenter();this.model.set("center",[e.lat,e.lng]),this.model.set("zoom",t.target.getZoom()),this.model.set("heading",t.target.getViewModel().getLookAtData().heading),this.model.set("tilt",t.target.getViewModel().getLookAtData().tilt),this.model.set("incline",t.target.getViewModel().getLookAtData().incline),this.model.save_changes()}))}model_events(){this.listenTo(this.model,"change:objects",(function(){this.object_views.update(this.model.get("objects"))}),this),this.listenTo(this.model,"change:layers",(function(){this.layer_views.update(this.model.get("layers"))}),this),this.listenTo(this.model,"change:controls",(function(){this.control_views.update(this.model.get("controls"))}),this),this.listenTo(this.model,"change:center",(function(){this.dirty||(this.dirty=!0,this.obj.setCenter({lat:this.model.get("center")[0],lng:this.model.get("center")[1]}),this.dirty=!1)}),this),this.listenTo(this.model,"change:zoom",(function(){this.dirty||(this.dirty=!0,this.obj.setZoom(this.model.get("zoom")),this.dirty=!1)}),this),this.listenTo(this.model,"change:heading",(function(){this.dirty||(this.dirty=!0,this.obj.getViewModel().setLookAtData({heading:this.model.get("heading")}),this.dirty=!1)}),this),this.listenTo(this.model,"change:tilt",(function(){this.dirty||(this.dirty=!0,this.obj.getViewModel().setLookAtData({tilt:this.model.get("tilt")}),this.dirty=!1)}),this),this.listenTo(this.model,"change:incline",(function(){this.dirty||(this.dirty=!0,this.obj.getViewModel().setLookAtData({incline:this.model.get("incline")}),this.dirty=!1)}),this),this.listenTo(this.model,"change:bubbles",(function(){this.bubble_views.update(this.model.get("bubbles"))}),this),this.listenTo(this.model,"change:style",(function(){this.create_child_view(this.model.get("style")).then((t=>{this.obj.getBaseLayer().getProvider().setStyle(t.obj)}))}),this),this.listenTo(this.model,"change:basemap",(function(){this.create_child_view(this.model.get("basemap")).then((t=>{this.obj.setBaseLayer(t.obj)}))}),this),this.listenTo(this.model,"change:bounds",(function(){let t=this.model.get("bounds");if(void 0!==t&&4==t.length){let e=new n.Z.geo.Rect(t[1],t[3],t[0],t[2]);this.obj.getViewModel().setLookAtData({bounds:e})}}),this)}processPhosphorMessage(t){switch(super.processPhosphorMessage(t),t.type){case"resize":console.log("Phosphor resize"),this.obj&&this.obj.getViewPort().resize();break;case"after-show":console.log("Phosphor after-show"),this.obj.getViewPort().resize()}}}},5323:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ControlModel:()=>o,ControlView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"ControlView",_model_name:"ControlModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter"}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events()}))}}},4675:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DistanceMeasurementModel:()=>a,DistanceMeasurementView:()=>s});const n=i(5323),r=i(9146),o=i(6486);class a extends n.ControlModel{defaults(){return{_view_name:"DistanceMeasurementView",_model_name:"DistanceMeasurementModel",name:"DistanceMeasurement",alignment:"RIGHT_BOTTOM",start_icon:null,stopover_icon:null,end_icon:null,split_icon:null,line_style:{strokeColor:"rgba(18, 65, 145, .8)",lineWidth:6}}}}a.serializers=o.extend({start_icon:{deserialize:r.unpack_models},stopover_icon:{deserialize:r.unpack_models},end_icon:{deserialize:r.unpack_models},split_icon:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ControlView{create_obj(){const t=this.model.get("start_icon"),e=this.model.get("stopover_icon"),i=this.model.get("end_icon"),n=this.model.get("split_icon"),r=null!==t?this.create_child_view(t):Promise.resolve(null),a=null!==e?this.create_child_view(e):Promise.resolve(null),s=null!==i?this.create_child_view(i):Promise.resolve(null),u=null!==n?this.create_child_view(n):Promise.resolve(null);return Promise.all([r,a,s,u]).then((t=>{const e=t[0],i=t[1],n=t[2],r=t[3],a=null!==e?e.obj:null,s=null!==i?i.obj:null,u=null!==n?n.obj:null,l=null!=r?r.obj:null;var h={alignment:o.get(H.ui.LayoutAlignment,this.model.get("alignment"))};a&&(h.startIcon=a),s&&(h.stopoverIcon=s),u&&(h.endIcon=u),l&&(h.splitIcon=l),this.obj=new H.ui.DistanceMeasurement(h)}))}model_events(){}}},6485:(t,e,i)=>{"use strict";i.r(e),i.d(e,{FullscreenControlModel:()=>a,FullscreenControlView:()=>s});const n=i(5323),r=(i(9146),i(6486));i(6938),i(7954);class o extends H.ui.Control{constructor(t){var e;if(super(),this.map_view=t,this.options={position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},"onfullscreenchange"in document?e="fullscreenchange":"onmozfullscreenchange"in document?e="mozfullscreenchange":"onwebkitfullscreenchange"in document?e="webkitfullscreenchange":"onmsfullscreenchange"in document&&(e="MSFullscreenChange"),e){var i=this.bind(this,this._onFullscreenChange);document.addEventListener(e,i,!1)}}renderInternal(t,e){this.map=t,this.div=e.createElement("div"),this.div.className="H_ctl H_el H_grp",this.container=e.createElement("div"),this.container.className="mapjs-control-fullscreen",this.div.appendChild(this.container),this.link=e.createElement("a"),this.link.className="mapjs-control-fullscreen-button",this.link.href="#",this.container.appendChild(this.link),t.appendChild(this.div),super.renderInternal(t,e),this.link.addEventListener("click",this.bind(this,this._click),!1),this._toggleTitle()}bind(t,e){return function(){e.apply(t,arguments)}}_click(){this.toggleFullscreen(this.options)}_toggleTitle(){this.link.title=this.options.title[this.isFullscreen()]}isFullscreen(){return this._isFullscreen||!1}toggleFullscreen(t){var e=this.map_view.map_container;this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)}_enablePseudoFullscreen(t){t.classList.add("mapjs-pseudo-fullscreen"),this._setFullscreen(!0)}_disablePseudoFullscreen(t){t.classList.remove("mapjs-pseudo-fullscreen"),this._setFullscreen(!1)}_setFullscreen(t){this._isFullscreen=t;var e=this.map_view.map_container;t?e.classList.add("mapjs-fullscreen-on"):e.classList.remove("mapjs-fullscreen-on")}_onFullscreenChange(t){this.map_view.obj.getViewPort().resize();var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.map_view.map_container||this._isFullscreen?e!==this.map_view.map_container&&this._isFullscreen&&this._setFullscreen(!1):this._setFullscreen(!0),this._toggleTitle()}}class a extends n.ControlModel{defaults(){return{_view_name:"FullscreenControlView",_model_name:"FullscreenControlModel",name:"FullscreenControl",alignment:"TOP_LEFT"}}}class s extends n.ControlView{create_obj(){this.obj=new o(this.map_view),this.obj.setAlignment(r.get(H.ui.LayoutAlignment,this.model.get("alignment")))}model_events(){}}},5625:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LayersControlModel:()=>o,LayersControlView:()=>a});const n=i(5323),r=(i(9146),i(6486));class o extends n.ControlModel{defaults(){return{_view_name:"LayersControlView",_model_name:"LayersControlModel",name:"LayersControl",alignment:"RIGHT_TOP"}}}class a extends n.ControlView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}toggle_obj(){let t=this.model.get("name");return this.map_view.ui.getControl(t),this.map_view.ui.removeControl(t),Promise.resolve(this.create_obj()).then((()=>{this.map_view.ui.addControl(this.model.get("name"),this.obj)}))}model_events(){this.listenTo(this.map_view.model,"change:layers",(()=>{this.toggle_obj()}))}create_obj(){return Promise.all(this.map_view.layer_views.views).then((t=>{var e=t.reduce((function(t,e){return t[e.model.get("name")]=e.obj,t}),{});let i=[];for(let t in e){let n=new H.ui.MapSettingsControl;n.label=t,n.layer=e[t],i.push(n)}let n={alignment:r.get(H.ui.LayoutAlignment,this.model.get("alignment")),layers:i};this.obj=new H.ui.MapSettingsControl(n)}))}}},104:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MapSettingsControlModel:()=>a,MapSettingsControlView:()=>s});const n=i(5323),r=i(9146),o=i(6486);class a extends n.ControlModel{defaults(){return{_view_name:"MapSettingsControlView",_model_name:"MapSettingsControlModel",name:"mapsettings",basemaps:[],layers:[],alignment:"TOP_RIGHT"}}}a.serializers=o.extend({layers:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ControlView{remove_layer_view(t){t.remove()}create_obj(){var t=this.model.get("basemaps"),e=new H.service.Platform({apikey:this.map_view.model.get("api_key")}),i=window.devicePixelRatio||1,n=e.createDefaultLayers({tileSize:1===i?256:512,ppi:1===i?void 0:320}),a={vector:{normal:{map:n.vector.normal.map,truck:n.vector.normal.truck,traffic:n.vector.normal.traffic,trafficincidents:n.vector.normal.trafficincidents}},raster:{normal:{map:n.raster.normal.map,mapnight:n.raster.normal.mapnight,xbase:n.raster.normal.xbase,xbasenight:n.raster.normal.xbasenight,base:n.raster.normal.base,basenight:n.raster.normal.basenight,trafficincidents:n.raster.normal.trafficincidents,transit:n.raster.normal.transit,labels:n.raster.normal.labels},satellite:{map:n.raster.satellite.map,xbase:n.raster.satellite.xbase,base:n.raster.satellite.base,labels:n.raster.satellite.labels},terrain:{map:n.raster.terrain.map,xbase:n.raster.terrain.xbase,base:n.raster.terrain.base,labels:n.raster.terrain.labels}}};return this.BaseLayers=[],t.forEach(((t,e)=>{var i=t.split("."),n=a[i[0]][i[1]][i[2]],r=new H.ui.MapSettingsControl;r.label=t,r.layer=n,this.BaseLayers.push(r)})),this.viewNames=[],this.viewArr=[],this.layer_views=new r.ViewList(this.add_layer_model,this.remove_layer_view,this),this.layer_views.update(this.model.get("layers")).then((()=>{var t=[];this.viewNames.forEach(((e,i)=>{var n=this.viewArr[i],r=new H.ui.MapSettingsControl;r.label=e,r.layer=n,t.push(r)}));var e={alignment:o.get(H.ui.LayoutAlignment,this.model.get("alignment")),baseLayers:this.BaseLayers,layers:t};this.obj=new H.ui.MapSettingsControl(e)}))}add_layer_model(t){return this.create_child_view(t.layer,{map_view:this.map_view}).then((e=>(this.viewNames.push(t.label),this.viewArr.push(e.obj),e)))}toggle_obj(){const t=this.model.get("name");return this.map_view.ui.removeControl(t),delete this.obj,Promise.resolve(this.create_obj()).then((()=>{this.map_view.ui.addControl(this.model.get("name"),this.obj)}))}model_events(){this.listenTo(this.model,"change:layers",(function(){this.toggle_obj()}),this),this.listenTo(this.model,"change:basemaps",(function(){this.toggle_obj()}),this)}}},7113:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ScaleBarModel:()=>o,ScaleBarView:()=>a});const n=i(5323),r=i(6486);class o extends n.ControlModel{defaults(){return{_view_name:"ScaleBarView",_model_name:"ScaleBarModel",name:"ScaleBar",alignment:"RIGHT_BOTTOM"}}}class a extends n.ControlView{create_obj(){var t={alignment:r.get(H.ui.LayoutAlignment,this.model.get("alignment"))};this.obj=new H.ui.ScaleBar(t)}model_events(){}}},3272:(t,e,n)=>{"use strict";n.r(e),n.d(e,{SearchControlModel:()=>h,SearchControlView:()=>c});const r=n(5323),o=n(9146),a=n(6486);n(6938),n(7954);var s=n(6338),u=n(4102);class l extends H.ui.Control{constructor(t,e){super(),this.map_view=t,this.options={position:"topleft",textPlaceholder:"Search...",textCancel:"Cancel",collapsed:!0,marker:null,layer:null,propertyName:"name",hideMarkerOnCollapse:!1,autoCollapseTime:1200,minLength:1,delayType:400,tooltipLimit:-1,buildTip:null,tipAutoSubmit:!0,autoType:!0,zoom:4,autoCollapse:!1,textErr:"Location not found",initial:!0,casesensitive:!1,lang:"en-US",limit:10},this.options.marker=e.marker,this.options.lang=e.lang,this.options.limit=e.limit,e.hasOwnProperty("zoom")&&(this.options.zoom=e.zoom),e.hasOwnProperty("layer")&&(this.options.layer=e.layer),e.hasOwnProperty("property_name")&&(this.options.propertyName=e.property_name),this._curReq=null}renderInternal(t,e){this.map=t,this.doc=e,this.container=e.createElement("div"),this.container.className="mapjs-control-search",t.appendChild(this.container),super.renderInternal(t,e),this._inputMinSize=this.options.textPlaceholder?this.options.textPlaceholder.length:10,this._input=this._createInput(this.options.textPlaceholder,"search-input"),this._tooltip=this._createTooltip("search-tooltip"),this._cancel=this._createCancel(this.options.textCancel,"search-cancel"),this._button=this._createButton(this.options.textPlaceholder,"search-button"),this._alert=this._createAlert("search-alert"),!1===this.options.collapsed&&this.expand(this.options.collapsed),this._markerSearch=this.options.marker,this._layer=this.options.layer,this._layer&&this.setLayer(this._layer)}bind(t,e){return function(){e.apply(t,arguments)}}_createAlert(t){var e=this.doc.createElement("div");return e.className=t,e.style.display="none",this.container.appendChild(e),e.addEventListener("click",this.bind(this,this.hideAlert),!1),e}_createInput(t,e){var i=this,n=this.doc.createElement("label"),r=this.doc.createElement("input");return n.className=e,r.className=e,r.type="text",r.size=this._inputMinSize,r.value="",r.autocomplete="off",r.autocorrect="off",r.autocapitalize="off",r.placeholder=t,r.style.display="none",r.role="search",r.id=r.role+r.type+r.size,n.htmlFor=r.id,n.style.display="none",n.value=t,this.container.appendChild(n),this.container.appendChild(r),r.addEventListener("keyup",this.bind(this,this._handleKeypress),!1),r.addEventListener("paste",(function(t){setTimeout((function(t){i._handleKeypress(t)}),10,t)}),!1),r.addEventListener("blur",this.bind(this,this.collapseDelayed),!1),r.addEventListener("focus",this.bind(this,this.collapseDelayedStop),!1),r}_createTooltip(t){var e=this.doc.createElement("ul");return e.className=t,e.style.display="none",this.container.appendChild(e),e.addEventListener("blur",this.bind(this,this.collapseDelayed),!1),e.addEventListener("mousewheel",this.bind(this,this.collapseDelayedStop),!1),e.addEventListener("mouseover",this.bind(this,this.collapseDelayedStop),!1),e}_createCancel(t,e){var i=this.doc.createElement("a");return i.className=e,i.href="#",i.title=t,i.style.display="none",i.innerHTML="<span>&otimes;</span>",this.container.appendChild(i),i.addEventListener("click",this.bind(this,this.cancel),!1),i}_createButton(t,e){var i=this.doc.createElement("a");return i.className=e,i.href="#",i.title=t,this.container.appendChild(i),i.addEventListener("click",this.bind(this,this._handleSubmit),!1),i.addEventListener("focus",this.bind(this,this.collapseDelayedStop),!1),i.addEventListener("blur",this.bind(this,this.collapseDelayed),!1),i}setLayer(t){return this._layer=t,this.map_view.obj.addLayer(this._layer.obj),this}_handleSubmit(){if(this._hideAutoType(),this.hideAlert(),this._hideTooltip(),"none"==this._input.style.display)this.expand();else if(""===this._input.value)this.collapse();else{var t=this._getLocation(this._input.value);!1===t?this.showAlert():(this.showLocation(t,this._input.value),t.hasOwnProperty("feature")&&(this._foundFeature=t.feature),this.dispatchEvent("search:locationfound"))}}showAlert(t){var e=this;return t=t||this.options.textErr,this._alert.style.display="block",this._alert.innerHTML=t,clearTimeout(this.timerAlert),this.timerAlert=setTimeout((function(){e.hideAlert()}),this.options.autoCollapseTime),this}_getLocation(t){return!!this._recordsCache.hasOwnProperty(t)&&this._recordsCache[t]}_defaultMoveToLocation(t,e,i){this.map_view.obj.setCenter(t),this.map_view.obj.setZoom(this.options.zoom)}showLocation(t,e){return this._markerSearch&&(this._markerSearch.setGeometry(t),this.map_view.obj.addObject(this._markerSearch)),this._defaultMoveToLocation(t,e,self._map),this.options.autoCollapse&&self.collapse(),this}hideAlert(){return this._alert.style.display="none",this}_hideAutoType(){var t;if((t=this._input.selection)&&t.empty)t.empty();else if(this._input.createTextRange){(t=this._input.createTextRange()).collapse(!0);var e=this._input.value.length;t.moveStart("character",e),t.moveEnd("character",e),t.select()}else this._input.getSelection&&this._input.getSelection().removeAllRanges(),this._input.selectionStart=this._input.selectionEnd}expand(t){return t="boolean"!=typeof t||t,this._input.style.display="block",this.container.classList.add("search-exp"),!1!==t&&(this._input.focus(),this.map_view.on("dragstart click",this.collapse,this)),this}collapse(){return this._hideTooltip(),this.cancel(),this._alert.style.display="none",this._input.blur(),this.options.collapsed&&(this._input.style.display="none",this._cancel.style.display="none",this.container.classList.remove("search-exp"),this.options.hideMarkerOnCollapse&&this.map_view.removeLayer(this._markerSearch),this.map_view.off("dragstart click",this.collapse,this)),this}collapseDelayed(){var t=this;return this.options.autoCollapse?(clearTimeout(this.timerCollapse),this.timerCollapse=setTimeout((function(){t.collapse()}),this.options.autoCollapseTime),this):this}collapseDelayedStop(){return clearTimeout(this.timerCollapse),this}_hideTooltip(){return this._tooltip.style.display="none",this._tooltip.innerHTML="",0}cancel(){return this._input.value="",this._handleKeypress({keyCode:8}),this._input.size=this._inputMinSize,this._input.focus(),this._cancel.style.display="none",this._hideTooltip(),this}_get_loction(t){if("MultiPolygon"==t.geometry.type)var e=u.multiPolygon(t.geometry.coordinates),i=s.default(e).geometry.coordinates;else"Polygon"==t.geometry.type?(e=u.polygon(t.geometry.coordinates),i=s.default(e).geometry.coordinates):"Point"==t.geometry.type?i=t.geometry.coordinates:"LineString"==t.geometry.type&&(e=u.lineString(t.geometry.coordinates),i=s.default(e).geometry.coordinates);return i}_searchInLayer(t,e,i){var n=this;if("FeatureCollection"==t.parsedData.type)t.parsedData.features.forEach((function(t,r){var o=n._get_loction(t);e[t.properties[i]]={lat:o[1],lng:o[0],feature:t}}));else if("Feature"==t.parsedData.type){var r=this._get_loction(t.parsedData);e[t.parsedData.properties[i]]={lat:r[1],lng:r[0]}}}_recordsFromLayer(t){var e={},i=this.options.propertyName;return this._searchInLayer(t,e,i),e}_defaultFilterData(t,e){var i,n,r,o={};if(""===(t=t.replace(/[.*+?^${}()|[\]\\]/g,"")))return[];for(var a in i=this.options.initial?"^":"",n=this.options.casesensitive?void 0:"i",r=new RegExp(i+t,n),e)r.test(a)&&(o[a]=e[a]);return o}_fillRecordsCache(){var t,e=this,i=this._input.value;if(this._curReq&&this._curReq.abort&&this._curReq.abort(),this.container.classList.add("search-load"),this.options.layer)this._recordsCache=this._recordsFromLayer(this._layer),t=this._defaultFilterData(this._input.value,this._recordsCache),this.showTooltip(t),this.container.classList.remove("search-load");else{const t=new H.service.Platform({apikey:this.map_view.model.get("api_key")}).getSearchService();var n={q:i,limit:this.options.limit,lang:this.options.lang};this._curReq=t.geocode(n,(function(t){e._recordsCache=e._formatData.call(e,t),e.showTooltip(e._recordsCache),e.container.classList.remove("search-load")}),console.error)}}_formatData(t){var e={};return t.items.length>0&&t.items.forEach((function(t,i){var n=t.position,r=t.address.label;e[r]=new H.geo.Point(n.lat,n.lng)})),e}showTooltip(t){if(this._countertips=0,this._tooltip.innerHTML="",this._tooltip.currentSelection=-1,this.options.tooltipLimit)for(var e in t){if(this._countertips===this.options.tooltipLimit)break;this._countertips++,this._tooltip.appendChild(this._createTip(e,t[e]))}return this._countertips>0?(this._tooltip.style.display="block",this._autoTypeTmp&&this._autoType(),this._autoTypeTmp=this.options.autoType):this._hideTooltip(),this._tooltip.scrollTop=0,this._countertips}_autoType(){var t=this._input.value.length,e=this._tooltip.firstChild?this._tooltip.firstChild._text:"",i=e.length;if(0===e.indexOf(this._input.value))if(this._input.value=e,this._handleAutoresize(),this._input.createTextRange){var n=this._input.createTextRange();n.collapse(!0),n.moveStart("character",t),n.moveEnd("character",i),n.select()}else this._input.setSelectionRange?this._input.setSelectionRange(t,i):this._input.selectionStart&&(this._input.selectionStart=t,this._input.selectionEnd=i)}_createTip(t,e){var i,n=this;return(i=this.doc.createElement("div")).className="search-tip",i.innerHTML=t,this.container.classList.add("search-tip"),i._text=t,this.options.tipAutoSubmit&&i.addEventListener("click",(function(e){n._input.value=t,n._handleAutoresize(),n._input.focus(),n._hideTooltip(),n._handleSubmit()}),!1),i}_handleKeypress(t){var e=this;switch(t.keyCode){case 27:this.collapse();break;case 13:(1==this._countertips||this.options.firstTipSubmit&&this._countertips>0)&&-1==this._tooltip.currentSelection&&this._handleArrowSelect(1),this._handleSubmit();break;case 38:this._handleArrowSelect(-1);break;case 40:this._handleArrowSelect(1);break;case 8:case 45:case 46:this._autoTypeTmp=!1;break;case 37:case 39:case 16:case 17:case 35:case 36:break;default:this._input.value.length?this._cancel.style.display="block":this._cancel.style.display="none",this._input.value.length>=this.options.minLength?(clearTimeout(this.timerKeypress),this.timerKeypress=setTimeout((function(){e._fillRecordsCache()}),this.options.delayType)):this._hideTooltip()}this._handleAutoresize()}_handleArrowSelect(t){var e=this._tooltip.hasChildNodes()?this._tooltip.childNodes:[];for(i=0;i<e.length;i++)this.container.classList.remove(e[i],"search-exp");if(1==t&&this._tooltip.currentSelection>=e.length-1)this.container.classList.add(e[this._tooltip.currentSelection],"search-tip-select");else if(-1==t&&this._tooltip.currentSelection<=0)this._tooltip.currentSelection=-1;else if("none"!=this._tooltip.style.display){this._tooltip.currentSelection+=t,this.container.classList.add(e[this._tooltip.currentSelection],"search-tip-select"),this._input.value=e[this._tooltip.currentSelection]._text;var n=e[this._tooltip.currentSelection].offsetTop;n+e[this._tooltip.currentSelection].clientHeight>=this._tooltip.scrollTop+this._tooltip.clientHeight?this._tooltip.scrollTop=n-this._tooltip.clientHeight+e[this._tooltip.currentSelection].clientHeight:n<=this._tooltip.scrollTop&&(this._tooltip.scrollTop=n)}}_handleAutoresize(){var t;this._input.style.maxWidth!==this.map_view.map_container.offsetWidth&&(t=this.map_view.map_container.clientWidth,t-=83,this._input.style.maxWidth=t.toString()+"px"),this.options.autoResize&&this.container.offsetWidth+20<this.map_view.map_container.offsetWidth&&(this._input.size=this._input.value.length<this._inputMinSize?this._inputMinSize:this._input.value.length)}}class h extends r.ControlModel{defaults(){return{_view_name:"SearchControlView",_model_name:"SearchControlModel",name:"SearchControl",alignment:"LEFT_TOP",zoom:4,lang:"en-US",limit:10,marker:null,layer:null}}}h.serializers=a.extend({marker:{deserialize:o.unpack_models},layer:{deserialize:o.unpack_models}},o.DOMWidgetModel.serializers);class c extends r.ControlView{create_obj(){console.log("Creating SearchControl");const t=this.model.get("marker"),e=this.model.get("zoom"),i=this.model.get("layer"),n=this.model.get("property_name"),r=this.model.get("lang"),o=this.model.get("limit"),s=null!==t?this.create_child_view(t,{map_view:this.map_view}):Promise.resolve(null),u=null!==i?this.create_child_view(i,{map_view:this.map_view}):Promise.resolve(null);return Promise.all([s,u]).then((t=>{const i=t[0],s=t[1];var u={marker:null!==i?i.obj:null,zoom:e,lang:r,limit:o,property_name:n,layer:null!==s?s:null};this.obj=new l(this.map_view,u),this.obj.setAlignment(a.get(H.ui.LayoutAlignment,this.model.get("alignment")))}))}model_events(){null!==this.model.get("layer")&&this.obj.addEventListener("search:locationfound",(t=>{this.send({event:"found",feature:t.target._foundFeature})}))}}},8873:(t,e,i)=>{"use strict";i.r(e),i.d(e,{SplitMapControlModel:()=>s,SplitMapControlView:()=>u});const n=i(5323),r=i(9146),o=i(6486);i(6938),i(7954),i(6489);class a extends H.ui.Control{constructor(t,e,i,n,r,o,a){super(),this.setLeftLayers(e),this.setRightLayers(i),this.map_view=t,this.left_map_obj=n,this.right_map_obj=r,this.left_container=o,this.right_container=a,this.options={thumbSize:42,padding:0}}renderInternal(t,e){this._container=e.createElement("div"),this._container.className="leaflet-sbs";var i=this._container;i.style.width="100%",i.style.top="50%",this._divider=e.createElement("div"),this._divider.className="leaflet-sbs-divider",this._range=e.createElement("input"),this._range.className="leaflet-sbs-range";var n=this._range;this._container.appendChild(this._divider),this._container.appendChild(this._range),this.map_view.appendChild(this._container),super.renderInternal(t,e),n.type="range",n.min=0,n.max=1,n.step="any",n.value=.5,n.style.paddingLeft=n.style.paddingRight=this.options.padding+"px",this.range_input=n,this._addEvents(),this._updateLayers()}setLeftLayers(t){return this._leftLayer=t,this}setRightLayers(t){return this._rightLayer=t,this}asArray(t){return"undefined"===t?[]:Array.isArray(t)?t:[t]}getPosition(){var t=this._range.value,e=(.5-t)*(2*this.options.padding+this.options.thumbSize);return this.map_view.clientWidth*t+e}_addEvents(){this._range,this._map,this.range_input.addEventListener("input",this.bind(this,this._updateLayers),!1),this.range_input.addEventListener("change",this.bind(this,this._updateLayers),!1),window.addEventListener("resize",this.bind(this,this._updateLayers),!1)}getRangeEvent(t){return"oninput"in t?"input":"change"}bind(t,e){return function(){e.apply(t,arguments)}}_updateLayers(){this._updateClip()}_updateClip(){var t={x:0,y:0},e={x:this.map_view.clientWidth,y:this.map_view.clientHeight},i=t.x+this.getPosition(),n=this.getPosition();this._divider.style.left=n+"px";var r="rect("+[t.y,i,e.y,t.x].join("px,")+"px)",o="rect("+[t.y,e.x,e.y,i].join("px,")+"px)";this._leftLayer&&(this.left_container.style.clip=r),this._rightLayer&&(this.right_container.style.clip=o)}}class s extends n.ControlModel{defaults(){return{_view_name:"SplitMapControlView",_model_name:"SplitMapControlModel",name:"SplitMapControl",left_layer:null,right_layer:null}}}s.serializers=o.extend({left_layer:{deserialize:r.unpack_models},right_layer:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class u extends n.ControlView{create_obj(){return this.main_map_container=document.createElement("div"),this.main_map_container.style.width="100%",this.main_map_container.style.height="100%",this.main_map_container.style.position="relative",this.main_map_container.id="main_map_container",this.map_view.el.appendChild(this.main_map_container),this.create_child_view(this.model.get("left_layer"),{map_view:this.map_view,instance:this}).then((t=>this.create_child_view(this.model.get("right_layer"),{map_view:t.map_view,instance:t.options.instance,left_layer:t}).then((t=>{this.instance=t.options.instance,this.instance.map_view.map_container.style.width="0%",this.instance.map_view.map_container.style.height="0%",this.instance.left_map_container=document.createElement("div"),this.instance.left_map_container.style.width="100%",this.instance.left_map_container.style.height="100%",this.instance.left_map_container.id="left_map_container",this.instance.left_map_container.style.position="absolute",this.instance.main_map_container.appendChild(this.instance.left_map_container);var e=new H.service.Platform({apikey:this.instance.map_view.model.get("api_key")}).createDefaultLayers();this.instance.left_map=new H.Map(this.instance.left_map_container,e.vector.normal.map,{center:{lat:this.instance.map_view.model.get("center")[0],lng:this.instance.map_view.model.get("center")[1]},zoom:this.instance.map_view.model.get("zoom"),pixelRatio:window.devicePixelRatio||1}),this.instance.left_behavior=new H.mapevents.Behavior(new H.mapevents.MapEvents(this.instance.left_map)),this.instance.left_map.addLayer(t.options.left_layer.obj),this.instance.right_map_container=document.createElement("div"),this.instance.right_map_container.style.width="100%",this.instance.right_map_container.style.height="100%",this.instance.right_map_container.id="right_map_container",this.instance.right_map_container.style.position="absolute",this.instance.main_map_container.appendChild(this.instance.right_map_container),e=new H.service.Platform({apikey:this.instance.map_view.model.get("api_key")}).createDefaultLayers(),this.instance.right_map=new H.Map(this.instance.right_map_container,e.vector.normal.map,{center:{lat:this.instance.map_view.model.get("center")[0],lng:this.instance.map_view.model.get("center")[1]},zoom:this.instance.map_view.model.get("zoom"),pixelRatio:window.devicePixelRatio||1}),this.instance.right_behavior=new H.mapevents.Behavior(new H.mapevents.MapEvents(this.instance.right_map)),this.instance.right_map.addLayer(t.obj);var i=this.instance.left_map,n=this.instance.right_map;window.addEventListener("resize",(()=>{i.getViewPort().resize(),n.getViewPort().resize()}));let r=this.instance.left_map.getViewModel(),o=this.instance.right_map.getViewModel();return this.instance.left_map.addEventListener("mapviewchange",(function(t){o.dirty?o.dirty=!1:(r.dirty=!0,o.setLookAtData(r.getLookAtData()))})),this.instance.right_map.addEventListener("mapviewchange",(function(t){r.dirty?r.dirty=!1:(o.dirty=!0,r.setLookAtData(o.getLookAtData()))})),this.obj=new a(this.main_map_container,t.options.left_layer,t,this.instance.left_map,this.instance.right_map,this.instance.left_map_container,this.instance.right_map_container),t}))))}model_events(){}}},2666:(t,e,i)=>{"use strict";i.r(e),i.d(e,{WidgetControlModel:()=>l,WidgetControlView:()=>h});const n=i(5323),r=i(9146),o=i(6486),a=i(6938),s=i(7954);class u extends H.ui.Control{constructor(t){super(),this.transparentBg=t.transparentBg}renderInternal(t,e){this.em=t,this.transparentBg||(this.div=e.createElement("div"),this.div.className="H_ctl H_el H_grp"),super.renderInternal(t,e)}setContent(t){this.transparentBg?this.em.appendChild(t):(this.div.appendChild(t),this.em.appendChild(this.div))}updateLayout(t){this.div&&Object.keys(t).forEach((e=>{this._container.style[e]=t[e]+"px"}))}}class l extends n.ControlModel{defaults(){return{_view_name:"WidgetControlView",_model_name:"WidgetControlModel",name:"WidgetControl",alignment:"RIGHT_BOTTOM",widget:null,transparent_bg:!1}}}l.serializers=o.extend({widget:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class h extends n.ControlView{set_widget(t){if(this.widget_view&&(this.widget_view.remove(),this.widget_view=void 0),t)return this.create_child_view(t).then((t=>{this.widget_view=t,this.displayed.then((()=>{this.widget_view.trigger("displayed",this),this.widget_view.displayed.then((()=>{a.MessageLoop.sendMessage(t.pWidget,s.Widget.Msg.BeforeAttach),this.obj.setContent(t.el),a.MessageLoop.sendMessage(t.pWidget,s.Widget.Msg.AfterAttach)}))}))}))}create_obj(){let t={transparentBg:this.model.get("transparent_bg")};this.obj=new u(t),this.obj.setAlignment(o.get(H.ui.LayoutAlignment,this.model.get("alignment"))),this.set_widget(this.model.get("widget"))}model_events(){}}},7496:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ZoomControlModel:()=>o,ZoomControlView:()=>a});const n=i(5323),r=i(6486);class o extends n.ControlModel{defaults(){return{_view_name:"ZoomControlView",_model_name:"ZoomControlModel",name:"ZoomControl",zoomSpeed:4,fractionalZoom:!0,alignment:"LEFT_TOP",slider:!1,sliderSnaps:!1}}}class a extends n.ControlView{create_obj(){var t={zoomSpeed:this.model.get("zoomSpeed"),fractionalZoom:this.model.get("fractionalZoom"),alignment:r.get(H.ui.LayoutAlignment,this.model.get("alignment")),slider:this.model.get("slider"),sliderSnaps:this.model.get("sliderSnaps")};this.obj=new H.ui.ZoomControl(t)}model_events(){}}},4094:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ZoomRectangleModel:()=>o,ZoomRectangleView:()=>a});const n=i(5323),r=i(6486);class o extends n.ControlModel{defaults(){return{_view_name:"ZoomRectangleView",_model_name:"ZoomRectangleModel",name:"ZoomRectangle",alignment:"BOTTOM_RIGHT"}}}class a extends n.ControlView{create_obj(){var t={alignment:r.get(H.ui.LayoutAlignment,this.model.get("alignment"))};this.obj=new H.ui.ZoomRectangle(t)}model_events(){}}},8841:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ElementModel:()=>o,ElementView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"ElementView",_model_name:"ElementModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter"}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events()}))}}},2435:(t,e,i)=>{"use strict";i.r(e),i.d(e,{InfoBubbleModel:()=>o,InfoBubbleView:()=>a});const n=i(8841),r=i(9146);class o extends n.ElementModel{defaults(){return{_view_name:"InfoBubbleView",_model_name:"InfoBubbleModel",position:null,content:""}}}o.serializers=_.extend({position:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class a extends n.ElementView{create_obj(){return this.create_child_view(this.model.get("position")).then((t=>{this.obj=new H.ui.InfoBubble(t.obj,{content:this.model.get("content")})}))}model_events(){}}},686:(t,e,i)=>{"use strict";i.r(e),i.d(e,{StyleModel:()=>r,StyleView:()=>o});const n=i(8841);i(9146);class r extends n.ElementModel{defaults(){return{_view_name:"StyleView",_model_name:"StyleModel",config:"",base_url:""}}}class o extends n.ElementView{create_obj(){const t=this.model.get("config"),e=this.model.get("base_url");this.obj=new H.map.render.webgl.Style(t,e)}model_events(){}}},3496:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GeometryModel:()=>o,GeometryView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"GeometryView",_model_name:"GeometryModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter"}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t)}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events()}))}}},1716:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LineStringModel:()=>r,LineStringView:()=>o});const n=i(3496);class r extends n.GeometryModel{defaults(){return{_view_name:"LineStringView",_model_name:"LineStringModel",points:[]}}}class o extends n.GeometryView{create_obj(){this.obj=new H.geo.LineString(this.model.get("points"))}model_events(){this.listenTo(this.model,"change:points",(function(){this.model.get("points").length;var t=this.model.get("points");this.obj.pushPoint({lat:t[t.length-3],lng:t[t.length-2],alt:t[t.length-1]})}),this)}}},9912:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MultiLineStringModel:()=>a,MultiLineStringView:()=>s});const n=i(3496),r=i(6486),o=i(9146);class a extends n.GeometryModel{defaults(){return{_view_name:"MultiLineStringView",_model_name:"MultiLineStringModel",lines:[]}}}a.serializers=r.extend({lines:{deserialize:o.unpack_models}},o.DOMWidgetModel.serializers);class s extends n.GeometryView{remove_layer_view(t){this.obj.remove(t.obj),t.remove()}add_layer_model(t){return this.create_child_view(t,{map_view:this}).then((t=>(this.obj.push(t.obj),t)))}create_obj(){return this.layer_views=new o.ViewList(this.add_layer_model,this.remove_layer_view,this),this.create_child_view(this.model.get("lines")[0]).then((t=>{this.obj=new H.geo.MultiLineString([t.obj])})),this.layer_views.update(this.model.get("lines"))}model_events(){this.listenTo(this.model,"change:lines",(function(){return this.layer_views.update(this.model.get("lines"))}),this)}}},5111:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MultiPolygonGeoModel:()=>a,MultiPolygonGeoView:()=>s});const n=i(3496),r=i(6486),o=i(9146);class a extends n.GeometryModel{defaults(){return{_view_name:"MultiPolygonGeoView",_model_name:"MultiPolygonGeoModel",polygons:[]}}}a.serializers=r.extend({polygons:{deserialize:o.unpack_models}},o.DOMWidgetModel.serializers);class s extends n.GeometryView{remove_polygon_view(t){this.obj.remove(t.obj),t.remove()}add_polygon_model(t){return this.create_child_view(t,{map_view:this}).then((t=>(this.obj.push(t.obj),t)))}create_obj(){return this.polygon_views=new o.ViewList(this.add_polygon_model,this.remove_polygon_view,this),this.create_child_view(this.model.get("polygons")[0]).then((t=>{this.obj=new H.geo.MultiPolygon([t.obj])})),this.polygon_views.update(this.model.get("polygons"))}model_events(){this.listenTo(this.model,"change:polygons",(function(){return this.polygon_views.update(this.model.get("polygons"))}),this)}}},6996:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PointModel:()=>r,PointView:()=>o});const n=i(3496);class r extends n.GeometryModel{defaults(){return{_view_name:"PointView",_model_name:"PointModel",lat:0,lng:0,alt:0}}}class o extends n.GeometryView{create_obj(){var t=this.model.get("lat"),e=this.model.get("lng"),i=this.model.get("alt");this.obj=new H.geo.Point(t,e,i)}model_events(){}}},4784:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PolygonGeoModel:()=>a,PolygonGeoView:()=>s});const n=i(3496),r=i(6486),o=i(9146);class a extends n.GeometryModel{defaults(){return{_view_name:"PolygonGeoView",_model_name:"PolygonGeoModel",linestring:null,holes:[]}}}a.serializers=r.extend({linestring:{deserialize:o.unpack_models},holes:{deserialize:o.unpack_models}},o.DOMWidgetModel.serializers);class s extends n.GeometryView{remove_layer_view(t){this.obj.removeInterior(t.obj),t.remove()}add_layer_model(t){return this.create_child_view(t,{map_view:this}).then((t=>(this.viewArr.push(t.obj),null!=this.obj&&this.obj.pushInterior(t.obj),t)))}create_obj(){return this.layer_views=new o.ViewList(this.add_layer_model,this.remove_layer_view,this),this.viewArr=[],this.layer_views.update(this.model.get("holes")).then((()=>this.create_child_view(this.model.get("linestring")).then((t=>{this.obj=new H.geo.Polygon(t.obj,this.viewArr)}))))}model_events(){this.listenTo(this.model,"change:holes",(function(){return this.layer_views.update(this.model.get("holes"))}),this),this.listenTo(this.model,"change:linestring",(function(){return this.create_child_view(this.model.get("linestring")).then((t=>{this.obj.setExterior(t.obj)}))}),this)}}},7116:(t,e,i)=>{"use strict";i.r(e),i.d(e,{RectModel:()=>r,RectView:()=>o});const n=i(3496);class r extends n.GeometryModel{defaults(){return{_view_name:"RectView",_model_name:"RectModel",top:0,left:0,bottom:0,right:0}}}class o extends n.GeometryView{create_obj(){var t=this.model.get("top"),e=this.model.get("left"),i=this.model.get("bottom"),n=this.model.get("right");this.obj=new H.geo.Rect(t,e,i,n)}model_events(){}}},3851:(t,e,i)=>{"use strict";i.r(e),i.d(e,{WKTLayerModel:()=>r,WKTLayerView:()=>o});const n=i(3496);class r extends n.GeometryModel{defaults(){return{_view_name:"WKTLayerView",_model_name:"WKTLayerModel",data:""}}}class o extends n.GeometryView{create_obj(){this.obj=new H.util.wkt.toGeometry(this.model.get("data"))}model_events(){}}},1568:(t,e,i)=>{t.exports=i(4907),t.exports.version=i(4147).version},4907:(t,e,i)=>{var n=i(6489),r=i(3243),o=i(6922),a=i(4220),s=i(5446),u=i(7282),l=i(4007),h=i(4287),c=i(1767),f=i(2151),p=i(1430),d=i(2802),g=i(8138),y=i(338),v=i(7355),m=i(8287),b=i(3480),_=i(3496),w=i(1716),x=i(9912),M=i(3851),E=i(6996),A=i(7116),k=i(4784),T=i(5111),S=i(4292),I=i(8960),L=i(1863),O=i(2699),C=i(4807),P=i(1703),R=i(6746),j=i(1455),N=i(5323),D=i(7496),z=i(104),B=i(4094),H=i(7113),F=i(2666),U=i(6485),V=i(4675),q=i(3272),G=i(8873),W=i(5625),Y=i(8841),K=i(2435),Z=i(686),X=i(5093),J=i(2994),$=i(4137);i(9661),i(4988),i(775),i(4474),i(3507),i(5595),t.exports={MapView:n.MapView,LayerView:r.LayerView,TileLayerView:o.TileLayerView,ObjectView:l.ObjectView,MarkerView:h.MarkerView,GeometryView:_.GeometryView,LineStringView:w.LineStringView,PolylineView:c.PolylineView,MultiLineStringView:x.MultiLineStringView,GeoJSONLayerView:a.GeoJSONLayerView,PolygonView:f.PolygonView,WKTLayerView:M.WKTLayerView,ProviderView:S.ProviderView,XYZView:I.XYZView,HeatMapView:L.HeatMapView,IconView:p.IconView,PointView:E.PointView,CircleView:d.CircleView,RectView:A.RectView,RectangleView:g.RectangleView,ControlView:N.ControlView,ZoomControlView:D.ZoomControlView,MapSettingsControlView:z.MapSettingsControlView,ZoomRectangleView:B.ZoomRectangleView,ScaleBarView:H.ScaleBarView,ElementView:Y.ElementView,InfoBubbleView:K.InfoBubbleView,WidgetControlView:F.WidgetControlView,GroupView:y.GroupView,FullscreenControlView:U.FullscreenControlView,PolygonGeoView:k.PolygonGeoView,MultiPolygonGeoView:T.MultiPolygonGeoView,StyleView:Z.StyleView,OverlayView:v.OverlayView,DistanceMeasurementView:V.DistanceMeasurementView,KmlLayerView:s.KmlLayerView,SearchControlView:q.SearchControlView,SplitMapControlView:G.SplitMapControlView,DomIconView:m.DomIconView,DomMarkerView:b.DomMarkerView,OMVView:O.OMVView,ServiceView:X.ServiceView,PlatformView:J.PlatformView,DefaultLayersView:$.DefaultLayersView,MapTileView:C.MapTileView,MarkerClusterView:P.MarkerClusterView,ObjectLayerView:u.ObjectLayerView,IMLView:R.IMLView,ImageTileProviderView:j.ImageTileProviderView,LayersControlView:W.LayersControlView,MapModel:n.MapModel,LayerModel:r.LayerModel,TileLayerModel:o.TileLayerModel,ObjectModel:l.ObjectModel,MarkerModel:h.MarkerModel,GeometryModel:_.GeometryModel,LineStringModel:w.LineStringModel,PolylineModel:c.PolylineModel,MultiLineStringModel:x.MultiLineStringModel,GeoJSONLayerModel:a.GeoJSONLayerModel,PolygonModel:f.PolygonModel,WKTLayerModel:M.WKTLayerModel,ProviderModel:S.ProviderModel,XYZModel:I.XYZModel,HeatMapModel:L.HeatMapModel,IconModel:p.IconModel,PointModel:E.PointModel,CircleModel:d.CircleModel,RectModel:A.RectModel,RectangleModel:g.RectangleModel,ControlModel:N.ControlModel,ZoomControlModel:D.ZoomControlModel,MapSettingsControlModel:z.MapSettingsControlModel,ZoomRectangleModel:B.ZoomRectangleModel,ScaleBarModel:H.ScaleBarModel,ElementModel:Y.ElementModel,InfoBubbleModel:K.InfoBubbleModel,WidgetControlModel:F.WidgetControlModel,GroupModel:y.GroupModel,FullscreenControlModel:U.FullscreenControlModel,PolygonGeoModel:k.PolygonGeoModel,MultiPolygonGeoModel:T.MultiPolygonGeoModel,StyleModel:Z.StyleModel,OverlayModel:v.OverlayModel,DistanceMeasurementModel:V.DistanceMeasurementModel,KmlLayerModel:s.KmlLayerModel,SearchControlModel:q.SearchControlModel,SplitMapControlModel:G.SplitMapControlModel,DomIconModel:m.DomIconModel,DomMarkerModel:b.DomMarkerModel,OMVModel:O.OMVModel,ServiceModel:X.ServiceModel,PlatformModel:J.PlatformModel,DefaultLayersModel:$.DefaultLayersModel,MapTileModel:C.MapTileModel,MarkerClusterModel:P.MarkerClusterModel,ObjectLayerModel:u.ObjectLayerModel,IMLModel:R.IMLModel,ImageTileProviderModel:j.ImageTileProviderModel,LayersControlModel:W.LayersControlModel}},4220:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GeoJSONLayerModel:()=>o,GeoJSONLayerView:()=>a});const n=i(3243);var r=i(4444);class o extends n.LayerModel{defaults(){return{_view_name:"GeoJSONLayerView",_model_name:"GeoJSONLayerModel",data:{},url:"",style:{},disable_legacy_mode:!0,evt_type:"tap",hover_style:{},show_bubble:!1,point_style:{}}}}class a extends n.LayerView{create_icon(t){var e=Object.assign({},{strokeColor:"white",lineWidth:1,fillColor:"#1b468d",fillOpacity:.7,radius:5},t),i='<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg">'+'<circle cx="8" cy="8" r="radius" '.replace("radius",e.radius).replace()+'fill="fillColor" '.replace("fillColor",e.fillColor)+'stroke="strokeColor" '.replace("strokeColor",e.strokeColor)+'stroke-width="lineWidth" '.replace("lineWidth",e.lineWidth)+'fill-opacity="fillOpacity"/> '.replace("fillOpacity",e.fillOpacity)+"</svg>";return new H.map.Icon(i,{anchor:{x:8,y:8}})}create_obj(){this.bubble=null;var t=this.model.get("point_style");if(0!=Object.keys(t).length)var e=this.create_icon(t);const i={style:i=>{const n=this.model.get("style"),r=i.data.style||{};if(0!=Object.keys(t).length&&i instanceof H.map.Marker)i.setIcon(e);else{var o=Object.assign({},n,r);void 0!==i.setStyle&&i.setStyle(o)}},disableLegacyMode:this.model.get("disable_legacy_mode")};var n;this.map_view,""===this.model.get("url")?((n=new H.data.geojson.Reader("",i)).parseData(this.model.get("data")),this.parsedData=this.model.get("data")):(n=new H.data.geojson.Reader(this.model.get("url"),i)).parse(),n.addEventListener("statechange",(t=>{if(t.state===H.data.AbstractReader.State.READY){var e=n.getParsedObjects();this.parsedData=e[0].toGeoJSON()}t.state===H.data.AbstractReader.State.ERROR&&console.warn("GeoJSON parsing error")}));var r=this.map_view.obj;n.getLayer().getProvider().addEventListener("tap",(t=>{var e=t.target.toGeoJSON();this.send({event:t.type,position:r.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),feature:e,properties:e.properties?e.properties:{},id:e.id})})),n.getLayer().getProvider().addEventListener("pointermove",(t=>{0!==Object.keys(this.model.get("hover_style")).length&&t.target.setStyle&&"function"==typeof t.target.setStyle&&t.target.setStyle(this.model.get("hover_style"));var e=t.target.toGeoJSON();this.send({event:t.type,position:r.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),feature:e,properties:e.properties?e.properties:{},id:e.id}),t.target.addEventListener("pointerleave",(t=>{const e=t.target.toGeoJSON(),i=this.model.get("style"),n=e.properties&&e.properties.style||{};var r=Object.assign({},i,n);t.target.setStyle&&"function"==typeof t.target.setStyle&&t.target.setStyle(r)}))})),this.obj=n.getLayer()}mapjs_events(){const t=this.obj.getProvider();var e=this.model.get("evt_type"),i=this.map_view.obj,n=this.map_view.ui;const o=this;this.model.get("show_bubble")&&t.addEventListener(e,(function(t){var e=i.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),a=t.target.getData(),s=r(a),u=Object.keys(s).map((t=>`<tr><td>${t}:</td><td>${s[t]}</td></tr>`));o.bubble?(o.bubble.setContent(`<div style="max-height:300px; overflow:auto"><table style="font-size:10px">${u.join("")}</table></div>`),o.bubble.setPosition(e),o.bubble.open()):(o.bubble=new H.ui.InfoBubble(e,{content:`<div style="max-height:300px; overflow:auto"><table style="font-size:10px">${u.join("")}</table></div>`}),n.addBubble(o.bubble)),i.setCenter(e,!0)}),!1)}model_events(){this.listenTo(this.model,"change:data",(function(){this.map_view.obj.removeLayer(this.obj),this.create_obj(),this.map_view.obj.addLayer(this.obj)}),this)}}},5446:(t,e,i)=>{"use strict";i.r(e),i.d(e,{KmlLayerModel:()=>r,KmlLayerView:()=>o});const n=i(3243);i(9146),i(6486);class r extends n.LayerModel{defaults(){return{_view_name:"KmlLayerView",_model_name:"KmlLayerModel",url:""}}}class o extends n.LayerView{create_obj(){var t=new H.data.kml.Reader(this.model.get("url"));this.obj=t.getLayer(),t.parse()}model_events(){}mapjs_events(){}}},3243:(t,e,i)=>{"use strict";i.r(e),i.d(e,{LayerModel:()=>o,LayerView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"LayerView",_model_name:"LayerModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter",name:""}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events(),this.mapjs_events()}))}}},7282:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ObjectLayerModel:()=>a,ObjectLayerView:()=>s});const n=i(3243),r=i(9146),o=i(6486);class a extends n.LayerModel{defaults(){return{_view_name:"ObjectLayerView",_model_name:"ObjectLayerModel",provider:null,tile_size:256,tile_cache_size:32,data_cache_size:512,pixel_ratio:0}}}a.serializers=o.extend({provider:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.LayerView{create_obj(){return this.create_child_view(this.model.get("provider"),{map_view:this.map_view}).then((t=>{this.provider=t.obj;var e=this.model.get("tile_size"),i=this.model.get("tile_cache_size"),n=this.model.get("data_cache_size"),r=this.model.get("pixel_ratio"),o={tileSize:e,tileCacheSize:i,dataCacheSize:n,pixelRatio:0===r?window.devicePixelRatio:r};this.obj=new H.map.layer.ObjectLayer(this.provider,o)}))}model_events(){}mapjs_events(){}}},6922:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TileLayerModel:()=>a,TileLayerView:()=>s});const n=i(3243),r=i(9146),o=i(6486);class a extends n.LayerModel{defaults(){return{_view_name:"TileLayerView",_model_name:"TileLayerModel",provider:null,style:{}}}}a.serializers=o.extend({provider:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.LayerView{create_obj(){return this.create_child_view(this.model.get("provider"),{map_view:this.map_view}).then((t=>{this.provider=t.obj,this.obj=new H.map.layer.TileLayer(this.provider,this.model.get("style"))}))}model_events(){this.listenTo(this.model,"change:style",(function(){var t=this.provider.getStyle();for(var e in this.model.get("style"))t.setProperty(e,this.model.get("style")[e]);t.setInteractive(["xyz"],!0)}),this)}mapjs_events(){}}},4132:(t,e,i)=>{i.p=document.querySelector("body").getAttribute("data-base-url")+"nbextensions/@here/map-widget-for-jupyter/",t.exports=i(1568)},2802:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CircleModel:()=>a,CircleView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"CircleView",_model_name:"CircleModel",center:null,radius:100,style:{},draggable:!1,extrusion:0,elevation:0}}}a.serializers=o.extend({center:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("center")).then((t=>{var e=this.model.get("radius");this.obj=new H.map.Circle(t.obj,e,{style:this.model.get("style"),extrusion:this.model.get("extrusion"),elevation:this.model.get("elevation")}),this.obj.draggable=this.model.get("draggable")}))}mapjs_events(){var t=this.map_view.obj;this.obj.addEventListener("dragstart",(function(e){var i=e.currentPointer,n=e.target,r=t.geoToScreen(n.getCenter()),o=new H.math.Point(i.viewportX-r.x,i.viewportY-r.y);n.setData({offset:o}),e.stopPropagation()})),this.obj.addEventListener("drag",(function(e){var i=e.currentPointer,n=e.target,r=n.getData().offset;n.setCenter(t.screenToGeo(i.viewportX-r.x,i.viewportY-r.y)),e.stopPropagation()}))}model_events(){this.listenTo(this.model,"change:radius",(function(){this.obj.setRadius(this.model.get("radius"))}),this),this.listenTo(this.model,"change:center",(function(){this.create_child_view(this.model.get("center")).then((t=>{this.obj.setCenter(t.obj)}))}),this)}}},8287:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DomIconModel:()=>r,DomIconView:()=>o});const n=i(4007);i(9146),i(6486);class r extends n.ObjectModel{defaults(){return{_view_name:"DomIconView",_model_name:"DomIconModel",element:""}}}class o extends n.ObjectView{create_obj(){this.obj=new H.map.DomIcon(this.model.get("element"))}mapjs_events(){}model_events(){}}},3480:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DomMarkerModel:()=>a,DomMarkerView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"DomMarkerView",_model_name:"DomMarkerModel",lat:0,lng:0,alt:0,icon:null}}}a.serializers=o.extend({icon:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("icon")).then((t=>{this.obj=new H.map.DomMarker({lat:this.model.get("lat"),lng:this.model.get("lng"),alt:this.model.get("alt")},{icon:t.obj})}))}mapjs_events(){}model_events(){}}},338:(t,e,i)=>{"use strict";i.r(e),i.d(e,{GroupModel:()=>a,GroupView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"GroupView",_model_name:"GroupModel",volatility:!1,objects:[]}}}a.serializers=o.extend({objects:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{remove_object_view(t){this.hasOwnProperty("obj")&&(this.obj.removeObject(t.obj),t.remove())}add_object_model(t){return console.log("Object GROUP "+t+" "+t.state_change),this.create_child_view(t,{map_view:this.map_view}).then((t=>(this.hasOwnProperty("obj")?this.obj.addObject(t.obj):this.objArr.push(t.obj),this.displayed.then((()=>{t.trigger("displayed",this)})),t)))}create_obj(){return this.objArr=[],this.object_views=new r.ViewList(this.add_object_model,this.remove_object_view,this),this.object_views.update(this.model.get("objects")).then((()=>{var t={volatility:this.model.get("volatility"),objects:this.objArr};this.obj=new H.map.Group(t)}))}mapjs_events(){}model_events(){this.listenTo(this.model,"change:objects",(function(){this.object_views.update(this.model.get("objects"))}),this)}}},1430:(t,e,i)=>{"use strict";i.r(e),i.d(e,{IconModel:()=>r,IconView:()=>o});const n=i(4007);i(9146),i(6486);class r extends n.ObjectModel{defaults(){return{_view_name:"IconView",_model_name:"IconModel",bitmap:"",height:256,width:256,anchor:null}}}class o extends n.ObjectView{create_obj(){var t={size:{h:this.model.get("height"),w:this.model.get("width")}};this.model.get("anchor")&&(t.anchor=this.model.get("anchor")),this.obj=new H.map.Icon(this.model.get("bitmap"),t)}mapjs_events(){}model_events(){}}},4287:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MarkerModel:()=>a,MarkerView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"MarkerView",_model_name:"MarkerModel",lat:0,lng:0,alt:0,evt_type:"pointerenter",data:"",info:null,show_bubble:!1,object:null,icon:null,draggable:!1}}}a.serializers=o.extend({object:{deserialize:r.unpack_models},icon:{deserialize:r.unpack_models},info:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){this.dirty=!1;const t=this.model.get("object"),e=this.model.get("icon"),i=this.model.get("data"),n=this.model.get("draggable"),r=null!==t?this.create_child_view(t):Promise.resolve(null),o=null!==e?this.create_child_view(e):Promise.resolve(null);return Promise.all([r,o]).then((t=>{const e=t[0],r=t[1],o=null!==e?e.obj:null,a=null!==r?r.obj:null;if(o)a?(this.obj=new H.map.Marker(o,{icon:a,data:i}),this.obj.draggable=n):(this.obj=new H.map.Marker(o,{data:i}),this.obj.draggable=n);else{var s={lat:this.model.get("lat"),lng:this.model.get("lng"),alt:this.model.get("alt")};a?(this.obj=new H.map.Marker(s,{icon:r.obj,data:i}),this.obj.draggable=n):(this.obj=new H.map.Marker(s,{data:i}),this.obj.draggable=n)}}))}mapjs_events(){var t=this.map_view.ui,e=this.map_view.obj,i=this,n=this.map_view.behavior;const r=this.model.get("info"),o=this.model.get("data");var a=this.model.get("evt_type");this.model.get("show_bubble")&&(o?this.obj.addEventListener(a,(function(e){var i=new H.ui.InfoBubble(e.target.getGeometry(),{content:e.target.getData()});t.addBubble(i)}),!1):r&&this.obj.addEventListener(a,(function(e){return i.create_child_view(r).then((e=>{t.addBubble(e.obj)}))}),!1)),this.obj.addEventListener("dragstart",(function(t){var i=t.target,r=t.currentPointer,o=e.geoToScreen(i.getGeometry());i.offset=new H.math.Point(r.viewportX-o.x,r.viewportY-o.y),n.disable()}),!1),this.obj.addEventListener("dragend",(function(t){t.target,t.currentPointer,n.enable()}),!1),this.obj.addEventListener("drag",(function(t){var n=t.target,r=t.currentPointer;n.setGeometry(e.screenToGeo(r.viewportX-n.offset.x,r.viewportY-n.offset.y));var o=e.screenToGeo(r.viewportX-n.offset.x,r.viewportY-n.offset.y);i.model.set("lat",o.lat),i.model.set("lng",o.lng),i.model.save_changes()}),!1)}model_events(){this.listenTo(this.model,"change:lat",(function(){this.dirty||(this.dirty=!0,this.obj.setGeometry({lat:this.model.get("lat"),lng:this.model.get("lng")}),this.dirty=!1)}),this),this.listenTo(this.model,"change:lng",(function(){this.dirty||(this.dirty=!0,this.obj.setGeometry({lat:this.model.get("lat"),lng:this.model.get("lng")}),this.dirty=!1)}),this)}}},4007:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ObjectModel:()=>o,ObjectView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"ObjectView",_model_name:"ObjectModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter",extrusion:0,elevation:0}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events(),this.mapjs_events()}))}}},7355:(t,e,i)=>{"use strict";i.r(e),i.d(e,{OverlayModel:()=>a,OverlayView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"OverlayView",_model_name:"OverlayModel",boundingBox:null,bitmap:"",min:1/0,max:1/0,opacity:1,visibility:!0,volatility:!1}}}a.serializers=o.extend({boundingBox:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("boundingBox"),{map_view:this.map_view}).then((t=>{this.obj=new H.map.Overlay(t.obj,this.model.get("bitmap"),{min:this.model.get("min"),max:this.model.get("max"),opacity:this.model.get("opacity"),visibility:this.model.get("visibility"),volatility:this.model.get("volatility")})}))}mapjs_events(){}model_events(){this.listenTo(this.model,"change:bitmap",(function(){this.obj.setBitmap(this.model.get("bitmap"))}),this)}}},2151:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PolygonModel:()=>a,PolygonView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"PolygonView",_model_name:"PolygonModel",object:null,style:{},draggable:!1}}}a.serializers=o.extend({object:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("object")).then((t=>{this.obj=new H.map.Polygon(t.obj,{style:this.model.get("style"),extrusion:this.model.get("extrusion"),elevation:this.model.get("elevation")}),this.obj.draggable=this.model.get("draggable")}))}mapjs_events(){var t=this.map_view.obj;this.obj.addEventListener("dragstart",(function(e){var i=e.currentPointer;e.target.setData({startCoord:t.screenToGeo(i.viewportX,i.viewportY)}),e.stopPropagation()})),this.obj.addEventListener("drag",(function(e){var i=e.currentPointer,n=e.target,r=n.getData().startCoord,o=t.screenToGeo(i.viewportX,i.viewportY),a=!1;if(!o.equals(r)){var s=n.getGeometry().getExterior(),u=new H.geo.LineString;s.eachLatLngAlt((function(t,e,i){var n=t-r.lat,s=e-r.lng,l=o.lat+n,h=o.lng+s;l>=90||l<=-90?a=!0:u.pushLatLngAlt(l,h,0)})),a||(n.setGeometry(new H.geo.Polygon(u)),n.setData({startCoord:o}))}e.stopPropagation()}))}model_events(){}}},1767:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PolylineModel:()=>a,PolylineView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"PolylineView",_model_name:"PolylineModel",object:null,style:{},draggable:!1}}}a.serializers=o.extend({object:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("object")).then((t=>{this.obj=new H.map.Polyline(t.obj,{style:this.model.get("style")}),this.obj.draggable=this.model.get("draggable")}))}mapjs_events(){var t=this.map_view.obj;this.obj.addEventListener("dragstart",(function(e){var i=e.currentPointer;e.target.setData({startCoord:t.screenToGeo(i.viewportX,i.viewportY)}),e.stopPropagation()})),this.obj.addEventListener("drag",(function(e){var i=e.currentPointer,n=e.target,r=n.getData().startCoord,o=t.screenToGeo(i.viewportX,i.viewportY),a=!1;if(!o.equals(r)){var s=n.getGeometry(),u=new H.geo.LineString;s.eachLatLngAlt((function(t,e,i){var n=t-r.lat,s=e-r.lng,l=o.lat+n,h=o.lng+s;l>=90||l<=-90?a=!0:u.pushLatLngAlt(l,h,0)})),a||(n.setGeometry(u),n.setData({startCoord:o}))}e.stopPropagation()}))}model_events(){}}},8138:(t,e,i)=>{"use strict";i.r(e),i.d(e,{RectangleModel:()=>a,RectangleView:()=>s});const n=i(4007),r=i(9146),o=i(6486);class a extends n.ObjectModel{defaults(){return{_view_name:"RectangleView",_model_name:"RectangleModel",bbox:null,style:{},draggable:!1,extrusion:0,elevation:0}}}a.serializers=o.extend({bbox:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ObjectView{create_obj(){return this.create_child_view(this.model.get("bbox")).then((t=>{this.obj=new H.map.Rect(t.obj,{style:this.model.get("style"),extrusion:this.model.get("extrusion"),elevation:this.model.get("elevation")}),this.obj.draggable=this.model.get("draggable")}))}mapjs_events(){var t=this.map_view.obj;this.obj.addEventListener("dragstart",(function(e){var i=e.currentPointer;e.target.setData({startCoord:t.screenToGeo(i.viewportX,i.viewportY)}),e.stopPropagation()})),this.obj.addEventListener("drag",(function(e){var i=e.currentPointer,n=e.target,r=n.getData().startCoord,o=t.screenToGeo(i.viewportX,i.viewportY);if(!o.equals(r)){var a=n.getGeometry().getBoundingBox(),s=a.getTop()+o.lat-r.lat,u=a.getLeft()+o.lng-r.lng,l=a.getBottom()+o.lat-r.lat,h=a.getRight()+o.lng-r.lng,c=new H.geo.Rect(s,u,l,h);if(s>=90||l<=-90)return;n.setBoundingBox(c),n.setData({startCoord:o})}e.stopPropagation()}))}model_events(){}}},1863:(t,e,i)=>{"use strict";i.r(e),i.d(e,{HeatMapModel:()=>r,HeatMapView:()=>o});const n=i(4292);i(9146);class r extends n.ProviderModel{defaults(){return{_view_name:"HeatMapView",_model_name:"HeatMapModel",colors:{},interpolate:!1,opacity:1,assume_values:!1,data:[],hardReload:!1,clear_flag:1}}}class o extends n.ProviderView{create_obj(){0!==Object.keys(this.model.get("colors")).length?(this.colors=new H.data.heatmap.Colors(this.model.get("colors"),this.model.get("interpolate")),this.obj=new H.data.heatmap.Provider({colors:this.colors,opacity:this.model.get("opacity"),assumeValues:this.model.get("assume_values")})):this.obj=new H.data.heatmap.Provider({opacity:this.model.get("opacity"),assumeValues:this.model.get("assume_values")}),0!=this.model.get("data").length&&(this.obj.addData(this.model.get("data"),this.model.get("hardReload")),this.model.set("data",[]))}model_events(){this.listenTo(this.model,"change:data",(function(){0!==Object.keys(this.model.get("data")).length&&(this.obj.addData(this.model.get("data"),this.model.get("hardReload")),this.model.set("data",[]))}),this),this.listenTo(this.model,"change:clear_flag",(function(){this.obj.clear()}),this),this.listenTo(this.model,"change:opacity",(function(){this.obj.setOpacity(this.model.get("opacity"))}),this)}mapjs_events(){}}},6746:(t,e,i)=>{"use strict";i.r(e),i.d(e,{IMLModel:()=>r,IMLView:()=>o});const n=i(4292);i(9146);class r extends n.ProviderModel{defaults(){return{_view_name:"IMLView",_model_name:"IMLModel",catalog_hrn:"",layer_id:""}}}class o extends n.ProviderView{create_obj(){const t=this.model.get("catalog_hrn"),e=this.model.get("layer_id"),i=new H.service.Platform({apikey:this.map_view.model.get("api_key")}).getIMLService();this.obj=new H.service.iml.Provider(i,t,e)}model_events(){}mapjs_events(){}}},1455:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ImageTileProviderModel:()=>r,ImageTileProviderView:()=>o});const n=i(4292);class r extends n.ProviderModel{defaults(){return{_view_name:"ImageTileProviderView",_model_name:"ImageTileProviderModel",url:"",min_zoom:0,max_zoom:22,opacity:1,tile_size:256,headers:{},attribution:""}}}class o extends n.ProviderView{create_obj(){const t=this.model.get("url"),e=this.model.get("min_zoom"),i=this.model.get("max_zoom"),n=this.model.get("opacity"),r=this.model.get("tile_size"),o=this.model.get("headers");this.obj=new H.map.provider.ImageTileProvider({min:e,max:i,opacity:n,tileSize:r,headers:o,getURL:function(e,i,n){return t.replace("{z}",n).replace("{x}",e).replace("{y}",i)}});const a=this.model.get("attribution");a&&(this.obj.getCopyrights=function(t,e){return[{label:a,alt:""}]})}model_events(){this.listenTo(this.model,"change:opacity",(function(){this.obj.setOpacity(this.model.get("opacity"))}),this)}mapjs_events(){}}},4807:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MapTileModel:()=>a,MapTileView:()=>s});const n=i(4292),r=i(9146),o=i(6486);class a extends n.ProviderModel{defaults(){return{_view_name:"MapTileView",_model_name:"MapTileModel",tile_type:"",scheme:"",tile_size:0,format:"",additional_params:null,path:"maptile/2.1",headers:{},type:"base",version:null,shards:null,platform:null}}}a.serializers=o.extend({platform:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class s extends n.ProviderView{create_obj(){const t=this.model.get("platform"),e=null!==t?this.create_child_view(t):Promise.resolve(null);return Promise.all([e]).then((t=>{const e=t[0],i=null!==e?e.obj:null;var n={type:this.model.get("type")};this.model.get("version")&&(n.version=this.model.get("version")),this.model.get("shards")&&(n.shards=this.model.get("shards")),this.model.get("headers")&&(n.headers=this.model.get("headers"));var r=i.getMapTileService(n),o=this.model.get("tile_type"),a=this.model.get("scheme"),s=this.model.get("tile_size"),u=this.model.get("format"),l={};this.model.get("additional_params")&&(l.additionalParameters=this.model.get("additional_params")),this.obj=r.createTileProvider(o,a,s,u,l)}))}model_events(){}mapjs_events(){}}},1703:(t,e,i)=>{"use strict";i.r(e),i.d(e,{MarkerClusterModel:()=>r,MarkerClusterView:()=>o});const n=i(4292);i(6486),i(9146);class r extends n.ProviderModel{defaults(){return{_view_name:"MarkerClusterView",_model_name:"MarkerClusterModel",data_points:[],eps:32,min_weight:2,min_zoom:0,max_zoom:22,show_bubble:!1,evt_type:"tap"}}}class o extends n.ProviderView{create_obj(){var t=this.model.get("eps"),e={minWeight:this.model.get("min_weight"),eps:t},i=this.model.get("min_zoom"),n=this.model.get("max_zoom"),r=this.model.get("data_points"),o=[];r.forEach(((t,e)=>{var i={};t.weight&&(i.weight=t.weight),t.data&&(i.data=t.data),o.push(new H.clustering.DataPoint(t.lat,t.lng,i.weight,i.data))})),this.obj=new H.clustering.Provider(o,{clusteringOptions:e,min:i,max:n})}model_events(){}mapjs_events(){var t=this.model.get("evt_type"),e=this.map_view.ui;this.bubble=null;var i=this;this.model.get("show_bubble")&&this.obj.addEventListener(t,(function(t){var n=t.target.getGeometry(),r=t.target.getData().a.data;i.bubble?(i.bubble.setContent(r),i.bubble.setPosition(n),i.bubble.open()):(i.bubble=new H.ui.InfoBubble(n,{content:r}),e.addBubble(i.bubble)),i.map_view.obj.setCenter(n,!0)}))}}},2699:(t,e,i)=>{"use strict";i.r(e),i.d(e,{OMVModel:()=>o,OMVView:()=>a});const n=i(4292),r=i(9146);class o extends n.ProviderModel{defaults(){return{_view_name:"OMVView",_model_name:"OMVModel",path:"",platform:null,style:null}}}o.serializers=_.extend({platform:{deserialize:r.unpack_models},style:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class a extends n.ProviderView{create_obj(){const t=this.model.get("platform"),e=this.model.get("style"),i=null!==e?this.create_child_view(e):Promise.resolve(null),n=null!==t?this.create_child_view(t):Promise.resolve(null);return Promise.all([n,i]).then((t=>{const e=t[0],i=t[1],n=null!==e?e.obj:null,r=null!==i?i.obj:null;var o=n.getOMVService({path:this.model.get("path")});this.obj=new H.service.omv.Provider(o,r)}))}model_events(){}mapjs_events(){}}},4292:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ProviderModel:()=>o,ProviderView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"ProviderView",_model_name:"ProviderModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter"}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t),this.map_view=this.options.map_view}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events(),this.mapjs_events()}))}}},8960:(t,e,i)=>{"use strict";i.r(e),i.d(e,{XYZModel:()=>o,XYZView:()=>a});const n=i(4292),r=i(9146);class o extends n.ProviderModel{defaults(){return{_view_name:"XYZView",_model_name:"XYZModel",token:"",space_id:"",evt_type:"tap",show_bubble:!1,style:null,platform:null}}}o.serializers=_.extend({style:{deserialize:r.unpack_models},platform:{deserialize:r.unpack_models}},r.DOMWidgetModel.serializers);class a extends n.ProviderView{create_obj(){const t=this.model.get("platform"),e=this.model.get("style"),i=null!==e?this.create_child_view(e):Promise.resolve(null),n=null!==t?this.create_child_view(t):Promise.resolve(null);return Promise.all([n,i]).then((t=>{const e=t[0],i=t[1],n=null!==e?e.obj:new H.service.Platform({apikey:this.map_view.model.get("api_key")});null!==i&&i.obj;let r=null;r=null!==e?n.getXYZService({toBypassToken:!0}):n.getXYZService({token:this.model.get("token")}),this.bubble=null,this.obj=new H.service.xyz.Provider(r,this.model.get("space_id"),{});var o=this.map_view.obj;this.obj.addEventListener("pointermove",(t=>{const e=t.target.getData();this.send({event:t.type,position:o.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),properties:e.properties,id:e.properties.id,space_id:e.source_layer})})),this.obj.addEventListener("tap",(t=>{const e=t.target.getData();this.send({event:t.type,position:o.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),properties:e.properties,id:e.properties.id,space_id:e.source_layer})})),this.obj.getStyle().setInteractive(["xyz"],!0)}))}model_events(){this.model.get("style")&&this.create_child_view(this.model.get("style")).then((t=>{this.obj.setStyle(t.obj)}))}mapjs_events(){var t=this.model.get("evt_type"),e=this.map_view.obj,i=this.map_view.ui;const n=this;this.model.get("show_bubble")&&this.obj.addEventListener(t,(function(t){var r=e.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),o=t.target.getData(),a=Object.keys(o.properties).map((t=>`<tr><td>${t}:</td><td>${o.properties[t]}</td></tr>`));n.bubble?(n.bubble.setContent(`<div style="max-height:300px; overflow:auto"><table style="font-size:10px">${a.join("")}</table></div>`),n.bubble.setPosition(r),n.bubble.open()):(n.bubble=new H.ui.InfoBubble(r,{content:`<div style="max-height:300px; overflow:auto"><table style="font-size:10px">${a.join("")}</table></div>`}),i.addBubble(n.bubble)),e.setCenter(r,!0)}))}}},4137:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DefaultLayersModel:()=>o,DefaultLayersView:()=>a});const n=i(5093),r=(i(9146),i(6486));class o extends n.ServiceModel{defaults(){return{_view_name:"DefaultLayersView",_model_name:"DefaultLayersModel",layer_name:"vector.normal.map",tile_size:512,ppi:void 0}}}class a extends n.ServiceView{initialize(t){super.initialize(t),this.map_view=this.options.parent}create_obj(){var t=null===this.model.get("ppi")?void 0:this.model.get("ppi"),e=new H.service.Platform({apikey:this.map_view.model.get("api_key")}).createDefaultLayers({tileSize:this.model.get("tile_size"),ppi:t});this.obj=r.get(e,this.model.get("layer_name"))}model_events(){}mapjs_events(){}}},2994:(t,e,i)=>{"use strict";i.r(e),i.d(e,{PlatformModel:()=>r,PlatformView:()=>o});const n=i(5093);i(9146);class r extends n.ServiceModel{defaults(){return{_view_name:"PlatformView",_model_name:"PlatformModel",api_key:null,services_config:null}}}class o extends n.ServiceView{create_obj(){var t=this.model.get("services_config");const e={},i={apikey:this.model.get("api_key")};t&&Object.keys(t).forEach((function(n){e[n]={baseUrl:new H.service.Url(t[n].scheme,t[n].host,t[n].path,i)}})),this.obj=new H.service.Platform({apikey:this.model.get("api_key"),servicesConfig:e})}model_events(){}mapjs_events(){}}},5093:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ServiceModel:()=>o,ServiceView:()=>a}),i(9644);const n=i(9146),r=i(6486);class o extends n.WidgetModel{defaults(){return{_view_name:"ServiceView",_model_name:"ServiceModel",_view_module:"@here/map-widget-for-jupyter",_model_module:"@here/map-widget-for-jupyter"}}}o.serializers=r.extend(n.WidgetModel.serializers);class a extends n.WidgetView{initialize(t){super.initialize(t)}render(){return Promise.resolve(this.create_obj()).then((()=>{this.model_events(),this.mapjs_events()}))}}},9644:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__}),module=__webpack_require__.hmd(module),function(){var n,aa=[];function ba(t){return function(){return aa[t].apply(this,arguments)}}function ca(t,e){return aa[t]=e}function da(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function ea(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:da(t)}}var fa="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},ha="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ja(t,e){if(e){var i=ha;t=t.split(".");for(var n=0;n<t.length-1;n++){var r=t[n];r in i||(i[r]={}),i=i[r]}(e=e(n=i[t=t[t.length-1]]))!=n&&null!=e&&fa(i,t,{configurable:!0,writable:!0,value:e})}}function ka(){ka=function(){},ha.Symbol||(ha.Symbol=la)}function ma(t,e){this.a=t,fa(this,"description",{configurable:!0,writable:!0,value:e})}ja("Array.prototype.find",(function(t){return t||function(t,e){t:{var i=this;i instanceof String&&(i=String(i));for(var n=i.length,r=0;r<n;r++){var o=i[r];if(t.call(e,o,r,i)){t=o;break t}}t=void 0}return t}})),ma.prototype.toString=function(){return this.a};var la=(b=0,function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new ma("jscomp_symbol_"+(e||"")+"_"+b++,e)}),b,qa;function na(){ka();var t=ha.Symbol.iterator;t||(t=ha.Symbol.iterator=ha.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&fa(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return oa(da(this))}}),na=function(){}}function oa(t){return na(),(t={next:t})[ha.Symbol.iterator]=function(){return this},t}function pa(t,e){na(),t instanceof String&&(t+="");var i=0,n={next:function(){if(i<t.length){var r=i++;return{value:e(r,t[r]),done:!1}}return n.next=function(){return{done:!0,value:void 0}},n.next()}};return n[Symbol.iterator]=function(){return n},n}if(ja("Array.prototype.keys",(function(t){return t||function(){return pa(this,(function(t){return t}))}})),"function"==typeof Object.setPrototypeOf)qa=Object.setPrototypeOf;else{var ra;t:{var sa={Ug:!0},ta={};try{ta.__proto__=sa,ra=ta.Ug;break t}catch(a){}ra=!1}qa=ra?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var ua=qa;ja("Object.setPrototypeOf",(function(t){return t||ua})),ja("Promise",(function(t){function e(t){this.A=0,this.b=void 0,this.a=[];var e=this.c();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function i(){this.a=null}function n(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;i.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var r=ha.setTimeout;i.prototype.c=function(t){r(t,0)},i.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var i=t[e];t[e]=null;try{i()}catch(t){this.f(t)}}}this.a=null},i.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.c=function(){function t(t){return function(n){i||(i=!0,t.call(e,n))}}var e=this,i=!1;return{resolve:t(this.o),reject:t(this.f)}},e.prototype.o=function(t){if(t===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.aa(t);else{t:switch(typeof t){case"object":var i=null!=t;break t;case"function":i=!0;break t;default:i=!1}i?this.m(t):this.g(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.f(t)}"function"==typeof e?this.s(e,t):this.g(t)},e.prototype.f=function(t){this.i(2,t)},e.prototype.g=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.A)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.A);this.A=t,this.b=e,this.j()},e.prototype.j=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)o.b(this.a[t]);this.a=null}};var o=new i;return e.prototype.aa=function(t){var e=this.c();t.Kf(e.resolve,e.reject)},e.prototype.s=function(t,e){var i=this.c();try{t.call(e,i.resolve,i.reject)}catch(t){i.reject(t)}},e.prototype.then=function(t,i){function n(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new e((function(t,e){r=t,o=e}));return this.Kf(n(t,r),n(i,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Kf=function(t,e){function i(){switch(n.A){case 1:t(n.b);break;case 2:e(n.b);break;default:throw Error("Unexpected state: "+n.A)}}var n=this;null==this.a?o.b(i):this.a.push(i)},e.resolve=n,e.reject=function(t){return new e((function(e,i){i(t)}))},e.race=function(t){return new e((function(e,i){for(var r=ea(t),o=r.next();!o.done;o=r.next())n(o.value).Kf(e,i)}))},e.all=function(t){var i=ea(t),r=i.next();return r.done?n([]):new e((function(t,e){function o(e){return function(i){a[e]=i,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,n(r.value).Kf(o(a.length-1),e),r=i.next()}while(!r.done)}))},e})),ja("Object.entries",(function(t){return t||function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push([e,t[e]]);return i}})),ja("Array.prototype.fill",(function(t){return t||function(t,e,i){var n=this.length||0;for(0>e&&(e=Math.max(0,n+e)),(null==i||i>n)&&(i=n),0>(i=Number(i))&&(i=Math.max(0,n+i)),e=Number(e||0);e<i;e++)this[e]=t;return this}}));var va="function"==typeof Object.assign?Object.assign:function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};ja("Object.assign",(function(t){return t||va})),ja("Math.log2",(function(t){return t||function(t){return Math.log(t)/Math.LN2}}));var wa=this||self;function ya(t,e,i){t=t.split("."),i=i||wa,t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||void 0===e?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=e}function za(){}function Aa(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Ba(t){var e=Aa(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ca(t){return"function"==Aa(t)}function Da(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ea="closure_uid_"+(1e9*Math.random()>>>0),Fa=0;function Ga(t,e,i){return t.call.apply(t.bind,arguments)}function Ha(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ia(t,e,i){return(Ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ga:Ha).apply(null,arguments)}function Ja(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function t(t,e){ya(t,e,void 0)}function u(t,e){function i(){}i.prototype=e.prototype,t.l=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.yp=function(t,i,n){for(var r=Array(arguments.length-2),o=2;o<arguments.length;o++)r[o-2]=arguments[o];return e.prototype[i].apply(t,r)}}function Ka(t){if(Error.captureStackTrace)Error.captureStackTrace(this,Ka);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function La(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Ma(){this.b=this.a=null}u(Ka,Error),Ka.prototype.name="CustomError",La.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t},La.prototype.put=function(t){this.f(t),100>this.b&&(this.b++,t.next=this.a,this.a=t)};var Oa=new La((function(){return new Na}),(function(t){t.reset()}));function Na(){this.next=this.b=this.a=null}Ma.prototype.add=function(t,e){var i=Oa.get();i.set(t,e),this.b?this.b.next=i:this.a=i,this.b=i},Ma.prototype.remove=function(){var t=null;return this.a&&(t=this.a,this.a=this.a.next,this.a||(this.b=null),t.next=null),t},Na.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Na.prototype.reset=function(){this.next=this.b=this.a=null};var Pa=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Qa(t,e){return-1!=t.indexOf(e)}function Ra(t,e){return t<e?-1:t>e?1:0}function Sa(t,e){for(var i in t)if(e.call(void 0,t[i],i,t))return!0;return!1}function Ta(t){for(var e in t)return!1;return!0}function Ua(t){var e,i={};for(e in t)i[e]=t[e];return i}var Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Xa;function Wa(t,e){for(var i,n,r=1;r<arguments.length;r++){for(i in n=arguments[r])t[i]=n[i];for(var o=0;o<Va.length;o++)i=Va[o],Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}}t:{var Ya=wa.navigator;if(Ya){var Za=Ya.userAgent;if(Za){Xa=Za;break t}}Xa=""}function $a(t){return Qa(Xa,t)}var ab=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var i=0;i<t.length;i++)if(i in t&&t[i]===e)return i;return-1};function bb(t,e){this.b=t===cb&&e||"",this.a=db}var db={},cb={},eb=new bb(cb,"");function fb(t,e){this.b=t===gb&&e||"",this.a=hb}fb.prototype.zc=function(){return 1};var hb={},gb={};function ib(){this.b="",this.c=jb,this.a=null}function kb(){var t=lb;return t instanceof ib&&t.constructor===ib&&t.c===jb?t.b:(Aa(t),"type_error:SafeHtml")}ib.prototype.zc=function(){return this.a};var jb={};function mb(t){var e=new ib;return e.b=t,e.a=0,e}mb("<!DOCTYPE html>");var lb=mb("");function nb(t){var e=new fb(gb,eb instanceof bb&&eb.constructor===bb&&eb.a===db?eb.b:"type_error:Const");e instanceof fb&&e.constructor===fb&&e.a===hb?e=e.b:(Aa(e),e="type_error:TrustedResourceUrl"),t.src=e.toString()}function ob(t){return ob[" "](t),t}function pb(t,e){var i=qb;return Object.prototype.hasOwnProperty.call(i,t)?i[t]:i[t]=e(t)}mb("<br>"),ob[" "]=za;var rb=$a("Opera"),sb=$a("Trident")||$a("MSIE"),tb=$a("Edge"),ub=$a("Gecko")&&!(Qa(Xa.toLowerCase(),"webkit")&&!$a("Edge"))&&!($a("Trident")||$a("MSIE"))&&!$a("Edge"),vb=Qa(Xa.toLowerCase(),"webkit")&&!$a("Edge"),yb,a;function xb(){var t=wa.document;return t?t.documentMode:void 0}t:{var zb="",Ab=(a=Xa,ub?/rv:([^\);]+)(\)|;)/.exec(a):tb?/Edge\/([\d\.]+)/.exec(a):sb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):vb?/WebKit\/(\S+)/.exec(a):rb?/(?:Version)[ \/]?(\S+)/.exec(a):void 0);if(Ab&&(zb=Ab?Ab[1]:""),sb){var Bb=xb();if(null!=Bb&&Bb>parseFloat(zb)){yb=String(Bb);break t}}yb=zb}var qb={},Db,Gb,Jb;function Cb(t){return pb(t,(function(){for(var e=0,i=Pa(String(yb)).split("."),n=Pa(String(t)).split("."),r=Math.max(i.length,n.length),o=0;0==e&&o<r;o++){var a=i[o]||"",s=n[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=Ra(e=0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Ra(0==a[2].length,0==s[2].length)||Ra(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}function Eb(t){var e=document;return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function Fb(t){wa.setTimeout((function(){throw t}),0)}function Hb(){var t=wa.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!$a("Presto")&&(t=function(){var t=Eb("IFRAME");t.style.display="none",nb(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(kb()),t.close();var i="callImmediate"+Math.random(),n="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=Ia((function(t){"*"!=n&&t.origin!=n||t.data!=i||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(i,n)}}}),void 0!==t&&!$a("Trident")&&!$a("MSIE")){var e=new t,i={},n=i;return e.port1.onmessage=function(){if(void 0!==i.next){var t=(i=i.next).wj;i.wj=null,t()}},function(t){n.next={wj:t},n=n.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in Eb("SCRIPT")?function(t){var e=Eb("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){wa.setTimeout(t,0)}}function Ib(t,e){Jb||Kb(),Lb||(Jb(),Lb=!0),Mb.add(t,e)}function Kb(){if(wa.Promise&&wa.Promise.resolve){var t=wa.Promise.resolve(void 0);Jb=function(){t.then(Nb)}}else Jb=function(){var t=Nb;!Ca(wa.setImmediate)||wa.Window&&wa.Window.prototype&&!$a("Edge")&&wa.Window.prototype.setImmediate==wa.setImmediate?(Gb||(Gb=Hb()),Gb(t)):wa.setImmediate(t)}}Db=wa.document&&sb?xb():void 0,!ub&&!sb||sb&&9<=Number(Db)||ub&&Cb("1.9.1"),sb&&Cb("9");var Lb=!1,Mb=new Ma;function Nb(){for(var t;t=Mb.remove();){try{t.a.call(t.b)}catch(t){Fb(t)}Oa.put(t)}Lb=!1}function Ob(t){if(this.A=Pb,this.i=void 0,this.c=this.a=this.b=null,this.f=this.g=!1,t!=za)try{var e=this;t.call(void 0,(function(t){Qb(e,Rb,t)}),(function(t){Qb(e,Sb,t)}))}catch(t){Qb(this,Sb,t)}}var Pb=0,Rb=2,Sb=3;function Tb(){this.next=this.c=this.b=this.f=this.a=null,this.g=!1}Tb.prototype.reset=function(){this.c=this.b=this.f=this.a=null,this.g=!1};var Ub=new La((function(){return new Tb}),(function(t){t.reset()}));function Vb(t,e,i){var n=Ub.get();return n.f=t,n.b=e,n.c=i,n}function Wb(t){if(t instanceof Ob)return t;var e=new Ob(za);return Qb(e,Rb,t),e}function Yb(t){return new Ob((function(e,i){i(t)}))}function Zb(){var t,e;return new $b(new Ob((function(i,n){t=i,e=n})),t,e)}function cc(t,e){if(t.A==Pb)if(t.b){var i=t.b;if(i.a){for(var n=0,r=null,o=null,a=i.a;a&&(a.g||(n++,a.a==t&&(r=a),!(r&&1<n)));a=a.next)r||(o=a);r&&(i.A==Pb&&1==n?cc(i,e):(o?((n=o).next==i.c&&(i.c=n),n.next=n.next.next):dc(i),ec(i,r,Sb,e)))}t.b=null}else Qb(t,Sb,e)}function fc(t,e){t.a||t.A!=Rb&&t.A!=Sb||hc(t),t.c?t.c.next=e:t.a=e,t.c=e}function ac(t,e,i,n){var r=Vb(null,null,null);return r.a=new Ob((function(t,o){r.f=e?function(i){try{var r=e.call(n,i);t(r)}catch(t){o(t)}}:t,r.b=i?function(e){try{var r=i.call(n,e);void 0===r&&e instanceof bc?o(e):t(r)}catch(t){o(t)}}:o})),r.a.b=t,fc(t,r),r.a}function Qb(t,e,i){if(t.A==Pb){t===i&&(e=Sb,i=new TypeError("Promise cannot resolve to itself")),t.A=1;t:{var n=i,r=t.m,o=t.o;if(n instanceof Ob){fc(n,Vb(r||za,o||null,t));var a=!0}else{if(n)try{var s=!!n.$goog_Thenable}catch(t){s=!1}else s=!1;if(s)n.then(r,o,t),a=!0;else{if(Da(n))try{var u=n.then;if(Ca(u)){ic(n,u,r,o,t),a=!0;break t}}catch(e){o.call(t,e),a=!0;break t}a=!1}}}a||(t.i=i,t.A=e,t.b=null,hc(t),e!=Sb||i instanceof bc||jc(t,i))}}function ic(t,e,i,n,r){function o(t){a||(a=!0,n.call(r,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,i.call(r,t))}),o)}catch(t){o(t)}}function hc(t){t.g||(t.g=!0,Ib(t.j,t))}function dc(t){var e=null;return t.a&&(e=t.a,t.a=e.next,e.next=null),t.a||(t.c=null),e}function ec(t,e,i,n){if(i==Sb&&e.b&&!e.g)for(;t&&t.f;t=t.b)t.f=!1;if(e.a)e.a.b=null,kc(e,i,n);else try{e.g?e.f.call(e.c):kc(e,i,n)}catch(t){lc.call(null,t)}Ub.put(e)}function kc(t,e,i){e==Rb?t.f.call(t.c,i):t.b&&t.b.call(t.c,i)}function jc(t,e){t.f=!0,Ib((function(){t.f&&lc.call(null,e)}))}Ob.prototype.then=function(t,e,i){return ac(this,Ca(t)?t:null,Ca(e)?e:null,i)},Ob.prototype.$goog_Thenable=!0,Ob.prototype.cancel=function(t){if(this.A==Pb){var e=new bc(t);Ib((function(){cc(this,e)}),this)}},Ob.prototype.m=function(t){this.A=Pb,Qb(this,Rb,t)},Ob.prototype.o=function(t){this.A=Pb,Qb(this,Sb,t)},Ob.prototype.j=function(){for(var t;t=dc(this);)ec(this,t,this.A,this.i);this.g=!1};var lc=Fb;function bc(t){Ka.call(this,t)}function $b(t,e,i){this.dl=t,this.resolve=e,this.reject=i}u(bc,Ka),bc.prototype.name="cancel";var x=this;function mc(){return Object.create(y,void 0)}var A=Ia,nc=String,oc=x.Object.freeze||function(t){return t};function pc(t){for(var e,i=Object.keys(t),n=i.length;n--;)Da(e=t[i[n]])&&pc(e);return oc(t)}function qc(t){var e=Aa(t);if("object"==e||"array"==e){if(Ca(t.clone))return t.clone();for(var i in e="array"==e?[]:{},t)t.hasOwnProperty(i)&&(e[i]=qc(t[i]));return e}return t}var B=self.eval("undefined"),y=self.eval("null");function rc(t,e){return nc(t).split(e!==B?e:" ")}var sc="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(t,e,i,n,r){if(!(e=t instanceof e)&&i)throw new D(i,n,tc(r)?r:t);return e}function uc(t,e){if(!0===(C(t,e)&&t.constructor===e))throw new TypeError("Illegal constructor "+vc(e))}function wc(t,e,i,n,r){if(!(e=xc(t)===e)&&i)throw new D(i,n,tc(r)?r:t);return e}function yc(t,e,i,n){return wc(t,"Array",e,i,n)}function tc(t){return t!==B}function zc(t){return"string"==typeof t}t("H.lang.isArray",yc),t("H.lang.isString",zc);var Ac=parseInt,Bc=parseFloat,E=isNaN;function Cc(t){return t===+t}function Dc(t){return!E(+t)}function xc(t){var e=Object[sc[0]][sc[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:typeof t}t("H.lang.isNumber",Cc),t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var Ec=[];function Fc(t){0>Ec.indexOf(t)&&Ec.push(t)}function vc(t,e,i,n){var r,o="",a=2>arguments.length;return a&&(e={H:x.H},i="",n=Ec.slice()),Gc(e,!0,(function(e,a){try{if(a=Hc(e,r=e[a]),!(Da(r)&&r.window===r&&r.self===r||Da(r)&&0<r.nodeType&&Ca(r.cloneNode))&&Da(r)){if(r===t)return o=i+"."+a,!0;if(0>n.indexOf(r)&&(n.push(r),o=vc(t,r,i+"."+a,n)))return!0}}catch(t){}})),a&&(o=o?o.substr(1).replace("."+sc[0]+".","#"):"~"+(Ca(t)?Ic(t)+"()":xc(t))),o}function Hc(t,e){var i=[];return Gc(t,!1,(function(t,n){t[n]===e&&i.push(n)})),i.sort(Jc)[0]}function Jc(t,e){return e.length-t.length}Fc(Ec);var Kc=Object[sc[0]][sc[2]];function Gc(t,e,i){var n;if(t){for(r in t)if((!e||Kc.call(t,r))&&i(t,r,!0))return;for(n=sc.length;n--;){var r=sc[n];if((!e||Kc.call(t,r))&&i(t,r,!1))break}}}function Ic(t){return(t=/^\s*function ([^\( ]+)/.exec(t))?t[1]:"anonymous"}function Lc(t,e,i){i[e]="#"+e}var Mc=!!x.__karma__;function Nc(){throw Error("unimplemented method")}function Oc(t,e){"status"in(e=e||{})&&(this.status=+e.status),"statusText"in e&&(this.statusText=e.statusText),this.ok=200<=this.status&&300>this.status,this.bodyUsed=!1,t?"string"==typeof t?this.c=t:ArrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||t.buffer)?this.a=t.buffer||t:Blob.prototype.isPrototypeOf(t)&&(this.b=t):this.c=""}function Pc(t){if(t.bodyUsed)return Yb(new TypeError("Already read"));t.bodyUsed=!0}function Qc(t){var e=new FileReader;return e.readAsText(t),new Ob((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))}function Rc(t,e,i){var n,r,o,a,s,u=i&&i.headers||{},l={},h=this;if(!Ca(e))throw new D(Rc,1,"function required");Wa(u,Uc.headers,u),Wa(l,Uc,i||{}),l.headers=u,this.b=e,this.T=n=new XMLHttpRequest,e=l.method;try{for(r in n.open(e,t,!0),u)u.hasOwnProperty(r)&&(o=u[r])&&n.setRequestHeader(r,o);n.withCredentials=!!l.withCredentials,a=A(h.a,h),s=+l.timeout||0,Sc?(Tc(h,"timeout",a),n.timeout=s):s&&(h.c=setTimeout((function(){n.abort(),h.a({type:"timeout"})}),s)),Tc(h,"error",a),Tc(h,"load",a),n.send(l.data)}catch(a){this.a({type:"cors"})}}t("H.net.Response",Oc),Oc.prototype.type="default",Oc.prototype.type=Oc.prototype.type,Oc.prototype.status=200,Oc.prototype.status=Oc.prototype.status,Oc.prototype.statusText="OK",Oc.prototype.statusText=Oc.prototype.statusText,Oc.error=function(){return Oc.a||(Oc.a=new Oc(null,{status:0,statusText:""}),Oc.a.type="error"),Oc.a},Oc.error=Oc.error,Oc.prototype.text=function(){var t=Pc(this);if(!t)if(this.c)t=Wb(this.c);else if(this.a){var e,i=(t=new Uint8Array(this.a)).length,n=Array(i);for(e=0;e<i;e++)n[e]=String.fromCharCode(t[e]);t=Wb(n.join(""))}else t=this.b?Qc(this.b):Yb("Unsupported response body");return t},Oc.prototype.json=function(){return this.text().then(x.JSON.parse)},Oc.prototype.blob=function(){var t,e=Pc(this);return e||(this.b?t=this.b:this.a&&(t=new Blob([this.a],{type:"application/octet-stream"}))),e||Wb(t)},Oc.prototype.arrayBuffer=function(){return this.a?Pc(this)||Wb(this.a.slice(0)):this.blob().then(Oc.b)},Oc.b=function(t){var e=new FileReader;return e.readAsArrayBuffer(t),new Ob((function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}}))},!Mc&&x.Response&&x.Response.error&&(Oc=x.Response,Fc(Oc.prototype)),t("H.net.Xhr",Rc);var Uc={method:"GET",headers:{},data:null},Vc="withCredentials"in new XMLHttpRequest,Sc="timeout"in new XMLHttpRequest,Yc,Zc,$c,bd,dd;function Tc(t,e,i){Vc?t.T.addEventListener(e,i):t.T["on"+e]=i}function Wc(t,e,i){Vc?t.T.removeEventListener(e,i):t.T["on"+e]=null}function Xc(t,e){var i=[];return t&&i.push(vc(t)),1<arguments.length&&i.push(""+e),i=Error(i.join(" ")),Object.setPrototypeOf(i,Xc.prototype),i}function D(t,e,i){var n=arguments.length;if((e=e!==B?+e:e)!==B){var r=(r=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?rc(r[1].replace(/\s+/g,""),","):[];r.forEach(Lc),r=r[e]||"#"+e}var o=t?vc(t):"";return n=2<n?nc(i):"",(r||n)&&(o+=" (Argument "+(r||"")+(n?" "+n:"")+")"),n=Error(o),Object.setPrototypeOf(n,D.prototype),n}function ad(){if(!zc("STATIC_DB"))throw new D(this.constructor,0);if(this.g=x.indexedDB||x.qp||x.Go||x.Ho,!this.g)throw new Xc(this.constructor,"This browser does not support IndexedDB");this.a=[],this.c=[],this.ri=A(this.ri,this)}function id(t,e,i){if(t.b)t.a?(t.a.push(e),i&&t.c.push(i)):t.f?i&&i(t.f):e(t.b.result);else{t.b=t.g.open(jd+"STATIC_DB",1),t.b.onupgradeneeded=t.ri;var n=t.b.onerror=function(){clearTimeout(t.i),t.f=this.error,t.c.forEach((function(e){e(t.f)})),t.a=t.c=null};t.i=setTimeout((function(){n.call({error:Error("DbOpenTimeoutError")})}),500),t.b.onsuccess=function(){clearTimeout(t.i),t.a?(t.a.forEach((function(t){t(this.result)}),this),t.a=t.c=null):(t.b=t.f=null,t.a=[],t.c=[])},t.a.push(e),i&&t.c.push(i)}}function fd(t,e,i){id(t,(function(t){t=t.transaction(["data"],"readwrite"),e(t.objectStore("data"))}),i)}function gd(t,e,i){e&&(t.onsuccess=function(){e(this.result)}),i&&(t.onerror=function(){i(this.error)})}function ed(t){var e=Object.prototype.toString.call(t);return"[object Blob]"===e||"[object ArrayBuffer]"===e||zc(t)||Da(t)}function kd(){return bd||(bd=new ad),bd}Rc.prototype.abort=function(){this.T&&(this.T.abort(),this.T&&this.a({type:"abort"}))},Rc.prototype.abort=Rc.prototype.abort,Rc.prototype.a=function(t){var e,i,n=t.type;t=this.T,this.c&&clearTimeout(this.c),"load"===n?t instanceof XMLHttpRequest&&200!==t.status&&(e="network"):e=4===t.readyState&&0===t.status&&"error"==n?"cors":"error"!=n?n:"network",Wc(this,"timeout",n=this.a),Wc(this,"error",n),Wc(this,"load",n),i=0===t.status||e&&"network"!==e?Oc.error():new Oc(t.responseText||null,t),e=this.b,delete this.a,delete this.b,delete this.T,e(i)},u(Xc,Error),t("H.lang.IllegalOperationError",Xc),Xc.prototype.name="IllegalOperationError",u(D,Error),t("H.lang.InvalidArgumentError",D),D.prototype.name="InvalidArgumentError",n=ad.prototype,n.put=function(t,e,i,n){if(!zc(t)&&!Cc(t))throw new D(this.put,0);if(!ed(e))throw new D(this.put,1);fd(this,(function(r){gd(r.put(e,t),i,n)}),n)},n.get=function(t,e,i){var n;if(!zc(t)&&!Cc(t))throw new D(this.get,0);if(!Ca(e))throw new D(this.get,1);return fd(this,(function(r){gd(n=r.get(t),e,i)}),i),{cancel:function(){n&&(n.onsuccess=hd)}}},n.remove=function(t,e,i){if(!zc(t)&&!Cc(t))throw new D(this.remove,0);fd(this,(function(n){gd(n.delete(t),e,i)}),i)},n.clear=function(t,e){fd(this,(function(i){gd(i.clear(),t,e)}),e)},n.ri=function(){var t=this.b.result;t.objectStoreNames.contains("data")||t.createObjectStore("data")},t("H.util.IndexedDBStorage.getInstance",kd);var jd="H_";function ld(){if(!tc(dd))if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)dd=!1;else{var t=x.indexedDB||x.qp||x.Go||x.Ho,e=jd+"TEST_DB";try{var i=t&&t.open(e,1)}catch(t){}dd=!!i&&null===i.onupgradeneeded,i&&t.deleteDatabase&&t.deleteDatabase(e)}return dd}function nd(){0!=od&&(pd[this[Ea]||(this[Ea]=++Fa)]=this),this.Nd=this.Nd,this.sb=this.sb}t("H.util.IndexedDBStorage.isSupported",ld);var od=0,pd={};function qd(t){t&&"function"==typeof t.B&&t.B()}function rd(t,e){this.type=t,this.currentTarget=this.target=e,this.f=this.a=!1,this.nl=!0}function sd(t,e,i){sd.l.constructor.call(this,t,i),this.data=e}function td(t,e,i){td.l.constructor.call(this,t,i),this.message=e}nd.prototype.Nd=!1,nd.prototype.B=function(){if(!this.Nd&&(this.Nd=!0,this.u(),0!=od)){var t=this[Ea]||(this[Ea]=++Fa);if(0!=od&&this.sb&&0<this.sb.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete pd[t]}},nd.prototype.zb=function(t,e){this.Nd?void 0!==e?t.call(e):t():(this.sb||(this.sb=[]),this.sb.push(void 0!==e?Ia(t,e):t))},nd.prototype.u=function(){if(this.sb)for(;this.sb.length;)this.sb.shift()()},rd.prototype.stopPropagation=function(){this.a=!0},rd.prototype.preventDefault=function(){this.f=!0,this.nl=!1},t("H.util.Event",rd),rd.prototype.stopPropagation=rd.prototype.stopPropagation,rd.prototype.stopPropagation=rd.prototype.stopPropagation,rd.prototype.CAPTURING_PHASE=1,rd.prototype.CAPTURING_PHASE=rd.prototype.CAPTURING_PHASE,rd.prototype.AT_TARGET=2,rd.prototype.AT_TARGET=rd.prototype.AT_TARGET,rd.prototype.BUBBLING_PHASE=3,rd.prototype.BUBBLING_PHASE=rd.prototype.BUBBLING_PHASE,rd.prototype.eventPhase=0,rd.prototype.eventPhase=rd.prototype.eventPhase,u(sd,rd),t("H.util.DataEvent",sd),u(td,rd),t("H.util.ErrorEvent",td);var ud=Math,vd=ud.min,wd=ud.max,xd=ud.round,yd=ud.floor,zd=ud.ceil,Ad=ud.abs,Bd=ud.log,Cd=ud.sqrt,Dd=ud.pow,Ed=ud.exp,Fd=ud.sin,Gd=ud.asin,Hd=ud.cos,Id=ud.tan,Jd=ud.atan,Kd=ud.atan2,Ld=ud.LN2,Md=ud.PI,Nd=Md/2,Od=Md/4,Pd=2*Md,Qd=3*Md,Rd=Md/180,Sd=180/Md,Td=1/0,Ud=Dd(-2,53),Vd=Vd||function(t){return Bd(t)/Ld};function Wd(t,e){var i;return 0>(i=t%e)==0>e?i:i+e}function Xd(t,e,i){return e-=i=i||0,(t-=i)-yd(t/e)*e+i}function Yd(t,e,i){return t>i?i:t<e?e:t}function Zd(t,e,i,n){return n||(n=0),e<i?t>=e-n&&t<=i+n:t>=i-n&&t<=e+n}function $d(t,e,i,n,r,o){return Cd(Dd((t-r)*(n-o)-(e-o)*(i-r),2)/(Dd(i-r,2)+Dd(n-o,2)))}t("H.math.normalize",Xd),t("H.math.clamp",Yd);var ae={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function be(t,e,i,n,r,o){var a=i.length,s=a,u=i[0],l=0,h=0,c=0;n=n/2||0;var f=o||2;o=f*(r?0:1)+1;for(var p=f-2;1!=l&&s>o;){s-=p;var d=i[--s];f=i[--s];var g=i[s?s-p-1:(a+(s-p-1))%a],y=i[s?s-p-2:(a+(s-p-2))%a];f>=t-n&&f<=t+n&&d>=e-n&&d<=e+n||y>=t-n&&y<=t+n&&g>=e-n&&g<=e+n?l=1:l||f!==t?!l&&Zd(t,f,y,n)&&((f<t&&y>t||f>t&&y<t)&&(h+=(u=d+(t-f)/(y-f)*(g-d))>e,c+=u<e),l=Zd(e,d,g,n)&&$d(t,e,f,d,y,g)<=n?2:0):(y===t&&(d<e&&g>e||d>e&&g<e)||(u<=t&&y>t||u>=t&&y<t)&&(d>=e?++h:++c),l=Zd(e,d,g,n)&&$d(t,e,f,d,y,g)<=n?2:0),u=f}return!l&&r&&0!==c&&0!=h%2&&(l=3),l}function ce(t,e){return be(t.x,t.y,e,0,!0)!==ae.NONE}function de(t){for(var e=t.length,i=new Float64Array(2*e),n=e&&tc(t[0].x);e--;){var r=t[e],o=e<<1;i[o]=n?r.x:r[0],i[o+1]=n?r.y:r[1]}return i}function ee(t,e,i){this.type=t,this.data=e,this.f=Zb(),this.resolve=A(this.resolve,this),this.reject=A(this.reject,this),this.priority=fe,i!==B&&(this.priority=i),this.yh().add(this)}t("H.math.CoverType",ae),t("H.math.isPointInsidePolygon",ce),t("H.math.flatten",de);var fe=1,ge={up:0,xp:fe,tp:2};function he(t){var e;for(e in this.a={},ge)this.a[ge[e]]=[];this.vf=t,this.vf.addEventListener("allocatable",A(this.b,this))}n=ee.prototype,n.then=function(t,e,i){return this.f.dl.then(t,e,i)},n.resolve=function(t){this.pe=3,this.f.resolve(t)},n.reject=function(t){this.pe=5,this.f.reject(t)},n.pe=0,n.cancel=function(){3>this.pe&&(this.Ie(),this.yh().remove(this),this.pe=4)},t("H.util.JobManager",he);var ie=Object.keys(ge).map((function(t){return ge[t]})).sort().reverse();function je(t,e,i){var n=[],r=arguments.length;return t&&n.push(vc(t)),1<r&&(r=2<r&&yc(i)?" out of ["+i[0]+"..."+i[1]+"]":"",n.push("("+e+r+")")),n=Error(n.join(" ")),Object.setPrototypeOf(n,je.prototype),n}he.prototype.add=function(t){C(t,ee,this.add,0),this.a[t.priority].push(t),this.b()},he.prototype.contains=function(t){return-1<this.a[t.priority].indexOf(t)},he.prototype.remove=function(t){var e=t.priority,i=this.a[e].indexOf(t);return-1<i?(this.a[e].splice(i,1),!0):(t.ej&&this.vf.Tf(t.ej),!1)},he.prototype.b=function(){ie.forEach((function(t){this.a[t]=this.a[t].filter((function(t){var e;if((e=this.vf.Zg(t))===y)return!0;var i=A(this.vf.Tf,this.vf,e,t);t.ej=e,t.then(i,i),t.pe=t.Lj(e)?1:5}),this)}),this)},u(je,Error),t("H.lang.OutOfRangeError",je),je.prototype.name="OutOfRangeError";var ke="closure_listenable_"+(1e6*Math.random()|0);function le(t){return!(!t||!t[ke])}var me=0;function ne(t,e,i,n,r){this.listener=t,this.proxy=null,this.src=e,this.type=i,this.capture=!!n,this.gg=r,this.key=++me,this.se=this.Jf=!1}function oe(t){t.se=!0,t.listener=null,t.proxy=null,t.src=null,t.gg=null}function pe(t){this.src=t,this.a={},this.b=0}function re(t,e){var i=e.type;if(!(i in t.a))return!1;var n,r=t.a[i],o=ab(r,e);return(n=0<=o)&&Array.prototype.splice.call(r,o,1),n&&(oe(e),0==t.a[i].length&&(delete t.a[i],t.b--)),n}function se(t,e){var i=void 0!==e,n=i?e.toString():"";return Sa(t.a,(function(t){for(var e=0;e<t.length;++e)if(!i||t[e].type==n)return!0;return!1}))}function qe(t,e,i,n){for(var r=0;r<t.length;++r){var o=t[r];if(!o.se&&o.listener==e&&o.capture==!!i&&o.gg==n)return r}return-1}pe.prototype.add=function(t,e,i,n,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=qe(t,e,n,r);return-1<a?(e=t[a],i||(e.Jf=!1)):((e=new ne(e,this.src,o,!!n,r)).Jf=i,t.push(e)),e},pe.prototype.remove=function(t,e,i,n){if(!((t=t.toString())in this.a))return!1;var r=this.a[t];return-1<(e=qe(r,e,i,n))&&(oe(r[e]),Array.prototype.splice.call(r,e,1),0==r.length&&(delete this.a[t],this.b--),!0)},pe.prototype.qa=function(t){t=t&&t.toString();var e,i=0;for(e in this.a)if(!t||e==t){for(var n=this.a[e],r=0;r<n.length;r++)++i,oe(n[r]);delete this.a[e],this.b--}return i};var te=!sb||9<=Number(Db),ue=sb&&!Cb("9");!vb||Cb("528"),ub&&Cb("1.9b")||sb&&Cb("8")||rb&&Cb("9.5")||vb&&Cb("528"),ub&&!Cb("8")||sb&&Cb("9");var ve=function(){if(!wa.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{wa.addEventListener("test",za,e),wa.removeEventListener("test",za,e)}catch(t){}return t}();function we(t,e){if(rd.call(this,t?t.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.b=null,t){var i=this.type=t.type,n=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.currentTarget=e,e=t.relatedTarget){if(ub){t:{try{ob(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==i?e=t.fromElement:"mouseout"==i&&(e=t.toElement);this.relatedTarget=e,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:xe[t.pointerType]||"",this.b=t,t.defaultPrevented&&this.preventDefault()}}u(we,rd);var xe={2:"touch",3:"pen",4:"mouse"};we.prototype.stopPropagation=function(){we.l.stopPropagation.call(this),this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0},we.prototype.preventDefault=function(){we.l.preventDefault.call(this);var t=this.b;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ue)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ye="closure_lm_"+(1e6*Math.random()|0),ze={},Ae=0;function Be(t,e,i,n,r){if(n&&n.once)return Ce(t,e,i,n,r);if("array"==Aa(e)){for(var o=0;o<e.length;o++)Be(t,e[o],i,n,r);return null}return i=De(i),le(t)?t.aa.add(String(e),i,!1,Da(n)?!!n.capture:!!n,r):Ee(t,e,i,!1,n,r)}function Ee(t,e,i,n,r,o){if(!e)throw Error("Invalid event type");var a=Da(r)?!!r.capture:!!r,s=Fe(t);if(s||(t[ye]=s=new pe(t)),(i=s.add(e,i,n,a,o)).proxy)return i;if(n=Ge(),i.proxy=n,n.src=t,n.listener=i,t.addEventListener)ve||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),n,r);else if(t.attachEvent)t.attachEvent(He(e.toString()),n);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(n)}return Ae++,i}function Ge(){var t=Ie,e=te?function(i){return t.call(e.src,e.listener,i)}:function(i){if(!(i=t.call(e.src,e.listener,i)))return i};return e}function Ce(t,e,i,n,r){if("array"==Aa(e)){for(var o=0;o<e.length;o++)Ce(t,e[o],i,n,r);return null}return i=De(i),le(t)?t.aa.add(String(e),i,!0,Da(n)?!!n.capture:!!n,r):Ee(t,e,i,!0,n,r)}function Je(t,e,i,n,r){if("array"==Aa(e)){for(var o=0;o<e.length;o++)Je(t,e[o],i,n,r);return null}return n=Da(n)?!!n.capture:!!n,i=De(i),le(t)?t.aa.remove(String(e),i,n,r):!!t&&!!((t=Fe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,i,n,r)),i=-1<t?e[t]:null))&&Ke(i)}function Ke(t){if("number"==typeof t||!t||t.se)return!1;var e=t.src;if(le(e))return re(e.aa,t);var i=t.type,n=t.proxy;return e.removeEventListener?e.removeEventListener(i,n,t.capture):e.detachEvent?e.detachEvent(He(i),n):e.addListener&&e.removeListener&&e.removeListener(n),Ae--,(i=Fe(e))?(re(i,t),0==i.b&&(i.src=null,e[ye]=null)):oe(t),!0}function He(t){return t in ze?ze[t]:ze[t]="on"+t}function Le(t,e,i,n){var r=!0;if((t=Fe(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==i&&!o.se&&(o=Me(o,n),r=r&&!1!==o)}return r}function Me(t,e){var i=t.listener,n=t.gg||t.src;return t.Jf&&Ke(t),i.call(n,e)}function Ie(t,e){if(t.se)return!0;if(!te){if(!e)t:{e=["window","event"];for(var i=wa,n=0;n<e.length;n++)if(null==(i=i[e[n]])){e=null;break t}e=i}if(e=new we(n=e,this),i=!0,!(0>n.keyCode||null!=n.returnValue)){t:{var r=!1;if(0==n.keyCode)try{n.keyCode=-1;break t}catch(t){r=!0}(r||null==n.returnValue)&&(n.returnValue=!0)}for(n=[],r=e.currentTarget;r;r=r.parentNode)n.push(r);for(t=t.type,r=n.length-1;!e.a&&0<=r;r--){e.currentTarget=n[r];var o=Le(n[r],t,!0,e);i=i&&o}for(r=0;!e.a&&r<n.length;r++)e.currentTarget=n[r],o=Le(n[r],t,!1,e),i=i&&o}return i}return Me(t,new we(e,this))}function Fe(t){return(t=t[ye])instanceof pe?t:null}var Ne="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(t){return Ca(t)?t:(t[Ne]||(t[Ne]=function(e){return t.handleEvent(e)}),t[Ne])}function F(){nd.call(this),this.aa=new pe(this),this.ao=this,this.jh=null}function Oe(t){var e=(t=t||{}).callback;this.a=t.label,Ca(e)&&(this.callback=e),this.b=!!t.disabled,Oe.l.constructor.call(this)}u(F,nd),F.prototype[ke]=!0,n=F.prototype,n.Qb=function(){return this.jh},n.ka=function(t){this.jh=t},n.addEventListener=function(t,e,i,n){Be(this,t,e,i,n)},n.removeEventListener=function(t,e,i,n){Je(this,t,e,i,n)},n.dispatchEvent=function(t){var e,i=this.Qb();if(i)for(e=[];i;i=i.Qb())e.push(i);i=this.ao;var n=t.type||t;if("string"==typeof t)t=new rd(t,i);else if(t instanceof rd)t.target=t.target||i;else{var r=t;Wa(t=new rd(n,i),r)}if(r=!0,e)for(var o=e.length-1;!t.a&&0<=o;o--){var a=t.currentTarget=e[o];r=a.td(n,!0,t)&&r}if(t.a||(r=(a=t.currentTarget=i).td(n,!0,t)&&r,t.a||(r=a.td(n,!1,t)&&r)),e)for(o=0;!t.a&&o<e.length;o++)r=(a=t.currentTarget=e[o]).td(n,!1,t)&&r;return r},n.u=function(){F.l.u.call(this),this.aa&&this.aa.qa(void 0),this.jh=null},n.td=function(t,e,i){if(!(t=this.aa.a[String(t)]))return!0;t=t.concat();for(var n=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.se&&o.capture==e){var a=o.listener,s=o.gg||o.src;o.Jf&&re(this.aa,o),n=!1!==a.call(s,i)&&n}}return n&&0!=i.nl},t("H.util.EventTarget",F),F.prototype.ka=F.prototype.ka,F.prototype.setParentEventTarget=F.prototype.ka,F.prototype.Qb=F.prototype.Qb,F.prototype.getParentEventTarget=F.prototype.Qb,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.addEventListener=F.prototype.addEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.removeEventListener=F.prototype.removeEventListener,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.dispatchEvent=F.prototype.dispatchEvent,F.prototype.B=F.prototype.B,F.prototype.dispose=F.prototype.B,F.prototype.zb=F.prototype.zb,F.prototype.addOnDisposeCallback=F.prototype.zb,F.prototype.lo=F.prototype.td,F.prototype.td=function(t,e,i){var n,r,o=!0,a=i[i.currentTarget===i.target?"AT_TARGET":e?"CAPTURING_PHASE":(n=!0,"BUBBLING_PHASE")];return(!n||"pointerenter"!==(r=i.type)&&"pointerleave"!==r)&&(i.eventPhase=a,o=F.prototype.lo.apply(this,arguments),n&&this.Qb&&null===this.Qb()&&delete i.eventPhase),o},u(Oe,F),t("H.util.ContextItem",Oe),Oe.prototype.Ye=function(){return this.a},Oe.prototype.getLabel=Oe.prototype.Ye,Oe.prototype.Qc=function(t){return this.a!==t&&(this.a=t,this.dispatchEvent("update")),this},Oe.prototype.setLabel=Oe.prototype.Qc,Oe.prototype.mc=function(){return this.b},Oe.prototype.isDisabled=Oe.prototype.mc,Oe.prototype.Da=function(t){return t^this.b&&(this.b=t,this.dispatchEvent("update")),this},Oe.prototype.setDisabled=Oe.prototype.Da;var Pe=new Oe;function Re(){if(x.document){var t=document.createElement("canvas");return t.width=t.height=1,t.getContext("2d")}return null}function Se(){return window.devicePixelRatio||1}Oe.SEPARATOR=Pe,t("H.util.getPixelRatio",Se);var Te=/^rgba\(([^,]+),([^,]+),([^,]+),([^)]+)\)$/;function Ue(t){var e=Ve[t],i=x.RegExp;return e||(x.Uint8ClampedArray||(x.Uint8ClampedArray=function(t){return t instanceof Number?Array(t):t.map((function(t){return Yd(xd(t),0,255)}))}),"none"===t?e=new Uint8ClampedArray([0,0,0,0]):(We.fillStyle="black",We.fillStyle=t,Te.test(We.fillStyle)?e=new Uint8ClampedArray([i.$1,i.$2,i.$3,255*i.$4]):(We.clearRect(0,0,1,1),We.fillRect(0,0,1,1),e=We.getImageData(0,0,1,1).data)),Ve[t]=e),e}function Xe(t){return"none"!==t&&0<Ue(t)[3]}var Ve=mc(),Ye=!!x.VBArray;function Ze(t,e){return t!==B?t:e}function $e(t){return/^<svg/.test(t)?"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(t):t}function af(t){this.oc=0<t?ud.round(t):0}t("H.util.eval",(function(a){return eval(a)})),t("H.util.provide",(function(t){var e=wa.$jscomp;if(e&&"function"==typeof e.Lm&&e.Lm())throw Error("goog.provide cannot be used within a module.");ya(t,void 0)})),af.prototype.next=function(t){if(9007199254740992===this.oc)throw new je(t,this.oc,[0,9007199254740991]);return this.oc++};var bf=new af,cf=A(bf.next,bf);function df(){return!0}function ef(){return!1}function hd(){}var ff=oc([]),gf=oc({});function hf(t){return"CANVAS"===t.tagName?[t]:t.getElementsByTagName("CANVAS")}function jf(t,e,i){var n;if(e=t.ownerDocument===e?t.cloneNode(!0):e.importNode(t,!0),i)for(t=hf(t),n=(i=hf(e)).length;n--;)i[n].getContext("2d").drawImage(t[n],0,0);return e}var We=Re(),kf=Re();function lf(t){var e=t.complete,i=0<t.naturalWidth;if(e&&!i&&Ye)try{kf.drawImage(t,0,0),i=!0}catch(t){}return e&&i}var mf=x.BlobBuilder||x.WebKitBlobBuilder||x.MozBlobBuilder;function nf(t,e){if(e=e||"",mf){var i=new mf;i.append(t),t=i.getBlob(e)}else t=new Blob([t],{type:e});return t}var of=x.navigator;function pf(){var t=pf.a;return t||(t=this,pf.a=t,Fc(pf.a),F.call(t),qf(this)),t}function qf(t){t.g=10,t.i=6,t.a=mc(),t.b=mc(),t.c=0}function rf(t,e,i,n){if(!this.b[t])throw new D(rf,0,"Mime type is not supported");this.g=t,"crossOrigin"in(t=n?Ua(n):{})||(t.crossOrigin="anonymous"),this.a=t,sf.href=e.toString(),ee.call(this,sf.protocol+"//"+sf.hostname,e,i)}Zc=/Edge\/\d+/.test(of.appVersion),$c=/(A|a)ndroid/.test(of.appVersion),u(pf,F),pf.prototype.u=function(){pf.l.u.call(this),qf(this)},pf.prototype.Zg=function(t){t=t.type;var e=this.a[t]||0;if(this.c<this.g&&e<this.i){var i=++this.f;return this.c++,this.a[t]=e+1,this.b[i+""]=t,i}return y},pf.prototype.Tf=function(t){var e=this.b[t];if(!tc(e)||!this.a[e])throw new Xc(this.Tf,"Unknown requestId");this.c--,this.a[e]--,this.a[e]||delete this.a[e],delete this.b[t],this.dispatchEvent("allocatable")},pf.prototype.f=-1,u(rf,ee),rf.prototype.Lj=function(){return this.c=this.b[this.g].call(this),!0},rf.prototype.Ie=function(){this.c&&(this.c.abort(),this.c=null)},rf.prototype.b={"application/json":function(){var t=this,e=tf(this.a),i=e.headers;return e.headers=i=i?Ua(i):{},i.Accept="application/json",new Rc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.json()):t.reject(e)}),e)},"text/plain":function(){var t=this;return new Rc(this.data,(function(e){200<=e.status&&300>e.status?t.resolve(e.text()):t.reject(e)}),tf(this.a))},image:function(){var t=x.document.createElement("img"),e=this,i=this.data;return t.onload=A(this.resolve,this,t),t.onerror=function(){e.reject(Oc.error())},t.crossOrigin=this.a.crossOrigin,t.src=i,{abort:function(){t.onerror=t.onload=null,Ye&&lf(t)||t.removeAttribute("src")}}}},function(){try{var t=new XMLHttpRequest;t.open("get","/",!0)}catch(e){t={}}"response"in t&&(rf.prototype.b.arraybuffer=function(){var t,e=new XMLHttpRequest,i=this,n=this.a,r=n.headers;if(e.open("GET",this.data),uf(e,n),e.responseType="arraybuffer",r)for(t in r)e.setRequestHeader(t,r[t]);return e.onerror=e.ontimeout=function(){i.reject(Oc.error())},e.onload=function(){i.resolve(new Oc(e.response))},e.send(),e})}();var vf=new he(new pf);rf.prototype.yh=function(){return vf};var sf=x.document.createElement("a");function tf(t){var e=Ua(t);return delete e.crossOrigin,uf(e,t),e}function uf(t,e){t.withCredentials="use-credentials"===e.crossOrigin}function I(t,e){this.x=+t,this.y=+e}function wf(t){if(!t)throw Error("invalid argument");return t instanceof I?t:new I(t.x,t.y)}function xf(t){var e=yf[t];if(!e)if(t in zf)e=yf[t]=t;else{e=Af.length;var i="",n=t.charAt(0).toUpperCase()+t.substr(1),r="",o=!1;Bf&&(o=(r=Bf+n)in zf);for(;e--&&!o;)o=(r=(i=Af[e])+n)in zf;if(o&&(Bf=i),!(e=o?r:null))throw Error("Could not find any variant of CSS property ["+t+"]");yf[t]=e}return e}t("H.math.Point",I),I.prototype.set=I,I.prototype.set=I.prototype.set,I.prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new I(this.x,this.y),t},I.prototype.clone=I.prototype.clone,I.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},I.prototype.add=I.prototype.add,I.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},I.prototype.sub=I.prototype.sub,I.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},I.prototype.scale=I.prototype.scale,I.prototype.round=function(){return this.x=xd(this.x),this.y=xd(this.y),this},I.prototype.round=I.prototype.round,I.prototype.floor=function(){return this.x=yd(this.x),this.y=yd(this.y),this},I.prototype.floor=I.prototype.floor,I.prototype.ceil=function(){return this.x=zd(this.x),this.y=zd(this.y),this},I.prototype.ceil=I.prototype.ceil,I.prototype.oa=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},I.prototype.equals=I.prototype.oa,I.prototype.Yj=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=t;if(i||n){var o=((this.x-t.x)*i+(this.y-t.y)*n)/(i*i+n*n);r=0>=o?t:1<=o?e:new I(t.x+o*i,t.y+o*n)}return r},I.prototype.getNearest=I.prototype.Yj,I.prototype.Za=function(t){return Cd(Dd(this.x-t.x,2)+Dd(this.y-t.y,2))},I.prototype.distance=I.prototype.Za,I.fromIPoint=wf,t("H.dom.cssPrefixer.prefix",xf);var Af=["O","Ms","ms","Moz","Webkit"],yf={},Bf="",zf=document.createElement("span").style;function Cf(t,e,i,n){if(!t||!e||!i)throw new D(Cf,null,"Must specify name, version and revision parameter");this.name=t,this.version=e,this.revision=i,n&&Wa(this,n)}t("H.util.BuildInfo",Cf),Cf.prototype.toString=function(){var t,e=[];for(t in this)zc(this[t])&&e.push(this[t]);return e.join(";")};var Df={};function Ef(t,e,i,n){if(!t)throw new D(Ef,1,"Must specify a name parameter");return Df[t]||(Df[t]=new Cf(t,e,i,n))}function Ff(){Ff.l.constructor.call(this),this.a=Gf(this),this.f=mc(),this.c=A(this.c,this),this.a.addEventListener("message",this.c),this.b={}}Cf.get=Ef,u(Ff,F),Ff.prototype.u=function(){this.a.terminate()},Ff.prototype.i=function(t){var e=t.type,i=!!this.f[e],n=t.data,r=Hf++,o=n&&n.np?n.np:B,a=!0;return i?(this.b[r]=t,If(this,e,r,n&&n.message,o)):(t.reject(new D(this.i,0,"processor_not_found")),a=!1),a},Ff.prototype.c=function(t){t=t.data;var e=this.b[t.taskId],i=t.taskId,n=t.data,r=this;if(2===t.type)new rf("arraybuffer",n).then((function(t){return t.arrayBuffer()})).then((function(t){r.a.postMessage(["3",i,[t]],[t])}),(function(){r.a.postMessage(["3",i,[null,"ERROR"]])}));else{if(e){switch(t.type){case 1:e.resolve(n);break;case 0:e.reject(n)}delete this.b[i]}this.dispatchEvent(new rd(this.g.IDLE))}};var Hf=0,Nf,Qf;function Jf(t,e,i){var n,r=Hf++;return t.b[r]=n=Zb(),If(t,e,r,i),n.dl}function If(t,e,i,n,r){n===B||Ba(n)||(n=[n]);try{t.a.postMessage([e,i,n],r)}catch(e){(t=t.b[i]).reject(e.message)}}function Gf(a){var b=x.H.__bootstrap__;if(b=Ca(b)?(""+b).replace(/^[^{]+{((.|[\r\n])+?)}\s*$/,"$1"):""+b,x.Worker&&x.URL)try{var c=new x.Worker(x.URL.createObjectURL(nf(b,"application/javascript")))}catch(t){}return c||(a=new Kf(a),function(){eval("var self = arguments[0];"+b)}(a),c=new Lf(a)),c}function Lf(t){F.call(this),this.a=t}function Kf(a){F.call(this),this.a=a,this.addEventListener=A(this.addEventListener,this),this.removeEventListener=A(this.removeEventListener,this),this.postMessage=A(this.postMessage,this),this.eval=A(eval,this)}function Mf(){var t=Nf;return t||(t=Nf=this,F.call(t),Of(this)),t}function Of(t){var e,i=t.b;if(i)for(e=i.length;e--;)i[e].B();t.b=[],Fc(t.b),t.c=mc(),t.f=mc()}function Pf(t,e,i){ee.call(this,t,e,i)}function Rf(t,e,i){var n=Yd(+t,-90,90);if(e&&E(n))throw new D(e,i,t);return n}function Sf(t,e,i){var n=+t;if((-180>n||180<n)&&(n=Wd(n+180,360)-180),e&&E(n))throw new D(e,i,t);return n}function Tf(t,e,i){var n;if(t!==B&&E(n=+t)&&e)throw new D(e,i,t);return n}function Uf(t,e){return 0!=(0>t^0>e)&&180<Ad(e-t)}function Vf(){uc(this,Vf)}function Wf(t,e,i){this.lat=Rf(t,Wf,0),this.lng=Sf(e,Wf,1),i!==B&&(this.alt=Tf(i,Wf,2))}function Yf(t,e,i){var n=Da(t)&&!(E(t.lat=Rf(t.lat))||E(t.lng=Sf(t.lng))||t.alt!==B&&E(t.alt=Tf(t.alt)));if(!n&&e)throw new D(e,i,t);return n}function Zf(t){if(!t)throw new D(Zf,0,t);return new Wf(t.lat,t.lng,t.alt)}function K(t,e,i,n){$f(this,Rf(t,K,0),Sf(e,K,1),Rf(i,K,2),Sf(n,K,3))}function $f(t,e,i,n,r){return t.ca=i,t.ia=r,e<n&&(i=e,e=n,n=i),t.la=e,t.na=n,t.c=t.a=t.b=null,t}function bg(t,e){return(t=e-t)+(0>t?360:0)}function ag(t,e){return(t+=e/2)-(180<t?360:0)}function cg(t,e,i,n,r,o,a,s,u){i=vd(i,a),t=wd(t,r);var l=ag(e,r=bg(e,n)),h=ag(o,a=bg(o,s))-l;if(180>(h+=0>h-1e-6?360:0)-1e-6){l=e;var c=s}else h=360-h,l=o,c=n;return 360<=(h=h+r/2+a/2)+5e-7?(l=-180,c=180):h-5e-7<r?(l=e,c=n):h-5e-7<a&&(l=o,c=s),u?$f(u,t,l,i,c):new K(t,l,i,c)}function dg(t,e,i){return i||(Yf(t,dg,0),Yf(e,dg,1)),new K(t.lat,t.lng,e.lat,e.lng)}function eg(t,e){var i=1,n=t.length,r=null;if(!Ba(t))throw new D(eg,0,t);if(0<n){var o=t[0];for(r=dg(o,o,e);i<n;i++)o=t[i],r.gd(o.lat,o.lng,e,r)}return r}function fg(t,e){var i,n=3,r=t.length;if(!(e||t&&null!=t.length))throw new D(fg,0,t);if(0<r)for(i=new K(t[0],t[1],t[0],t[1]);n<r;n+=3)i.gd(t[n],t[n+1],e,i);return i}function gg(t,e){var i,n=1,r=t.length;if(e&&(!t||null==t.length))throw new D(gg,0,t);if(0<r)for(i=new K(t[0].la,t[0].ca,t[0].na,t[0].ia);n<r;n++)i.nc(t[n],e,i);return i}function hg(t,e,i,n,r,o){uc(this,hg),this.c=t||10,this.b=this.a=null,this.f=n||0,this.g=r||0,this.i=e||1,this.j=i||1,this.o=!!o,this.flush()}function ig(t){var e=t.b;if(t.o&&!e){var i=t.head;(i.entries||i[0]||i[1]||i[2]||i[3])&&(e=jg([e=[i],e,e,e],[i[6],i[7],i[4],i[5]]),t.b=e)}return e}function jg(t,e){var i,n,r,o,a=0;for(i=3;0<=i;i--){var s=i+4,u=0<i%3,l=[],h=e[i],c=t[i];for(n=c.length;n--;){var f=c[n];if(r=f.entries)for(o=r.length;o--;){var p=r[o].wd(i);(u?p>h:p<h)&&(h=p)}for(o=4;o--;)(r=f[o])&&(u?r[s]>h:r[s]<h)&&l.push(r)}a+=l.length,e[i]=h,t[i]=l}return a&&(e=jg(t,e)),e}function kg(t,e,i){var n,r;if(t.o&&(n=t.b))for(r=3;0<=r;r--){var o=e.wd(r);if(r%3?o>=n[r]:o<=n[r]){if(!i){t.b=null;break}n[r]=o}}}function mg(t,e){var i,n=t.head;if(e){var r=e;if(r!==n)for(n=r;r=r.parent;)(r.entries||1<r.a)&&(n=r)}else for(;!n.entries&&2>(i=n.a)&&i;)n=r;t.head=n}function ng(t,e,i,n,r,o,a,s,u){var l,h=e.entries,c=e[7],f=e[4],p=e[5],d=e[6],g=e[8],y=e[9];if(h){var v=h.length;if(r>f||n>c||a<d||o<p)for(;v--;)f=(c=h[v]).wd(3),p=c.wd(0),d=c.wd(1),c.wd(2)>=r&&d>=n&&(p<a||s&&p==a)&&(f<o||u&&f==o)&&i.push(c);else for(;v--;)i.push(h[v])}(o>g||u&&o==g)&&(r<y&&(l=e[1])&&ng(t,l,i,n,r,o,a,s,u),(a>y||s&&a==y)&&(l=e[3])&&ng(t,l,i,n,r,o,a,s,u)),n<g&&(r<y&&(l=e[0])&&ng(t,l,i,n,r,o,a,s,u),(a>y||s&&a==y)&&(l=e[2])&&ng(t,l,i,n,r,o,a,s,u))}Ff.prototype.g={IDLE:"idle",hj:"error"},Ff.prototype.j=function(t,e){var i=this.m||(this.m=new rd(this.g.hj));i.data=e,delete this.f[t],this.dispatchEvent(i)},u(Lf,F),Lf.prototype.postMessage=function(t){x.setTimeout(A(this.b,this,t),0)},Lf.prototype.b=function(t){var e=new rd("message");e.data=t,this.a.dispatchEvent(e)},Lf.prototype.terminate=function(){this.a.B(),this.B()},u(Kf,F),Kf.prototype.postMessage=function(t){var e=new rd("message");e.data=t,x.setTimeout(A(this.a.c,this.a,e),0)},u(Mf,F),Mf.prototype.u=function(){Mf.l.u.call(this),Of(this)},Mf.prototype.Zg=function(t){var e;if(t=t.type,!(e=this.f[t]))throw new Xc(this.Zg,'Unknown type "'+t+'"');var i=this.b,n=i[0];return n||(n=i[0]=new Ff,this.zb(Ja(qd,n)),Ta(this.c)||Jf(n,"0",i=x.Object.keys(this.c))),(i=n).f[t]||(i.f[t]=e,Jf(i,"1",[t,Ca(e)?e+"":e]).then(hd,A(i.j,i,t))),n},Mf.prototype.Tf=function(){},Mf.prototype.a=function(t,e){var i=this.f,n=i[t];if(n){if(e!==n)throw new Xc(this.a,'Type "'+t+'" is already registered')}else i[t]=e},u(Pf,ee),Pf.prototype.yh=function(){return Qf||(Qf=new he(new Mf)),Qf},Pf.prototype.Ie=function(){},Pf.prototype.Lj=function(t){return t.i(this)},t("H.geo.isDBC",Uf),t("H.geo.AbstractGeometry",Vf),Vf.prototype.getBoundingBox=Vf.prototype.G,Vf.prototype.equals=Vf.prototype.oa,Vf.prototype.rb="",Vf.prototype.Mb="",Vf.prototype.toString=function(){return this.Tc([this.rb.toUpperCase()," "]).join("")},Vf.prototype.toString=Vf.prototype.toString,Vf.prototype.Sc=function(){return{type:this.Mb,coordinates:this.md()}},Vf.prototype.toGeoJSON=Vf.prototype.Sc,Vf.prototype.X=function(){return{type:this.rb,coordinates:this.yc(),boundingBox:this.G().X()}},Vf.prototype.forWorkerMessage=Vf.prototype.X,u(Wf,Vf),t("H.geo.Point",Wf),Wf.prototype.oa=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},Wf.prototype.equals=Wf.prototype.oa,Wf.prototype.Za=function(t){if(this===t||this.lat===t.lat&&this.lng===t.lng)t=0;else{var e=this.lat*Rd,i=t.lat*Rd;t=12742001.58*Gd(vd(1,Cd(Dd(Fd((e-i)/2),2)+Hd(e)*Hd(i)*Dd(Fd((this.lng*Rd-t.lng*Rd)/2),2))))}return t},Wf.prototype.distance=Wf.prototype.Za,Wf.prototype.Ng=function(t,e,i){if(i){if(e/=6371000.79){t*=Rd;var n=Rd*this.lat,r=Fd(n),o=Fd(e),a=Hd(e),s=Rd*this.lng,u=Hd(n);n=Gd(u*Hd(t)*o+r*a),u=(t=(s+(t=Kd(Fd(t)*u*o,a-r*Fd(n)))+Md)%(2*Md)-Md)*Sd}return e?new Wf(n*Sd,(u+540)%360-180):this}if(0==(90+(t=(t%360+360)%360))%180)return n=this.lng+e/(6371000.79*Pd*Hd(this.lat*Rd))*(270===t?-360:360),new Wf(this.lat,(n+540)%360-180);if(e/=6371000.79){t*=Rd,s=this.lat*Rd,r=this.lng*Rd,a=(o=s+e*Hd(t))-s,n=Bd(Id(o/2+Od)/Id(s/2+Od)),n=E(a/n)?Hd(s):a/n;var l=e*Fd(t)/n;Ad(o)>Nd&&(o=0<o?Md-o:-(Md+o))}return e?new Wf(o*Sd,((r+l+Qd+(Ad(s+a)>Nd?Md:0))%Pd-Md)*Sd):this},Wf.prototype.walk=Wf.prototype.Ng,Wf.prototype.G=function(){return new K(this.lat,this.lng,this.lat,this.lng)},Wf.prototype.getBoundingBox=Wf.prototype.G,Wf.validate=Yf,Wf.fromIPoint=Zf,n=Wf.prototype,n.rb="Point",n.Tc=function(t){return t.push("(",this.lng," ",this.lat,")"),t},n.Mb="Point",n.md=function(){return[this.lng,this.lat,this.alt||0]},n.yc=function(){return[this.lat,this.lng,this.alt||0]},u(K,Vf),t("H.geo.Rect",K),K.prototype.rb="Polygon",K.prototype.Tc=function(t){var e=this.la,i=this.ca,n=this.na,r=this.ia;return t.push("(","(",i," ",e,",",r," ",e,",",r," ",n,",",i," ",n,",",i," ",e,")",")"),t},K.prototype.oa=function(t){return this===t||!!t&&this.la===t.la&&this.ca===t.ca&&this.na===t.na&&this.ia===t.ia},K.prototype.equals=K.prototype.oa,K.prototype.clone=function(){return new K(this.la,this.ca,this.na,this.ia)},K.prototype.clone=K.prototype.clone,K.prototype.Rb=function(){return this.c||(this.c=new Wf(this.la,this.ca)),this.c},K.prototype.getTopLeft=K.prototype.Rb,K.prototype.Nb=function(){return this.a||(this.a=new Wf(this.na,this.ia)),this.a},K.prototype.getBottomRight=K.prototype.Nb,K.prototype.On=function(){return this.la},K.prototype.getTop=K.prototype.On,K.prototype.Fm=function(){return this.na},K.prototype.getBottom=K.prototype.Fm,K.prototype.kn=function(){return this.ca},K.prototype.getLeft=K.prototype.kn,K.prototype.En=function(){return this.ia},K.prototype.getRight=K.prototype.En,K.prototype.fb=function(){return this.b||(this.b=new Wf(this.na+(this.la-this.na)/2,ag(this.ca,this.Fb()))),this.b},K.prototype.getCenter=K.prototype.fb,K.prototype.Fb=function(){return bg(this.ca,this.ia)},K.prototype.getWidth=K.prototype.Fb,K.prototype.ae=function(){return this.la-this.na},K.prototype.getHeight=K.prototype.ae,K.prototype.Gb=function(){return this.ca>this.ia},K.prototype.isCDB=K.prototype.Gb,K.prototype.jg=function(){return!this.Fb()&&!this.ae()},K.prototype.isEmpty=K.prototype.jg,K.prototype.G=function(){return new K(this.la,this.ca,this.na,this.ia)},K.prototype.getBoundingBox=K.prototype.G,K.prototype.Of=function(t,e,i){var n=this.fb();return i||(t=Rf(t,this.Of,0),e=Sf(e,this.Of,1)),(t=(e=this.gd(t,e,i)).fb()).lat===n.lat&&t.lng===n.lng&&this.ae()===e.ae()&&this.Fb()===e.Fb()},K.prototype.containsLatLng=K.prototype.Of,K.prototype.pd=function(t,e){return e||Yf(t,this.pd,0),this.Of(t.lat,t.lng,e)},K.prototype.containsPoint=K.prototype.pd,K.prototype.hh=function(t,e){var i=this.fb();if(!e&&!C(t,K))throw new D(this.hh,0,t);return(t=(e=this.nc(t,e)).fb()).lat===i.lat&&t.lng===i.lng&&this.ae()===e.ae()&&this.Fb()===e.Fb()},K.prototype.containsRect=K.prototype.hh,K.prototype.gd=function(t,e,i,n){if(!i){if(E(t=Rf(t)))throw new D(this.gd,0,t);if(E(e=Sf(e)))throw new D(this.gd,1,e)}return cg(this.la,this.ca,this.na,this.ia,t,e,t,e,n)},K.prototype.mergeLatLng=K.prototype.gd,K.prototype.Nk=function(t,e,i){return e||Yf(t,this.Nk,0),this.gd(t.lat,t.lng,e,i)},K.prototype.mergePoint=K.prototype.Nk,K.prototype.nc=function(t,e,i){if(!e&&!C(t,K))throw new D(this.nc,0,t);return cg(this.la,this.ca,this.na,this.ia,t.la,t.ca,t.na,t.ia,i)},K.prototype.mergeRect=K.prototype.nc,K.prototype.Ic=function(t,e,i,n,r,o){return r||(t=Rf(t,this.Ic,0),e=Sf(e,this.Ic,1),i=Rf(i,this.Ic,2),n=Sf(n,this.Ic,3)),cg(this.la,this.ca,this.na,this.ia,t,e,i,n,o)},K.prototype.mergeTopLeftBottomRight=K.prototype.Ic,K.prototype.Ad=function(t,e){var i=this.ca<=this.ia,n=t.ca<=t.ia,r=this.ca<t.ia,o=t.ca<this.ia;if(!e&&!C(t,K))throw new D(this.Ad,0,t);return this.na<=t.la&&t.na<=this.la&&(!i&&(!n||r||o)||!n&&(r||o)||r&&o)},K.prototype.intersects=K.prototype.Ad,K.merge=cg,K.fromPoints=dg,K.coverPoints=eg,K.coverLatLngAlts=fg,K.coverRects=gg,K.prototype.ml=function(t,e){var i=this.ca,n=this.la,r=this.ia,o=this.na,a=this.fb().lng;Yf(t,this.ml,0);var s=t.lat-o-(n-o)/2,u=t.lng-a;return t=-180>(t=i+(0>(u=180<u||-180>u?-(a+t.lng):u)?2*u:0))?360+t:t,r=180<(r+=0<u?2*u:0)?r-360:r,90<=(n=0<s?n+2*s:n)&&(n=90),-90>=(o=0>s?o+2*s:o)&&(o=-90),e?$f(e,n,t,o,r):new K(n,t,o,r)},K.prototype.resizeToCenter=K.prototype.ml,K.prototype.Mb="Polygon",K.prototype.md=function(){return[[this.ca,this.la,0],[this.ia,this.la,0],[this.ia,this.na,0],[this.ca,this.na,0],[this.ca,this.la,0]]},K.prototype.X=function(){return this.yc()},K.prototype.yc=function(){return[this.la,this.ca,this.na,this.ia]},hg.prototype.remove=function(t){var e,i,n,r=!1;return t&&(e=t.node)&&e.b===this&&(i=e.entries)&&0<=(n=i.indexOf(t))&&(i.splice(n,1),this.m(e),kg(this,t,!1),r=!0),r},hg.prototype.flush=function(){var t=new lg(null,NaN,this.f-this.i,this.g-this.j,this.f+this.i,this.g+this.j);t.b=this,this.head=this.a=t,this.b=null},hg.prototype.ab=function(t,e,i,n,r,o){var a=[],s=this.head,u=this.a;return t<=s[5]&&e<=s[6]&&(r?i>=s[7]:i>s[7])&&(o?n>=s[4]:n>s[4])&&ng(this,s,a,t,e,i,n,o||n>=u[6],r||i>=u[5]),a},hg.prototype.Uc=ba(1);var og=0;function lg(t,e,i,n,r,o){this.c=e,t&&(this.parent=t,this.b=t.b,1&e?(i=t[8],r=t[5]):(i=t[7],r=t[8]),2&e?(n=t[9],o=t[6]):(n=t[4],o=t[9])),this[7]=i,this[5]=r,this[8]=(i+r)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function pg(t,e){return t[e]||(++t.a,t[e]=new lg(t,e))}function qg(t,e){(t.entries||(t.entries=[])).push(e),e.node=t}function rg(t,e,i,n,r){var o=t[5],a=t[6];return t[7]<=e&&t[4]<=i&&(o>n||o===n&&o===t.b.a[5])&&(a>r||a===r&&a===t.b.a[6])}function sg(t,e,i,n,r,o){sg.l.constructor.apply(this,arguments)}function tg(t,e,i,n,r){if(rg(t.a,e,i,n,r))return ug(t,t.a,e,i,n,r,t.c);throw Error("Coordinates out of bounds")}function ug(t,e,i,n,r,o,a){var s,u,l=e[8],h=e[9];return a&&(r<l||(s=i>=l))&&(o<h||(u=n>=h))?i=ug(t,pg(e,s|u<<1),i,n,r,o,a-1):(qg(e,i=new vg(i,n,r,o)),kg(t,i,!0),mg(t,e)),i}function vg(t,e,i,n){this.id=og++,this[0]=e,this[1]=i,this[2]=n,this[3]=t}function wg(t){this.f=new sg(+t||10,180,90,0,0,!0),this.c=[],this.g=!1,this.a=this.b=this.R=null}function xg(t,e,i,n,r,o){return o?(o=new vg(r,-e,i+360,-n),t.c.push(o),t.g=!0,t.a&&t.a.Ic(e,i,n,r,!0,t.a)):(o=tg(t.f,i,-e,r,-n),t.b&&t.b.Ic(e,i,n,r,!0,t.b)),++t.Xh,t.R=null,o}function yg(t,e,i,n,r,o,a){var s,u=(t=t.c).length,l=[];if(u){var h=i+360;for(s=r+360;u--;){var c=t[u];(zg(c,e,i,n,r,o,a)||zg(c,e,h,n,s,o,a))&&l.push(c)}}return l}function zg(t,e,i,n,r,o,a){var s=t[3],u=t[0],l=t[1];return t=t[2],(o?u<=n:u<n)&&(a?s<=r:s<r)&&t>=e&&l>=i}function Ag(t,e){var i,n,r;if(i=e.length){var o=t.length;for(n={};o--;)n[t[o].id]=1;for(;i--;)(r=e[i]).id in n||t.push(r)}}function Bg(t){return x.H.gl.flexpolyline.encode(t)}function Cg(t){return x.H.gl.flexpolyline.decode(t)}function L(t){L.l.constructor.call(this),t&&Dg(t,L,0),this.Y=t||[],this.a=Eg(this,0,this.Y.length)}function Eg(t,e,i){t=t.Y;var n=0;for(e=wd(e,0),i=vd(i,t.length),i-=2,e+=1;e<i;)n+=Uf(t[e],t[e+=3]);return n}function Fg(t,e,i,n,r){var o=t.Y.length;e=Rf(e,r),i=Sf(i,r),t.Y.push(Rf(e,r),Sf(i,r),n===B?0:Tf(n,r)),o&&(t.a+=Uf(t.Y[o-2],i)),delete t.R,delete t.b}function Dg(t,e,i){for(var n,r=t.length,o=!(r%3);o&&r;)o=!(E(t[--r]=Tf((n=t[r])===B?0:n))||E(t[--r]=Sf(t[r]))||E(t[--r]=Rf(t[r])));if(!o&&e)throw new D(e,i,t)}function Gg(t){var e=new L,i=0,n=t.length;if(n%2)throw new D(Gg,0,t);for(;i<n;)Fg(e,t[i++],t[i++],0,Gg);return e}function Hg(t,e){return t.a-e.a}function Ig(t,e){var i,n=t.Y,r=-2,o=[],a=t.b;if(!a){a=t.b=new wg;var s=0,u=t.Y,l=u.length;for(i=0;i<l;i+=3){var h=u[i],c=u[i+1];if(i){if(p<c)var f=p,p=c;else f=c;if(g<h)var d=h;else{d=g;var g=h}(f=xg(a,d,f,g,p,180<p-f)).a=s++}g=h,p=c}}for(u=(a=a.ig(e).sort(Hg)).length,e=0;e<u;e++){if(l=3*(s=(s=a[e]).a),s>r+1){var y=[n[l],n[l+1]];o.push(y)}r=s,y.push(n[l+3],n[l+4])}if(t.a){for(n=[],r=o.length,e=0;e<r;e++)if(a=(y=o[e]).length){for(u=[],t=0;t<a;t+=2)s=y[t],l=y[t+1],u.push(s,l),i=y[t-1],t&&Uf(l,i)&&(n.push(u),i+=0>i?360:-360,(u=[]).push(y[t-2],i,s,l));n.push(u)}o=n}return o}function Jg(t){var e=Cg(t);t=e.polyline;var i=e.thirdDim;if(e=2===i||3===i,i=0===i,!t)throw new D(Jg,0,"data");if(e||i){i=t.length;for(var n=Array(3*i),r=0,o=0;r<i;r++){var a=t[r];n[o++]=a[0],n[o++]=a[1],n[o++]=e?a[2]:0}}if(!n)throw new D(Jg,0,"only ABSENT, ALTITUDE or ELEVATION are supported as type of the 3rd dimension");return new L(n)}function Kg(t){Kg.l.constructor.call(this),void 0!==t&&(this.data=t)}function Lg(){}lg.prototype.a=0,lg.prototype.removeChild=function(t){var e=t.c;this[e]===t&&(delete this[e],delete t.parent,--this.a)},lg.prototype.Uc=ba(0),u(sg,hg),sg.prototype.m=function(t){for(var e,i,n=this.head;t;)(e=t.entries)&&e.length||(e&&delete t.entries,t.a||!(i=t.parent))?t=y:(i.removeChild(t),n===t&&(n=i),t=i);this.head!==n&&(this.head=n,mg(this))},sg.prototype.Fc=function(t,e){return tg(this,t,e,t,e)},vg.prototype.wd=function(t){return this[t]},t("H.geo.QuadTree",wg),n=wg.prototype,n.Xh=0,n.bd=function(){return this.Xh},n.Gb=function(){return this.g},n.G=function(){var t,e;if(!this.R){var i,n,r,o=[];if(!this.b&&(t=ig(this.f))&&(this.b=new K(-t[0],t[3],-t[2],t[1])),(e=this.b)&&o.push(e),!this.a&&(r=(n=this.c).length)){t=90;var a=360,s=-90;for(i=0;r--;){var u=n[r];t=vd(t,u[0]),a=vd(a,u[3]),s=wd(s,u[2]),i=wd(i,u[1])}this.a=new K(-t,a,-s,i-360)}(e=this.a)&&o.push(e),(e=o[0])&&(o[1]&&(e=e.nc(o[1],!0)),this.R=e)}return this.R},n.Fc=function(t){var e=t.lng;return xg(this,t=t.lat,e,t,e,!1)},n.mk=function(t){var e=t.Rb(),i=t.Nb();return(t=t.Gb())?xg(this,e.lat,i.lng,i.lat,e.lng,t):xg(this,e.lat,e.lng,i.lat,i.lng,t)},wg.prototype.insertBoundingBox=wg.prototype.mk,wg.prototype.remove=function(t){var e;if(t.node){var i=this.f.remove(t);this.b=null}else(i=0<=(t=(e=this.c).indexOf(t)))&&(e.splice(t,1),this.g=0<e.length,this.a=null);return i&&(--this.Xh,this.R=null),i},wg.prototype.remove=wg.prototype.remove,wg.prototype.ig=function(t,e,i){var n=this.f,r=t.Rb(),o=t.Nb(),a=-r.lat;r=r.lng;var s=-o.lat;return o=o.lng,!e&&a===s||!i&&r===o?t=[]:t.Gb()?(Ag(t=n.ab(-180,a,o,s,i,e),n.ab(r,a,180,s,!1,e)),Ag(t,yg(this,a,o,s,r+360,e,i))):Ag(t=n.ab(r,a,o,s,i,e),yg(this,a,r,s,o,e,i)),t},wg.prototype.intersectBoundingBox=wg.prototype.ig,t("H.util.flexiblePolyline.encode",Bg),t("H.util.flexiblePolyline.decode",Cg),u(L,Vf),t("H.geo.LineString",L),L.prototype.zi=function(t,e,i){Fg(this,t,e,i,this.zi)},L.prototype.pushLatLngAlt=L.prototype.zi,L.prototype.Bf=function(t,e,i){i&&Dg(i,this.Bf,2),void 0===e&&(e=this.Y.length),e&&(this.a-=Eg(this,t-3,t+e+3));var n=i?this.Y.splice.apply(this.Y,[t,e].concat(i)):this.Y.splice(t,e);return i&&(this.a+=Eg(this,t-3,t+i.length+3)),e&&!i&&(this.a+=Eg(this,t-3,t-3)),delete this.R,delete this.b,n},L.prototype.spliceLatLngAlts=L.prototype.Bf,L.prototype.nk=function(t,e,i,n){this.Bf(t,0,[e,i,n])},L.prototype.insertLatLngAlt=L.prototype.nk,L.prototype.il=function(t){this.Bf(t,3)},L.prototype.removeLatLngAlt=L.prototype.il,L.prototype.Fd=function(t){Fg(this,t.lat,t.lng,t.alt,this.Fd)},L.prototype.pushPoint=L.prototype.Fd,L.prototype.Fc=function(t,e){this.nk(3*t,e.lat,e.lng,e.alt)},L.prototype.insertPoint=L.prototype.Fc,L.prototype.sf=function(t){this.il(3*t)},L.prototype.removePoint=L.prototype.sf,L.prototype.Qe=function(t,e){var i=this.Y,n=3*t;t=i[n];var r=i[n+1];return i=i[n+2],e&&(e.lat=t,e.lng=r,e.alt=i),e||new Wf(t,r,i)},L.prototype.extractPoint=L.prototype.Qe,L.prototype.tm=function(t,e,i){var n=this.Y;e=e||0,i=Ze(i,n.length/3);for(var r=3*e;e<i;)t(n[r++],n[r++],n[r++],e++)},L.prototype.eachLatLngAlt=L.prototype.tm,L.isDBC=Uf,L.prototype.wh=function(t){var e=this.a;return t&&(e+=Uf((t=this.Y)[t.length-2],t[1])),e},L.prototype.getDBCs=L.prototype.wh,L.prototype.Ze=function(){return this.Y.length/3},L.prototype.getPointCount=L.prototype.Ze,L.prototype.hn=function(){return this.Y},L.prototype.getLatLngAltArray=L.prototype.hn,L.prototype.R=y,L.prototype.G=function(){var t;if(!(t=this.R)){var e,i,n=(t=this.Y).length,r=3,o=y;if(3<=n){var a=e=t[0],s=i=t[1];for(o=new K(a,s,e,i);r<n;r+=3){if(a=t[r-3],s=t[r-2],e=t[r],s>(i=t[r+1])&&180<i-s||s<i&&-180>s-i||i<s&&180>Ad(i-s)){var u=s;s=i,i=u}a<e&&(u=a,a=e,e=u),cg(o.la,o.ca,o.na,o.ia,a,s,e,i,o)}}t=this.R=o}return t},L.prototype.getBoundingBox=L.prototype.G,L.prototype.Zn=function(){return this.R!==y},L.prototype.hasBoundingBox=L.prototype.Zn,L.fromLatLngArray=Gg,L.prototype.oa=function(t){var e,i=this===t;if(!i&&(i=C(t,L))){var n=this.Y;for(t=t.Y,i=(e=n.length)===t.length;i&&e--;)i=n[e]==t[e]}return i},L.prototype.equals=L.prototype.oa,n=L.prototype,n.rb="LineString",n.Tc=function(t,e){var i,n=this.Y,r=n.length;if(r){for(t.push("("),i=0;i<r;i+=3)i&&t.push(","),t.push(n[i+1]," ",n[i]);e&&(n[0]!==n[r-3]||n[1]!==n[r-2])&&t.push(",",n[1]," ",n[0]),t.push(")")}else t.push("EMPTY");return t},n.Mb="LineString",n.md=function(){var t,e=[],i=this.Y,n=i.length;for(t=0;t<n;t+=3)e.push([i[t+1],i[t],i[t+2]]);return e},n.yc=function(){var t,e=this.Y;if(this.G().Gb()){var i=1;for(t=(e=e.slice()).length;i<t;i+=3)0>e[i]&&(e[i]+=360)}return e},n.lp=function(t){t=void 0===t?5:t;for(var e=this.Y,i=e.length,n=[],r=0;r<i;r+=3)n.push([e[r],e[r+1],e[r+2]]);return Bg({polyline:n,precision:t,thirdDim:2,thirdDimPrecision:t})},L.prototype.toFlexiblePolyline=L.prototype.lp,L.fromFlexiblePolyline=Jg,u(Kg,F),t("H.map.Feature",Kg),Kg.prototype.getData=function(){return this.data},Kg.prototype.getData=Kg.prototype.getData,Kg.prototype.u=function(){Kg.l.u.call(this),delete this.data},t("H.map.provider.Invalidations",Lg),Lg.MARK_INITIAL=Ud,Lg.prototype.update=function(t,e){e!==Mg.NONE&&(this.a=t,e&Mg.SPATIAL&&(this.f=t),e&Mg.VISUAL&&(this.g=t),e&Mg.ADD&&(this.b=t),e&Mg.REMOVE&&(this.c=t),e&Mg.Z_ORDER&&(this.j=t),e&Mg.VOLATILITY&&(this.i=t))},Lg.prototype.update=Lg.prototype.update,Lg.prototype.on=function(){return this.a},Lg.prototype.getMark=Lg.prototype.on,Lg.prototype.a=Ud,Lg.prototype.eo=function(t){return this.a>t},Lg.prototype.isAny=Lg.prototype.eo,Lg.prototype.g=Ud,Lg.prototype.me=function(t){return this.g>t},Lg.prototype.isVisual=Lg.prototype.me,Lg.prototype.f=Ud,Lg.prototype.Qh=function(t){return this.f>t},Lg.prototype.isSpatial=Lg.prototype.Qh,Lg.prototype.b=Ud,Lg.prototype.pk=function(t){return this.b>t},Lg.prototype.isAdd=Lg.prototype.pk,Lg.prototype.c=Ud,Lg.prototype.kg=function(t){return this.c>t},Lg.prototype.isRemove=Lg.prototype.kg,Lg.prototype.j=Ud,Lg.prototype.Rh=function(t){return this.j>t},Lg.prototype.isZOrder=Lg.prototype.Rh,Lg.prototype.i=Ud,Lg.prototype.ko=function(t){return this.i>t},Lg.prototype.isVolatility=Lg.prototype.ko;var Mg={NONE:0,VISUAL:1,SPATIAL:2,ADD:4,REMOVE:8,Z_ORDER:16,VOLATILITY:32};function Ng(t,e,i){Ng.l.constructor.call(this,t),this.oldValue=i,this.newValue=e}function M(t){if(uc(this,M),M.l.constructor.call(this,t?t.data:B),this.N=Og.next(),t){var e="min";Cc(t[e])&&(this.v=t[e]),Cc(t[e="max"])&&(this.s=t[e]),(e="visibility")in t&&(this.c=!!t[e]),(e="volatility")in t&&(this.C=!!t[e]),(e="zIndex")in t&&(this.o=+t[e]||0),(e="provider")in t&&!C(t[e],N)&&(this.a=t[e],this.wa(Mg.ADD))}}Lg.Flag=Mg,u(Ng,rd),t("H.util.ChangeEvent",Ng),u(M,Kg),t("H.map.Object",M);var Og=new af(1),Pg={ANY:31,OVERLAY:1,SPATIAL:2,MARKER:4,DOM_MARKER:8,GROUP:16};function Qg(t,e,i){var n,r;if(!i||t[0]|e[0]){var o=t.length,a=e.length,s=vd(o,a),u=1;for(r=1+i;u<s;u+=r)if(n=t[u]-e[u])return n}return i?0:o-a}function Rg(t,e){return t.xj(e)}function Sg(t,e,i){if(null===e||e===B)return null;if(0<=Object.keys(e).length&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(Tg(t,i));try{return JSON.stringify(e),e}catch(e){throw Error(Tg(t,i))}}function Tg(t,e){return"Object Remote-Id: "+t.m+" - "+(e?"The value returned by the callback is not a valid JSON object and cannot be set as Feature properties.":"The given object data is not a valid JSON object and cannot be set as Feature properties.")}function Ug(t){var e;if(t){var i=Vg;for(e=C(t,Ug);i--;){var n=Wg[i];if(t.hasOwnProperty(n)){var r=t[n];if(e)this[n]=r;else{if((r=Xg[i](r))===Yg)throw new D(Ug,0,n+": "+t[n]);r!==this[n]&&r!==B&&(this[n]=r)}}}(i=e?t.cf:this.lineWidth&&Xe(this.strokeColor))||(this.cf=i),(i=e?t.Sb:Xe(this.fillColor))||(this.Sb=i),(i=e?t.bf:"none"!==this.strokeColor&&this.lineWidth)||(this.bf=i)}oc(this)}M.Type=Pg,M.prototype.gb=function(){return this.N},M.prototype.getId=M.prototype.gb,M.prototype.Qi=function(t){if(!Cc(t)&&!zc(t))throw new D(this.Qi,0,"id must be a number or a string");return this.m=t,this},M.prototype.setRemoteId=M.prototype.Qi,M.prototype.Dn=function(){return this.m},M.prototype.getRemoteId=M.prototype.Dn,M.prototype.v=-1/0,M.prototype.s=1/0,M.prototype.Vj=function(t){var e=this.s;if(t)for(t=this;t=t.Ha;)e=vd(e,t.s);return e},M.prototype.getMax=M.prototype.Vj,M.prototype.Xj=function(t){var e=this.v;if(t)for(t=this;t=t.Ha;)e=wd(e,t.v);return e},M.prototype.getMin=M.prototype.Xj,M.prototype.c=!0,M.prototype.wb=function(t){return(t=!!t)^this.c&&(this.c=t,this.invalidate(Mg.VISUAL)),this},M.prototype.setVisibility=M.prototype.wb,M.prototype.Dc=function(t){for(var e,i=this;(e=i.c)&&t&&(i=i.Ha););return e},M.prototype.getVisibility=M.prototype.Dc,M.prototype.C=!1,M.prototype.fg=function(t){for(var e,i=this;!(e=i.C)&&t&&(i=i.Ha););return e},M.prototype.getVolatility=M.prototype.fg,M.prototype.El=function(t){var e=this.C;return e^t&&(this.C=!e,this.invalidate(Mg.VOLATILITY)),this},M.prototype.setVolatility=M.prototype.El,M.prototype.o=B,M.prototype.fk=function(){return this.o},M.prototype.getZIndex=M.prototype.fk,M.prototype.ye=function(t){return t!==this.o&&(this.uf(),this.o=t,this.invalidate(Mg.Z_ORDER)),this},M.prototype.setZIndex=M.prototype.ye,M.prototype.J=B,M.prototype.ed=function(){var t,e,i=this.J;if(!i){var n=(t=this.o)!==B;(i=this.Ha)?(i=i.ed().slice())[0]|=n:i=[0|n],i.push(t||0,0>(e=this.Ti)?this.N:e),this.J=i}return i},M.prototype.getZInfo=M.prototype.ed,M.prototype.uf=function(){this.J=B},M.compareZInfo=Qg,M.compareZOrder=Rg,M.prototype.xj=function(t){return this.Og-t.Og||Qg(this.ed(),t.ed(),!1)},M.prototype.compareZOrder=M.prototype.xj,n=M.prototype,n.previousSibling=y,n.nextSibling=y,n.Ti=-1,n.Ha=y,n.sn=function(){return this.Ha},M.prototype.getParentGroup=M.prototype.sn,M.prototype.kc=function(){for(var t,e=this;t=e.Ha;)e=t;return e},M.prototype.getRootGroup=M.prototype.kc,M.prototype.contains=function(t){return this===t},M.prototype.contains=M.prototype.contains,M.prototype.ka=function(t){if(this.Ha)throw new Xc(this.ka,"Not allowed for a child of a group");M.l.ka.call(this,t)},M.prototype.setParentEventTarget=M.prototype.ka,M.prototype.a=y,M.prototype.ga=function(){return this.a},M.prototype.getProvider=M.prototype.ga,M.prototype.xe=function(t,e){var i,n=this.a;if(i=n!==t){if(e&&(n&&!C(n,N)||t&&!C(t,N)))throw new Xc(e,"Only LocalObjectProvider allows an object transfers");e=this.type!==Pg.GROUP,n&&(this.invalidate(Mg.REMOVE),e&&n.Ia(this)),(this.a=t)&&(e&&t.ea(this),this.za=y,this.invalidate(Mg.ADD))}return i},M.prototype.Pb=function(){return this.za||(this.za=new Lg)},M.prototype.getInvalidations=M.prototype.Pb,M.prototype.wa=function(t){var e,i=this.ga();return(e=!!i)&&i.invalidateObject(this,t),e},M.prototype.invalidate=M.prototype.wa,M.prototype.u=function(){this.Ha&&this.Ha.Ia(this),M.l.u.call(this)},M.prototype.setData=function(t){return this.data=t,this},M.prototype.setData=M.prototype.setData,M.prototype.Sc=function(t){if(t&&!Ca(t))throw new D(M.prototype.Sc,0,"opt_callback must be a function");return t={type:"Feature",properties:Sg(this,t?t(this.data):this.data,!!t),geometry:this.ba().Sc()},this.m&&(t.id=this.m),t},M.prototype.toGeoJSON=M.prototype.Sc,M.prototype.X=function(){return{id:this.N,properties:{min:this.Xj(),max:this.Vj(),zIdx:this.o,sIdx:this.Ti,parent:this.Ha?this.Ha.gb():0,visible:this.Dc(),volatile:this.fg()},type:"Feature"}},M.prototype.forWorkerMessage=M.prototype.X,t("H.map.SpatialStyle",Ug),Ug.prototype.Sb=!0,Ug.prototype.cf=!0,Ug.prototype.bf=!0;var Wg="strokeColor fillColor lineWidth lineCap lineJoin miterLimit lineDash lineDashOffset lineHeadCap lineTailCap".split(" ");Ug.prototype.strokeColor="rgba(0,85,170,.6)",Ug.prototype.strokeColor=Ug.prototype.strokeColor,Ug.prototype.fillColor="rgba(0,85,170,.4)",Ug.prototype.fillColor=Ug.prototype.fillColor,Ug.prototype.lineWidth=2,Ug.prototype.lineWidth=Ug.prototype.lineWidth,Ug.prototype.lineCap="round",Ug.prototype.lineCap=Ug.prototype.lineCap,Ug.prototype.lineJoin="miter",Ug.prototype.lineJoin=Ug.prototype.lineJoin,Ug.prototype.miterLimit=1,Ug.prototype.miterLimit=Ug.prototype.miterLimit,Ug.prototype.po=ff,Ug.prototype.lineDash=Ug.prototype.po,Ug.prototype.lineDashOffset=0,Ug.prototype.lineDashOffset=Ug.prototype.lineDashOffset,Ug.prototype.qo=B,Ug.prototype.lineHeadCap=Ug.prototype.qo,Ug.prototype.ro=B,Ug.prototype.lineTailCap=Ug.prototype.ro;var Vg=Wg.length;Ug.prototype.oa=function(t){var e=this===t;if(!e&&t){for(e=0;e<Vg;e++){var i=Wg[e];if(this[i]!==t[i])break}e=e===Vg}return e},Ug.prototype.equals=Ug.prototype.oa,Ug.prototype.Rj=function(t){if(t){var e={};Wa(e,this,t)}else e=this;return new Ug(e)},Ug.prototype.getCopy=Ug.prototype.Rj;var Yg=oc({}),Xg=[function(t){return t?nc(t):Yg},function(t){return t?nc(t):Yg},function(t){return 0<=t&&100>=t?+t:Yg},function(t){return"butt"===(t=nc(t))||"square"===t||"round"===t||"arrow-head"===t||"arrow-tail"===t?t:Yg},function(t){return"round"===t||"bevel"===t||"miter"===t?t:Yg},function(t){return 0<t&&100>=t?+t:Yg},function(t){return t&&t.every&&t.every(Dc)?t:Yg},function(t){return E(+t)?Yg:+t},function(t){return tc(t)?Xg[3](t):B},function(t){return tc(t)?Xg[3](t):B}];Ug.MAX_LINE_WIDTH=100;var Zg=new Ug;Ug.DEFAULT_STYLE=Zg;var $g="fillColor strokeColor lineWidth lineCap lineJoin miterLimit lineDashOffset lineDash lineTailCap lineHeadCap".split(" ");function ah(t){var e;if(t){var i=C(t,ah);for(e in t)if(e in this){var n=t[e];n!==this[e]&&("fillColor"===e||0<(n=+n))&&(this[e]=n)}(t=i?t.Sb:!!(Xe(this.fillColor)&&this.width&&this.width))||(this.Sb=t)}oc(this)}function bh(t,e){var i;bh.l.constructor.call(this,e),e&&this.rc(e.style),t&&(this.j=!0),e&&(i=e.arrows)&&this.tl(i)}function ch(t,e){var i,n=!1,r=!1;if(e.length){for(n=0;n<e.length;n++)if(e[n]!==dh){r=!0;break}e=t.style,n=r?e.cf||e.Sb&&t.j||(i=t.g||!1)&&e.bf&&i.Sb:e.Sb}return n&&t.Dc(!0)}function eh(t,e){eh.l.constructor.call(this,t,e)}function fh(t,e,i,n){var r,o=[],a=e.length;for(r=0;r<a;r++){var s=e[r];s.length&&o.push(gh(t,s,i,n))}return o}function gh(t,e,i,n){var r,o=[],a=e.length,s=0;for(t.W=0,r=r||0;s<a;)o.push(hh(t,e[s++],e[s++],r,n));return i&&o.push(hh(t,e[0],e[1],r,n)),o}function hh(t,e,i,n,r){var o=t.W;return o&&180<Ad(o-i)&&(i+=0>o?-360:360),t.W=i,r.Sh(e,i+n)}function ih(t,e,i){for(var n,r,o,a=e,s=t.length+e;a--;){for(r=(e=t[a]).length,n=Array(r);r--;)o=e[r],n[r]=new I(o.x+i,o.y);t[--s]=n}}Ug.prototype.X=function(){for(var t,e={},i=$g.length;i--;)e[t=$g[i]]=this[t];return e},Ug.prototype.forWorkerMessage=Ug.prototype.X,t("H.map.ArrowStyle",ah),ah.prototype.Sb=!0,ah.prototype.fillColor="rgba(255,255,255,.75)",ah.prototype.width=1.2,ah.prototype.length=1.6,ah.prototype.frequency=5,ah.prototype.Qj=function(){return new ah(this)},ah.prototype.oa=function(t){var e=this===t;return!e&&t&&(e=t.width===this.width&&t.fillColor===this.fillColor&&t.length===this.length&&t.frequency===this.frequency),e},ah.prototype.equals=ah.prototype.oa,u(bh,M),t("H.map.Spatial",bh),bh.prototype.type=Pg.SPATIAL,bh.prototype.Og=0,bh.prototype.style=Zg,bh.prototype.ua=function(){return this.style},bh.prototype.getStyle=bh.prototype.ua,bh.prototype.rc=function(t){var e=!0;return t?this.style=C(t,Ug)?t:new Ug(t):this.style?delete this.style:e=!1,e&&this.invalidate(Mg.VISUAL),this},bh.prototype.setStyle=bh.prototype.rc,bh.prototype.Cm=function(){return this.g},bh.prototype.getArrows=bh.prototype.Cm,bh.prototype.tl=function(t){var e=this.g,i=!1;return!t&&e?(delete this.g,i=!0):!t||e&&e.oa(t)||(this.g=new ah(t),i=!0),i&&"none"!==this.style.strokeColor&&this.wa(1),this},bh.prototype.setArrows=bh.prototype.tl,bh.prototype.j=!1,bh.prototype.ho=function(){return this.j},bh.prototype.isClosed=bh.prototype.ho,bh.prototype.getGeometriesForTile=bh.prototype.$d,bh.prototype.zh=function(){return y},bh.prototype.getLabels=bh.prototype.zh,u(eh,bh),t("H.map.GeoShape",eh),eh.prototype.getBoundingBox=eh.prototype.G;var jh=new L([0,0,0,0,0,0,0,0,0]),sh;function kh(t){uc(this,kh),kh.l.constructor.call(this),this.pa=lh(this,t,this.constructor,0)}function lh(t,e,i,n){var r,o=[];if(!yc(e))throw new D(i,n);for(r=0;r<e.length;r++){if(!t.a(e[r]))throw new D(i,n);o.push(t.b(e[r]))}return o}function mh(t){mh.l.constructor.call(this,t)}function nh(t,e){nh.l.constructor.call(this,!1,e),this.da(t)}function oh(t,e){if(!C(t,L)||2>t.Ze())throw new D(e,0)}function ph(t,e,i,n){var r=Ig(e,i.bg());if(r.length&&(r=(t=fh(t,r,!1,e=i.dg())).length)){var o=i.af();e=e.w,i.x||ih(t,r,-e),i.x===(1<<i.z)-1&&ih(t,r,e),(i=qh(t,o.left,o.top,o.right,o.bottom,!1)).length&&n.push(new rh(i))}}function th(t,e){if(x.URL)return new x.URL(t,e).toString();if(!t||!uh(t))return t;if(!e||uh(e))throw new TypeError("Failed to construct 'URL': Invalid base URL");sh||Fc(sh=document.createElement("a"));var i=sh;return i.href=e,"/"!==t[0]?t=i.href.replace(/\/[^\/]*$/,"/")+t:((e=i.origin)||(e=i.protocol+"//"+i.host),t=e+t),t}function uh(t){var e=!1;return"string"==typeof t&&(e=!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))),e}function vh(t,e){var i,n,r,o=arguments.length;for(i=1;i<o;i++)if((n=arguments[i])&&n!==t&&n!==a){var a=n;for(r in n){var s=n[r];t[r]!==s&&(wh(s)?wh(t[r])?t[r]=vh(t[r],s):t[r]=qc(s):void 0!==s&&(t[r]=qc(s)))}}return t}u(kh,Vf),t("H.geo.MultiGeometry",kh),kh.prototype.splice=function(t,e,i){return t=[t],e!==B&&t.push(e),i&&(e=lh(this,i,this.splice,2),t=t.concat(e)),this.R=y,this.pa.splice.apply(this.pa,t)},kh.prototype.splice=kh.prototype.splice,kh.prototype.pc=function(t){var e=this.pa.length;if(!(0<=t&&t<e))throw new je(this.pc,t,[0,e-1]);return this.R=y,this.pa.splice(t,1)[0]},kh.prototype.removeAt=kh.prototype.pc,kh.prototype.remove=function(t){if(0<=(t=this.pa.indexOf(t))){var e=this.pa.splice(t,1)[0];this.R=y}return e||y},kh.prototype.remove=kh.prototype.remove,kh.prototype.$m=function(){return this.pa},kh.prototype.getGeometries=kh.prototype.$m,kh.prototype.push=function(t){var e=lh(this,[t],this.push,0)[0];this.R&&(this.R=this.R.nc(t.G())),this.pa.push(e)},kh.prototype.push=kh.prototype.push,kh.prototype.G=function(){var t,e,i;if(!(t=this.R)&&(t=y,this.pa.length))for(t=this.pa[0].G(),i=1;i<this.pa.length;i++)(e=this.pa[i].G())&&(t=t?t.nc(e):e);return this.R=t},kh.prototype.getBoundingBox=kh.prototype.G,kh.prototype.R=y,kh.prototype.b=function(t){return t},kh.prototype.oa=function(t){var e,i=this===t;if(!i&&(i=C(t,this.constructor))){var n=this.pa;for(t=t.pa,i=(e=n.length)===t.length;i&&e--;)i=n[e].oa(t[e])}return i},kh.prototype.equals=kh.prototype.oa,n=kh.prototype,n.Tc=function(t){var e,i,n=this.pa,r=n.length,o=!1;if(r){for(t.push("("),e=0;e<r;e++)(i=0<e&&o)&&t.push(","),n[e].Tc(t),"EMPTY"===t[t.length-1]?t.splice(-1-i,1+i):o=!0;o?t.push(")"):t.splice(-1,1,"EMPTY")}else t.push("EMPTY");return t},n.toString=function(){return this.Tc([this.rb.toUpperCase()," "]).join("")},n.yc=function(){for(var t=[],e=this.pa,i=e.length;i--;)t[i]=e[i].yc();return t},n.X=function(){var t=kh.l.X.call(this);return t.type=this.rb,t},n.md=function(){for(var t=[],e=this.pa,i=e.length;i--;)t[i]=e[i].md();return t},u(mh,kh),t("H.geo.MultiLineString",mh),mh.prototype.a=function(t){return C(t,L)},mh.prototype.rb="Multi"+L.prototype.rb,mh.prototype.Mb="Multi"+L.prototype.Mb,u(nh,eh),t("H.map.Polyline",nh),nh.prototype.G=function(){return this.eb.G()},nh.prototype.getBoundingBox=nh.prototype.G,nh.prototype.eb=y,nh.prototype.da=function(t){var e,i,n=this.da;if(C(t,mh)){var r=t.pa;if(!(e=r.length))throw new D(n,0);for(i=0;i<e;i++)oh(r[i],n)}else oh(t,n);return this.zd=!!r,this.eb=t,this.wa(Mg.SPATIAL),this},nh.prototype.setGeometry=nh.prototype.da,nh.prototype.ba=function(){return this.eb},nh.prototype.getGeometry=nh.prototype.ba,nh.prototype.clip=function(t){var e=this.eb;return Ig(this.zd?e.pa[0]:e,t)},nh.prototype.clip=nh.prototype.clip,nh.prototype.$d=function(t){var e,i=this.eb,n=[];if(this.zd)for(e=(i=i.pa).length;e--;)ph(this,i[e],t,n);else ph(this,i,t,n);return n.length?n:B},nh.prototype.getGeometriesForTile=nh.prototype.$d,nh.prototype.X=function(){var t=nh.l.X.call(this),e=t.properties;return t.geometry=this.ba().X(),e.style=this.ua().X(),e.height=0,t},nh.prototype.forWorkerMessage=nh.prototype.X,t("H.util.webgl.mergeObjects",vh);var xh=mc();function yh(t,e,i){var n=i[t];return e&&n in e&&0>sc.indexOf(n)?(e=e[n],++t<i.length?yh(t,e,i):e):xh}var zh=yh.bind(null,0),Ah={polygons:1,lines:1,"pattern-lines":1,points:1,text:1,raster:1,custom_icons:1,overlays:1},Bh={data:1,draw:1,enabled:1,filter:1,properties:1},Ch=Object.keys(Bh);function Dh(t,e,i,n,r,o){var a=n[t],s=i[a];if(++t<n.length){var u=e[a]||{};for(i=Ch.length;i--;){var l=Ch[i];if("draw"!==l||!o){var h=s[l];h!==B&&(u[l]=qc(h))}}Dh(t,u,s,n,r,o)}else r?u=qc(s):(u=s,delete i[a]);e[a]=e[a]?vh(e[a],u):u}var Eh=Dh.bind(null,0);function Fh(t,e){t in Ah&&(e[t]=1)}function Gh(t,e,i){var n,r,o;for(n in t)if(Bh[n]){if("draw"===n){var a=t[n];for(r in a){var s=a[r];(o=s.style)?(s.style=e+o,Fh(o,i)):(delete a[r],a[e+r]=s,Fh(r,i))}}}else Gh(t[n],e,i)}function Hh(t,e){var i,n,r,o,a={};if(e+="_",i=(t=vh({},t)).styles)for(n in i){var s=i[n];if(delete i[n],i[e+n]=s,r=s.mix)for(zc(r)&&(r=[r]),o=r.length;o--;)Fh(r[o],a),r[o]=e+r[o];(o=s.base)&&(r||(r=s.mix=[]),r.unshift(e+o),delete s.base,Fh(o,a)),Fh(n,a)}else i=t.styles={};if(s=t.layers)for(n in s)r=s[n],delete s[n],(o=r.data)&&!o.layer&&(o.layer=n),s[e+n]=r,Gh(r,e,a);for(n in a)i[e+n]={base:n};return t}function Ih(t,e){var i,n=t.sources,r=Object.keys(n)[0],o=vh(n[r],{uid:e});for(i in n=t.layers,t.sources={},t.sources[e]=o,n)(t=n[i]).data?t.data.source===r&&(t.data.source=e):t.data={source:e}}function Jh(t,e){var i,n=t.textures,r=t.fonts;for(i in n){var o=n[i];o.url&&(o.url=th(o.url,e))}for(i in r)if(yc(n=r[i]))for(o=0;o<n.length;o++){var a=n[o];a.url=a.url&&th(a.url,e)}else(a=t.fonts[i]).url=a.url&&th(a.url,e)}function Kh(t,e){return"function(){return feature."+t+(e||"")+";}"}function Lh(t){return Kh("style."+t,void 0)}function Mh(t,e,i,n){return t={base:t,blend:e,blend_order:i},n&&(t.clean_depth=!!n),t}function Nh(t){var e={};return e["translucent-"+(t?"extruded-":"")+"polygons"]={color:Lh("fillColor"),order:1,interactive:!0,extrude:t},e}function Oh(t,e,i,n){return t={data:{source:t,layer:e}},i&&(t.draw=i),n&&(t.filter=n),t}function wh(t){return Da(t)&&!yc(t)}function Ph(t,e){if(Ph.l.constructor.call(this),e&&uh(e))throw new D(Ph,1,"Base URL must be absolute");this.A=Qh.INIT,this.a=null,this.c=e}u(Ph,F),t("H.map.render.Style",Ph),Ph.prototype.load=Ph.prototype.load,Ph.prototype.getState=function(){return this.A},Ph.prototype.getState=Ph.prototype.getState,Ph.prototype.P=function(t){this.A=t},Ph.prototype.setState=Ph.prototype.P,Ph.prototype.hc=function(){return this.c},Ph.prototype.getBaseUrl=Ph.prototype.hc,Ph.prototype.vd=function(){return qc(this.a)},Ph.prototype.getConfig=Ph.prototype.vd,Ph.prototype.Jm=function(){return this.a},Ph.prototype.getConfigReference=Ph.prototype.Jm,Ph.prototype.Ld=function(t){this.a=t},Ph.prototype.setConfig=Ph.prototype.Ld,Ph.prototype.Lb=function(t){this.a=null,this.P(Qh.ERROR);var e=Rh;se(this.aa,void 0!==e?String(e):void 0)?this.dispatchEvent(new td(Rh,t,this)):console.error(t)},Ph.prototype.dispatchError=Ph.prototype.Lb,Ph.prototype.u=function(){Ph.l.u.call(this),this.a=null};var Rh="error",Sh={nd:"change",hj:Rh},Qh={ERROR:-1,INIT:0,LOADING:1,READY:2};function Th(t,e){if(Th.l.constructor.call(this,t,e),zc(t))Uh.test(t)&&-1===t.indexOf("import:")?(this.f=t,e||(this.j=uh(this.f)?B:this.f)):this.g=t;else{if(!Da(t))throw new D(Th,0,Vh);this.Ld(qc(t))}}function ai(t){var e,i=t.a;if(Da(i)){var n;if(n=t.i){for(var r in n=!1,i=i&&i.sources)if(i[r].type===t.i){n=!0;break}n=!(!i||n)}n&&(e="invalid source, the only valid type is "+t.i)}else e=Vh;return e&&t.Lb(e),!e}function Zh(t){t.dispatchEvent(new rd("change",t))}function Xh(t){if(t.getState()!==Qh.READY)throw new Xc(t.hf,"style is not ready yet")}function Yh(t,e,i,n){var r,o,a=[],s=yc(e)?e:[e];for(void 0===n&&(n=!0),s=s.sort().reverse();r=s.pop();){e=String(r).split(".");for(var u=t.a,l=e.length;l--&&!Bh[e[l]];);if(u&&0>l&&wh(u=zh(u.layers,e))||(u=xh),u===xh)throw new D(i,0,'Unresolvable layer ID "'+r+'"');if(a.push({id:e,hb:u}),n)for(o in u)!Bh[o]&&wh(u[o])&&s.push(r+"."+o)}return a}function $h(t,e){var i,n=0;for(i=e.length;n!==i;){var r=e[n++],o=t;if(!(t=o[r]))break}return n===i?{node:t,parent:o,wg:r}:void 0}Ph.State=Qh,u(Th,Ph),t("H.map.render.webgl.Style",Th),Th.prototype.load=function(){var t=this,e=this.hc();this.f?(this.P(Qh.LOADING),new rf("text/plain",this.f).then((function(t){var i={};return Wh(t,e,!1,(i[e]=!0,i))})).then((function(e){return t.Ld(e)}),(function(e){return t.Lb(e.message)})),this.f=null):this.g&&(this.P(Qh.LOADING),Wh(this.g,e).then((function(e){return t.Ld(e)}),(function(e){return t.Lb(e.message)})),this.g=null)},Th.prototype.zl=function(t,e,i){var n;for(Xh(this),t=Yh(this,t,this.zl,i),i=0;i<t.length;i++){var r=t[i].hb.draw;for(n in r){var o=r[n];wh(o)&&(o.interactive=!!e)}}Zh(this)},Th.prototype.setInteractive=Th.prototype.zl,Th.prototype.setProperty=function(t,e,i){var n,r=t.split("."),o=0,a=r.length;if(Xh(this),!tc(e))throw new D(this.setProperty,1,"value");if(n=$h(this.a,r)){if(!(n.parent instanceof Object)||n.parent instanceof Array){if(!i)throw new D(this.setProperty,0,t+" property is not primitive type");r.pop(),r=$h(this.a,r),n.parent=r.parent[r.wg]={}}n.parent[n.wg]=e}else{for(n=this.a;o!==a-1;)n[r[o]]={},n=n[r[o++]];n[r[o]]=e}ai(this)&&Zh(this)},Th.prototype.setProperty=Th.prototype.setProperty,Th.prototype.Eh=function(t){return Xh(this),(t=$h(this.a,t.split(".")))?qc(t.node):void 0},Th.prototype.getProperty=Th.prototype.Eh,Th.prototype.removeProperty=function(t){Xh(this),(t=$h(this.a,t.split(".")))&&t.parent&&t.parent.hasOwnProperty(t.wg)&&(delete t.parent[t.wg],ai(this)&&Zh(this))},Th.prototype.removeProperty=Th.prototype.removeProperty,Th.prototype.Pe=function(t,e,i){var n;Xh(this);var r=this.a,o=r.layers,a=Yh(this,t,this.Pe,!1);for(t=a.length,n={};t--;)Eh(n,o,a[t].id,!!e,!!i);for(i={},t=(a=Object.keys(r)).length;t--;){var s=a[t],u=r[s];i[s]=u===o?n:qc(u)}return e||Zh(this),i},Th.prototype.extractConfig=Th.prototype.Pe,Th.prototype.hf=function(t){if(Xh(this),!Da(t))throw new D(this.hf,0,"config");this.Ld(vh(this.a,t))},Th.prototype.mergeConfig=Th.prototype.hf,Th.prototype.b=ba(2),Th.prototype.toString=function(){return this.getState()===Qh.READY?x.H.gl.yaml.safeDump(this.a,{lineWidth:120}):""},Th.prototype.u=function(){Th.l.u.call(this),this.g=this.f=null};var Uh=/^(http[s]?)?.*\.ya?ml/i,Vh="invalid style configuration";function Wh(t,e,i,n){i=void 0!==i&&i,n=void 0===n?{}:n;try{var r=x.H.gl.yaml.safeLoad(t,{json:!0})}catch(t){return Promise.reject(t)}return r&&(zc(t=r.import)&&(t=[t]),i&&e&&bi(r,e),delete r.import,yc(t)&&t.length)?(i=t.reduce((function(t,i){var r=e?th(i,e):i;return n[r]||(n[r]=!0,t.push(new rf("text/plain",r).then((function(t){return Wh(t,r,!0,n)})))),t}),[]),Promise.all(i).then((function(t){var e={};return t.forEach((function(t){return t&&vh(e,t)})),vh(e,r),e}))):Promise.resolve(r)}function bi(t,e){function i(t){t.url&&(t.url=th(t.url,e))}var n=t&&t.fonts;if(n)for(var r in n)yc(n[r])?n[r].forEach(i):i(n[r]);if(t=t&&t.textures)for(var o in t)i(t[o])}function qh(t,e,i,n,r,o){var a,s,u,l,h=t.length;if(h)for(a=[];h--;){var c=t[h],f=c.length,p=0;for(u=1;u<f;u++)if(l=ci(c[u-1],c[u],i,e,n,r)){var d=l[0],g=l[1];p&&p.oa(d)?s.push(g):a.push(s=l),p=g,o&&(u=f,h=0)}}else a=t;return a}function ci(t,e,i,n,r,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,i=-i,o=-o,a>s){if(s>r||a<n)return;var u=a,l=t;a=s,t=e,s=u,e=l,u=1}else if(a>r||s<n)return;if(t>e){if(e>i||t<o)return;var h=1;t=-t,e=-e,l=o,o=-i,i=-l}else if(t>i||e<o)return;if(a<n){if((t+=(n-a)*(e-t)/(s-a))>i)return;a=n}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>r)return;t=o}return s>r&&(e=t+(r-a)*(e-t)/(s-a),s=r),e>i&&(s=a+(i-t)*(s-a)/(e-t),e=i),h&&(t=-t,e=-e),u?[new I(s,-e),new I(a,-t)]:[new I(a,-t),new I(s,-e)]}function di(t,e,i){var n,r;t=ei(t,!0),e=ei(e,!1);var o={},a=n=1;switch(~~(i||0)){case 1:a=n=0;break;case 2:n=0,a=1;break;case 3:n=1,a=0}i=n;var s=a;if(e&&t){for(e.Qf=fi(e.x,e.y,null,gi(e)),t.Qf=fi(t.x,t.y,null,gi(t)),a=e;a.next;a=a.next)if(!a.ab)for(n=t;n.next;n=n.next)if(!n.ab){var u=hi(a.next),l=hi(n.next);if(r=ii(a,u,n,l,o)){r=o.dm;var h=o.em,c=o.rp,f=o.sp;ji(r=fi(c,f,null,null,null,null,!0,0,0,r),a,u),ji(u=fi(c,f,null,null,null,null,!0,0,0,h),n,l),r.ki=u,u.ki=r}}for(o=ce(e,ki(t)),i&&(o=!o),a=e;a;a=a.next)a.ab&&(a.oh=o,o=!o);for(o=ce(t,ki(e)),s&&(o=!o),n=t;n.next;n=n.next)n.ab&&(n.oh=o,o=!o);for(li(e),li(t);(t=mi(e))!=e;){for(i=null;!t.Mg;t=t.ki){for(o=t.oh;(i=fi(t.x,t.y,i)).artificial=t.ab||t.fo,t.Mg=1,t=o?t.next:t.Ub;)if(t.ab){t.Mg=1;break}if(!t)break}i.li=p;var p=i}return p}}function fi(t,e,i,n,r,o,a,s,u,l){return t={x:t,y:e,next:i||null,Ub:n||null,li:r||null,ki:o||null,ab:!!a,oh:s||0,Mg:u||0,alpha:l||0},n&&(t.Ub.next=t),i&&(t.next.Ub=t),t}function hi(t){for(;t&&t.ab;)t=t.next;return t}function gi(t){if(t)for(;t.next;)t=t.next;return t}function mi(t){var e=t;if(e)do{e=e.next}while(e!=t&&(!e.ab||e.ab&&e.Mg));return e}function li(t){var e=gi(t);e.Ub.next=t,t.Ub=e.Ub}function ii(t,e,i,n,r,o){var a,s=e.x-t.x,u=e.y-t.y,l=n.x-i.x,h=n.y-i.y,c=s*h-u*l;return c?(l=((i.x-t.x)*h-(i.y-t.y)*l)/c,c=(u*(i.x-t.x)-s*(i.y-t.y))/c,0>l||1<l||0>c||1<c?0:(0===l?a=t:1===l?a=e:0===c?a=i:1===c&&(a=n),a&&!o?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.Qf&&(a.Qf.x=a.x,a.Qf.y=a.y),ii(t,e,i,n,r)):(r.rp=t.x+l*s,r.sp=t.y+l*u,r.dm=l,r.em=c,1))):0}function ki(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function ji(t,e,i){for(e=e.next;e!==i&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.Ub=e.Ub,t.next.Ub=t,t.Ub.next=t}function ei(t,e){for(var i,n=null,r=0,o=t.length;r<o;r++)(i=fi(t[r].x,t[r].y,n)).fo=e,(i.next=n)&&(n.Ub=i),n=i;return n}function O(t,e){var i;if(O.l.constructor.call(this),C(t,L,O,0),e!==B&&yc(e,O,1)){for(i=0;i<e.length;i++)C(e[i],L,O,1,"index "+i);this.Pa=e}else this.Pa=[];this.cb=t,this.a=[]}function ni(t){var e=O,i=L,n=t.la,r=t.ca,o=t.na,a=t.ia;return r=[n,r,B,n,a,B,o,a,B,o,r,B],180<=t.Fb()&&(r.splice(9,0,o,t=t.fb().lng,B),r.splice(3,0,n,t,B)),new e(new i(r))}Th.normalize=bi,Th.prototype.Ld=function(t){Th.l.Ld.call(this,t),ai(this)&&(this.P(Qh.READY),Zh(this))},Th.prototype.vd=function(){return Th.l.vd.call(this)},Th.prototype.hc=function(){return this.j||Th.l.hc.call(this)},t("H.map.Style",Th),Th.State=Qh,t("H.math.clipping.clipStrips",qh),t("H.math.clipping.clipPolygon",di),u(O,Vf),t("H.geo.Polygon",O),O.fromRect=ni;var oi={NORTH:90,SOUTH:-90};function pi(t,e){var i,n,r;return(r=t.G())&&((i=t.wh(!0))&&(n=t.Ze())&&(r=r.nc(eg([t.Qe(0),t.Qe(n-1)],!0),!0)),360===r.Fb()&&1==i%2&&(r=r.gd(e,0))),r}function qi(t,e,i,n){n=void 0===n||n;var r=t.Pa,o=ri.bind(null,e,i);return!(be(e,i,t.cb.Y,0,!0,3)===ae.NONE||n&&r.some(o))}function ri(t,e,i){return be(t,e,i.Y,0,!0,3)===ae.SURFACE}function si(t,e){e=e.Y,t=t.cb.Y;var i,n,r=e.length-3,o=t.length-3,a={};for(i=0;i<r;i+=3){var s=e[i],u=e[i+1],l=e[i+3],h=e[i+4];for(n=0;n<o;n+=3){var c=t[n],f=t[n+1],p=t[n+3];if(ii({x:u,y:s},{x:h,y:l},{x:f,y:c},{x:t[n+4],y:p},a,!0))return!0}}return!1}function ti(t,e){var i=e.cb,n=e.Pa,r=n.length,o=i.Y,a=o.length,s=t.cb.Y,u=s.length;if(si(t,i))return!0;for(i=0;i<a;i+=3)if(qi(t,o[i],o[i+1]))return!0;for(i=0;i<u;i+=3)if(qi(e,s[i],s[i+1]))return!0;for(i=0;i<r;i++)if(si(t,n[i]))return!0;return!1}function ui(t){ui.l.constructor.call(this,t)}function rh(t,e,i){this.paths=this.a=t,e!==B&&(this.interiorsIndex=this.b=e),i!==B&&(this.outlinesIndex=this.c=i)}O.Direction=oi,O.prototype.Cd=oi.NORTH,O.prototype.Al=function(t){return this.Cd!==t&&(this.R=y,this.a.length=0,this.Cd=t),this},O.prototype.setPoleCovering=O.prototype.Al,O.prototype.xn=function(){return this.Cd},O.prototype.getPoleCovering=O.prototype.xn,O.prototype.Um=function(){return this.cb},O.prototype.getExterior=O.prototype.Um,O.prototype.xl=function(t){if(!C(t,L))throw new D(this.xl,0,t);this.cb=t,this.R=y},O.prototype.setExterior=O.prototype.xl,O.prototype.en=function(){return this.Pa},O.prototype.getInteriors=O.prototype.en,O.prototype.Lg=function(t,e,i){var n,r=arguments.length;for(n=2;n<r;n++)C(arguments[n],L,this.Lg,n);var o=this.Pa.splice.apply(this.Pa,arguments);for(n=2;n<r;n++)arguments[n]=B;return this.a.splice.apply(this.a,arguments),o},O.prototype.spliceInteriors=O.prototype.Lg,O.prototype.Vo=function(t){return this.Lg(t,1)[0]},O.prototype.removeInteriorAt=O.prototype.Vo,O.prototype.Uo=function(t){return 0>(t=this.Pa.indexOf(t))?B:this.Lg(t,1)[0]},O.prototype.removeInterior=O.prototype.Uo,O.prototype.el=function(t){if(!C(t,L))throw new D(this.el,0,t);this.Pa.push(t)},O.prototype.pushInterior=O.prototype.el,O.prototype.G=function(){var t=this.R;return t||(this.R=t=pi(this.cb,this.Cd)),t},O.prototype.getBoundingBox=O.prototype.G,n=O.prototype,n.Pj=function(t){var e=this.Pa.length;if(0>t||t>=e)throw new je(this.Pj,t,[0,e-1]);return(e=this.a[t])||(this.a[t]=e=pi(this.Pa[t],this.Cd)),e},n.cb=y,n.Pa=[],n.rb="Polygon",n.Tc=function(t){var e,i=this.Pa,n=i.length;if(this.cb.Ze()){for(t.push("("),this.cb.Tc(t,!0),e=0;e<n;e++)i[e].Ze()&&(t.push(","),i[e].Tc(t,!0));t.push(")")}else t.push("EMPTY");return t},n.Mb="Polygon",n.md=function(){var t,e=[],i=this.Pa,n=this.cb.md();for(n[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),e.push(n),t=0;t<i.length;t++)(n=i[t].md())[0].toString()!==n[n.length-1].toString()&&n.push(n[0]),e.push(n);return e},n.X=function(){var t=O.l.X.call(this);return this.G().Gb()&&(t.type="Multi"+t.type),t},n.yc=function(){var t=[],e=this.Pa,i=e.length;for(t.push(this.cb.yc());i--;)t[i+1]=e[i].yc();return this.G().Gb()?[t]:t},n.oa=function(t){var e=!1;if(C(t,O)){var i=t.Pa,n=this.Pa.length;e=i.length;var r=0;for(e=this.cb.oa(t.cb)&&n===e;e&&r<n;)e=e&&this.Pa[r].oa(i[r]),r++}return e},u(ui,kh),t("H.geo.MultiPolygon",ui),ui.prototype.a=function(t){return C(t,O)},ui.prototype.rb="Multi"+O.prototype.rb,ui.prototype.Mb="Multi"+O.prototype.Mb,rh.prototype.interiorsIndex=rh.prototype.b=Td,rh.prototype.outlinesIndex=rh.prototype.c=Td;var dh=pc(new rh([])),vi=oc([]);function xi(t,e){var i=e&&(+e.extrusion||+e.extrude),n=e&&+e.elevation,r=0;if(xi.l.constructor.call(this,!0,e),0<n&&(r+=n,this.f=n),0<i&&(r+=i,this.i=i),r>yi)throw new je(xi,r,[0,yi]);C(t,L)?this.da(new O(t)):this.da(t)}u(xi,eh),t("H.map.Polygon",xi),xi.prototype.i=0,xi.prototype.f=0,xi.prototype.eb=y;var yi=2047;function zi(t,e,i,n){var r,o,a=0,s=!0;if(r=Ai(t,e.cb,i,n,e.G())){var u=new rh(r),l=e.Pa;if(o=l.length)for(u.b=u.a.length;a<o;a++)(r=Ai(t,l[a],i,n,e.Pj(a)))&&(u.a=u.a.concat(r));for(o=u.a.length,a=0;a<o;a++)if(u.a[a]!==vi){s=!1;break}s&&(u=a%2?dh:B)}return u}function Ai(t,e,i,n,r){var o,a=i.af(),s=r,u=s.Fb(),l=[[]],h=e.Y,c=[],f=h.length,p=!1;for(o=0;o<f;o+=3){var d=h[o],g=h[o+1];p||180!=Ad(g)||(c.push(d),c.push(g),c.push(d),c.push(-g),p=!0),c.push(d),c.push(g)}if(h=c,360>u&&-180==s.ca&&(s=new K(s.la,180,s.na,s.ia)),360>u&&180==s.ia&&(s=new K(s.la,s.ca,s.na,-180)),s.Gb()){for(d=(u=h).length,h=-1,c=0;c<d-2;c+=2)if(Uf(u[c+1],u[c+3])){h=c+2;break}-1===h&&Uf(u[d-1],u[1])&&(h=d),-1!==h&&(f=u[h-2],c=u[h-1],o=u[h%d],p=u[(h+1)%d],180!==Ad(f)&&180!==Ad(o)&&(g=Ad(o-f),d=Ad(p-c),d+=180<d?-360:0,p=Ad(180-p),p+=180<p?-360:0,d&&p&&(g/=Ad(d)/Ad(p),f=o+(o>f?-g:g),c=0<c?180:-180,u.splice(h,0,f,c,f,-c)))),h=u}if(l[0]=Bi([].concat(h),s.ca),360>s.Fb()&&s.pd(new Wf(s.la,180))&&(h=Bi([].concat(h),s.ia),l.push(h)),t=fh(t,l,!0,s=i.dg()),360===r.Fb()&&1==e.wh(!0)%2){for(e=t,t=i.af(),e[0][1].x>e[0][e[0].length-1].x&&(e[0]=e[0].reverse()),h=[],u=e[0].length-1,l=0;l<u;l++)c=e[0][l],h[l]=new I(c.x-2*s.w,c.y),h[l+u]=new I(c.x-s.w,c.y),h[l+2*u]=new I(c.x,c.y),h[l+3*u]=new I(c.x+s.w,c.y),h[l+4*u]=new I(c.x+2*s.w,c.y);e[0]=h,(l=s.Sh(n,0)).y=2*t[n===oi.NORTH?"top":"bottom"],n=l.clone(),l.x=e[0][e[0].length-1].x+1,n.x=e[0][0].x-1,e[0].push(l,n),t=e}if(qh(t,n=a.left,e=a.top,l=a.right,a=a.bottom,!0).length){if(!i.bg().hh(r)){for(i=t,r=[new I(n,e),new I(l,e),new I(l,a),new I(n,a)],a=[],t=i.length;t--;)if(n=di(r,i[t]))for(e=Ci(n),a.push(e);n.li;)e=Ci(n=n.li),a.push(e);t=a}}else i=Di(n,e,t[0]),t[1]&&(i^=Di(n,e,t[1])),t=i?[vi]:B;return t}function Di(t,e,i){var n,r,o,a=n=i[0].x,s=r=i[0].y,u=1;for(o=i.length;u<o;u++){var l=i[u].x,h=i[u].y;l>n?n=l:l<a&&(a=l),h>r?r=h:h<s&&(s=h)}return a<=t&&t<=n&&s<=e&&e<=r&&ce({x:t,y:e},de(i.concat(i[0])))}function Ci(t){var e=[],i=t;do{var n=xd(100*(i.Mo?i.Mo:i.x))/100,r=xd(100*(i.No?i.No:i.y))/100;if(!o||.01<Cd(Dd(o.x-n,2)+Dd(o.y-r,2))){var o=new I(n,r);e.push(o)}i=i.next}while(i&&i!==t);return e}function Bi(t,e){var i,n=Number.POSITIVE_INFINITY,r=-1,o=t.length;for(i=0;i<o;i+=2){var a=Ad(t[i+1]-e);(a+=180<a?360-a:a)<n&&(n=a,r=i)}return 0<i?(e=t.splice(r,t.length-r)).concat(t):t}function Ei(t,e,i){Ei.l.constructor.call(this,jh,i),this.Hg(t),this.Pi(e),i&&"precision"in i&&this.Ni(i.precision)}function Fi(t){t.eb!==y&&Ei.l.da.call(t,Gi(t))}function Gi(t){var e=t.b,i=e.lat,n=t.fa,r=0,o=new L;if(90===Ad(i))for(i=e.Ng(0,n,!0).lat;360>r;r+=120)o.zi(i,r-180,B);else for(t=360/(t=t.O);360>r;r+=t)o.Fd(e.Ng(r,n,!0));return e=new O(o),0>i&&e.Al(oi.SOUTH),e}function Hi(t,e){if(!C(t,Element)){if(Ii.innerHTML=t,!(t=Ii.firstElementChild))throw new D(Hi,0,"No element data");Ii.removeChild(t);var i=!0;Ii.innerHTML=""}this.a=0!==hf(t).length,this.c=i?t:jf(t,x.document,this.a),e&&((i="onAttach")in e&&wc(t=e[i],"Function",Hi,1,i)&&(this.mi=t),(i="onDetach")in e&&wc(t=e[i],"Function",Hi,1,i)&&(this.b=t))}xi.MAX_EXTRUDE_HEIGHT=yi,xi.prototype.Gi=function(t){var e=+t;if(e!==t)throw new D(this.Gi,0,t);if(0>e||this.f+e>yi)throw new je(this.Gi,this.f+e,[0,yi]);this.i=e,this.wa(Mg.SPATIAL)},xi.prototype.setExtrusion=xi.prototype.Gi,xi.prototype.Vm=function(){return this.i},xi.prototype.getExtrusion=xi.prototype.Vm,xi.prototype.Fi=function(t){var e=+t;if(e!==t)throw new D(this.Fi,0,t);if(0>e||this.i+e>yi)throw new je(this.Fi,this.i+e,[0,yi]);this.f=e,this.wa(Mg.SPATIAL)},xi.prototype.setElevation=xi.prototype.Fi,xi.prototype.Sm=function(){return this.f},xi.prototype.getElevation=xi.prototype.Sm,xi.prototype.ba=function(){return this.eb},xi.prototype.getGeometry=xi.prototype.ba,xi.prototype.da=function(t){if(t===y||C(t,O))var e=!1;else C(t,ui,this.da,0),e=!0;return this.zd=e,e=this.eb,this.eb=t,e!==y&&this.wa(Mg.SPATIAL),this},xi.prototype.setGeometry=xi.prototype.da,xi.prototype.G=function(){return this.ba().G()},xi.prototype.getBoundingBox=xi.prototype.G,xi.prototype.$d=function(t){var e,i,n,r=this.ba();if(this.zd){var o=0;for(n=(r=r.pa).length;o<n;o++)(i=zi(this,r[o],t,r[o].Cd))&&(e||(e=[]),e.push(i))}else(i=this.Xa)===B&&(i=this.zd?oi.NORTH:this.ba().Cd),(i=zi(this,r,t,i))&&(e=[i]);return e},xi.prototype.getGeometriesForTile=xi.prototype.$d,xi.prototype.U=y,xi.prototype.X=function(){var t,e=xi.l.X.call(this),i=this.ba(),n=this.zd?i.pa:[i],r=e.properties,o=e.geometry=i.X();if(r.style=this.ua().X(),r.height=this.i+this.f,r.min_height=this.f,this.G().Gb()&&(o.type="MultiPolygon",this.zd)){var a=[];n.forEach((function(e,i){t=o.coordinates[i],e.G().Gb()?a=a.concat(t):a.push(t)})),o.coordinates=a}return e},xi.prototype.forWorkerMessage=xi.prototype.X,u(Ei,xi),t("H.map.Circle",Ei),Ei.prototype.Hg=function(t){(t=Zf(t)).oa(this.b)||(this.b=t,Fi(this))},Ei.prototype.setCenter=Ei.prototype.Hg,Ei.prototype.fb=function(){return this.b},Ei.prototype.getCenter=Ei.prototype.fb,Ei.prototype.Pi=function(t){if(E(t=Yd(t,0,6371000.79*Md/2)))throw new D(this.Pi,0,t);this.fa!==t&&(this.fa=t,Fi(this))},Ei.prototype.setRadius=Ei.prototype.Pi,Ei.prototype.Cn=function(){return this.fa},Ei.prototype.getRadius=Ei.prototype.Cn,Ei.prototype.O=60,Ei.prototype.Ni=function(t){if(!Cc(t))throw new D(this.Ni,0,t);this.O!==(t=Yd(xd(t),4,360))&&(this.O=t,Fi(this))},Ei.prototype.setPrecision=Ei.prototype.Ni,Ei.prototype.zn=function(){return this.O},Ei.prototype.getPrecision=Ei.prototype.zn,Ei.prototype.da=function(){return this},Ei.prototype.setGeometry=Ei.prototype.da,Ei.prototype.ba=function(){return this.eb||Ei.l.da.call(this,Gi(this)),this.eb},Ei.prototype.getGeometry=Ei.prototype.ba,t("H.map.DomIcon",Hi);var Ii=document.createElement("DIV");function Ji(t){Ji.l.constructor.call(this,t)}function Ki(t,e){this.w=+t,this.h=+e}function Li(t,e){var i,n=t,r=e||[];if(t!==Mi.NONE){if(e=i=r.length,-1===this.b.indexOf(n))throw new D(Li,0,t);if(!r)throw new D(Li,1,r);for(;i--;)if(E(r[i]))throw new D(Li,1,r);if(n===Mi.RECT&&3<e&&(r=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],n=Mi.POLYGON),n===Mi.CIRCLE&&2<e&&0<(t=r[2])){n=r[0];var o=r[1],a=360/(i=vd(2*zd(t),40));for(r=[];i--;){var s=a*i*Rd;r.push(n+Fd(s)*t,o+Hd(s)*t)}n=Mi.POLYGON}if(n!==Mi.POLYGON||!e||r.length%2)throw new D(Li,1,r);this.a=r}}Hi.prototype.mi=null,Hi.prototype.b=null,Hi.prototype.Qj=function(t){return jf(this.c,t,this.a)},Hi.prototype.a=!1,u(Ji,kh),t("H.geo.MultiPoint",Ji),Ji.prototype.a=function(t){return Yf(t)},Ji.prototype.b=function(t){return C(t,Wf)?t:Zf(t)},Ji.prototype.rb="Multi"+Wf.prototype.rb,Ji.prototype.Mb="Multi"+Wf.prototype.Mb,t("H.math.Size",Ki),t("H.map.HitArea",Li);var Mi={NONE:0,RECT:1,CIRCLE:2,POLYGON:3};function Ni(t,e){var i;uc(this,Ni),Ni.l.constructor.call(this,e),this.da(t),e&&"icon"in e&&(i=e.icon),this.Pc(i||Oi(this))}function Oi(t){var e=t.g;return e||(e=t.constructor.prototype.g=t.f(Pi)),e}Li.ShapeType=Mi,Li.prototype.b=[Mi.RECT,Mi.CIRCLE,Mi.POLYGON],Li.prototype.hg=function(t,e,i){return this.a?be(t,e,this.a,i,!0):ae.NONE},Li.prototype.hitTest=Li.prototype.hg,u(Ni,M),t("H.map.AbstractMarker",Ni),Ni.prototype.ba=function(){return this.b},Ni.prototype.getGeometry=Ni.prototype.ba,Ni.prototype.da=function(t){var e=this.b;return C(t,Wf)||C(t,Ji)?this.b=t:(Yf(t,this.da,0),this.b=Zf(t)),e&&this.wa(Mg.SPATIAL),this},Ni.prototype.setGeometry=Ni.prototype.da,Ni.prototype.G=function(){return this.b.G()},Ni.prototype.Cb=function(){return this.icon},Ni.prototype.getIcon=Ni.prototype.Cb,Ni.prototype.Pc=function(t){var e=this.icon,i=!e;if(e!==t){if(!this.sk(t)){if(i)throw new D(this.constructor,1,t);throw new D(this.Pc,0,t)}this.icon=t,i||this.wa(Mg.VISUAL)}return this},Ni.prototype.setIcon=Ni.prototype.Pc;var Pi={svg:'<svg xmlns="http://www.w3.org/2000/svg" width="38" height="47" viewBox="0 0 38 47"><g fill="none"><path fill="#0F1621" fill-opacity=".4" d="M15 46c0 .317 1.79.574 4 .574s4-.257 4-.574c0-.317-1.79-.574-4-.574s-4 .257-4 .574z"></path><path fill="#01b6b2" d="M33.25 31.652A19.015 19.015 0 0 0 38 19.06C38 8.549 29.478 0 19 0S0 8.55 0 19.059c0 4.823 1.795 9.233 4.75 12.593L18.975 46 33.25 31.652z"></path><path fill="#6A6D74" fill-opacity=".5" d="M26.862 37.5l4.714-4.77c3.822-3.576 5.924-8.411 5.924-13.62C37.5 8.847 29.2.5 19 .5S.5 8.848.5 19.11c0 5.209 2.102 10.044 5.919 13.614l4.719 4.776h15.724zM19 0c10.493 0 19 8.525 19 19.041 0 5.507-2.348 10.454-6.079 13.932L19 46 6.079 32.973C2.348 29.495 0 24.548 0 19.04 0 8.525 8.507 0 19 0z"></path></g></svg>',size:new Ki(38,47),anchor:new I(19,45),hitArea:new Li(Mi.POLYGON,[19,46,2,27,0,18,5,6,19,0,32,5,38,15,36,27,19,47])};function Qi(t,e){Qi.l.constructor.call(this,t,e)}function Ri(t,e,i,n){Ri.l.constructor.call(this,t,e,i),this.modifiers=n}Ni.prototype.X=function(){var t=Ni.l.X.call(this),e=this.Cb(),i=e.Db(),n=e.ud();return t.geometry=this.ba().X(),i&&((e=t.properties.icon={id:e.uid}).size={w:i.w,h:i.h},e.offset=[i.w/2-(n?n.x:0),i.h/2-(n?n.y:0)]),t},Ni.prototype.forWorkerMessage=Ni.prototype.X,u(Qi,Ni),t("H.map.DomMarker",Qi),Qi.prototype.type=Pg.DOM_MARKER,Qi.prototype.Og=2,Qi.prototype.f=function(t){var e=new Hi(t.svg,t);return t=t.anchor,e.c.style.margin=-t.y+"px 0 0 -"+t.x+"px",e},Qi.prototype.sk=function(t){return C(t,Hi)},u(Ri,Ng),t("H.map.ChangeEvent",Ri);var Si={SIZE:1,POSITION:2,HEADING:4,TILT:8,INCLINE:16,ZOOM:32,BOUNDS:64};function Ti(){this.a=[],Ti.l.constructor.call(this)}function Ui(t,e,i){if(t=t.a.length,i)var n=t;else if(E(n=0>(n=+e)?wd(0,t+n):vd(t,n)))throw new je(Ti,e,[0,t-1]);return n}function Wi(t,e){var i=t.a.splice(e,1)[0];return t.dispatchEvent(new Vi(t,t.b.De,e,null,i,null)),i}function Vi(t,e,i,n,r,o){Vi.l.constructor.call(this,e,t),this.idx=i,this.added=n,this.removed=r,this.moved=o}Ri.Type=Si,Ri.prototype.Zl=Si.SIZE,Ri.prototype.SIZE=Ri.prototype.Zl,Ri.prototype.oj=Si.POSITION,Ri.prototype.POSITION=Ri.prototype.oj,Ri.prototype.ij=Si.HEADING,Ri.prototype.HEADING=Ri.prototype.ij,Ri.prototype.qj=Si.TILT,Ri.prototype.TILT=Ri.prototype.qj,Ri.prototype.jj=Si.INCLINE,Ri.prototype.INCLINE=Ri.prototype.jj,Ri.prototype.rj=Si.ZOOM,Ri.prototype.ZOOM=Ri.prototype.rj,Ri.prototype.fj=Si.BOUNDS,Ri.prototype.BOUNDS=Ri.prototype.fj,u(Ti,F),t("H.util.OList",Ti),Ti.prototype.add=function(t,e){e=Ui(this,e,E(e)),this.a.splice(e,0,t),this.dispatchEvent(new Vi(this,this.b.Be,e,t,null,null))},Ti.prototype.add=Ti.prototype.add,Ti.prototype.pc=function(t){return this.get(t),Wi(this,t)},Ti.prototype.removeAt=Ti.prototype.pc,Ti.prototype.remove=function(t){return 0<=(t=this.indexOf(t))&&(Wi(this,t),!0)},Ti.prototype.remove=Ti.prototype.remove,Ti.prototype.set=function(t,e){if(0!==this.a.length||0!==t){this.get(t),t=Ui(this,t,!1);var i=this.a[t]}return this.a[t]=e,this.dispatchEvent(new Vi(this,this.b.Ee,t,e,i,null)),i},Ti.prototype.set=Ti.prototype.set,Ti.prototype.indexOf=function(t){return this.a.indexOf(t)},Ti.prototype.indexOf=Ti.prototype.indexOf,Ti.prototype.get=function(t){var e=Ui(this,t,!1),i=this.a;if(e>=i.length)throw new je(this.get,t,[0,i.length-1]);return i[e]},Ti.prototype.get=Ti.prototype.get,Ti.prototype.ln=function(){return this.a.length},Ti.prototype.getLength=Ti.prototype.ln,Ti.prototype.Na=function(){return[].concat(this.a)},Ti.prototype.asArray=Ti.prototype.Na,Ti.prototype.flush=function(){for(var t=this.a.length;t--;)Wi(this,t)},Ti.prototype.flush=Ti.prototype.flush,Ti.prototype.u=function(){this.flush(),Ti.l.u.call(this)},Ti.prototype.b={Be:"add",De:"remove",Ee:"set",wp:"move"},u(Vi,rd);var Xi={};function Yi(t,e){this.projection=t||Xi,this.b=0,this.a=this.exp=Bd(e||256)/Ld,Zi(this),this.y=this.x=0}t("H.geo.mercator",Xi),Xi.a=function(t){return vd(1,wd(0,.5-Bd(Id(Od+Nd*t/180))/Md/2))},Xi.b=function(t){return t/360+.5},Xi.mg=function(t,e,i){return i?(i.x=Xi.b(e),i.y=Xi.a(t)):i=new I(Xi.b(e),Xi.a(t)),i},Xi.latLngToPoint=Xi.mg,Xi.$c=function(t,e){return Xi.mg(t.lat,t.lng,e)},Xi.geoToPoint=Xi.$c,Xi.f=function(t){return 0>=t?90:1<=t?-90:Sd*(2*Jd(Ed(Md*(1-2*t)))-Nd)},Xi.c=function(t){return 360*(1===t?1:Wd(t,1))-180},Xi.Sa=function(t,e,i){return i?(i.lat=Xi.f(e),i.lng=Xi.c(t)):i=new Wf(Xi.f(e),Xi.c(t)),i},Xi.xyToGeo=Xi.Sa,Xi.vg=function(t,e){return Xi.Sa(t.x,t.y,e)},Xi.pointToGeo=Xi.vg,t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0),t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22),t("H.geo.PixelProjection",Yi);var $i=Ad(24)+Ad(-8);function Zi(t){t.a>$i&&(t.a=$i),t.w=Dd(2,t.a),t.h=Dd(2,t.a)}function aj(t){t=t||{},aj.l.constructor.call(this),this.min=0,this.max=22,this.nm=this.dark=!!t.dark,t.min&&this.Ki(t.min),t.max&&this.Ii(t.max),this.pixelProjection=new Yi(t.projection,t.minWorldSize),t.provider&&(this.a=t.provider,this.g=A(this.g,this),this.a.addEventListener(P.prototype.i.Ea,this.g,!1,this),this.i=A(this.i,this),this.a.addEventListener(P.prototype.i.Ce,this.i,!1,this))}function bj(t,e,i){var n=t[e],r="min"===e,o=r?t.Ki:t.Ii;if(i!==n){if(!(r?i<=t.max:i>=t.min))throw new D(o,0,"Invalid condition min <= max");t[e]=i,t.g(),t.i(),t.dispatchEvent(new Ng(r?t.b.nj:t.b.mj,i,n))}return t}function cj(t){var e;if(cj.l.constructor.call(this),this.dispatchEvent=A(this.dispatchEvent,this),t){var i=t.length;for(e=0;e<i;e++)this.add(t[e])}}function dj(t,e){var i=e.getProvider&&e.getProvider();i&&(ej[i.uid]=i),e.ka(t)}function fj(t){var e=t.getProvider&&t.getProvider();e&&delete ej[e.uid],t.ka(null)}Yi.prototype.cl=Xi,Yi.prototype.projection=Yi.prototype.cl,Yi.prototype.x=0,Yi.prototype.x=Yi.prototype.x,Yi.prototype.y=0,Yi.prototype.y=Yi.prototype.y,Yi.prototype.pp=Dd(2,$i),Yi.prototype.w=Yi.prototype.pp,Yi.prototype.Xn=Dd(2,$i),Yi.prototype.h=Yi.prototype.Xn,Yi.prototype.Qa=function(t){if(E(t))throw new D(this.Qa,0,t);var e=this.x/this.w,i=this.y/this.h;this.b=t,this.a=this.exp+t,Zi(this),this.x=e*this.w,this.y=i*this.h},Yi.prototype.rescale=Yi.prototype.Qa,Yi.prototype.gk=function(){return this.b||0},Yi.prototype.getZoomScale=Yi.prototype.gk,Yi.prototype.lb=function(t,e){return(t=this.projection.mg(t.lat,t.lng,e)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},Yi.prototype.geoToPixel=Yi.prototype.lb,Yi.prototype.lf=function(t,e){return this.projection.Sa((t.x+this.x)/this.w,(t.y+this.y)/this.h,e)},Yi.prototype.pixelToGeo=Yi.prototype.lf,Yi.prototype.Sa=function(t,e,i){return this.projection.Sa((t+this.x)/this.w,(e+this.y)/this.h,i)},Yi.prototype.xyToGeo=Yi.prototype.Sa,Yi.prototype.Sh=function(t,e,i){return(t=this.projection.mg(t,e,i)).x=t.x*this.w-this.x,t.y=t.y*this.h-this.y,t},Yi.prototype.latLngToPixel=Yi.prototype.Sh,Yi.prototype.qe=function(t){return new I(t.x*this.w-this.x,t.y*this.h-this.y)},Yi.prototype.pointToPixel=Yi.prototype.qe,u(aj,F),t("H.map.layer.Layer",aj),aj.prototype.min=0,aj.prototype.min=aj.prototype.min,aj.prototype.max=22,aj.prototype.max=aj.prototype.max,aj.prototype.ra=y,aj.prototype.pixelProjection=aj.prototype.ra,aj.prototype.b={Ea:"update",Ce:"configchange",nj:"minchange",mj:"maxchange"},aj.prototype.ga=function(){return this.a},aj.prototype.getProvider=aj.prototype.ga,aj.prototype.jo=function(t){return this.min<=t&&t<=this.max},aj.prototype.isValid=aj.prototype.jo,aj.prototype.Ki=function(t){return bj(this,"min",+t)},aj.prototype.setMin=aj.prototype.Ki,aj.prototype.Ii=function(t){return bj(this,"max",+t)},aj.prototype.setMax=aj.prototype.Ii,aj.prototype.g=function(){this.dispatchEvent(this.b.Ea)},aj.prototype.i=function(){this.dispatchEvent(this.b.Ce)},aj.prototype.u=function(){aj.l.u.call(this)},aj.prototype.ta=function(){return null},aj.prototype.getCopyrights=aj.prototype.ta,u(cj,Ti),t("H.map.DataModel",cj),cj.prototype.add=function(t,e){C(t,aj,this.add,0),dj(this,t),cj.l.add.call(this,t,e)},cj.prototype.add=cj.prototype.add,cj.prototype.set=function(t,e){return C(e,aj,this.set,0),dj(this,e),(t=cj.l.set.call(this,t,e))&&fj(t),t},cj.prototype.set=cj.prototype.set,cj.prototype.pc=function(t){var e;return(e=cj.l.pc.call(this,t))&&fj(e),e},cj.prototype.removeAt=cj.prototype.pc,cj.prototype.remove=function(t){var e;return(e=cj.l.remove.call(this,t))&&fj(t),e},cj.prototype.remove=cj.prototype.remove,cj.prototype.flush=function(){for(var t=this.a.length;t--;)this.pc(t);cj.l.flush.call(this)},cj.prototype.flush=cj.prototype.flush;var ej={};function gj(t,e,i){if(t=ej[t])return C(t[e],Function,gj,1,"invalid method"),t[e].apply(t,i)}function hj(t,e){Ca(t)&&(this.i=t),Cc(e)&&(this.a=e)}Fc(ej),cj.invoke=gj,t("H.util.Request",hj),hj.State={PENDING:0,PROCESSING:1,COMPLETE:2,CANCELLED:3,ERROR:4};var ij=[0,1,2,3,4],qj;function jj(t,e){t.b<t.a&&(tc(e)||(e=2),0===e||1===e||0!==t.A&&1!==t.A||(t.b++,2!==e&&t.g++,t.P(t.b<t.a?1:2)))}function kj(){}function lj(t,e){var i=t.L(),n=i.ownerDocument;lj.l.constructor.call(this),this.a=t,this.S=i=i.appendChild(mj(n,"DIV","position:absolute;bottom:0;right:0;left:0px;z-index:1;direction:ltr;pointer-events:none;height:40px-webkit-touch-callout: none;-webkit-user-select:none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select:none;",null,"H_imprint")),this.If=mj(n,"DIV","margin: 0 0 "+nj+"px "+nj+"px;display:inline-block;",oj,"H_logo"),i.appendChild(this.If),i=i.appendChild(mj(n,"DIV","right:0;bottom:0;position:absolute;background-color:rgba(255,255,255,.8);color:#0F1621;padding:2px 16px",null,"H_copyright")),this.g=i.appendChild(mj(n,"A","color:inherit; margin:0px 8px; text-decoration:none; pointer-events:all;","Terms of use")),this.g.target="_blank",this.f=i.appendChild(mj(n,"SPAN","margin:0px 8px")),this.j=Ua(pj),this.Li(e),this.c=A(this.c,this),this.b=A(this.b,this),this.a.addEventListener(this.a.o.lj,this.c),this.a.a.addEventListener("add",this.b),this.a.a.addEventListener("remove",this.b),this.a.a.addEventListener("set",this.b),this.b()}hj.prototype.A=0,hj.prototype.getState=function(){return this.A},hj.prototype.getState=hj.prototype.getState,hj.prototype.P=function(t){if(0>ij.indexOf(t))throw new D(this.P,0,t);(this.A!==t||1===t&&1<this.a)&&(this.A=t,this.i&&this.i(this))},hj.prototype.a=1,hj.prototype.Pn=function(){return this.a},hj.prototype.getTotal=hj.prototype.Pn,hj.prototype.b=0,hj.prototype.An=function(){return this.b},hj.prototype.getProcessed=hj.prototype.An,hj.prototype.g=0,hj.prototype.Wm=function(){return this.g},hj.prototype.getFailed=hj.prototype.Wm,hj.prototype.Ie=function(){},hj.prototype.cancel=function(){3!==this.A&&(this.Ie(),this.P(3))},hj.prototype.cancel=hj.prototype.cancel,t("H.util.ICapturable",kj),kj.prototype.capture=function(){},kj.prototype.capture=kj.prototype.capture,t("H.util.Disposable",nd),nd.prototype.zb=nd.prototype.zb,nd.prototype.addOnDisposeCallback=nd.prototype.zb,t("H.util.dispose",qd),nd.prototype.B=nd.prototype.B,nd.prototype.dispose=nd.prototype.B,nd.prototype.u=nd.prototype.u,u(lj,nd),t("H.map.Imprint",lj);var nj=16,pj={font:'11px "Lucida Grande", Arial, Helvetica, sans-serif',href:"https://legal.here.com/{LN}/terms/serviceterms/{CN}",invert:!1,reportHref:"https://wego.here.com/",locale:"en-US"};function mj(t,e,i,n,r){return t=t.createElement(e),i&&(t.style.cssText=i),n&&(t.innerHTML=n),r&&(t.className=r),t}lj.prototype.Li=function(t){var e,i=this.If.firstChild.firstChild.childNodes;t||(this.j=Ua(pj));var n=this.j;for(e in n)t&&e in t&&(n[e]=t[e]);t=(this.Oh=t=n.invert)?rj:sj,i[0].style.fill=t.Fl,i[0].style.fillOpacity=t.Gl,i[1].style.fill=t.Kl,i[1].style.fillOpacity=t.Ll,t=n.locale,tj[t]||(t="en-US",n.locale=t),this.g.innerHTML=tj[t],t=t.split("-"),this.g.href=n.href.replace("{LN}",t[0]).replace("{CN}",t[1].toLowerCase()),this.S.style.font=n.font},lj.prototype.setOptions=lj.prototype.Li,lj.prototype.L=function(){return this.S},lj.prototype.c=function(){this.f.innerHTML=this.i+" "+this.ta()},lj.prototype.b=function(){this.c(),setTimeout(this.c,5e3)};var oj='<svg height="40" viewBox="0 0 47 40" width="47" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m45.2054149 8.82876345.6003191.40637037-.2240425.6914074-.4490426 1.38570368c-.1024468.3148889-.6998936 1.9596297-2.43 3.5918519l-.017234.0163704c-.188617.1887407-.3801064.3659259-.5467021.5084444l-.4605319.4285185-.486383.4516296-.1407447-.0702963c-.7257447.4583704-1.4926596.7886667-2.2796809.9831852l.5840426.5864445-.6769149.6817778-2.052766 2.0636296-.169468.1704444-.019149.0192593-2.3821276 2.3958518c-.4902128.8493334-1.1202128 1.6331852-1.8497873 2.3111112-.6031915.6047407-1.2504255 1.1054814-1.935 1.4954814l-.4777659.4805186-4.3247873 4.3506666-.0296808.0298519-.0315958.0269629-2.1532978 1.8171111-.2661702.2253334h-.3485107-3.8948936l-3.968617 3.9914815-1.3547873 1.3616296-.6769148.6808148-.6769149-.6808148-1.3538298-1.3616296-4.80925535-4.837926-3.2687234-3.2875555-1.63436171-1.6437778h2.3112766 4.62255319 2.67223407l-4.71063832-4.7368148-.6769149-.6808148.6769149-.6808148 4.93851062-4.9650371.6769149-.6798518.6769149.6808148 2.7296809 2.7454074c.9363829-.8820741 2.1485106-1.4685185 3.4037234-1.6562963.278617-1.4694815 1.0187234-2.834963 2.168617-3.9885926.5696808-.572 1.1843617-1.0438519 1.8335106-1.4107407l.2901064-.2917778 4.3094681-4.31985187c.5830851-1.0582963 1.4256383-1.78918519 2.0364893-2.12718519l.4471277-.24748148c.3829787-.7617037.9047872-1.47622222 1.5539362-2.12622222 1.510851-1.51666667 3.3165957-2.31881482 5.22-2.31881482.0871276 0 .1752127.00192593.2594681.00577778 1.9484042.06933334 3.8441489.97933334 5.4775532 2.62792593.1512765.15022222.3303191.34859259.5361702.5797037l.0526595.05874074c.1120213.12518519.2345745.26192593.370532.40733334l1.2657446 1.36066666.6328724.67985185-.6548936.65866667-.2508511.25325926zm-27.9288192 22.17414815h-9.57446804l4.78723404 4.8148148zm23.1864894-21.70422223c-.9220213 1.38666663-2.5180851 3.63037033-4.1984042 1.94133333l4.2510638-4.27651851c-.3810638-.41022222-.6711702-.754-.8923404-.97740741-2.2921277-2.31207407-4.8743617-2.34192593-6.8984043-.312-1.3528723 1.35681481-1.7071277 2.91007407-1.313617 4.38533332l-1.332766-1.52629628c-.385851.21474074-2.0182979 1.65918518-.7937234 3.84703708l-1.5252127-1.274963-2.0240426 2.0299259 2.7344681 2.7502222c-2.1121277-1.6861481-4.3889362-1.5205185-6.2157447.312-1.9560638 1.9615556-1.8181915 4.3381482-.3532979 6.293926l-.295851-.2946667c-1.9321277-1.9432593-4.0318085-1.2576296-5.0706383-.2128148-.8023405.8079259-1.2944681 1.9191852-1.0924468 2.6905185l-4.195532-4.2187407-2.22893613 2.2408148 8.25893613 8.3065185h4.4339362l-2.9767021-2.9938519c-.5893908-.6029568-.9604155-1.0987731-1.1531529-1.5232627-.3182349-.7008886-.1504161-1.2073234.3230465-1.680515.7334043-.7318519 1.583617-.2763704 3.0829787 1.2277777l2.9412766 2.9562963 2.2164894-2.2292592-2.7909575-2.8060741c2.0125532 1.5291852 4.4224468 1.612 6.5728724-.545037 1.3567021-1.2653334 1.7425532-2.4565185 1.7425532-2.4565185l-1.6755319-1.1314815c-.9229788 1.3866666-2.5152128 3.6361481-4.195532 1.9461481l4.2606383-4.2851852 2.655 2.6712593 2.3160639-2.3294074-3.3223405-3.3424445c-1.5520212-1.5609629-.6328723-3.0275555.0124469-3.5793333.3025531.6442222.7448936 1.2624445 1.3078723 1.8296296 2.1485106 2.1676297 4.9260638 2.6038519 7.3685106.1550371 1.3567022-1.2643704 1.7425532-2.4565185 1.7425532-2.4565185zm-3.6564894-1.35537321-2.0211702 2.03377777c-.9890425-1.18251851-.9392553-1.81422222-.3245744-2.43051851.7439361-.7462963 1.4993617-.43044445 2.3457446.39674074zm-12.4879787 12.56088884c-.9890425-1.1825185-.9411702-1.819037-.3284042-2.4353333.7448936-.7462963 1.5003191-.4304444 2.3467021.3967408z" fill="#0f1621" fill-opacity=".7"/><path d="m17.2765957 31.0029116-4.787234 4.8148148-4.78723404-4.8148148zm23.1864894-21.70422223 1.6755319 1.13148153s-.385851 1.1921481-1.7425532 2.4565185c-2.4424468 2.4488148-5.22 2.0125926-7.3685106-.1550371-.5629787-.5671851-1.0053192-1.1854074-1.3078723-1.8296296-.6453192.5517778-1.5644681 2.0183704-.0124469 3.5793333l3.3223405 3.3424445-2.3160639 2.3294074-2.655-2.6712593-4.2606383 4.2851852c1.6803192 1.69 3.2725532-.5594815 4.195532-1.9461481l1.6755319 1.1314815s-.3858511 1.1911851-1.7425532 2.4565185c-2.1504256 2.157037-4.5603192 2.0742222-6.5728724.545037l2.7909575 2.8060741-2.2164894 2.2292592-2.9412766-2.9562963c-1.4993617-1.5041481-2.3495744-1.9596296-3.0829787-1.2277777-.4734626.4731916-.6412814.9796264-.3230465 1.680515.1927374.4244896.5637621.9203059 1.1531529 1.5232627l2.9767021 2.9938519h-4.4339362l-8.25893613-8.3065185 2.22893613-2.2408148 4.195532 4.2187407c-.2020213-.7713333.2901063-1.8825926 1.0924468-2.6905185 1.0388298-1.0448148 3.1385106-1.7304445 5.0706383.2128148l.295851.2946667c-1.4648936-1.9557778-1.6027659-4.3323704.3532979-6.293926 1.8268085-1.8325185 4.103617-1.9981481 6.2157447-.312l-2.7344681-2.7502222 2.0240426-2.0299259 1.5252127 1.274963c-1.2245745-2.1878519.4078724-3.63229634.7937234-3.84703708l1.332766 1.52629628c-.3935107-1.47525925-.0392553-3.02851851 1.313617-4.38533332 2.0240426-2.02992593 4.6062766-2.00007407 6.8984043.312.2211702.22340741.5112766.56718519.8923404.97740741l-4.2510638 4.27651851c1.6803191 1.689037 3.2763829-.5546667 4.1984042-1.94133333zm-16.1444681 11.20551563 2.0182979-2.0385925c-.846383-.8271852-1.6018085-1.1430371-2.3467021-.3967408-.612766.6162963-.6606383 1.2528148.3284042 2.4353333zm12.4879787-12.56088884c-.8463829-.82718519-1.6018085-1.14303704-2.3457446-.39674074-.6146809.61629629-.6644681 1.248.3245744 2.43051851z" fill="#fff" fill-opacity=".3"/></g></svg>',sj={Kl:"#0F1621",Ll:.3,Fl:"#fff",Gl:.6},rj={Kl:"#fff",Ll:1,Fl:"#0F1621",Gl:.7},uj="1987&ndash;"+wd(2015,(new Date).getFullYear())+" HERE";function vj(t,e,i,n){wj(A((function(t){t?this.Oh?i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAADNklEQVRYR82XW6hVVRSGv7+rmJfSMKSnSkMEfY7EogcJC7tilGRopBAiSaI+SBARQSCIIqgFISih2YW0oAgLCsKXojA0RB+81VugZEFZv/yHuWTt7d7Hfc4+6+h4OWefNfcc3xlj/v+YS1zjoab5bE8DZgGngB8keSg5GwO0PQ54F3i2BnQIWCLpx14hGwG0fT3wOfBwB5DzwOOSDvQC2RTgM8Ae4D/gaeA3YDdwN5AWvyxp+6gD2r4OmAq8AbwInAMmA/OAT4CbgBWStvYClzUjWkHbrwHLgF8LVHJ8DDxah7P9JHCil7M40oA/A7OBC8ANtSqlrQOVs30/8CWQat8r6cxg1RwRQNvPA88Bk4D7gJzBV4A5teSp5MlS4VuA/ZIeu1Kr+wa0/QTwIRDlRhT5eTswBvi2CKOd42AULilndNAYCcA7gK+BmbVMiyXtsh3Qt4FFBTgW8w6wXtLfV4LrSyS2FwAvAWOBX+JtwF0laUDmS/oun23fDNwJnJb0Ty9g1ZphVdB2qrK2LdFfBbb685/AIxXkUKDqa4cMaDs2kjalRe8Fola57J3qRQSJviGHA3gMuAdYI2lDUfDOArQLWAd8VTuTOW9vjUoFy6TIGYpS9wKfAjuK5wVuSfn91iKcvZJeHy5ci0hsZwzNk5Qh3xIFbLyks7aPAtPLgv+L4VZwDwLvA6uKz6XdfcVAi22PBz4q4+lVSRurXW2vKYKIZfwEHCmmXC35HngAyITYD0ys2t8XWflyBfhmvKm24QCk7aVFCPVc7WMszzKucknI+NoHPCUppt13VICZm2nNwjoksByY0SXL72Vi3FieZ97mgrpyqF432H9xScW2O0H+W6oSE/4D2FYuA9kzlUzVTwO3Ad9IOtx3ydo2aLGZLpABm5KW2Z4AfAbMLfsEcpGkKLqRuMwHu0CukrSpCCrvGlF6hBEVL5MUw24kOhp1B8gc+FTqgxpkFLuzSbjk6jpJOkC2tDPeKCkVbDRkO67fDTTC2VK7vgfyBUlfNEpV2zyAK4HNXRLmZfshScdHC6g9T+WDGU2XpkdZdNXhWs6g7dXAhmsJ7jKR2M77bG4kV7Wt9TZfBLgYEC7PSpcIAAAAAElFTkSuQmCC"):i("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAeCAYAAABe3VzdAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIMSURBVFiFzdZPiE1RGADwXzPTTPIMQoodVpbKgpoUG5qExUi8DSVJQv4slJJsbNjYWFhNETWLUUosRDRLUVLCYhIiojFojHkW997uvefNGIuZc99Xp/fOO6/Or++c75xDi0d7hDlWYQNqeB9hvv+OGq6jUWjPsKZKVBbtuKOMy9p3bKqOlsROCWYc27AWr9PfJnCgKlgbluNqivmGDmzBrxR3sCocnMEw7sqXdEAzboeK9uLTFPVbed8VcesxglFJtqNEHbcxlIL68ChADuCSpEgauBULt11SDI3C5yJJdrLCCNsQumMBl+J5AKinY4slBfNTfsRcxJwYsK0YxD3J0r1RPut6Cv/twgp0xoDBBc3LNhr0RwJktNifAn7gsnLmsuxVinyVTn4i7dcLoH4sU96Tp2Pi2uSVehN75Gdev+QO7pIXztmZnLwTvf+AzU+/v5Rn50+A24gP2IW5M4mbJ7+ejgVjJ/EpHXuCa8p77nGK68FX5eWfsTgfTJoh92qu1vAaa+CtPJuDZuEh3CHZUyHyxSSYrL3DWKE/gStm8aybDDkmKYperJM/BrJMnsJuHMLq2YJNh/wsX7JuPAyQfTFg0yGPFMZreCCv4n2xgTQjxyXP+CxquK8iXBYhMlzOtliQBVg4RVuCG/iSto/YHAuWxWFTHyXDWBkbNFkc1cK4LI5rYVwW57QY7i/pZeJv8QQJRQAAAABJRU5ErkJggg=="):((t=this.If.cloneNode(!0)).firstChild.setAttribute("style","font:"+e),i($e(t.innerHTML)))}),t),n)}function wj(t,e){var i="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(oj),n=qj;tc(n)?t(n):new rf("image",i).then((function(e){We.drawImage(e,0,0);try{We.getImageData(0,0,1,1),n=!1}catch(t){n=18===t.code}finally{qj=n,t(n)}}),e)}lj.prototype.ta=function(){var t,e,i,n=this.a,r=n.vb(),o=n.b.mb().bounds,a=(n=n.a).a.length,s={},u=0,l=[uj];if(o)for(;u<a;u++)if(e=n.get(u).getCopyrights(o.G(),r))for(t=0;t<e.length;t++)s[i=e[t].label]||(l.push(i),s[i]=1);return l.join(", ")},lj.prototype.getCopyrights=lj.prototype.ta,lj.prototype.ua=function(){return this.S.style},lj.prototype.i=String.fromCharCode(169),lj.prototype.u=function(){if(this.a.removeEventListener(this.a.o.lj,this.c),this.a.a.removeEventListener("add",this.b),this.a.a.removeEventListener("remove",this.b),this.a.a.removeEventListener("set",this.b),this.S.parentNode){var t=this.S;t.parentNode.removeChild(t)}},lj.prototype.capture=function(t,e,i,n){var r,o=t.getContext("2d"),a=window.getComputedStyle(this.f.parentElement),s=2*Ac(a.paddingLeft,10),u=(this.f.offsetWidth+2*s)*e,l=this.f.offsetHeight*e,h=Bc(a.getPropertyValue("font-size")),c=this.S.ownerDocument,f=+t.width,p=+t.height,d=nj*e,g=this.If.childNodes[0].getBoundingClientRect(),y=g.width*e,v=g.height*e,m=hd;Ca(n)&&(m=function(){n("capture_error")}),o.fillStyle=a.backgroundColor,o.fillRect(f-u,p-l,u,l),u=this.i+" "+((r=mj(c,"div",null,r=this.ta())).textContent||r.innerText||""),o.font=h*e+"px "+a.getPropertyValue("font-family"),o.fillStyle=a.getPropertyValue("color"),o.textBaseline="bottom",o.textAlign="right",o.fillText(u,f-s*e,p),vj(this,o.font,(function(e){new rf("image",e).then((function(e){o.drawImage(e,d,p-(v+d),y,v),i(t)}),m)}),m)},lj.prototype.capture=lj.prototype.capture,lj.prototype.Oh=!1,lj.prototype.bm=function(t,e){tj[t]=e},lj.prototype.addL11NString=lj.prototype.bm;var tj={"de-DE":"Nutzungsbedingungen","en-US":"Terms of use","en-GB":"Terms of use","es-ES":"Condiciones de uso","fi-FI":"Palveluehdot","fr-FR":"Conditions d'utilisation","it-IT":"Condizioni di utilizzo","nl-NL":"Dienstvoorwaarden","pl-PL":"Warunki wiadczenia usugi","pt-BR":"Termos de servio","pt-PT":"Termos do servio","ru-RU":" ","tr-TR":"Servis Koullar","zh-CN":""};function Q(t){var e={};this.i=e.previousSibling=e.nextSibling=e,this.j=new af,Q.l.constructor.call(this,t),t&&"objects"in t&&this.fc(t.objects)}function xj(t,e,i){t.xe(i.a)}function yj(t){t.uf()}function zj(t,e,i){t.wa(i.g)}function Aj(t){this.push(t)}function Bj(t,e){for(var i,n,r=0,o=e.length,a=[];r<o;r++)n={},(i=e[r])instanceof Q?(n.type="GeometryCollection",n.geometries=Bj(t,i.Va())):n=i.ba().Sc(),a.push(n);return a}u(Q,M),t("H.map.Group",Q),Q.prototype.type=Pg.GROUP,Q.prototype.xe=function(t,e){return this.f=!0,t=Q.l.xe.call(this,t,e),this.f=!1,t&&this.forEach(xj,!0),t},Q.prototype.setProvider=Q.prototype.xe,Q.prototype.contains=function(t){var e=this===t;if(!e&&this.b&&C(t,M))for(;!e&&t;)t===this?e=!0:t=t.Ha;return e},Q.prototype.contains=Q.prototype.contains,Q.prototype.uf=function(){this.J=B,this.forEach(yj,!0)},Q.prototype.resetZInfo=Q.prototype.uf,Q.prototype.f=!1,Q.prototype.wa=function(t){var e=Q.l.wa.call(this,t);return e&&!this.f&&(this.g=t,this.forEach(zj,!0),delete this.g),e},Q.prototype.invalidate=Q.prototype.wa,Q.prototype.forEach=function(t,e,i){var n;if(this.b){var r=this.i,o=r.nextSibling;for(n=0;o!==r;){var a=o.nextSibling;t.call(i,o,n++,this),e&&C(o,Q)&&o.forEach(t,e,i),o=a}}},Q.prototype.forEach=Q.prototype.forEach,Q.prototype.Va=function(t){var e=[];return this.forEach(Aj,t,e),e},Q.prototype.getObjects=Q.prototype.Va,Q.prototype.G=function(){var t=null;return this.b&&this.forEach((function(e){(e=e.G())&&(t=t?t.nc(e):e)})),t},Q.prototype.getBoundingBox=Q.prototype.G,Q.prototype.b=0,Q.prototype.Hm=function(){return this.b},Q.prototype.getChildCount=Q.prototype.Hm,Q.prototype.ea=function(t){var e=this.i,i=e.previousSibling;if(C(t,M,this.ea,0),t.contains(this))throw new Xc(this.ea,"The new object contains the parent group");var n=t.fg(!0),r=t.Ha;if(r!==this){if(r){r=t.previousSibling;var o=t.nextSibling;r.nextSibling=o,o.previousSibling=r}t.Ha=this,M.l.ka.call(t,this),i.nextSibling=t,t.previousSibling=i,t.nextSibling=e,e.previousSibling=t,this.b++}return t.Ti=this.j.next(),t.uf(),e=t.xe(this.a,this.ea),t.fg(!0)^n&&t.wa(Mg.VOLATILITY),e||t.wa(Mg.Z_ORDER),t},Q.prototype.addObject=Q.prototype.ea,Q.prototype.fc=function(t){var e;yc(t,this.fc,0);var i=t.length;for(e=0;e<i;e++)this.ea(t[e])},Q.prototype.addObjects=Q.prototype.fc,Q.prototype.Ia=function(t){if(!t||t.Ha!==this)throw new Xc(this.Ia,"object not found");var e=t.previousSibling,i=t.nextSibling;return e.nextSibling=i,i.previousSibling=e,t.Ha=null,M.l.ka.call(t,null),delete t.previousSibling,delete t.nextSibling,C(t.a,N)&&t.xe(null,this.Ia),this.b--,t},Q.prototype.removeObject=Q.prototype.Ia,Q.prototype.Gd=function(t){var e;yc(t,this.Gd,0);var i=t.length;for(e=0;e<i;e++)this.Ia(t[e])},Q.prototype.removeObjects=Q.prototype.Gd,Q.prototype.qa=function(){var t=this.Va();this.Gd(t)},Q.prototype.removeAll=Q.prototype.qa,Q.prototype.Sc=function(t){for(var e,i,n,r=this.Va(),o=0,a=r.length,s=[];o<a;o++)(n=r[o])instanceof Q?(i=Sg(this,e=t?t(n.getData()):n.getData(),!!t),(e={type:"Feature"}).properties=i,n.m&&(e.id=n.m),e.geometry={},e.geometry.type="GeometryCollection",e.geometry.geometries=Bj(this,n.Va()),s.push(e)):s.push(n.Sc(t));return{type:"FeatureCollection",features:s}},Q.prototype.toGeoJSON=Q.prototype.Sc,Q.prototype.X=function(){var t=Q.l.X.call(this);return t.type="Group",t},Q.prototype.forWorkerMessage=Q.prototype.X;var Cj={PROVIDES_BY_VIEWPORT:1,PROVIDES_RASTERS:2,PROVIDES_SPATIALS:4,PROVIDES_OVERLAYS:8,PROVIDES_MARKERS:16,PROVIDES_DOM_MARKERS:32,PROVIDES_GEOJSON:64,PROVIDES_OMV:128,CROP_LINES_BY_TILE:256,CROP_POLYGONS_BY_TILE:512,HAS_VOLATILE_DATA:1024};function Dj(t,e,i,n,r){switch(e&&(this.b=e),tc(i)&&(this.$g=!!i),this.$g&&n&&(this.ah=new Ki(n.w,n.h)),tc(r)&&(this.c={crossOrigin:r}),Ej[xc(t)]){case 2:this.Dd=t,Fj(this,1);break;case 1:if(lf(t)){this.Dd=t,Gj(this),Fj(this,1);break}t=t.src;case 0:if(t){t=$e(t),this.a=new rf("image",t,B,this.c),this.a.then(A(this.Jo,this),A(this.Io,this));break}default:throw Fj(this,-1),new D(Dj,0,"No image data")}}function Fj(t,e){t.A=e,delete t.a,t.b&&t.b(e,t)}function Gj(t){if(t.$g){var e=t.Dd,i=Hj(t),n=i&&i.w||+e.width,r=i&&i.h||+e.height,o=Se();if(C(e,x.HTMLCanvasElement))i=e;else{(i=e.ownerDocument.createElement("canvas")).width=zd(n*o),i.height=zd(r*o);var a=i.getContext("2d");a.scale(o,o),a.drawImage(e,0,0,n,r),Zc&&(a.clearRect(0,0,n,r),a.drawImage(e,0,0,n,r))}t.Dd=i}}t("H.map.provider.Capabilities",Cj),Cj.PROVIDES_WEBGL_RENDERABLE_OBJECTS=Cj.PROVIDES_SPATIALS|Cj.PROVIDES_OVERLAYS|Cj.PROVIDES_MARKERS,n=Dj.prototype,n.A=0,n.getState=function(){return this.A},n.$g=!0,n.Dd=y,n.getData=function(){return this.Dd};var Ej={String:0,HTMLImageElement:1,HTMLCanvasElement:2};function Hj(t){var e,i=t.ah;if(!i){var n=t.Dd;if(0===(i=n.naturalWidth||n.width)&&Ye&&1===Ej[xc(n)]){var r=!0;if(e=n.parentNode)var o=n.nextSibling;document.body.appendChild(n)}t.ah=i=new Ki(n.naturalWidth||n.width,n.naturalHeight||n.height),r&&(e?e.insertBefore(n,o):document.body.removeChild(n))}return i}function Ij(t,e){var i,n="anonymous";if(this.uid=Jj.next(),Ij.l.constructor.call(this),e){var r="size";if(r in e){var o=e[r];if(!o||isNaN(o.w)||isNaN(o.h))throw new D(Ij,1,r);this.c=new Ki(o.w,o.h)}if((r="anchor")in e){if(!(o=e[r])||isNaN(o.x)||isNaN(o.y))throw new D(Ij,1,r);this.b=new I(o.x,o.y)}(r="hitArea")in e&&(C(o=e[r],Li,Ij,1),this.g=e[r]),(r="asCanvas")in e&&(i=e[r]),(r="crossOrigin")in e&&(n=e[r]),(o=e.stickHeight)===+o&&0<o&&(this.hp=o),o=e[r="stickColor"],r in e&&zc(o)&&(this.gp=o)}t=new Dj(t,A(this.i,this),i,this.c,n),0!==(e=this.A=t.getState())?this.i(e,t):this.f=t}n=Dj.prototype,n.ah=y,n.Db=function(){return 1===this.A?Hj(this):y},n.Jo=function(t){this.Dd=t,Gj(this),Fj(this,1)},n.Io=function(){Fj(this,-1)},n.cancel=function(){this.a&&this.a.cancel()},u(Ij,F),t("H.map.Icon",Ij);var Jj=new af;function Kj(t,e,i,n,r,o){Kj.l.constructor.call(this,isNaN(t)?15:t,e,i,n,r,o)}function Lj(t,e,i,n,r){var o=e.entries;if(r)if(e.a)o=Mj(t,e,i,n,r);else if(o){var a=pg(e,(o=o[0])[1]>=e[8]|(o[0]>=e[9])<<1);a.entries=e.entries,delete e.entries,o.node=a,mg(t,a),o=Mj(t,e,i,n,r)}else qg(e,o=new Nj(i,n)),mg(t,e),kg(t,o,!0);else o||mg(t,e),qg(e,o=new Nj(i,n)),kg(t,o,!0);return o}function Mj(t,e,i,n,r){return Lj(t,pg(e,i>=e[8]|(n>=e[9])<<1),i,n,r-1)}function Nj(t,e){this.id=og++,this[0]=e,this[1]=t}function Oj(){this.a=new Kj(10,180,90,0,0,!0)}function Pj(t,e,i){this.c=t,this.a=e,this.g=i,this.f=this.c&Cj.PROVIDES_BY_VIEWPORT?"function(){return sources[$source].isInMinMaxRange(feature, $zoom) && feature.ref.effectiveVisibility;}":B,this.b={}}function Qj(t,e,i,n){this.a=t,this.b=e,this.c=i,this.Df=n}function Rj(t,e,i,n){return t={type:e,uid:t.b,tiled:i,max_zoom:t.c},n&&Wa(t,n),t}function Sj(t){this.a=t}function Tj(t,e,i,n,r){this.a=t,this.b=e,this.c=i,this.f=n,this.Df=r}function Uj(t){if(t.a&Cj.PROVIDES_DOM_MARKERS&&!(t.a&Cj.PROVIDES_MARKERS))return{};var e=new Qj(t.a,t.b,t.c,t.Df),i=new Sj(t.a);t=new Pj(t.a,t.b,t.f);var n={},r=e.b;if(e=e.a&Cj.PROVIDES_BY_VIEWPORT?Rj(e,"ObjectSource",!1,{progressiveUpdate:!0,has_volatile_data:!!(e.a&Cj.HAS_VOLATILE_DATA)}):e.a&Cj.PROVIDES_RASTERS?Rj(e,"RemoteRasterTileSource",!0,{url:""}):Rj(e,"ObjectTileSource",!0,{tile_size:e.Df}),n[r]=e,e={},i.a&Cj.PROVIDES_RASTERS&&(e={"translucent-raster":Mh("raster","inlay",1)}),i.a&Cj.PROVIDES_WEBGL_RENDERABLE_OBJECTS){r=!!(i.a&Cj.CROP_LINES_BY_TILE);var o={"translucent-polygons":Mh("polygons","inlay",2),"translucent-extruded-polygons":Mh("polygons","translucent",3),"translucent-pattern-lines":Mh("pattern-lines","translucent",4),"translucent-overlays":Mh("overlays","inlay",5),markers:Mh("custom_icons","overlay",6,!1)};o["translucent-polygons"].crop_by_tile=!!(i.a&Cj.CROP_POLYGONS_BY_TILE),o["translucent-pattern-lines"].crop_by_tile=r,o.markers.suppress_fade=!0,o.markers.stick=!0,Wa(e,o)}if(t.c&Cj.PROVIDES_RASTERS&&(t.b["tile_layer_"+t.a]=Oh(t.a,"_default",{"translucent-raster":{color:[1,1,1,t.g],order:0}})),t.c&Cj.PROVIDES_SPATIALS){i={"translucent-pattern-lines":{color:Lh("strokeColor"),width:Lh("lineWidth * $meters_per_pixel"),join:Lh("lineJoin"),cap:Lh("lineCap"),tail_cap:Lh("lineTailCap"),head_cap:Lh("lineHeadCap"),miter_limit:Lh("miterLimit"),order:"function() { return 2 + feature.effectiveZIdx / 2; }",interactive:!0,dash:Lh("lineDash"),extrude:!0,dash_phase:Lh("lineDashOffset")}},r=t.b,o="polygon_layer_"+t.a;var a=Oh(t.a,"polygons",void 0,t.f);a.flat={filter:"function(){return !feature.height && !feature.min_height;}",draw:Nh(!1)},a.extruded={filter:"function(){return feature.height || feature.min_height;}",draw:Nh(!0)},r[o]=a,t.b["outline_layer_"+t.a]=Oh(t.a,"outlines",i,t.f),t.b["polyline_layer_"+t.a]=Oh(t.a,"polylines",i,t.f)}return t.c&Cj.PROVIDES_OVERLAYS&&(t.b["overlay_layer_"+t.a]=Oh(t.a,"overlays",{"translucent-overlays":{color:[1,1,1,t.g],order:8190,interactive:!0}})),t.c&Cj.PROVIDES_MARKERS&&(t.b["marker_layer_"+t.a]=Oh(t.a,"markers",{markers:{sprite:Kh("icon.id"),offset:Kh("icon.offset"),collide:!1,priority:8191,elevate_by_altitude:!0,interactive:!0,stick:{color:Kh("icon.stick_color"),height:Kh("icon.stick_height")}}},t.f)),{sources:n,styles:e,layers:t.b}}function P(t){var e,i=""+cf();if(P.l.constructor.call(this),t=t||{},this.min=t.min||0,this.max=t.max||22,e=t.uri){if(/_/.test(e))throw new D(P,0,"uri "+e)}else e=i;if(this.uri=e||i,this.uid=i,t.getCopyrights&&wc(t.getCopyrights,"Function",P)&&(this.getCopyrights=t.getCopyrights),this.g=this.g.bind(this),this.za=!0,this.f=t.engineType||Vj.WEBGL,this.f===Vj.HARP&&!H.map.render.harp)throw new D(P,0,"HARP engine is not supported, module not found")}function Wj(t,e,i){t.dispatchEvent(new sd(t.i.Ea,i,e))}function Xj(t,e){e=Yd(e,0,1),E(e)&&(e=1),t.j!==e&&(t.j=e,t.za&&Yj(t),t.g(),Wj(t))}function Yj(t){if(t.f===Vj.WEBGL){var e=new Tj(t.getCapabilities(),t.uid,t.max,t.j,t.tileSize);t.b=new Th(Uj(e))}else t.f===Vj.HARP&&H.map.render.harp&&(t.b=new H.map.render.harp.Style({}));t.za=!0}function ak(t){var e;for(e in uc(this,ak),ak.l.constructor.call(this,t),this.Aa=t=[],Pg)t[Pg[e]]=new Lg}function N(t){t=t||{},N.l.constructor.call(this,t),this.c=t=new Q({min:t.min,max:t.max}),t.a=this,t.ka(this),t.wa(Mg.ADD),this.O=new wg,this.m=new wg,this.s=new Oj,this.v=new wg,this.J=new Oj,this.U=new wg}function bk(t,e,i,n,r,o,a){if(a=a||[],e.bd())for(t=e!==t.s&&e!==t.v,r=!r,i=(e=e.ig(i,o,o)).length,o=0;o<i;o++){var s,u=e[o].dj;if(s=void 0!==n){for(var l=yd(n),h=u;(s=h.v<=l&&h.s>=l)&&(h=h.Ha););s=!s}s||!r&&!u.Dc(!0)||(t||1===u.Cb().getState())&&a.push(u)}return a}function ck(t,e,i,n,r){var o=bk(t,t.s,e,i,n,r);return bk(t,t.v,e,i,n,r,o),o}function dk(t,e,i,n,r){var o=bk(t,t.J,e,i,n,r);return bk(t,t.U,e,i,n,r,o),o}function ek(t,e,i){var n,r=i.ba(),o=fk.bind(null,t);t=gk.bind(null,t),C(i,nh)?n=C(r,L)?o(r):r.pa.some(o):C(i,xi)?n=C(r,O)?t(r):r.pa.some(t):C(i,hk)&&(n=t(ni(r))),n&&e.push(i)}function fk(t,e){t:{var i=e.Y,n=si(t,e);if(!n){e=e.Y.length;for(var r=0;r<e;r+=3)if(qi(t,i[r],i[r+1])){t=!0;break t}}t=n}return t}function gk(t,e){return ti(t,e)}function ik(t,e,i){for(var n=t.length;n--;){var r=t[n],o=r.ba();if(C(o,Ji)){for(var a,s=(o=o.pa).length;s--;)if(qi(e,(a=o[s]).lat,a.lng)){i.push(r);break}}else qi(e,o.lat,o.lng)&&i.push(r)}}Ij.State={ERROR:-1,LOADING:0,READY:1},Ij.prototype.getState=function(){return this.A},Ij.prototype.getState=Ij.prototype.getState,Ij.prototype.i=function(t,e){if(this.a=e.getData(),1===t){var i=this.c;i||(i=this.c=e.Db()),this.b||(this.b=new I(i.w/2|0,i.h))}this.f&&(this.A=t,delete this.f,this.dispatchEvent("statechange"))},Ij.prototype.a=y,Ij.prototype.ad=function(){return this.a},Ij.prototype.getBitmap=Ij.prototype.ad,Ij.prototype.c=y,Ij.prototype.Db=function(){return this.c},Ij.prototype.getSize=Ij.prototype.Db,Ij.prototype.b=y,Ij.prototype.ud=function(){return this.b},Ij.prototype.getAnchor=Ij.prototype.ud,Ij.prototype.g=y,Ij.prototype.an=function(){return this.g},Ij.prototype.getHitArea=Ij.prototype.an,Ij.prototype.u=function(){Ij.l.u.call(this),this.a?(this.a.removeAttribute("src"),delete this.a):(this.f.cancel(),delete this.f)},u(Kj,hg),Kj.prototype.m=function(t){for(var e,i,n,r=this.head;t;){if(e=t.entries)if(i=e.length){if(2>i&&(n=t.parent)&&1===n.a){n.removeChild(t),r===t&&(r=n),n.entries=e,t=e[0].node=n;continue}}else if(delete t.entries,(n=t.parent)&&(n.removeChild(t),r===t&&(r=n),1===n.a)){t=n.a?n[0]||n[1]||n[2]||n[3]:null;continue}t=y}this.head!==r&&(this.head=r,mg(this))},Kj.prototype.Fc=function(t,e){if(rg(this.a,t,e,t,e))return Lj(this,this.a,t,e,this.c);throw Error("Coordinates out of bounds")},Nj.prototype.wd=function(t){return this[t%2]},n=Oj.prototype,n.Wh=0,n.bd=function(){return this.Wh},n.R=null,n.G=function(){var t,e=this.R;return!e&&(t=ig(this.a))&&(this.R=e=new K(-t[0],t[3],-t[2],t[1])),e},n.Fc=function(t){return++this.Wh,this.R=null,this.a.Fc(t.lng,-t.lat)},n.remove=function(t){return(t=this.a.remove(t))&&(--this.Wh,this.R=null),t},n.ig=function(t,e,i){var n=this.a,r=t.Rb(),o=t.Nb(),a=-r.lat;r=r.lng;var s=-o.lat;return o=o.lng,t.Gb()?n.ab(-180,a,o,s,i,e).concat(n.ab(r,a,180,s,i,e)):n.ab(r,a,o,s,i,e)},u(P,F),t("H.map.provider.Provider",P),P.prototype.i={Ce:"configchange",Ea:"update"},P.prototype.g=function(){this.dispatchEvent(this.i.Ce)},P.prototype.u=function(){F.prototype.u.call(this),this.b&&(this.b.removeEventListener("change",this.g),this.b=null)},P.prototype.ta=function(){return null},P.prototype.getCopyrights=P.prototype.ta,P.prototype.getCapabilities=function(){var t=0;return this.wi()&&(t|=Cj.PROVIDES_BY_VIEWPORT),this.providesRasters()&&(t|=Cj.PROVIDES_RASTERS),this.providesSpatials()&&(t|=Cj.PROVIDES_SPATIALS),this.providesOverlays()&&(t|=Cj.PROVIDES_OVERLAYS),this.providesMarkers()&&(t|=Cj.PROVIDES_MARKERS),this.providesDomMarkers()&&(t|=Cj.PROVIDES_DOM_MARKERS),this.providesGeoJSON()&&(t|=Cj.PROVIDES_GEOJSON),this.providesOMV()&&(t|=Cj.PROVIDES_OMV),t},P.prototype.getCapabilities=P.prototype.getCapabilities,P.prototype.wi=ef,P.prototype.pf=ef,P.prototype.providesRasters=P.prototype.pf,P.prototype.Jc=ef,P.prototype.providesSpatials=P.prototype.Jc,P.prototype.yi=ef,P.prototype.providesOverlays=P.prototype.yi,P.prototype.Wb=ef,P.prototype.providesMarkers=P.prototype.Wb,P.prototype.Vb=ef,P.prototype.providesDomMarkers=P.prototype.Vb,P.prototype.xi=ef,P.prototype.providesGeoJSON=P.prototype.xi,P.prototype.Ed=ef,P.prototype.providesOMV=P.prototype.Ed,P.prototype.Tm=function(){return this.f},P.prototype.getEngineType=P.prototype.Tm,P.prototype.nf=hd,P.prototype.preprocessData=P.prototype.nf,P.prototype.j=1,P.prototype.rn=function(){return this.j},P.prototype.getOpacityInternal=P.prototype.rn,P.prototype.ac=function(t,e){var i=this;if(this.f===Vj.WEBGL&&!C(t,Th)||this.f===Vj.HARP&&!C(t,H.map.render.harp.Style))throw t=Object.entries(Vj).find((function(t){return t[1]===i.f})),new D(this.ac,0,"Invalid style for engineType "+t);this.b&&(this.b.removeEventListener("change",this.g),this.b.removeEventListener(Rh,this.g)),this.b=t,this.b.addEventListener("change",this.g),this.b.addEventListener(Rh,this.g),e||this.g(),this.za=!1},P.prototype.setStyleInternal=P.prototype.ac,P.prototype.ub=function(){return this.b||Yj(this),this.b},P.prototype.getStyleInternal=P.prototype.ub,P.prototype.ak=function(){var t=this.getCapabilities(),e=Zj.FEATURE;return t&Cj.PROVIDES_BY_VIEWPORT?e=Zj.SOURCE:t&Cj.PROVIDES_RASTERS?e=null:t&Cj.PROVIDES_WEBGL_RENDERABLE_OBJECTS&&(e=Zj.PROVIDER),e},P.prototype.getPickingMode=P.prototype.ak,P.prototype.Xm=function(){return!1},P.prototype.getFeatureProxy=P.prototype.Xm,u(ak,P),t("H.map.provider.ObjectProvider",ak),ak.prototype.wi=df,ak.prototype.providesByViewport=ak.prototype.wi,ak.prototype.Pb=function(t){return this.Aa[t||Pg.ANY]},ak.prototype.getInvalidations=ak.prototype.Pb,ak.prototype.ke=function(t,e){if(e!==Mg.NONE){var i=this.Aa[Pg.ANY],n=i.a+1;i.update(n,e),(i=this.Aa[t.type]).update(n,e),t.Pb().update(n,e),Wj(this,t)}},ak.prototype.invalidateObject=ak.prototype.ke,ak.prototype.requestOverlays=ak.prototype.Hd,ak.prototype.requestSpatials=ak.prototype.Ag,ak.prototype.requestSpatialsByTile=ak.prototype.Bg,ak.prototype.yb=!1,ak.prototype.requestMarkers=ak.prototype.Lc,ak.prototype.requestDomMarkers=ak.prototype.Kc,u(N,ak),t("H.map.provider.LocalObjectProvider",N),N.prototype.getCapabilities=function(){return Cj.PROVIDES_BY_VIEWPORT|Cj.PROVIDES_WEBGL_RENDERABLE_OBJECTS|Cj.PROVIDES_DOM_MARKERS|Cj.CROP_LINES_BY_TILE},N.prototype.ub=function(){if(!this.fa){this.fa=N.l.ub.call(this);var t=new Tj(this.getCapabilities()|Cj.HAS_VOLATILE_DATA,this.uid+"_vol",this.max,this.j,this.tileSize);this.fa.hf(Uj(t))}return this.fa},N.prototype.kc=function(){return this.c},N.prototype.getRootGroup=N.prototype.kc,N.prototype.ke=function(t,e){e&Mg.SPATIAL&&this.ea(t),N.l.ke.call(this,t,e)},N.prototype.invalidateObject=N.prototype.ke,N.prototype.ea=function(t){var e;if(C(t,M,this.ea,0),t.a!==this)throw new Xc(this.ea,"foreign object");this.Ia(t);var i=t.type;if(i===Pg.MARKER)if((e=t.ba())instanceof Wf){var n=!0;i=this.s}else i=this.v;else i===Pg.DOM_MARKER?(e=t.ba())instanceof Wf?(n=!0,i=this.J):i=this.U:i=i===Pg.OVERLAY?this.O:this.m;(n=n?i.Fc(e):i.mk(t.G())).dj=t,t.ma=n},N.prototype.Ia=function(t){var e;if(t)if(t.a!==this){if(C(t,M))throw new Xc(this.Ia,"foreign object")}else if(e=t.ma){var i=t.type;i===Pg.MARKER?this.s.remove(e)||this.v.remove(e):i===Pg.DOM_MARKER?this.J.remove(e)||this.U.remove(e):i===Pg.OVERLAY?this.O.remove(e):this.m.remove(e),delete e.dj,delete t.ma}},N.prototype.removeObject=N.prototype.Ia,N.prototype.yi=function(){return 0<this.O.bd()},N.prototype.providesOverlays=N.prototype.yi,N.prototype.Hd=function(t,e,i){return bk(this,this.O,t,e,i,!1).filter((function(t){return t.ad()}))},N.prototype.requestOverlays=N.prototype.Hd,N.prototype.Jc=function(){return 0<this.m.bd()},N.prototype.providesSpatials=N.prototype.Jc,N.prototype.Ag=function(t,e,i){return bk(this,this.m,t,e,i,!1)},N.prototype.requestSpatials=N.prototype.Ag,N.prototype.Bg=function(t,e){return bk(this,this.m,t.bg(),t.zL,e,!1)},N.prototype.requestSpatialsByTile=N.prototype.Bg,N.prototype.Wb=function(){return 0<this.s.bd()+this.v.bd()},N.prototype.providesMarkers=N.prototype.Wb,N.prototype.Lc=function(t,e,i){return ck(this,t,e,i,!1)},N.prototype.requestMarkers=N.prototype.Lc,N.prototype.Vb=function(){return 0<this.J.bd()+this.U.bd()},N.prototype.providesDomMarkers=N.prototype.Vb,N.prototype.Kc=function(t,e,i){return dk(this,t,e,i,!1)},N.prototype.requestDomMarkers=N.prototype.Kc,N.prototype.Va=function(t,e,i,n,r){for(var o=this,a=t.G(),s=[],u=Wb(),l=1;l&Pg.ANY;){if(l&n)switch(l){case Pg.MARKER:u=u.then((function(){return ck(o,a,i,e,!0)})).then((function(e){return ik(e,t,s)}));break;case Pg.DOM_MARKER:u=u.then((function(){return dk(o,a,i,e,!0)})).then((function(e){return ik(e,t,s)}));break;case Pg.SPATIAL:u=u.then((function(){return bk(o,o.m,a,i,e,!0)})).then((function(e){e.forEach(ek.bind(null,t,s))}));break;case Pg.OVERLAY:u=u.then((function(){return bk(o,o.O,a,i,e,!0)})).then((function(e){e.forEach(ek.bind(null,t,s))}))}l<<=1}u.then((function(){return r(s)}))},N.prototype.u=function(){N.l.u.call(this),this.c.qa()};var jk={PENDING:0,ACTIVE:1,DONE:2};function kk(t,e){var i;if(e=e||{},!C(t,Element))throw new D(kk,0,t);var n=t.ownerDocument.createElement("div");this.S=t,kk.l.constructor.call(this),this.padding=new lk(0,0,0,0),this.center=new I(0,0),this.margin=0,this.element=n,n.style.zIndex=0,n.style.height=n.style.width="100%",n.style.direction="ltr",n.style.position="relative"===t.style.position?"absolute":"relative",this.resize(),t.appendChild(n),(i=e.padding)!==B&&this.Mi(i.top,i.right,i.bottom,i.left),this.Hi((i=e.margin)!==B?i:0)}function mk(t){var e=t.padding;t.center.set((t.width+e.left-e.right)/2<<0,(t.height+e.top-e.bottom)/2<<0)}function nk(t,e,i,n,r,o){var a;for(a=[];n<=r;n++)a=a.concat(ok(t,i,n));for(t=a.length,hj.call(this,o,t),this.j=i=[],this.f=A(this.f,this),this.c=A(this.c,this),this.P(1);t--;)o=a[t],i.push(pk(e,o[0],o[1],o[2],this.f,this.c))}function qk(){}function rk(t,e){var i=this;if(!Ca(e))throw new D(sk,1,e);if(!Ca(t.next||Ca(t.cycle)))throw new D(rk,2,'Argument "mode" must implement H.util.AsyncQueue.Mode');this.b=[],this.c=[],this.g=t,this.i=e,this.j=function(){tk(i)},this.a=null,this.f=function(){i.a||(i.a=x.setTimeout(i.j,1))}}function tk(t){var e=t.c,i=0,n=t.g;for(n.a(),t.a=null;i<e.length;){var r=e[i];r.rk?e.splice(i,1):i++}for(;r=n.next(t.b,t.c);)r.cancelled?r.done(null,"cancelled"):(e.push(r),t.i(r,r.data))}function vk(){uk(this,null,null,null)}function uk(t,e,i,n){return t.data=e,t.cancelled=!1,t.rk=!1,t.b=i,t.c=n,t.a=null,t}function wk(){}function xk(t,e){xk.l.constructor.call(this,new yk(t),e)}function yk(t){if(isNaN(t)||0>t)throw new D(xk,1,'Argument "maxTime" must be a positive number');this.b=t,this.Rc=zk()}function Ak(t){if(uc(this,Ak),Ak.l.constructor.call(this,t),t&&"tileSize"in t){var e=Bd(+t.tileSize)/Ld;if(isNaN(e)||e%1||0>e||30<e)throw new D(Ak,0,"tileSize: "+t.tileSize);this.tileSize=+t.tileSize}}function Bk(t,e){return Vd(t)-8-xd(Vd(e))}function Ck(){}function Dk(t,e,i){if(this.g=[],e&&this.re(e),i&&!Ca(i))throw new D(Dk,2,i);this.b=0,this.filter=i,this.a={},this.f=this.c=null,this.Ji(t)}function Fk(t,e){return e&&(t.c=Gk(t,e,t.c)),e}function Hk(t){for(;t.b>t.i&&t.f;)Ik(t,t.f,!0)}function Gk(t,e,i){return i!==e&&((e.oc||e.jd)&&Ik(t,e,!1),(e.oc=i)&&(e.jd=i.jd,i.jd=e),e.jd||(t.c=e),e.oc||(t.f=e),t.b+=e.size),e}function Ik(t,e,i){var n=e.jd,r=e.oc;(n||r||e==t.c&&e==t.f)&&(n?n.oc=r:t.c=r,r?r.jd=n:t.f=n,t.b-=e.size,i&&(delete t.a[e.id],Ek(t,e))),e.oc=e.jd=null}function Ek(t,e){for(var i=t.g.length;i--;)t.g[i].call(t,e.id,e.data,e.size)}t("H.map.render.RenderState",jk),u(kk,F),t("H.map.ViewPort",kk),kk.prototype.a={Ea:"update",Fe:"sync"},kk.prototype.Hi=function(t){if(this.margin!==+t){if(E(this.margin=+t))throw new D(this.Hi,0,t);mk(this),this.dispatchEvent(this.a.Ea)}},kk.prototype.setMargin=kk.prototype.Hi,kk.prototype.Mi=function(t,e,i,n){var r=this.padding;if(r.top!==t||r.right!==e||r.bottom!==i||r.left!==n){if(E(t+e+i+n))throw new D(this.Mi);r.top=t,r.right=e,r.bottom=i,r.left=n,mk(this),this.dispatchEvent(this.a.Ea)}},kk.prototype.setPadding=kk.prototype.Mi,kk.prototype.resize=function(){var t=this.S.offsetWidth,e=this.S.offsetHeight;this.width===t&&this.height===e||(this.c=new Ki(this.width,this.height),this.width=t,this.height=e,mk(this),this.dispatchEvent(this.a.Ea))},kk.prototype.resize=kk.prototype.resize,kk.prototype.bb=function(t){this.dispatchEvent(new Ri(this.a.Fe,this.c,t,Si.SIZE))},kk.prototype.synchronize=kk.prototype.bb,kk.prototype.u=function(){x.clearTimeout(this.b),this.b=null,this.S.removeChild(this.element),this.element=this.S=null,kk.l.u.call(this)},kk.prototype.uc=Nc,kk.prototype.startInteraction=kk.prototype.uc,kk.prototype.lc=Nc,kk.prototype.interaction=kk.prototype.lc,kk.prototype.Bb=Nc,kk.prototype.endInteraction=kk.prototype.Bb,u(nk,hj),nk.prototype.f=function(){jj(this,2)},nk.prototype.c=function(){jj(this,4)},nk.prototype.Ie=function(){for(var t=this.j,e=t.length;e--;)t[e].cancel();this.j=y},t("H.util.ICancelable",qk),qk.prototype.cancel=function(){},qk.prototype.cancel=qk.prototype.cancel,t("H.util.AsyncQueue",rk),rk.prototype.push=function(t,e){if(!Ca(e))throw new D(this.push,1,e);return t=uk(new vk,t,this.f,e),this.b.push(t),this.f(),t},rk.prototype.push=rk.prototype.push,rk.Task=vk,vk.prototype.done=function(t,e){this.rk=!0,this.b(),this.c(this,t,e)},vk.prototype.done=vk.prototype.done,vk.prototype.cancel=function(){this.a&&this.a(),this.cancelled=!0},vk.prototype.cancel=vk.prototype.cancel,vk.prototype.$o=function(t){return this.a=t,this},vk.prototype.setCancelFn=vk.prototype.$o,rk.Mode=wk,wk.prototype.next=function(){},wk.prototype.a=function(){},u(xk,rk),t("H.util.SequentialQueue",xk),yk.prototype.next=function(t){return t.length&&zk()-this.Rc<this.b?t=t.shift():null},yk.prototype.a=function(){this.Rc=zk()},u(Ak,P),t("H.map.provider.TileProvider",Ak),Ak.getZoomLevelOffset=Bk,Ak.prototype.yd=function(t,e,i){return this.uri.concat("_",t,"_",e,"_",i)},Ak.prototype.getTileKey=Ak.prototype.yd,Ak.prototype.Df=256,Ak.prototype.tileSize=Ak.prototype.Df,t("H.util.ICache",Ck),Ck.prototype.add=function(){},Ck.prototype.add=Ck.prototype.add,Ck.prototype.get=function(){},Ck.prototype.get=Ck.prototype.get,Ck.prototype.Uf=function(){},Ck.prototype.drop=Ck.prototype.Uf,Ck.prototype.forEach=function(){},Ck.prototype.forEach=Ck.prototype.forEach,Ck.prototype.qa=function(){},Ck.prototype.removeAll=Ck.prototype.qa,Ck.prototype.re=function(){},Ck.prototype.registerOnDrop=Ck.prototype.re,Ck.prototype.lh=function(){},Ck.prototype.deRegisterOnDrop=Ck.prototype.lh,t("H.util.Cache",Dk),Dk.prototype.add=function(t,e,i){var n,r;if(!Cc(i=+i)||0>i)throw new D(this.add,2,i);return t=String(t),(r=!this.filter||this.filter(t,e,i))&&((n=this.a[t])?(n.data!==e&&Ek(this,n),this.b+=i-n.size,n.size=i,n.data=e,Fk(this,n)):this.a[t]=Gk(this,{id:t,data:e,size:i,oc:null,jd:null},this.c),Hk(this)),r},Dk.prototype.add=Dk.prototype.add,Dk.prototype.re=function(t){if(!Ca(t))throw new D(this.re,0,t);this.g.push(t)},Dk.prototype.registerOnDrop=Dk.prototype.re,Dk.prototype.lh=function(t){this.g=this.g.filter((function(e){return e!==t}))},Dk.prototype.deRegisterOnDrop=Dk.prototype.lh,Dk.prototype.get=function(t,e){return(t=e?this.a[t]:Fk(this,this.a[t]))&&t.data},Dk.prototype.get=Dk.prototype.get,Dk.prototype.Uf=function(t){var e;(e=this.a[t])&&Ik(this,e,!0)},Dk.prototype.drop=Dk.prototype.Uf,Dk.prototype.forEach=function(t,e,i){var n;for(n in this.a){var r=this.a[n];(!i||i(n,r.data,r.size))&&t.call(e,n,r.data,r.size)}},Dk.prototype.forEach=Dk.prototype.forEach,Dk.prototype.qa=function(t){var e;for(e in this.a){var i=this.a[e];(!t||t(e,i.data,i.size))&&Ik(this,this.a[e],!0)}},Dk.prototype.removeAll=Dk.prototype.qa,Dk.prototype.Ji=function(t){if(!(0<+t))throw new D(Dk.prototype.Ji,0,t);return this.i=+t,Hk(this),this},Dk.prototype.setMaxSize=Dk.prototype.Ji,Dk.prototype.pn=function(){return this.i},Dk.prototype.getMaxSize=Dk.prototype.pn,Dk.prototype.Nm=function(){return this.b},Dk.prototype.getCurrentSize=Dk.prototype.Nm;var Jk,Kk=function(){function t(){}for(var e,i,n,r=rc("o ms moz webkit "),o=5;o--&&!e;)e=r[o],e=(i=x[e+(e?"R":"r")+"equestAnimationFrame"])&&!E(i.call(window,t))&&(n=x[e+(e?"C":"c")+"ancelAnimationFrame"]);return Jk=e?function(t){return i.call(x,t)}:function(t){return x.setTimeout(t,25)},e?function(t){return n.call(x,t)}:function(t){return x.clearTimeout(t)}}(),zk=x.performance&&x.performance.now?function(){return x.performance.now()}:function(){return x.Date.now()};function Lk(t,e,i,n){this.key="",this.x=t,this.y=e,this.z=i,this.data=n,this.valid=!0}function Mk(t,e,i,n){return(t-=i)*t+(e-=n)*e}function Nk(t,e,i){return Ok(t,e*e,i||0,0,t.length-1)}function Ok(t,e,i,n,r){var o=0,a=n,s=t[n].x,u=t[n].y,l=t[r].x,h=t[r].y,c=n+1,f=Mk(s,u,l,h);if(f)for(;c<r;){var p=t[c++],d=p.x,g=((d-s)*(l-s)+((p=p.y)-u)*(h-u))/f;(d=0>g?Mk(d,p,s,u):1<g?Mk(d,p,l,h):Mk(d,p,s+g*(l-s),u+g*(h-u)))>o&&(o=d,a=c-1)}else for(;c<r;)(d=Mk(d=(p=t[c++]).x,p=p.y,s,u))>o&&(o=d,a=c-1);return o>=e||0<i&&a-n?(--i,1<a-n?(n=Ok(t,e,i,n,a)).splice(n.length-1,1):n=[t[n]],n=1<r-a?n.concat(Ok(t,e,i,a,r)):n.concat(t.slice(a,r+1))):n=[t[n],t[r]],n}function Pk(t,e,i,n,r,o,a,s){Pk.l.constructor.call(this,e,i,n,null),this.key=t,this.aa=s,this.a=r,this.g=o,this.i={},this.zL=a,this.o=zd(Ug.MAX_LINE_WIDTH/2*this.g+1)}function Qk(t){return t.aa.getInvalidations(Pg.SPATIAL)}function Rk(t){var e,i=Qk(t),n=i.a,r=t.c,o=r===n;if(!(o||i.pk(r)||i.Qh(r))){o=t.f;var a=t.i;if(i.kg(r))for(e=o.length;e--;){var s=o[e];if(s.Pb().kg(r)){o.splice(e,1);var u=u||Sk(t,s.gb())}}if(i.Rh(r)){for(e=o.length;e--;)if((s=o[e]).Pb().Rh(r)){var l=1;if((s=a[s.gb()])&&s.a){u=1;break}}l&&o.sort(Tk)}if(!u&&i.me(r))for(e=o.length;e--;)if(o[e].Pb().me(r)){var h=1;break}t.s!==r||h||(t.s=n,t.b!==r||u||(t.b=n)),t.c=n,o=!0}return o}function Uk(t,e){this.b=t,this.a=e}function Sk(t,e){var i=(t=t.i)[e];if(i)return delete t[e],i.a}function Vk(t){var e,i=Qk(t),n=t.c,r=t.f;if(!Rk(t)){for(e=r.length;e--;){var o=r[e],a=o.Pb();(a.kg(n)||a.Qh(n))&&Sk(t,o.gb())}t.f=t.aa.requestSpatialsByTile(t,!1,!1).sort(Tk),t.c=i.a}}function Tk(t,e){return Qg(t.ed(),e.ed(),!1)}t("H.map.provider.Tile",Lk),t("H.math.simplifyDP",Nk),u(Pk,Lk),t("H.map.provider.SpatialTile",Pk),Pk.prototype.c=Ud,Pk.prototype.s=Ud,Pk.prototype.b=Ud,Pk.prototype.le=function(){var t=Qk(this),e=t.a,i=this.b,n=i===e;return n||(this.aa.yb&&!t.me(i)?n=!0:Rk(this)&&(n=this.b===e)),n},Pk.prototype.isCanvasValid=Pk.prototype.le,Object.defineProperty(Pk.prototype,"valid",{get:function(){return this.le()},set:hd,configurable:!0}),Pk.prototype.f=ff,Pk.prototype.Va=function(){return this.f},Pk.prototype.getObjects=Pk.prototype.Va,Pk.prototype.Mn=function(){return this.a},Pk.prototype.getTileSize=Pk.prototype.Mn;var Wk={};function Yk(t,e,i,n,r,o,a,s,u){var l=t.a,h=-a;if(a=o+a,s=s||0,u===B&&(u=l.length),r&&t===dh)e.fillRect(0,0,o,o);else if(u>s){for(e.beginPath(),o=s;o<u;o++){var c=l[o],f=c.length;if(c===vi)e.moveTo(h,h),e.lineTo(h,a),e.lineTo(a,a),e.lineTo(a,h);else{var p=c[0];for(e.moveTo(p.x,p.y),s=1;s<f;s++)p=c[s],e.lineTo(p.x,p.y)}i&&e.closePath()}i&&r&&e.fill(t.b!==Td?"evenodd":"nonzero"),n&&e.stroke()}}function Xk(t,e,i){var n;t.strokeStyle=e.strokeColor,t.lineWidth=e.lineWidth*i,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.setLineDash&&(n=e.lineDash)!==ff&&(t.setLineDash(n),t.lineDashOffset=e.lineDashOffset)}function Zk(t,e){t.fillStyle=e.fillColor}function $k(t,e,i,n,r,o){var a=r*n.width/2,s=(r=r*n.length/2)/2;n=2*r*n.frequency;var u=Cd(Dd(r,2)+Dd(a,2));t=new lk(u,u,t=t.a-u,t),i=i.a;var l,h,c,f,p,d,g,y=Md/2;for(o=o||0,u=i.length;u-- >o;){var v=0,m=i[u];if(h=l=m.length){var b=m;for(h=b.length,c=0;--h;)c+=b[h].Za(b[h-1]);h=(b=c)>=n}if(h)for(c=(h=b/((h=vd(yd(b/n),1e3))+1))/2;--l;){for(f=(p=m[l]).Za(d=m[l-1]);c<=v+f;){var _=p.x+(d.x-p.x)*(g=(c-v)/f);g=p.y+(d.y-p.y)*g,t.Pf(_,g)&&(e.save(),e.translate(_,g),e.rotate(-Jd((d.y-p.y)/(p.x-d.x))+(p.x<d.x?y:-y)),e.beginPath(),e.moveTo(-a,-r),e.lineTo(0,r),e.lineTo(a,-r),e.lineTo(0,-s),e.closePath(),e.fill(),e.restore()),c+=h}v+=f}}}Pk.prototype.af=function(){var t=this.a+"_"+this.g,e=Wk[t];if(!e){e=-this.o;var i=this.a-e;e=Wk[t]=new lk(e,e,i,i)}return e},Pk.prototype.getPxClipRect=Pk.prototype.af,Pk.prototype.bg=function(){var t=this.sb;if(!t){var e=this.dg();t=0;var i=this.a;this.z&&(i-=t+=this.af().top),t=this.sb=dg(e.lf(new I(t,t)),e.lf(new I(i,i)))}return t},Pk.prototype.getGeoClipRect=Pk.prototype.bg,Pk.prototype.dg=function(){var t=this.v;if(!t){var e=this.a;(t=this.v=new Yi(B,e)).Qa(this.z),t.x=this.x*e,t.y=this.y*e}return t},Pk.prototype.getPxProj=Pk.prototype.dg,Pk.prototype.$a=function(){return this.g},Pk.prototype.getPixelRatio=Pk.prototype.$a,Pk.prototype.xg=function(){var t=this.data;return this.data=null,this.b=Ud,t},Pk.prototype.releaseCanvas=Pk.prototype.xg,Pk.prototype.yg=function(){this.i={},delete this.f,this.c=Ud},Pk.prototype.releaseData=Pk.prototype.yg,Pk.prototype.V=function(t){var e,i,n,r,o=t.getContext("2d"),a=0;if(Vk(this),this.b<this.c){var s=this.f;if(e=s.length){t.width=t.height=this.a,o.clearRect(0,0,this.a,this.a);var u=this.i;for(i=0;i<e;i++){var l=s[i],h=l.gb();if(r=(n=u[h])?n.b:l.getGeometriesForTile(this)){if(n)l.Pb().me(this.b)&&(n.a=ch(l,r)),n=n.a;else{var c;n=ch(l,r);for(var f=r,p=l.j?2:0,d=f.length;d--;){var g=f[d];if(g!==dh){var y=g.a;for(c=y.length;c--;)4<(g=y[c]).length&&(y[c]=Nk(g,.6,p))}}this.i[h]=new Uk(r,n)}if(n){for(o.save(),f=l.j?this.O:this.C,h=0;h<r.length;h++)f.call(this,l,r[h],l.ua(),o);if(r=l.getLabels(this))for(l=o,h=r.length;h--;)for(f=(p=r[h]).size,l.font=f+"px "+p.font,l.fillStyle=p.color,l.textAlign="center",l.translate(p.x,p.y),l.rotate(p.angle),f=p.lineHeight||1.375*f,p=(d=p.lines).length;p--;)l.fillText(d[p],0,p*f);o.restore()}a|=n}}}this.data=a?t:null,this.s=this.b=this.c}else this.data&&(a=1);return 0<a},Pk.prototype.render=Pk.prototype.V,Pk.prototype.C=function(t,e,i,n){var r;i.cf&&(Xk(n,i,this.g),Yk(e,n,!1,!0,!1,this.a,this.o)),i.bf&&(r=t.g)&&r.Sb&&(Zk(n,r),$k(this,n,e,r,i.lineWidth))},Pk.prototype.O=function(t,e,i,n){var r,o=i.Sb,a=i.cf,s=this.a,u=this.o;if(e===dh)o&&(Zk(n,i),n.fillRect(0,0,s,s));else{if(a&&Xk(n,i,this.g),i.bf&&(r=t.g)){var l=i.lineWidth;r.Sb||(r=null)}(t=e.c)===Td?((a||o)&&(Zk(n,i),Yk(e,n,!0,a,o,s,this.o)),r&&(Zk(n,r),$k(this,n,e,r,l,0))):(o&&(Zk(n,i),Yk(e,n,!0,!1,o,s,u,0,t)),a&&Yk(e,n,!1,a,!1,s,u,t),r&&(Zk(n,r),$k(this,n,e,r,l,t)))}};var al=[];function bl(t,e){var i;bl.l.constructor.call(this,e),this.C=t,this.N=t=e.pixelRatio,this.tileSize=i=1<<xd(Vd((e.tileSize||256)*t)),this.U=Bk(i,t),this.Zh=A(this.Zh,this),this.ni=A(this.ni,this),this.$h=A(this.$h,this),this.Yh=A(this.Yh,this),this.v=A(this.v,this),this.C.addEventListener(P.prototype.i.Ea,this.v,!1,this),this.c=[],this.m=new Dk(e.tileCacheSize||256,this.Zh),this.s=new Dk(e.dataCacheSize||512,this.ni),this.J=new xk(20,this.$h),this.a={},this.O=zk()}function cl(t,e){if(e=e||{},!t)throw new D(cl,0,t);this.tileSize=t.tileSize,this.c={},aj.call(this,{min:void 0!==e.min?e.min:t.min,max:void 0!==e.max?e.max:t.max,minWorldSize:this.tileSize,projection:e.cl,dark:e.dark,provider:t})}function el(t,e,i,n,r){n=yd(n);var o=Dd(2,n),a=e.left,s=e.top,u=e.right;i=u+(i?o+(u===e.left?0:1):1);var l=e.bottom,h=[];if(r)var c=a+(1+u-a)/2+r.x/t.tileSize-.5,f=s+(1+l-s)/2+r.y/t.tileSize-.5;for(;a<i;){for(s=e.top;s<=l;)t=a%o,h.push([t,s,n,r?Ad(c-a)+Ad(f-s):0]),s++;a++}return h}function ok(t,e,i){i=yd(i),t.pixelProjection.Qa(i),e=t.Te(e);var n=t.je(e,i);return el(t,n,e.left>e.right,i)}function fl(t,e){return e[3]-t[3]}function R(t){uc(this,R),R.l.constructor.call(this,t),this.ec=new gl,this.gc=A(this.gc,this),this.U=hl,this.createTileInternal=this.rd.bind(this)}Pk.prototype.Ga=function(t,e,i){for(var n,r,o,a,s,u,l,h=this.f,c=h.length,f=ff,p=this.g;c--;)if((r=h[c]).Dc(!0)&&(o=this.i[r.gb()])&&(a=o.b)){for(u="none"!==(n=r.ua()).fillColor&&r.j,l="none"===n.strokeColor?0:n.lineWidth*p,n=a.length;n--;){var d;if(s=a[n],!(d=u&&s===dh)&&(d=u||l)){var g;d=t;var y=e,v=u,m=l,b=s.b,_=s.c,w=_!==Td,x=s.a,M=x.length,E=0,A=0,k=!1;for(s=0;s<M;s++){var T=x[s],S=s>=_,I=!S&&s>=b;if(T===vi&&v)I?E++:A++;else{var L=T.length;for(al.length=2*L,g=0;g<L;g++){var O=T[g];al[2*g]=O.x,al[2*g+1]=O.y}if(g=v&&!S,S=w&&!S?0:m,g||S){if((S=be(d,y,al,S,g))===ae.EDGE||S===ae.VERTEX){k=!0;break}if(S===ae.SURFACE)if(I)E++;else if(A++,b===Td)break}}}d=k||0<A&&!(E%2)}if(d){f===ff&&(f=[]),f.push(r);break}}if(i&&f.length)break}return f},u(bl,Ak),bl.prototype.v=function(t){t.target.type===Pg.SPATIAL&&Wj(this,t.target)},bl.prototype.jb=function(t,e,i,n){var r,o=this.getTileKey(t,e,i);if(r=this.m.get(o,n)){if(n||r.le())return r;n||this.m.Uf(o)}if((r=this.s.get(o,n))&&(n||Rk(r)))return t=this.c.pop()||document.createElement("canvas"),r.V(t)||this.c.push(t),this.m.add(o,r,1),r;n||((r=this.a[o])?r.count++:((r=this.J.push([o,t,e,i],this.Yh)).count=1,this.a[o]=r))},bl.prototype.requestTile=bl.prototype.jb,bl.prototype.rd=function(){},bl.prototype.Wc=function(t,e,i){this.Lf(this.getTileKey(t,e,i))},bl.prototype.cancelTile=bl.prototype.Wc,bl.prototype.Lf=function(t){var e;(e=this.a[t])&&(e.count--,e.count||(e.cancel(),delete this.a[t]))},bl.prototype.cancelTileByKey=bl.prototype.Lf,n=bl.prototype,n.$h=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3];n=(i=this.m.get(i)||new Pk(i,n,r,o,this.tileSize,this.N,o+this.U,this.C)).data||this.c.pop()||document.createElement("canvas"),i.V(n)||this.c.push(n),e.push(i),t.done(i)},n.Yh=function(t,e){t=t.data[0],e&&this.m.add(t,e,1),delete this.a[t],Wj(this)},n.Zh=function(t,e){e.data&&this.c.push(e.xg()),this.s.add(t,e,1)},n.ni=function(t,e){e.yg()},n.u=function(){for(var t in this.a)this.a[t].cancel();this.m.qa(),this.s.qa(),this.c.length=0,bl.l.u.call(this)},u(cl,aj),t("H.map.layer.BaseTileLayer",cl),cl.prototype.Te=function(t,e){var i=this.pixelProjection;if(!C(t,K))throw new D(this.Te,0,t);if(!E(e)){var n=i.gk();i.Qa(e)}return t=dl(i.lb(t.Rb()),i.lb(t.Nb())),!E(n)&&i.Qa(n),t},cl.prototype.geoRectToRect=cl.prototype.Te,cl.prototype.je=function(t,e){var i=Dd(2,yd(e)),n=this.tileSize;if(!C(t,lk))throw new D(this.je,0,t);if(E(e=+e))throw new D(this.je,1,e);(e=yd(t.left/n))===i&&--e;var r=yd(t.right/n);return r===i&&--r,new lk(e,Yd(yd(t.top/n),0,i-1),r,Yd(yd(t.bottom/n),0,i-1))},cl.prototype.getTileBounds=cl.prototype.je,cl.prototype.jb=function(t,e,i,n){return this.a.requestTile(t,e,i,n)},cl.prototype.Wc=function(t,e,i){this.a.cancelTile(t,e,i)},cl.prototype.cancelTile=cl.prototype.Wc,cl.prototype.ta=function(t,e){return this.a.getCopyrights?this.a.getCopyrights(t,e):null},cl.prototype.getCopyrights=cl.prototype.ta,cl.prototype.$e=function(t,e,i,n,r,o){var a,s,u=[],l=this.a;o=null!=o?o:"__default__";var h=l.requestTile;if(!C(t,lk))throw new D(this.$e,0,t);if(E(i=+i))throw new D(this.$e,1,i);if(n||(a={}),t=(e=el(this,t,e,i,r)).length)for(n||e.sort(fl),i=t;i--;)r=e[i],n||(a[l.yd.apply(l,r)]=!0),r[3]=+n,(s=h.apply(l,r))&&u.push(s);if(!n){var c;for(c in n=a,a=this.c[o]||{})a.hasOwnProperty(c)&&a[c]&&!n[c]&&this.a.cancelTileByKey(c);this.c[o]=n}return{total:t,tiles:u}},cl.prototype.getProviderTiles=cl.prototype.$e,u(R,Ak),t("H.map.provider.RemoteTileProvider",R),R.prototype.Yd=function(){return 1},R.prototype.getEntryWeight=R.prototype.Yd;var hl=new Dk(65536);function pk(t,e,i,n,r,o){return n=~~n,t.requestInternal(e,i,n,(function(a,s){t.ge().put(t.yd(e,i,n),{raw:s&&s.raw||a,timestamp:x.Date.now()},r,o)}),o,0)}function jl(t,e){delete t.m[e],delete t.fa[e]}function il(t){for(var e in t.m)t.gc(e)&&t.cancelTileByKey(e)}R.prototype.m={},R.prototype.fa={},R.prototype.Ob=function(){return this.U},R.prototype.getCache=R.prototype.Ob,R.prototype.O=ba(3),R.prototype.gc=function(t){var e=this.uri;return!t.indexOf(e)&&"_"===t.charAt(e.length)},R.prototype.cacheFilter=R.prototype.gc,R.prototype.Xa=function(t,e){e.valid=!1},R.prototype.reload=function(t){var e=this.getCache();t?e.qa(this.gc):e.forEach(this.Xa,this,this.gc),il(this),Wj(this,this,{isReload:!0})},R.prototype.reload=R.prototype.reload,R.prototype.fh=function(){return!1},R.prototype.MAX_STORE_TIME=1/0,R.prototype.ge=function(){return this.ec},R.prototype.ma=function(t,e){e(t)},R.prototype.requestInternal=R.prototype.K,R.prototype.jb=function(t,e,i,n){var r=this,o=this.getCache();if(E(t=+t))throw new D(this.jb,0,t);if(E(e=+e))throw new D(this.jb,0,e);if(E(i=+i))throw new D(this.jb,0,i);i=~~i;var a=this.getTileKey(t,e,i);return(o=o.get(a))&&o.valid||n||this.m[a]||(o=B,this.requestTileAsPromise(t,e,i,n).then((function(t){Wj(r,t)}),hd)),o},R.prototype.requestTile=R.prototype.jb,R.prototype.ll=function(t,e,i,n){var r,o=this,a=this.getCache(),s=this.getTileKey(t,e,i),u=this.m,l=this.fa,h=this.ge();return l[s]?l[s]:(l[s]=l=new Ob((function(l,c){function f(r){var f,p,d=function(n,r){(p=o.createTileInternal(t,e,i,n,r)).key=s,a.add(s,p,o.Yd(n)),l(p),jl(o,s)};r&&(f=x.Date.now()-r.timestamp),r&&f<o.MAX_STORE_TIME?o.ma(r.raw,d):(f&&h.remove(s),(p=a.get(s))&&p.valid||n?l(p||null):u[s]=o.requestInternal(t,e,i,d,c))}r=h.get(s,f,f)})),u[s]||(u[s]=r),l.then((function(){jl(o,s)}),(function(){jl(o,s)})),l)},R.prototype.requestTileAsPromise=R.prototype.ll,R.prototype.kl=function(t,e){var i=this,n=t.id,r=t.tile.coords;return new Ob((function(t,o){i.ll(r.x,r.y,r.z,e).then((function(e){for(var i,r=y,o=(e=e.Va?e.Va():e.data).length;o--;)if((i=e[o]).gb()===n){r=i;break}t(r)}),o)}))},R.prototype.requestObjectAsPromise=R.prototype.kl;var kl={cancel:function(){}};function gl(){}function sk(t){if(sk.l.constructor.call(this,t),t&&(this.C={crossOrigin:t.crossOrigin||"anonymous",headers:t.headers||{}},this.v=t.getURL),!Ca(this.v))throw new D(sk,0,"getURL");if(Xj(this,t.opacity),this.c=x.URL||x.webkitURL,!(t="anonymous"===(t=this.C.crossOrigin)||"use-credentials"===t)){t=this.v(0,0,0);var e=window.location,i=document.createElement("a");i.href=t,t=i.hostname===e.hostname&&i.port===e.port&&i.protocol===e.protocol}(this.N=t&&!!rf.prototype.b.arraybuffer&&!!this.c)&&this.Ob().re(A(this.Aa,this))}function lk(t,e,i,n){this.left=+t,this.top=+e,this.right=+i,this.bottom=+n}function dl(t,e){return new lk(t.x,t.y,e.x,e.y)}function ll(t,e){cl.call(this,t,e)}function ml(t,e){(e=e?Ua(e):{}).tileSize=e.tileSize||256,e.pixelRatio=e.pixelRatio||Se(),e.max=24,this.c=new bl(t,e),this.f=new ll(this.c),e.minWorldSize=this.c.tileSize,e.provider=t,ml.l.constructor.call(this,e),this.tileSize=this.f.tileSize,this.j=A(this.j,this),this.c.addEventListener(this.c.i.Ea,this.j),t.addEventListener(t.i.Ea,this.j)}R.prototype.rd=function(t,e,i,n){return new Lk(t,e,i,n)},R.prototype.Lf=function(t){var e=this.m[t];e&&(e.cancel(),jl(this,t))},R.prototype.cancelTileByKey=R.prototype.Lf,R.prototype.Wc=function(t,e,i){this.cancelTileByKey(this.getTileKey(t,e,i))},R.prototype.cancelTile=R.prototype.Wc,R.prototype.u=function(){R.l.u.call(this),this.getCache().qa(this.gc),il(this)},R.NullStorage=gl,gl.prototype.get=function(t,e){return e(),kl},gl.prototype.get=gl.prototype.get,gl.prototype.put=function(t,e,i){i&&i()},gl.prototype.put=gl.prototype.put,gl.prototype.clear=function(t){t&&t()},gl.prototype.clear=gl.prototype.clear,gl.prototype.remove=function(t,e){e&&e()},gl.prototype.remove=gl.prototype.remove,u(sk,R),t("H.map.provider.ImageTileProvider",sk),sk.prototype.qc=function(t){Xj(this,t)},sk.prototype.setOpacity=sk.prototype.qc,sk.prototype.dd=function(){return this.j},sk.prototype.getOpacity=sk.prototype.dd,sk.prototype.pf=df,sk.prototype.providesRasters=sk.prototype.pf,sk.prototype.Yd=function(){return this.tileSize},sk.prototype.getEntryWeight=sk.prototype.Yd,sk.prototype.K=function(t,e,i,n,r,o){var a,s=this,u=this.v(t,e,i);if(t=null,u){var l=x.setTimeout((function(){s.N?(a=new rf("arraybuffer",u,o,s.C)).then((function(t){return t.blob()})).then((function(t){var e=new Image;e.onload=A(n,null,e,{raw:t}),e.onerror=A(r,null,"bad url");try{e.src=s.c.createObjectURL(t)}catch(t){}}),r):(a=new rf("image",u,o,s.C)).then(n,r)}),150);t={cancel:function(){a?a.cancel():x.clearTimeout(l)}}}else n(null);return t},sk.prototype.requestInternal=sk.prototype.K,sk.prototype.ma=function(t,e){var i=new Image;i.onload=function(){e(this)},i.src=this.c.createObjectURL(t)},sk.prototype.Aa=function(t,e){(t=e.data)&&t instanceof HTMLImageElement&&this.c.revokeObjectURL(t.src)},t("H.math.Rect",lk),lk.prototype.set=lk,lk.prototype.set=lk.prototype.set,lk.prototype.Rb=function(){return this.c||(this.c=new I(this.left,this.top))},lk.prototype.getTopLeft=lk.prototype.Rb,lk.prototype.Nb=function(){return this.a||(this.a=new I(this.right,this.bottom))},lk.prototype.getBottomRight=lk.prototype.Nb,lk.prototype.Pf=function(t,e){return this.left<=t&&this.right>=t&&this.top<=e&&this.bottom>=e},lk.prototype.containsXY=lk.prototype.Pf,lk.fromPoints=dl,lk.prototype.clone=function(){return new lk(this.left,this.top,this.right,this.bottom)},lk.prototype.clone=lk.prototype.clone,u(ll,cl),t("H.map.layer.TileLayer",ll),ll.prototype.Id=function(t,e,i,n,r){if(!C(t,K))throw new D(this.Id,0,t);if(E(e=+e))throw new D(this.Id,1,e);e=yd(e),this.pixelProjection.Qa(e),t=this.Te(t);var o=this.je(t,e);return this.$e(o,t.left>t.right,e,i,n,r)},ll.prototype.requestTiles=ll.prototype.Id,u(ml,aj),t("H.map.layer.ObjectLayer",ml),ml.prototype.j=function(t){t.currentTarget!==this.c&&t.target.type===Pg.SPATIAL||this.g()};var nl={markers:ff,total:0};ml.prototype.Lc=function(t,e,i){var n,r=this.a;return r.providesMarkers()&&(n=r.requestMarkers(t,e,!0,i)).length?{markers:n,total:n.length}:nl},ml.prototype.requestMarkers=ml.prototype.Lc,ml.prototype.Kc=function(t,e,i){var n,r=this.a;return r.providesDomMarkers()&&(n=r.requestDomMarkers(t,e,!0,i)).length?{markers:n,total:n.length}:nl},ml.prototype.requestDomMarkers=ml.prototype.Kc;var ol={tiles:ff,total:0};ml.prototype.Id=function(t,e,i,n){if(this.a.providesSpatials()){var r=this.f.Id(t,e,i,n);i||(i=this.c,33<(r=zk())-i.O&&(tk(i.J),i.O=r),r=this.f.Id(t,e,!0,n))}else r=ol;return r},ml.prototype.requestTiles=ml.prototype.Id,ml.prototype.jb=function(t,e,i,n){return this.f.jb(t,e,i,n)},ml.prototype.requestTile=ml.prototype.jb,ml.prototype.Wc=function(t,e,i){this.f.Wc(t,e,i)},ml.prototype.cancelTile=ml.prototype.Wc;var pl={overlays:ff,total:0};function ql(t,e,i,n){var r=new lk(0,0,0,0);if(ql.l.constructor.call(this),!t)throw new D(ql,0,t);if(!e)throw new D(ql,1,e);if(!i)throw new D(ql,2,i);if("object"!=typeof n)throw new D(ql,3,n+" is not an object");if("number"!=typeof n.pixelRatio)throw new D(ql,3,n.pixelRatio+" is not a number");this.sa=n.pixelRatio,this.zoom=0,this.ib=Bd(this.sa)/Ld,this.ra=new Yi,this.yb={1:r.clone(),2:r.clone(),4:r.clone()},this.m=new I(.5,.5),this.g=t,rl(this,this.sa),this.uc=A(this.uc,this),this.lc=A(this.lc,this),this.Bb=A(this.Bb,this),t.startInteraction=this.uc,t.interaction=this.lc,t.endInteraction=this.Bb,t.addEventListener(t.a.Ea,this.U,!1,this),this.getCapabilities=this.getCapabilities,this.capture=this.capture,this.zoomAt=this.Ae,this.relaunch=this.ha,this.dispose=this.B,this.screenToGeo=this.Wa,this.geoToScreen=this.Fa,this.screenToLookAtData=this.Eg,this.O=e,this.tc=A(this.tc,this),this.control=A(this.control,this),this.Ab=A(this.Ab,this),e.startControl=this.tc,e.control=this.control,e.endControl=this.Ab,e.addEventListener(e.a.Ea,this.bh,!1,this),this.c=i,this.qg=A(this.qg,this),this.ef=A(this.ef,this),this.ff=A(this.ff,this),this.pg=A(this.pg,this),i.addEventListener(aj.prototype.b.Ea,this.qg,!1,this),i.addEventListener(i.b.Be,this.ef,!1,this),i.addEventListener(i.b.De,this.ff,!1,this),i.addEventListener(i.b.Ee,this.pg,!1,this)}function rl(t,e){var i=t.g,n=i.width,r=i.height,o=i.padding,a=o.top,s=o.left,u=o.bottom;o=o.right,i=i.margin;var l=-(n+s-o)/2<<0,h=-(r+a-u)/2<<0;n+=l,r+=h,(t=t.yb)[1].set((l-i)*e,(h-i)*e,(n+i)*e,(r+i)*e),t[2].set(l*e,h*e,n*e,r*e),t[4].set((l+s)*e,(h+a)*e,(n-o)*e,(r-u)*e)}function tl(t,e){t.style.transition="opacity 1.5s",Ce(t,"transitionend",e,!1),t.style.opacity=0}ml.prototype.Hd=function(t,e,i){var n=this.a,r=pl;return n.providesOverlays&&n.providesOverlays()&&(e=(t=n.requestOverlays(t,e,!0,i)).length)&&(r={overlays:t,total:e}),r},ml.prototype.requestOverlays=ml.prototype.Hd,ml.prototype.u=function(){this.c.B(),this.f.B(),this.a.dispose(),ml.l.u.call(this)},u(ql,F),t("H.map.render.RenderEngine",ql),ql.prototype.U=function(){rl(this,this.sa)},ql.prototype.u=function(){var t=this.g,e=this.O,i=this.c;t.removeEventListener(t.a.Ea,this.U,!1,this),t.startInteraction===this.uc&&(t.startInteraction=kk.prototype.uc),t.interaction===this.lc&&(t.interaction=kk.prototype.lc),t.endInteraction===this.Bb&&(t.endInteraction=kk.prototype.Bb),e.removeEventListener(e.a.Ea,this.bh,!1,this),e.startControl===this.tc&&(e.startControl=sl.prototype.tc),e.control===this.control&&(e.control=sl.prototype.control),e.endControl===this.Ab&&(e.endControl=sl.prototype.Ab),i.removeEventListener(aj.prototype.b.Ea,this.qg,!1,this),i.removeEventListener(i.b.Be,this.ef,!1,this),i.removeEventListener(i.b.De,this.ff,!1,this),i.removeEventListener(i.b.Ee,this.pg,!1,this)},ql.prototype.Di=function(t){this.Sg=t},ql.prototype.setAnimationCallback=ql.prototype.Di,ql.prototype.Ai=function(){this.Sg=void 0},ql.prototype.resetAnimationCallback=ql.prototype.Ai,ql.prototype.control=function(){},ql.prototype.capture=function(){return Yb(Error("not implemented"))};var ul={ZOOM:1,HEADING:2,TILT:4,INCLINE:8,COORD:16};function xl(t,e){return e.tilt=yl(t,e.tilt),e.heading=zl(t,e.heading),e.incline=t.getCapabilities().lookAt.incline.min,e}function wl(t,e){var i=t.getCapabilities().lookAt.zoom;return Yd(e,wd(i.min,t.Pg),vd(i.max,t.Tg))}function yl(t,e){return Yd(e,(t=t.getCapabilities().lookAt.tilt).min,t.max)}function zl(t,e){return Yd((e%360+360)%360,(t=t.getCapabilities().lookAt.heading).min,t.max)}function vl(t,e,i){(i=i?e.addEventListener:e.removeEventListener).call(e,e.b.nj,t.pi,!1,t),i.call(e,e.b.mj,t.pi,!1,t)}ql.InteractionModifiers=ul,n=ql.prototype,n.zk={pj:"render"},n.qg=function(t){this.Rk(t),this.ha()},n.ef=function(t){this.jf(t.idx,t.added)},n.ff=function(t){this.oi(t.idx,t.removed,t.type===this.c.b.Ee)},n.pg=function(t){t.removed&&this.ff(t),this.ef(t)},n.Rk=hd,n.jf=function(t,e){this.Mh(t,e),0===t&&this.Jb(),C(e,aj)&&vl(this,e,!0),this.te(),this.ha()},n.Jb=function(){var t=this.c.Na();if(0<t.length){var e=t[0].max;this.Pg=t[0].min,this.Tg=e}else e=(t=this.getCapabilities().lookAt.zoom).max,this.Pg=t.min,this.Tg=e;(t=wl(this,this.zoom))!==this.zoom&&(this.zoom=t,this.ra.Qa(t),this.bb())},n.bb=function(t){this.J=this.mb(),t&&(this.J.position=t),this.J.zoom=this.zoom-this.ib,this.J.position.alt=0},n.Nl=0,n.heading=180,n.mb=function(){return xl(this,{position:this.ra.projection.vg(this.m),zoom:this.zoom,tilt:this.Nl,heading:this.heading})},n.Mh=hd,n.oi=hd,n.ap=function(t,e){this.C={before:t,after:e}},ql.prototype.setOnRenderCallbacks=ql.prototype.ap;var Al={P2D:0,WEBGL:1,HARP:2};ql.EngineType=Al;var Bl={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:85},incline:{min:0,max:0},heading:{min:0,max:360}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};function Cl(t){var e,i=this,n=x.H.gl;Cl.l.constructor.call(this),this.a=e=n.Scene.create(x.URL.createObjectURL(nf(JSON.stringify(Dl))),{viewport:t.viewport,container:t.vc,disableRenderLoop:!0,devicePixelRatio:t.devicePixelRatio,logLevel:"error"}),t.Ko&&e.subscribe({load:t.Ko}),e.subscribe({view_complete:function(){i.g=!0,t.Tk()}});var r=e.requestRedraw;e.requestRedraw=function(){r.apply(e),t.Tk()},this.i=A(this.i,this),this.f=A(this.f,this),this.j=0,this.c={},this.b={}}function El(t){var e;for(e in t=t.a.sources){var i=t[e];if(i.hasPendingCommands&&i.hasPendingCommands())return!0}return x.H.gl.Task.hasPendingTasks()}function Fl(t){t.g=!1,t.a.resetViewComplete()}function Gl(t){return t.a.view}function Hl(t,e){function i(){var i,r,o,a,s,u=e.Na(),l={},h={},c=++t.j;for(vh(h,Dl),r=0;r<u.length;r++){var f=u[r];if(i=f.ga()){var p=i.ub();if(p.getState()===Qh.READY){var d=p.vd();if(!Ta(d)){for(o in delete d.cameras,delete d.camera,l[r]=d=Hh(d,r),!C(f,ml)&&d.sources&&Ih(d,i.uid),d.sources){var g=d.sources[o];g.max_zoom=vd(i.max,Bl.lookAt.zoom.max),g.max_display_zoom=f.max,g.min_display_zoom=f.min,(s=i.tileSize)&&(2<=n&&256<s&&i instanceof sk&&(s/=2),g.tile_size=s)}(a=p.hc())&&Jh(d,a),vh(h,d)}}}}return vh(h.layers.skybox.draw.skybox.color,h.scene.sky),t.a.config=h,t.a.updateConfig().then((function(){var e,i,n={};if(c!==t.j)return!1;for(i in t.j=0,l){f=u[+i];var r=l[i].sources;for(e in r)(r=t.a.sources[e])&&(n[e]=r,r.initialize&&f.getProvider()&&r.initialize(f.getProvider(),t.i,t.a.getWorkers().length,r.tiled?B:t.a.tile_manager.getWorkerForTile(y,r)))}for(e in t.c)!n[e]&&t.c[e].dispose&&t.c[e].dispose();return t.c=n,!0}))}var n=t.a.pixelRatio();t.a.initialized?i():t.a.load(y,{blocking:!1}).then(i)}t("H.map.render.webgl.capabilities",Bl),u(Cl,nd),Cl.prototype.g=!1,Cl.prototype.V=function(){var t=x.H.gl.Task;return this.a.immediateRedraw(),t.setState({user_moving_view:this.a.view.user_input_active}),t.processAll(),this.g&&!this.a.dirty&&!this.a.building&&!El(this)&&!Object.keys(this.b).length},Cl.prototype.i=function(t,e,i){var n=this,r=this.a.sources[t],o=i&&i.isReload;e?!0!==this.b[t]&&(this.b[t]||(this.b[t]={Ml:{},vj:[]}),C(e,Lk)?this.b[t].Ml[e.x+"/"+e.y+"/"+e.z]=!0:(e=e.boundingBox,this.b[t].vj.push(new K(e[0],e[1],e[2],e[3])))):this.b[t]=!0,r&&r.has_volatile_data?Il(this,o):(x.clearTimeout(this.m),this.m=x.setTimeout((function(){return Il(n,o)}),Jl))};var Jl=100;function Il(t,e){var i=t.a.tile_manager;i.removeTiles(t.f),i.updateTilesForView(),e&&i.removeCachedTiles(t.f),Fl(t),t.b={}}function Kl(t,e,i,n){t.a.getFeatureAt(e,i,n),t.a.update()}function Ll(t){return t.a.screenshot(void 0).then((function(t){return new Ob((function(e,i){new Dj(URL.createObjectURL(t.blob),(function(t,n){1===t?e(n.getData()):i()}),!1)}))}))}Cl.prototype.f=function(t){var e=!1,i=this.b[t.source.name],n=x.H.gl;if(i)if(!0===i)e=!0;else{var r=n.Tile.coord(n.Geo.wrapTile(t.coords));if(!(e=!!i.Ml[r.key])){var o=n.Geo.getTileBoundingBox(r,t.source.tile_size,Ug.MAX_LINE_WIDTH/2);o=dg(o.getTopLeft(),o.getBottomRight()),e=i.vj.some((function(t){return t.Ad(o,!0)||o.pd(t.fb(),!0)}))}}return e},Cl.prototype.vd=function(){return this.a.config},Cl.prototype.$a=function(){return this.a.pixelRatio()},Cl.prototype.u=function(){var t=this.c;Cl.l.u.call(this),this.a.destroy(),this.b={},t&&Object.keys(t).forEach((function(e){t[e].dispose()})),x.clearTimeout(this.m),this.c=this.a=null};var Dl={scene:{background:{color:"#FFFFFF"},sky:{zenith:"#347BC0",horizon:"#EDF2F9",fog:"#FFFFFF"}},lights:{default_light:{type:"directional",name:"default_light",visible:!0}},camera:{type:"perspective"},styles:{},fonts:{},sources:{skybox:{type:"SkyBox"}},layers:{skybox:{data:{source:"skybox"},draw:{skybox:{color:{}}}}},global:{}},Zj={FEATURE:1,SOURCE:2,PROVIDER:3};function Ml(t){return t}function Nl(t){return-t*(t-2)}function Ol(t){return 1-Math.sqrt(1-t*t)}function Pl(t){return Cd(2*t-t*t)}function Ql(t){return 1-Math.cos(t*Math.PI/2)}function Rl(t){return Math.sin(t*Math.PI/2)}function Sl(t,e){this.a={tilt:Tl(t.tilt,e.tilt),heading:Tl(t.heading,e.heading),zoom:e.zoom-t.zoom};var i=this.b=Zf(t.position),n=e.position;t=n.lat*Rd;var r=i.lat*Rd;n=n.lng*Rd-i.lng*Rd,i=Fd(n)*Hd(t),t=Hd(r)*Fd(t)-Fd(r)*Hd(t)*Hd(n),t=Math.atan2(i,t),this.j=(0<=t?t:Pd+t)*Sd,this.c=this.b.Za(e.position),e=this.a.zoom,this.i=0===e?this.f:Object.assign({},this.f,{zoom:0>e?Pl:Ol,position:0>e?Ql:Rl}),this.g=Object.assign({},{tilt:0,heading:0,zoom:0})}function Tl(t,e){return-180<(t=e-t)&&180>=t?t:180<t?t-360:t+360}function Ul(t,e){if(E(this.x=+t))throw new D(Ul,0,t);if(E(this.y=+e))throw new D(Ul,1,e)}function Vl(t){return Cd(t.a(t))}function Wl(t){t=t||gf,this.sb=tc(t.Fo)?t.Fo:3,this.aa=tc(t.Do)?t.Do:300,this.s=tc(t.op)?t.op:3,this.v=tc(t.kp)?t.kp:50,this.f=[],this.clear()}function Zl(t,e){t.i^=t.i&e}t("H.map.provider.PickingMode",Zj),t("H.util.animation.ease.LINEAR",Ml),t("H.util.animation.ease.EASE_IN_QUAD",(function(t){return t*t})),t("H.util.animation.ease.EASE_OUT_QUAD",Nl),t("H.util.animation.ease.EASE_IN_OUT_QUINT",(function(t){return 1>(t*=2)?Dd(t,5)/2:Dd(t-=2,5)/2+1})),t("H.util.animation.ease.EASE_OUT_CIRC",Pl),Sl.prototype.f={tilt:Ml,heading:Ml,zoom:Ml,position:Ml},Ul.prototype.add=function(t){return new Ul(this.x+t.x,this.y+t.y)},Ul.prototype.a=function(t){if(!C(t,Ul))throw new D(this.a,0,t);return(t=this.b(t)).x+t.y},Ul.prototype.b=function(t){if(!C(t,Ul))throw new D(this.b,0,t);return new Ul(this.x*t.x,this.y*t.y)},Ul.prototype.Qa=function(t){return new Ul(this.x*t,this.y*t)},t("H.map.render.InteractionUtils",Wl),Wl.prototype.io=function(){return this.c},Wl.prototype.isGestureDetected=Wl.prototype.io,Wl.prototype.start=function(t,e){var i=ul.HEADING,n=ul.TILT;this.a&&this.clear(),this.i=t,this.m=!!e,this.a=!0,this.c=!(t&(i|n))||t===i||t===n},Wl.prototype.start=Wl.prototype.start,Wl.prototype.store=function(t,e,i,n,r){var o=!1;if(this.a){if(o=(t=new Xl(t,e,i,n,r)).c,this.o=this.b,this.b=t,this.g){if(this.j=!0,o){e=this.i;var a=this.c;if(!a&&this.j){r=ul.HEADING;var s=ul.TILT;i=ul.COORD,n=ul.ZOOM;var u=e&(i|s)?this.ce(!0):Yl,l=e&n?this.Xf(!0):1,h=e&r?Ad(this.uh(!0)):0,c=Ad(u.x),f=Ad(u.y);u=10<c||10<f,c=10<f&&f>3*c,l=.8>l||1.2<l,h=7<h,e&s&&(h||l||u&&!c?Zl(this,s):c&&(Zl(this,~s>>>0),a=!0)),!a&&e&r&&e&(i|n)&&(l||u?(Zl(this,r),a=!0):h&&(Zl(this,s),a=!0)),this.c=a}}}else this.g=t,o||(this.c=!0);this.m&&this.f.push(t)}return o},Wl.prototype.store=Wl.prototype.store,Wl.prototype.clear=function(){this.f.length=0,this.a=this.m=this.j=this.c=!1,this.g=this.o=this.b=void 0},Wl.prototype.clear=Wl.prototype.clear,Wl.prototype.Hc=function(t){return 0<(this.i&t)},Wl.prototype.isModifierEnabled=Wl.prototype.Hc,Wl.prototype.va=function(){return this.a},Wl.prototype.isRunning=Wl.prototype.va;var Yl=oc(new Ul(0,0));function Xl(t,e,i,n,r){this.a=new I(t,e),i!==B&&(this.b=new I(i,n),this.c=!0),this.timestamp=r!==B?r:zk()}function am(t){var e=t.a;return(t=t.b)?new I(e.x-(e.x-t.x)/2,e.y-(e.y-t.y)/2):B}function cm(t,e){var i=t.a;return(t=t.b)&&t.Za(e)<i.Za(e)?t:i}function $l(t,e){var i=t.b,n=e.b;return n&&i?(e=am(e),t=am(t)):i?t=cm(t,e=e.a):n?e=cm(e,t=t.a):(e=e.a,t=t.a),new Ul(e.x-t.x,e.y-t.y)}function bm(t){var e=t.b;return e?t.a.Za(e):0}function dm(){F.call(this),this.reset()}function fm(t){fm.l.constructor.call(this,dm.prototype.g.Rg),this.c=t}function gm(t){return x.Object.create(t.f)}function em(t,e,i,n,r,o){this.nb=t,this.ob=e,this.pb=i,this.ue=n,this.ve=r,this.wf=o}function hm(t,e,i,n){hm.l.constructor.call(this),this.vc=t,this.sa=n,this.a=t.appendChild(this.createElement(t.ownerDocument)),this.yf(e,i)}function im(t,e,i,n){im.l.constructor.apply(this,arguments)}function jm(t,e,i,n,r,o){var a=r||"2d";jm.l.constructor.apply(this,arguments),this.b=this.a.getContext(a,o),this.c="2d"===a,this.f=a,this.uo=o}function km(t){this.hb=t}function lm(t){var e="dom";lm.l.constructor.call(this,t),C(this.hb,mm)&&(e="2d"===t.Xd()?"2d":"webgl"),this.a=e}function nm(t,e,i,n,r){if(!Ca(t.Di)||!Ca(t.Ai))throw new D(nm,0,t);if(this.b=t,!Ca(this.i=e))throw new D(nm,1,e);if(E(this.g=+i))throw new D(nm,2,i);if(!Ca(this.f=n)&&null!=n)throw new D(nm,3,n);if(!Ca(this.c=r)&&null!=r)throw new D(nm,4,r);this.id=(new af).next(),this.a=!1}function om(t,e){om.l.constructor.call(this,t),this.xc=!(!e||!e.xc),this.f={}}Wl.prototype.zc=function(){var t;if(this.m){var e=this.f,i=e.length,n=0;for(t=new Ul(0,0);--i&&n<this.s;)t=t.add($l(e[i-1],e[i])),n++}else t=this.ce();return 0!==(i=Vl(e=t))?new Ul(e.x/i,e.y/i):e},Wl.prototype.getDirection=Wl.prototype.zc,Wl.prototype.Eb=function(t){var e,i;if(t=t||zk(),this.m){var n=this.f,r=this.f.length,o=this.f[r-1];for(i=e=0;--r&&e<this.s;)i+=Vl($l(n[r],n[r-1])),e++;n=i/e}else o=this.b,n=Vl(this.ce());return n>=this.sb&&t-o.timestamp<=this.v?n>this.aa?this.aa:n:0},Wl.prototype.getSpeed=Wl.prototype.Eb,Wl.prototype.Wf=function(){return this.b?am(this.b):B},Wl.prototype.getBifocalCenter=Wl.prototype.Wf,Wl.prototype.ce=function(t){return(t=t?this.g:this.o)?$l(t,this.b):new Ul(0,0)},Wl.prototype.getMoveVector=Wl.prototype.ce,Wl.prototype.Xf=function(t){var e=1;if(this.j){var i=this.b;(t=bm(t=t?this.g:this.o))&&(i=bm(i))&&(e=i/t)}return e},Wl.prototype.getBifocalScaling=Wl.prototype.Xf,Wl.prototype.uh=function(t){if(this.j){var e=t?this.g:this.o,i=this.b;t=e.b;var n=i.b,r=0;t&&n&&(e=e.a,i=i.a,r-=Kd(n.y-i.y,n.x-i.x)*Sd-Kd(t.y-e.y,t.x-e.x)*Sd),t=r}else t=0;return t},Wl.prototype.getBifocalRotation=Wl.prototype.uh,Xl.prototype.c=!1,u(dm,F),dm.prototype.start=function(t,e){this.a&&this.reset(),E(t-e)||(this.b=+t,this.c=+e),this.a=!0},dm.prototype.reset=function(){this.a=!1,this.b=this.c=null,this.f=new em(0,0,0,0,0,0)},dm.prototype.va=function(){return this.a},dm.prototype.g={Rg:"animationupdate"},u(fm,rd),dm.prototype.set=function(t,e,i,n,r,o){var a=this.f;this.a&&(t=new em(t/1e3,e/1e3,i/1e3,n/1e3,r/1e3,o/1e3),a.oa(t)||(this.f=t,this.dispatchEvent(new fm(gm(this)))))},dm.prototype.Eb=function(){return gm(this).Eb()},dm.prototype.zc=function(){var t=gm(this),e=this.Eb()||1;return new em(t.nb/e,t.ob/e,t.pb/e,t.ue,t.ve,t.wf)},dm.prototype.u=function(){this.reset(),dm.l.u.call(this)},em.prototype.Eb=function(){return Cd(this.nb*this.nb+this.ob*this.ob+this.pb*this.pb)},em.prototype.zc=function(){var t=this.Eb()||1;return new em(this.nb/t,this.ob/t,this.pb/t,this.ue,this.ve,this.wf)},em.prototype.oa=function(t){return!!t&&this.nb===t.nb&&this.ob===t.ob&&this.pb===t.pb&&this.ue===t.ue&&this.ve===t.ve&&this.wf===t.wf},u(hm,nd),hm.prototype.L=function(){return this.a},hm.prototype.yf=function(t,e){this.size?(this.size.w=t,this.size.h=e):this.size=new Ki(t,e),this.Dl(this.a,this.a.style,t,e,this.sa)},hm.prototype.setSize=hm.prototype.yf,n=hm.prototype,n.Db=function(){return this.size},n.$a=function(){return this.sa},n.tk=!0,n.wb=function(t){t!==this.tk&&(this.a.style.display=t?"block":"none",this.tk=t)},n.ai=1,n.qc=function(t){this.ai!==t&&(this.Ak(t),this.ai=t)},n.dd=function(){return this.ai},n.ye=function(t){this.a.style.zIndex=t},hm.prototype.setZIndex=hm.prototype.ye,n=hm.prototype,n.fk=function(){return+this.a.style.zIndex},n.Zc=function(){},n.clear=function(){},n.u=function(){this.clear(),this.vc.removeChild(this.a),this.yf(0,0),this.a=this.vc=null,hm.l.u.call(this)},n.hl=0,n.Dg=function(){++this.hl},n.release=function(){--this.hl||this.B()},u(im,hm),t("H.map.render.dom.Surface",im),n=im.prototype,n.Xd=function(){return"dom"},n.createElement=function(t){return(t=t.createElement("DIV")).style.position="absolute",t.style.pointerEvents="none",t},n.Dl=function(t,e,i,n){e.width=i+"px",e.height=n+"px"},n.Ak=function(t){this.a.style.opacity=t},n.Zc=function(t,e,i){var n=this.sa,r=t.style;r[xf("transform")]="matrix(1,0,0,1,"+e/n+","+i/n+")",t.parentNode!==this.a&&(r.position="absolute",this.a.appendChild(t),this.a.style.pointerEvents="auto","auto"===getComputedStyle(t).pointerEvents&&(t.style.pointerEvents="all"),this.a.style.pointerEvents="none")},n.clear=function(t){t?this.a.removeChild(t):this.a.innerHTML=""},u(jm,hm),n=jm.prototype,n.createElement=function(t){var e=(t=t.createElement("canvas")).style;return e.position="absolute",e.top=e.left="0",t},n.Dl=function(t,e,i,n,r){t.width=wd(i,1),t.height=wd(n,1),e.width=xd(i/r)+"px",e.height=xd(n/r)+"px"},n.Ak=function(t){this.b.globalAlpha=t},n.Zc=function(t,e,i,n,r){this.c&&this.b.drawImage(t,e,i,n,r)},n.Xd=function(){return this.f},n.clear=function(t){var e,i;this.c&&(t?this.b.clearRect(e=t.left,i=t.top,t.right-e,t.bottom-i):this.a.width=this.size.w)},n.u=function(){this.a.width=this.a.height=0,this.b=y,jm.l.u.call(this)},u(km,nd),km.prototype.tb=function(){return this.hb},km.prototype.getLayer=km.prototype.tb,km.prototype.Kn=function(){return this.xb},km.prototype.getSurface=km.prototype.Kn,km.prototype.ld=function(t){var e=this.xb;t!==e&&(this.xb=t,t.Dg(),e&&e.release())},km.prototype.setSurface=km.prototype.ld,km.prototype.u=function(){this.xb.release()},km.prototype.ie=function(){},km.prototype.render=km.prototype.V,u(lm,km),lm.prototype.V=function(t,e,i,n,r,o,a,s){a=this.hb;var u=this.xb,l=!(C(u,jm)&&"2d"===u.Xd());return n>=a.min&&n<=a.max?(l&&u.wb(!0),a.V(u.L(),{boundingBox:t,zoom:n,screenCenter:e,priorityCenter:o,projection:i,cacheOnly:r,size:u.Db(),pixelRatio:u.$a(),cameraMatrix:s})):(l&&u.wb(!1),jk.DONE)},lm.prototype.ie=function(){return this.a},t("H.util.animation.Animation",nm),nm.prototype.start=function(){var t=this;this.Rc=zk(),this.a=!0;var e=this.Rc;this.b.Di((function(){if(t.a){var i=zk(),n=i-t.Rc,r=n/t.g,o=!1;1<=r&&(r=1,o=!0),t.i(t.c?t.c(r):r,n,i-e,i),e=i,o&&t.stop()}else t.stop()}))},nm.prototype.start=nm.prototype.start,nm.prototype.stop=function(t){this.a=!1,this.b.Ai(),t||this.f&&this.f(this)},nm.prototype.stop=nm.prototype.stop,nm.prototype.va=function(){return this.a},nm.prototype.isRunning=nm.prototype.va,u(om,km),om.prototype.ld=function(t){om.l.ld.call(this,t),this.g=t.vc.ownerDocument},om.prototype.setSurface=om.prototype.ld;var pm=function(t,e){return C(e=e.ba(),kh)?e.pa:(t[0]=e,t)}.bind(null,[]);function qm(t,e){var i=t[1].ed(),n=e[1].ed();return Qg(i,n,!0)||t[5]-e[5]||Qg(i,n,!1)}function rm(t,e){rm.l.constructor.apply(this,arguments),this.c=0,this.a=[],this.b=A(this.b,this)}om.prototype.V=function(t,e,i,n,r,o,a){var s,u,l,h,c=this.hb;if(this.m=e=this.f,this.f=i={},n>=c.min&&n<=c.max){var f=this.Nj(t,n,r,o),p=f.markers;if(t=p.length){for(n=[],r=this.xb,o=0;o<t;o++){c=p[o];var d=pm(c);for(s=d.length;s--;)(u=a(d[s]))&&((h=e[l=c.gb()+"_"+s])?delete e[l]:h={Mk:c},i[l]=h,n.push([h,c,c.Cb(),r,u.x,u.y]))}for(n.sort(qm),t=n.length,o=0;o<t;o++)this.jl.apply(this,n[o])}}return!f||f.requested&&f.requested===f.total||!f.requested&&p.length===f.total?jk.DONE:jk.PENDING},om.prototype.render=om.prototype.V,om.prototype.Ga=function(){},om.prototype.getObjectsAt=om.prototype.Ga,u(rm,om),t("H.map.render.dom.MarkerRenderer",rm),rm.prototype.Nj=function(){return this.hb.Kc.apply(this.hb,arguments)},rm.prototype.V=function(t,e,i,n,r,o,a){this.b(),this.j=0;var s,u=rm.l.V.apply(this,arguments),l=this.xb,h=this.m;for(s in h)sm(this,l,h[s]);return 0===this.a.length&&u?jk.DONE:jk.PENDING},rm.prototype.render=rm.prototype.V,rm.prototype.ld=function(t){rm.l.ld.call(this,t),this.i=t.$a()},rm.prototype.setSurface=rm.prototype.ld,rm.prototype.b=function(){for(var t,e,i,n=this.a.length;n--;)t=(i=this.a[n]).Ef,(e=i.Ef.Cb()).mi(i,e,t);this.a.length=0},rm.prototype.jl=function(t,e,i,n,r,o){var a,s=n.$a(),u=e.Pb();r*=s,o*=s,this.xc||(r=xd(r),o=xd(o)),t.detail&&(u.me(t.co)?sm(this,n,t):a=t.detail),a||(t.detail=a=i.Qj(this.g),this.c++,Ca(i.mi)&&this.a.push(a)),t.co=u.a,a.style.zIndex=this.j++,a.Ef=e,n.Zc(a,r,o,0,0)};var tm,um="pointer-events",vm,wm;function sm(t,e,i){e.clear(e=i.detail),delete e.Ef,t.c--,(i=(t=i.Mk).Cb()).b&&i.b(e,i,t)}function mm(t,e){var i=e||{},n=i.contextType;if(i=i.contextAttributes,mm.l.constructor.call(this,e),wc(t,"Function",mm,0,"invalid render callback"),n){if(-1===xm.indexOf(n))throw new D(mm,1,"invalid context type");this.f=n}i&&(this.m=i),this.j=t}Ye&&(Ye&&Yc!==y&&(Yc=(wm=/(MSIE\s+|rv:)([^\);]+)(\)|;)/.exec(navigator.userAgent))?+wm[2]:y),vm=Yc,9===vm?um="display":10===vm&&(um="visibility")),tm=um,rm.prototype.Ga=function(t,e,i){var n,r,o,a,s,u=this.i,l=ff;if(this.c){t/=u,e/=u;var h=(u=this.g).documentElement,c=this.xb.L(),f=c.getBoundingClientRect();for(t+=f.left,e+=f.top;(r=o=u.elementFromPoint(t,e))&&r!==c&&r!==h&&o!==p;){for(;(a=r.parentNode)&&(!Ca(a.contains)||!a.contains(c));)r=a;if(a===c&&(r!==o||"svg"!==r.nodeName)&&0>l.indexOf(s=r.Ef)&&(l===ff&&(l=[]),l.push(s),i))break;n||(n=[]);var p=r.style;n.push({Aj:p.getPropertyValue(tm),bo:p.getPropertyPriority(tm),style:p}),p.setProperty(tm,"visibility"===tm?"hidden":"none","important"),p=o}if(n)for(e=n.length;e--;)(t=n[e]).style.removeProperty(tm),zc(t.Aj)&&t.style.setProperty(tm,t.Aj,t.bo)}return l},rm.prototype.getObjectsAt=rm.prototype.Ga,rm.prototype.ie=function(){return"dom"},rm.prototype.u=function(){this.a.length=0;var t,e=this.xb,i=this.f;for(t in i)sm(this,e,i[t]);this.xb.B(),rm.l.u.call(this)},u(mm,aj),t("H.map.layer.CanvasLayer",mm);var xm=["2d","webgl","webgl2","experimental-webgl"];function ym(t,e){ym.l.constructor.call(this,e),wc(t,"Function",ym,0,"invalid render callback"),this.c=t}function zm(t,e){if(E(this.b=+t))throw new D(zm,0,t);this.a=0,e&&this.yl(e)}function Am(t,e){this.a=t,this.b=e}function Bm(t,e,i){var n=[],r={vc:t.a,width:e.w,height:e.h,sa:t.b};for(t=0;t<i.length;t++){var o=(e=i[t]).ie(),a={};Wa(a,r);var s=e.xb;switch(o){case"2d":if(C(e.tb(),mm)&&(a.ih=e.tb().m),o=h&&"2d"===h.Xd()){o=a.ih;var u=h.uo;o=!(u!==o&&(u&&!o?u.alpha||u.willReadFrequently:o&&!u?o.alpha||o.willReadFrequently:!o.alpha!=!o.alpha||!u.willReadFrequently!=!o.willReadFrequently))}if(o)var l=!1;else if(s&&!l){var h=s;l=!1}else h=new jm(a.vc,a.width,a.height,a.sa,"2d",a.ih),l=!0;break;case"dom":h=s||new im(a.vc,a.width,a.height,a.sa),l=!s;break;default:h=s||new jm(a.vc,a.width,a.height,a.sa,e.tb().Xd(),a.ih),l=!s}n[n.length-1]!==h&&(h.ye(n.length),n.push(h)),e.ld(h)}return n}mm.prototype.f="2d",mm.prototype.Xd=function(){return this.f},mm.prototype.V=function(t,e){return this.c&&this.c.canvas===t||(this.c=t.getContext(this.f,this.m)),this.j(this.c,e)},mm.prototype.u=function(){mm.l.u.call(this),this.c=B},u(ym,aj),t("H.map.layer.DomLayer",ym),ym.prototype.V=function(t,e){return this.c(t,e)},t("H.util.kinetics.KineticMove",zm),zm.prototype.yl=function(t){return this.a=t,this},zm.prototype.setInitialSpeed=zm.prototype.yl,zm.prototype.Rm=function(){return Math.abs(this.a/this.b)},zm.prototype.getDuration=zm.prototype.Rm,zm.prototype.We=function(t){return this.a+this.b*t},zm.prototype.getCurrentSpeed=zm.prototype.We,zm.prototype.Mm=function(t){return this.a*t+this.b*t*t/2},zm.prototype.getCurrentPath=zm.prototype.Mm,t("H.util.events.listenOnce",Ce),t("H.util.events.dispatchEvent",(function(t,e){return t.dispatchEvent(e)})),t("H.util.events.fireListeners",(function(t,e,i,n){return le(t)?t.td(e,i,n):Le(t,e,i,n)})),t("H.util.events.listen",Be),t("H.util.events.unlisten",Je);var Cm=Me;function sl(){sl.l.constructor.call(this),this.c={},this.b={position:new Wf(0,0),zoom:0,heading:180,incline:0,tilt:0,bounds:new O(Gg([90,-180,90,0,90,180,-90,180,-90,-180]))}}Me=function(t,e){var i,n,r=!0,o=e[e.currentTarget===e.target?"AT_TARGET":t.capture?"CAPTURING_PHASE":(i=!0,"BUBBLING_PHASE")];return(!i||"pointerenter"!==(n=e.type)&&"pointerleave"!==n)&&(e.eventPhase=o,r=Cm(t,e),i&&t.src&&t.src.Qb&&null===t.src.Qb()&&delete e.eventPhase),r},u(sl,F),t("H.map.ViewModel",sl),sl.prototype.a={Ea:"update",Fe:"sync"},sl.prototype.$b=function(t,e){if(!t)throw new D(this.$b,0,t);var i=t[Dm];if(tc(i)&&!Yf(i))throw new D(this.$b,0,Dm);if(tc(i=t[Em])&&E(+i))throw new D(this.$b,0,Em);if(tc(i=t[Fm])&&!C(i,Vf))throw new D(this.$b,0,Fm);return i=Gm(t=x.Object.assign({},t),this.c,this.b),Hm(this,this.c,t),this.dispatchEvent(new Im(this.c,i,e)),this},sl.prototype.setLookAtData=sl.prototype.$b,sl.prototype.mb=function(){var t={};return t[Dm]=Zf(this.b[Dm]),Hm(this,t,this.b,!0),t},sl.prototype.getLookAtData=sl.prototype.mb;var Dm="position",Em="zoom",Fm="bounds",Jm={oj:Dm,rj:Em,ij:"heading",qj:"tilt",jj:"incline",fj:Fm},Km=Object.keys(Jm).map((function(t){return Jm[t]}));function Hm(t,e,i,n){t.i={},t.g={},t.f=[];for(var r,o,a,s=t.m,u=t.j,l=Km.length;l--;)if(a=i[r=Km[l]],null==(o=e[r])||!n)if(null!=a){tc(s)&&s.call(t,r,o,a);var h,c=r;if((h="position"!==r)||(h=!(!(h=a)||E(h.lat)||E(h.lng))),e[c]=h?a:Zf(a),tc(u)){switch(r){case"position":o=a&&o&&(a.lat!==o.lat||a.lng!==o.lng);break;case"bounds":o=a&&o&&!a.oa(o);break;default:o=a!==o}o&&u.call(t,r)}}else delete e[r]}sl.prototype.m=function(t,e,i){this.i[t]=e,this.g[t]=i},sl.prototype.j=function(t){this.f.push(Lm[t])};var Lm=Km.reduce((function(t,e){return t[e]=Si[e.toUpperCase()],t}),{});function Gm(t,e,i){var n=0;return["tilt","incline","heading",Em].forEach((function(r){if(E(t[r])){var o=E(e[r])?i[r]:e[r];t[r]=o}else n|=Lm[r]})),[Dm,Fm].forEach((function(r){t[r]?n|=Lm[r]:t[r]=e[r]||i[r]})),n}function Mm(t,e){return t|e}function Im(t,e,i){Im.l.constructor.call(this,sl.prototype.a.Ea,t,null,e),this.b=this.animate=!!i}function S(t,e,i,n){if(S.l.constructor.call(this,t,e,i,n),this.Aa=new Dk(100),this.fa=new I(0,0),this.Ne=!!n.enableSubpixelRendering,this.kb=Nm,this.o=new Wl,this.i=n=new dm,this.dc=A(this.dc,this),n.addEventListener(n.g.Rg,this.dc),n=t.element,this.N=t=n.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,n.insertBefore(t,n.firstChild),this.Pd=new Am(this.N,this.sa),this.ma=e.mb().position,!(e=x.H.gl))throw new Xc(S,'"H-webgl" module is missing');for(this.a=new Cl({viewport:this.g,vc:this.N,devicePixelRatio:this.sa,Tk:A(this.ha,this)}),e.WorkerBroker.addTarget("model",cj),t=0,n=(e=this.c.Na()).length,this.j={Yc:[],ja:[]},this.f=e;t<n;t++){var r=e[t];this.jf(t,r),vl(this,r,!0)}this.Jb(),this.ec=A(this.ec,this),this.ci=A(this.ci,this),this.Fa=A(this.Fa,this),i.addEventListener(aj.prototype.b.Ce,this.ec),this.A=Om,this.zoom=wl(this,this.O.vb()),this.Jb(),this.U()}sl.prototype.bb=function(t){var e={},i={};Hm(this,this.b,t),this.c={},e.lookAt=this.g,i.lookAt=this.i,t=(t=this.f).length?t.reduce(Mm):0,this.dispatchEvent(new Ri(this.a.Fe,e,i,t))},sl.prototype.synchronize=sl.prototype.bb,sl.prototype.zf=function(t,e){if(E(t=+t))throw new D(this.zf,0,Em);this.$b({zoom:t},e)},sl.prototype.vb=function(){return this.b.zoom},sl.prototype.tc=Nc,sl.prototype.startControl=sl.prototype.tc,sl.prototype.control=Nc,sl.prototype.control=sl.prototype.control,sl.prototype.Ab=Nc,sl.prototype.endControl=sl.prototype.Ab,u(Im,Ri),u(S,ql),t("H.map.render.webgl.RenderEngine",S),S.prototype.mb=function(){var t=this.ma;return xl(this,{position:{vk:t.vk,xk:t.xk},zoom:this.zoom,tilt:this.Nl,heading:this.heading})},S.prototype.ec=function(t){((t=(t=t.target.ga())&&t.ub())&&t.getState())===Qh.INIT?t.load():(Fl(this.a),Hl(this.a,this.c),this.ha())},S.prototype.type=Al.WEBGL,S.prototype.type=S.prototype.type;var Om=2;function Pm(t,e,i){return(e=i-e)<(t=Dd(2,8+t.zoom))/2?e:e-t*i/Ad(i)}function Qm(t,e,i){function n(t){return r[t]+Tl(r[t],e[t])/2}if(!(i&Si.POSITION||i&Si.BOUNDS))return null;var r=Gl(t.a).getLookAtData();i=r.position;var o=e.position,a=e.bounds;return qi(r.bounds,o.lat,o.lng,!1)||a&&qi(a,i.lat,i.lng,!1)?null:((i=Rm(t,{tilt:n("tilt"),heading:n("heading"),incline:0,bounds:eg([i,o])})).zoom=wl(t,i.zoom-.5),delete i.bounds,i)}function Sm(t,e,i,n){return t=(t=t.getCapabilities().lookAt[n]).max-t.min,Ad("zoom"===n?i[n]-e[n]:Tl(e[n],i[n]))/t||0}function Tm(t,e,i){return Yd(3e3*(t=wd(8*Sm(t,e,i,"zoom"),Sm(t,e,i,"heading"),Sm(t,e,i,"tilt")/2)),300,4e3)}function Rm(t,e){return Xm(e),Gl(t.a).getBestLookAtData(e)}function Xm(t){var e=t.bounds;!e||e instanceof O||(t.bounds=ni(e.G()))}function Zm(t,e,i){Gl(t.a).setLookAtData(e),Fl(t.a),Ym(t),t.ha(),i&&setTimeout(i,0)}function Wm(t,e,i,n){var r=Gl(t.a).getLookAtData(),o=new Sl(r,e);0!==o.a.tilt+o.a.heading+o.a.zoom+o.c?$m(t,(function(e){for(var i in o.a)if(0!==o.a[i]){var n=o.i[i](e);r[i]+=o.a[i]*(n-o.g[i]),o.g[i]=n}return 0!==o.c&&(r.position=o.b.Ng(o.j,o.c*o.i.position(e),!0)),Zm(t,r)}),i,(function(){return Zm(t,e,n)})):Zm(t,e,n)}function an(t,e){t.Aa.qa((function(t,i){return i.Qb()===e}))}function bn(t){return!(C(t,ym)||C(t,mm))}function Vm(t,e){var i=e.position;return xl(t,{zoom:wl(t,e.zoom),position:new Wf(i.lat,i.lng),tilt:e.tilt,heading:e.heading,bounds:e.bounds})}function Ym(t){var e=Gl(t.a).getLookAtData();t.zoom=e.zoom,t.ma=e.position}function dn(t,e){return new I((t=Gl(t.a).geoToMeters(e)).x/40075016.68557849+.5,1-(t.y/40075016.68557849+.5))}function en(t,e){return e.sub(dn(t,t.ma)).scale(Dd(2,8+t.zoom))}function fn(t,e,i,n,r,o,a,s){var u,l,h,c=0,f=function(){0==--c&&o(r)};if(s&&s.features)for(c=l=s.features.length,h=0;h<l;h++){var p=s.features[h],d=p.id;if(u=t.a.a.sources[p.source_name]){var g=u.provider,y=g.ak();if(y===Zj.SOURCE){var v=p.source_layer;if("overlays"===v)gn(t,e,i,n,r,u,p.properties.overlays_config);else if(u=u.getMapObjectById(d))if("markers"!==v)r.push(u);else if(hn(t,e,i,u))r.push(u);else if(n&&!a){var m=!0;Kl(t.a,{x:e,y:i},{radius:jn,top_most_only:!1},(function(a){fn(t,e,i,n,r,o,!0,a)}))}c--}else y===Zj.FEATURE?(v=p.tile.coords,(m=g.getFeatureProxy(p.properties,v,(function(t){if(t){for(var e,i=t;i&&(e=i.Qb())&&e!==g;)i=e;e||i.ka(g),r.push(t)}f()})))||((u=t.Aa.get(d))||((u=new Kg(p)).ka(g),t.Aa.add(d,u,1)),r.push(u),c--)):y===Zj.PROVIDER&&(m=!0,g.kl(p,!1).then((function(t){t&&(!(t instanceof Ni)||hn(this,e,i,t))&&r.push(t),f()}),(function(){f()}),t))}}y&&(m||0!==c)||o(r)}function gn(t,e,i,n,r,o,a){var s;for(t=t.Wa(e,i),e=a.length;e--&&(!(s=o.getMapObjectById(a[e].id))||0<=r.indexOf(s)||!s.ba().pd(t)||(r.push(s),!n)););}function hn(t,e,i,n){var r,o=n.Cb(),a=o.g,s=!a;if(a)if(e+=(o=o.ud()).x,i+=o.y,C(o=n.ba(),Ji))for(r=(n=o.pa).length;r--&&!s;)o=t.Fa(n[r]),s=a.hg(e-o.x,i-o.y,0)!==ae.NONE;else o=t.Fa(o),s=a.hg(e-o.x,i-o.y,0)!==ae.NONE;return s}function kn(t,e,i,n,r){for(var o,a=e.length;a--&&!((o=e[a])&&o.Ga&&(t=t.concat(o.Ga(i,n,r)),t.length&&r)););return t}function cn(t){return{w:(t=t.yb[2]).right-t.left,h:t.bottom-t.top}}function ln(t){t.b&&t.b.va()||(El(t.a)||zk()-t.Xa<t.kb)&&!t.v?t.Vd||(t.Vd=Jk(t.ci)):(t.v&&(t.te(),mn(t)),t.A=Om)}function mn(t,e){t.od||setTimeout(A(t.dispatchEvent,t,{type:t.zk.pj,target:e||t}),1)}function on(t,e,i){Gl(t.a).applyPxOffset([e,i]),Ym(t),t.fa.set(0,0),Fl(t.a),t.ha()}function pn(t,e,i,n){Gl(t.a).setLookAtData({zoom:e},Cc(i)&&Cc(i)?[i,n]:B),Ym(t),Fl(t.a),t.ha()}function Um(t){nn(t),t.i.va()&&t.Ab(!0),t.o.va()&&t.Bb(!0)}function qn(t,e){if(e){var i={};i.mf=e.power,i.Oe=e.ease,i.duration=e.duration,t.s=i}}function sn(t,e){var i=en(t,dn(t,e.position)),n=i.y;i=i.x;var r=e.zoom,o=en(t,dn(t,t.ma));e=o.y;var a=o.x;o=t.zoom;var s=t.i.Eb(),u=t.i.b,l=t.i.c,h=0;if(i=Pm(t,a,i),e=Cd((i-=a)*i+(n-=e)*n+(o=r-o)*o),0!==s&&0!==e){var c=i/e,f=n/e,p=o/e,d=s*s/(2*e);$m(t,(function(e,i){var n;1!==e?((n=p*(i=(e=s*i-d*i*i/2)-h))&&(n=wl(t,t.zoom+n),pn(t,n,u,l)),on(t,xd(c*i),xd(f*i)),h=e):(pn(t,wl(t,r),u,l),t.ha())}),2*e/s)}}function rn(t,e,i){i=i||0;var n=t.i,r=Gl(t.a),o=r.getLookAtData();e.pb&&pn(t,wl(t,o.zoom+e.pb*i),n.b,n.c),r.setLookAtData({heading:zl(t,o.heading+e.ve*i),tilt:yl(t,o.tilt+e.ue*i)}),Ym(t),on(t,e.nb*i,e.ob*i)}function $m(t,e,i,n,r){t.b&&t.b.va()&&t.b.stop(!0),t.b=new nm(t,e,i,n,r),t.b.start()}function nn(t){t.b&&t.b.va()&&t.b.stop(!0)}S.prototype.getState=function(){return this.A},S.prototype.getState=S.prototype.getState,S.prototype.od=!1,S.prototype.bh=function(t){var e=this,i=t.newValue,n=t.modifiers,r=Gl(this.a);Um(this),this.fa.set(0,0);var o=Vm(this,i);if(Km.forEach((function(e){n&t[e.toUpperCase()]||delete o[e]})),t.b){r=Gl(this.a).getLookAtData();var a=Rm(this,o);i=Qm(this,a,n);var s=function(){return e.od=!1};if(delete a.bounds,this.od=!0,i){r=Tm(this,r,i);var u=Tm(this,i,a);Wm(this,i,r,(function(){return Wm(e,a,u,s)}))}else i=Tm(this,r,a),Wm(this,a,i,s)}else Xm(o),r.setLookAtData(o);Ym(this),Fl(this.a),this.ha()},S.prototype.Fg=function(){},S.prototype.setAnimationDuration=S.prototype.Fg,S.prototype.sh=function(){},S.prototype.getAnimationDuration=S.prototype.sh,S.prototype.Gg=function(){},S.prototype.setAnimationEase=S.prototype.Gg,S.prototype.th=function(){},S.prototype.getAnimationEase=S.prototype.th,S.prototype.Cg=function(){},S.prototype.resetAnimationDefaults=S.prototype.Cg,n=S.prototype,n.Rk=function(t){an(this,t.target.ga()),Fl(this.a),this.ha()},n.jf=function(t,e){S.l.jf.call(this,t,e),bn(e)&&(Fl(this.a),(t=(t=e.ga())&&t.ub())&&t.getState()===Qh.INIT&&t.load())},n.oi=function(t,e,i){var n;if(this.Xa=zk(),an(this,e.ga()),e.requestDomMarkers||C(e,mm)||C(e,ym)){var r=this.j.ja;for(n=r.length;n--;){var o=r[n];if(o.tb()===e){r.splice(n,1),o.B();break}}}bn(e)&&Hl(this.a,this.c),this.f=this.c.Na(),0===t&&(vl(this,e,!1),this.Jb()),Bm(this.Pd,cn(this),this.j.ja.filter(tc)),this.te(),i||this.ha()},n.pi=function(){this.Jb()},n.Jb=function(){S.l.Jb.call(this);var t=this.getCapabilities().lookAt.zoom;Gl(this.a).setZoomConstraints(wd(t.min,this.Pg),vd(t.max,this.Tg))},n.Mh=function(t,e){var i;if(e){if(t={xc:this.Ne,ib:this.ib},e.V?(C(e,mm)||C(e,ym))&&(i=new lm(e)):e.requestDomMarkers&&(i=new rm(e,t)),i){this.j.ja.push(i);var n=this.c.Na();this.j.ja.sort((function(t,e){return n.indexOf(t.hb)-n.indexOf(e.hb)})),Bm(this.Pd,cn(this),this.j.ja.filter(tc))}bn(e)&&Hl(this.a,this.c)}this.f=this.c.Na()},n.Fa=function(t){return Gl(this.a).geoToPixel(t)},S.prototype.geoToScreen=S.prototype.Fa,S.prototype.Wa=function(t,e){return Gl(this.a).xyToGeo(t,e)},S.prototype.screenToGeo=S.prototype.Wa,S.prototype.Eg=function(t,e){return t=this.Wa(t,e),(e=this.O.mb()).position=t,e},S.prototype.Ga=function(t,e,i,n){var r=this,o=[];o=kn(o,this.j.ja,t*this.sa,e*this.sa,i),i&&o.length?n(o):this.a.a.initialized?Kl(this.a,{x:t,y:e},{radius:jn,top_most_only:i},(function(a){fn(r,t,e,i,o,n,!1,a)})):n(o)},S.prototype.getObjectsAt=S.prototype.Ga,S.prototype.W=y,S.prototype.U=function(){var t=this.j.ja.length;rl(this,this.sa),this.fa.set(0,0);var e=cn(this),i=e.w,n=e.h;for(this.a.a.handleViewportUpdate();t--;){var r=(e=this.j.ja[t].xb).Db();r.w===i&&r.h===n||e.yf(i,n)}this.W=new Ki(i,n),Fl(this.a),this.ha()},S.prototype.getCapabilities=function(){return Bl},S.prototype.getCapabilities=S.prototype.getCapabilities,n=S.prototype,n.Vd=0,n.te=function(){this.j.Yc.length=0},n.ci=function(){this.Vd=0,this.C&&this.C.before();var t=Gl(this.a),e=t.getLookAtData(!1),i=t.getLookAtData(!0);t=this.g.center.clone(),i=i.bounds.G();var n=this.zoom,r=this.fa,o=this.f,a=o.length;for(this.kb=Nm;a--;){var s=o[a];C(s,aj)&&s.ga()&&s.ga().nf(i,n)}this.v=this.a.V(),this.O.bb(e),e=this.v,a=(o=this.j).ja.length;var u,l=!0;for(u=0;u<a;u++){s=o.ja[u];var h=o.Yc;if(s){var c=s.V(i,t,void 0,n,!1,r,this.Fa,this.a.a.getCameraMatrix());c===jk.ACTIVE&&(this.kb=1/0),c!==jk.DONE||h[u]||(mn(this,s.tb()),h[u]=!0),h[u]||(l=!1)}}this.v=e&l,this.W&&(this.g.bb(this.W),this.W=y),this.b&&this.b.va()&&this.Sg(),this.C&&this.C.after(),ln(this)},n.u=function(){var t=this.c.Na()[0],e=this.g;Kk(this.Vd),nn(this),t&&vl(this,t,!1),this.j.ja.filter(tc).forEach((function(t){t.B()})),e.element&&e.element.removeChild(this.N),this.N=null,this.A=3,this.a.B(),S.l.u.call(this)},n.ha=function(){this.Xa=zk(),this.A===Om&&(this.v=!1,this.A=1,ln(this))},n.Ae=function(t,e,i){pn(this,t=wl(this,wl(this,t)),e,i)},S.prototype.zoomAt=S.prototype.Ae,S.prototype.uc=function(t,e){var i=!!(e||t&(ul.HEADING|ul.TILT));Um(this),qn(this,e),this.o.start(t,i),Gl(this.a).setPanning(!0)},S.prototype.startInteraction=S.prototype.uc,S.prototype.lc=function(t,e,i,n,r){var o=this.o,a=!1;if(o.va()){var s=Gl(this.a),u=s.getLookAtData(),l=this.g.center;l=[l.x,l.y],e=o.store(t,e,i,n,r),i=o.Wf(),t=o.ce(),r=this.o.Xf(),n=this.o.uh(),o.c&&(o.Hc(ul.TILT)&&(s.setLookAtData({tilt:yl(this,u.tilt+t.y/this.g.height*-180)},l),a=!0),e&&1!==r&&o.Hc(ul.ZOOM)&&(a=o.Wf(),pn(this,wl(this,r=Bd(Dd(2,this.zoom)*r)/Ld),a.x,a.y),a=!0),o.Hc(ul.COORD)&&0<Vl(t)&&(on(this,-t.x,-t.y),a=!0),o.Hc(ul.HEADING)&&(e?s.setLookAtData({heading:u.heading+zl(this,n)},[i.x,i.y]):t.x&&s.setLookAtData({heading:zl(this,u.heading+t.x/this.g.width*360)},l),a=!0),a&&(Fl(this.a),this.ha()))}},S.prototype.interaction=S.prototype.lc,S.prototype.Bb=function(t){var e=this;if(this.o.va()&&!t){if(this.s){t=this.o.Eb();var i=this.o.zc(),n=this.s.duration,r=(this.s.mf||1)*t,o=new zm(-r/(0<n?n:1),r);!E(i.x)&&!E(i.y)&&0<r&&e.o.Hc(ul.COORD)&&$m(this,(function(t){r=o.We(t*n),E(r)||on(e,xd(-i.x*r),xd(-i.y*r))}),n,void 0,this.s.Oe)}this.s=null,this.o.clear()}Gl(this.a).setPanning(!1),this.ha()},S.prototype.endInteraction=S.prototype.Bb,S.prototype.tc=function(t,e,i){Um(this),this.i.start(e,i),qn(this,t),Gl(this.a).setPanning(!0)},S.prototype.startControl=S.prototype.tc,S.prototype.control=function(t,e,i,n,r,o){for(var a,s=0;s<arguments.length;s++)if((a=+arguments[s])!=a)throw new D(this.control,s,a);this.i.va()&&this.i.set(t,e,i,n,r,o)},S.prototype.control=S.prototype.control,S.prototype.Ab=function(t,e){var i,n=this;if(this.i.va()){nn(this);var r=zk(),o=r-this.za;if(1<=o&&rn(this,gm(this.i),o),!this.s||t||e)"function"==typeof e&&(e(t=(t=Gl(this.a)).getLookAtData()),sn(this,t));else{e=this.i.Eb();var a=this.i.zc(),s=this.s.duration,u=(this.s.mf||1)*e,l=new zm(-u/(0<s?s:1),u);!E(a.nb)&&!E(a.ob)&&0<u&&$m(this,(function(t,e,o,h){r&&(o=h-r,r=0),u=l.We(t*s)*o,E(u)||((i=a.pb*u)&&pn(n,wl(n,n.zoom+i),n.i.b,n.i.c),on(n,xd(a.nb*u),xd(a.ob*u)))}),s,void 0,this.s.Oe)}this.i.reset(),Gl(this.a).setPanning(!1),this.ha()}},S.prototype.endControl=S.prototype.Ab,S.prototype.dc=function(t){var e=this,i=t.c;this.fa.set(0,0),i.nb||i.ob||i.pb||i.ue||i.ve||i.wf?(this.za=zk(),$m(this,(function(t,n,r,o){e.za=o,rn(e,i,r)}),Td),this.ha()):nn(this)},S.prototype.nh=function(){},S.prototype.enter=S.prototype.nh,S.prototype.Vf=function(t){tl(this.N,t)},S.prototype.exit=S.prototype.Vf,S.prototype.capture=function(t,e,i,n){var r=this;return Ll(r.a).then((function(o){var a=r.N.ownerDocument.createElement("canvas"),s=r.sa,u=a.getContext("2d"),l=r.a.$a()/s,h=(i-t)*s;return s*=n-e,a.width=h,a.height=s,u.drawImage(o,t*l,e*l,h*l,s*l,0,0,h,s),a}))},S.prototype.ym=function(t){return Gl(this.a).geoToMeters(t)},S.prototype.geoToMeters=S.prototype.ym,S.prototype.Eo=function(t){return Gl(this.a).metersToGeo(t)},S.prototype.metersToGeo=S.prototype.Eo;var Nm=5e3,jn=3.5;function T(t,e,i){var n={};if(T.l.constructor.call(this),this.J=A(T.prototype.J,this),this.i=tn(i,T),this.b=i=new sl,this.N=!1,i.addEventListener(i.a.Fe,this.za,!1,this),!C(t,Element))throw new D(T,0,t);var r=(i=this.S=t.ownerDocument.createElement("div")).style;if(r.position="relative",r.height=i.style.width="100%",r.overflow="hidden",r.webkitTapHighlightColor="transparent","transparent"!==r.webkitTapHighlightColor&&(r.webkitTapHighlightColor="rgba(0,0,0,0)"),t.appendChild(i),this.ya=new kk(this.S,this.i),this.ya.addEventListener(this.ya.a.Fe,this.za,!1,this),(t=this.a=new cj(this.i.layers)).addEventListener(t.b.Ee,this.U,!1,this),t.addEventListener(t.b.Be,this.U,!1,this),t.addEventListener(t.b.De,this.U,!1,this),!this.f&&un(this),this.c=null,this.a.add(e,0),this.g=this.O(null!=this.i.engineType?this.i.engineType:Vj.WEBGL,this.i),this.v=A(this.v,this),this.C=A(this.C,this),(e=this.i.imprint)!==B&&"object"!=typeof e)throw new D(T,1,"imprint");this.m=null===e?e:new lj(this,e),e=this.i.autoColor,this.fa=e===B||!!e,vn(this),(e=this.i.zoom)&&(n.zoom=e),(e=this.i.bounds)&&(n.bounds=e),(e=this.i.center)&&(n.position=e),this.b.$b(n)}function tn(t,e){if(t){var i=t.pixelRatio;if(i===B)t.pixelRatio=Se();else if(!(0<i))throw new D(e,0,"pixelRatio: "+i)}else(t={}).pixelRatio=Se();return t.renderBaseBackground||(t.renderBaseBackground={lower:3,higher:2}),t}function vn(t){t.m&&t.fa&&t.m.Li({invert:t.c&&t.c.nm})}function wn(t,e,i){t.dispatchEvent(i?new Ri(t.o.kj,i.newValue,i.oldValue,i.modifiers):t.o.kj+e)}function xn(t){hj.call(this,t)}function un(t){t.j=new N({max:24}),t.f=new ml(t.j,t.i),t.a.add(t.f)}u(T,F),t("H.Map",T),T.prototype.u=function(){this.fa=!1,this.m&&this.m.B(),this.g.dispose(),this.b.B(),this.ya.B(),this.f.B(),this.j.B(),this.a.B();var t=this.S;t.parentNode.removeChild(t),this.S=null,F.prototype.u.call(this)},T.prototype.L=function(){return this.S},T.prototype.getElement=T.prototype.L,T.prototype.$a=function(){return this.i.pixelRatio},T.prototype.getPixelRatio=T.prototype.$a,T.prototype.U=function(t){var e=t.added,i=t.removed;e&&e.ga()&&e.ga().ka(this),i&&i.ga()&&i.ga().ka(null),i===this.f&&(this.j=this.f=null),i===this.c&&(this.c=null),0===t.idx&&(this.dispatchEvent(new Ng(this.o.Ff,this.c=t.type!==this.a.b.De?e:0<this.a.a.length?this.a.get(0):y,t.type!==this.a.b.Be?i:1<this.a.a.length?this.a.get(1):y)),vn(this))},T.prototype.za=function(t){t.modifiers&&(this.N||(wn(this,"start"),this.N=!0),wn(this,"",t),this.W&&x.clearTimeout(this.W),this.W=x.setTimeout(this.C,333))},T.prototype.C=function(){wn(this,"end"),this.N=!1},T.prototype.Hg=function(t,e){return this.g.getCapabilities().lookAt&&this.b.$b({position:t},!!e),this},T.prototype.setCenter=T.prototype.Hg,T.prototype.fb=function(){var t=this.b.mb();return t?t.position:y},T.prototype.getCenter=T.prototype.fb,T.prototype.zf=function(t,e){return this.b.zf(t,!!e),this},T.prototype.setZoom=T.prototype.zf,T.prototype.vb=function(){return this.b.vb()},T.prototype.getZoom=T.prototype.vb,T.prototype.Ae=function(t,e,i){this.g.zoomAt(t,e,i)},T.prototype.zoomAt=T.prototype.Ae,T.prototype.Un=function(){return this.ya},T.prototype.getViewPort=T.prototype.Un,T.prototype.Tn=function(){return this.b},T.prototype.getViewModel=T.prototype.Tn,T.prototype.jn=function(){return this.a},T.prototype.getLayers=T.prototype.jn,T.prototype.dn=function(){return this.m},T.prototype.getImprint=T.prototype.dn,T.prototype.capture=function(t,e,i,n,r,o){function a(t,e){d?t.cancel():(l.save(),e.capture(u,f,(function(e){l.restore(),t.done(e)}),(function(e){t.done(null,e),s(null)})))}function s(e){d||(d=!0,t(e))}var u,l,h=this.ic(),c=h.getCapabilities(),f=this.i.pixelRatio,p=this.ya,d=!1,g=this;if(!Ca(t))throw new D(this.capture,0,t);i=i||0,n=n||0,r=r||p.width,o=o||p.height;var v=wd(0,vd(i,r)),m=wd(0,vd(n,o));i=vd(p.width,wd(i,r)),n=vd(p.height,wd(n,o)),c.capture?h.capture(v,m,i,n).then((function(t){var i=g.m,n=e||[];l=(u=t).getContext("2d"),u.style.width=u.width/f+"px",u.style.height=u.height/f+"px";var r=new xk(10,a);(n=n.concat(i).filter((function(t){return Ca(t&&t.capture)}))).length?(t=n.pop(),n.forEach((function(t){r.push(t,hd)})),r.push(t,A(s,g,u)),tk(r)):s(u)}),(function(){s(y)})):t(null)},T.prototype.capture=T.prototype.capture,T.prototype.ic=function(){return this.s||this.g},T.prototype.getEngine=T.prototype.ic,T.prototype.wl=function(t){return this.g.type===t||this.ma||(this.ma=!0,this.s=this.O(t),this.s.addEventListener("render",this.v)),this},T.prototype.setEngineType=T.prototype.wl,T.prototype.v=function(t){t.target===this.s&&(this.s.removeEventListener("render",this.v),this.g.Vf(this.J))},T.prototype.J=function(){var t=this.g.type;this.g.B(),this.g=this.s,this.s=B,this.ma=!1,this.dispatchEvent(new Ng(this.o.Vl,this.g.type,t))},T.prototype.O=function(t,e){if(e=e?tn(e,this.O):this.i,vn(this),t===Vj.P2D)return new x.H.map.render.p2d.RenderEngine(this.ya,this.b,this.a,e);if(t===Vj.WEBGL)return new S(this.ya,this.b,this.a,e);if(t===Vj.HARP)return new x.H.map.render.harp.RenderEngine(this.ya,this.b,this.a,e);throw new D(this.wl,0,t)},T.prototype.Cf=function(t,e,i,n,r){if(e=tc(e)?C(e,K,this.Cf,1,e)&&e:this.b.mb().bounds.G(),!C(r=r||this.c,cl))throw new D(this.Cf,4);var o=r.ga(),a=this.$a(),s=r.tileSize;if(2<=a&&256<s&&o instanceof sk&&(s/=2),a=this.vb(),s=Math.log2(s)-8,!((i=tc(i)?+i:a)<=(n=tc(n)?+n:a)))throw new D(this.Cf,B,"!(min <= max)");a=o.min;var u=o.max,l=this.ic().type===Vj.WEBGL?yd:xd;if(i=Yd(l(i)-s,a,u),n=Yd(l(n)-s,a,u),!(o&&C(o,R)&&ld()&&o.fh()))throw new Xc(this.Cf,"Storing is not supported");return new nk(r,o,e,i,n,t)},T.prototype.storeContent=T.prototype.Cf,u(xn,hj),xn.prototype.f=function(){jj(this,2)},xn.prototype.c=function(){jj(this,4)},T.prototype.mm=function(t){return t=new xn(t),kd().clear(A(t.f,t),A(t.c,t)),t},T.prototype.clearContent=T.prototype.mm,T.prototype.Xg=function(t,e){var i=this.a,n=i.indexOf(t),r=e!==+e;return e=r?i.a.length-1:e,0>n?i.add(t,e):n-e&&(i.pc(n),i.add(t,r?e-1:e)),this},T.prototype.addLayer=T.prototype.Xg,T.prototype.rf=function(t){var e=this.a.indexOf(t);return t!==this.c&&t!==this.f&&-1!==e&&this.a.pc(e),this},T.prototype.removeLayer=T.prototype.rf,T.prototype.Kd=function(t){return this.c!==t&&(this.a.a.length&&this.a.get(0)!==this.f?this.a.set(0,t):this.a.add(t,0),this.c=t),this},T.prototype.setBaseLayer=T.prototype.Kd,T.prototype.Em=function(){return this.c},T.prototype.getBaseLayer=T.prototype.Em,T.prototype.Fa=function(t){if(!Yf(t))throw new D(this.Fa,0,t);return(t=this.g.geoToScreen(t))?wf(t):y},T.prototype.geoToScreen=T.prototype.Fa,T.prototype.Wa=function(t,e){var i;if(i=+E(t)||2*E(e))throw new D(this.Wa,i-1,arguments[i-1]);return(i=this.g.screenToGeo(t,e))?Zf(i):y},T.prototype.screenToGeo=T.prototype.Wa,T.prototype.Eg=function(t,e){return this.g.screenToLookAtData(t,e)},T.prototype.screenToLookAtData=T.prototype.Eg,T.prototype.ea=function(t){if(!C(t,M))throw new D(this.ea,0,t);return!this.f&&un(this),this.j.kc().ea(t),t},T.prototype.addObject=T.prototype.ea,T.prototype.Ia=function(t){if(!C(t,M))throw new D(this.Ia,0,t);return!this.f&&un(this),this.j.kc().Ia(t),t},T.prototype.removeObject=T.prototype.Ia,T.prototype.Va=function(t){return!this.f&&un(this),this.j.kc().Va(t)},T.prototype.getObjects=T.prototype.Va,T.prototype.fc=function(t){var e;yc(t,this.fc,0,t),!this.f&&un(this);var i=t.length;for(e=0;e<i;e++)this.ea(t[e]);return this},T.prototype.addObjects=T.prototype.fc,T.prototype.Gd=function(t){var e;yc(t,this.Gd,0,t),!this.f&&un(this);var i=t.length;for(e=0;e<i;e++)this.Ia(t[e]);return this},T.prototype.removeObjects=T.prototype.Gd,T.prototype.de=function(t,e,i){var n;if(n=+E(t)||2*E(e))throw new D(this.de,n-1,arguments[n-1]);this.g.getObjectsAt(t,e,!0,(function(t){i(t[0])}))},T.prototype.getObjectAt=T.prototype.de,T.prototype.Ga=function(t,e,i){var n;if(n=+E(t)||2*E(e))throw new D(this.de,n-1,arguments[n-1]);this.g.getObjectsAt(t,e,!1,i)},T.prototype.getObjectsAt=T.prototype.Ga,T.prototype.Bh=function(t,e,i){var n=i||gf;i=n.visiblesOnly;var r=n.zoom;n=n.types;var o=Pg.ANY;C(t,O,this.Bh,0,"area"),wc(e,"Function",this.Bh,1,"callback"),this.j.Va(t,!tc(i)||!!i,tc(r)?+r:this.b.vb(),tc(n)?n&o:o,e)},T.prototype.getObjectsWithin=T.prototype.Bh;var Vj={P2D:Al.P2D,WEBGL:Al.WEBGL};function yn(t,e){yn.l.constructor.call(this,t,e)}function zn(t,e){zn.l.constructor.call(this,jh,e),this.we(t)}function hk(t,e,i){var n="anonymous",r=1;this.f=A(this.f,this),M.call(this,i),this.da(t),i&&((t="crossOrigin")in i&&(n=i[t]),(t="opacity")in i&&(r=i[t])),this.vl(e,n),this.qc(r)}function An(t){if(!t||!Ca(t.requestData))throw new D(An,0,"options.requestData");An.l.constructor.call(this,t),this.N=t.requestData,this.J=!!t.providesDomMarkers}function Bn(t,e){Bn.l.constructor.call(this,t,e)}T.EngineType=Vj,Vj.HARP=Al.HARP,T.prototype.o={vp:"mapviewchangestart",kj:"mapviewchange",lj:"mapviewchangeend",Ff:"baselayerchange",Vl:"enginechange"},u(yn,Ni),t("H.map.Marker",yn),n=yn.prototype,n.type=Pg.MARKER,n.Og=1,n.wa=function(t){if(t!==Mg.VISUAL||1===this.bl||1===this.icon.getState())var e=yn.l.wa.call(this,t);return e||!1},n.bl=0,n.sk=function(t){return C(t,Ij)},n.Ph=!1,n.Qk=function(){this.wa(Mg.VISUAL)},n.Pc=function(t){var e=this.icon;return this.Ph&&(e.removeEventListener("statechange",this.Qk,!1,this),delete this.Ph),e&&(this.bl=e.getState()),yn.l.Pc.call(this,t),0===t.getState()&&(this.Ph=!0,Ce(t,"statechange",this.Qk,!1,this)),this},yn.prototype.setIcon=yn.prototype.Pc,yn.prototype.f=function(t){return new Ij(t.svg,t)},yn.prototype.X=function(){var t=this.getIcon(),e=t.hp||0,i=yn.l.forWorkerMessage.call(this),n=i.properties.icon;return n&&0<e&&Wa(n,{stick_color:t.gp,stick_height:e}),i},yn.prototype.forWorkerMessage=yn.prototype.X,u(zn,xi),t("H.map.Rect",zn),zn.prototype.we=function(t){if(!C(t,K))throw new D(this.we,0,t);t.oa(this.U)||(this.U=this.R=t,this.eb!==y&&zn.l.da.call(this,ni(t)))},zn.prototype.setBoundingBox=zn.prototype.we,zn.prototype.G=function(){return this.R},zn.prototype.getBoundingBox=zn.prototype.G,zn.prototype.da=function(){return this},zn.prototype.setGeometry=zn.prototype.da,zn.prototype.ba=function(){return this.eb||zn.l.da.call(this,ni(this.U)),this.eb},zn.prototype.getGeometry=zn.prototype.ba,u(hk,M),t("H.map.Overlay",hk),hk.prototype.type=Pg.OVERLAY,hk.prototype.G=function(){return this.R},hk.prototype.getBoundingBox=hk.prototype.G,hk.prototype.we=function(t){return C(t,K,this.we,0,t),this.da(t)},hk.prototype.setBoundingBox=hk.prototype.we,hk.prototype.ba=function(){return this.R},hk.prototype.getGeometry=hk.prototype.ba,hk.prototype.da=function(t){var e=this.R,i=!e;return C(t,K,this.da,0,t),!i&&e.oa(t)||(this.R=t,i||this.wa(Mg.SPATIAL)),this},hk.prototype.setGeometry=hk.prototype.da,hk.prototype.ad=function(){return this.b.getData()},hk.prototype.getBitmap=hk.prototype.ad,hk.prototype.vl=function(t,e){var i=this.b;return i&&1!==i.getState()&&i.cancel(),this.b=new Dj(t,this.f,!0,B,e),this},hk.prototype.setBitmap=hk.prototype.vl,hk.prototype.f=function(t,e){this.b=e,1===t&&this.wa(Mg.VISUAL)},hk.prototype.dd=function(){return this.g},hk.prototype.getOpacity=hk.prototype.dd,hk.prototype.qc=function(t){var e=this.g,i=2>e;if(!(0<=t&&1>=t))throw new D(this.qc,0);return t!==e&&(this.g=t,i&&this.wa(Mg.VISUAL)),this},hk.prototype.setOpacity=hk.prototype.qc,hk.prototype.X=function(){var t=hk.l.X.call(this);return t.geometry=ni(this.R).X(),t.properties.overlay=!0,t},hk.prototype.forWorkerMessage=hk.prototype.X,u(An,R),t("H.map.provider.MarkerTileProvider",An),An.prototype.Yd=function(t){return t?t.length+1:1},An.prototype.getEntryWeight=An.prototype.Yd,An.prototype.K=function(t,e,i,n,r){var o=this;return this.N(t,e,i,(function(r){for(var a,s,u=[],l=r.length;l--;)(s=r[l]).jp=o.getTileKey(t,e,i),s.ka(o),a=s.Cb(),(C(s,Qi)||1===a.getState())&&u.push(r[l]);n(u)}),r)},An.prototype.requestInternal=An.prototype.K,An.prototype.ke=function(t,e){e===Mg.VISUAL&&(t=this.Ob().get(t.jp))&&(t.valid=!1,Wj(this,t))},An.prototype.invalidateObject=An.prototype.ke,An.prototype.Vb=function(){return this.J},An.prototype.providesDomMarkers=An.prototype.Vb,An.prototype.Wb=df,An.prototype.providesMarkers=An.prototype.Wb,u(Bn,cl),t("H.map.layer.MarkerTileLayer",Bn);var Cn={markers:[],total:0,requested:0};function Dn(t,e,i,n,r){var o,a=yd(i);for(t.pixelProjection.Qa(a),e=t.je(t.Te(e),a),i=t.$e(e,e.left>e.right,~~i,n,r),t=i.tiles,i=i.total,n=t.length,r=[],o=0;o<n;o++)for(a=(e=t[o]).data.length;a--;)r.push(e.data[a]);return{markers:r,total:t.length,requested:i}}function En(t,e,i){var n,r=6;if(e){for(n=' expected close to: "'+e;r--;)-1!==(e=t.a.next())&&(n+=String.fromCharCode(e));n+='"'}throw new D(Fn,0,"- Malformed WKT: "+(n?i+n:"unexpected end of stream"))}Bn.prototype.Lc=function(t,e,i,n){return this.a.providesDomMarkers()?Cn:Dn(this,t,e,i,n)},Bn.prototype.requestMarkers=Bn.prototype.Lc,Bn.prototype.Kc=function(t,e,i,n){return this.a.providesDomMarkers()?Dn(this,t,e,i,n):Cn},Bn.prototype.requestDomMarkers=Bn.prototype.Kc;var Gn={$l:" ",Xl:"(",Yl:")",Ul:",",Wl:""};function Hn(t,e){var i=t.next();i!==(e=e?")":"(")&&En(t,i,'"'+e+'"')}function In(t){return","===Jn(t)&&(t.next(),!0)}function Kn(t,e,i,n,r){var o,a,s=2+e+i;for(a=1;a<=s;a++)(i=t.next())?(o=+i)!==o?En(t,i,"number"):1===a?n[r+1]=o:2===a?n[r]=o:3===a&&(n[r+2]=o):En(t,i);e||(n[r+2]=0)}Object.keys(Gn).reduce((function(t,e){return t[Gn[e]]=!0,t}),mc());var Ln=[];function Mn(t,e,i,n){return n||Hn(t,0),Kn(t,e,i,Ln,0),n||Hn(t,1),new Wf(Ln[0],Ln[1],e?Ln[2]:B)}function Nn(t,e,i){var n=[];Hn(t,0);do{Kn(t,e,i,n,n.length)}while(In(t));return Hn(t,1),new L(n)}function On(t,e,i){Hn(t,0);var n=Nn(t,e,i);if(In(t)){var r=[];do{r.push(Nn(t,e,i))}while(In(t))}return Hn(t,1),new O(n,r)}var Pn=[],Qn=[On],Rn=[Mn],Sn={POINT:Rn,LINESTRING:[Nn],POLYGON:Qn,MULTIPOINT:[Mn,Ji],MULTILINESTRING:[Nn,mh],MULTIPOLYGON:[On,ui],GEOMETRY:Pn,GEOMETRYCOLLECTION:Pn,CIRCULARSTRING:Pn,COMPOUNDCURVE:Pn,CURVEPOLYGON:Pn,MULTICURVE:Pn,MULTISURFACE:Pn,CURVE:Pn,SURFACE:Pn,POLYHEDRALSURFACE:Pn,TIN:Pn,TRIANGLE:Pn},Tn={Z:1,M:2,ZM:3};function Fn(t){var e,i=(t=new Un(t)).next();if((e=Sn[i.toUpperCase()])||En(t,i,"type name"),e!==Pn){i=Jn(t);var n=1&(i=Tn[i.toUpperCase()]),r=i>>1;if(n|r&&t.next(),"EMPTY"===(i=Jn(t)))if(t.next(),n=e[1])var o=new n([]);else e!==Rn&&(o=new L([]),e===Qn&&(o=new O(o)));else if("("===i){if(o=e[0],e=e[1]){var a=[];if(Hn(t,0),o===Mn){var s="("!==Jn(t);do{a.push(o(t,n,r,s))}while(In(t))}else do{a.push(o(t,n,r))}while(In(t));Hn(t,1),n=new e(a)}else n=o(t,n,r);o=n}else En(t,i,'"Z", "M", "ZM", "(" or "EMPTY"');t.next()&&En(t,i,"end of stream")}return o||y}function Un(t){this.a=t}function Jn(t){var e=t.b;if(e===B){for(e=t.a;e.Tb()===Vn;)e.next();if(Wn[e.Tb()])e=(e=e.next())===Xn?"":String.fromCharCode(e);else{e.ze();do{e.next()}while(!Wn[e.Tb()]);e=String.fromCharCode.apply(null,e.Ud())}t.b=e}return e}Un.prototype.next=function(){var t=Jn(this);return""!==t&&delete this.b,t};var Vn=32,Xn=-1,Yn={$l:Vn,Xl:40,Yl:41,Ul:44,Wl:Xn},Wn=Object.keys(Yn).reduce((function(t,e){return t[Yn[e]]=!0,t}),mc());function Zn(){}function $n(t){this.c=String(t),this.f=0,this.a=[],this.b=!1}t("H.util.ICharStream",Zn),Zn.prototype.next=function(){},Zn.prototype.ze=function(){},Zn.prototype.Ud=function(){},Zn.prototype.Tb=function(){},t("H.util.CharStream",$n),$n.prototype.next=function(){var t=this.c.charCodeAt(this.f++);return t=isNaN(t)?-1:t,this.b&&this.a.push(t),t},$n.prototype.ze=function(){this.b=!0,this.a=[]},$n.prototype.Ud=function(){var t=this.a.slice();return this.b=!1,this.a=[],t},$n.prototype.Tb=function(){var t=this.c.charCodeAt(this.f);return isNaN(t)?-1:t},t("H.util.wkt.toGeometry",(function(t){return Fn(new $n(t))})),t("H.buildInfo",(function(){return Ef("H-core","1.30.3","757f3c65")}));var ao=function(){var a="maps"+eval('"js-"'),b=x.document.querySelector('script[src*="'+a+'"]');if(!b){var c=x.document.getElementsByTagName("script"),d=new RegExp("^.*"+a),e=0;for(a=c.length;e<a;e++)if(d.test(c[e].src)){b=c[e];break}}return b?b.src.replace(/\/[^\/]*$/,"/"):""}();function bo(t,e){if(!t)throw new D(bo,0,t);bo.l.constructor.call(this,t),this.b={},this.c=e&&e.xc,this.f=co++}t("H.getScriptPath",(function(){return ao})),u(bo,km);var co=0;function eo(t,e){e=e||{},C(t,ml,eo,0),eo.l.constructor.call(this,t),this.xc=!!e.xc,this.c=e.ib||0,this.a=[],this.b={}}bo.prototype.V=function(t,e,i,n,r,o){var a=xd(n),s=this.hb,u=a+(i.exp-s.pixelProjection.exp),l=s.min,h=s.max;n=s.tileSize;var c=s.ga().j,f=this.xb,p=f.dd(),d=f.Db().w,g=i.w,y=i.x,v=i.y,m={};if(a<l||a>h)return jk.DONE;for(t=(r=s.requestTiles(t,u,r,o,this.f)).total,o=(r=r.tiles).length,this.g=i,this.j=e,this.a=u,p!==c&&f.qc(c),i=n=n*g/(Dd(2,u)*n),this.c||(n%1&&(y/=g=i/(n=yd(n)),v/=g,g=Dd(2,u)*n),y=yd(y),v=yd(v)),this.i=i,u=-n,a=d+n,s=0;s<o;s++){if((l=(d=r[s]).data)&&l.tagName){for(i=e.x-(y-d.x*n),c=e.y-(v-d.y*n),f.Zc(l,i,c,n,n),p=i;(p-=g)>u;)f.Zc(l,p,c,n,n);for(p=i;(p+=g)<a;)f.Zc(l,p,c,n,n)}m[this.a+"_"+d.x+"_"+d.y]=d}return this.b=m,o===t?jk.DONE:jk.PENDING},bo.prototype.Ga=function(t,e,i){var n,r=this.i,o=r/this.hb.tileSize,a=this.g,s=this.j;if(tc(this.a)&&a){t=a.x+(t-s.x),e=a.y+(e-s.y);var u=yd(a.w/r),l=a=yd(t/r);s=yd(e/r),Ad(l)>=u&&(l%=u),0>l&&(l=u+l),(u=this.b[this.a+"_"+l+"_"+s])&&u.Ga&&(n=u.Ga((t-r*a)/o,(e-r*s)/o,i))}return n||ff},bo.prototype.ie=function(){return"2d"},u(eo,km),eo.prototype.V=function(t,e,i,n,r,o){var a,s,u=this.hb;n-=this.c,this.a.length=0;var l=this.b;if(this.b=a={},n>=u.min&&n<=u.max){var h=u.Hd(t,n,r,o),c=h.overlays;if(t=c.length)for(c.sort(Rg),n=this.xb,r=this.xc,o=0;o<t;o++){var f=(u=c[o]).G(),p=i.lb(f.Rb()),d=i.lb(f.Nb());f=i.w,p.x>=d.x&&(p.x-=f),f=-((p.x+d.x)/f>>1)*f,p.x+=f,p.add(e),d.x+=f,d.add(e),r||(p.round(),d.round()),(f=l[s=u.gb()])?delete l[s]:f={Oo:u},a[s]=f;var g=p.x;p=p.y;var y=d.x,v=y-g,m=(d=d.y)-p;n.qc(u.dd()),n.Zc(u.ad(),g,p,v,m),f.mh?f.mh.set(g,p,y,d):f.mh=new lk(g,p,y,d),this.a.push(f)}}return!h||h.requested&&h.requested===h.total||!h.requested&&c.length===h.total?jk.DONE:jk.PENDING},eo.prototype.Ga=function(t,e,i){for(var n,r,o=this.a,a=o.length;a--;)if((n=o[a]).mh.Pf(t,e))if(n=n.Oo,r)r.push(n);else if(r=[n],i)break;return r||ff},eo.prototype.ie=function(){return"2d"},eo.prototype.u=function(){this.a=null,eo.l.u.call(this)};var fo={lookAt:{zoom:{min:-8,max:24},tilt:{min:0,max:0},incline:{min:0,max:0},heading:{min:180,max:180}},interaction:{ZOOM:ul.ZOOM,COORD:ul.COORD},capture:!0};function go(t,e){this.a=[],go.l.constructor.apply(this,arguments)}function V(t,e,i,n){V.l.constructor.call(this,t,e,i,n),this.N=new I(0,0),(i=n.renderBaseBackground)&&(this.to=i.lower,this.no=i.higher),this.mo=!!n.enableSubpixelRendering,this.od=ho,this.Oj=0,this.Ne=this.Mj=!1,this.i=new Wl,this.a=n=new dm,this.Pd=A(this.Pd,this),n.addEventListener(n.g.Rg,this.Pd),this.Fa=A(this.Fa,this),n=t.element,this.Aa=t=n.ownerDocument.createElement("div"),t.style.position="absolute",t.style.width=t.style.height="100%",t.style.zIndex=0,n.insertBefore(t,n.firstChild),this.ik=new Am(this.Aa,this.sa),this.o=[],io(this),this.bi=A(V.prototype.bi,this),this.A=jo,this.Cg(),this.zoom=ko(this,this.O.vb()+this.ib),this.Jb(),lo(this,e.mb().position,this.zoom),this.bb(),this.U()}t("H.map.render.p2d.capabilities",fo),u(go,om),n=go.prototype,n.Nj=function(){return this.hb.Lc.apply(this.hb,arguments)},n.V=function(t,e,i,n,r,o,a){return this.a=[],go.l.V.apply(this,arguments)},n.Ck=1,n.jl=function(t,e,i,n,r,o){var a=this.Ck=n.$a();r*=a,o*=a;var s=i.Db();e=s.w*a,s=s.h*a;var u=i.ud();this.xc?(r-=u.x*a,o-=u.y*a):(r=xd(r-u.x*a),o=xd(o-u.y*a)),n.Zc(i.ad(),r,o,e,s),t.detail?t.detail.set(r,o,r+e,o+s):t.detail=new lk(r,o,r+e,o+s),this.a.push(t)},n.Ga=function(t,e,i){for(var n,r,o,a=this.a,s=a.length,u=ff,l=this.Ck;s--&&!((r=(n=a[s]).detail).Pf(t,e)&&(n=n.Mk,(!(o=n.Cb().g)||o.hg((t-r.left)/l,(e-r.top)/l,0))&&0>u.indexOf(n)&&(u===ff&&(u=[]),u.push(n),i))););return u},n.ie=function(){return"2d"},n.u=function(){this.a=null,go.l.u.call(this)},u(V,ql),t("H.map.render.p2d.RenderEngine",V),V.prototype.type=Al.P2D,V.prototype.type=V.prototype.type;var jo=2;function mo(t,e,i){return Ad(e=i-e)<t.ra.w/2?e:e-t.ra.w*i/Ad(i)}function io(t){var e=t.c.Na(),i=0,n=e.length;for([t.fa={},t.s={},t.W={},t.ma={}].forEach((function(t){t.Yc=[],t.ja=[]})),t.f=t.c.Na();i<n;i++)t.jf(i,e[i]);t.Jb()}function vo(t){var e=[];return(e=(e=(e=(e=e.concat(t.s.ja)).concat(t.fa.ja)).concat(t.W.ja)).concat(t.ma.ja)).filter(tc)}function po(t,e){var i=wl(t,wl(t,e.zoom)+t.ib);return(t=xl(t,e)).zoom=i,t}function lo(t,e,i){var n=t.ra;n.Qa(i),t.m=n.projection.$c(e),n.x=n.w*t.m.x,n.y=n.h*t.m.y}function uo(t){return{w:(t=t.yb[2]).right-t.left,h:t.bottom-t.top}}function wo(t){t.b&&t.b.va()||zk()-t.Xa<t.od&&!t.v?t.Vd=Jk(t.bi):(t.v&&(t.te(),xo(t)),t.A=jo)}function xo(t,e){t.dispatchEvent({type:t.zk.pj,target:e||t})}function Bo(t,e,i){ro(t,e*t.sa,i*t.sa),t.N.set(0,0),t.bb(),t.ha()}function ro(t,e,i){var n=t.ra;t=t.m,n.x=Wd(n.x+e,n.w),n.y=wd(0,vd(n.w,n.y+i)),t.x=n.x/n.w,t.y=n.y/n.h}function so(t,e,i,n){var r=t.sa,o=t.g.center;i===+i&&n===+n?(i=(i-o.x)*r,n=(n-o.y)*r,t.N.set(i,n),ro(t,i,n),t.ra.Qa(e),ro(t,-i,-n)):(t.N.set(0,0),t.ra.Qa(e)),t.zoom=e,t.bb(),t.ha()}function no(t,e,i,n){var r=t.getCapabilities().lookAt.zoom.max,o=e.fb(),a=n||o;if(e.jg()||i&&n)i=i===B?r:i;else{var s=new Yi(t.ra.projection);s.Qa(r);var u=s.lb(e.Rb()).round(),l=s.lb(e.Nb()).round();r=s.w,e.Gb()&&(u.x-=r),n?(o=s.lb(a),e=2*wd(o.x-u.x,l.x-o.x),u=2*wd(o.y-u.y,l.y-o.y)):(e=l.x-u.x,u=l.y-u.y,a=o),i===B&&(i=(o=t.yb[4]).right-o.left,o=o.bottom-o.top,i=wl(t,i=-8+vd(Bd(i/e*r)/Ld,Bd(o/u*r)/Ld)-t.ib))}return{zoom:yd(i),position:a}}function oo(t){to(t,!0),t.a.va()&&t.Ab(!0),t.i.va()&&t.Bb(!0),to(t,!0)}function Co(t,e){if(e){var i={};i.mf=e.power,i.Oe=e.ease,i.duration=e.duration,t.j=i}}function ko(t,e){return wl(t,wl(t,e-t.ib)+t.ib)}function Eo(t,e){var i=t.m,n=t.ra.projection.$c(e.position),r=t.ra.qe(n),o=r.y;r=r.x;var a=e.zoom;e=(i=t.ra.qe(i)).y;var s=i.x;i=t.zoom;var u=t.a.Eb(),l=t.a.b,h=t.a.c,c=0;if(r=mo(t,s,r),e=Cd((r-=s)*r+(o-=e)*o+(i=a-i)*i),0!==u&&0!==e){var f=r/e,p=o/e,d=i/e,g=u*u/(2*e);qo(t,(function(e,i){var r;1!==e?((r=d*(i=(e=u*i-g*i*i/2)-c))&&(r=ko(t,t.zoom+r),so(t,ko(t,r),l,h)),Bo(t,xd(f*i),xd(p*i)),c=e):(t.m=n,so(t,ko(t,a),l,h),t.bb(),t.ha())}),2*e/u)}}function Do(t,e,i){i=i||0,e.pb&&so(t,ko(t,t.zoom+e.pb*i),t.a.atX,t.a.atY),Bo(t,e.nb*i,e.ob*i)}function qo(t,e,i,n,r){t.b&&t.b.va()&&t.b.stop(!0),t.b=new nm(t,e,i,n,r),t.b.start()}function to(t,e){t.b&&t.b.va()&&t.b.stop(e)}V.prototype.getState=function(){return this.A},V.prototype.getState=V.prototype.getState,V.prototype.bh=function(t){var e=this,i=t.b,n=t.newValue,r=t.modifiers;t=n.position;var o,a=n.bounds,s=this.zoom,u=this.m,l=0;if(r&Si.POSITION&&(o=e.ra.lb(t)),r&Si.BOUNDS)n=no(this,a.G(),r&Si.ZOOM?n.zoom:B,r&Si.POSITION?t:B),this.O.$b(n,i);else{r&Si.POSITION||(o=e.ra.lb(n.position));var h=o.x,c=o.y;oo(this),this.N.set(0,0);var f=(n=po(this,n)).zoom,p=n.position;if(i){var d=f-s,g={x:u.x,y:u.y};i=this.ra.qe(g).x;var y=this.ra.projection.$c(t);y.x===this.m.x&&y.y===this.m.y&&f===this.zoom||(h=mo(this,i,h),qo(this,(function(t){var i=t-l;if(f!==s){o=e.ra.qe(y);var n=e.ra.qe(g);h=mo(e,n.x,o.x),c=o.y-n.y}l=t,ro(e,h*i,c*i),so(e,s+=d*i),e.bb(),e.ha()}),this.kb,(function(){lo(e,p,f),so(e,f),e.bb(p),e.ha()}),this.dc))}else to(this),lo(this,p,f),so(this,f),this.bb(p);this.ha()}},V.prototype.kb=300,V.prototype.Fg=function(t){var e=Cc(t);if(!e||e&&0>t)throw new D(this.Fg,1,"positive number required");this.kb=t},V.prototype.setAnimationDuration=V.prototype.Fg,V.prototype.sh=function(){return this.kb},V.prototype.getAnimationDuration=V.prototype.sh,V.prototype.dc=Nl,V.prototype.Gg=function(t){if(!Ca(t))throw new D(this.Gg,1,"function required");this.dc=t},V.prototype.setAnimationEase=V.prototype.Gg,V.prototype.th=function(){return this.dc},V.prototype.getAnimationEase=V.prototype.th,V.prototype.Cg=function(){this.dc=Nl,this.kb=300},V.prototype.resetAnimationDefaults=V.prototype.Cg,V.prototype.oi=function(t,e,i){var n;this.Xa=zk(),(n=this.fa.ja.splice(t,1)[0])&&n.B&&n.B(),(n=this.s.ja.splice(t,1)[0])&&n.B&&n.B(),(n=this.W.ja.splice(t,1)[0])&&n.B&&n.B(),(n=this.ma.ja.splice(t,1)[0])&&n.B&&n.B(),this.f=this.c.Na(),0===t&&(vl(this,e,!1),this.Jb()),this.o=Bm(this.ik,uo(this),vo(this)),this.te(),i||this.ha()},V.prototype.pi=function(){this.Jb(),this.ha()},V.prototype.Mh=function(t,e,i){var n,r,o,a;if(e){var s={xc:this.mo,ib:this.ib};e.V?C(e,mm)?r=new lm(e):C(e,ym)&&(a=new lm(e)):(e.requestOverlays&&(n=new eo(e,s)),e.requestTiles&&(r=new bo(e,s)),e.requestMarkers&&(o=new go(e,s)),e.requestDomMarkers&&(a=new rm(e,s)))}i=i||0,this.fa.ja.splice(t,i,n),this.s.ja.splice(t,i,r),this.W.ja.splice(t,i,o),this.ma.ja.splice(t,i,a),this.f=this.c.Na(),this.o=Bm(this.ik,uo(this),vo(this))},V.prototype.Wa=function(t,e){var i=this.g.center,n=this.sa;return this.ra.Sa((t-i.x)*n,(e-i.y)*n)},V.prototype.screenToGeo=V.prototype.Wa,V.prototype.Eg=function(t,e){return t=this.Wa(t,e),(e=this.O.mb()).position=t,e},V.prototype.Fa=function(t){var e=this.sa,i=this.g.center,n=i.x*e;i=i.y*e,t=this.ra.lb(t);var r=this.ra.w;return new I(xd((t.x-xd(t.x/r)*r+n)/e),xd((t.y+i)/e))},V.prototype.geoToScreen=V.prototype.Fa,V.prototype.G=function(t,e){var i=this.yb[t||4];t=this.ra;var n=i.left-e,r=t.Sa(n,i.top-e),o=i.right+e;return e=t.Sa(o,i.bottom+e),o-n>=t.w&&(r.lng=-(e.lng=180)),dg(r,e)},V.prototype.Ga=function(t,e,i,n){var r,o=[],a=this.sa;for(t*=a,e*=a,r=(a=[this.fa,this.s,this.W,this.ma]).length;r--&&(!i||!o.length);){for(var s=o,u=a[r].ja,l=t,h=e,c=i,f=u.length;f--&&!((o=u[f])&&o.Ga&&(s=s.concat(o.Ga(l,h,c)),s.length&&c)););o=s}n(o)},V.prototype.getObjectsAt=V.prototype.Ga,V.prototype.ec=y,V.prototype.U=function(){var t,e=this.o.length;V.l.U.call(this);var i=uo(this);this.N.set(0,0);var n=i.w;for(t=i.h;e--;){var r=(i=this.o[e]).Db();r.w===n&&r.h===t||i.yf(n,t)}this.ec=new Ki(n,t),this.ha()},V.prototype.getCapabilities=function(){return fo},V.prototype.getCapabilities=V.prototype.getCapabilities,n=V.prototype,n.te=function(){this.fa.Yc.length=0,this.s.Yc.length=0,this.W.Yc.length=0,this.ma.Yc.length=0},n.bi=function(){var t;this.C&&this.C.before();var e=this.s.ja,i=this.g.center.clone().scale(this.sa).round(),n=this.G(1,0),r=this.G(1,yo),o=this.zoom,a=o-this.ib,s=this.ra,u=this.to,l=this.no,h=e[0];e=this.N;var c=this.o.length,f=this.f;for(t=f.length;c--;){var p=this.o[c];C(p,jm)&&p.clear()}if(h){if(u)for(;u;)c=o-u,h.V(n,i,s,c,!0,e),--u;if(l&&this.Ne)for(p=1;p<=l&&(c=o+p,s.Qa(c),u=this.G(2,0),s.Qa(o),!h.V(u,i,s,c,!0,e));p++);}for(this.od=ho;t--;)C(s=f[t],aj)&&s.ga()&&s.ga().nf(r,a);n=this.Bk(n,i,o,!1,e,zo,this.s,this.fa),i=this.Bk(r,i,a,!1,e,Ao,this.W,this.ma),this.v=n&&i,this.b&&this.b.va()&&this.Sg(),this.J||(this.J=this.O.mb()),this.J.bounds=this.G(4,0),this.O.bb(this.J),this.J=null,this.ec&&(this.g.bb(this.ec),this.ec=y),o<this.Oj?this.Ne=!0:this.Mj&&(this.Ne=!1),this.Oj=o,this.Mj=n,this.C&&this.C.after(),wo(this)},n.Bk=function(t,e,i,n,r,o,a){var s,u=Array.prototype.slice.call(arguments,6),l=u.length,h=u[0].ja.length,c=l*h,f=!!c;for(s=0;s<c;s++){if(o===zo)var p=s%l,d=Math.floor(s/l);else p=Math.floor(s/h),d=s%h;var g=u[p].ja[d];p=u[p].Yc,g&&((g=g.V(t,e,this.ra,i,n,r,this.Fa))===jk.ACTIVE&&(this.od=1/0),g!==jk.DONE||p[d]||(xo(this,this.f[d]),p[d]=!0),p[d]||(f=!1))}return f},n.u=function(){var t=this.c.Na()[0],e=this.g;Kk(this.Vd),to(this,!0),t&&vl(this,t,!1),vo(this).forEach((function(t){t.B()})),e.element&&e.element.removeChild(this.Aa),this.Aa=null,this.A=3,V.l.u.call(this)},n.ha=function(){this.Xa=zk(),this.A===jo&&(this.v=!1,this.A=1,wo(this))},n.Ae=function(t,e,i){so(this,t=wl(this,wl(this,t)+this.ib),e,i)},V.prototype.zoomAt=V.prototype.Ae,V.prototype.uc=function(t,e){oo(this),Co(this,e),this.i.start(t,!!e)},V.prototype.startInteraction=V.prototype.uc,V.prototype.lc=function(t,e,i,n,r){var o=!1;this.i.va()&&(e=this.i.store(t,e,i,n,r),this.i.Hc(ul.COORD)&&0<Vl(t=this.i.ce())&&(Bo(this,-t.x,-t.y),o=!0),e&&this.i.Hc(ul.ZOOM)&&(t=this.i.Wf(),e=this.i.Xf(),(e=Bd(Dd(2,this.zoom)*e)/Ld)!==this.zoom&&(so(this,e=ko(this,e),t.x,t.y),o=!0)),o&&this.ha())},V.prototype.interaction=V.prototype.lc,V.prototype.Bb=function(t){var e=this;if(this.i.va()&&!t){if(this.j){t=this.i.Eb();var i=this.i.zc(),n=this.j.duration,r=(this.j.mf||1)*t,o=new zm(-r/(0<n?n:1),r);!E(i.x)&&!E(i.y)&&0<r&&e.i.Hc(ul.COORD)&&qo(this,(function(t){r=o.We(t*n),E(r)||Bo(e,xd(-i.x*r),xd(-i.y*r))}),n,void 0,this.j.Oe)}this.j=null,this.i.clear()}},V.prototype.endInteraction=V.prototype.Bb,V.prototype.tc=function(t,e,i){oo(this),this.a.start(e,i),Co(this,t)},V.prototype.startControl=V.prototype.tc,V.prototype.control=function(t,e,i){if(E(+i))throw new D(this.control,2,i);if(E(t))throw new D(this.control,0,t);if(E(e))throw new D(this.control,1,e);this.a.va()&&this.a.set(t,e,i,0,0,0)},V.prototype.control=V.prototype.control,V.prototype.Ab=function(t,e){var i,n=this;if(this.a.va()){to(this,!0);var r=zk(),o=r-this.za;if(1<=o&&Do(this,gm(this.a),o),!this.j||t||e)"function"==typeof e&&((t=this.mb()).zoom=this.zoom-this.ib,e(t),t.zoom+=this.ib,Eo(this,t));else{e=this.a.Eb();var a=this.a.zc(),s=this.j.duration,u=(this.j.mf||1)*e,l=new zm(-u/(0<s?s:1),u);!E(a.nb)&&!E(a.ob)&&0<u&&qo(this,(function(t,e,o,h){r&&(o=h-r,r=0),u=l.We(t*s)*o,E(u)||((i=a.pb*u)&&so(n,ko(n,n.zoom+i),n.a.b,n.a.c),Bo(n,xd(a.nb*u),xd(a.ob*u)))}),s,void 0,this.j.Oe)}this.a.reset()}},V.prototype.endControl=V.prototype.Ab,V.prototype.Pd=function(t){var e=this,i=t.c;this.N.set(0,0),i.nb||i.ob||i.pb?(this.za=zk(),qo(this,(function(t,n,r,o){e.za=o,Do(e,i,r)}),Number.POSITIVE_INFINITY),this.ha()):to(this,!0)},V.prototype.nh=function(){},V.prototype.enter=V.prototype.nh,V.prototype.Vf=function(t){tl(this.Aa,t)},V.prototype.exit=V.prototype.Vf,V.prototype.capture=function(t,e,i,n){var r=this.Aa.ownerDocument.createElement("canvas"),o=r.getContext("2d"),a=this.sa;for(r.width=(i-t)*a,r.height=(n-e)*a,i=0;i<this.o.length;i++)C(n=this.o[i],jm)&&o.drawImage(n.L(),-t*a,-e*a);return Wb(r)};var Ao=0,zo=1,ho=1e3,yo=256;function Fo(t){var e=t.ownerDocument;e=e.documentElement||e.body.parentNode||e.body;try{var i=t.getBoundingClientRect()}catch(t){i={top:0,right:0,bottom:0,left:0,height:0,width:0}}return{x:i.left+("number"==typeof window.pageXOffset?window.pageXOffset:e.scrollLeft),y:i.top+("number"==typeof window.pageYOffset?window.pageYOffset:e.scrollTop)}}var Go=Function("return this")();function Ho(t,e,i,n,r,o,a){Ho.l.constructor.call(this,t),this.pointers=e,this.changedPointers=i,this.targetPointers=n,this.currentPointer=r,this.originalEvent=a,this.target=o}function Io(t,e,i,n,r,o){if(isNaN(t))throw Error("x needs to be a number");if(isNaN(e))throw Error("y needs to be a number");if(isNaN(i))throw Error("pointer must have an id");this.viewportX=t,this.viewportY=e,this.target=null,this.id=i,this.type=n,this.dragTarget=null,this.button=tc(r)?r:-1,this.buttons=tc(o)?o:0,this.a=this.button}function Jo(t,e,i){if(isNaN(e))throw Error("x needs to be a number");if(isNaN(i))throw Error("y needs to be a number");t.viewportX=e,t.viewportY=i}function Ko(t,e){t.a=e,t.buttons|=Io.prototype.b[+e]||0}function Lo(t,e){t.a=e,t.buttons&=~(Io.prototype.b[+e]||0)}u(Ho,rd),t("H.mapevents.Event",Ho),t("H.mapevents.Pointer",Io),Io.prototype.gn=function(){return this.a},Io.prototype.getLastChangedButton=Io.prototype.gn,Io.prototype.b=[1,4,2];var Mo={NONE:-1,LEFT:0,MIDDLE:1,RIGHT:2};function No(t){this.a=t instanceof Array?t.slice(0):[]}function Oo(t,e){return-1!==(e=t.indexOf(e))?t.a[e]:null}function Po(t,e){for(var i=t.a.length,n=[];i--;)t.a[i].type!==e&&n.push(t.a[i]);t.a=n}function Qo(t,e){for(var i=t.a.length;i--;)if(t.a[i].dragTarget===e)return!0;return!1}function Ro(t,e,i){if(i=i||{},!(t instanceof T))throw Error("events: map instance required");if(!(e instanceof Array))throw Error("events: map array required");nd.call(this),this.kh=i.kh||300,this.Bj=i.Bj||50,this.Il=i.Il||50,this.Jl=i.Jl||500,this.Vh=i.Vh||900,this.Uh=i.Uh||8,this.map=t,this.o=this.map.ya,this.j=this.o.element,this.O=e,this.a=new No,this.b=new No,this.i={},this.c=null,this.s=!0,this.aa={},this.f={},this.m=null,this.Le=A(this.Le,this),this.C={pointerdown:this.qm,pointermove:this.rm,pointerup:this.sm,pointercancel:this.pm},So(this)}function So(t,e){var i,n=t.O.length;for(i=0;i<n;i++){var r=t.O[i],o=r.listener;"function"==typeof o&&(e?(r.target||t.j).removeEventListener(r.Ta,o):(r.target||t.j).addEventListener(r.Ta,o))}}function To(t,e,i){var n;if("function"==typeof t.C[e]){"pointermove"!==e&&(t.s=!0);var r=0;for(n=t.b.length();r<n;r++){var o=t.b.a[r];t.j.contains(i.composedPath()[0])?Uo(t,o,t.Ij.bind(t,i,e,o)):t.Ij(i,e,o,null)}}t.b.clear()}function Uo(t,e,i){if(t.c===e)i(e.target);else{var n=t.o,r=e.viewportX;if(e=e.viewportY,0>r||0>e||r>=n.width||e>=n.height)i(y);else{var o=t.map;o.de(r,e,(function(t){i(t||o)}))}}}function Wo(t,e,i){e===t.c&&(Xo(t,e.dragTarget,"dragend",i,e),t.c=null,Vo(e.id,t.aa)),e.dragTarget=null}function Vo(t,e){e[t]&&(e[t].timeout?clearTimeout(e[t].timeout):clearTimeout(e[t]),delete e[t])}function Yo(t,e,i){var n=e.target,r=new I(e.viewportX,e.viewportY),o=e.id;Vo(o,t.f);var a=setTimeout((function(){n&&n===e.target&&r.Za({x:e.viewportX,y:e.viewportY})<t.Uh&&(Xo(t,n,"longpress",i,e),delete t.i[e.id])}),t.Vh);t.f[o]={timeout:a,He:r}}function Xo(t,e,i,n,r){if(e&&"function"==typeof e.dispatchEvent){var o,a=Ho,s=t.a.Na(),u=t.b.Na(),l=(t=t.a).a.length,h=[];for(o=0;o<l;o++)t.a[o].target===e&&h.push(t.a[o]);a=new a(i,s,u,h,r,e,n),r.button=/^(?:longpress|(?:dbl)?tap|pointer(?:down|up))$/.test(i)?r.a:Mo.NONE,e.dispatchEvent(a)}return a}function Zo(t){this.g=A(this.g,this),Ro.call(this,t,[{Ta:"touchstart",listener:this.g},{Ta:"touchmove",listener:this.g},{Ta:"touchend",listener:this.g},{Ta:"touchcancel",listener:this.g}]),this.J={touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",touchcancel:"pointercancel"},this.v=(t=(t=t.m)?t.L():null)?Array.prototype.slice.call(t.querySelectorAll("a"),0):[]}function $o(t){var e=ap(this);(window.PointerEvent||window.MSPointerEvent)&&e.push({Ta:"MSHoldVisual",listener:"prevent"}),Ro.call(this,t,e)}function ap(t){var e,i,n=!!window.PointerEvent,r=[];return t.g=A(t.g,t),"MSPointerDown MSPointerMove MSPointerUp MSPointerCancel MSPointerOut MSPointerOver".split(" ").forEach((function(o){e=o.toLowerCase().replace(/ms/g,""),i=n?e:o,r.push({Ta:i,listener:t.g,target:/^pointer(up|move)$/.test(e)?window:null})})),r}Io.Button=Mo,n=No.prototype,n.clear=function(){this.a.splice(0,this.a.length)},n.length=function(){return this.a.length},n.indexOf=function(t){for(var e=this.a.length;e--;)if(this.a[e].id===t)return e;return-1},n.remove=function(t){return-1!==(t=this.indexOf(t))?this.a.splice(t,1)[0]:null},n.push=function(t){if(t instanceof Io)return this.a.push(t);throw Error("list needs a pointer")},n.Na=function(){return this.a},n.clone=function(){return new No(this.a)},u(Ro,nd),n=Ro.prototype,n.Ij=function(t,e,i,n){Vo(i.id,this.aa),this.C[e].call(this,i,n,t)},n.sm=function(t,e,i){var n=t.id;t.target=e,Wo(this,t,i),Xo(this,e,"pointerup",i,t),"mouse"!==t.type&&Xo(this,e,"pointerleave",i,t),e=this.i[t.id];var r={x:t.viewportX,y:t.viewportY},o=i.timeStamp,a=t.target,s=this.m;e&&e.target===a&&e.He.Za(r)<this.Il&&o-e.Yi<this.Jl?(Xo(this,a,"tap",i,t),s&&s.target===a&&o-s.Yi<this.kh?s.He.Za({x:t.viewportX,y:t.viewportY})<this.Bj&&(Xo(this,a,"dbltap",i,t),this.m=null):this.m={target:a,He:new I(t.viewportX,t.viewportY),Yi:i.timeStamp}):this.m=null,this.i={},Vo(n,this.f)},n.Le=function(t,e){var i=this;Xo(this,t.dragTarget,"drag",e,t),Vo(t.id,this.aa),this.aa[t.id]=setTimeout((function(){i.Le(t,e)}),150)},n.rm=function(t,e,i){var n=t.dragTarget,r=t.id,o=t.target;t.target=e,o!==e&&(Xo(this,o,"pointerleave",i,t),Xo(this,e,"pointerenter",i,t)),n?this.c?(this.Le(t,i),this.f[r]&&this.f[r].He.Za({x:t.viewportX,y:t.viewportY})>this.Uh&&Vo(r,this.f)):this.s?this.s=!1:(this.c=t,Xo(this,n,"dragstart",i,t),this.Le(t,i),delete this.i[r],this.s=!0):(!this.c||this.c&&this.c.dragTarget!==e&&this.c.dragTarget!==this.map)&&Xo(this,e,"pointermove",i,t)},n.qm=function(t,e,i){var n=!(/^(?:mouse|pen)$/.test(t.type)&&0!==i.button);if(e){t.target=e,this.i[t.id]={He:new I(t.viewportX,t.viewportY),target:t.target,Yi:i.timeStamp},"mouse"!==t.type&&Xo(this,e,"pointerenter",i,t);var r=Xo(this,e,"pointerdown",i,t);!this.c&&n&&(e.draggable&&!Qo(this.a,e)?t.dragTarget=e:!this.map.draggable||r.defaultPrevented||Qo(this.a,this.map)||(t.dragTarget=this.map)),Yo(this,t,i)}},n.pm=function(t,e,i){var n=t.id;t.target=null,e?(Xo(this,e,"pointerleave",i,t),Xo(this,e,"pointercancel",i,t)):Xo(this,this.map,"pointercancel",i,t),Wo(this,t,i),this.i={},Vo(n,this.f)},n.u=function(){So(this,!0),this.a.clear(),this.b.clear();var t,e=this.aa;for(t in e)Vo(t,e);for(var i in e=this.f)Vo(i,e);this.c=this.i=this.m=this.map=this.b=this.a=this.O=this.S=null,nd.prototype.u.call(this)},u(Zo,Ro),Zo.prototype.g=function(t){var e,i=t.touches,n=this.a.length();if("touchstart"===t.type&&n>=i.length){for(n=this.a.clone(),e=i.length;e--;)n.remove(i[e].identifier);for(e=n.length();e--;)this.a.remove(n.a[e].id);this.b=n,To(this,"pointercancel",t),this.b.clear()}if(this.J[t.type]){i=Fo(this.o.element),n=t.type;var r,o=(e=t.changedTouches).length;for(this.b.clear(),r=0;r<o;r++){var a=e[r],s=Oo(this.a,a.identifier),u=a.pageX-i.x,l=a.pageY-i.y;if(s)if("touchmove"===n){a=Math.abs(s.viewportX-u);var h=Math.abs(s.viewportY-l);(1<a||1<h||1===a&&1===h)&&(Jo(s,u,l),this.b.push(s))}else"touchend"===n&&(this.a.remove(s.id),this.b.push(s),Lo(s,Mo.LEFT));else s=new Io(u,l,a.identifier,"touch",Mo.LEFT,1),this.a.push(s),this.b.push(s)}To(this,this.J[t.type],t),-1===this.v.indexOf(t.target)&&t.preventDefault()}},Zo.prototype.u=function(){this.v=null,Ro.prototype.u.call(this)},u($o,Ro);var bp={2:"touch",3:"pen",4:"mouse"};function cp(t,e,i,n){cp.l.constructor.call(this,"contextmenu"),this.items=[],this.viewportX=t,this.viewportY=e,this.target=i,this.originalEvent=n}function dp(t){this.Hh=A(this.Hh,this),this.Jh=A(this.Jh,this),this.Ih=A(this.Ih,this),this.v=!1,this.g=-1,this.J=0,dp.l.constructor.call(this,t,[{Ta:"contextmenu",listener:this.Hh},{target:t,Ta:"longpress",listener:this.Jh},{target:t,Ta:"dbltap",listener:this.Ih}])}function ep(t,e,i,n,r){var o=t.map,a=Date.now()-t.J;r?!t.v&&a>t.Vh&&(t.v=!0,r.dispatchEvent(new cp(e,i,r,n)),Ce(o.L(),t.gj,t.Hj,!1,t)):o.de(e,i,t.vo.bind(t,e,i,n))}function fp(t,e,i,n,r){fp.l.constructor.call(this,"wheel"),this.delta=t,this.viewportX=e,this.viewportY=i,this.target=n,this.originalEvent=r}function gp(t){var e="onwheel"in document;this.N=e,this.J=(e?"d":"wheelD")+"elta",this.g=A(this.g,this),gp.l.constructor.call(this,t,[{Ta:(e?"":"mouse")+"wheel",listener:this.g}]),this.v=this.map.ya}function hp(t){this.g=A(this.g,this),Ro.call(this,t,[{Ta:"mousedown",listener:this.g},{Ta:"mousemove",listener:this.g,target:window},{Ta:"mouseup",listener:this.g,target:window},{Ta:"mouseover",listener:this.g},{Ta:"mouseout",listener:this.g},{Ta:"dragstart",listener:this.v}])}function ip(t){var e=t.ya.element.style;if(-1!==jp.indexOf(t))throw Error("InvalidArgument: map is already in use");this.a=t,jp.push(t),e.msTouchAction=e.touchAction="none",$c||!window.PointerEvent&&!window.MSPointerEvent?(this.c=new Zo(this.a),this.b=new hp(this.a)):this.c=new $o(this.a),this.g=new gp(this.a),this.f=new dp(this.a),this.a.zb(this.B,this),nd.call(this)}$o.prototype.g=function(t){var e=window.PointerEvent?t.type:t.type.toLowerCase().replace(/ms/g,""),i=Fo(this.j),n=Oo(this.a,t.pointerId),r=t.pageX-i.x;i=t.pageY-i.y;var o=bp[t.pointerType]||t.pointerType;if(Zc&&"rtl"===x.getComputedStyle(this.o.element).direction&&(r-=(x.devicePixelRatio-1)*this.o.width),!(n||/^pointer(up|out|cancel)$/.test(e)||"touch"===o&&"pointerdown"!==e)){n={x:r,y:i};var a=t.pointerType;"number"==typeof a&&(a=bp[a]),n=new Io(n.x,n.y,t.pointerId,a,t.button,t.buttons),this.a.push(n)}n&&(/^pointer(up|cancel)$/.test(e)?("touch"===o&&this.a.remove(n.id),Lo(n,t.button)):"pointerdown"===e&&("touch"===t.pointerType&&(Po(this.a,"mouse"),Po(this.a,"pen")),Ko(n,t.button)),this.b.push(n),"pointermove"!==e?(Jo(n,r,i),To(this,/^pointer(over|out)$/.test(e)?"pointermove":e,t)):n.viewportX===r&&n.viewportY===i||(Jo(n,r,i),To(this,e,t))),this.b.clear()},u(cp,rd),t("H.mapevents.ContextMenuEvent",cp),u(dp,Ro),n=dp.prototype,n.Jh=function(t){var e=t.currentPointer;"touch"===e.type&&1===t.pointers.length&&ep(this,e.viewportX,e.viewportY,t.originalEvent,t.target)},n.Ih=function(t){"touch"===t.currentPointer.type&&(this.J=Date.now())},n.Hh=function(t){var e=this;-1===this.g?this.g=setTimeout((function(){var i=Fo(e.j),n=t.pageX-i.x;i=t.pageY-i.y,e.g=-1,ep(e,n,i,t)}),this.kh):(clearInterval(this.g),this.g=-1),t.preventDefault()},n.vo=function(t,e,i,n){ep(this,t,e,i,n=n&&Ca(n.dispatchEvent)?n:this.map)},n.gj=["mousedown","touchstart","pointerdown","wheel"],n.Hj=function(){this.v&&(this.v=!1,this.map.dispatchEvent(new rd("contextmenuclose",this.map)))},n.u=function(){var t=this.map.L();clearInterval(this.g),t&&Je(t,this.gj,this.Hj,!1,this),Ro.prototype.u.call(this)},u(fp,rd),t("H.mapevents.WheelEvent",fp),u(gp,Ro),gp.prototype.g=function(t){if(!t.Tl){var e=Fo(this.j),i=t.pageX-e.x;e=t.pageY-e.y;var n,r=this.J,o=t[r+(r+"Y"in t?"Y":"")];if(Zc&&"rtl"===x.getComputedStyle(this.v.element).direction&&(i-=(x.devicePixelRatio-1)*this.v.width),o){var a=Math.abs,s=a(o);o=(!(n=t[r+"X"])||3<=s/a(n))&&(!(n=t[r+"Z"])||3<=s/a(n))?((0<o)-(0>o))*(this.N?1:-1):0}(i=new fp(o,i,e,null,t)).delta&&(t.stopImmediatePropagation(),t.preventDefault(),this.map.de(i.viewportX,i.viewportY,this.U.bind(this,i)))}},gp.prototype.U=function(t,e){var i,n,r=t.target=e||this.map;setTimeout((function(){r.dispatchEvent(t),t.f||(i=t.originalEvent,(n=new x.WheelEvent("wheel",i)).Tl=1,i.target.dispatchEvent(n))}),0)},u(hp,Ro),hp.prototype.g=function(t){var e,i=t.type,n=Fo(this.j);n={x:t.pageX-n.x,y:t.pageY-n.y},(e=this.a.a[0])||(e=new Io(n.x,n.y,1,"mouse"),this.a.push(e)),this.b.push(e),Jo(e,n.x,n.y),/^mouse(?:move|over|out)$/.test(i)?To(this,"pointermove",t):(/^mouse(down|up)$/.test(i)&&(n=t.which-1,"up"===Go.RegExp.$1?Lo(e,n):Ko(e,n)),To(this,i.replace("mouse","pointer"),t)),this.b.clear()},hp.prototype.v=function(t){t.preventDefault()},u(ip,nd),t("H.mapevents.MapEvents",ip),ip.prototype.c=null,ip.prototype.b=null,ip.prototype.g=null,ip.prototype.f=null;var jp=[];function kp(t,e){var i;if(e=void 0===e?{}:e,kp.l.constructor.call(this),-1!==lp.indexOf(t))throw new D(kp,0,"events are already used");this.a=i=t.a,this.j=t,lp.push(t),i.draggable=!0,this.i=e.kinetics||{duration:600,ease:Nl},this.m=e.modifierKey||"Alt",this.enable(e.enabled),this.c=i.ya,this.f=this.c.element,this.g=0,i.addEventListener("dragstart",this.ei,!1,this),i.addEventListener("drag",this.Ek,!1,this),i.addEventListener("dragend",this.di,!0,this),i.addEventListener("wheel",this.Uk,!1,this),i.addEventListener("dbltap",this.Pk,!1,this),i.addEventListener("pointermove",this.Fk,!1,this),Be(this.f,"contextmenu",this.Dk,!1,this),t.zb(this.B,this)}Fc(jp),ip.prototype.B=function(){this.a=null,this.c.B(),this.g.B(),this.f.B(),this.b&&this.b.B(),jp.splice(jp.indexOf(this.a),1),nd.prototype.B.call(this)},ip.prototype.dispose=ip.prototype.B,ip.prototype.Dm=function(){return this.a},ip.prototype.getAttachedMap=ip.prototype.Dm,u(kp,nd),t("H.mapevents.Behavior",kp);var lp=[];Fc(lp),kp.prototype.b=0;var mp={PANNING:1,PINCH_ZOOM:2,WHEEL_ZOOM:4,DBL_TAP_ZOOM:8,FRACTIONAL_ZOOM:16,TILT:32,HEADING:64};kp.Feature=mp;var np=mp.PANNING,op=mp.PINCH_ZOOM,pp=mp.WHEEL_ZOOM,qp=mp.DBL_TAP_ZOOM,rp=mp.FRACTIONAL_ZOOM,sp=mp.TILT,tp=mp.HEADING,up=np|op|pp|qp|rp|sp|tp;function vp(t,e){if(t!==+t||t%1||0>t||2147483647<t)throw new D(e,0,"integer in range [0...0x7FFFFFFF] required")}function wp(t,e,i){var n,r="touch"===e.currentPointer.type,o=0;if(n=!r){n=t.m;var a,s=e.originalEvent;a=s.getModifierState?s.getModifierState(n):!!s[n.replace(/^Control$/,"ctrl").toLowerCase()+"Key"],n=a}return n?o|=sp|tp:(o|=np,r&&2===(e=e.pointers).length&&(o|=op|tp,i?55>Ad(e[0].viewportY-e[1].viewportY)&&(o|=sp):t.Nh&ul.TILT&&(o|=sp))),((o&=t.b)&sp?ul.TILT:0)|(o&tp?ul.HEADING:0)|(o&op?ul.ZOOM:0)|(o&np?ul.COORD:0)}function xp(t){var e=t.pointers;return t=e[0],e=e[1],t=[t.viewportX,t.viewportY],e&&t.push(e.viewportX,e.viewportY),t}function yp(t,e,i,n,r){var o=+i-+e;if(t=t.a.b,isNaN(+e))throw Error("start zoom needs to be a number");if(isNaN(+i))throw Error("to zoom needs to be a number");0!==o&&(t.startControl(null,n,r),t.control(0,0,6,0,0,0),t.endControl(!0,(function(t){t.zoom=i})))}function zp(t,e){return Wa.apply(null,arguments),t}function Ap(){this.a={}}function Bp(t,e){for(var i in e)if(e.hasOwnProperty(i)){var n,r=e[i],o=t.a[i]||(t.a[i]=[]),a=r.length;for(n=0;n<a;n++)o.push(new Cp(r[n]))}}function Dp(t,e,i,n){var r=(t=t.a[e])?t.length:0,o=[];for(e=0;e<r;e++)t[e].Ad(i,n)&&o.push(t[e]);return o}function Cp(t){var e,i=t.boxes;if(this.label=t.label,this.min=t.minLevel,this.max=t.maxLevel,this.b=[],i&&(e=i.length)){var n=i[0],r=new K(n[0],n[1],n[2],n[3]);for(this.b.push(r),this.a=new K(n[0],n[1],n[2],n[3]),t=1;t<e;t++)r=new K((n=i[t])[0],n[1],n[2],n[3]),this.b.push(r),this.a.nc(r,!1,this.a)}}function W(t,e,i,n,r,o){if(!t||!e)throw Error('Parameters "scheme" and "host" must be specified');this.Cl(t),this.Ig(e),this.Md(i),this.Bl(r),this.rl(o),this.Oi(n)}function Ep(t,e){var i,n=x.document,r=n&&n.createElement("a"),o="";if(n){if(e){var a=(i=n.getElementsByTagName("base")[0])&&i.href,s=n.head,u=i||s.appendChild(n.createElement("base"));u.href=e}r.href=t,o=r.href,e&&(i?i.href=a:s.removeChild(u))}else/[\w]+:\/\//.test(t)&&(o=t);if(t=(a=/(?:(\w+):\/\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\/[^?#]*)?(\?[^#]+)?(#.*)?/.exec(o))[1],u=a[4],e=a[5],s=a[6],n=a[7],i=a[8],!a[2]&&u&&/@/.test(u)&&(u=u.split("@")[1]),a=u,s=s&&0<s.length?s.substr(1):"",u={},n)for(r=/([?&]?([^=&+]+))(=([^&]+))?/g;o=r.exec(n);)u[decodeURIComponent(o[2])]=o[4]?decodeURIComponent(o[4]):void 0;return new W(t,a,s,u,isNaN(+e)?void 0:+e,i&&0<i.length?i.substr(1):"")}kp.DRAGGING=np,kp.WHEELZOOM=pp,kp.DBLTAPZOOM=qp,kp.FRACTIONALZOOM=rp,kp.prototype.disable=function(t){var e=this.b;t!==B?(vp(t,this.disable),e^=e&t):e=0,this.c.endInteraction(!0),this.b=e,this.a.draggable=0<(e&(np|sp|tp|op))},kp.prototype.disable=kp.prototype.disable,kp.prototype.enable=function(t){var e=this.b;t!==B?(vp(t,this.enable),e|=t&up):e=up,this.b=e,this.a.draggable=0<(e&(np|sp|tp|op))},kp.prototype.enable=kp.prototype.enable,kp.prototype.isEnabled=function(t){return vp(t,this.isEnabled),t===(this.b&t)},kp.prototype.isEnabled=kp.prototype.isEnabled,n=kp.prototype,n.Nh=0,n.ei=function(t){var e=wp(this,t,!0);if(this.Nh=e){var i=this.c;if(t=xp(t),i.startInteraction(e,this.i),i.interaction.apply(i,t),this.b&pp&&!(this.b&rp)&&(e=t[0],i=t[1],this.g)){t=this.a.vb();var n=(0>this.g?zd:yd)(t);t!==n&&(this.g=0,yp(this,t,n,e,i))}}},n.Ek=function(t){var e=wp(this,t,!1);if(e!==this.Nh)"pointerout"!==t.originalEvent.type&&"pointerover"!==t.originalEvent.type&&(this.di(t),this.ei(t));else if(e){e=this.c;var i=xp(t);e.interaction.apply(e,i),t.originalEvent.preventDefault()}},n.di=function(t){wp(this,t,!1)&&this.c.endInteraction(!this.i)},n.Uk=function(t){if(!t.defaultPrevented&&this.b&pp){var e=t.delta,i=this.a.vb(),n=this.a,r=n.ic().type;n=this.b&rp?i-e:(0>-e?zd:yd)(i)-e,r!==Vj.P2D&&r!==Vj.WEBGL&&r!==Vj.HARP||(yp(this,i,n,t.viewportX,t.viewportY),this.g=e),t.preventDefault()}},n.Fk=function(){},n.Pk=function(t){var e=t.currentPointer,i=this.a.vb(),n=t.currentPointer.type,r=this.a.ic().type;(r===Vj.P2D||r===Vj.WEBGL||r===Vj.HARP)&&this.b&qp&&(t="mouse"===n?0===t.originalEvent.button?-1:1:0<t.pointers.length?1:-1,yp(this,i,t=this.b&rp?i-t:(0>-t?zd:yd)(i)-t,e.viewportX,e.viewportY))},n.Dk=function(t){return!(this.b&qp&&(t.preventDefault(),1))},n.B=function(){var t=this.a;t&&(t.draggable=!1,t.removeEventListener("dragstart",this.ei,!1,this),t.removeEventListener("drag",this.Ek,!1,this),t.removeEventListener("dragend",this.di,!0,this),t.removeEventListener("wheel",this.Uk,!1,this),t.removeEventListener("dbltap",this.Pk,!1,this),t.removeEventListener("pointermove",this.Fk,!1,this),this.a=null),this.f&&(this.f.style.msTouchAction="",Je(this.f,"contextmenu",this.Dk,!1,this),this.f=null),this.i=this.c=null,lp.splice(lp.indexOf(this.j),1),nd.prototype.B.call(this)},kp.prototype.dispose=kp.prototype.B,t("H.mapevents.buildInfo",(function(){return Ef("H-mapevents","1.30.3","a2dc7f9")})),R.prototype.O=ca(3,(function(t){var e=this.getCache(),i=this;if(t!==y){C(t,Dk,R.prototype.O,0);var n=t}else n=hl;n!==e&&e.qa((function(t,e,r){return!!i.gc(t)&&(n.add(t,e,r),!0)})),this.U=n})),Th.prototype.b=ca(2,(function(t){this.i=t,(t=this.getState())!==Qh.INIT&&t!==Qh.LOADING&&ai(this)})),Cp.prototype.Ad=function(t,e){if(t>=this.min&&t<=this.max){if(!(t=this.b.length)||!this.a)return!0;if(this.a.Ad(e))for(;t--;)if(this.b[t].Ad(e))return!0}return!1},t("H.service.Url",W),W.parse=Ep;var Fp=0;function Hp(t){function e(t,e){return encodeURIComponent(t)+(void 0===e?"":"="+encodeURIComponent(e).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16)})))}var i,n=[],r=t.a;for(i in r)if(r.hasOwnProperty(i)&&"function"!=typeof r[i]){var o=t.a[i];C(o,Ip)?o.Rl.forEach((function(t){n.push(e(i,t))})):n.push(e(i,o))}return 0<n.length?"?"+n.join("&"):""}function Jp(t){var e=Ef("H-service","1.30.3","2978c8b");return t.a.xnlp="CL_JSMv3."+e.version,t}function Gp(t){var e,i=0;for(e in t.a)if(t.a.hasOwnProperty(e)&&"function"!=typeof t.a[e]&&0<++i)break;return!i}function Ip(t){var e;if(!yc(t))throw new D(Ip,0,t);for(e=0;e<t.length;e++){var i=t[e];if(!zc(i)&&!Cc(i))throw new D(Ip,0,"The array can only contain strings and numbers")}this.Rl=t}W.prototype.clone=function(){Fp++;var t,e={};for(t in this.a)e[t]=this.a[t];return new W(this.s,this.f,this.c,e,this.g,this.b)},W.prototype.clone=W.prototype.clone,W.prototype.Cl=function(t){if(!t||"string"!=typeof t)throw Error('The "scheme" parameter must be a non-empty string.');return this.s=t,this},W.prototype.setScheme=W.prototype.Cl,W.prototype.Hn=function(){return this.s},W.prototype.getScheme=W.prototype.Hn,W.prototype.Ig=function(t){if(!t||"string"!=typeof t||"-"===t.charAt(0)||"."===t.charAt(0)||"."===t.charAt(t.length-1))throw Error('The "host" parameter is not a valid host name.');return this.f=t,this},W.prototype.setHost=W.prototype.Ig,W.prototype.bn=function(){return this.f},W.prototype.getHost=W.prototype.bn,W.prototype.Md=function(t){return this.c=t||void 0,this},W.prototype.setPath=W.prototype.Md,W.prototype.un=function(){return this.c},W.prototype.getPath=W.prototype.un,W.prototype.Oi=function(t){if(t){if("object"!=typeof t)throw Error('Parameter "params" must be an object.');this.a=t}else this.a={};return this},W.prototype.setQuery=W.prototype.Oi,W.prototype.jk=function(){return!Gp(this)},W.prototype.hasQuery=W.prototype.jk,W.prototype.getQuery=function(){return this.a},W.prototype.getQuery=W.prototype.getQuery,W.prototype.Bl=function(t){if(t&&isNaN(parseInt(t,10)))throw Error('Parameter "port" must be a number or undefined');return this.g=+t||void 0,this},W.prototype.setPort=W.prototype.Bl,W.prototype.yn=function(){return this.g},W.prototype.getPort=W.prototype.yn,W.prototype.rl=function(t){return this.b=t||void 0,this},W.prototype.setAnchor=W.prototype.rl,W.prototype.ud=function(){return this.b},W.prototype.getAnchor=W.prototype.ud,W.prototype.I=function(t){if("object"!=typeof t)throw Error('Parameter "other" must be an object.');var e,i=this.a;for(e in t)t.hasOwnProperty(e)&&"function"!=typeof t[e]&&(i[e]=t[e]);return this},W.prototype.mergeQuery=W.prototype.I,W.prototype.Ma=function(t){if(!t||"string"!=typeof t)throw Error('Parameter "subDomain" must be a non-empty string');return"."===t.substr(t.length-1)&&(t=t.substr(0,t.length-1)),this.Ig(t+"."+this.f)},W.prototype.addSubDomain=W.prototype.Ma,W.prototype.F=function(t){if(!t||"string"!=typeof t)throw Error('Parameter "subPath" must be a non-empty string');return this.Md((this.c?this.c+"/":"")+t)},W.prototype.addSubPath=W.prototype.F,W.prototype.toString=function(){return[this.s+"://",this.f,this.g?":"+this.g:"",this.c||!Gp(this)||this.b?"/":"",this.c?encodeURI(this.c):"",Hp(this),this.b?"#"+encodeURIComponent(this.b):""].join("")},W.prototype.toString=W.prototype.toString,W.MultiValueQueryParameter=Ip,Ip.prototype.Sn=function(){return this.Rl},Ip.prototype.getValues=Ip.prototype.Sn;var Kp=Function("return this")();function Lp(){}rc("monospace serif"),Lp.prototype.pop=function(t){return this[t]||(this[t]=[]),this[t].pop()||Kp.document.createElement("canvas")},Lp.prototype.push=function(t,e){this[e]||(this[e]=[]),this[e].push(t)};var Mp=new Lp;function Np(){var t=decodeURIComponent(x.H.getScriptPath());return Ep(t=t?"/"===t[t.length-1]?t.substring(0,t.length-1):t:"https://js.api.here.com/v3/3.1.30.3").F("styles")}function Op(t,e,i,n,r,o,a){var s=this;a=a||{},o=o||{};var u=t.D().clone().F(e+"/"+t.Cc()+"/"+i).I(o),l=t.Fh();this.J=t,this.W=u,sk.call(this,{tileSize:n,max:512===n?19:20,min:512===n?2:0,getURL:function(t,e,i){var o=s.W.clone();return l&&o.Ma(l[(i+e+t)%l.length]),o.F(i+"/"+t+"/"+e+"/"+n+"/"+r),o.toString()},crossOrigin:a.crossOrigin,headers:a.headers,uri:u.toString().replace(/_/g,"")+n,engineType:a.engineType}),this.kb=e,this.s=i,this.a=o,this.yb=i.split(".")[0],this.ng=A(this.ng,this),this.getCopyrights=this.ta,t.addEventListener("versionupdate",this.ng)}function Pp(t,e){if(e=void 0===e?{}:e,!t.qk)throw new Xc(t);Pp.l.constructor.call(this);var i=Qp(this,e);if(!i.baseUrl&&!i.platformBaseUrl)throw new D(t,0,'either "baseUrl" or "platformBaseUrl" must be specified');this.c=(i.baseUrl?i.baseUrl:i.platformBaseUrl).clone(),(t=i.baseUrl?e:i).host&&this.c.Ig(t.host),t.subDomain&&this.c.Ma(t.subDomain),t.path&&this.c.Md(t.path),Jp(this.c),this.gf=i.headers||{}}function Qp(t,e){return t=t.a(),e?zp({},t,e):t}function Rp(t,e,i){return function(n){return"function"!=typeof n.json?Promise.reject(i(Sp(e,n))):n.json().then((function(e){return i(t.b(e))}),(function(){return i(Sp(e,n))}))}}function Sp(t,e){return Error((e.statusText?"["+e.statusText+"] ":"")+t+" request failed")}function Y(t){var e=(t=zp({},this.b,t)).apikey||t.apiKey,i=t.baseUrl;if(i=e?i?0:"baseUrl":"apikey")throw new D(Y,0,'"'+i+'" must be specified');this.ul(t.baseUrl),this.a=e,this.c.I({apikey:e}),this.f=t.headers||{},this.g=Ua(t.servicesConfig||{})}function Tp(t){Tp.l.constructor.call(this,Tp,t),t=Qp(this,t),this.bc=t.shards,(this.Ra=t.ignoreTypes?null:t.type)&&this.D().Ma(this.Ra),this.cc=t.version,this.Xc=new Ap,this.vi={},this.Rf=0,"newest"===this.cc&&this.ph()}function Vp(t,e){for(var i={},n=t[e+"s"][e],r=n.length;r--;)i[n[r].id]=n[r];t[e+"s"]=i}function Wp(t,e,i){var n,r=this,o=+(i=i||{}).min,a=+i.max;i.tileSize=i.tileSize||512,i.min=o?Yd(o,1,17):1,i.min+=Bk(i.tileSize,1),i.max=a?Yd(a,1,17):17,Wp.l.constructor.call(this,i),C(t,Xp,Wp,0),C(e,Ph,Wp,1),this.o=t,e.b&&e.b("OMV"),this.ac(e,!0),this.s=function(){Yp(r),r.reload(!1)},t.addEventListener("versionupdate",this.s),Yp(this),Wp.prototype.J=(n=/^v2\/vectortiles\/(.+)\/mc$/.exec(t.D().c))?n[1]:B+""}function Yp(t){var e=t.yd("_#-;,:","_#-;,:","_#-;,:");t.v=new RegExp("^"+e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&").replace(/_#-;,:/g,"\\d+")+"$")}function $p(t,e,i){var n=t.ub().getState()===Qh.READY,r=zc(e),o=zc(i);r&&(t.c=e),o&&(t.a=i),(r||o)&&(t.C=!0,n&&t.g())}function Xp(t){Xp.l.constructor.call(this,Xp,t),t=Qp(this,t).mapVersion,this.df=tc(t)?t:aq[this.D().toString()],tc(this.df)||bq(this)}t("H.service.util.eval",(function(a){return eval(a)})),u(Op,sk),Op.prototype.MAX_STORE_TIME=2592e6,n=Op.prototype,n.u=function(){sk.prototype.u.call(this),this.J.removeEventListener("versionupdate",this.ng)},n.ta=function(t,e){return Dp(this.J.ta(),this.yb,e,t)},n.ng=function(){var t=this.J;this.W=t.D().clone().F(this.kb+"/"+t.Cc()+"/"+this.s).I(this.a),this.reload(!1)},n.fh=function(){return ld()},n.ge=function(){return ld()?kd():Op.l.ge.call(this)},u(Pp,F),t("H.service.Service",Pp),Pp.prototype.a=function(){return{}},Pp.prototype.D=function(){return this.c},Pp.prototype.getUrl=Pp.prototype.D,Pp.prototype.K=function(t,e,i,n){return(n=new rf(void 0===n?"application/json":n,t.toString(),fe,{headers:this.gf})).then(e,Rp(this,t,i)),n},Pp.prototype.b=function(t){return Error(t.message)},t("H.service.Platform",Y),Y.prototype.b={apikey:null,baseUrl:new W("https","hereapi.com")},Y.prototype.ul=function(t){this.c=Jp(t.clone()),this.a=t=this.a,this.c.I({apikey:t})},Y.prototype.setBaseUrl=Y.prototype.ul,Y.prototype.hc=function(){return this.c},Y.prototype.getBaseUrl=Y.prototype.hc,Y.prototype.Ya=function(t,e){try{return t.qk=!0,new t(zp({platformBaseUrl:this.hc(),headers:this.f},this.g[t.CONFIG_KEY]||{},e||{}))}finally{delete t.qk}},Y.prototype.createService=Y.prototype.Ya,u(Tp,Pp),t("H.service.MapTileService",Tp),Tp.prototype.a=function(){return{subDomain:"maps.ls",path:"maptile/2.1",type:"base",version:"newest",shards:["1","2","3","4"]}},Tp.CONFIG_KEY="maptile",Tp.prototype.Fh=function(){return this.bc},Tp.prototype.ek=function(){return this.Ra},Tp.prototype.getType=Tp.prototype.ek,Tp.prototype.Cc=function(){return this.cc},Tp.prototype.getVersion=Tp.prototype.Cc,Tp.prototype.Si=function(t){this.cc=t},Tp.prototype.ta=function(){return this.Rf||(this.cc&&"newest"!==this.cc||"traffic"===this.Ra)&&this.Re(),this.Xc},Tp.prototype.getCopyrights=Tp.prototype.ta,n=Tp.prototype,n.$i=function(t){var e;if(Vp(t=t.response,"map"),Vp(t,"scheme"),Vp(t,"tiletype"),Vp(t,"format"),Vp(t,"resolution"),Vp(t,"language"),"newest"===this.cc&&"traffic"!==this.Ra)for(e in t.maps)t.maps[e].hash&&t.maps[e].newest&&(this.Si(t.maps[e].hash),this.dispatchEvent("versionupdate"));this.Lh=t,this.dispatchEvent("infoupdate")},n.Zi=function(t){Bp(this.Xc,t),this.dispatchEvent("copyrightupdate")},n.ph=function(){var t=this,e=this.D().clone().F("info").I({output:"json"});this.bc&&e.Ma(this.bc[0]),this.K(e,(function(e){t.$i(e)}),(function(t){throw t}))},n.Re=function(){var t=this,e=this.D().clone().F("copyright").F(t.Cc()).I({output:"json"});this.bc&&e.Ma(this.bc[0]),this.Rf=1,this.K(e,(function(e){t.Rf=2,t.Zi(e)}),(function(e){throw t.Rf=-1,e}))},n.xh=function(){return this.Lh},Tp.prototype.getInfo=Tp.prototype.xh,Tp.prototype.Me=function(t,e,i,n,r,o){var a,s=this.D().clone().F(t+"/"+this.Cc()+"/"+e+"/"+i+"/"+n).I(r||{}).toString(),u=0,l=s.length;if(0!==l)for(a=0;a<l;a++)u=(u<<5)-u+s.charCodeAt(a),u|=0;return s=u,(u=this.vi[s])||(u=new Op(this,t,e,i,n,r,zp({headers:this.gf},o||{})),this.vi[s]=u),u},Tp.prototype.createTileProvider=Tp.prototype.Me,Tp.prototype.wc=function(t,e,i,n,r,o,a,s){return new ll(t=this.Me(t,e,i,n,r,s),{opacity:o,dark:!!a})},Tp.prototype.createTileLayer=Tp.prototype.wc,Y.prototype.Ah=function(t){return this.Ya(Tp,t)},Y.prototype.getMapTileService=Y.prototype.Ah,u(Wp,R),t("H.service.omv.Provider",Wp),Wp.prototype.Ed=df,Wp.prototype.providesOMV=Wp.prototype.Ed,Wp.prototype.gc=function(t){return this.v.test(t)},Wp.prototype.cacheFilter=Wp.prototype.gc,Wp.prototype.yd=function(t,e,i){return Zp(this.o,t,e,i).toString()},Wp.prototype.getTileKey=Wp.prototype.yd,Wp.prototype.Ob=function(){return this.N},Wp.prototype.getCache=Wp.prototype.Ob,Wp.prototype.MAX_STORE_TIME=2592e6,Wp.prototype.fh=function(){return ld()},Wp.prototype.ge=function(){return ld()?kd():Wp.l.ge.call(this)},Wp.prototype.K=function(t,e,i,n,r){return this.o.jb(t,e,i,n,r)},Wp.prototype.requestInternal=Wp.prototype.K,Wp.prototype.rc=function(t){t.b&&t.b("OMV"),this.ac(t)},Wp.prototype.setStyle=Wp.prototype.rc,Wp.prototype.ua=function(){return Wp.l.ub.apply(this)},Wp.prototype.getStyle=Wp.prototype.ua,Wp.prototype.ub=function(){var t,e=Wp.l.ub.apply(this);return this.C&&(e.getState()===Qh.READY?(t=e.vd())&&t.global&&(this.c&&(t.global.ux_language=this.c),this.a&&(t.global.ux_language_fallback=this.a),e=new Th(t,e.hc())):e.load()),e},Wp.prototype.u=function(){Wp.l.u.call(this),this.o.removeEventListener("versionupdate",this.s)},Wp.prototype.N=new Dk(256),Wp.prototype.ta=function(t,e){return Dp(this.o.ta(),this.J,e,t)},Wp.prototype.getCopyrights=Wp.prototype.ta,u(Xp,Pp),t("H.service.omv.Service",Xp),Xp.prototype.a=function(){return{subDomain:"vector",path:"v2/vectortiles/base/mc"}},Xp.CONFIG_KEY="omv";var aq={};function bq(t){t.K(t.D().clone().F("../../info"),(function(e){e=e.mapVersion;var i=t.D().toString();t.df=e,e!==aq[i]&&(aq[i]=e,t.dispatchEvent("versionupdate"))}),(function(){}))}function Zp(t,e,i,n){return e=t.D().clone().F(n+"/"+e+"/"+i+"/omv"),tc(t.df)&&e.I({mv:t.df}),e}function cq(){this.a={}}Fc(aq),Xp.prototype.nn=function(){return this.df},Xp.prototype.getMapVersion=Xp.prototype.nn,Xp.prototype.qd=function(t,e){return new ll(new Wp(this,t,e),{max:22})},Xp.prototype.createLayer=Xp.prototype.qd,Xp.prototype.jb=function(t,e,i,n,r){return this.K(Zp(this,t,e,i),(function(t){return t.arrayBuffer().then(n,r)}),r,"arraybuffer")},Xp.prototype.he=function(t){return Np().F(t)},Xp.prototype.Ch=function(t,e){if(!Ca(t))throw new D(this.Ch,0,'"onResult" must be a function');if(!Ca(e))throw new D(this.Ch,1,'"onError" must be a function');return this.K(this.D().clone().Md("v2/vectortiles/pviews"),t,e)},Xp.prototype.getPoliticalViews=Xp.prototype.Ch,Y.prototype.$j=function(t){return this.Ya(Xp,t)},Y.prototype.getOMVService=Y.prototype.$j,Xp.prototype.Re=function(){this.Xc=new Ap,this.K(this.D().clone().F("../../copyrights"),A(this.Zi,this),hd)},Xp.prototype.Zi=function(t){Bp(this.Xc,t),this.dispatchEvent("copyrightupdate")},Xp.prototype.ta=function(){return this.Xc||this.Re(),this.Xc},Xp.prototype.getCopyrights=Xp.prototype.ta,Y.prototype.Sf=function(t,e,i,n,r,o){var a=this.Ah(),s=this.Ah({type:"aerial"}),u=this.dk(),l=this.$j(),h=Vj.WEBGL,c={},f={crossOrigin:"anonymous"};if(Da(t)){var p=t;"crossOrigin"in p&&(f.crossOrigin=p.crossOrigin),t=p.tileSize,e=p.ppi,i=p.lg,n=p.lg2,r=p.style,o=p.pois,p.engineType&&(h=p.engineType,f.engineType=h)}var d=t||512;if(0>[72,250,320,500].indexOf(+e)){if(e!==B)throw new D(this.Sf,1,e)}else c.ppi=+e;if(i&&(c.lg=i),n&&(c.lg2=n),r&&(c.style=r),o&&(c.pois=o),t=function(t,e,i,n,r){return t.wc(e,i,d,n,c,1,r,f)},h===Vj.HARP&&!H.map.render.harp)throw new D(this.Sf,0,"HARP engine is not supported, module not found");return e=h===Vj.WEBGL?new Th(l.he("omv/miami/normal.day.yaml").toString()):new H.map.render.harp.Style(l.he("harp/miami/normal.day.json").toString()),i=h===Vj.WEBGL?new Th(l.he("omv/miami/truck.day.yaml").toString()):new H.map.render.harp.Style(l.he("harp/miami/normal.day.json").toString()),n={engineType:h},$p((e=l.qd(e,n)).ga(),c.lg,c.lg2),$p((i=l.qd(i,n)).ga(),c.lg,c.lg2),l=u.zj(c.lg?{lg:c.lg,i18n:!0,engineType:h}:{engineType:h}),{vector:{normal:{map:e,truck:i,traffic:u.yj(void 0,h),trafficincidents:l}},raster:{normal:{xbase:t(a,"xbasetile","normal.day","png8",!1),xbasenight:t(a,"xbasetile","normal.night","png8",!0),base:t(a,"basetile","normal.day","png8",!1),basenight:t(a,"basetile","normal.night","png8",!0),map:t(a,"maptile","normal.day","png8",!1),mapnight:t(a,"maptile","normal.night","png8",!0),trafficincidents:l,transit:t(a,"maptile","normal.day.transit","png8",!1),labels:t(a,"labeltile","normal.day","png",!1)},satellite:{xbase:t(s,"xbasetile","hybrid.day","jpg",!0),base:t(s,"basetile","hybrid.day","jpg",!0),map:t(s,"maptile","hybrid.day","jpg",!0),labels:t(s,"labeltile","hybrid.day","png",!0)},terrain:{xbase:t(s,"xbasetile","terrain.day","jpg",!1),base:t(s,"basetile","terrain.day","jpg",!1),map:t(s,"maptile","terrain.day","jpg",!1),labels:t(s,"labeltile","terrain.day","png",!1)}}}},Y.prototype.createDefaultLayers=Y.prototype.Sf,cq.prototype.Cb=function(t,e){var i,n=t+e;return(i=this.a[n])?i:(t=(t=dq.MARKER.replace("{{icon}}",eq[t]||eq.OTHER)).replace("{{color}}",fq[e]||fq.BLOCKING),e={size:{w:26,h:33},anchor:{x:13,y:30},hitArea:new Li(Mi.POLYGON,gq.MARKER)},this.a[n]=new Ij(t,e))};var dq={MARKER:'<svg width="26" height="33" enable-background="new 0 0 26 33" viewBox="0 0 26 33" xmlns="http://www.w3.org/2000/svg"><path d="m26 33h-26v-33h26z" fill="#8c8c8c" opacity="0"/><path d="m17 29.566c0 1.116-1.791 2.022-4 2.022s-4-.906-4-2.022c0-1.118 1.791-2.026 4-2.026s4 .908 4 2.026" fill="#878787" opacity=".6"/><path d="m1.795 17.971c-1.562-1.555-1.574-3.828-.028-5.655l8.343-10.021c.769-.895 1.795-1.384 2.894-1.384 1.117 0 2.197.521 2.889 1.394l8.338 10.014c1.588 1.854 1.578 4.022-.029 5.65l-11.202 11.202z" fill="{{color}}"/>{{icon}}</svg>'},eq={CONGESTION:'<path style="fill:#FFFFFF;" d="M12.966,1.177c0.965,0,1.894,0.442,2.496,1.204l8.378,10.258c1.362,1.592,1.482,3.477,0,4.979L12.994,28.464L2.143,17.618c-1.381-1.375-1.38-3.348,0-4.979l8.314-10.258C11.174,1.547,12.085,1.177,12.966,1.177 M12.967,0.177L12.967,0.177c-1.247,0-2.408,0.551-3.269,1.552l-8.332,10.28c-1.711,2.022-1.688,4.567,0.07,6.317l10.85,10.845l0.707,0.707l0.707-0.707l10.847-10.846c1.784-1.807,1.803-4.292,0.053-6.337L16.237,1.748C15.462,0.769,14.236,0.177,12.967,0.177L12.967,0.177z M16.645,10.405l-2.025-2.22c-0.48-0.51-1.15-0.8-1.84-0.8H9.53c-0.69,0-1.36,0.29-1.84,0.8l-1.94,2.22c-0.39,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.44l0.255-0.539c0.204-0.431,0.456-0.837,0.753-1.21l0.962-1.211l0.83-0.9c0.32-0.35,0.72-0.63,1.15-0.82H8.23c-0.28,0-0.55-0.07-0.79-0.22l-0.28-0.17l1.27-1.45c0.28-0.31,0.68-0.48,1.1-0.48h3.25c0.42,0,0.82,0.17,1.1,0.48l1.354,1.54H16.645z M18.31,12.205c-0.35-0.37-0.81-0.63-1.3-0.74c-0.18-0.04-0.36-0.06-0.54-0.06h-3.24c-0.7,0-1.37,0.29-1.84,0.8l-1.13,1.22l-0.82,1c-0.38,0.63-0.59,1.35-0.59,2.09v1.64c0,0.69,0.56,1.25,1.25,1.25h1.75v-1h5.99v1h1.75c0.69,0,1.25-0.56,1.25-1.25v-1.64c0-0.74-0.2-1.46-0.59-2.09L18.31,12.205z M12.1,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C12.35,16.993,12.238,17.105,12.1,17.105z M18.59,17.105h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C18.84,16.993,18.728,17.105,18.59,17.105z M18.56,14.505c-0.24,0.15-0.51,0.22-0.79,0.22h-5.85c-0.28,0-0.55-0.07-0.78-0.22l-0.29-0.17l1.27-1.45c0.15-0.16,0.33-0.28,0.53-0.37c0.18-0.07,0.38-0.11,0.58-0.11h3.24c0.24,0,0.48,0.06,0.68,0.16c0.16,0.08,0.3,0.19,0.42,0.32l1.27,1.45L18.56,14.505z M8.42,13.03h-1c-0.138,0-0.25-0.112-0.25-0.25v-1c0-0.138,0.112-0.25,0.25-0.25h1c0.138,0,0.25,0.112,0.25,0.25v1C8.67,12.918,8.559,13.03,8.42,13.03z"/>',ROADWORKS:'<path d="m13.004 1.411c.964 0 1.894.441 2.496 1.204l8.346 10.023c1.363 1.592 1.482 3.477 0 4.979l-10.846 10.847-10.852-10.846c-1.381-1.375-1.379-3.348 0-4.979l8.346-10.023c.717-.835 1.628-1.205 2.51-1.205m0-1c-1.248 0-2.408.551-3.268 1.552l-8.356 10.035c-1.718 2.033-1.695 4.578.064 6.328l10.85 10.845.706.707.707-.707 10.846-10.846c1.784-1.808 1.803-4.293.053-6.337l-8.337-10.012c-.769-.973-1.996-1.565-3.265-1.565zm-.575 15.264c.018-.332-.13-.651-.394-.851l-2.945-2.235-.21.36c-.22.39-.41.78-.58 1.19l-.677 2.129-1.364 3.051h1.314l2.109-4.672 1.317 1.212.138 3.46h1.092zm6.16-1.327c-.401-.54-1.209-.539-1.609.001l-1.17 1.58-2.29-1.74-.139-4.054c-.011-.276-.134-.535-.342-.716l-.7-.61c-.185-.161-.422-.25-.667-.25h-1.885c-.335 0-.648.168-.833.447l-1.144 1.723 7.58 5.76-1.86 2.51c-.098.132-.004.32.161.32h6.648l1.142-1.077zm-8.79-2.989-.876-.665.841-1.018.965.043zm1.63 1.24.969-1.781.118 2.61zm2.76-5.79c-.64 0-1.16.52-1.16 1.16 0 .65.52 1.17 1.16 1.17s1.16-.52 1.16-1.17c0-.64-.52-1.16-1.16-1.16z" fill="#fff"/>',ACCIDENT:'<path style="fill:#FFFFFF;" d="M12.998,1.091c0.964,0,1.894,0.442,2.496,1.204l8.346,10.344c1.363,1.592,1.482,3.477,0,4.979L12.994,28.465L2.143,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.344C11.205,1.462,12.115,1.091,12.998,1.091 M12.998,0.091L12.998,0.091c-1.248,0-2.408,0.551-3.269,1.552L1.364,12.011c-1.708,2.021-1.685,4.566,0.073,6.316l10.85,10.845l0.707,0.707l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337l-8.327-10.32C15.494,0.684,14.268,0.091,12.998,0.091L12.998,0.091z M7.83,18.982l-3.309-1.855l0.945,1.855H7.83z M16.111,19h3.942l1.596-2L16.111,19z M10.512,20.064l1.021-1.021l1.632,0.076c0.329,0.018,0.651-0.022,0.963-0.123c0.626-0.206,1.122-0.76,1.288-1.44l0.264-1.089l2.066-0.93c0.373-0.17,0.673-0.42,0.861-0.731c0.275-0.449,0.405-0.97,0.369-1.498L18.9,11.676l1.021-1.021l-0.724-0.724l-0.427,0.427l-0.121-0.364c-0.201-0.603-0.54-1.151-0.989-1.6l-1.159-1.159c-0.5-0.5-1.31-0.5-1.809,0l-1.267,1.267l0.724,0.724l-5.066,5.066l-0.724-0.724l-1.267,1.267c-0.5,0.5-0.5,1.31,0,1.809l1.159,1.159c0.449,0.449,0.997,0.788,1.6,0.989l0.364,0.121l-0.427,0.427L10.512,20.064z M14.901,10.349l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0l-0.732-0.732C14.803,10.604,14.803,10.446,14.901,10.349z M9.472,15.777l0.732-0.732c0.098-0.098,0.256-0.098,0.354,0l0.732,0.732c0.098,0.098,0.098,0.256,0,0.354l-0.732,0.732c-0.098,0.098-0.256,0.098-0.354,0L9.472,16.13C9.375,16.033,9.375,15.874,9.472,15.777z M11.391,17.615c0.069-0.271,0.206-0.518,0.405-0.717l4.961-4.961c0.195-0.195,0.445-0.337,0.717-0.405l0.344-0.083l0.137,1.925c0.022,0.318-0.058,0.63-0.221,0.901c-0.101,0.166-0.279,0.271-0.409,0.329L14.8,15.74l-0.38,1.574c-0.083,0.344-0.318,0.615-0.612,0.713c-0.188,0.058-0.38,0.083-0.579,0.072l-1.925-0.138L11.391,17.615z"/>',OTHER:'<path style="fill:#FFFFFF;" d="M13.004,1.411c0.964,0,1.894,0.441,2.496,1.204l8.346,10.023c1.363,1.592,1.482,3.477,0,4.979L13,28.465L2.148,17.618c-1.381-1.375-1.379-3.348,0-4.979l8.346-10.023C11.211,1.781,12.122,1.411,13.004,1.411 M13.004,0.411L13.004,0.411c-1.248,0-2.408,0.551-3.268,1.552L1.38,11.998c-1.718,2.033-1.694,4.579,0.064,6.328l10.85,10.845L13,29.878l0.707-0.707l10.846-10.846c1.784-1.808,1.803-4.293,0.053-6.337L16.269,1.976C15.5,1.003,14.273,0.411,13.004,0.411L13.004,0.411z M14.716,20.139c0,0.947-0.758,1.724-1.724,1.724c-0.947,0-1.704-0.777-1.704-1.724c0-0.928,0.757-1.704,1.704-1.704C13.958,18.435,14.716,19.211,14.716,20.139z M14.204,16.33H11.78l-0.537-8.533h3.5L14.204,16.33z"/>'},fq={BLOCKING:"#323232",VERYHIGH:"#d5232f",HIGH:"#ffa100"},gq={MARKER:[24.1,17.8,14.2,28.42,16.8,29.4,12.8,31.4,8.79,29.4,11.23,28.42,1.7,17.8,1.7,12.1,10,1.9,12.9,.498,15.8,1.9,24.1,12.1,24.1,17.8]};function hq(t,e,i){(i=i||{}).criticality||(i.criticality="major,critical"),C(t,iq,hq,0),An.call(this,{max:20,min:8,requestData:A(this.W,this),engineType:i.engineType}),this.s=new cq,this.C=t,this.a=i,this.reload=A(this.reload,this),this.v=setInterval(this.reload,e||18e4)}u(hq,An),t("H.service.traffic.incidents.Provider",hq),hq.prototype.c={minor:"HIGH","low impact":"HIGH",major:"VERYHIGH",critical:"BLOCKING"},hq.prototype.W=function(t,e,i,n,r){var o=this,a=this.c,s=this.s;return this.C.requestIncidentsByTile(t,e,i,(function(t){var e,i=[];if(t=t.TRAFFIC_ITEMS)for(e=(t=t.TRAFFIC_ITEM).length;e--;){var r=t[e],u=r.TRAFFIC_ITEM_TYPE_DESC;switch(u){case"ACCIDENT":case"CONGESTION":var l=u;break;case"CONSTRUCTION":l="ROADWORKS";break;default:l="OTHER"}l=s.Cb(l,a[r.CRITICALITY.DESCRIPTION]),(u=new yn({lat:(u=r.LOCATION.GEOLOC.ORIGIN).LATITUDE,lng:u.LONGITUDE},{provider:o,icon:l})).setData(r),i.push(u)}n(i)}),r,this.a)},hq.prototype.B=function(){An.prototype.B.call(this),clearInterval(this.v)};var jq="A21 A22 F01 F02 F08 F04 F05 F07 F03 F06 A2F F13 A25 A2C F12 D1B F1B A27 E12 A3A A24 A3D A3F F1F F25 F2C E32 A33 F29 D26 D36 F26 D0F F0F F2B E0C D3A A45 D23 D11 F2E F19 F14 F39 A4A A4B A5C D38 F2A F1A D0A F1C A48 D25 D1D F32 A46 A3E D24 E1C E32 A5F D2E D22 D0A".split(" ");function kq(t,e){var i={};this.a=t,Wa(i,e||i),ak.call(this,i),this.zg={},(t=this.Pb(Pg.SPATIAL)).update(t.a+1,Mg.ADD)}function lq(t){return t.Dc(!0)}function mq(t,e,i){var n,r=e.j&&e.j[i];return!r&&(n=e.m)&&(delete e.m,(e.j=t=t.a.parse(t,e,n))&&(r=t[i])),r||ff}u(kq,ak),t("H.service.remote.ObjectProvider",kq),kq.prototype.B=function(){ak.prototype.B.call(this)},kq.prototype.Lc=function(){return ff},kq.prototype.requestMarkers=kq.prototype.Lc,kq.prototype.Kc=function(){return ff},kq.prototype.requestDomMarkers=kq.prototype.Kc,kq.prototype.Hd=function(){return ff},kq.prototype.requestOverlays=kq.prototype.Hd,kq.prototype.Wb=df,kq.prototype.providesMarkers=kq.prototype.Wb,kq.prototype.Vb=df,kq.prototype.providesDomMarkers=kq.prototype.Vb,kq.prototype.Jc=df,kq.prototype.providesSpatials=kq.prototype.Jc,kq.prototype.Ag=function(){return ff},kq.prototype.requestSpatials=kq.prototype.Ag,kq.prototype.Bg=function(t,e){return t=mq(this,t,nq),e&&(t=t.filter(lq)),t},kq.prototype.requestSpatialsByTile=kq.prototype.Bg,kq.prototype.ea=function(t){var e=t.gb();if(this.zg[e])throw new Xc(this.ea,"Remote object "+e+" already added");return this.zg[e]=t},kq.prototype.Ia=function(t){delete this.zg[t.gb()]};var nq="spatials";function oq(t,e,i,n){oq.l.constructor.call(this,{min:pq,max:qq,engineType:n}),C(t,iq,oq,0),this.s=t,this.a=i||rq,this.a.responseattributes="sh,fc",this.c=setInterval(A(this.reload,this),e||18e4),this.f===Vj.WEBGL?this.ac(new Th(t.he("traffic/flow.yaml").toString()),!0):this.ac(new H.map.render.harp.Style({styles:[{when:["==",["geometry-type"],"LineString"],technique:"solid-line",renderOrder:10002,attr:{color:["case",[">=",["get","JF"],10],"black",[">=",["get","JF"],8],"red",[">=",["get","JF"],4],"yellow","green"],lineWidth:3,metricUnit:"Pixel"}}]}))}u(oq,R),t("H.service.traffic.flow.Provider",oq),oq.prototype.xi=df,oq.prototype.providesGeoJSON=oq.prototype.xi,oq.prototype.ua=function(){return this.ub()},oq.prototype.getStyle=oq.prototype.ua,oq.prototype.rc=function(t){t.b&&t.b("GeoJSONTileSource"),this.ac(t)},oq.prototype.setStyle=oq.prototype.rc;var rq={locationreferences:"tmc,shp"};oq.prototype.u=function(){oq.l.u.call(this),clearInterval(this.c)},oq.prototype.K=function(t,e,i,n,r){return this.s.requestFlowByTile(t,e,i,(function(t){t.type&&-1!==t.type.indexOf("Error")?r(t.Details):n(t)}),r,this.a)},oq.prototype.requestInternal=oq.prototype.K,oq.prototype.rd=function(t,e,i,n,r){var o,a,s,u,l,h={type:"FeatureCollection",features:[]},c=n.RWS.length;for(o=0;o<c;o++){var f=n.RWS[o],p=f.RW,d=p.length,g=-1!==jq.indexOf(f.EXTENDED_COUNTRY_CODE+f.EBU_COUNTRY_CODE);for(f=0;f<d;f++){var y=p[f].FIS,v=y.length;for(y=0;y<v;y++){var m=p[f].FIS[y].FI,b=m.length;for(a=0;a<b;a++){var _=m[a],w=[],x=_.CF[0],M=!!x.SSS,E={type:"Feature",properties:x,geometry:{type:"MultiLineString",coordinates:w}};for(E.properties.LHT=g,_.SHP.length&&(E.properties.FC=_.SHP[0].FC),M&&(l=[]),x=0;x<_.SHP.length;x++){var A=_.SHP[x].value,k=A.length;for(s=0;s<k;s++){var T=M?l:void 0,S=new $n(A[s].trim()),I=[],L={};for(S.ze();-1!==(u=S.Tb());)u===sq?(L.lat=+String.fromCharCode.apply(oq,S.Ud()),S.next(),S.ze()):u===tq?(L.lng=+String.fromCharCode.apply(oq,S.Ud()),I.push([L.lng,L.lat]),T&&T.push(Zf(L)),L=[],S.next(),S.ze()):S.next();L.lng=+String.fromCharCode.apply(oq,S.Ud()),I.push([L.lng,L.lat]),T&&T.push(Zf(L)),u=I,w.push(u)}}h.features.push(E)}}}}return oq.l.rd.call(this,t,e,i,h,r)},oq.prototype.createTileInternal=oq.prototype.rd;var qq=21,pq=10,tq=32,sq=44;function uq(t){function e(e){n.contains(r)&&n.removeChild(r),l&&clearTimeout(l),delete uq.a[o],e&&t.Kj&&t.Kj.call(u,e)}if(!t.url||!t.eh)throw Error('Parameter "options" must specify at least a URL and a callback.');if("function"!=typeof t.eh)throw Error("Parameters options.callback must be a function");var i=t.Ap||document,n=i.getElementsByTagName("head")[0],r=i.createElement("script");i=t.url instanceof W?t.url:Ep(t.url,t.zp);var o=uq.b++,a=t.jm||"callback",s=t.eh,u={},l=null;return u.id=o,u.cancel=function(){e("cancelled")},0!==t.timeout&&(l=x.setTimeout((function(){e("timeout")}),t.timeout||3e4)),uq.a[o]=function(t){e(),s.call(u,t)},r.type="text/javascript",r.src=i.toString()+(i.jk()?"&":"?")+a+"="+(t.Bp?"H.service.jsonp.handleResponse("+o+")":encodeURI("H.service.jsonp.handleResponse("+o+")")),n.appendChild(r),u}function iq(t){iq.l.constructor.call(this,iq,t),this.km=Qp(this,t).callbackKey}function vq(t,e,i,n){return uq({url:e,eh:i,Kj:function(t){n(Error("["+t+"] "+e+" request failed"))},jm:t.km})}function wq(t){wq.l.constructor.call(this,wq,t),this.ol=Qp(this,t).reverseSubDomain}function xq(t){xq.l.constructor.call(this,xq,t)}function yq(t){yq.l.constructor.call(this,yq,t),this.f=t.getToken}function Gq(t,e,i,n){return t.D().clone().F(e+"/layers/"+i+"/features").I(n||{})}function Eq(t,e,i,n,r){return Gq(t,i,n,e=Object.assign({},r,{id:new Ip(e)}))}function Cq(t,e,i,n,r){return t.D().clone().F(i+"/layers/"+n+"/features/"+e).I(r||{})}function zq(t,e,i,n){wc(i,"String",t,e,"must be a string"),wc(n,"String",t,e+1,"must be a string")}function Bq(t,e){wc(e,"String",t,0,"must be a string")}function Dq(t,e){if(!Array.isArray(e)||0===e.length||e.some((function(t){return"string"!=typeof t})))throw new D(t,0,"must be a non-empty array of strings")}function Fq(t,e,i){if(!Da(i))throw new D(t,e,"must be a GeoJSON object")}function Aq(t,e,i,n){if(!Ca(i))throw new D(t,e,"must be a function");if(!Ca(n))throw new D(t,e+1,"must be a function")}function Hq(t,e,i,n){if(Hq.l.constructor.call(this,n?{min:n.min,max:n.max,engineType:n.engineType}:void 0),C(t,yq,Hq,0),!zc(e))throw new D(Hq,1,'"catalogHrn" must be a string');if(!zc(i))throw new D(Hq,2,'"layerId" must be a string');this.v=t,this.a=e,this.c=i,this.s=Da(n)&&Da(n.parameters)?n.parameters:{},this.ac(this.f===Vj.WEBGL?new Th({sources:{iml:{type:"MVT"}},layers:{iml:{data:{source:"iml",layer:this.a+":"+this.c},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#0258AE",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a+":"+this.c,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.a+":"+this.c,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.a+":"+this.c,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.a+":"+this.c,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#0258AE",lineWidth:"2px",renderOrder:203}]}))}function Iq(t){Iq.l.constructor.call(this,Iq,t)}function Jq(t){Jq.l.constructor.call(this,Jq,t)}function Kq(t){Kq.l.constructor.call(this,Kq,t)}function Lq(){}function Mq(){}function Nq(t,e){this.a=t,this.b=e}function Oq(){}function Pq(t,e){this.b=t,this.a=e}function Qq(t,e,i){var n;if(e=e||(t&&t.length?Object.keys(t[0]):B),this.Hb=t,e)for(this.Rd=e,this.gh=t=mc(),n=e.length;n--;)t[e[n]]=!0;i!==B&&(this.ji=i)}function Rq(t,e){return t.Hb?t.Hb.push(e):t.Hb=[e],t.Hb.length-1}function Sq(t){var e=Tq;if(!t||!zc(Ze(t.layerId,t.layer))||!Cc(t.level)||tc(t.rowFilter)&&!Ca(t.rowFilter)||tc(t.rowFilterContext)&&!Da(t.rowFilterContext))throw new D(e,1,tc("invalid layer config")?"invalid layer config":t)}function Uq(t,e,i,n){n=n||Vq,this.tf={},n.provider=t,this.invalidate=ef,Uq.l.constructor.call(this,e,n),delete this.invalidate,i&&(this.b=i),this.wa(Mg.ADD)}t("H.service.jsonp",uq),uq.Yn=function(t){return(t=uq.a[t])?t:function(){}},uq.handleResponse=uq.Yn,uq.b=0,uq.a={},u(iq,Pp),t("H.service.traffic.Service",iq),iq.prototype.a=function(){return{subDomain:"traffic.ls",path:"traffic/6.1",callbackKey:"jsoncallback"}},iq.CONFIG_KEY="traffic",iq.prototype.yj=function(t,e){return new ll(new oq(this,void 0,t,e),{max:22})},iq.prototype.createFlowLayer=iq.prototype.yj,iq.prototype.zj=function(t){return new Bn(new hq(this,void 0,t))},iq.prototype.createIncidentsLayer=iq.prototype.zj,iq.prototype.Xo=function(t,e,i){return vq(this,t=this.D().clone().F("incidents.json").I(t),e,i)},iq.prototype.requestIncidents=iq.prototype.Xo,iq.prototype.Wo=function(t,e,i,n,r,o){return vq(this,t=this.D().clone().F(["flow/json",i,t,e].join("/")).I(o||{}),n,r)},iq.prototype.requestFlowByTile=iq.prototype.Wo,iq.prototype.Yo=function(t,e,i,n,r,o){return vq(this,t=this.D().clone().F(["incidents/json",i,t,e].join("/")).I(o||{}),n,r)},iq.prototype.requestIncidentsByTile=iq.prototype.Yo,iq.prototype.he=function(t){return Np().F(t)},Y.prototype.dk=function(t){return this.Ya(iq,t)},Y.prototype.getTrafficService=Y.prototype.dk,u(wq,Pp),t("H.service.GeocodingService",wq),wq.prototype.a=function(){return{subDomain:"geocoder.ls",reverseSubDomain:"reverse",path:"6.2"}},wq.CONFIG_KEY="geocoding",wq.prototype.b=function(t){return Error(t.Details||t.message||t.error)},wq.prototype.rh=function(t,e,i){return t=this.D().clone().F("geocode.json").I(t),this.K(t,e,i)},wq.prototype.geocode=wq.prototype.rh,wq.prototype.Bi=function(t,e,i){return t=this.D().clone().F("reversegeocode.json").I(t),this.ol&&t.Ma(this.ol),this.K(t,e,i)},wq.prototype.reverseGeocode=wq.prototype.Bi,wq.prototype.search=function(t,e,i){return t=this.D().clone().F("search.json").I(t),this.K(t,e,i)},wq.prototype.search=wq.prototype.search,Y.prototype.Ym=function(t){return this.Ya(wq,t)},Y.prototype.getGeocodingService=Y.prototype.Ym,u(xq,Pp),t("H.service.PlacesService",xq),xq.prototype.a=function(){return{subDomain:"places.ls",path:"places/v1"}},xq.CONFIG_KEY="places",xq.EntryPoint={SEARCH:"discover/search",SUGGEST:"suggest",EXPLORE:"discover/explore",AROUND:"discover/around",HERE:"discover/here",CATEGORIES:"categories/places"},xq.prototype.request=function(t,e,i,n){return this.T(t,e,i,n)},xq.prototype.T=function(t,e,i,n){return t=this.D().clone().F(t).I(e||{}),this.K(t,i,n)},xq.prototype.search=function(t,e,i){return this.T("discover/search",t,e,i)},xq.prototype.search=xq.prototype.search,xq.prototype.ip=function(t,e,i){return this.T("suggest",t,e,i)},xq.prototype.suggest=xq.prototype.ip,xq.prototype.um=function(t,e,i){return this.T("discover/explore",t,e,i)},xq.prototype.explore=xq.prototype.um,xq.prototype.fm=function(t,e,i){return this.T("discover/around",t,e,i)},xq.prototype.around=xq.prototype.fm,xq.prototype.$n=function(t,e,i){return this.T("discover/here",t,e,i)},xq.prototype.here=xq.prototype.$n,xq.prototype.lm=function(t,e,i){return this.T("categories/places",t,e,i)},xq.prototype.categories=xq.prototype.lm,xq.prototype.wm=function(t,e,i,n){return t=Ep(t).I(this.D().getQuery()).I(n||{}),this.K(t,e,i)},xq.prototype.follow=xq.prototype.wm,Y.prototype.vn=function(t){return this.Ya(xq,t)},Y.prototype.getPlacesService=Y.prototype.vn,u(yq,Pp),t("H.service.iml.Service",yq),yq.prototype.a=function(){return{host:"interactive.data.api.platform.here.com",path:"interactive/v1/catalogs"}},yq.prototype.b=function(t){var e=[{keys:["code","title","cause","action"],format:function(){return t.code+": "+t.title+"; cause: "+t.cause+"; action: "+t.action}},{keys:["error","error_description"],format:function(){return t.error+": "+t.error_description}},{keys:["error","errorMessage"],format:function(){return t.error+": "+t.errorMessage}}];return Error(Da(t)?function(){for(var i=ea(e),n=i.next();!n.done;n=i.next()){var r=(n=n.value).format;if(n.keys.every((function(e){return t[e]})))return r()}return JSON.stringify(t)}():t)},yq.prototype.fe=function(t,e,i,n,r){var o=this.fe;return zq(o,0,t,e),Aq(o,2,i,n),t=this.D().clone().F(t+"/layers/"+e+"/statistics").I(r||{}),this.T(t,"GET",i,n)},yq.prototype.getStatistics=yq.prototype.fe,yq.prototype.$f=function(t,e,i,n,r,o,a,s,u){var l=u?"":".mvtf";return t=this.D().clone().F(n+"/layers/"+r+"/tile/web/"+i+"_"+t+"_"+e+l).I(Object.assign({clip:!0},s)),this.T(t,"GET",u?o:function(t){return t.arrayBuffer().then(o)},a,void 0,u?"application/json":"arraybuffer")},yq.prototype.getFeaturesByTile=yq.prototype.$f,yq.prototype.Sj=function(t,e,i,n,r,o){var a=this.Sj;return Bq(a,t),zq(a,1,e,i),Aq(a,3,n,r),t=Cq(this,t,e,i,o),this.T(t,"GET",n,r)},yq.prototype.getFeatureById=yq.prototype.Sj,yq.prototype.cd=function(t,e,i,n,r,o){var a=this.cd;return Dq(a,t),zq(a,1,e,i),Aq(a,3,n,r),t=Eq(this,t,e,i,o),this.T(t,"GET",n,r)},yq.prototype.getFeaturesById=yq.prototype.cd,yq.prototype.Zd=function(t,e,i,n,r){var o=this.Zd;if(!Da(t)||!(t.bbox||t.north&&t.east&&t.south&&t.west))throw new D(o,0,'must be an object with either "bbox" or a full set of "north", "east", "south" and "west"');return zq(o,1,e,i),Aq(o,3,n,r),t=this.D().clone().F(e+"/layers/"+i+"/bbox").I(t),this.T(t,"GET",n,r)},yq.prototype.getFeaturesByBoundingBox=yq.prototype.Zd,yq.prototype.Uj=function(t,e,i,n,r){var o=this.Uj;if(!(Da(t)&&t.radius&&(t.lat&&(t.lng||t.lon)||t.refCatalogHrn&&t.refLayerId&&t.refFeatureId)))throw new D(o,0,'must be an object with "radius" and a combination of either "lat"+"lng" or "refCatalogHrn"+"refLayerId"+"refFeatureId"');return zq(o,1,e,i),Aq(o,3,n,r),t=this.D().clone().F(e+"/layers/"+i+"/spatial").I(t),this.T(t,"GET",n,r)},yq.prototype.getFeaturesByPointAndRadius=yq.prototype.Uj,yq.prototype.Tj=function(t,e,i,n,r,o){var a=this.Tj;if(!Da(t)||!t.radius)throw new D(a,0,'must be an object with "radius"');return Fq(a,1,e),zq(a,2,i,n),Aq(a,4,r,o),t=this.D().clone().F(i+"/layers/"+n+"/spatial").I(t),this.T(t,"POST",r,o,e)},yq.prototype.getFeaturesByGeometryAndRadius=yq.prototype.Tj,yq.prototype.pl=function(t,e,i,n,r){var o=this.pl;return zq(o,0,t,e),Aq(o,2,i,n),t=this.D().clone().F(t+"/layers/"+e+"/search").I(r||{}),this.T(t,"GET",i,n)},yq.prototype.searchFeatures=yq.prototype.pl,yq.prototype.uk=function(t,e,i,n,r){var o=this.uk;return zq(o,0,t,e),Aq(o,2,i,n),t=this.D().clone().F(t+"/layers/"+e+"/iterate").I(r||{}),this.T(t,"GET",i,n)},yq.prototype.iterateFeatures=yq.prototype.uk,yq.prototype.kd=function(t,e,i,n,r,o){var a=this.kd;return Fq(a,0,t),zq(a,1,e,i),Aq(a,3,n,r),e=Gq(this,e,i,o),this.T(e,"PUT",n,r,t)},yq.prototype.putFeatures=yq.prototype.kd,yq.prototype.hd=function(t,e,i,n,r,o){var a=this.hd;return Fq(a,0,t),zq(a,1,e,i),Aq(a,3,n,r),e=Gq(this,e,i,o),this.T(e,"POST",n,r,t)},yq.prototype.postFeatures=yq.prototype.hd,yq.prototype.sd=function(t,e,i,n,r){var o=this.sd;return Dq(o,t),zq(o,1,e,i),Aq(o,3,n,r),t=Eq(this,t,e,i),this.T(t,"DELETE",n,r)},yq.prototype.deleteFeatures=yq.prototype.sd,yq.prototype.fl=function(t,e,i,n,r,o,a){var s=this.fl;return Bq(s,t),Fq(s,1,e),zq(s,2,i,n),Aq(s,4,r,o),t=Cq(this,t,i,n,a),this.T(t,"PUT",r,o,e)},yq.prototype.putFeature=yq.prototype.fl,yq.prototype.Zk=function(t,e,i,n,r,o,a){var s=this.Zk;return Bq(s,t),Fq(s,1,e),zq(s,2,i,n),Aq(s,4,r,o),t=Cq(this,t,i,n,a),this.T(t,"PATCH",r,o,e)},yq.prototype.patchFeature=yq.prototype.Zk,yq.prototype.Dj=function(t,e,i,n,r){var o=this.Dj;return Bq(o,t),zq(o,1,e,i),Aq(o,3,n,r),t=Cq(this,t,e,i),this.T(t,"DELETE",n,r,void 0,"text/plain")},yq.prototype.deleteFeature=yq.prototype.Dj,yq.prototype.T=function(t,e,i,n,r,o){return o=void 0===o?"application/json":o,e={method:e,headers:Object.assign({},r?{"Content-Type":"application/geo+json"}:void 0,"function"==typeof this.f?{Authorization:"Bearer "+this.f()}:void 0,this.gf)},r&&(e.data=JSON.stringify(r)),(r=new rf(o,t.toString(),fe,e)).then(i,Rp(this,t,n)),r},yq.CONFIG_KEY="iml",Y.prototype.cn=function(t){return this.Ya(yq,t)},Y.prototype.getIMLService=Y.prototype.cn,u(Hq,R),t("H.service.iml.Provider",Hq),Hq.prototype.K=function(t,e,i,n,r){return this.v.$f(t,e,i,this.a,this.c,n,r,this.s)},Hq.prototype.requestInternal=Hq.prototype.K,Hq.prototype.Ed=df,Hq.prototype.providesOMV=Hq.prototype.Ed,Hq.prototype.ua=function(){return this.ub()},Hq.prototype.getStyle=Hq.prototype.ua,Hq.prototype.rc=function(t){C(t,Th)&&t.b("MVT"),this.ac(t)},Hq.prototype.setStyle=Hq.prototype.rc,u(Iq,Pp),t("H.service.publicTransit.Service",Iq),Iq.prototype.a=function(){return{subDomain:"transit.router",path:"v8"}},Iq.CONFIG_KEY="publicTransit",Iq.prototype.Fn=function(t,e,i){return t=this.D().clone().F("routes").I(t),this.K(t,e,i)},Iq.prototype.getRoutes=Iq.prototype.Fn,Iq.prototype.Qm=function(t,e,i){return t=this.D().clone().F("departures").I(t),this.K(t,e,i)},Iq.prototype.getDepartures=Iq.prototype.Qm,Iq.prototype.Jn=function(t,e,i){return t=this.D().clone().F("stations").I(t),this.K(t,e,i)},Iq.prototype.getStations=Iq.prototype.Jn,Iq.prototype.b=function(t){return Error(JSON.stringify(t))},Y.prototype.Bn=function(t){return this.Ya(Iq,t)},Y.prototype.getPublicTransitService=Y.prototype.Bn,u(Jq,Pp),t("H.service.RoutingService",Jq),Jq.prototype.a=function(){return{subDomain:"route.ls",path:"routing/7.2"}},Jq.prototype.b=function(t){return Error(t.details)},Jq.CONFIG_KEY="routing",Jq.prototype.Qd=function(t,e,i){return t=this.D().clone().F("calculateroute.json").I(t),this.K(t,e,i)},Jq.prototype.calculateRoute=Jq.prototype.Qd,Jq.prototype.dh=function(t,e,i){return t=this.D().clone().Ma("isoline").F("calculateisoline.json").I(t),this.K(t,e,i)},Jq.prototype.calculateIsoline=Jq.prototype.dh,u(Kq,Pp),t("H.service.RoutingService8",Kq),Kq.CONFIG_KEY="routing_v8",Kq.prototype.a=function(){return{subDomain:"router",path:"v8/routes"}},Kq.prototype.b=function(t){return Error(t.error)},Kq.prototype.Qd=function(t,e,i){return t=this.D().clone().I(t),this.K(t,e,i)},Kq.prototype.calculateRoute=Kq.prototype.Qd,Kq.prototype.dh=function(t,e,i){return t=this.D().clone().Ma("isoline").Md("v8/isolines").I(t),this.K(t,e,i)},Kq.prototype.calculateIsoline=Kq.prototype.dh,Y.prototype.bk=function(t,e){if(7===(e=+e||7))e=Jq;else{if(8!==e)throw new D(this.bk,1,"allowed values are 7 and 8");e=Kq}return this.Ya(e,t)},Y.prototype.getRoutingService=Y.prototype.bk,t("H.service.extension.dataView.ITable",Lq),Lq.prototype.be=function(){},Lq.prototype.getMeta=Lq.prototype.be,Lq.prototype.ee=function(){},Lq.prototype.getRowCount=Lq.prototype.ee,Lq.prototype.Bc=function(){},Lq.prototype.getRow=Lq.prototype.Bc,Lq.prototype.Ua=function(){},Lq.prototype.getColumnNames=Lq.prototype.Ua,Lq.prototype.Ue=function(){},Lq.prototype.getColumn=Lq.prototype.Ue,Lq.prototype.xa=function(){},Lq.prototype.getCell=Lq.prototype.xa,Lq.prototype.concat=function(){},Lq.prototype.concat=Lq.prototype.concat,t("H.service.extension.dataView.IRow",Mq),Mq.prototype.Ua=function(){},Mq.prototype.getColumnNames=Mq.prototype.Ua,Mq.prototype.xa=function(){},Mq.prototype.getCell=Mq.prototype.xa,Mq.prototype.xd=function(){},Mq.prototype.getTable=Mq.prototype.xd,t("H.service.extension.dataView.ObjRow",Nq),Nq.prototype.Ua=function(){return this.a.Ua()},Nq.prototype.getColumnNames=Nq.prototype.Ua,Nq.prototype.xa=function(t){return this.a.xa(this.b,t)},Nq.prototype.getCell=Nq.prototype.xa,Nq.prototype.xd=function(){return this.a},Nq.prototype.getTable=Nq.prototype.xd,t("H.service.extension.dataView.IColumn",Oq),Oq.prototype.xa=function(){},Oq.prototype.getCell=Oq.prototype.xa,t("H.service.extension.dataView.ObjColumn",Pq),Pq.prototype.xa=function(t){return this.b.xa(t,this.a)},Pq.prototype.getCell=Pq.prototype.xa,t("H.service.extension.dataView.ObjTable",Qq),n=Qq.prototype,n.ji=B,n.Hb=B,n.Rd=B,n.gh=B,n.be=function(){return this.ji},Qq.prototype.getMeta=Qq.prototype.be,Qq.prototype.ee=function(){return this.Hb?this.Hb.length:0},Qq.prototype.getRowCount=Qq.prototype.ee,Qq.prototype.Bc=function(t){var e=this.Hb;return e&&e[t]?new Nq(this,t):B},Qq.prototype.getRow=Qq.prototype.Bc,Qq.prototype.Ua=function(){return this.Rd||ff},Qq.prototype.getColumnNames=Qq.prototype.Ua,Qq.prototype.Ue=function(t){return this.gh[t]?new Pq(this,t):B},Qq.prototype.getColumn=Qq.prototype.Ue,Qq.prototype.xa=function(t,e){var i=this.Hb;return(t=i&&this.gh[e]&&i[t])&&t[e]},Qq.prototype.getCell=Qq.prototype.xa,Qq.prototype.concat=function(){var t,e=arguments.length,i=this.Rd,n=""+this.Rd,r=(this.Hb||[]).slice();for(t=0;t<e;t++){var o=arguments[t];if(!(o instanceof Qq))throw new D(this.concat,t);if(o.Hb){if(i&&""+o.Rd!==n)throw new D(this.concat,t,"Incompatible columns!");r=r.concat(o.Hb)}}return new Qq(r,this.Rd,this.ji)},Qq.prototype.concat=Qq.prototype.concat,u(Uq,bh),t("H.service.remote.Spatial",Uq);var Vq={};function Wq(t,e){this.a=t,e&&(this.b=e)}Uq.prototype.gb=function(){return this.b||bh.prototype.gb.call(this)},Uq.prototype.getId=Uq.prototype.gb,Uq.prototype.Dg=Function(),Uq.prototype.retain=Uq.prototype.Dg,Uq.prototype.release=Function(),Uq.prototype.release=Uq.prototype.release;var Xq=new Wq([]);function Yq(t,e,i){t.tf[e.key]=new Wq(i,void 0)}function Zq(t,e,i,n,r,o){$q(Zq,1,e,i),$q(Zq,2,n,r),(this.f=t.length)?(this.s=t,this.aa=e,this.i=i,this.b=0,this.c=A(this.c,this),this.o=n,this.j=r,this.a=mc(),Wa(this.a,ar,o||{}),this.g={},x.setTimeout(this.c,0)):e(ff,!0)}Uq.prototype.$d=function(t){return(this.tf[t.key]||Xq).a},Uq.prototype.getGeometriesForTile=Uq.prototype.$d,Uq.prototype.zh=function(t){return(this.tf[t.key]||Xq).b},Uq.prototype.getLabels=Uq.prototype.zh;var ar={duration:100,Am:"geometry",zm:"WKT",Zo:"searchAttributes",Cj:B};function $q(t,e,i,n){if(!Ca(i))throw new D(t,e,"has invalid type");if(!Ca(n))throw new D(t,e+1,"has invalid type")}function br(t,e,i){var n=8===t;this.b=e,this.c=i||hd,(this.a=4===t||n)?this.j=n:this.g=1===t,this.f=this.a?"$HProjGeometry":"geometry"}function cr(t,e,i,n,r){var o=[],a=r.paths,s=a.length,u=0,l=t.b&&t.b(n);for(t=new Uq(e,t.j,B,{style:l||t.i,data:n});u!==s;)o.push(er(a[u++]));return Yq(t,i,[new rh(o,r.interiorsIndex,r.outlinesIndex)]),t}function dr(t,e,i,n){n=new Wf(n[0],n[1]);var r=t.b&&t.b(i);return t=t.g?new yn(n,t={icon:r,data:i,provider:e}):new Qi(n,t={icon:r,data:i,provider:e})}function er(t){for(var e=0,i=t.length,n=[];e<i;)n.push(new I(t[e++],t[e++]));return n}function fr(t){var e=(t=t||{}).tileCacheSize||1024,i=t.resultType,n=t.styleCallback;if(tc(t.min)||(t.min=12),fr.l.constructor.call(this,t),-1===gr.indexOf(i))throw new D(fr,2,"invalid resultType");if(this.a=i,n&&!Ca(n))throw new D(fr,2,"invalid style callback");this.Aa=n,this.W=t.pixelRatio||Se(),this.Lb=A(this.Lb,this),this.O(new Dk(e,A(this.dc,this))),this.createTileInternal=A(4===i||8===i?this.N:this.J,this)}function hr(t){var e=t.yb;return e||(t.v||(t.v=t.s(t.a,t.Aa,t.Lb)),(e=t.yb=new kq(t.v)).ka(t),e.addEventListener(t.i.Ea,A(t.kb,t)),e.yb=!0),e}Zq.prototype.c=function(){for(var t,e=[],i=!1,n=zk();this.b<this.f;){var r=this.s[this.b];if(i=r.attributes,t=r.layerId||this.a.Cj,r.distance&&(i[this.a.Zo]={nearest:new Wf(r.nearestLat,r.nearestLon),distance:r.distance}),r=r[this.a.Am]){try{var o=Fn(new $n(r))}catch(t){this.i(new x.Error(t.message)),i=!0;break}i[this.a.zm]=o}if((r=this.g[t])||(r=this.g[t]=this.o({layerId:t,columnNames:Object.keys(i)})),i=this.j(r,i),e.push(i),this.b++,(i=this.b===this.f)||zk()-n>=this.a.duration){this.aa(e,i);break}}i?this.g=y:this.m=x.setTimeout(this.c,0)},Zq.prototype.cancel=function(){x.clearTimeout(this.m),this.b<this.f&&this.i(new x.Error("parsing canceled"))},Zq.prototype.cancel=Zq.prototype.cancel,br.prototype.parse=function(t,e,i){var n,r,o,a,s={},u=[],l=0;for(o=i.length;l<o;l++){var h=i[l],c=h.Rows;if(h=c.length){var f=Object.keys(c[0]).filter((function(t){return"geometry"!==t&&"$HProjGeometry"!==t}));for(f=new Qq(c,f),a=0;a<h;a++){var p=c[a];if(r=p[this.f]){if(delete p[this.f],p=f.Bc(a))try{(n=this.a?cr(this,t,e,p,r):dr(this,t,p,r.path)).ka(t),u.push(n)}catch(t){this.c(t.message)}}else this.c("Layer must contain geometries")}}}return s[this.a?"spatials":this.g?"markers":"domMarkers"]=u,s},u(fr,R),t("H.service.extension.TileProvider",fr),fr.prototype.c=!1,fr.prototype.getCapabilities=function(){return fr.l.getCapabilities.call(this)|Cj.CROP_LINES_BY_TILE|Cj.CROP_POLYGONS_BY_TILE},fr.prototype.jb=function(t,e,i,n){return this.c?fr.l.jb.call(this,t,e,i,n):B},fr.prototype.requestTile=fr.prototype.jb,fr.prototype.Lb=function(t){this.dispatchEvent(new td("error",zc(t)?t:t+"",this))},fr.prototype.Wb=function(){return 1===this.a},fr.prototype.providesMarkers=fr.prototype.Wb,fr.prototype.Vb=function(){return 2===this.a},fr.prototype.providesDomMarkers=fr.prototype.Vb,fr.prototype.Jc=function(){return 4===this.a||8===this.a},fr.prototype.providesSpatials=fr.prototype.Jc,fr.prototype.J=function(t,e,i,n){var r=this.getTileKey(t,e,i);r=this.Ob().get(r);var o=2==this.a,a=[],s=hr(this);for(r?r.valid=!0:(delete(t=r=new Lk(t,e,i,y)).j,t.m=n),e=(n=mq(s,r,o?"domMarkers":"markers")).length;e--;)(t=n[e]).aj=r,(o||1===t.Cb().getState())&&a.push(t);return r.data=a,r},fr.prototype.kb=function(t){(t=t.target.aj)&&(t.valid=!1)},fr.prototype.cp=function(t){this.C=!!t},fr.prototype.setTileCanvasRendering=fr.prototype.cp,fr.prototype.C=!0,fr.prototype.N=function(t,e,i,n){var r=hr(this),o=this.getTileKey(t,e,i),a=this.tileSize,s=this.Ob().get(o);return s||(delete(t=s=new Pk(o,t,e,i,a,this.W,i,r)).j,t.m=n),this.C?(n=Mp.pop(a),s.V(n)||Mp.push(n,a)):Vk(s),s},fr.prototype.dc=function(t,e){var i;if(4===this.a||8===this.a){for(i=(t=e.Va()).length;i--;)delete t[i].tf[e.key];e.data&&(Mp.push(e.xg(),this.tileSize),e.yg())}else for(i=(t=e.data).length;i--;)delete t[i].aj},fr.prototype.u=function(){fr.l.u.call(this),hr(this).B()};var ir={MARKER:1,DOM_MARKER:2,POLYLINE:4,POLYGON:8};fr.ResultType=ir;var gr=[1,2,4,8];function Tq(t,e,i){var n=this,r=e&&e.rowFilter,o=i.resultType;Tq.l.constructor.call(this,i),C(t,jr,Tq,0),Sq(e),r?(i=Ua(e)).rowFilter=r.toString():i=Ua(e),delete i.layer,i.layerId=Ze(e.layerId,e.layer),(new Mf).a("pde","H.service.extension.worker.processor"),t=t.D().clone().F(kr+"."+lr).I({meta:1}),new Pf("pde",{message:[this.uid,0,{tileSize:this.tileSize,projected:!0,onlyOutline:4===o,serverUrl:t.toString(),layerConfigs:[i],horizontalMargin:1}]}).then((function(){n.c=!0,Wj(n)}),this.Lb)}u(Tq,fr),t("H.service.extension.platformData.TileProvider",Tq),Tq.prototype.s=function(t,e,i){return(t=new br(t,e,i)).i=mr,t};var mr=new Ug({strokeColor:"transparent",fillColor:"transparent",lineWidth:0,lineJoin:"round",lineCap:"round"});function nr(t){this.a=t}function jr(t){jr.l.constructor.call(this,jr,t)}Tq.prototype.K=function(t,e,i,n,r){var o,a=this,s=this.getTileKey(t,e,i);s=this.Ob().get(s);var u={cancel:hd},l=!0,h=this.a;if(s&&(4===h||8===h?s.le()||(n(Mp.pop(this.tileSize),null),l=!1):(n(y),l=!1)),l){var c=Kp.setTimeout((function(){(o=new Pf("pde",{message:[a.uid,1,[t,e,i]]})).then(n,r)}),500);u.cancel=function(){o?o.cancel():Kp.clearTimeout(c)}}return u},Tq.prototype.requestInternal=Tq.prototype.K,Tq.prototype.u=function(){Tq.l.u.call(this),new Pf("pde",{message:[this.uid,3]})},Tq.ResultType=ir,nr.prototype.cancel=function(){for(var t=this.a,e=t.length;e--;)t[e].cancel();t.length=0},u(jr,Pp),t("H.service.extension.platformData.Service",jr),jr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"1"}},jr.CONFIG_KEY="platformData",jr.prototype.request=function(t,e,i,n,r){return this.T(t,e,i,n,r)},jr.prototype.T=function(t,e,i,n,r){var o="text/plain";if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);if(!n)throw new D(this.request,3,n);if(!r)throw new D(this.request,4,r);return t=this.D().clone().F(t+"."+e).I(i),e===or.JSON&&(o="application/json"),this.K(t,n,r,o)};var kr="tiles";jr.EntryPoint={DOC_ATTRIBUTES:"doc/attributes",DOC_LAYER:"doc/layer",DOC_LAYERS:"doc/layers",DOC_MAPS:"doc/maps",DOC_INDEXES:"doc/indexes",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SERVICE_CONFIGURATION:"serviceconfiguration",STATIC:"static",TILE:"tile",TILES:kr,FILE:"file",INDEX:"index"};var lr="json",or={TXT:"txt",JSON:lr,HTML:"html",BIN:"bin"};function pr(t,e,i){if(!yc(t))throw new D(i,0,"has invalid type");if(!yc(e))throw new D(i,1,"has invalid type");if(t.length!==e.length||!t.length)throw new D(i,1,"specify one key attribute for each given layer id in the same order")}function qr(t){qr.l.constructor.call(this,qr,t)}function rr(t){var e=sr;if(!t||!zc(t.layerId)||tc(t.rowFilter)&&!Ca(t.rowFilter)||tc(t.rowFilterContext)&&!Da(t.rowFilterContext))throw new D(e,1,tc("invalid layer config")?"invalid layer config":t)}function tr(t){return zc(t)&&/^[A-Z][A-Z0-9_]*$/.test(t)}function ur(t){for(var e=t&&t.length,i=2<=e&&"WKT"===t[--e]&&"GEOMETRY_ID"===t[--e];i&&e--;)i=tr(t[e]);return i}function vr(t,e){var i,n,r="",o=[];if(e){if(t.geometries&&t.geometries.length)for(r=r+"Meta:\t"+e+"\n"+(n=Object.keys(t.geometries[0].attributes)).join("\t"),r+="\tWKT\n",i=0;i<t.geometries.length;i++){var a=t.geometries[i].attributes;for(s=t.geometries[i].geometry,e=0;e<n.length;e++)o.push(a[n[e]]);r+=o.join("\t"),r+="\t"+s+"\n",o=[]}}else{var s={};if(o=[],t.geometries)for(n=0;n<t.geometries.length;n++)s[(e=t.geometries[n]).layerId]||(s[e.layerId]=[]),s[e.layerId].push(e);for(i in s)o.push({layerId:i,geometries:s[i]});for(i=0;i<o.length;i++)r+=vr(o[i],o[i].layerId)}return r}function sr(t,e,i){var n,r=this,o=e&&e.rowFilter;sr.l.constructor.call(this,i),C(t,wr,sr,0);var a=i.resultType;if(rr(e),o){var s=Ua(e);s.rowFilter=o.toString()}else s=e;(new Mf).a("cle","H.service.extension.worker.processor");var u=e.layerId;t.request(xr,yr,{detail_level:"all",layer_id:u},(function(e){var i;for(e=e.layers,i=0;i<e.length;i++)if(e[i].layerId===u){s.level=e[i].level;break}n=t.D().clone().F(zr+"."+yr).I({meta:1}),new Pf("cle",{message:[r.uid,0,{tileSize:r.tileSize,projected:!0,onlyOutline:4===a,serverUrl:n.toString(),layerConfigs:[s],batchTiles:!1,horizontalMargin:1}]}).then((function(){r.c=!0,Wj(r)}),r.Lb)}),(function(t){r.Lb(t.message)}))}function Ar(){if(Br)throw new Xc(Ar)}jr.EntryPointType=or,jr.prototype.wc=function(t,e){var i=e&&e.resultType;return t=new Tq(this,t,e),1==i||2===i?new Bn(t):new ll(t)},jr.prototype.createTileLayer=jr.prototype.wc,jr.prototype.Jd=function(t,e,i,n){var r,o=[],a=e.layer_id||e.layer_ids;return t=this.request(t,lr,e,(function(t){r=new Zq(t.geometries,i,n,(function(t){return new Qq([],t.columnNames,t)}),(function(t,e){return t.Bc(Rq(t,e))}),{Cj:a}),o.push(r)}),(function(t){n(new x.Error(t))})),o.push(t),new nr(o)},jr.prototype.Mc=function(t,e,i,n,r,o){function a(t,e){e&&s--,n(t,!s)}var s,u=[];for(pr(t,e,this.Mc),$q(this.Mc,3,n,r),C(i,K,this.Mc,2),i={bbox:i.la+","+i.ca+";"+i.na+","+i.ia},o&&Wa(i,o),t=i.layer_id?[i.layer_id]:t,o=0,s=t.length;o<s;o++)i.layer_id=t[o],i.key_attribute=e[o],u.push(this.Jd("search/bbox",i,a,r));return new nr(u)},jr.prototype.searchByBoundingBox=jr.prototype.Mc,jr.prototype.Yb=function(t,e,i,n,r,o,a){if(pr(t,e,this.Yb),C(i,Wf,this.Yb,2,"has invalid type"),!Cc(n))throw new D(this.Yb,3,"has invalid type");return $q(this.Yb,4,r,o),t={layer_ids:t.join(","),key_attributes:e.join(","),proximity:i.lat+","+i.lng+","+n},a&&Wa(t,a),this.Jd("search/proximity",t,r,o)},jr.prototype.searchByProximity=jr.prototype.Yb,jr.prototype.Xb=function(t,e,i,n,r,o,a){var s="";if(pr(t,e,this.Xb),!zc(i)&&!C(i,L))throw new D(this.Xb,1,"has invalid type");if(!Cc(n))throw new D(this.Xb,2,"has invalid type");if($q(this.Xb,4,r,o),t={layer_ids:t.join(","),key_attributes:e.join(","),radius:n},zc(i))t.route_id=i;else{for(n=i.Y,i=0,e=n.length;i<e;i+=3)s+=n[i]+","+n[i+1],i<e-3&&(s+=";");t.corridor=s}return a&&Wa(t,a),this.Jd("search/corridor",t,r,o)},jr.prototype.searchByCorridor=jr.prototype.Xb,Y.prototype.wn=function(t){return this.Ya(jr,t)},Y.prototype.getPlatformDataService=Y.prototype.wn,u(qr,Pp),t("H.service.extension.geofencing.Service",qr),qr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},qr.CONFIG_KEY="geofencing",qr.prototype.request=function(t,e,i,n){return this.T(t,e,i,n)},qr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t.message||t.response_code)},qr.prototype.T=function(t,e,i,n){if(!t)throw new D(this.request,0,t);if(!Ca(i))throw new TypeError("onResult must be a function");if(!Ca(n))throw new TypeError("onError must be a function");return t=this.D().clone().F(t+".json").I(e),this.K(t,i,n)},qr.EntryPoint={SEARCH_PROXIMITY:"search/proximity"},Y.prototype.Zm=function(t){return this.Ya(qr,t)},Y.prototype.getGeofencingService=Y.prototype.Zm,t("H.service.extension.customLocation.Permission",{READ:"read",WRITE:"write",EXPORT:"export"}),t("H.service.extension.customLocation.Storage",{READONLY:"readonly",UPDATABLE:"updatable"}),u(sr,fr),t("H.service.extension.customLocation.TileProvider",sr),sr.prototype.s=function(t,e,i){return new br(t,e,i)},sr.prototype.K=function(t,e,i,n,r){var o,a=this,s=this.getTileKey(t,e,i);s=this.Ob().get(s);var u={cancel:hd},l=!0,h=this.a;if(s&&(4===h||8===h?s.le()||(n(Mp.pop(this.tileSize),null),l=!1):(n(y),l=!1)),l){var c=Kp.setTimeout((function(){(o=new Pf("cle",{message:[a.uid,1,[t,e,i]]})).then(n,r)}),500);u.cancel=function(){o?o.cancel():Kp.clearTimeout(c)}}return u},sr.prototype.requestInternal=sr.prototype.K,sr.prototype.u=function(){sr.l.u.call(this),new Pf("cle",{message:[this.uid,3]})},t("H.service.extension.customLocation.Table",Ar);var Br=!0;function Cr(t,e){var i;Br=!1;var n=new Ar;Br=!0,n.c=pc(x.JSON.parse(x.JSON.stringify(t))),t=t.columnNames;var r=mc();for(i=t.length;i--;)r[t[i]]=i;if(n.f=r,n.b=t.length,e){if(e.length%t.length)throw new D(Cr,1,"Invalid number of cells")}else e=[];return n.a=e,n}Ar.prototype.be=function(){return this.c},Ar.prototype.getMeta=Ar.prototype.be,Ar.prototype.ee=function(){return this.a.length/this.b},Ar.prototype.getRowCount=Ar.prototype.ee,Ar.prototype.Bc=function(t){return t<this.a.length/this.b?new Dr(this,t):B},Ar.prototype.getRow=Ar.prototype.Bc,Ar.prototype.Gn=function(){var t,e=this.a.length/this.b,i=new x.Array(e);for(t=0;t<e;t++)i[t]=new Dr(this,t);return i},Ar.prototype.getRows=Ar.prototype.Gn,Ar.prototype.Wg=function(t){var e=this.b,i=this.a,n=i.length/this.b;if(!t||t.length%e)throw new D(this.Wg,0,"Invalid number of cells");return this.a=i.concat(t),n},Ar.prototype.addCells=Ar.prototype.Wg,Ar.prototype.cm=function(){for(var t=this.b,e=this.a,i=this.a.length/this.b;t--;)e.push(y);return this.Bc(i)},Ar.prototype.addRow=Ar.prototype.cm,Ar.prototype.Ua=function(){return this.c.columnNames},Ar.prototype.getColumnNames=Ar.prototype.Ua,Ar.prototype.Ue=function(t){return this.f[t]===B?B:new Er(this,t)},Ar.prototype.getColumn=Ar.prototype.Ue,Ar.prototype.xa=function(t,e){return this.a[t*this.b+this.f[e]]},Ar.prototype.getCell=Ar.prototype.xa,Ar.prototype.Nc=function(t,e,i){if(e=this.f[e],t>=this.a.length/this.b)throw new D(this.Nc,0,"Row index out of bounds");if(e===B)throw new D(this.Nc,0,"Column unknown");this.a[t*this.b+e]=i},Ar.prototype.setCell=Ar.prototype.Nc,Ar.prototype.concat=function(t){var e,i=arguments.length,n=""+this.Ua(),r=this.a?this.a.slice():[];for(e=0;e<i;e++){var o=arguments[e];if(!(o instanceof Ar))throw new D(this.concat,e);if(""+o.Ua()!==n)throw new D(this.concat,e,"Incompatible columns!");o.a&&(r=r.concat(o.a))}return Cr(this.c,r)},Ar.prototype.concat=Ar.prototype.concat;var Fr=/(\n|\t|\r|")/;function Gr(t,e,i,n,r,o,a,s){var u;for(u=0;u<a;u++){u&&e.push("\t");var l=i[n*r+o[u]];if(u!==s){if(l!==y){if(l=String(l),Fr.test(l))throw new D(t.Xi,0,'Invalid character (\\n, \\r, \\t, or ") in row '+n+" column "+t.c.columnNames[o[u]]);e.push(l)}}else e.push(l)}}function Er(t,e){this.b=t,this.a=e}function Dr(t,e){this.a=t,this.gi=e}function Hr(t){if(t===B)t="\t";else if(!/^[^"\r\n]$/.test(t))throw new D(Hr,0);this.b=String(t).charCodeAt(0),this.hi=A(this.hi,this),this.A=Ir}Ar.prototype.Xi=function(t,e){var i,n=this.b,r=this.Ua(),o=[],a=[],s=this.a,u=-1;for(i=0;i<n;i++)t&&!t.test(r[i])||("WKT"===r[i]&&(u=o.length),o.push(i));if(!(t=o.length))throw new D(this.Xi,1,"No columns filtered");if(Gr(this,a,r,0,n,o,t,u),e){var l=e.length;for(i=0;i<l;i++)a.push("\n"),Gr(this,a,s,r=e[i],n,o,t,u)}else for(l=this.ee(),r=0;r<l;r++)a.push("\n"),Gr(this,a,s,r,n,o,t,u);return a.join("")},Ar.Column=Er,Er.prototype.xa=function(t){return this.b.xa(t,this.a)},Er.prototype.getCell=Er.prototype.xa,Er.prototype.Nc=function(t,e){this.b.Nc(t,this.a,e)},Er.prototype.setCell=Er.prototype.Nc,Ar.Row=Dr,Dr.prototype.Ua=function(){return this.a.Ua()},Dr.prototype.getColumnNames=Dr.prototype.Ua,Dr.prototype.xa=function(t){return this.a.xa(this.gi,t)},Dr.prototype.getCell=Dr.prototype.xa,Dr.prototype.Nc=function(t,e){this.a.Nc(this.gi,t,e)},Dr.prototype.setCell=Dr.prototype.Nc,Dr.prototype.xd=function(){return this.a},Dr.prototype.getTable=Dr.prototype.xd;var Ir=0;function Jr(t,e,i){var n=t.A;if(n!==e)throw 1===n&&(t.A=Ir),new Xc(i,"Requires state: "+["READY","PARSE","PAUSE"][e]+" but found "+["READY","PARSE","PAUSE"][n])}function Kr(t,e){var i=[];return t.parse(e,(function(t,e,n){return 1>t&&(i[e]=n),0<t})),t.A=Ir,i}function Lr(t,e,i){this.c=new $n(t),this.m=e,this.g=!0,this.Nf=this.j=this.b=0,Mr(this),this.a=i,this.f=[],this.i=!1}function Mr(t){var e=t.c.Tb();t.o=!1,(t.aa=34===e)&&t.c.next()}function Nr(t,e){var i=t.c;switch(t.o=!0,e){case t.m:t.b++;break;case 13:i.next(),10!==i.Tb()&&t.a("CR without LF");case 10:t.b=0,t.j++;break;case-1:t.g=!1;break;default:t.a("End of field expected")}return i.next(),-1}function Or(t,e,i,n){if(n=n||{},!e)throw new D(Or,1,"has to be a function");if(!i)throw new D(Or,2,"has to be a function");for(this.c=e,this.g=i,this.a=[],this.i=n.duration||Pr,this.b=A(this.b,this),this.f={},t=t.split("Meta:\t").slice(1),e=0;e<t.length;e++){i=(n=t[e].split("\n"))[0].split("\t")[0],n=n.slice(1).join("\n"),this.Td[i]=new Hr,this.fi[i]=Kr(this.Td[i],n);var r={layerId:i,columnNames:this.fi[i]};this.Th.push(i),this.f[i]=Cr(r),this.Rc[i]=zk(),Qr(this,n,i),this.b(i)}}n=Hr.prototype,n.getState=function(){return this.A},n.abort=function(){Jr(this,2,Hr.prototype.abort),this.A=Ir},n.hi=function(t){throw this.A=Ir,new D(Hr.prototype.parse,0,"Malformed DSV at row "+this.a.j+" column "+this.a.b+": "+t)},n.parse=function(t,e,i){Jr(this,Ir,Hr.prototype.parse),t=t.trim(),this.a=new Lr(t,this.b,this.hi),this.c=e,this.Ok=i||ef,this.A=2,this.resume()},n.Ok=ef,n.resume=function(){var t=this.a,e=[];Jr(this,2,Hr.prototype.resume),this.A=1;do{if(!t.g){this.A=Ir;break}if(r>t.b){if(void 0!==i&&i!==r)return void this.a.a("The number of columns must be the same for all rows");var i=r}var n=t.j,r=t.b,o=t.Nf,a=this.Ok(n,r,t);if(t.Nf>o)for(;-1!==t.next(););else{for(;-1!==(o=t.next());)e.push(o);a=String.fromCharCode.apply(y,e),e.length=0}Mr(t),this.c(n,r,a)&&(this.A=t.g?2:Ir)}while(1===this.A);2!=this.A&&void 0!==i&&0<r&&i!==r&&this.a.a("The number of columns must be the same for all rows")},n=Lr.prototype,n.Nf=0,n.Tb=function(){if(this.o)var t=-1;else{var e=this.c;if(t=e.Tb(),this.aa)switch(t){case 34:e.next(),34!==(t=e.Tb())&&(t=Nr(this,t));break;case-1:this.a("Closing quotation mark expected")}else switch(t){case 34:this.a("Unexpected quotation mark");case this.m:case 13:case 10:case-1:t=Nr(this,t)}}return t},n.ze=function(){this.i=!0,this.f=[]},n.Ud=function(){var t=this.f.slice();return this.i=!1,this.f=[],t},n.next=function(){var t=this.Tb();return-1!==t&&this.c.next(),this.i&&this.f.push(t),this.Nf++,t};var Pr=100;function Qr(t,e,i){var n=[],r=t.fi[i].length-1,o=t.f[i];try{t.Td[i].parse(e,(function(e,a,s){var u=!1;return 0<e&&(n[a]=s,a===r&&(t.a.push(o.Bc(o.Wg(n))),zk()-t.Rc[i]>t.i&&(u=!0))),u}),(function(t,e,i){if(0<t&&e===r)return Fn(i)}))}catch(e){t.g(e)}}function wr(t){wr.l.constructor.call(this,wr,t)}function Rr(t,e,i,n){var r,o=e[t=t===Sr?"changes":"file"],a=zc(o),s=!a&&C(o,Blob);if(!a&&!s)throw new D(n,0,"Invalid "+t+" parameter");if(Tr)r=s?o:nf(o,"text/plain"),(n=new x.FormData).append(t,r,r.name||t+".wkt"),i.method="POST",i.data=n,delete e[t];else if(s)throw new D(n,0,"Sending Blob data is not supported by the browser")}n=Or.prototype,n.fi={},n.Th=[],n.Td={},n.Rc={},n.Wi={},n.cancel=function(){for(var t in this.Wi)x.clearTimeout(this.Wi[t])},Or.prototype.cancel=Or.prototype.cancel,Or.prototype.b=function(t){var e,i,n=this;this.Wi[t]=x.setTimeout((function(){if(2===n.Td[t].getState())n.Rc[t]=zk(),n.c(n.a,!1),n.a=[],n.Td[t].resume(),n.b(t);else{for(e=!0,i=0;i<n.Th.length;i++)if(n.Td[n.Th[i]].getState()!==Ir){e=!1;break}e&&(0<n.a.length&&n.c(n.a,!0),n.a=[])}}),0)},u(wr,Pp),t("H.service.extension.customLocation.Service",wr),wr.prototype.a=function(){return{subDomain:"fleet.ls",path:"2"}},wr.CONFIG_KEY="customLocation",wr.prototype.wc=function(t,e){var i=e&&e.resultType;return t=new sr(this,t,e),1===i||2===i?new Bn(t):new ll(t)},wr.prototype.createTileLayer=wr.prototype.wc;var Tr=x.FormData&&!!x.FormData.prototype.append;wr.prototype.request=function(t,e,i,n,r){return this.T(t,e,i,n,r)},wr.prototype.T=function(t,e,i,n,r){var o="text/plain",a=t===Ur.LAYERS_UPLOAD||t===Ur.LAYERS_MODIFY||t===Ur.LAYERS_IMPORT,s=i,u={data:B,method:"GET",headers:this.gf};if(!t)throw new D(this.request,0,t);if(!e)throw new D(this.request,1,e);$q(this.request,3,n,r),a&&(C(i,Object,this.request,2,"Invalid request parameters"),Rr(t,s=Ua(i),u,this.request));var l=this.D().clone().F(t+"."+e).I(s);return e===Vr.JSON&&(o="application/json"),(t=new rf(o,l.toString(),fe,u)).then((function(t){var e=t.issues;e&&t.error_id&&t.response_code?r(Error(e[0].message)):n(t)}),(function(t){"error"===t.type||404===t.status?r(Error(t.statusText||"Unable to load data")):t.json().then((function(t){r(Error("["+t.issues[0].message+"] "+l+" request failed"))}),(function(){r(Error("["+t.statusText+"] "+l+" request failed"))}))})),t};var xr="layers/list",Sr="layers/modify",zr="tiled/tile",Ur={LAYERS_DELETE:"layers/delete",LAYERS_GRANT:"layers/access/grant",LAYERS_LIST:xr,LAYERS_MODIFY:Sr,LAYERS_UPLOAD:"layers/upload",LAYERS_IMPORT:"layers/import",SEARCH_ALL:"search/all",SEARCH_BBOX:"search/bbox",SEARCH_CORRIDOR:"search/corridor",SEARCH_PROXIMITY:"search/proximity",SEARCH_QUADKEY:"search/quadkey",SEARCH_TILE:zr};wr.EntryPoint=Ur;var yr="json",Vr={TXT:"txt",JSON:yr};wr.EntryPointType=Vr,wr.prototype.tb=function(t,e,i){var n=this;return this.request("search/all","txt",{filter:'WKT==""',layer_id:t},(function(r){var o=r.replace(/[\r\n]+$/g,"").split("\t");n.request(xr,yr,{layer_id:t,detail_level:"all"},(function(t){(t=t.layers[0]).columnNames=o,e(Cr(t))}),i)}),i)},wr.prototype.getLayer=wr.prototype.tb,wr.prototype.hk=function(t,e,i,n){var r=e&&e.length,o=-1,a=this;return function s(){return++o<r?a.request("layers/access/grant",yr,{layer_id:t,granted_app_id:e[o].grantedAppId,permissions:e[o].permissions.join(",")},s,n):a.tb(t,i,n)}()},wr.prototype.grantAccess=wr.prototype.hk,wr.prototype.Ej=function(t,e,i){return this.request("layers/delete",yr,{layer_ids:t},e,i)},wr.prototype.deleteLayer=wr.prototype.Ej,wr.prototype.qd=function(t,e,i){function n(){setTimeout((function(){u.tb(a,(function(t){setTimeout(r.bind(null,t),h)}),(function(){64e3>l?(l+=h,n()):i(x.Error("Timeout"))}))}),h),h*=2}function r(n){var r=JSON.stringify(n.Ua()),o=t.grants;if(r!==JSON.stringify(s)){var l="Results into different column names on the backend: "+r;setTimeout((function(){u.Ej(a,(function(){i(x.Error(l))}),(function(t){i(x.Error(l+". "+t.message))}))}),h)}else o&&o.length?u.hk(a,o,e,i):e(n)}var o,a,s,u=this,l=0,h=1e3,c=!t||!tr(a=t.layerId)&&(o="layerId")||!ur(s=t.columnNames)&&(o="columnNames")?0:Ca(e)?Ca(i)?-1:2:1;if(0<=c)throw new D(u.qd,c,o||arguments[c]);return u.tb(a,(function(){i(x.Error("Layer exists already"))}),(function(){var e={layer_id:a,file:s.join("\t")},r=t.level,o=t.storage;r!==B&&(e.level=r),o!==B&&(e.storage=o),u.request("layers/upload",yr,e,n,i)}))},wr.prototype.createLayer=wr.prototype.qd,wr.prototype.Jd=function(t,e,i,n){var r,o=[];return t=this.request(t,yr,e,(function(t){t.geometries.length?(t=vr(t,e.layer_id),r=new Or(t,i,n),o.push(r)):i(ff,!0)}),n),o.push(t),new nr(o)},wr.prototype.Yb=function(t,e,i,n,r,o){if(!yc(t))throw new D(this.Yb,0,"has invalid type");if(C(e,Wf,this.Yb,1,"has invalid type"),!Cc(i))throw new D(this.Yb,2,"has invalid type");return $q(this.Yb,3,n,r),t={layer_ids:t.join(","),proximity:e.lat+","+e.lng+","+i},o&&Wa(t,o),this.Jd("search/proximity",t,n,r)},wr.prototype.searchByProximity=wr.prototype.Yb,wr.prototype.Xb=function(t,e,i,n,r,o){var a="";if(!yc(t))throw new D(this.Xb,0,"has invalid type");if(!zc(e)&&!C(e,L))throw new D(this.Xb,1,"has invalid type");if(!Cc(i))throw new D(this.Xb,2,"has invalid type");if($q(this.Xb,3,n,r),t={layer_ids:t.join(","),radius:i},zc(e))t.route_id=e;else{var s=e.Y;for(e=0,i=s.length;e<i;e+=3)a+=s[e]+","+s[e+1],e<i-3&&(a+=",");t.corridor=a}return o&&Wa(t,o),this.Jd("search/corridor",t,n,r)},wr.prototype.searchByCorridor=wr.prototype.Xb,wr.prototype.Mc=function(t,e,i,n,r){function o(t,e){e&&a--,i(t,!a)}var a,s=[];if(!yc(t))throw new D(this.Mc,0,"has invalid type");for(C(e,K,this.Mc,1,"has invalid type"),$q(this.Mc,2,i,n),e={bbox:e.la+","+e.ca+";"+e.na+","+e.ia},r&&Wa(e,r),t=e.layer_id?[e.layer_id]:t,r=0,a=t.length;r<a;r++)e.layer_id=t[r],s.push(this.Jd("search/bbox",e,o,n));return new nr(s)},wr.prototype.searchByBoundingBox=wr.prototype.Mc,wr.prototype.Ci=function(t,e,i,n){var r,o=[];if(!zc(t))throw new D(this.Ci,0,"has invalid type");$q(this.Ci,1,e,i);var a={layer_id:t};return n&&Wa(a,n),n=this.request("search/all",yr,a,(function(n){n.geometries.length?(n=vr(n,t),r=new Or(n,e,i),o.push(r)):e(ff,!0)}),i),o.push(n),new nr(o)},wr.prototype.searchAll=wr.prototype.Ci;var Wr={delete:/^GEOMETRY_ID$/,append:/^(?!GEOMETRY_ID$)/};function Xr(t,e,i,n,r,o){function a(){d++,n(this,d===f)}function s(t){d++,r(t,this,d===f)}var u,l="append"!==e,h={},c=mc(),f=0,p=[],d=0;if(!yc(i))throw new D(o,0,i);for($q(o,1,n,r),u=i.length;u--;){var g=i[u];if(C(g,Dr)){var v=g.xd().be().layerId,m=g.xa("GEOMETRY_ID");if(l){if(m===y||""===String(m))var b='GEOMETRY_ID must not be null or ""';h[m=v+"_"+m]&&(b="same GEOMETRY_ID for multiple rows"),h[m]=g}else m!==y&&""!==String(m)&&(b='GEOMETRY_ID must be null or ""')}else b="Invalid type";if(b)throw new D(o,0,"- Invalid row at index "+u+", "+b);(m=c[v])||(m=c[v]=[],f++),m.push(g)}for(v in c){for(i=[],u=(m=c[v]).length;u--;)i.push(m[u].gi);p.push(t.request(Sr,yr,{layer_id:v,action:e,changes:m[0].xd().Xi(Wr[e]||null,i)},A(a,m),A(s,m)))}return new nr(p)}function Yr(t){xq.l.constructor.call(this,Yr,t)}function Zr(t){Zr.l.constructor.call(this,Zr,t)}function $r(t){if(this.g=!!t.toBypassToken,!this.g&&!t.token)throw new D($r,0,'"token" must be specified');$r.l.constructor.call(this,$r,t),this.j=t.token,this.i={},this.f={}}function ds(t,e,i,n,r,o,a){return r={method:r,headers:Object.assign(t.g?{}:{authorization:"Bearer "+t.j},{"Content-Type":"application/geo+json"},t.gf)},o&&(r.data=JSON.stringify(o)),(o=new rf("application/json",(e=bs(t.D().clone().F(e+"/features").I(a||{}))).toString(),fe,r)).then(i,Rp(t,e,n)),o}function cs(t,e){return t.g?e:bs(e).I({access_token:t.j})}function bs(t){var e=Object.assign({},t.getQuery());return delete e.apikey,t.Oi(e)}wr.prototype.uj=function(t,e,i){return Xr(this,"append",t,e,i,this.uj)},wr.prototype.appendRows=wr.prototype.uj,wr.prototype.Ql=function(t,e,i){return Xr(this,"update",t,e,i,this.Ql)},wr.prototype.updateRows=wr.prototype.Ql,wr.prototype.Fj=function(t,e,i){return Xr(this,"delete",t,e,i,this.Fj)},wr.prototype.deleteRows=wr.prototype.Fj,Y.prototype.Om=function(t){return this.Ya(wr,t)},Y.prototype.getCustomLocationService=Y.prototype.Om,u(Yr,Pp),t("H.service.extension.customRoute.Service",Yr),Yr.prototype.a=function(){return{subDomain:"s.fleet.ls",path:"2"}},Yr.CONFIG_KEY="customRoute",Yr.prototype.b=function(t){return Error(t.issues&&t.issues.length?t.issues.map((function(t){return t.message})).join(". "):t)},Yr.prototype.Qd=function(t,e,i){return $q(this.Qd,1,e,i),t=this.D().clone().F("calculateroute.json").I(t),this.K(t,e,i)},Yr.prototype.calculateRoute=Yr.prototype.Qd,Y.prototype.Pm=function(t){return this.Ya(Yr,t)},Y.prototype.getCustomRoutingService=Y.prototype.Pm,u(Zr,Pp),t("H.service.SearchService",Zr),Zr.CONFIG_KEY="search",Zr.prototype.a=function(){return{subDomain:"search",path:"v1"}},Zr.prototype.b=function(t){return t=[t.title,t.action,t.cause].filter((function(t){return t})),Error(t.join(". "))},Zr.prototype.rh=function(t,e,i){return t=this.D().clone().Ma("geocode").F("geocode").I(t),this.K(t,e,i)},Zr.prototype.geocode=Zr.prototype.rh,Zr.prototype.Bi=function(t,e,i){return t=this.D().clone().Ma("revgeocode").F("revgeocode").I(t),this.K(t,e,i)},Zr.prototype.reverseGeocode=Zr.prototype.Bi,Zr.prototype.gm=function(t,e,i){return t=this.D().clone().Ma("autosuggest").F("autosuggest").I(t),this.K(t,e,i)},Zr.prototype.autosuggest=Zr.prototype.gm,Zr.prototype.om=function(t,e,i){return t=this.D().clone().Ma("discover").F("discover").I(t),this.K(t,e,i)},Zr.prototype.discover=Zr.prototype.om,Zr.prototype.so=function(t,e,i){return t=this.D().clone().Ma("lookup").F("lookup").I(t),this.K(t,e,i)},Zr.prototype.lookup=Zr.prototype.so,Zr.prototype.im=function(t,e,i){return t=this.D().clone().Ma("browse").F("browse").I(t),this.K(t,e,i)},Zr.prototype.browse=Zr.prototype.im,Y.prototype.In=function(t){return this.Ya(Zr,t)},Y.prototype.getSearchService=Y.prototype.In,u($r,Pp),t("H.service.xyz.Service",$r),$r.prototype.a=function(){return{host:"xyz.api.here.com",path:"hub/spaces"}},$r.prototype.b=function(t){return Error(t.errorMessage||t.message)},$r.prototype.Dh=function(t,e,i){return wc(t,"String",this.Dh,0,'"projectId" must be a string'),as(this.Dh,1,e,i),t=bs(this.D().clone().Md("project-api/projects/"+t)),this.K(t,e,i)},$r.prototype.getProject=$r.prototype.Dh,$r.prototype.ck=function(t,e,i){return as(this.ck,0,t,e),i=cs(this,this.D().clone().I(i||{})),this.K(i,t,e)},$r.prototype.getSpaces=$r.prototype.ck,$r.prototype.eg=function(t,e,i){return wc(t,"String",this.eg,0,'"spaceId" must be a string'),as(this.eg,1,e,i),t=cs(this,this.D().clone().F(t)),this.K(t,e,i)},$r.prototype.getSpace=$r.prototype.eg,$r.prototype.fe=function(t,e,i){return wc(t,"String",this.fe,0,'"spaceId" must be a string'),as(this.fe,1,e,i),t=cs(this,this.D().clone().F(t+"/statistics")),this.K(t,e,i)},$r.prototype.getStatistics=$r.prototype.fe,$r.prototype.$f=function(t,e,i,n,r,o,a){return t=cs(this,this.D().clone().F(n+"/tile/web/"+i+"_"+t+"_"+e+".mvtf").I(Object.assign({clip:!0},a))),this.K(t,(function(t){return t.arrayBuffer().then(r)}),o,"arraybuffer")},$r.prototype.search=function(t,e,i,n){return wc(t,"String",this.search,0,'"spaceId" must be a string'),as(this.search,1,e,i),t=cs(this,this.D().clone().F(t+"/search").I(n||{})),this.K(t,e,i)},$r.prototype.search=$r.prototype.search,$r.prototype.cd=function(t,e,i,n){if(wc(t,"String",this.cd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.cd,1,'"params" must be an object');return as(this.cd,2,i,n),t=cs(this,this.D().clone().F(t+"/features").I(e)),this.K(t,i,n)},$r.prototype.getFeaturesById=$r.prototype.cd,$r.prototype.Zd=function(t,e,i,n){if(wc(t,"String",this.Zd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.cd,1,'"params" must be an object');return as(this.Zd,2,i,n),t=cs(this,this.D().clone().F(t+"/bbox").I(e)),this.K(t,i,n)},$r.prototype.getFeaturesByBoundingBox=$r.prototype.Zd,$r.prototype.ta=function(t){return this.i[t]||(this.f[t]||this.Re(t),null)},$r.prototype.kd=function(t,e,i,n,r){if(wc(t,"String",this.kd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.kd,1,'"geojsonObject" must be an object');if(as(this.kd,2,i,n),r&&!Da(r))throw new D(this.kd,4,'"opt_params" must be an object');return ds(this,t,i,n,"PUT",e,r)},$r.prototype.putFeatures=$r.prototype.kd,$r.prototype.hd=function(t,e,i,n,r){if(wc(t,"String",this.hd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.hd,1,'"featureCollection" must be an object');if(as(this.hd,2,i,n),r&&!Da(r))throw new D(this.hd,4,'"opt_params" must be an object');return ds(this,t,i,n,"POST",e,r)},$r.prototype.postFeatures=$r.prototype.hd,$r.prototype.sd=function(t,e,i,n){if(wc(t,"String",this.sd,0,'"spaceId" must be a string'),!Da(e))throw new D(this.sd,1,'"params" must be an object');return as(this.sd,2,i,n),ds(this,t,i,n,"DELETE",B,e)},$r.prototype.deleteFeatures=$r.prototype.sd,$r.prototype.Re=function(t){var e=this;this.f[t]=es,this.eg(t,(function(i){e.f[t]=fs,e.i[t]=i.copyright,e.dispatchEvent("copyrightupdate")}),(function(i){throw e.f[t]=gs,i}))},$r.CONFIG_KEY="xyz";var es=1,fs=2,gs=-1,js;function as(t,e,i,n){if(!Ca(i))throw new D(t,e,'"onResult" must be a function');if(!Ca(n))throw new D(t,e+1,'"onError" must be a function')}function hs(t,e,i){var n;if(hs.l.constructor.call(this,i?{min:i.min,max:i.max,engineType:i.engineType}:void 0),C(t,$r,hs,0),!zc(e))throw new D(hs,1,'"spaceId" must be a string');if(this.s=t,this.a=e,this.c={},i&&(["limit","simplificationLevel","tags"].forEach((function(t){t in i&&(this.c[t]=i[t])}),this),t=i.parameters))for(n in t)this.c[n]=t[n];this.ac(this.f===Vj.WEBGL?new Th({sources:{xyz:{type:"MVT"}},layers:{xyz:{data:{source:"xyz",layer:this.a},points:{filter:{$geometry:"point"},draw:{points:{collide:!1,order:200,color:"#92CF48",size:[[10,"8px"],[14,"12px"],[18,"16px"]]}}},polygons:{filter:{$geometry:"polygon"},draw:{polygons:{order:201,color:"#E39E3C"},lines:{order:202,color:"#755DA5",width:"1px"}}},lines:{filter:{$geometry:"line"},draw:{lines:{order:203,color:"#000000",width:"2px",join:"round",cap:"round"}}}}}}):new H.map.render.harp.Style({styles:[{layer:this.a,when:["==",["geometry-type"],"Point"],technique:"circles",renderOrder:200,color:"#92CF48",size:["interpolate",["linear"],["zoom"],10,8,14,12,18,16]},{layer:this.a,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#E39E3C",renderOrder:201},{layer:this.a,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#755DA5",lineWidth:"1px",renderOrder:202},{layer:this.a,when:["==",["geometry-type"],"LineString"],technique:"solid-line",color:"#000000",lineWidth:"2px",renderOrder:203}]}))}function is(t){var e;if(t)for(this.a={},e=t.length;e--;)this.a[t[e]]=!0;this.Hl={}}Y.prototype.Vn=function(t){return this.Ya($r,t)},Y.prototype.getXYZService=Y.prototype.Vn,u(hs,R),t("H.service.xyz.Provider",hs),hs.prototype.K=function(t,e,i,n,r){return this.s.$f(t,e,i,this.a,n,r,this.c)},hs.prototype.requestInternal=hs.prototype.K,hs.prototype.ta=function(){return this.s.ta(this.a)},hs.prototype.getCopyrights=hs.prototype.ta,hs.prototype.Ed=df,hs.prototype.providesOMV=hs.prototype.Ed,hs.prototype.ua=function(){return this.ub()},hs.prototype.getStyle=hs.prototype.ua,hs.prototype.rc=function(t){C(t,Th)&&t.b("MVT"),this.ac(t)},hs.prototype.setStyle=hs.prototype.rc,t("H.service.buildInfo",(function(){return Ef("H-service","1.30.3","2978c8b")})),is.prototype.a={},is.prototype.parse=function(t,e,i){var n,r,o,a,s;js=!1;try{i=Kp.JSON.parse(i)}catch(t){js=!0}if(i&&(n=i.metadata)){var u={spatials:[]};for(r in n)if((i=!this.a[r]&&(o=ks[r]))&&((a=n[r])||(js=!0,a=void 0),i=a),i)for(i=a.length;i--;){var l;(l=a[i])||(js=!0,l=void 0),(s=l)&&o(e,t,this,r,s,u)}}else js=!0;return js?void 0:u},is.prototype.parse=is.prototype.parse;var ks={"street labels":function(t,e,i,n,r,o){var a;if((a=r.vertices)||(js=!0,a=void 0),a){var s,u,l=a.length;if((u=0<l)||(js=!0,u=void 0),u)for(s=Array(l/2);l;){var h=a[--l];u=a[--l],s[l/2]=new I(u,h)}s=s?{a:[s]}:B,l=+r["font size"]/t.$a(),(a=i.Hl[l])||(ls.lineWidth=l,a=i.Hl[l]=i.Sd.Rj(ls)),ms(t,e,s,!1,a,r,n,o)}delete r.vertices},"city center labels":function(t,e,i,n,r,o){ms(t,e,ns(r,new rh([])),!0,i.Sd,r,n,o)},labels:function(t,e,i,n,r,o){var a;if((a=r["bounding boxes"])||(js=!0,a=void 0),a){for(var s,u=a.length,l=new rh([]);u--;){var h;(h=a[u])||(js=!0,h=void 0),(s=h)&&ns(s,l)}ms(t,e,l,!0,i.Sd,r,n,o)}delete r["bounding boxes"]},buildings:function(t,e,i,n,r,o){var a,s,u,l,h=r.id,c=e.zg[h],f=[],p=[];(a=r)||(js=!0,a=void 0),a&&((s=a.vertices)||(js=!0,s=void 0),s)&&((l=a.polygons)||(js=!0,l=void 0),(u=l)&&f.push.apply(f,os(s,u)),(a=a.outlines)||(js=!0,a=void 0),(u=a)&&p.push.apply(p,os(s,u))),u=f.length,f.push.apply(f,p),p=new rh(f,Td,u),(f=f.length)||(js=!0,f=void 0),f&&(c?(Yq(c,t,[p]),o.spatials.push(c)):(c=ms(t,e,p,!0,i.Sd,r,n,o,h),e.ea(c)))}};ks["transit stops"]=ks.POIs=ks.labels;var ps=["box 2","box 1","annotation box","icon box"];function ns(t,e){for(var i,n,r=ps.length;r--;)if(n=t[i=ps[r]]){var o=n[0],a=n[1],s=n[2];n=n[3],e.a.push([new I(o,a),new I(o+s,a),new I(o+s,a+n),new I(o,a+n)]),delete t[i]}return e}function os(t,e){var i,n,r,o=e.length;if(0<o)for(n=Array(o);o--;)if((i=e[o])||(js=!0,i=void 0),i){var a=i.length;if(0<a)for(n[o]=r=Array(a);a--;){var s=2*i[a];r[a]=new I(t[s],t[s+1])}}return n||[]}var qs={};function ms(t,e,i,n,r,o,a,s,u){return qs.style=r,n=new Uq(e,n,u,qs),i&&Yq(n,t,[i]),rs(o),o.category=a,n.setData(o),s.spatials.push(n),n.ka(e),n}is.prototype.Sd=new Ug({strokeColor:"transparent",fillColor:"transparent",lineWidth:0});var ls={};function rs(t){var e,i=!1;switch(typeof t){case"object":if(t instanceof Array)for(e=t.length;e--;)rs(t[e])?i=!0:delete t[e];else if(t)for(e in t)rs(t[e])?i=!0:delete t[e];break;case"number":i=!0;break;default:i=!!t}return i}function ss(t,e,i){e=e||{};var n=(i=i||{}).tileType||"maptile",r=i.scheme||"normal.day";if(R.call(this,{min:0,max:20}),!0===e.pois&&(e.pois="!F"),this.a=e,!(t&&t instanceof ts))throw Error("InvalidArgument: service required");this.C=t,this.v=A(this.v,this),this.C.addEventListener("versionupdate",this.v),this.c=t.D().clone().F(n+"/"+t.Cc()+"/"+r).I(this.N).I(e),this.bc=t.Fh()||null,this.W=i.pixelRatio||i.pixelratio||Se(),this.tileSize=i.tileSize||256,this.tileType=n,this.scheme=r,this.s=new kq(new is(i.categoryFilter)),this.s.ka(this),this.J=A(this.J,this),this.s.addEventListener("update",this.J),R.call(this,{min:0,max:20}),this.O(new Dk(i.tileCacheSize||256,A(this.Aa,this)))}function ts(t){ts.l.constructor.call(this,ts,t),t=Qp(this,t),this.bc=t.shards,(this.Ra=t.ignoreTypes?null:t.type)&&this.D().Ma(this.Ra),this.cc=t.version,this.vi={},this.Xc=new Ap,"newest"===this.cc&&this.ph()}function us(t,e){for(var i={},n=t[e+"s"][e],r=n.length;r--;)i[n[r].id]=n[r];t[e+"s"]=i}function vs(t,e,i,n,r){1&r&&ws(t,t,e,i,n,0),2&r&&ws(t,t,e,i,n,1),4&r&&ws(t,t,e,i,n,2),8&r&&ws(t,t,e,i,n,3)}function ws(t,e,i,n,r,o){for(var a,s,u,l,h=(i+1)*(i+1),c=4*n,f=i+1,p=[{r:0,xm:0,hm:0,Ug:0,next:null}],d=1,g=["r","g","b","a"][o],y=2*i+1;d<y;d++)p[d]={r:0,xm:0,hm:0,Ug:0,next:null},p[d-1].next=p[d];p[2*i].next=p[0];var v=4*(n-1);for(a=0;a<r;a++){var m=a*c,b=t[m+o],_=b*f*(i+2)/2;for(y=b*f,d=0;d<=i;d++)p[d][g]=b;var w=0;for(d=1;d<=i;d++){var x=d<n?m+4*d:m+v;_+=(x=t[x+o])*(f-d),w+=x,p[i+d][g]=x}x=p[0],u=p[f],d=m,l=4*f;var M=m+v;for(b=0;b<n;b++){e[d+o]=_/h,_-=y;var E=b+f<n?d+l:M;if(_+=w+=E=t[E+o],y-=x[g],y+=u[g],w-=u[g],x[g]=E,x=x.next,u=u.next,d+=4,!_)for(;(s=4*(b+f))<c&&0===t[m+o+s];)b++,d+=4}}for(m=(r-1)*c,b=0;b<n;b++){for(_=(a=e[(t=4*b)+o])*f*(i+2)/2,y=a*f,d=0;d<=i;d++)p[d][g]=a;for(w=0,d=1;d<=i;d++)_+=(x=e[(x=d<r?t+d*c:t+m)+o])*(i-d+1),w+=x,p[i+d][g]=x;for(x=p[0],u=p[f],d=t,M=f*c,v=t+m,a=0;a<r;a++)if(e[d+o]=_/h,_-=y,_+=w+=E=e[(E=a+f<r?d+M:v)+o],y-=x[g],y+=u[g],w-=u[g],x[g]=E,x=x.next,u=u.next,d+=c,!_)for(;(s=a+f)<r&&0===e[s*c+o+t];)a++,d+=c}}function xs(t,e,i){this.f=e=t>>e,this.j=Math.log(e)*Math.LOG2E,this.i=t=document.createElement("CANVAS"),this.a=t.getContext("2d"),this.b=t.width=t.height=3*e;var n=document.createElement("canvas");t=i.a;var r,o=i.b;for(a in e=[],n.width=256,n.height=1,n=n.getContext("2d"),o)o.hasOwnProperty(a)&&e.push({stop:parseFloat(a),value:o[a]});o=e.length,e.sort(this.m),0<e[0].stop&&e.unshift({stop:0,value:e[0].value}),1>e[o-1].stop&&e.push({stop:1,value:e[o-1].value}),o=e.length;var a=n.createLinearGradient(0,0,256,0);for(r=0;r<o;r++){if(!t&&u){var s=u.stop+(e[r].stop-u.stop)/2;a.addColorStop(s,u.value),a.addColorStop(s,e[r].value)}a.addColorStop(e[r].stop,e[r].value);var u=e[r]}n.fillStyle=a,n.fillRect(0,0,256,1),this.c=n.getImageData(0,0,256,1).data,this.g=i.a}function ys(t,e){this.canvas=t,this.size=e}function zs(t,e,i){this.a=t=Yd(t,0,30),this.Ra=e,this.i=i,this.m=[],this.b=[];do{this.b[t]=[],this.m[t]=new As}while(t--);e===Bs?(this.o=Cs,this.j=Ds):(this.o=Es,this.j=Fs),this.c=1/0,this.f=-1/0}u(ss,R),t("H.service.metaInfo.TileProvider",ss),ss.prototype.Aa=function(t,e){for(var i,n=(t=e.Va()).length;n--;)delete(i=t[n]).tf[e.key],i.release();e.data&&(Mp.push(e.xg(),this.tileSize),e.yg())},ss.prototype.J=function(){this.dispatchEvent("update")},ss.prototype.K=function(t,e,i,n,r){var o,a=this.c.clone(),s=this.bc,u=this.tileSize,l=this.getTileKey(t,e,i);if((l=this.Ob().get(l))&&!l.le()){n(Mp.pop(this.tileSize),null);var h={cancel:function(){}}}else{s&&a.Ma(s[(i+e+t)%s.length]),a.F(i+"/"+t+"/"+e+"/"+u+"/png8");var c=Kp.setTimeout((function(){(o=new rf("text/plain",a.toString())).then((function(t){n(null,t)}),r)}),500)}return h||{cancel:function(){o?o.cancel():Kp.clearTimeout(c)}}},ss.prototype.requestInternal=ss.prototype.K,ss.prototype.rd=function(t,e,i,n,r){var o=this.s,a=n||Mp.pop(this.tileSize);if(n)(t=this.Ob().get(this.getTileKey(t,e,i))).V(n);else if(delete(n=t=new Pk(this.yd(t,e,i),t,e,i,this.tileSize,this.W,i,o)).j,n.m=r,t.V(a))for(a=(r=t.Va()).length;a--;)r[a].Dg();else Mp.push(a,this.tileSize);return t},ss.prototype.createTileInternal=ss.prototype.rd,ss.prototype.B=function(){this.s.B(),this.C.removeEventListener("versionupdate",this.v),R.prototype.B.call(this)},ss.prototype.v=function(){var t=this.C;this.c=t.D().clone().F(this.tileType+"/"+t.Cc()+"/"+this.scheme).I(this.N).I(this.a),this.reload(!1)},ss.prototype.N={metadata:"metaonly",mgen:"2"},u(ts,Pp),t("H.service.metaInfo.Service",ts),ts.prototype.a=function(){return{type:"base",version:"newest",subDomain:"maps.ls",path:"maptile/2.1",shards:["1","2","3","4"]}},ts.CONFIG_KEY="metaInfo",ts.prototype.Fh=function(){return this.bc},ts.prototype.ek=function(){return this.Ra},ts.prototype.Cc=function(){return this.cc},ts.prototype.getVersion=ts.prototype.Cc,ts.prototype.Si=function(t){this.cc=t},ts.prototype.ta=function(){return this.Xc},ts.prototype.getCopyrights=ts.prototype.ta,ts.prototype.$i=function(t){var e;if(us(t=t.response,"map"),us(t,"scheme"),us(t,"tiletype"),us(t,"format"),us(t,"resolution"),us(t,"language"),"newest"===this.cc&&"traffic"!==this.Ra)for(e in t.maps)t.maps[e].hash&&t.maps[e].newest&&(this.Si(t.maps[e].hash),this.dispatchEvent("versionupdate"));this.Lh=t,this.dispatchEvent("infoupdate")},ts.prototype.ph=function(){var t=this,e=this.D().clone().F("info").I({output:"json"});this.bc&&e.Ma(this.bc[0]),this.K(e,(function(e){t.$i(e)}),(function(t){throw t}))},ts.prototype.xh=function(){return this.Lh},ts.prototype.getInfo=ts.prototype.xh,ts.prototype.Me=function(t,e,i,n,r,o){return new ss(this,n,{tileSize:t,pixelRatio:e,categoryFilter:i,tileType:r,scheme:o})},ts.prototype.createTileProvider=ts.prototype.Me,ts.prototype.wc=function(t,e,i,n,r,o){return new ll(this.Me(t,e,i,n,r,o))},ts.prototype.createTileLayer=ts.prototype.wc,Y.prototype.Wj=function(t){return this.Ya(ts,t)},Y.prototype.getMetaInfoService=Y.prototype.Wj,function(){var t=Y.prototype.createDefaultLayers;Y.prototype.createDefaultLayers=function(e,i,n,r,o,a){var s=t.call(this,e,i,n,r,o,a),u={},l=this.Wj();"object"==typeof e&&(e=(a=e).tileSize,i=a.ppi,n=a.lg,r=a.lg2,o=a.style,a=a.pois),e=e||256;var h=320===i?2:1;if(0>[72,250,320,500].indexOf(+i)){if(i!==B)throw new D(this.Sf,1,i)}else u.ppi=+i;return n&&(u.lg=n),r&&(u.lg2=r),o&&(u.style=o),a&&(u.pois=a),s.raster.normal.metaInfo=l.wc(e,h,["buildings"],u),s}}(),xs.prototype.m=function(t,e){return t.stop-e.stop};var Gs=Math.log(.5);function Ds(t){return this.g?Math.round((t-this.c)/this.g*255):127}function Fs(t){return void 0===this.aa?127:Math.round(255*Math.pow(t,this.aa))}function Hs(t,e,i,n,r){var o,a,s=1<<e;return n=Xd(n,s),!(s=0<=i&&i<s&&(o=t.b[e])&&(a=o[i])&&(s=a[n])||null)&&r&&0<=e&&(s=Hs(t,e-1,i>>1,n>>1,r)),s}function Is(t,e,i,n,r,o){for(var a,s=[];i<=n;i++)for(a=r;a<=o;a++)s.push(Hs(t,e,i,a,!1));return s}function Js(t,e){var i,n=0,r=0,o=Hs(t,0,0,0,!1);return!0===e.c||(e.z===t.a?e.f=e.a:(Ks(t,e,(function(e){var a=Ls(t,e),s=4-a.length;if(e.z!==t.a){for(i=0;i<a.length;i++)n+=a[i].a,r++;n+=s*o.a,r+=s}})),e.f=n/r),e.c=!0),e.f}function Ks(t,e,i){e=[e];for(var n,r;0<e.length;)n=Ls(t,r=e.shift()),i(r),e.push.apply(e,n)}function Ls(t,e){var i,n,r,o=[];for(n=0;1>=n;n++)for(r=0;1>=r;r++)(i=Hs(t,e.z+1,2*e.x+n,2*e.y+r,!1))&&o.push(i);return o}function Es(){this.a=this.b=this.g=0}function Cs(){this.a=this.b=this.g=0,this.c=!1}function As(){this.f=this.c=1/0,this.a=this.b=-1/0}function Ms(t,e){var i,n=0;if(!Da(t)||Ta(t))throw new D(Ms,0,t);for(i in t){var r=+i;if(n++,!(Cc(r)&&0<=r&&1>=r&&zc(t[i])))throw new D(Ms,0,t)}if(2>n)throw new D(Ms,0,"Specify at least 2 stops");this.b=t,this.a=!!e}zs.prototype.Ib=function(t){var e,i,n=t.value;void 0===n&&(n=1),n>this.f&&(this.f=n,this.g=this.f-this.c),n<this.c&&(this.c=n,this.g=this.f-this.c);var r=Xi.$c(t).scale(1073741823).floor();n=this.a;var o=r.x>>30-n;for(r=r.y>>30-n,i=this.o;-1<n;){this.b[n][r]||(this.b[n][r]=[]),(e=this.b[n][r][o])||(e=this.b[n][r][o]=new i),e.Ib(t,n);var a=this.m[n];a.f>e.b&&(a.f=e.b),a.a<e.b&&(a.a=e.b),a.c>e.a&&(a.c=e.a),a.b<e.a&&(a.b=e.a),n--,o>>=1,r>>=1}},zs.prototype.clear=function(){zs.call(this,this.a,this.Ra,this.i)},Es.prototype.Ib=function(t,e){this.g++,this.b+=t.value||1,this.a=this.b/Math.pow(2,2*(30-e))},Cs.prototype.Ib=function(t){t=t.value,this.b+=void 0!==t?t:1,this.a=this.b/++this.g,this.c=!1},t("H.data.heatmap.Colors",Ms);var Ns=new Ms({0:"#008",.2:"#0b0",.5:"#ff0",.7:"#f00"},!0);function Os(t){var e=t||{},i=+e.sampleDepth;t=+e.coarseness;var n=e.colors,r={min:e.min,max:e.max},o=e.tileSize,a=+e.dataMax;if(e.tileSize&&(r.tileSize=o),R.call(this,r),Xj(this,e.opacity),this.Ra="value"===e.type?Bs:Ps,this.sampleDepth_=Cc(i)?Yd(Math.round(i),1,8):4,this.v=!!e.assumeValues,e=this.max,this.C=Cc(a)?Yd(Math.round(a),this.min,e+this.sampleDepth_):e,t=Cc(t)?Yd(Math.round(t),0,3):1,n&&!C(n,Ms))throw new D(Os,0,"colors");this.a=new zs(e+this.sampleDepth_,this.Ra,this.C),this.N=new xs(this.tileSize,t,n||Ns),this.s=A(this.s,this),this.c=A(this.c,this),this.J=new xk(20,this.s)}function Qs(t,e,i,n){var r=document.createElement("canvas"),o=t.tileSize,a=r.getContext("2d");r.width=r.height=o;var s,u,l=t.N,h=t.a,c=t.v,f=t.Ra,p=l.f,d=l.a,g=f===Ps?2:1,y=g;t=Math.min(t.sampleDepth_+g,l.j),g=l.b;var v=h.a;if(c&&f===Bs){for(u=-1;1>=u;u++)for(c=-1;1>=c;c++){var m=(m=Hs(h,n,i+u,e+c,!0))?h.j(Js(h,m)):128;d.fillStyle="rgba("+m+",128,0,1)",d.fillRect((c+1)*p,(u+1)*p,p,p)}c=p-Math.floor(p/10),u=3,vs((m=d.getImageData(0,0,g,g)).data,c,g,g,u),d.putImageData(m,0,0)}else d.fillStyle=c?"#080":"#000",d.fillRect(0,0,g,g);for(;y<=t&&n+y<=v;y++){u=p-(c=p>>y);var b=f===Ps?127+Math.floor(128/(1<<t-y)):255;m=2+(1<<y);var _=1<<y,w=e<<y,x=i<<y;for(w=(_=Is(h,n+y,x-1,x+_,w-1,w+_)).length;w--;){x=w%m;var M=w/m<<0;(s=_[w])&&(s=h.j(s.a),d.fillStyle="rgba("+s+","+b+",0,1)",d.fillRect(x*c+u,M*c+u,c,c))}m=d,b=c,_=u,w=p+2*c,c=p+2*c,x=x=3,vs((M=d.getImageData(_,u,w,c)).data,b,w,c,x),m.putImageData(M,_,u)}for(e=d.getImageData(0,0,g,g),i=l.c,n=l.g,t=0,g=(h=e.data).length;t<g;t+=4)f=h[t],y=h[t+1],4===i.length&&(f=0),h[t]=i[4*f],h[t+1]=i[4*f+1],h[t+2]=i[4*f+2],h[t+3]=i[4*f+3]*(n?y/255:10>y?0:1);return d.putImageData(e,0,0),p=(l=new ys(l.i,p)).size,a.drawImage(l.canvas,p,p,p,p,0,0,o,o),r}Ms.DEFAULT=Ns,u(Os,R),t("H.data.heatmap.Provider",Os),Os.prototype.qc=function(t){Xj(this,t)},Os.prototype.setOpacity=Os.prototype.qc,Os.prototype.dd=function(){return this.j},Os.prototype.getOpacity=Os.prototype.dd,Os.prototype.pf=df,Os.prototype.providesRasters=Os.prototype.pf,Os.prototype.K=function(t,e,i,n,r){var o,a,s=this.v;if(Hs(this.a,0,0,0,!1)){if(!s){var u=Is(this.a,i,e-1,e+1,t-1,t+1);for(o=u.length;o--&&!s;)if(null!==u[o]){s=!0;break}}s&&(a=this.J.push([t,e,i,n,r],this.c))}return s||n(null),a},Os.prototype.requestInternal=Os.prototype.K,Os.prototype.s=function(t,e){t.done(Qs(this,e[0],e[1],e[2]))},Os.prototype.c=function(t,e,i){var n=t.data;t=n[3],n=n[4],i?n():t(e)},Os.prototype.tj=function(t,e){var i;if(!yc(t))throw new D(this.tj,0,t);if(i=t.length){for(;i--;)this.a.Ib(t[i]);var n;i=(t=this.a).m;var r=t.a,o=0;if(t.Ra===Ps){var a=i[t.a].a;for(n=t.a;0<=n&&i[n].a===a;n--)o=n;for(a=i[0].a,n=0;n<=o&&a===i[n].a;n++)r=n;o>t.i&&(o=t.i),a=Math.round(r+(o-r)/2),t.aa=Gs/Math.log(i[a].b)}this.reload(!!e)}},Os.prototype.addData=Os.prototype.tj,Os.prototype.clear=function(){this.a.clear(),this.reload(!0)},Os.prototype.clear=Os.prototype.clear;var Ps=0,Bs=1;function Rs(){}function Ss(){this.a={4:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),"ff"].join("")},5:function(t){return["#",t.charAt(1),t.charAt(1),t.charAt(2),t.charAt(2),t.charAt(3),t.charAt(3),t.charAt(4),t.charAt(4)].join("")},7:function(t){return t+"ff"},9:function(t){return t}},this.b={4:function(t){return[Ts(t.charAt(1)),Ts(t.charAt(2)),Ts(t.charAt(3)),255]},5:function(t){return[Ts(t.charAt(1)),Ts(t.charAt(2)),Ts(t.charAt(3)),Ts(t.charAt(4))]},7:function(t){return[(t=parseInt(t.substring(1),16))>>16&255,t>>8&255,255&t,255]},9:function(t){return[(t=parseInt(t.substring(1),16))>>24&255,t>>16&255,t>>8&255,255&t]}}}function Ts(t){return((t=parseInt(t,16))<<4)+t}function Us(t){return 16>t?"0"+Math.round(t).toString(16):Math.round(t).toString(16)}function Vs(t,e,i){return/^(#|rgb).*/.test(e)?(i||(i="","#"===e.charAt(0)?i=t.a[e.length]?e:"":"rgb"===e.substr(0,3)&&(i=2<(i=(e=e.match(/\d+(\.\d+)?/g)).length)&&5>i?["#",Us(+e[0]),Us(+e[1]),Us(+e[2]),3<i?Us(255*+e[3]):"ff"].join(""):""),e=i),(t=t.b[e.length](e))[3]=Math.round(t[3]/255*100)/100,t):[0,0,0,255]}function Ws(t){for(var e,i=(t=t.attributes).length;i--;)switch(e=t[i],e.name){case"x":this.x=parseFloat(e.value);break;case"y":this.y=parseFloat(e.value);break;case"xunits":this.fd="fraction"===Rs.prototype.Oa(e);break;case"yunits":this.Gc="fraction"===Rs.prototype.Oa(e)}}function Xs(t){var e=t.childNodes,i=new Rs;for(t=e.length;t--;){var n=e[t];"href"===n.nodeName&&(this.href=i.Oa(n))}}function Ys(t){var e;if(t){var i=(t=t.childNodes).length;for(e=new Rs;i--;){var n=t[i];switch(n.nodeName){case"scale":this.scale=e.ag(n);break;case"Icon":this.icon=n=new Xs(n);break;case"hotSpot":this.kk=n=new Ws(n)}}}}function Zs(t){for(var e,i=(t=t.childNodes).length,n=new Rs,r=new Ss;i--;)switch(e=t[i],e.nodeName){case"color":this.color=n.Zf(e);break;case"colorMode":this.a=n.Oa(e)}"random"===this.a&&(this.color="#"+r.Ol(this.color,!1))}function $s(t){var e=t.childNodes,i=e.length,n=new Rs;for(this.outline=this.fill=!0,this.Mf=new Zs(t);i--;)switch(t=e[i],t.nodeName){case"fill":this.fill=n.Wd(t);break;case"outline":this.outline=n.Wd(t)}}function at(t){var e=t.childNodes,i=e.length,n=new Rs;for(this.Mf=new Zs(t);i--;)"width"===(t=e[i]).nodeName&&(this.width=n.ag(t))}function bt(t){for(var e,i=(t=t.childNodes).length,n=new Rs;i--;)switch(e=t[i],e.nodeName){case"bgColor":this.bgColor=n.Zf(e);break;case"textColor":this.textColor=n.Zf(e);break;case"text":this.text=n.Oa(e);break;case"displayMode":this.displayMode=n.Oa(e)}}function ct(t){var e=t.childNodes,i=e.length;for(this.id=t.getAttribute("id");i--;)switch(t=e[i],t.nodeName){case"IconStyle":this.lk=t=new Ys(t);break;case"LineStyle":this.ne=t=new at(t);break;case"PolyStyle":this.al=t=new $s(t);break;case"BalloonStyle":this.Hf=t=new bt(t)}}function dt(t,e){var i=(t=t.childNodes).length,n=new Rs;for(this.b=e;i--;)switch(e=t[i],e.nodeName){case"key":this.key=n.Oa(e);break;case"styleUrl":this.a=n.Oa(e)}}function et(t,e){var i=t.childNodes,n=i.length;for(this.b=e,this.id=t.getAttribute("id"),this.a=[];n--;)"Pair"===(t=i[n]).nodeName&&(t=new dt(t,this.b),this.a.push(t))}function ft(){this.a={}}function gt(t,e){var i=t&&t.childNodes||[],n=new Rs;if(!t||!e)throw Error("Node or stylesContainer is not defined");for(this.visibility=!0,this.Qo=t,t=i.length;t--;){var r=i[t];switch(r.nodeName){case"name":this.name=n.Oa(r);break;case"description":this.description=n.Oa(r);break;case"visibility":this.visibility=n.Wd(r);break;case"open":this.open=n.Wd(r);break;case"styleUrl":(this.a=n.Oa(r))&&(r=this.a.substr(1),this.vm=e.Gh(r,!1));break;case"Style":this.yk=r=new ct(r)}}}function ht(t){for(var e,i=(t=t.childNodes).length,n=null,r=new Rs;i--;)"coordinates"===(e=t[i]).nodeName&&(n=r.Oa(e));this.a=null,n&&(this.a=r.si(n)||null)}function it(t){for(var e,i=(t=t.childNodes).length,n=new Rs;i--;)if("coordinates"===(e=t[i]).nodeName){e=n.Oa(e);var r=[],o=new Rs;try{r=o.Yk(e)}catch(t){r=[]}this.a=2>r.length?[]:r}}function jt(t){for(var e=new L,i=t.a?t.a.length:0;i--;)e.Fd(t.a[i]);return e}function kt(){}function lt(t){var e=t.childNodes,i=e.length;for(this.a=new L,this.c=[];i--;){var n=e[i],r=n.nodeName;if("outerBoundaryIs"===r||"innerBoundaryIs"===r){var o=n.childNodes;for(n=o.length;n--;){var a=o[n];if("LinearRing"===a.nodeName){var s=new it(a);if("outerBoundaryIs"===r){this.a=jt(s);var u=void 0,l=t,h=s.a;s=new Rs;var c=l.querySelector("altitudeMode");if(c&&c.parentNode===l&&!/^\s*clampTo/.test(s.Oa(c))&&h){c=h.length;for(var f=0;f<c&&0!==u;f++){var p=h[f].alt;p?u?p!==u&&(u=0):u=p:u=0}(h=l.querySelector("*|altitudeOffset"))&&h.parentNode===a&&"http://www.google.com/kml/ext/2.2"===h.namespaceURI&&(a=s.ag(h))&&(u+=a),u&&(u=vd(yi,u),(a=l.querySelector("extrude"))&&a.parentNode===l&&s.Wd(a)?this.b=u:this.f=u)}}else this.c.push(jt(s))}}}}}function mt(t,e){var i=document.createElement("CANVAS");i.width=1,i.height=1,this.i=t,this.b={},this.f={},this.g=new Ij(i),this.c=e||""}function nt(t,e,i){for(var n,r,o=(e=e.childNodes).length,a={};o--;){var s=e[o];switch(s.nodeName){case"Point":n=new ht(s),r=ot(t,"Marker"),n=new yn(n.a,r),r.ti&&Ce(r.ti,"statechange",A(t.j,t,r.ti,n,r),!1);break;case"LineString":case"LinearRing":n=new it(s),r=ot(t,"Polyline"),n=new nh(jt(n),r);break;case"Polygon":n=new lt(s),(r=ot(t,"Polygon")).elevation=n.f,r.extrusion=n.b,n=new xi(new O(n.a,n.c),r);break;case"MultiGeometry":n=nt(t,s,n=new Q)}n&&(t.a.name&&(a.name=t.a.name),t.a.description&&(a.description=t.a.description),r&&r.Hf&&(a.balloonStyle=r.Hf),a.kmlNode=t.a.Qo,n.setData(a),i&&i.ea(n))}return i&&(n=i),n}function ot(t,e){var i=t.a,n={visibility:i.visibility},r=new Ss,o=1,a={x:0,y:0,fd:!1,Gc:!1},s=pt(t,i.vm);switch(i.yk&&(s=pt(t,i.yk,s)),e){case"Marker":if(s&&s.lk){if((r=s.lk).scale&&(o=r.scale),r.kk){var u=r.kk;a={x:u.x,y:u.y,fd:u.fd,Gc:u.Gc}}r.icon&&r.icon.href?(e=r.icon.href,qt.test(e)||(e=t.c+e),r=o+"_"+a.x+a.y+a.fd+a.Gc+"_"+e,(u=t.b[r]||t.f[r])||(u=new Ij(e),t.f[r]=u),0===u.getState()?(n.icon=t.g,n.ti=u,n.href=e,n.anchor=a,n.scale=o):1===u.getState()&&(n.icon=u)):1!==o&&(u||(a={x:14,y:4,fd:!1,Gc:!1}),o={size:new Ki((t={w:28*o,h:36*o}).w,t.h),anchor:new I(a.fd?t.w*a.x:a.x*o,a.Gc?t.h*(1-a.y):t.h-a.y*o),hitArea:new Li(Mi.POLYGON,[0*o,16*o,0*o,7*o,8*o,0*o,18*o,0*o,26*o,7*o,26*o,16*o,18*o,34*o,8*o,34*o])},n.icon=new Ij('<svg xmlns="http://www.w3.org/2000/svg" width="28px" height="36px"><path d="M 19 31 C 19 32.7 16.3 34 13 34 C 9.7 34 7 32.7 7 31 C 7 29.3 9.7 28 13 28 C 16.3 28 19 29.3 19 31 Z" fill="#000" fill-opacity=".2"/><path d="M 13 0 C 9.5 0 6.3 1.3 3.8 3.8 C 1.4 7.8 0 9.4 0 12.8 C 0 16.3 1.4 19.5 3.8 21.9 L 13 31 L 22.2 21.9 C 24.6 19.5 25.9 16.3 25.9 12.8 C 25.9 9.4 24.6 6.1 22.1 3.8 C 19.7 1.3 16.5 0 13 0 Z" fill="#fff"/><path d="M 13 2.2 C 6 2.2 2.3 7.2 2.1 12.8 C 2.1 16.1 3.1 18.4 5.2 20.5 L 13 28.2 L 20.8 20.5 C 22.9 18.4 23.8 16.2 23.8 12.8 C 23.6 7.07 20 2.2 13 2.2 Z" fill="#18d"/></svg>',o))}break;case"Polyline":n.style={},s&&s.ne&&(o=s.ne,n.style.strokeColor="rgba("+Vs(r,o.Mf.color,!0)+")",0<=o.width&&(n.style.lineWidth=o.width));break;case"Polygon":n.style={},s&&(s.ne&&(o=s.ne,n.style.strokeColor="rgba("+Vs(r,o.Mf.color,!0)+")",0<=o.width&&(n.style.lineWidth=o.width)),s.al&&(o=s.al,n.style.fillColor=o.fill?"rgba("+Vs(r,o.Mf.color,!0)+")":"rgba(0,0,0,0)",o.outline||(n.style.lineWidth=0)))}return n.Hf=s.Hf,n}function pt(t,e,i){for(var n in i=i||{},e)e.hasOwnProperty(n)&&(i[n]="object"==typeof e[n]?pt(t,e[n],i[n]):e[n]);return i}t("H.data.utils.Dom",Rs),Rs.prototype.Wd=function(t){return!!t&&/^\s*(1|true)\s*$/i.test(this.Oa(t))},Rs.prototype.getBoolean=Rs.prototype.Wd,Rs.prototype.Oa=function(t){var e;try{if(t.nodeType===Node.ATTRIBUTE_NODE)return t.value;var i="",n=0,r=t.childNodes;for(e=r.length;n<e;n++)r[n].nodeType!==Node.COMMENT_NODE&&(i+=r[n].nodeValue.replace(/^\s+|\s+$/g,""))}catch(t){}return i||""},Rs.prototype.getString=Rs.prototype.Oa,Rs.prototype.ag=function(t){return parseFloat(this.Oa(t))||0},Rs.prototype.getFloat=Rs.prototype.ag,Rs.prototype.Yk=function(t){var e,i=t.split(/\s+/),n=i.length,r=!(i&&1==n),o=r?1:3,a=[];for(r||(n=(i=t.split(",")).length),e=0;e<n;e+=o){if(!(t=this.si(r?i[e]:e+3>i.length?null:i.slice(e,e+3))))return[];a.push(t)}return a},Rs.prototype.parseCoords=Rs.prototype.Yk,Rs.prototype.si=function(t){if(!t)return null;var e=t instanceof Array&&0<t.length&&4>t.length?t:t.split(",");t=parseFloat(e[0]);var i=parseFloat(e[1]);return e=parseFloat(e[2]),isNaN(i)||isNaN(t)?null:new Wf(i,t,isNaN(e)?void 0:e)},Rs.prototype.parseCoord=Rs.prototype.si,Rs.prototype.Zf=function(t){return t=this.Oa(t),/^[0-9a-fA-F]{8}$/.test(t)?"#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2):"#000000ff"},Rs.prototype.getColor=Rs.prototype.Zf,t("H.data.utils.ColorHelper",Ss),Ss.prototype.Ol=function(t,e){var i="";if(!/^(#|rgb).*/.test(t)){var n;for(i="",n=0;6>n;n++)i+="ABCDEF0123456789".charAt(Math.floor(16*Math.random()));return i+"ff"}for(t=Vs(this,t,e),e=0;4>e;e++)i+=Us(n=3>e?Math.floor(Math.random()*(t[e]+1)):255*t[e]);return i},Ss.prototype.toRandomRGBA=Ss.prototype.Ol,t("H.data.kml.HotSpot",Ws),t("H.data.kml.Icon",Xs),t("H.data.kml.IconStyle",Ys),t("H.data.kml.ColorStyle",Zs),t("H.data.kml.PolyStyle",$s),t("H.data.kml.LineStyle",at),t("H.data.kml.BalloonStyle",bt),t("H.data.kml.Style",ct),t("H.data.kml.Pair",dt),dt.prototype.ua=function(){if(this.a){var t="highlight"===this.key;t=this.b.Gh(this.a.substr(1),t)}return t},dt.prototype.getStyle=dt.prototype.ua,t("H.data.kml.StyleMap",et),et.prototype.ua=function(t){var e=null;t=t?"highlight":"normal";for(var i=this.a.length;i--;)this.a[i].key===t&&(e=this.a[i].ua());return e},et.prototype.getStyle=et.prototype.ua,t("H.data.kml.StyleContainer",ft),ft.prototype.Yg=function(t){t&&t.id&&(this.a["style_"+t.id]=t)},ft.prototype.addStyle=ft.prototype.Yg,ft.prototype.Gh=function(t,e){return(t=this.a["style_"+t])instanceof et&&(t=t.ua(e)),t},ft.prototype.getStyleById=ft.prototype.Gh,t("H.data.kml.Feature",gt),t("H.data.kml.Point",ht),t("H.data.kml.Line",it),kt.prototype.f=0,kt.prototype.b=0,u(lt,kt),t("H.data.kml.Polygon",lt),mt.prototype.create=function(t){return this.a=new gt(t,this.i),nt(this,t,null)},mt.prototype.j=function(t,e,i){var n=i.anchor,r=i.scale;i=r+"_"+n.x+n.y+n.fd+n.Gc+"_"+i.href;var o={};if(1===t.getState()){var a=this.b[i];if(!a){var s=n.x,u=n.y;(a=t.Db())&&(a={w:a.w*r,h:a.h*r},o.size=a),s=n.fd&&a?a.w*s:s*r,u=n.Gc&&a?a.h*(1-u):!n.Gc&&a?a.h-u*r:u*r,o.anchor={x:s,y:u},a=new Ij(t.ad(),o),this.b[i]=a}e.Pc(a)}delete this.f[i]};var qt=/^[^:\/]+:/;function rt(t){uc(this,rt),this.url=t,this.b=[],this.a=y,this.c=A(this.c,this),F.call(this)}u(rt,F),t("H.data.AbstractReader",rt);var st={ERROR:-1,LOADING:0,VISIT:1,READY:2};function tt(t,e,i,n){tt.l.constructor.call(this,e,t),this.state=i,this.message=n}function ut(t){var e=t?t.lastIndexOf("/"):B;this.g=[],rt.call(this,t),0<=e&&(this.i=t.substr(0,e)+"/")}function wt(t,e,i){i?i.ea(e):(t.a&&t.a.kc().ea(e),t.b.push(e),t.P(st.VISIT,e))}function vt(t,e){for(var i,n=t.length,r=[];n--;)(i=t[n]).nodeName===e&&r.push(i);return r}function xt(t,e){this.b=t,this.a=e}function yt(t){return new Wf(t[1],t[0])}function At(t){for(var e,i=zt(t[0]),n=[],r=1,o=t.length;r<o;r++)e=zt(t[r]),n.push(e);return new O(i,n)}function zt(t){for(var e=0,i=t.length,n=new L;e<i;e++)n.Fd(yt(t[e]));return n}function Bt(t,e){e=e||{},this.i=e.style||this.Sd,(this.g=!!e.disableLegacyMode)||window.console.warn("H.data.geojson.Reader: Legacy parser is enabled in GeoJSON Reader. Features like Multi-Geometries, Polygon interiors and GeoJSON feature properties might not work as expected. To maximise compatibility with the remote services it is recommended to set the `disableLegacyMode` flag to true."),rt.call(this,t)}function Dt(t){var e={};if(t.geometry){var i=t.geometry;e.type=i.type,e.properties=t.properties,i.coordinates&&(e.coordinates=i.coordinates),i.geometries&&(e.geometries=i.geometries),t.id&&(e.id=t.id)}return e}function Ct(t,e){t.a&&t.a.kc().ea(e),t.b.push(e),t.P(st.VISIT,e)}function Et(t,e,i){this.f=this.c=i,this.ui=[],this.a=0,this.R=dg(t,e,!0)}function Gt(t){var e;nd.call(this),this.a=[],t?Wa(e={},Ht,t):e=Ht,this.g=e,nd.call(this)}rt.State=st,rt.prototype.f=st.READY,rt.prototype.j={am:"statechange"},rt.prototype.tb=function(){return this.a||(this.a=new N,this.a.kc().fc(this.b)),new ml(this.a)},rt.prototype.getLayer=rt.prototype.tb,rt.prototype.tn=function(){return this.b.concat([])},rt.prototype.getParsedObjects=rt.prototype.tn,rt.prototype.D=function(){return this.url},rt.prototype.getUrl=rt.prototype.D,rt.prototype.ep=function(t){if(this.f===st.LOADING||this.f===st.VISIT)throw Error("InvalidState: state "+this.f);return this.b=[],this.a=y,this.url=t,this},rt.prototype.setUrl=rt.prototype.ep,rt.prototype.getState=function(){return this.f},rt.prototype.getState=rt.prototype.getState,rt.prototype.P=function(t,e,i){this.f=t,this.dispatchEvent(new tt(e||this,this.j.am,t,i||""))},rt.prototype.parse=function(){var t=this;tc(this.url)?(this.P(st.LOADING),new rf("text/plain",this.url).then((function(e){try{t.c(e)}catch(e){t.P(st.ERROR,y,e.message)}}),(function(){t.P(st.ERROR,y,"Error loading file")}))):t.P(st.ERROR,y,"File url was not set")},rt.prototype.parse=rt.prototype.parse,u(tt,rd),u(ut,rt),t("H.data.kml.Reader",ut),ut.prototype.c=function(t){var e,i=null;if(t&&""!=t.trim()){try{var n=(new DOMParser).parseFromString(t,"text/xml")}catch(t){return void this.P(st.ERROR,void 0,"Error parsing KML document")}if(n.getElementsByTagName("parsererror").length)this.P(st.ERROR,void 0,"Error parsing KML document");else if((t=n.childNodes&&"kml"===n.childNodes[0].nodeName?n.childNodes[0]:void 0)&&(e=vt(t.childNodes,"Document")[0]),e=e||t){n=new ft;for(var r=vt(e.childNodes,"Style"),o=vt(e.childNodes,"StyleMap"),a=r.length;a--;)t=new ct(r[a]),n.Yg(t);for(a=o.length;a--;)t=new et(o[a],n),n.Yg(t);for(this.o=n,this.m=new mt(this.o,this.i),e=(t=e.childNodes).length;e--;)n=i,"Placemark"===(r=t[e]).nodeName?(r=this.m.create(r))&&wt(this,r,n):"Folder"===r.nodeName&&(wt(this,(r={group:new Q,node:r}).group,n),this.g.push(r)),!e&&(n=this.g.shift())&&(t=n.node.childNodes,i=n.group,e=t.length);this.P(st.READY)}else this.P(st.ERROR,void 0,"Invalid KML document")}else this.P(st.ERROR,void 0,"Unable to create objects from the empty data")},xt.prototype.create=function(t,e){var i=t.coordinates;switch(t.type){case"Point":var n=new yn(yt(i));break;case"LineString":n=new nh(zt(i));break;case"Polygon":n=new xi(At(i));break;case"MultiPoint":var r=0,o=i.length;if(n=[],this.a){for(;r<o;r++)n.push(yt(i[r]));i=new yn(new Ji(n))}else{for(;r<o;r++)n.push(new yn(yt(i[r])));(i=new Q).fc(n)}n=i,o="multiPoint";break;case"MultiLineString":if(r=0,o=i.length,n=[],this.a){for(;r<o;r++)n.push(zt(i[r]));i=new nh(new mh(n))}else{for(;r<o;r++)n.push(new nh(zt(i[r])));(i=new Q).fc(n)}n=i,o="multiLineString";break;case"MultiPolygon":if(n=[],r=0,o=i.length,this.a){for(;r<o;r++)n.push(At(i[r]));i=new xi(new ui(n))}else{for(;r<o;r++)n.push(new xi(At(i[r])));(i=new Q).fc(n)}n=i,o="multiPolygon";break;case"GeometryCollection":i=n=new Q,o=0;for(var a=(r=t.geometries).length;o<a;o++)this.create(r[o],i);o="geometryCollection"}return n&&(i=n,r=t.properties,t=t.id,a={},r&&(this.a?a=r:a.properties=r),o&&!this.a&&(a[o]=!0),t&&i.Qi(t),i.setData(a),this.b(n)),e&&n&&e.ea(n),n},xt.prototype.create=xt.prototype.create,u(Bt,rt),t("H.data.geojson.Reader",Bt),Bt.prototype.c=function(t){var e,i;try{var n="string"==typeof t?JSON.parse(t):t;if("object"==typeof n){var r=new xt(this.i,this.g);switch(n.type){case"FeatureCollection":if(e=n.features){var o=new Q;for(Ct(this,o),i=0;i<e.length;i++){var a=Dt(e[i]);(a=r.create(a))&&o.ea(a)}}break;case"Feature":a=Dt(n),(a=r.create(a))&&Ct(this,a);break;default:(a=r.create(n))&&Ct(this,a)}this.P(st.READY)}else this.P(st.ERROR,void 0,"Invalid syntax")}catch(t){this.P(st.ERROR,void 0,"Parse error. "+t.message)}},Bt.prototype.Po=function(t){this.P(st.LOADING),this.c(t)},Bt.prototype.parseData=Bt.prototype.Po,Bt.prototype.Sd=function(){},t("H.data.buildInfo",(function(){return Ef("H-data","1.30.3","abfe236")})),hg.prototype.Uc=ca(1,(function(t,e){this.a.Uc(t,Cc(e)?e:this.c)})),lg.prototype.Uc=ca(0,(function(t,e){var i,n=0;if(!t(this)&&e--)for(;3>=n;n++)(i=this[n])&&i.Uc(t,e)})),t("H.clustering.grid.Cluster",Et),Et.prototype.Ge=function(t){this.b||(this.b=Zf(t)),this.a+=t.wt||1,this.ui.push(t)},Et.prototype.Ca=function(){return this.b},Et.prototype.getPosition=Et.prototype.Ca,Et.prototype.Ec=function(){return this.a},Et.prototype.getWeight=Et.prototype.Ec,Et.prototype.Bd=df,Et.prototype.isCluster=Et.prototype.Bd,Et.prototype.Ac=function(){return this.c},Et.prototype.getMinZoom=Et.prototype.Ac,Et.prototype.cg=function(){return this.f},Et.prototype.getMaxZoom=Et.prototype.cg,Et.prototype.G=function(){return this.R},Et.prototype.getBoundingBox=Et.prototype.G,Et.prototype.qh=function(t){this.Se(t)},Et.prototype.forEachEntry=Et.prototype.qh,Et.prototype.Se=function(t){var e=this;if(!Ca(t))throw new D(this.Se,0,t);this.ui.forEach((function(i){t(new Ft(i,e.c+1))}))},Et.prototype.forEachDataPoint=Et.prototype.Se,u(Gt,nd);var It={clusters:[],noisePoints:[]},Ht={projection:Xi,min:0,max:22,eps:32,minWeight:2};function Ft(t,e){this.a=t,this.b=e}function Jt(t){Gt.call(this,t)}function Kt(t){this.a=t;var e=(t=document.createElement("canvas")).getContext("2d"),i=this.a,n=14*i;t.width=n,t.height=n,e.scale(i,i),e.beginPath(),e.strokeStyle="#FFFFFF",e.fillStyle="#1080DD",e.arc(7,7,6,0,2*Math.PI,!1),e.fill(),e.lineWidth=1,e.stroke(),this.f=new Ij(t,{size:{w:14,h:14},anchor:{x:7,y:7}}),this.b={},this.c={}}function Lt(t,e,i){var n,r=document.createElement("canvas"),o=r.getContext("2d"),a=t.a,s=e*a;return r.width=s,r.height=s,o.scale(a,a),a=e+":"+i,(n=t.b[a])?o.putImageData(n,0,0):(e/=2,o.beginPath(),o.strokeStyle="rgba("+i+",0.2)",o.fillStyle="rgba("+i+",1)",o.arc(e,e,e/5*3,0,2*Math.PI,!1),o.fill(),o.lineWidth=e/5*4,o.stroke(),t.b[a]=o.getImageData(0,0,s,s)),r}function Mt(t){if(Gt.call(this,t),(t=this.g).projection!==Xi)throw new D(Mt,0,"Other projection than mercator not supported yet");this.m=t.projection,this.f=t.eps,this.v=t.minWeight,this.o=new Yi(this.m),(new Mf).a("cluster","H.clustering.dynamicgrid.worker"),this.i=A(this.i,this),this.j=A(this.j,this)}n=Gt.prototype,n.Oc=function(t){this.a=t,this.b=!0},n.Ib=function(t){this.a.push(t),this.b=!0},n.Gf=function(t){this.a=this.a.concat(t),this.b=!0},n.qf=function(t){this.a=this.a.filter((function(e){return e!==t})),this.b=!0},n.u=function(){Gt.l.u.call(this),this.a=null},n.sl=hd,t("H.clustering.grid.NoisePoint",Ft),Ft.prototype.Ca=function(){return Zf(this.a)},Ft.prototype.getPosition=Ft.prototype.Ca,Ft.prototype.Ec=function(){return this.a.wt},Ft.prototype.getWeight=Ft.prototype.Ec,Ft.prototype.Bd=ef,Ft.prototype.isCluster=Ft.prototype.Bd,Ft.prototype.Ac=function(){return this.b},Ft.prototype.getMinZoom=Ft.prototype.Ac,Ft.prototype.getData=function(){return this.a.data},Ft.prototype.getData=Ft.prototype.getData,u(Jt,Gt),Jt.prototype.Ui=function(t){var e,i=this.g,n=i.min,r=i.max,o=[],a=[];if(this.b){for(e=this.a;n<=r;n++){for(var s,u,l,h,c,f,p,d,g=void 0,y=n,v=e,m=o,b=a,_=i.eps,w=i.projection,x=i.minWeight,M=v.length,E=Math.pow(2,y+8),A=[];d=v[--M];)if(!d.cj){for(p=E,f=(l=w.$c(d).scale(E).floor()).x,c=l.y,u=A.length;u--;)h=(s=A[u]).Ca(),s.bj||(s.bj=w.$c(h).scale(E).floor()),(h=(h=s.bj).Za(l))<p&&(p=h,g=s);g&&g.G().pd(d)||(g=new Et(w.vg({x:(f-_)/E,y:(c-_)/E}),w.vg({x:(f+_)/E,y:(c+_)/E}),y),A.push(g)),g.Ge(d),g=null}for(M=A.length;M--;)if((u=(s=A[M]).Ec())<x)for(u=(s=s.ui).length;d=s[--u];)b.push(new Ft(d,y)),d.cj=!0;else m.push(s)}for(n=0,r=e.length;n<r;n++)delete e[n].cj;this.b=!1,t({clusters:o,noisePoints:a})}},t("H.clustering.theme.Circular",Kt),Kt.prototype.Im=function(t){var e=t.Ec(),i=this.c[e];if(!i){if(10>e){i=Lt(this,28,"118,209,0");var n={x:11,y:18}}else 25>e?(i=Lt(this,38,"255,105,0"),n={x:13,y:23}):50>e?(i=Lt(this,38,"240,60,0"),n={x:13,y:23}):100>e?(i=Lt(this,38,"181,0,21"),n={x:13,y:23}):1e3>e?(i=Lt(this,48,"181,0,21"),n={x:15,y:28}):(i=Lt(this,66,"181,0,21"),n={x:20,y:38});var r=i.getContext("2d");r.fillStyle="#FFFFFF",r.font="bold 11px Arial",r.fillText(e,n.x,n.y),i=new Ij(i,{size:{w:n=i.width/this.a,h:n},anchor:{x:n/2,y:n/2}}),this.c[e]=i}return(e=new yn(t.Ca(),{icon:i,min:t.Ac(),max:t.cg()})).setData(t),e},Kt.prototype.getClusterPresentation=Kt.prototype.Im,Kt.prototype.qn=function(t){var e=new yn(t.Ca(),{icon:this.f,min:t.Ac()});return e.setData(t),e},Kt.prototype.getNoisePresentation=Kt.prototype.qn,u(Mt,Gt),Mt.prototype.sl=function(t,e){this.aa=t,this.s=yd(e)},Mt.prototype.Ui=function(t,e){var i=this.c,n=this.aa,r=this.s||0,o=!i||!(i.zoom===r&&i.b.oa(n));if(n&&(this.b||o)){if(i&&3>i.pe&&i.cancel(),this.b=!1,(i=this.f)>=128*Dd(2,r))var a=Nt;else{(o=this.o).Qa(r);var s=o.lb(n.Rb());a=o.lb(n.Nb()),s.y-=i,a.y+=i,s=o.lf(s);var u=o.lf(a);a=new K(s.lat,s.lng,u.lat,u.lng),i=o.Sa(i,0).lng+180,a=a.Ic(s.lat,s.lng-i,u.lat,s.lng).Ic(s.lat,u.lng,u.lat,u.lng+i)}for(i=a,a=[],o=(s=this.a).length;o--;)i.pd(s[o])&&a.push(s[o]);0<a.length?(this.c=new Ot(n,r,a,this.f,this.v,this.m!==Xi,t,e),this.c.then(this.i,this.j)):t(It)}},Mt.prototype.i=function(t){Ba(t)||(t=new x.Uint32Array(t)),this.c.g(Pt(this,t))},Mt.prototype.j=function(t){zc(t)&&this.c.c(t)};var Nt=new K(90,-180,-90,180);function Pt(t,e){for(var i=0,n=e[i++],r=Array(n),o=0,a=[],s=e.length,u=t.c.a,l=t.c.zoom;n--;)r[o++]=new Ft(u[e[i++]],l);for(;i<s;){n=e[i++],o=u[e[i]];var h=t.o,c=t.f;h.Qa(t.c.zoom);var f=h.lb(o);for(o=h.Sa(f.x-c,f.y-c),h=h.Sa(f.x+c,f.y+c),o=new Et((o=new K(o.lat,o.lng,h.lat,h.lng)).Rb(),o.Nb(),l);n--;)o.Ge(u[e[i++]]);a.push(o)}return{clusters:a,noisePoints:r}}function Ot(t,e,i,n,r,o,a,s){this.b=t,this.zoom=e,this.a=i,this.g=a,this.c=s,a=3*(t=i.length),s=new(x.Float64Array||Array)(a);for(var u;t--;)u=i[t],s[--a]=u.lat,s[--a]=u.lng,s[--a]=u.wt;ee.call(this,"cluster",{message:[s,n,r,e,o]},void 0)}function Qt(t,e,i){this.c=t,this.a=e,this.f=i}function Rt(t,e,i,n){this.c=t,this.a=e,this.j=i,this.o=n,this.g=Ia(this.g,this),this.f=Ia(this.f,this)}function St(t,e,i,n,r,o){this.g=e,t&&(this.parent=t,1&e?(i=t[8],r=t[5]):(i=t[7],r=t[8]),2&e?(n=t[9],o=t[6]):(n=t[4],o=t[9])),this[7]=i,this[5]=r,this[8]=(i+r)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Tt(t,e){return t[e]||(++t.oe,t[e]=new St(t,e))}function Ut(t,e,i,n){var r,o;if(!e(t,n)&&i--)for(++n,r=0;4>r;r++)(o=t[r])&&Ut(o,e,i,n)}function Vt(t){this.b=t||10,this.a=null,Wt(this)}function Wt(t){t.head=t.a=new St(null,NaN,0,0,4294967296,4294967296)}function Xt(t,e){var i,n;for(i=0;4>i;i++)(n=e[i])&&(Xt(t,n),delete e[i]);delete e.parent,delete e.entries}function Yt(t,e){var i,n=t.head;if(e){var r=e;if(r!==n)for(n=r;r=r.parent;)(r.entries||1<r.oe)&&(n=r)}else for(;!n.entries&&2>(i=n.oe)&&i;)n=r;t.head=n}function Zt(t,e,i,n,r,o,a){var s=e.entries;if(o)if(e.oe)s=Zt(t,Tt(e,i>=e[8]|(n>=e[9])<<1),i,n,r,o-1,a);else if(s){var u=Tt(e,(s=s[0])[1]>=e[8]|(s[0]>=e[9])<<1);u.entries=e.entries,u.Je=e.Je,u.Ke=e.Ke,u.Kb=e.Kb,u.a=e.a,u.f=e.f,u.b=e.b,u.c=e.c,delete e.entries,s.node=u,Yt(t,u),s=Zt(t,Tt(e,i>=e[8]|(n>=e[9])<<1),i,n,r,o-1,a)}else o=s=new $t(i,n,r,a),(e.entries||(e.entries=[])).push(o),Yt(t,e);else s||Yt(t,e),t=s=new $t(i,n,r,a),(e.entries||(e.entries=[])).push(t);return e.Je+=i*r,e.Ke+=n*r,e.Kb+=r,e.a===B?(e.a=e.b=i,e.f=e.c=n):(i<e.a?e.a=i:i>e.b&&(e.b=i),n<e.f?e.f=n:n>e.c&&(e.c=n)),s}function $t(t,e,i,n){this[0]=e,this[1]=t,this.a=i,this.data=n}function au(t){Gt.call(this,t),t=this.g,this.j=t.projection,this.o=t.min,this.f=t.max,this.m=t.minWeight,this.c=7-xd(Bd(wd(1,t.eps))/Ld),this.i=new Vt(wd(this.o,this.f+this.c))}function bu(t,e,i,n,r,o,a){var s,u=e.Kb;if(a&&(a.node.Kb!==u?(o.clusters.push(new Rt(t,a.node,a.depth,i-1)),a=null):r++),a||(u>=t.m?(a={node:e,depth:i},r=i):cu(t,e,r+1,o)),e.oe&&n--)for(i++,u=0;4>u;u++)(s=e[u])&&(bu(t,s,i,n,r,o,a),a=null);a&&o.clusters.push(new Rt(t,a.node,a.depth,t.f+t.c))}function cu(t,e,i,n){var r;if(e=e.entries){var o=e.length;for(n=n.noisePoints,r=0;r<o;r++)n.push(new Qt(t,e[r],i))}else for(r=0;4>r;r++)(o=t[r])&&cu(t,o,i,n)}function du(t,e,i,n){this.lat=t,this.lng=e,this.wt=i===+i?i:1,this.data=n}function eu(t,e){var i={},n=(e=e||{}).min||0;switch(n={min:n,max:wd(n,e.max||22)},eu.l.constructor.call(this,n),this.kb=e.pixelRatio||Se(),Wa(i,Ht,n,e.clusteringOptions||{}),i.minWeight=wd(Ht.minWeight,i.minWeight),i.strategy){case fu.DYNAMICGRID:if(i.projection!==Xi)throw new D(eu,1,"Unsupported projection");this.a=new Mt(i);break;case fu.GRID:this.a=new Jt(i);break;default:this.a=new au(i)}this.a.Oc(t),this.C=e.theme||new Kt(this.kb),this.ma=A(this.ma,this),this.Xa=A(this.Xa,this),gu(this)}Mt.prototype.u=function(){Mt.l.u.call(this)},u(Ot,Pf),t("H.clustering.fastgrid.NoisePoint",Qt),Qt.prototype.Ca=function(){return this.b||(this.b=this.c.Sa(this.a[1],this.a[0],1)),this.b},Qt.prototype.getPosition=Qt.prototype.Ca,Qt.prototype.Ec=function(){return this.a.a},Qt.prototype.getWeight=Qt.prototype.Ec,Qt.prototype.Bd=ef,Qt.prototype.isCluster=Qt.prototype.Bd,Qt.prototype.Ac=function(){return this.f-this.c.c},Qt.prototype.getMinZoom=Qt.prototype.Ac,Qt.prototype.getData=function(){return this.a.data},Qt.prototype.getData=Qt.prototype.getData,t("H.clustering.fastgrid.Cluster",Rt),Rt.prototype.Ca=function(){return this.b||(this.b=this.c.Sa(this.a.Je,this.a.Ke,this.a.Kb)),this.b},Rt.prototype.getPosition=Rt.prototype.Ca,Rt.prototype.Ec=function(){return this.a.Kb},Rt.prototype.getWeight=Rt.prototype.Ec,Rt.prototype.Bd=df,Rt.prototype.isCluster=Rt.prototype.Bd,Rt.prototype.Ac=function(){return this.j?this.j-this.c.c:-1/0},Rt.prototype.getMinZoom=Rt.prototype.Ac,Rt.prototype.cg=function(){return this.o-this.c.c},Rt.prototype.getMaxZoom=Rt.prototype.cg,Rt.prototype.G=function(){return this.R||(this.R=dg(this.c.Sa(this.a.a,this.a.f,1),this.c.Sa(this.a.b,this.a.c,1),!0)),this.R},Rt.prototype.getBoundingBox=Rt.prototype.G,Rt.prototype.qh=function(t){this.i=t,this.a.Uc(this.g,Td)},Rt.prototype.forEachEntry=Rt.prototype.qh,Rt.prototype.g=function(t,e){var i,n,r=!1;if(t.Kb>=this.c.m&&t!==this.a&&t.Kb!==this.a.Kb&&(this.i(new Rt(this.c,t,0,e)),r=!0),!r&&(i=t.entries))for(t=i.length,n=0;n<t;n++)this.i(new Qt(this.c,i[n],e));return r},Rt.prototype.Se=function(t){this.m=t,this.a.Uc(this.f,Td)},Rt.prototype.forEachDataPoint=Rt.prototype.Se,Rt.prototype.f=function(t,e){var i;if(t=t.entries){var n=t.length;for(i=0;i<n;i++)this.m(new Qt(this.c,t[i],e))}return!1},n=St.prototype,n.oe=0,n.removeChild=function(t){var e=t.g;this[e]===t&&(delete this[e],delete t.parent,--this.oe)},n.Uc=function(t,e){for(var i=0,n=this;n=n.parent;)++i;Ut(this,t,e,i)},n.Je=0,n.Ke=0,n.Kb=0,Vt.prototype.Fc=function(t,e,i,n){var r=this.a;if(!(t>=r[7]&&e>=r[4]&&t<=r[5]&&e<=r[6]))throw Error("Coordinates out of bounds");return Zt(this,this.a,t,e,i,this.b,n)},Vt.prototype.Uc=function(t,e){Ut(this.a,t,e===+e?e:this.b,0)},u(au,Gt),n=au.prototype,n.Oc=function(t){var e,i=0,n=t.length,r=new I(0,0),o=this.j,a=this.i;for(au.l.Oc.call(this,t),Xt(a,a.a),Wt(a);i<n;i++)o.$c(e=t[i],r).scale(4294967296).floor(),a.Fc(r.x,r.y,e.wt,e.data);this.b=!0},n.Ib=function(t){au.l.Ib.call(this,t),this.Oc(this.a)},n.Gf=function(t){for(var e=t.length,i=au.l.Ib;e--;)i.call(this,t[e]);this.Oc(this.a)},n.qf=function(t){au.l.qf.call(this,t),this.Oc(this.a)},n.Sa=function(t,e,i,n){return this.j.Sa(t/i/4294967296,e/i/4294967296,n)},n.Ui=function(t){if(this.b){var e={clusters:[],noisePoints:[]};bu(this,this.i.a,0,this.f+this.c,-1/0,e,null),this.b=!1,t(e)}},n.u=function(){au.l.u.call(this),this.i=null},t("H.clustering.DataPoint",du),du.prototype.vk=NaN,du.prototype.xk=NaN,u(eu,N),t("H.clustering.Provider",eu),eu.prototype.u=function(){eu.l.u.call(this),this.c.qa(),this.a.B(),this.C=this.N=this.a=null,x.clearTimeout(this.W)};var fu={FASTGRID:0,GRID:1,DYNAMICGRID:2};function gu(t,e,i){t.W&&x.clearTimeout(t.W),e&&t.a.sl(e,i),t.W=x.setTimeout(t.ma,150)}function hu(t){var e=t.N.clusters,i=t.N.noisePoints,n=e.length,r=i.length,o=0<n+r;for(t.c.qa();r--;){var a=i[r];t.c.ea(t.C.getNoisePresentation(a))}for(;n--;)i=e[n],t.c.ea(t.C.getClusterPresentation(i));o&&Wj(t)}function iu(t,e){t:{for(var i=t.length,n="string"==typeof t?t.split(""):t,r=0;r<i;r++)if(r in n&&e.call(void 0,n[r],r,t)){e=r;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}eu.Strategy=fu,eu.prototype.ma=function(){this.dispatchEvent("start"),this.a.Ui(this.Xa,hd)},eu.prototype.Xa=function(t){this.dispatchEvent("end"),this.N=t,hu(this)},eu.prototype.Oc=function(t){this.a.Oc(t),gu(this)},eu.prototype.setDataPoints=eu.prototype.Oc,eu.prototype.Ib=function(t){this.a.Ib(t),gu(this)},eu.prototype.addDataPoint=eu.prototype.Ib,eu.prototype.Gf=function(t){this.a.Gf(t),gu(this)},eu.prototype.addDataPoints=eu.prototype.Gf,eu.prototype.qf=function(t){this.a.qf(t),gu(this)},eu.prototype.removeDataPoint=eu.prototype.qf,eu.prototype.Ln=function(){return this.C},eu.prototype.getTheme=eu.prototype.Ln,eu.prototype.bp=function(t){this.C=t,this.N&&(this.c.qa(),hu(this))},eu.prototype.setTheme=eu.prototype.bp,eu.prototype.Vb=function(){return!0},eu.prototype.providesDomMarkers=eu.prototype.Vb,eu.prototype.Wb=function(){return!0},eu.prototype.providesMarkers=eu.prototype.Wb,eu.prototype.Jc=function(){return!0},eu.prototype.providesSpatials=eu.prototype.Jc,eu.prototype.nf=function(t,e){gu(this,t,e)},eu.prototype.preprocessData=eu.prototype.nf,t("H.clustering.buildInfo",(function(){return Ef("H-clustering","1.30.3","5f44999")}));var ju={};function ku(t){var e=t.ownerDocument,i=e.documentElement;e=e.defaultView;var n=t.getBoundingClientRect();return t=n.left,n=n.top,isNaN(e.pageXOffset)?(t+=i.scrollLeft,n+=i.scrollTop):(t+=e.pageXOffset,n+=e.pageYOffset),new I(t,n)}function lu(t,e,i){e=Cc(e)?e+"px":e,i=Cc(i)?i+"px":i,t.style[xf("transform")]="translate("+e+","+i+")"}var mu={TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_MIDDLE:"left-middle",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_MIDDLE:"right-middle",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"};function nu(t,e){var i={},n={};i["top-left"]=ou(e,"div",[pu,qu].join(" ")),i["top-center"]=ou(e,"div",[pu,ru,su,qu].join(" ")),i["top-right"]=ou(e,"div",[pu,qu].join(" ")),i["left-top"]=ou(e,"div",[pu,tu].join(" ")),i["left-middle"]=ou(e,"div",[pu,uu,vu,tu].join(" ")),i["left-bottom"]=ou(e,"div",[pu,tu].join(" ")),i["right-top"]=ou(e,"div",[pu,tu].join(" ")),i["right-middle"]=ou(e,"div",[pu,wu,vu,tu].join(" ")),i["right-bottom"]=ou(e,"div",[pu,tu].join(" ")),i["bottom-left"]=ou(e,"div",[pu,qu].join(" ")),i["bottom-center"]=ou(e,"div",[pu,xu,su,qu].join(" ")),i["bottom-right"]=ou(e,"div",[pu,qu].join(" ")),n["top-left"]=ou(e,"div",[ru,uu].join(" ")),n["top-right"]=ou(e,"div",[ru,wu].join(" ")),n["bottom-left"]=ou(e,"div",[xu,uu].join(" ")),n["bottom-right"]=ou(e,"div",[xu,wu].join(" ")),yu(n["top-left"],i["top-left"],i["left-top"]),yu(n["top-right"],i["top-right"],i["right-top"]),yu(n["bottom-left"],i["left-bottom"],i["bottom-left"]),yu(n["bottom-right"],i["right-bottom"],i["bottom-right"]),yu(t,n["top-left"],n["top-right"],n["bottom-left"],n["bottom-right"],i["top-center"],i["left-middle"],i["right-middle"],i["bottom-center"]),this.a=i}t("H.ui.LayoutAlignment",mu);var ru="H_l_top",xu="H_l_bottom",uu="H_l_left",wu="H_l_right",su="H_l_center",vu="H_l_middle",qu="H_l_horizontal",tu="H_l_vertical",pu="H_l_anchor";function zu(t,e){e?(e=t.offsetWidth,t.style.marginLeft=-Math.round(.5*e)+"px"):(e=t.offsetHeight,t.style.marginTop=-Math.round(.5*e)+"px")}nu.prototype.update=function(){var t=this.a;zu(t["top-center"],!0),zu(t["bottom-center"],!0),zu(t["left-middle"],!1),zu(t["right-middle"],!1)},nu.prototype.put=function(t,e){t=t?t.L():null;var i=e?this.a[e]:null;t&&i&&(t.parentElement&&t.parentElement.removeChild(t),i.insertBefore(t,/(bottom|right)$/.test(e)||/(center|middle)/.test(e)&&i.childNodes.length%2?i.firstChild:null)),this.update()};var Au={IMPERIAL:"imperial",METRIC:"metric"};function Bu(){this.a=this.Gj()}t("H.ui.UnitSystem",Au),Bu.prototype.Gj=function(){var t=Function("return this;")(),e=t.navigator,i=[];return e&&(e.msPointerEnabled?i.push(Cu):e.pointerEnabled&&i.push(Du)),1>i.length&&("TouchEvent"in t&&i.push(Eu),i.push(Fu)),i},Bu.prototype.detectEventSets=Bu.prototype.Gj,Bu.prototype.addEventListener=function(t,e,i,n){for(var r,o=this.a,a=o.length,s=!1;a--;)(r=o[a][e])&&(s=!0,t.addEventListener(r,i,n||!1));s||t.addEventListener(e,i,n||!1)},Bu.prototype.removeEventListener=function(t,e,i,n){for(var r,o=this.a,a=o.length,s=!1;a--;)(r=o[a][e])&&(s=!0,t.removeEventListener(r,i,n||!1));s||t.removeEventListener(e,i,n||!1)};var Du={start:"pointerdown",end:"pointerup",move:"pointermove",cancel:"pointercancel",over:"pointerover",out:"pointerout",hover:"pointerhover"},Cu={start:"MSPointerDown",end:"MSPointerUp",move:"MSPointerMove",cancel:"MSPointerCancel",over:"MSPointerOver",out:"MSPointerOut",hover:"MSPointerHover"},Eu={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Fu={start:"mousedown",end:"mouseup",move:"mousemove",over:"mouseover",out:"mouseout",hover:"mousehover"};function ou(t,e,i,n){return t=t.createElement(e),i&&(t.className=i),n&&(t.innerHTML=n),t}function yu(t,e){for(var i=1,n=arguments.length;i<n;i++)t.appendChild(arguments[i])}var Gu=new Bu;function Hu(t,e,i){Gu.addEventListener(t,e,i,void 0)}function Iu(t,e,i){Gu.removeEventListener(t,e,i,void 0)}var Ju=[];t("H.ui.i18n.defaultLocales",Ju);var Ku={},Lu=[];function Mu(t,e){Ku[t]=e,-1===Ju.indexOf(t)&&Ju.push(t),Lu.length?Nu(t,e):Lu=Object.keys(e)}function Nu(t,e){for(var i,n=Lu,r=n.length;r--;)if(!e[i=n[r]])throw Error("'"+i+"' key missing in translation map for "+t)}function Ou(t,e){if(!zc(t))throw new TypeError("string locale code required");if(Da(e))Nu(t,e);else{if(-1===Ju.indexOf(t))throw Error("Default locale '"+t+"' does nto exist.");e=Ku[t]}this.a=e||{},this.b=t}function Z(t,e){F.call(this),this.Ra=t||"div",this.g=e?e.split(" "):[],this.J=!1,this.g.push("H_el")}function Pu(t){(t=t.L())&&t.parentNode&&t.parentNode.removeChild(t)}function Qu(t,e,i){Z.call(this,t,e),this.b=i?i.concat():[]}function Ru(t){C(t,Oe,Ru,1),Z.call(this,"div","H_context_menu_item"),this.b=t,this.f=A(this.f,this),this.a=A(this.a,this),this.b.addEventListener("update",this.a)}function Tu(t){C(t,Array,Tu,1),Qu.call(this,"div","H_context_menu"),this.f=t,this.a=null}function Uu(t,e){e=e||{};var i=this;Z.call(this,"div","H_ib H_ib_top"),this.v=A((function(t){i.mc()||(i.close(),t.preventDefault())}),this),this.update=A(this.update,this),this.i=A(this.i,this),this.setPosition(t),this.xf(e.content),e.onStateChange&&this.addEventListener("statechange",e.onStateChange),this.P(Vu.OPEN)}Mu("nl-NL",{"layers.normal":"Kaartweergave","layers.satellite":"Satelliet","layers.terrain":"Terrein","layer.transit":"Openbaar vervoer","layer.traffic":"Verkeerssituatie","layer.incidents":"Toon verkeersincidenten","layers.choose":"Weergave kiezen",minimap:"Minimap","scale.switchToImperial":"Overgaan naar mijlen","scale.switchToMetric":"Wijzigen naar km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Uitzoomen","zoom.in":"Inzoomen","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Openbaar vervoer","traffic.MISCELLANEOUS":"Diversen","traffic.ACCIDENT":"Ongeval","traffic.OTHER_NEWS":"Meer informatie","traffic.PLANNED_EVENT":"Geplande afzetting","traffic.ROAD_HAZARD":"Gevaar op de weg","traffic.ROAD_CLOSURE":"Rijbaan afgesloten","traffic.WEATHER":"Weer","traffic.CONGESTION":"Verkeersopstopping","traffic.CONSTRUCTION":"Wegwerkzaamheden","traffic.DISABLED_VEHICLE":"Voertuig met pech","traffic.from":"Begintijd:","traffic.until":"Geschatte eindtijd:","distance.measurement":"Measure distance"}),Mu("pt-PT",{"layers.normal":"Vista do mapa","layers.satellite":"Satlite","layers.terrain":"Terreno","layer.transit":"Transportes pblicos","layer.traffic":"Condies de trnsito","layer.incidents":"Mostrar incidentes de trnsito","layers.choose":"Escolher vista",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Diminuir","zoom.in":"Aumentar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transportes pblicos","traffic.MISCELLANEOUS":"Diversos","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notcias","traffic.PLANNED_EVENT":"Evento planeado","traffic.ROAD_HAZARD":"Perigo na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Meteorologia","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construo","traffic.DISABLED_VEHICLE":"Veculo avariado","traffic.from":"Hora de incio:","traffic.until":"Hora de fim prevista:","distance.measurement":"Measure distance"}),Mu("ru-RU",{"layers.normal":" ","layers.satellite":"","layers.terrain":"","layer.transit":" ","layer.traffic":" ","layer.incidents":"  ","layers.choose":" ",minimap:"Minimap","scale.switchToImperial":" ","scale.switchToMetric":" ","scale.km":"","scale.m":"","scale.mi":"","scale.ft":"","zoom.out":"","zoom.in":"","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":" ","traffic.MISCELLANEOUS":" ","traffic.ACCIDENT":"","traffic.OTHER_NEWS":" ","traffic.PLANNED_EVENT":" ","traffic.ROAD_HAZARD":" ","traffic.ROAD_CLOSURE":" ","traffic.WEATHER":"","traffic.CONGESTION":"","traffic.CONSTRUCTION":"","traffic.DISABLED_VEHICLE":" ","traffic.from":" :","traffic.until":"  :","distance.measurement":" "}),Mu("fi-FI",{"layers.normal":"Karttankym","layers.satellite":"Satelliitti","layers.terrain":"Maasto","layer.transit":"Julkinen liikenne","layer.traffic":"Liikenneolosuhteet","layer.incidents":"Nyt liikennetapahtumat","layers.choose":"Valitse nkym",minimap:"Minimap","scale.switchToImperial":"Vaihda maileihin","scale.switchToMetric":"Vaihda kilometreihin","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Loitonna","zoom.in":"Lhenn","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Julkinen liikenne","traffic.MISCELLANEOUS":"Erittelemtn syy","traffic.ACCIDENT":"Onnettomuus","traffic.OTHER_NEWS":"Muu tapahtuma","traffic.PLANNED_EVENT":"Suunniteltu tapahtuma","traffic.ROAD_HAZARD":"Vaara tiell","traffic.ROAD_CLOSURE":"Tie suljettu","traffic.WEATHER":"S","traffic.CONGESTION":"Ruuhka","traffic.CONSTRUCTION":"Rakennusty","traffic.DISABLED_VEHICLE":"Pyshtynyt ajoneuvo","traffic.from":"Alkamisaika:","traffic.until":"Arvioitu pttymisaika:","distance.measurement":"Measure distance"}),Mu("pt-BR",{"layers.normal":"Exibio do mapa","layers.satellite":"Satlite","layers.terrain":"Terreno","layer.transit":"Transporte pblico","layer.traffic":"Condies do trnsito","layer.incidents":"Mostrar incidentes no trnsito","layers.choose":"Escolher exibio",minimap:"Minimap","scale.switchToImperial":"Mudar para milhas","scale.switchToMetric":"Mudar para km","scale.km":"km","scale.m":"m","scale.mi":"milhas","scale.ft":"ps","zoom.out":"Menos zoom","zoom.in":"Mais zoom","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte pblico","traffic.MISCELLANEOUS":"Miscelnea","traffic.ACCIDENT":"Acidente","traffic.OTHER_NEWS":"Outras notcias","traffic.PLANNED_EVENT":"Evento planejado","traffic.ROAD_HAZARD":"Risco na estrada","traffic.ROAD_CLOSURE":"Estrada fechada","traffic.WEATHER":"Clima","traffic.CONGESTION":"Congestionamento","traffic.CONSTRUCTION":"Construo","traffic.DISABLED_VEHICLE":"Veculo incapacitado","traffic.from":"Hora de incio:","traffic.until":"Tempo final estimado:","distance.measurement":"Measure distance"}),Mu("zh-CN",{"layers.normal":"","layers.satellite":"","layers.terrain":"","layer.transit":"","layer.traffic":"","layer.incidents":"","layers.choose":"",minimap:"Minimap","scale.switchToImperial":"","scale.switchToMetric":"","scale.km":"","scale.m":"","scale.mi":"","scale.ft":"","zoom.out":"","zoom.in":"","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"","traffic.MISCELLANEOUS":"","traffic.ACCIDENT":"","traffic.OTHER_NEWS":"","traffic.PLANNED_EVENT":"","traffic.ROAD_HAZARD":"","traffic.ROAD_CLOSURE":"","traffic.WEATHER":"","traffic.CONGESTION":"","traffic.CONSTRUCTION":"","traffic.DISABLED_VEHICLE":"","traffic.from":"","traffic.until":"","distance.measurement":"Measure distance"}),Mu("es-ES",{"layers.normal":"Mapa","layers.satellite":"Satlite","layers.terrain":"Terreno","layer.transit":"Transporte pblico","layer.traffic":"Estado del trfico","layer.incidents":"Mostrar incidentes de trfico","layers.choose":"Elija una vista",minimap:"Minimap","scale.switchToImperial":"Cambiar a millas","scale.switchToMetric":"Cambiar a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Alejar","zoom.in":"Acercar","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transporte pblico","traffic.MISCELLANEOUS":"Varios","traffic.ACCIDENT":"Accidente","traffic.OTHER_NEWS":"Ms noticias","traffic.PLANNED_EVENT":"Acto programado","traffic.ROAD_HAZARD":"Riesgo en carretera","traffic.ROAD_CLOSURE":"Carretera cerrada","traffic.WEATHER":"Tiempo","traffic.CONGESTION":"Atasco","traffic.CONSTRUCTION":"Construccin","traffic.DISABLED_VEHICLE":"Vehculo averiado","traffic.from":"Inicio:","traffic.until":"Finalizacin estimada:","distance.measurement":"Measure distance"}),Mu("fr-FR",{"layers.normal":"Carte","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Transports publics","layer.traffic":"Conditions de circulation","layer.incidents":"Afficher les incidents de circulation","layers.choose":"Choisir la vue",minimap:"Minimap","scale.switchToImperial":"Passer en miles","scale.switchToMetric":"Passer en km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom arrire","zoom.in":"Zoom avant","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transports publics","traffic.MISCELLANEOUS":"Divers","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Autre","traffic.PLANNED_EVENT":"vnement prvu","traffic.ROAD_HAZARD":"Danger routier","traffic.ROAD_CLOSURE":"Chausse ferme","traffic.WEATHER":"Mto","traffic.CONGESTION":"Embouteillage","traffic.CONSTRUCTION":"Travaux","traffic.DISABLED_VEHICLE":"Vhicule en panne","traffic.from":"Date ou heure de dbut:","traffic.until":"Date et heure de fin estimes:","distance.measurement":"Measure distance"}),Mu("pl-PL",{"layers.normal":"Widok mapy","layers.satellite":"Satelita","layers.terrain":"Teren","layer.transit":"Transport publiczny","layer.traffic":"Warunki drogowe","layer.incidents":"Poka zdarzenia drogowe","layers.choose":"Wybierz widok",minimap:"Minimap","scale.switchToImperial":"Zmie na mile","scale.switchToMetric":"Zmie na km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Oddal","zoom.in":"Przybli","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Transport publiczny","traffic.MISCELLANEOUS":"Inne zdarzenie","traffic.ACCIDENT":"Wypadek","traffic.OTHER_NEWS":"Inne wiadomoci","traffic.PLANNED_EVENT":"Zdarzenie planowane","traffic.ROAD_HAZARD":"Niebezpieczestwo na drodze","traffic.ROAD_CLOSURE":"Jezdnia zamknita","traffic.WEATHER":"Pogoda","traffic.CONGESTION":"Korek","traffic.CONSTRUCTION":"Budowa","traffic.DISABLED_VEHICLE":"Uszkodzony pojazd","traffic.from":"Data rozpoczcia:","traffic.until":"Przybliona data zakoczenia:","distance.measurement":"Measure distance"}),Mu("de-DE",{"layers.normal":"Kartenansicht","layers.satellite":"Satellit","layers.terrain":"Gelnde","layer.transit":"ffentliche Verkehrsmittel","layer.traffic":"Verkehrslage","layer.incidents":"Verkehrsstrungen anzeigen","layers.choose":"Ansicht auswhlen",minimap:"Minimap","scale.switchToImperial":"Umrechnung in Meilen","scale.switchToMetric":"Umrechnung in Kilometer","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Verkleinern","zoom.in":"Vergrern","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"ffentliche Verkehrsmittel","traffic.MISCELLANEOUS":"Diverse","traffic.ACCIDENT":"Unfall","traffic.OTHER_NEWS":"Anderes Ereignis","traffic.PLANNED_EVENT":"Geplantes Ereignis","traffic.ROAD_HAZARD":"Verkehrshindernis","traffic.ROAD_CLOSURE":"Fahrbahn gesperrt","traffic.WEATHER":"Wetter","traffic.CONGESTION":"Verkehrsstau","traffic.CONSTRUCTION":"Baustelle","traffic.DISABLED_VEHICLE":"Liegengebliebenes Fahrzeug","traffic.from":"Beginn:","traffic.until":"Voraussichtliches Ende:","distance.measurement":"Measure distance"}),Mu("tr-TR",{"layers.normal":"Harita grnm","layers.satellite":"Uydu","layers.terrain":"Arazi","layer.transit":"Toplu ulam","layer.traffic":"Trafik durumlar","layer.incidents":"Trafik olaylarn gster","layers.choose":"Grnm se",minimap:"Minimap","scale.switchToImperial":"Mile dntr","scale.switchToMetric":"Kilometreye dntr","scale.km":"km","scale.m":"m","scale.mi":"mil","scale.ft":"ft","zoom.out":"Uzaklatr","zoom.in":"Yaknlatr","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Toplu ulam","traffic.MISCELLANEOUS":"eitli","traffic.ACCIDENT":"Kaza","traffic.OTHER_NEWS":"Dier haberler","traffic.PLANNED_EVENT":"Planl etkinlik","traffic.ROAD_HAZARD":"Yol tehlikesi","traffic.ROAD_CLOSURE":"Yol kapal","traffic.WEATHER":"Hava durumu","traffic.CONGESTION":"Younluk","traffic.CONSTRUCTION":"Yol almas","traffic.DISABLED_VEHICLE":"Ara arzas","traffic.from":"Balang zaman:","traffic.until":"Tahmini biti zaman:","distance.measurement":"Measure distance"}),Mu("it-IT",{"layers.normal":"Vista mappa","layers.satellite":"Satellite","layers.terrain":"Terreno","layer.transit":"Mezzi pubblici","layer.traffic":"Condizioni del traffico","layer.incidents":"Mostra incidenti stradali","layers.choose":"Scegli vista",minimap:"Minimap","scale.switchToImperial":"Passa a miglia","scale.switchToMetric":"Passa a km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom indietro","zoom.in":"Zoom avanti","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Mezzi pubblici","traffic.MISCELLANEOUS":"Varie","traffic.ACCIDENT":"Incidente","traffic.OTHER_NEWS":"Altre notizie","traffic.PLANNED_EVENT":"Evento pianificato","traffic.ROAD_HAZARD":"Strada dissestata","traffic.ROAD_CLOSURE":"Strada chiusa","traffic.WEATHER":"Maltempo","traffic.CONGESTION":"Ingorgo","traffic.CONSTRUCTION":"Lavori in corso","traffic.DISABLED_VEHICLE":"Veicolo in panne","traffic.from":"Ora di inizio:","traffic.until":"Ora di fine stimata:","distance.measurement":"Measure distance"}),Mu("en-US",{"layers.normal":"Map view","layers.satellite":"Satellite","layers.terrain":"Terrain","layer.transit":"Public transport","layer.traffic":"Traffic conditions","layer.incidents":"Show traffic incidents","layers.choose":"Choose view",minimap:"Minimap","scale.switchToImperial":"Change to miles","scale.switchToMetric":"Change to km","scale.km":"km","scale.m":"m","scale.mi":"mi","scale.ft":"ft","zoom.out":"Zoom out","zoom.in":"Zoom in","zoom.rectangle":"Zoom rectangle","traffic.MASS_TRANSIT":"Public transport","traffic.MISCELLANEOUS":"Miscellaneous","traffic.ACCIDENT":"Accident","traffic.OTHER_NEWS":"Other news","traffic.PLANNED_EVENT":"Planned event","traffic.ROAD_HAZARD":"Road hazard","traffic.ROAD_CLOSURE":"Roadway closed","traffic.WEATHER":"Weather","traffic.CONGESTION":"Congestion","traffic.CONSTRUCTION":"Construction","traffic.DISABLED_VEHICLE":"Disabled vehicle","traffic.from":"Start time:","traffic.until":"Estimated end time:","distance.measurement":"Measure distance"}),t("H.ui.i18n.Localization",Ou),Ou.prototype.mn=function(){return this.b},Ou.prototype.getLocale=Ou.prototype.mn,Ou.prototype.fn=function(){return Object.keys(this.a)},Ou.prototype.getKeys=Ou.prototype.fn,Ou.prototype.Kh=function(t){return!(!this.a||!this.a[t])},Ou.prototype.hasKey=Ou.prototype.Kh,Ou.prototype.translate=function(t){var e=this.a[t];if(!zc(e))throw Error("Translation missing for key '"+t+"'.");return e},Ou.prototype.translate=Ou.prototype.translate,u(Z,F),t("H.ui.base.Element",Z),Z.prototype.V=function(t){if(!t)throw Error("Wrong document object");return this.S=ou(t,this.Ra,this.g.join(" ")),this.renderInternal(this.S,t),this.Da(this.mc(),!0),this.sc(this.ma),this.wb(this.c),this.S},Z.prototype.fa=function(){},Z.prototype.N=function(){},Z.prototype.$=function(){},Z.prototype.renderInternal=Z.prototype.$,Z.prototype.mc=function(){return this.J},Z.prototype.isDisabled=Z.prototype.mc,Z.prototype.Da=function(t,e){return((t=!!t)!==this.J||e)&&((this.J=t)?this.La("H_disabled"):this.qb("H_disabled")),this},Z.prototype.setDisabled=Z.prototype.Da,Z.prototype.O=null,Z.prototype.getData=function(){return this.O},Z.prototype.getData=Z.prototype.getData,Z.prototype.setData=function(t){this.O=t},Z.prototype.setData=Z.prototype.setData,Z.prototype.sc=function(t){var e=this.L();this.ma=t,e&&(t?e.setAttribute("title",t):e.removeAttribute("title"))},Z.prototype.setTooltip=Z.prototype.sc,Z.prototype.S=null,Z.prototype.L=function(){return this.S},Z.prototype.getElement=Z.prototype.L,Z.prototype.c=!0,Z.prototype.wb=function(t){var e=this.L();this.c=t,e&&(e.style.display=t?"":"none")},Z.prototype.setVisibility=Z.prototype.wb,Z.prototype.Dc=function(){return this.c},Z.prototype.getVisibility=Z.prototype.Dc,Z.prototype.La=function(t){var e=this.L();return 0>this.g.indexOf(t)&&this.g.push(t),e&&(e.className=this.g.join(" ")),this},Z.prototype.addClass=Z.prototype.La,Z.prototype.qb=function(t){t=this.g.indexOf(t);var e=this.L();return-1<t&&this.g.splice(t,1),e&&(e.className=this.g.join(" ")),this},Z.prototype.removeClass=Z.prototype.qb,Z.prototype.u=function(){Z.l.u.call(this),Pu(this),this.ma=this.O=this.S=null},u(Qu,Z),t("H.ui.base.Container",Qu),Qu.prototype.Da=function(t,e){var i=this.b?this.b.length:0;for(Z.prototype.Da.call(this,t,e);i--;)this.b[i].Da(t,e);return this},Qu.prototype.setDisabled=Qu.prototype.Da,Qu.prototype.Ka=function(t){var e=this.L();return this.b.push(t),e&&(t.V(e.ownerDocument),e.appendChild(t.L())),this},Qu.prototype.addChild=Qu.prototype.Ka,Qu.prototype.vh=function(){return this.b.concat()},Qu.prototype.getChildren=Qu.prototype.vh,Qu.prototype.removeChild=function(t){var e=this.b.indexOf(t),i=this.L();0<=e&&(this.b.splice(e,1),i&&i.removeChild(t.L()))},Qu.prototype.removeChild=Qu.prototype.removeChild,Qu.prototype.qa=function(){var t=this.L();t&&this.b.forEach((function(e){t.removeChild(e.L())})),this.b=[]},Qu.prototype.$=function(t,e){for(var i=0,n=this.b.length;i<n;i++)t.appendChild(this.b[i].V(e))},Qu.prototype.renderInternal=Qu.prototype.$,Qu.prototype.u=function(){this.qa(),this.b.forEach(this.W,this),Z.prototype.u.call(this)},Qu.prototype.W=function(t){t.B()},u(Ru,Z),t("H.ui.context.Item",Ru),Ru.prototype.f=function(t){var e=this.b,i=e.callback;i&&!e.isDisabled()&&(this.dispatchEvent("click"),i(t))},Ru.prototype.$=function(){var t=this,e=this.L();Be(e,"click",this.f),e.addEventListener("keyup",(function(e){13==e.keyCode&&t.f(e)})),this.a()},Ru.prototype.renderInternal=Ru.prototype.$,Ru.prototype.a=function(){var t=this.L(),e=this.b;e.callback?(this.La("clickable"),t.setAttribute("tabindex","0")):(this.qb("clickable"),t.removeAttribute("tabindex")),e.isDisabled()?this.La("disabled"):this.qb("disabled"),e=e.getLabel(),Su.textContent=e,t.innerHTML=Su.innerHTML.split("\n").join("<br/>")},Ru.prototype.u=function(){Z.prototype.u.call(this),this.b.removeEventListener("update",this.a)},u(Tu,Qu),t("H.ui.context.Menu",Tu),Tu.prototype.$=function(){Qu.prototype.$.apply(this,arguments),this.f.forEach((function(t){t===Pe?t=new Z("div","H_context_menu_item_separator"):(t=new Ru(t)).addEventListener("click",this.i.bind(this)),this.Ka(t)}),this),Be(this.L(),["mousedown","touchstart","pointerdown","wheel"],(function(t){t.stopPropagation()}))},Tu.prototype.renderInternal=Tu.prototype.$,Tu.prototype.setPosition=function(t,e){if(this.a){var i=this.L(),n=i.offsetWidth,r=i.offsetHeight,o=this.a,a=o.ya.width;t+n>a&&t>a/2&&(t-=n),e+r>(o=o.ya.height)&&e>o/2&&(e-=r),lu(i,t,e)}},Tu.prototype.setPosition=Tu.prototype.setPosition,Tu.prototype.i=function(){this.a&&this.a.dispatchEvent(new rd("contextmenuclose",this.a))},Tu.prototype.Ja=function(t){this.a=t},Tu.prototype.setMap=Tu.prototype.Ja,u(Uu,Z),t("H.ui.InfoBubble",Uu),Uu.prototype.a=null,Uu.prototype.Ca=function(){return this.b},Uu.prototype.setPosition=function(t){this.b=Zf(t),this.update()},Uu.prototype.setPosition=Uu.prototype.setPosition,Uu.prototype.Ja=function(t){this.a=t},Uu.prototype.$=function(t,e){this.o=ou(e,"div","H_ib_body"),this.tailEl_=ou(e,"div","H_ib_tail"),this.j=ou(e,"div","H_ib_close H_btn",Wu),this.f=ou(e,"div","H_ib_content","&nbsp;"),this.o.appendChild(this.j),this.o.appendChild(this.f),Hu(this.j,"start",this.v),this.a.b.addEventListener("sync",this.update),this.a.ya.addEventListener("sync",this.update),this.a.addEventListener("enginechange",this.i),t.appendChild(this.o),t.appendChild(this.tailEl_),this.xf(this.m)},Uu.prototype.renderInternal=Uu.prototype.$,Uu.prototype.i=function(){this.s||(this.s=setTimeout(this.update,0))},Uu.prototype.update=function(){var t,e=this.L(),i=this.a,n="none";if(this.s=0,i&&e&&this.getState()===Vu.OPEN){if(t=i.Fa(this.b)){var r=t.x;t=t.y,(r>=-(i=i.ya.width)||r<=2*i||t>=-i||t<=2*i)&&(n="",Xu?(e.style.left=r-i+"px",e.style.top=t+"px"):lu(e,r,t))}e.style.display=n,""===n&&(e.style.visibility="visible")}};var Vu={OPEN:"open",CLOSED:"closed"};Uu.State=Vu,Uu.prototype.A=Vu.OPEN,Uu.prototype.getState=function(){return this.A},Uu.prototype.getState=Uu.prototype.getState,Uu.prototype.P=function(t){t!==this.A&&(this.A=t,this.dispatchEvent("statechange")),(t=this.L())&&(this.A===Vu.OPEN?(t.style.display="block",t.style.visibility="hidden",this.i()):t.style.display="none")},Uu.prototype.setState=Uu.prototype.P,Uu.prototype.close=function(){this.P(Vu.CLOSED)},Uu.prototype.close=Uu.prototype.close,Uu.prototype.open=function(){this.P(Vu.OPEN)},Uu.prototype.open=Uu.prototype.open,Uu.prototype.Km=function(){return this.f||null},Uu.prototype.getContentElement=Uu.prototype.Km,Uu.prototype.xf=function(t){if(t){if("string"!=typeof t&&("number"!=typeof t.nodeType||"string"!=typeof t.nodeName))throw Error("InfoBubble content must be a string or HTML node.");this.m=t}else this.m=void 0;this.L()&&(this.m?(this.f.innerHTML="","string"==typeof this.m?this.f.innerHTML=t:"number"==typeof t.nodeType&&"string"==typeof t.nodeName&&this.f.appendChild(t)):this.f.innerHTML="&nbsp;",this.i())},Uu.prototype.setContent=Uu.prototype.xf,Uu.prototype.u=function(){this.close(),this.xf(null),this.j&&Iu(this.j,"end",this.v),this.a&&(this.a.b.removeEventListener("sync",this.update),this.a.ya.removeEventListener("sync",this.update)),Z.prototype.u.call(this)};var Wu='<svg version="1.1" class="H_icon" viewBox="0 0 12 12"><path d="m8.12 6 3.66-3.66c.29-.29.29-.76 0-1.05l-1.06-1.06c-.29-.29-.76-.29-1.05 0l-3.66 3.66-3.66-3.66c-.29-.29-.76-.29-1.05 0l-1.06 1.06c-.29.29-.3.76 0 1.05l3.66 3.66-3.66 3.66c-.29.29-.29.76 0 1.05l1.06 1.06c.29.29.76.29 1.05 0l3.66-3.66 3.66 3.66c.29.29.76.29 1.05 0l1.06-1.06c.29-.29.3-.76 0-1.05z"></path></svg>';function Yu(t){this.c=t,this.a=this.b=null,this.i=0,this.g=22,this.f=A(this.f,this),(t=this.c.jc()).addEventListener("mapviewchange",this.o,!1,this),(t=t.a).addEventListener("add",this.j,!1,this),t.addEventListener("remove",this.m,!1,this)}function Zu(t,e){t.b&&e&&t.b===e.ga()||(t.b&&t.b.removeEventListener("tap",t.f),e?(t.b=e.ga(),t.b.addEventListener("tap",t.f),t.i=t.b.min,t.g=t.b.max):(t.b=null,t.i=0,t.g=22))}function $u(t){return window.H.service&&t.ga()instanceof window.H.service.traffic.incidents.Provider}function av(t,e){var i=t.L(),n=this;F.call(this),this.a=t,this.i=i.ownerDocument,this.f={},this.c=[],new Yu(this),this.S=ou(this.i,"div","H_ui"),this.setDirection(),this.C=A((function(t){this.o.put(t.target,t.target.Vc)}),this),this.addEventListener("alignmentchange",this.C),this.J=A((function(){this.Pl()}),this),this.addEventListener("toggleunitsystem",this.J),this.S.addEventListener("contextmenu",this.v,!1),this.S.addEventListener("MSHoldVisual",this.v,!1),this.a.addEventListener("contextmenu",this.O,!1,this),this.a.addEventListener("contextmenuclose",this.s,!1,this),this.a.zb(this.B.bind(this)),this.b=null,this.m=-1,this.o=new nu(this.S,this.i),this.g=Au.METRIC,bv(this,"en-US"),e&&cv(this,e),i.appendChild(this.S),x.setTimeout((function(){n.o.update()}),1)}function bv(t,e){if(zc(e))var i=e;else{if(!(e instanceof Ou))throw Error("The locale parameter must be a string or a H.ui.i18n.Localization object.");i=e.b;var n=e}if(!i)throw Error("No locale was defined.");if(n)t.j=n;else{if(!(0<=Ju.indexOf(i)))throw Error("Locale ["+i+"] is not supported.");t.j=new Ou(i)}}function cv(t,e){var i,n;e.unitSystem&&t.Jg(e.unitSystem),(n=e.locale)&&bv(t,n),(i=e.zoom)&&t.Od("zoom",new ev(Da(i)?i:null)),(i=e.zoomrectangle)&&t.Od("zoomrectangle",new fv(Da(i)?i:null)),(i=e.mapsettings)&&t.Od("mapsettings",new gv(Da(i)?i:null)),(i=e.scalebar)&&t.Od("scalebar",new hv(Da(i)?i:null)),(i=e.distancemeasurement)&&t.Od("distancemeasurement",new iv(Da(i)?i:null))}function jv(t,e,i){var n,r=e.raster;if(e=e.vector.normal,t===Al.P2D){if(t=[{label:"layers.normal",layer:r.normal.map},{label:"layers.satellite",layer:r.satellite.map},{label:"layers.terrain",layer:r.terrain.map}],i)for(n in r)if(r[n].map===i){var o=n;break}i=[{label:"layer.incidents",layer:r.normal.trafficincidents},{label:"layer.transit",layer:o&&r[o].transit}]}else t=[{label:"layers.normal",layer:e.map},{label:"layers.satellite",layer:r.satellite.map}],i=[{label:"layer.traffic",layer:e.traffic},{label:"layer.incidents",layer:e.trafficincidents}];return{alignment:"bottom-right",baseLayers:t,layers:i}}function lv(t){t=t||{},Z.call(this,"div","H_btn"),this.Qc(t.label||" "),this.sc(t.tooltip||""),this.setData(t.data),this.Da(!!t.disabled),this.P(mv.UP,!0),t.onStateChange&&this.addEventListener("statechange",t.onStateChange),this.f=A(this.f,this),this.b=A(this.b,this)}Yu.prototype.o=function(t){var e=t.newValue.zoom;this.a&&t.modifiers&t.ZOOM&&(e<this.i||e>this.g)&&this.a.close()},Yu.prototype.j=function(t){$u(t=t.added)&&Zu(this,t)},Yu.prototype.m=function(t){$u(t.removed)&&(this.a&&this.a.close(),Zu(this,null))},Yu.prototype.f=function(t){var e;if(t.target&&(e=t.target.getData())&&0===t.currentPointer.button){this.a||(this.a=new Uu(t.target.ba()),this.a.La("H_tib"),this.c.sj(this.a)),this.a.setPosition(t.target.ba());var i=e.TRAFFIC_ITEM_TYPE_DESC.replace(" ","_");i=this.c.Ba().Kh("traffic."+i)?this.c.Ba().translate("traffic."+i):e.TRAFFIC_ITEM_DESCRIPTION[e.TRAFFIC_ITEM_DESCRIPTION.length-1].value,this.a.xf('<div class="H_tib_content"><div class="H_rdo_title" dir="auto">{{title}}</div><div class="H_tib_desc" dir="auto"><span>{{desc}}</span><div class="H_tib_time"><span class="H_tib_left">{{traffic.from}}</span><span class="H_tib_right">{{from}}</span><br/><span class="H_tib_left">{{traffic.until}}</span><span class="H_tib_right">{{until}}</span></div></div>'.replace("{{title}}",i).replace("{{desc}}",e.TRAFFIC_ITEM_DESCRIPTION[0].value).replace("{{traffic.from}}",this.c.Ba().translate("traffic.from")).replace("{{traffic.until}}",this.c.Ba().translate("traffic.until")).replace("{{from}}",e.START_TIME).replace("{{until}}",e.END_TIME)),this.a.open()}t.stopPropagation()},u(av,F),t("H.ui.UI",av),av.prototype.v=function(t){for(var e=t.target;e&&!/\bH_ib_content\b/.test(e.className);)e=e.parentNode;e||t.preventDefault()},av.prototype.L=function(){return this.S},av.prototype.getElement=av.prototype.L,av.prototype.jc=function(){return this.a},av.prototype.getMap=av.prototype.jc,av.prototype.Qn=function(){return this.g},av.prototype.getUnitSystem=av.prototype.Qn,av.prototype.Jg=function(t){var e,i=this.f;if(t!==this.g)for(e in this.g=t,i)i[e]instanceof dv&&i[e].onUnitSystemChange(this.g)},av.prototype.setUnitSystem=av.prototype.Jg,av.prototype.setDirection=function(t){this.S.setAttribute("dir",t||getComputedStyle(this.jc().L()).direction)},av.prototype.setDirection=av.prototype.setDirection,av.prototype.Ba=function(){return this.j},av.prototype.Pl=function(){this.g===Au.METRIC?this.Jg(Au.IMPERIAL):this.Jg(Au.METRIC)},av.prototype.toggleUnitSystem=av.prototype.Pl,av.prototype.sj=function(t){var e=this.c.length,i=this.S;if(0>this.c.indexOf(t)){t.ka(this),t.Ja(this.a);var n=t.V(this.i);e=0<e?this.c[e-1].L().nextSibling:this.S.firstChild,i.insertBefore(n,e),this.c.push(t)}},av.prototype.addBubble=av.prototype.sj,av.prototype.O=function(t){var e=t.items;this.b&&this.s(),clearTimeout(this.m),this.m=x.setTimeout(function(){e.length&&(this.b=new Tu(e),this.S.insertBefore(this.b.V(this.i),this.S.firstChild),this.b.ka(this),this.b.Ja(this.a),this.b.setPosition(t.viewportX,t.viewportY))}.bind(this),0)},av.prototype.s=function(){this.b&&(this.b.B(),this.b=null)},av.prototype.Ro=function(t){var e=this.c.indexOf(t);-1<e&&(t.ka(null),t.Ja(null),this.c.splice(e,1),this.S.removeChild(t.L()))},av.prototype.removeBubble=av.prototype.Ro,av.prototype.Gm=function(){return this.c},av.prototype.getBubbles=av.prototype.Gm,av.prototype.Od=function(t,e){if(this.Ve(t))throw Error("A control with name ["+t+"] is already registered.");e.ka(this),e.Ja(this.a),e.Xa=this.j,e.V(this.i),e.onUnitSystemChange(this.g),this.f[t]=e},av.prototype.addControl=av.prototype.Od,av.prototype.To=function(t){var e=this.Ve(t);if(!e)throw Error("Control ["+t+"] not found in this UI's controls.");return e.N(),e.ka(null),e.Ja(null),Pu(e),delete this.f[t],e},av.prototype.removeControl=av.prototype.To,av.prototype.Ve=function(t){return this.f[t]},av.prototype.getControl=av.prototype.Ve,av.prototype.u=function(){for(var t in this.f)ju.hasOwnProperty.call(this.f,t)&&this.f[t].B();this.c.forEach((function(t){t.B()})),(t=this.S.parentNode)&&t.removeChild(this.S),F.prototype.u.call(this),this.S=null},av.prototype.capture=function(t,e,i,n){var r=this.Ve("scalebar"),o=t.getContext("2d"),a=t.width,s=t.height,u=this.a.m,l=5+(u?u.L().childNodes[1].offsetHeight:0);r&&r.Dc()?r.capture(e,(function(n){o.drawImage(n,a-n.width-5*e,s-n.height-l*e),i(t)}),n):i(t)},av.prototype.capture=av.prototype.capture,av.createDefault=function(t,e,i){var n=t.ic().type;if(i=new av(t,{unitSystem:Au.METRIC,zoom:{alignment:"right-bottom"},mapsettings:jv(n,e,t.c),scalebar:{alignment:"bottom-right"},locale:i||"en-US"}),n===Al.P2D){var r=i.Ve("mapsettings"),o=function(){if(r.jc()){var i=jv(n,e,t.c);kv(r,i.baseLayers,i.layers)}};t.addEventListener(t.o.Ff,o),i.zb((function(){t.removeEventListener(t.o.Ff,o)})),r.zb((function(){t.removeEventListener(t.o.Ff,o)}))}return i},u(lv,Z),t("H.ui.base.Button",lv),lv.prototype.Da=function(t,e){return t&&this.qb("H_active"),lv.l.Da.call(this,t,e)},lv.prototype.$=function(t){Hu(t,"start",this.f),Hu(t,"end",this.b),Hu(t,"out",this.b),this.Qc(this.Ye(),!0)},lv.prototype.renderInternal=lv.prototype.$,lv.prototype.getState=function(){return this.A},lv.prototype.getState=lv.prototype.getState,lv.prototype.P=function(t,e){return t!==this.A&&(this.A=t,t===mv.DOWN?this.La("H_active"):this.qb("H_active"),e||this.dispatchEvent("statechange")),this},lv.prototype.setState=lv.prototype.P,lv.prototype.Ye=function(){return this.a},lv.prototype.getLabel=lv.prototype.Ye,lv.prototype.Qc=function(t,e){return(e||t!==this.a)&&(this.a=t,(e=this.L())&&(e.innerHTML=t)),this},lv.prototype.setLabel=lv.prototype.Qc,lv.prototype.f=function(t){this.mc()||this.P(mv.DOWN),t.preventDefault()},lv.prototype.b=function(t){this.mc()||this.P(mv.UP),t.preventDefault()},lv.prototype.u=function(){var t=this.L();t&&(Iu(t,"start",this.f),Iu(t,"end",this.b),Iu(t,"out",this.b)),Z.prototype.u.call(this)};var mv={UP:"up",DOWN:"down"};function nv(t){var e;t=t||{},this.f=!!t.vertical,this.W=t.length||"16em",this.a=Cc(e=t.min)?e:0,this.m=wd(this.a,Cc(e=t.max)?e:100),this.za=E(e=t.step)?1:e,this.o=ov(this,Cc(e=t.value)?e:(this.a+this.m)/2),this.sg=A(this.sg,this),this.og=A(this.og,this),this.ug=A(this.ug,this),this.tg=A(this.tg,this),this.b=t.pointerArea,Z.call(this,"div","H_slider"+(this.f?"":" H_l_horizontal"))}function pv(t){t.s||(Hu(t.L(),"start",t.sg),Hu(t.b,"move",t.og),Hu(t.b,"end",t.ug),Hu(t.b,"out",t.tg),t.s=!0)}function qv(t){t.s&&(Iu(t.L(),"start",t.sg),Iu(t.b,"move",t.og),Iu(t.b,"end",t.ug),Iu(t.b,"out",t.tg),t.s=!1)}function ov(t,e){var i=t.za;return e=Yd(e,t.a,t.m),i?t.a+xd((e-t.a)/i)*i:e}function rv(t,e){var i=t.C,n=t.f;t.v||(t.v=i["offset"+(n?"Height":"Width")]),0>(e-=ku(i)[n?"y":"x"])&&(e=0),e=(t.m-t.a)*e/t.v,e=ov(t,n?t.m-e:t.a+e),t.o!==e&&(t.Kg(e,!0),t.dispatchEvent(new Ng(t.Kk.nd,e,t.o)))}function sv(t,e){return(e.touches?e.targetTouches[0]:e)["page"+(t.f?"Y":"X")]}function tv(t){var e=!1,i=t.type;return-1!==i.indexOf("pointer")||-1!==i.indexOf("touch")?e=!0:C(t,MouseEvent)&&(e=1===t.which||1===t.buttons),e}function uv(t){var e=t.touches;return e&&1===e.length||C(t,MouseEvent)}lv.State=mv,u(nv,Z),t("H.ui.base.Slider",nv),nv.prototype.Kg=function(t,e){var i=this.f,n=i?"top":"left";return this.i&&!e||(t=Yd(t,this.a,this.m),this.j&&(i=(i?-1:1)*(e=100*(t-this.a)/(this.m-this.a)),this.j.style[n]=i+"%",this.Xa.style[n]=100+i+"%"),this.o=ov(this,t)),this.o},nv.prototype.setValue=nv.prototype.Kg,nv.prototype.Rn=function(){return this.o},nv.prototype.getValue=nv.prototype.Rn,n=nv.prototype,n.sg=function(t){var e=this.f;if(tv(t)&&uv(t)){var i=sv(this,t),n=t.target;n===this.j||n.parentElement===this.j?(this.U=i-ku(this.j)[e?"y":"x"]-this.j.offsetWidth/2,this.L().className="H_slider H_slider_active"+(this.f?"":" H_l_horizontal"),this.i=!0):rv(this,i),t.preventDefault()}},n.ug=function(){this.i&&(this.L().className="H_slider "+(this.f?"":" H_l_horizontal"),this.i=!1)},n.tg=function(t){this.i&&t.target===this.b&&(this.i=!1)},n.og=function(t){this.i&&uv(t)&&(tv(t)?(rv(this,sv(this,t)-this.U),t.preventDefault()):this.i=!1)},n.Kk={nd:"change"},n.$=function(t,e){var i=ou(e,"div","H_slider_cont"),n=ou(e,"div","H_slider_knob_cont"),r=ou(e,"div","H_slider_knob"),o=ou(e,"div","H_slider_knob_halo"),a=ou(e,"div","H_slider_track");e=ou(e,"div","H_slider_track H_slider_track_active"),t.appendChild(i),i.appendChild(a),a.appendChild(e),i.appendChild(n),n.appendChild(r),n.appendChild(o),this.C=a,this.Xa=e,this.j=n,this.b||(this.b=t.ownerDocument.body),i.style[this.f?"height":"width"]=this.W,this.Kg(this.o),pv(this)},nv.prototype.renderInternal=nv.prototype.$,nv.prototype.u=function(){qv(this)},nv.prototype.Da=function(t,e){return t?qv(this):this.C&&pv(this),Z.prototype.Da.call(this,t,e)},nv.prototype.setDisabled=nv.prototype.Da;var vv={in:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><g><path d="m5 10.6h5.6v-5.6h2.8v5.6h5.6v2.8h-5.6v5.6h-2.8v-5.6h-5.6v-2.8z"></path></g></svg>',out:'<svg version="1.1" class="H_icon" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><path d="m5 10.6h14v2.8h-14z"/></svg>'};function dv(){Qu.call(this,"div","H_ctl"),this.map=null,this.Vc="top-left"}function ev(t){var e=(t=t||{}).slider;dv.call(this),this.o=A(this.o,this),this.i=A(this.i,this),this.a=A(this.a,this),e&&(this.v=A(this.v,this),this.C=e,this.Aa=t.sliderSnaps,this.La("H_zoom_slider")),this.j=new lv({label:vv.in,onStateChange:this.o}),this.s=new lv({label:vv.out,onStateChange:this.o}),this.La("H_zoom"),this.La("H_grp"),this.za=!1!==t.fractionalZoom,this.setZoomSpeed(t.zoomSpeed||4),this.Zb(t.alignment||"right-middle")}function wv(t){t.removeChild(t.f),t.f=null,t.m&&(t.m.removeEventListener("minchange",t.a),t.m.removeEventListener("maxchange",t.a),t.m=null)}u(dv,Qu),t("H.ui.Control",dv),dv.prototype.Ja=function(t){this.map=t},dv.prototype.V=function(t){return Qu.prototype.V.call(this,t)},dv.prototype.$=function(t,e){Qu.prototype.renderInternal.call(this,t,e),this.Zb(this.Vc)},dv.prototype.renderInternal=dv.prototype.$,dv.prototype.kf=function(){},dv.prototype.onUnitSystemChange=dv.prototype.kf,dv.prototype.jc=function(){return this.map},dv.prototype.getMap=dv.prototype.jc,dv.prototype.Ba=function(){return this.Xa},dv.prototype.getLocalization=dv.prototype.Ba,dv.prototype.Bm=function(){return this.Vc},dv.prototype.getAlignment=dv.prototype.Bm,dv.prototype.Zb=function(t){return"string"==typeof t&&mu[t.replace("-","_").toUpperCase()]===t&&(this.Vc=t,this.dispatchEvent("alignmentchange")),this},dv.prototype.setAlignment=dv.prototype.Zb,u(ev,dv),t("H.ui.ZoomControl",ev),ev.prototype.Wn=function(){return this.U},ev.prototype.getZoomSpeed=ev.prototype.Wn,ev.prototype.fp=function(t){this.U=t},ev.prototype.setZoomSpeed=ev.prototype.fp,ev.prototype.Ja=function(t){this.map!==t&&(this.map&&this.map.removeEventListener("mapviewchange",this.i),wv(this)),dv.prototype.Ja.apply(this,arguments),this.map&&(this.a(),t.addEventListener("mapviewchange",this.i),t.addEventListener("baselayerchange",this.a))},ev.prototype.setMap=ev.prototype.Ja,ev.prototype.u=function(){dv.prototype.u.apply(this,arguments),this.map.removeEventListener("baselayerchange",this.a),wv(this)},ev.prototype.$=function(t,e){dv.prototype.renderInternal.call(this,t,e),this.j.sc(this.Ba().translate("zoom.in")),this.s.sc(this.Ba().translate("zoom.out"))},ev.prototype.renderInternal=ev.prototype.$,ev.prototype.Zb=function(t){var e=this.Vc;return dv.prototype.Zb.call(this,t),e!==t&&this.a(),this},ev.prototype.setAlignment=ev.prototype.Zb,ev.prototype.i=function(){var t=this.map,e=t.vb(),i=t.$a()-1;t=t.c||t.ic().getCapabilities().lookAt.zoom,this.C&&this.f.Kg(e),this.mc()||(this.j.Da(e+i>=t.max),this.s.Da(e<=t.min))},ev.prototype.Da=function(t,e){return ev.l.Da.call(this,t,e),this.i(),this},ev.prototype.setDisabled=ev.prototype.Da,ev.prototype.o=function(t){var e,i=(t=t.target)===this.j?1:-1,n=0<i?Math.ceil:Math.floor,r=this.map,o=this;r&&("down"===t.getState()?(r.b.startControl(),r.b.control(0,0,i*this.U,0,0,0)):r.b.endControl(!0,(function(t){e=o.za?t.zoom:n(t.zoom),t.zoom=e})))},ev.prototype.v=function(t){this.map&&this.map.zf(t.newValue)},ev.prototype.a=function(){var t=this.Vc,e=this.jc();if(/^top/g.test(t)||/^bottom/g.test(t)){var i=this.s;t=this.j;var n=!1}else i=this.j,t=this.s,n=!0;if(this.removeChild(i),this.removeChild(t),this.Ka(i),this.C&&e){wv(this),e=n;var r=(n=(i=this.map)&&i.c)||i.ic().getCapabilities().lookAt.zoom;(this.m=n)&&(n.addEventListener("minchange",this.a),n.addEventListener("maxchange",this.a)),this.f=new nv({step:this.Aa?1:0,vertical:e,min:r.min,max:r.max,value:i.vb(),pointerArea:i.L()}),this.f.addEventListener(this.f.Kk.nd,this.v),this.Ka(this.f)}this.Ka(t)};var xv={btn:'<svg class="H_icon" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill-rule="evenodd"><g transform="translate(3 2)"><path d="m18 13v7h-18v-7h2v5h2v-2h2v2h2v-3h2v3h2v-2h2v2h2v-5z"></path><path d="m2.3.3c.7 0 1.3.1 1.8.4s.9.6 1.1 1 .4.9.4 1.4c0 .5-.1 1-.3 1.4s-.57 1-1 1.6-1.3 1.3-2.3 2.2h3.9l-.2 1.7h-6.16v-1.6c1.1-1.1 2-2 2.5-2.6s.9-1 1-1.4.3-.8.3-1.2c0-.4-.1-.7-.3-.9s-.5-.3-.9-.3c-.3 0-.6 0-.9.2s-.5.4-.8.7l-1.3-1c.4-.5.9-.9 1.4-1.2s1.2-.4 1.8-.4zm14.4 9.7h-2.3l-.2-3.8c 0-.9-.1-1.7-.1-2.4 0-.5 0-1 0-1.5l-1.5 6.7h-2.2l-1.6-6.7c.1.8.1 1.6.1 2.3 0 .5 0 1.1 0 1.7l-.2 3.8h-2.2l.7-9.7h2.9l1.5 6.6 1.4-6.6h2.9z"></path></g></g></svg>',point:'<svg height="22" viewBox="0 0 12 12" width="22" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="m6 12c3.3 0 6-2.7 6-6s-2.7-6-6-6-6 2.7-6 6 2.7 6 6 6z" fill="#fff"></path><path d="m6 10c2.2 0 4-1.8 4-4s-1.8-4-4-4-4 1.8-4 4 1.8 4 4 4z" fill="#2ed5c9" stroke="#272c36" stroke-width="2"></path></g></svg>'};function yv(t){lv.call(this,t),this.j=function(t){t.preventDefault()},this.i=A((function(t){this.mc()||this.toggleState(),t.preventDefault()}),this)}u(yv,lv),t("H.ui.base.PushButton",yv),yv.prototype.$=function(t){Hu(t,"start",this.i),Hu(t,"end",this.j),this.Qc(this.Ye(),!0)},yv.prototype.renderInternal=yv.prototype.$,yv.prototype.mp=function(){var t=mv.DOWN;return this.P(this.getState()===t?mv.UP:t),this},yv.prototype.toggleState=yv.prototype.mp,yv.prototype.u=function(){var t=this.L();t&&Iu(t,"start",this.i),lv.prototype.u.call(this)};var Xu,zv=navigator.userAgent,Av=-1<zv.indexOf("Android")&&-1<zv.indexOf("Mozilla/5.0")&&-1<zv.indexOf("AppleWebKit"),Bv=/AppleWebKit\/([\d.]+)/,Cv=null===Bv.exec(zv)?null:parseFloat(Bv.exec(zv)[1]);Xu=Av&&null!==Cv&&537>Cv;var Dv=Function("return this")(),Su=document.createElement("T");function Ev(t,e,i){Qi.call(this,t,{icon:Fv,visibility:i}),Gv(this,e)}function Gv(t,e){t.oo=e,t.S&&(t.S.textContent=e)}u(Ev,Qi);var Fv=new Hi(ou(Dv.document,"span","H_dm_label"),{onAttach:function(t,e,i){i.S=t,Gv(i,i.oo)},onDetach:function(t,e,i){delete i.S}});function Hv(t,e){F.call(this),this.f=t,this.a=new Ev(this.N,""),e.push(this.a),this.b=new Q({objects:e,data:this}),this.j=this.j.bind(this)}function Iv(t,e){e&&(t.nextSibling=e,e.previousSibling=t)}function Jv(t,e,i,n){var r=new L,o=[];Iv(t,this),Iv(this,e),r.Fd(t.Ca()),r.Fd(e.Ca()),this.i=new nh(r,{style:i.ne}),this.s=new nh(r,{style:{strokeColor:"transparent",lineWidth:Math.min(100,this.i.ua().lineWidth+2*(n||5))}}),i.c&&(this.o=new nh(r,{style:i.c}),o.push(this.o)),o.push(this.i,this.s),Hv.call(this,i,o),this.O=this.v=-1,(t=this.b).addEventListener("pointermove",this.J,!0,this),t.addEventListener("pointerleave",this.C,!0,this)}function Kv(t,e,i){var n=t.i.ba();n.Bf(3*i,3,[e.lat,e.lng,0]),t.o&&t.o.da(n),t.s.da(n),t.i.da(n)}function Lv(t,e,i){i=e.b(i||0),this.i=new yn(t,{icon:i,zIndex:0}),this.i.draggable=!0,Hv.call(this,e,[this.i]),(t=this.b).addEventListener("dragstart",this.Bo,!0,this),t.addEventListener("drag",this.Co,!0,this),t.addEventListener("dragend",this.Ao,!0,this)}function Mv(t){var e=0;t.nextSibling&&t.previousSibling&&(t.nextSibling.g||t.previousSibling.g?t.nextSibling.g&&!t.previousSibling.g&&(e=2):e=1),e=t.f.b(e),t.i.Pc(e)}function Nv(t,e){this.c=e,this.b=t,this.a={previousSibling:null,nextSibling:null,g:!0},Ov(this,this.a),this.rg=A(this.rg,this)}function Pv(t,e){for(var i=(t=t.a).nextSibling;i!==t;){var n=i,r=i.previousSibling!==t&&e;(n.c=r)?n.j():(n.m&&x.clearTimeout(n.m),n.m=x.setTimeout(n.j,100)),i=i.nextSibling}}function Qv(t,e){var i=e||t.a.nextSibling,n=0,r=0;if(e&&!Rv(t,e))throw new D(t.sf,0,e);for(i instanceof Lv?n=i.Xe():i instanceof Jv&&(n=i.previousSibling.Xe()),e=i;e&&e!==t.a;e=e.nextSibling,r++)e.Ei(n),1==r%2&&(n+=e.Xe())}function Rv(t,e){for(var i=t.a.nextSibling,n=!1;i!==t.a;){if(i===e){n=!0;break}i=i.nextSibling}return n}function Sv(t,e,i){e=new Jv(e,i,t.c),t.b.ea(e.b)}function Ov(t,e){t.a.nextSibling=e,e.previousSibling=t.a}function iv(t){var e,i=(t=t||{}).lineStyle;dv.call(this),this.s=new yv({label:xv.btn,onStateChange:A(this.yo,this)}),this.Ka(this.s),(e=t.distanceFormatter)&&(this.Jj=e),i&&(this.wk=i,this.Vk=B),this.Zb(t.alignment||"right-bottom"),this.m={},this.m[0]=t.startIcon,this.m[2]=t.endIcon,this.m[1]=t.stopoverIcon,this.m[3]=t.splitIcon}function Tv(t){var e,i=t.map,n={};t.i||(t.j=new N,t.f=new ml(t.j,{pixelRatio:t.map.$a()}),t.v=e=t.j.kc(),t.v.El(!0),e.addEventListener("dragstart",t.wo,!0,t),e.addEventListener("dragend",t.Af,!0,t),e.addEventListener("pointerenter",t.Af,!0,t),e.addEventListener("pointerleave",t.xo,!0,t),e.addEventListener("tap",t.Lo,!0,t),t.o=Uv(t),n.a=A(t.Jj,t),n.b=A(t.Gk,t),n.g=A(t.Zj,t),n.map=t.map,n.f=t.o,n.ne=t.wk,n.c=t.Vk,t.a=new Nv(t.v,n),t.i=!0),t.o&&t.v.ea(t.o),i.addEventListener("tap",t.Sk,!0,t),i.a.add(t.f)}function Vv(t){var e=t.map;t.i&&(e.removeEventListener("tap",t.Sk,!0,t),e.rf(t.f),t.a.qa())}function Uv(t){function e(){var t=n.Db();return t={anchor:n.ud().clone().scale(o).floor(),size:new Ki(yd(t.w*o),yd(t.h*o)),hitArea:r},new Ij(n.ad(),t)}var i,n=t.Gk(3),r=new Li(Mi.NONE,[]),o=n===t.C?.5:1;if(1===n.getState())var a=e();else a=new Ij("<svg/>",{hitArea:r}),n.addEventListener("statechange",(function(){1===n.getState()&&i.Pc(e())}));return i=new yn(t.map.fb(),{visibility:!1,icon:a})}function Wv(){this.A=Xv.CLOSED,Qu.call(this,"div","H_overlay")}u(Hv,F),Hv.prototype.g=!1,Hv.prototype.N={lat:0,lng:0},Hv.prototype.Qc=function(t,e){Gv(this.a,t),this.a.da(e)},Hv.prototype.j=function(){this.a.wb(this.c)},u(Jv,Hv),Jv.prototype.Xe=function(){var t=this.i.ba();return t.Qe(0).Za(t.Qe(1))},Jv.prototype.J=function(t){var e=t.currentPointer;t=this.previousSibling.Ca();var i=this.nextSibling.Ca(),n=this.f.f,r=e.viewportX;e=e.viewportY,this.v===r&&this.O===e||(this.v=r,this.O=e,n.da(this.f.g(t,i,{x:r,y:e})),n.wb(!0))},Jv.prototype.C=function(){this.f.f.wb()},Jv.prototype.Ei=function(){this.Qc(this.f.a(this.Xe()),this.i.G().fb())},u(Lv,Hv),n=Lv.prototype,n.Lk=0,n.ii={nd:"change"},n.Xe=function(){return this.Lk},n.Ca=function(){return this.i.ba()},n.Co=function(t){var e=t.currentPointer;t=e.viewportX,e=e.viewportY,this.s===t&&this.v===e||(this.s=t,this.v=e,this.i.da(this.f.map.Wa(t-this.o.x,e-this.o.y)),this.dispatchEvent(new rd(this.ii.nd,this)))},n.Bo=function(t){var e=t.currentPointer,i=e.viewportX;e=e.viewportY;var n=this.f.map.Fa(this.Ca());this.i.ye(1),this.o={x:i-n.x,y:e-n.y},t.stopPropagation()},n.Ao=function(){this.i.ye(0)},n.Ei=function(t){this.Lk=t,this.Qc(this.f.a(t),this.Ca())},t("H.ui.distanceMeasurement.Model",Nv),n=Nv.prototype,n.jg=function(){return this.a.nextSibling===this.a},n.Ge=function(t){var e=this.a.previousSibling,i=this.jg();return t=new Lv(t,this.c,i?0:2),this.b.ea(t.b),Iv(t,this.a),t.addEventListener(t.ii.nd,this.rg),i?Ov(this,t):(Sv(this,e,t),Mv(e),Qv(this,e)),t},n.insertBefore=function(t,e){var i,n=1;if(e){if(!Rv(this,e))throw new D(this.insertBefore,1,e);(i=e.previousSibling.g)&&(n=0),(t=new Lv(t,this.c,n)).addEventListener(t.ii.nd,this.rg),this.b.ea(t.b),i?(Sv(this,t,i=this.a.nextSibling),Ov(this,t),e=t,Mv(i)):(e=(i=e.previousSibling).previousSibling,n=i.nextSibling,this.b.Ia(i.b),Sv(this,e,t),Sv(this,t,n)),Qv(this,e)}else t=this.Ge(t);return t},n.qa=function(){Ov(this,this.a),this.b.qa()},n.sf=function(t){var e=this.a,i=t.previousSibling,n=t.nextSibling;if(!Rv(this,t))throw new D(this.sf,0,t);if(this.b.Ia(t.b),i===e){var r=n;r!==e?(Ov(this,t=r.nextSibling),t.Ei(0),Mv(t),Qv(this,t)):Ov(this,this.a)}else n===e?(Iv(t=(r=i).previousSibling,e),Mv(t)):i&&n&&(Sv(this,i.previousSibling,n.nextSibling),this.b.Gd([n.b,i.b]),Qv(this,i.previousSibling));r&&r!==e&&this.b.Ia(r.b)},n.rg=function(t){var e=(t=t.target).previousSibling,i=t.nextSibling,n=t.Ca();if(!i.g){Kv(i,n,!1);var r=t}e.g||(Kv(e,n,!0),r=e.previousSibling),Qv(this,r)},u(iv,dv),t("H.ui.DistanceMeasurement",iv),n=iv.prototype,n.wk={strokeColor:"rgb(39,44,54)",lineWidth:5},n.Vk={strokeColor:"white",lineWidth:7},n.Jj=function(t){var e="m",i=0;return"metric"===this.U?1e3<=t&&(t/=1e3,e="km",i=1):(e="ft",5280<=(t/=.3048)&&(t/=5280,e="mi",i=1)),t.toFixed(i)+" "+this.Ba().translate("scale."+e)},n.Zj=function(t,e,i){return t=this.map.Fa(t),e=this.map.Fa(e),i=new I(i.x,i.y).Yj(t,e),this.map.Wa(i.x,i.y)},n.$=function(t,e){var i=22*(this.map.ic().type===Vj.P2D?this.map.$a():1),n=i/2;dv.prototype.renderInternal.call(this,t,e),this.U=Au.METRIC,this.C=new Ij(xv.point,{anchor:{x:n,y:n},size:{w:i,h:i},hitArea:new Li(Mi.CIRCLE,[n,n,n])}),this.s.sc(this.Ba().translate("distance.measurement"))},iv.prototype.renderInternal=iv.prototype.$,n=iv.prototype,n.Gk=function(t){return this.m[t]||this.C},n.Af=function(){Pv(this.a,!0)},n.wo=function(){Pv(this.a)},n.xo=function(t){"touch"!==t.currentPointer.type&&Pv(this.a)},n.Lo=function(t){var e,i=t.currentPointer,n=t.target.Ha;n&&(n=n.getData())instanceof Hv&&(e=n),n=e,t=(t=t.originalEvent).metaKey||t.altKey,n&&(t&&n instanceof Lv?this.a.sf(n):n instanceof Jv&&(t=n.previousSibling.Ca(),e=n.nextSibling.Ca(),i={x:i.viewportX,y:i.viewportY},this.a.insertBefore(this.Zj(t,e,i),n.nextSibling),this.o.wb()),this.Af())},n.Sk=function(t){var e=t.currentPointer;(t=t.target)!==this.map&&t.getProvider&&t.getProvider()===this.j||(this.a.Ge(this.map.Wa(e.viewportX,e.viewportY)),this.o.wb(),this.Af())},n.yo=function(t){"down"===t.target.getState()?Tv(this):Vv(this)},n.kf=function(t){this.U=t,this.i&&(Qv(this.a),this.Af())},iv.prototype.onUnitSystemChange=iv.prototype.kf,iv.prototype.u=function(){Vv(this),this.i&&(this.j.B(),this.f.B()),iv.l.u.call(this)},iv.prototype.Ja=function(t){t?this.s.getState()===mv.DOWN&&(this.map=t,Tv(this)):(Vv(this),this.i=!1),dv.prototype.Ja.apply(this,arguments)},iv.prototype.setMap=iv.prototype.Ja,u(Wv,Qu),t("H.ui.base.OverlayPanel",Wv),Wv.prototype.P=function(t,e){return(t!==this.A||e)&&(this.A=t,t===Xv.OPEN?this.La("H_open"):this.qb("H_open")),this},Wv.prototype.setState=Wv.prototype.P,Wv.prototype.getState=function(){return this.A},Wv.prototype.getState=Wv.prototype.getState,Wv.prototype.$k=function(t){var e=t.Vc;t=t.L();var i=this.L(),n=i.style;if(this.qb("H_top"),this.qb("H_middle"),this.qb("H_bottom"),this.qb("H_left"),this.qb("H_center"),this.qb("H_right"),n.bottom=n.top=n.left=n.right=n.margin="",/top/g.test(e)){this.La("H_top"),n.top="0",n.margin="0 12px";var r=-1}else/bottom/g.test(e)?(this.La("H_bottom"),n.bottom="0",n.margin="0 12px",r=1):(this.La("H_middle"),n.top="50%",n.margin="0 12px",n.marginTop=-Math.round(.5*i.offsetHeight)+"px",r=0);/left/g.test(e)?(this.La("H_left"),n.left=t.offsetWidth+"px",n.marginLeft="12px"):/right/g.test(e)?(this.La("H_right"),n.right=t.offsetWidth+"px",n.marginRight="12px"):(this.La("H_center"),n.left="50%",0>r?(n.top=t.offsetHeight+"px",n.marginTop="12px"):0<r&&(n.bottom=t.offsetHeight+"px",n.marginBottom="12px"),n.marginLeft=-Math.round(.5*i.offsetWidth)+"px",t.appendChild(i))},Wv.prototype.pointToControl=Wv.prototype.$k;var Xv={OPEN:"open",CLOSED:"closed"};function Yv(t){t=t||{},Qu.call(this,"div","H_rdo"),this.i=new Z("div","H_rdo_title"),this.a=new Qu("div","H_rdo_buttons"),this.Ka(this.i),this.Ka(this.a),this.j=A((function(t){t.target.getState()===mv.DOWN?(this.ql(t.target,!0),this.dispatchEvent(Zv)):t.target.P(mv.DOWN,!0)}),this),this.addEventListener("statechange",this.j),this.Ri(t.title||""),t.onActiveButtonChange&&this.addEventListener(Zv,t.onActiveButtonChange),t.buttonsOptions&&t.buttonsOptions.forEach((function(t){this.Vg(new yv(t))}),this)}Wv.State=Xv,u(Yv,Qu),t("H.ui.base.RadioGroup",Yv);var Zv="activebuttonchange";function gv(t){t=t||{},dv.call(this),this.i=new Wv,new Yv,this.a=this.a.bind(this),this.o=this.o.bind(this),this.s=this.s.bind(this),this.Zb(t.alignment||"bottom-right"),kv(this,t.baseLayers,t.layers)}function kv(t,e,i){var n=t.jc();t.f&&t.f.forEach((function(t){var e=t.layer;t=e&&iu(i,(function(t){return t.layer===e})),e&&!t&&n.rf(e)})),t.m=yc(e)?e:[],t.f=yc(i)?i:[],t.j&&(t.j.qa(),t.v.qa(),$v(t))}function $v(t){var e=t.Ba();t.m.forEach((function(t,i){this.j.Vg(new yv({label:aw(e,t.label),data:i,disabled:!t.layer}))}),t),t.f.forEach((function(t,i){this.v.Ka(new yv({label:aw(e,t.label),onStateChange:this.za.bind(this,t.layer),data:i,disabled:!t.layer}))}),t),t.U.wb(!(!t.f.length||!t.m.length)),x.setTimeout(function(){this.map&&(this.a(),this.C.Da(!(this.m&&this.m.length||this.f&&this.f.length)))}.bind(t))}function dw(t,e){var i,n,r={},o=e.ga(),a=window.H.service&&window.H.service.omv.Provider;if(a&&e.ga()instanceof a&&o.ua().Pe){var s=o.ua(),u=function(){var t=ew.ground.filter((function(t){return!!s.Eh("layers."+t)})),a=ew.water.filter((function(t){return!!s.Eh("layers."+t)}));t.concat(a).length&&(vh(r,s.Pe(t)),vh(r,s.Pe(a,!1,!0)),delete r.global,i=new Th(r,s.hc()),(n=o.o.qd(i)).Qg=e,this.map.Xg(n)),s.removeEventListener(Sh.CHANGE,u)}.bind(t);s.getState()!==Qh.READY?s.addEventListener(Sh.CHANGE,u):u()}}function bw(t){return iu(t.map.a.Na(),(function(t){return!!t.Qg}))}function cw(t){t=t.map.a.Na();var e=window.H.service&&window.H.service.traffic.flow.Provider;return!!e&&t.some((function(t){return t.ga()instanceof e}))}Yv.prototype.$=function(t,e){Qu.prototype.renderInternal.call(this,t,e),this.Ri(this.f,!0)},Yv.prototype.renderInternal=Yv.prototype.$,Yv.prototype.qa=function(){this.a.qa()},Yv.prototype.Ri=function(t,e){return(t!==this.f||e)&&(this.f=t,this.i.L()&&(this.i.L().innerHTML=this.f)),this},Yv.prototype.setTitle=Yv.prototype.Ri,Yv.prototype.Nn=function(){return this.f},Yv.prototype.getTitle=Yv.prototype.Nn,Yv.prototype.Vg=function(t){if(!(t instanceof yv))throw Error("PushButton expected");return t.ka(this),this.a.Ka(t),this},Yv.prototype.addButton=Yv.prototype.Vg,Yv.prototype.So=function(t){return this.a.removeChild(t),t.ka(null),this},Yv.prototype.removeButton=Yv.prototype.So,Yv.prototype.Yf=function(){return this.a.vh()},Yv.prototype.getButtons=Yv.prototype.Yf,Yv.prototype.ql=function(t,e){for(var i=this.Yf(),n=i.length;n--;)i[n].P(i[n]===t?mv.DOWN:mv.UP,e)},Yv.prototype.setActiveButton=Yv.prototype.ql,Yv.prototype.u=function(){this.removeEventListener("statechange",this.j),this.qa(),Qu.prototype.u.call(this)},u(gv,dv),t("H.ui.MapSettingsControl",gv),gv.prototype.fa=function(){var t=this.jc();t&&(t.addEventListener("tap",this.o),(t=t.a).addEventListener("add",this.a),t.addEventListener("remove",this.a),t.addEventListener("set",this.a))},gv.prototype.N=function(){var t=this.jc();t&&(t.removeEventListener("tap",this.o),(t=t.a).removeEventListener("add",this.a),t.removeEventListener("remove",this.a),t.removeEventListener("set",this.a))},gv.prototype.$=function(t,e){var i=this.Ba().translate("layers.choose");dv.prototype.renderInternal.call(this,t,e),this.fa(),this.C=new yv({tooltip:i,label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M6.7,14.6 L4.5,16 L12,20.6 L19.5,16 L17.3,14.6 L19.1,13.5 L23,16 L12,23 L1,16 L4.9,13.5 L6.7,14.6 Z M12,2 L23,9 L12,16 L1,9 L12,2 Z"></path></svg>',onStateChange:A((function(t){t.target.getState()===mv.DOWN?(this.i.P(Xv.OPEN),this.i.$k(this)):this.i.P(Xv.CLOSED)}),this)}),this.j=new Yv({title:i,onActiveButtonChange:function(){t:{for(var t=this.j.Yf(),e=t.length;e--;)if(t[e].getState()===mv.DOWN){t=t[e];break t}t=null}t=t.getData(),this.map.Kd(this.m[t].layer),this.s()}.bind(this)}),this.v=new Qu("div","H_grp"),this.U=new Z("div","H_separator"),this.Ka(this.C),this.Ka(this.i),this.i.Ka(this.j),this.i.Ka(this.U),this.i.Ka(this.v),$v(this)},gv.prototype.renderInternal=gv.prototype.$,gv.prototype.a=function(){var t=this.map.c,e=this.map.a;this.m.forEach((function(e,i){this.j.Yf()[i].P(mv[e.layer===t?"DOWN":"UP"],!0)}),this),this.f.forEach((function(t,i){i=this.v.vh()[i],t.layer?i.P(mv[-1!==e.indexOf(t.layer)?"DOWN":"UP"],!0):i.Da(!0)}),this)},gv.prototype.za=function(t,e){e.target.getState()===mv.DOWN?this.map.Xg(t):this.map.rf(t),this.s()},gv.prototype.s=function(){var t;(t=bw(this))&&(t.Qg.ga().ua().hf(t.ga().ua().vd()),this.map.rf(t),t.B(),delete t.Qg),cw(this)&&dw(this,this.map.c)};var ew={water:["water.water-labels"],ground:"road_labels continent_label island_label roads.shields roads.directions truck-restriction.signs places landuse.label".split(" ")};function aw(t,e){return/^layers?/.test(e)&&t.Kh(e)?t.translate(e):e}function fv(t){t=t||{},dv.call(this),this.f=new yv({label:'<svg xmlns="http://www.w3.org/2000/svg" class="H_icon" viewBox="0 0 24 24"><g transform="translate(1 3)"><path fill-rule="nonzero" d="M5,0 L5,2 L2,2 L2,16 L5,16 L5,18 L2,18 C0.9,18 0,17 0,15.75 L0,2.25 C0,1 0.9,0 2,0 L5,0 Z M17,0 L20,0 C21.1,0 22,1 22,2.25 L22,15.75 C22,17 21.1,18 20,18 L17,18 L17,16 L20,16 L20,2 L17,2 L17,0 Z"></path><rect width="10" height="2" x="6" y="8"></rect><rect width="2" height="10" x="10" y="4"></rect></g></svg>',onStateChange:A(this.zo,this)}),this.Ka(this.f),this.Zb(t.alignment||"right-bottom")}function fw(t,e){if(e=e||{},!(t&&t instanceof ll))throw Error("Base layer is mandatory for overview UI element");dv.call(this),this.f=new yv({label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="H_icon"><g fill-rule="evenodd" transform="translate(2 2)"><rect width="9" height="9" x="10" y="10"/><rect class="H_icon_stroke" width="18" height="18" x="1" y="1" fill="none" stroke="#000" stroke-width="2" rx="2"/></g></svg>',onStateChange:A(this.i,this)}),this.Ka(this.f),this.a=new gw(t,e.zoomDelta,e.scaleX,e.scaleY),this.Zb(e.alignment||"right-bottom"),this.Ka(this.a)}function gw(t,e,i,n){this.m=t,"number"==typeof e&&(this.Sl=e),"number"==typeof i&&(this.Wk=i),"number"==typeof n&&(this.Xk=n),Qu.call(this,"div","H_overview")}function iw(t){!t.Nd&&hw(t),t.qb("H_overview_active"),t.a.removeEventListener("mapviewchange",t.Vi,!1,t)}function hw(t,e){var i=t.a.ya.element,n=t.L().style,r=i.offsetWidth/t.Wk/10;i=i.offsetHeight/t.Xk/10;var o=t.i.style;e?(n.width=r+"em",n.height=i+"em",o.width=r+"em",o.height=i+"em"):n.width=n.height="0em",t.f.ya.resize()}function hv(t){t=t||{},dv.call(this),this.La("H_scalebar"),this.Zb(t.alignment||"right-bottom"),this.v=150,this.update=A(this.update,this),this.m=this.f=this.a=this.j=null}gv.prototype.o=function(){this.C.P(mv.UP)},gv.prototype.u=function(){gv.l.u.call(this),this.N()},u(fv,dv),t("H.ui.ZoomRectangle",fv),n=fv.prototype,n.zo=function(t){var e=this.map,i=e.ya.element;t.target.getState()===mv.DOWN?(e.addEventListener("dragstart",this.Ik,!0,this),e.addEventListener("drag",this.Jk,!0,this),e.addEventListener("dragend",this.Hk,!0,this),(t=i.ownerDocument.createElement("div")).className="H_zoom_lasso",i.appendChild(t),this.a=t):(e.removeEventListener("dragstart",this.Ik,!0,this),e.removeEventListener("drag",this.Jk,!0,this),e.removeEventListener("dragend",this.Hk,!0,this),i.removeChild(this.a))},n.Ik=function(t){var e=this.a.style,i=t.currentPointer,n=i.viewportX;i=i.viewportY,t.target===this.map&&(t.stopPropagation(),e.width="0px",e.height="0px",e.top=i+"px",e.left=n+"px",e.display="block",this.j=i,this.i=n)},n.Jk=function(t){var e=t.currentPointer,i=e.viewportX,n=e.viewportY;e=this.i;var r=this.j,o=this.a.style;t.target===this.map&&(t.stopPropagation(),t=i-e,i=n-r,o.left=e+(0>t?t:0)+"px",o.top=r+(0>i?i:0)+"px",o.width=Math.abs(t)+"px",o.height=Math.abs(i)+"px")},n.Hk=function(t){var e=this.map,i=t.currentPointer;t.target===this.map&&(t.stopPropagation(),this.a.style.display="none",e.b.$b({bounds:eg([e.Wa(this.i,this.j),e.Wa(i.viewportX,i.viewportY)])},!0))},n.$=function(t,e){dv.prototype.renderInternal.call(this,t,e),this.f.sc(this.Ba().translate("zoom.rectangle"))},fv.prototype.renderInternal=fv.prototype.$,u(fw,dv),t("H.ui.Overview",fw),fw.prototype.Kd=function(t){return this.a.Kd(t),this},fw.prototype.setBaseLayer=fw.prototype.Kd,fw.prototype.i=function(t){t.target.getState()===mv.DOWN?(hw(t=this.a,!0),t.Vi(),t.La("H_overview_active"),t.a.addEventListener("mapviewchange",t.Vi,!1,t)):iw(this.a)},fw.prototype.$=function(t,e){dv.prototype.renderInternal.call(this,t,e),this.f.L().style.float=this.Vc.match("right")?"right":"left",this.a.Ja(this.map),this.f.sc(this.Ba().translate("minimap"))},fw.prototype.renderInternal=fw.prototype.$,fw.prototype.u=function(){this.a.B(),Z.prototype.u.call(this)},u(gw,dv),gw.prototype.Kd=function(t){this.f.Kd(t)},gw.prototype.$=function(t,e){yu(t,e=ou(e,"div","H_overview_map")),this.i=e},gw.prototype.renderInternal=gw.prototype.$,n=gw.prototype,n.Sl=3,n.Wk=5,n.Xk=5,n.Ja=function(t){this.a=t,this.f=new T(this.i,this.m,{pixelRatio:this.a.$a(),engineType:this.a.ic().type}),this.f.m.L().style.display="none",this.o=this.f.b,this.j=this.a.b},n.Vi=function(t){t&&t.modifiers&t.SIZE&&hw(this,!0),(t=this.j.mb()).zoom=t.zoom-this.Sl,this.o.$b(t)},n.u=function(){gw.l.u.call(this),iw(this),this.f.B(),this.f=this.o=this.j=this.a=this.m=this.i=null},u(hv,dv),t("H.ui.ScaleBar",hv),hv.prototype.$=function(t,e){dv.prototype.renderInternal.call(this,t,e),t.innerHTML='<svg height="12" version="1.1" xmlns="http://www.w3.org/2000/svg"><polyline style="fill:none; stroke:white; stroke-width:4" points="2,2 2,10 98,10 98,2"/><polyline style="fill:none; stroke:black; stroke-width:2" points="2,2 2,10 98,10 98,2"/></svg><div style="padding: 0 0 0 10px"></div>',t.style.direction="ltr",this.j=t.firstChild,e=this.j.childNodes,this.a=e[0],this.f=e[1],this.m=t.lastChild,this.o=Au.METRIC,this.s=A((function(t){this.mc()||(this.dispatchEvent("toggleunitsystem"),t.preventDefault())}),this),this.i=A((function(t){t.preventDefault()}),this),Hu(t,"start",this.i),Hu(t,"end",this.s),this.sc(this.Ba().translate("scale.switchToImperial")),this.update()},hv.prototype.renderInternal=hv.prototype.$,hv.prototype.Ja=function(t){this.map&&this.map.removeEventListener("mapviewchange",this.update),t&&t.addEventListener("mapviewchange",this.update),dv.prototype.Ja.apply(this,arguments)},hv.prototype.setMap=hv.prototype.Ja,hv.prototype.capture=function(t,e,i){var n=this.L(),r=n.ownerDocument,o=r.createElement("canvas"),a=o.getContext("2d"),s=r.createElementNS("http://www.w3.org/2000/svg","svg"),u=r.createElementNS("http://www.w3.org/2000/svg","foreignObject"),l=jf(n,r,!1);r=parseFloat(n.offsetWidth)+1;var h=parseFloat(n.offsetHeight),c=r*t;t*=h,o.width=c,o.height=t,s.setAttribute("xmlns","http://www.w3.org/2000/svg"),s.setAttribute("width",c),s.setAttribute("height",t),s.setAttribute("viewBox","0 0 "+r+" "+h),u.setAttribute("width","100%"),u.setAttribute("height","100%"),s.appendChild(u),l.setAttribute("width","100%"),l.setAttribute("height","100%"),l.setAttribute("xmlns","http://www.w3.org/1999/xhtml");var f=window.getComputedStyle(n);"box-shadow display align-items font font-family font-size height text-shadow direction".split(" ").forEach((function(t){l.style.setProperty(t,f.getPropertyValue(t))})),u.appendChild(l),new rf("image",n=$e(s.outerHTML)).then((function(t){a.drawImage(t,0,0),e(o)}),i)},hv.prototype.capture=hv.prototype.capture,hv.prototype.kf=function(t){this.o=t,this.sc("imperial"===t?this.Ba().translate("scale.switchToMetric"):this.Ba().translate("scale.switchToImperial")),this.update()},hv.prototype.onUnitSystemChange=hv.prototype.kf,hv.prototype.update=function(){if(this.L()){var t,e=this.v,i=0,n=this.map;if(n){var r=Math.round(.5*n.ya.width),o=Math.round(.5*n.ya.height);(t=n.Wa(r,o))&&(i=Zf(t),n=Zf(n.Wa(r+1,o)),i=100*i.Za(n))}(n=i)&&(this.o===Au.IMPERIAL?n<jw?(o=n/kw,r=this.Ba().translate("scale.ft")):(o=n/jw,r=this.Ba().translate("scale.mi")):1e3>n?(o=n,r=this.Ba().translate("scale.m")):(o=n/1e3,r=this.Ba().translate("scale.km")),(o=(n=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)))/o*100)<e/5?(n*=5,o*=5):o<e/2?(n*=2,o*=2):o>e&&(n/=2,o/=2),o=Math.round(o),this.j.setAttribute("width",o),this.m.textContent=n+" "+r,this.a.points.getItem(2).x=this.f.points.getItem(2).x=this.a.points.getItem(3).x=this.f.points.getItem(3).x=o-2)}};var jw=1609.344,kw=.3048006,e;t("H.ui.buildInfo",(function(){return Ef("H-ui","1.30.3","e7e9557")})),H.__bootstrap__='var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(a,b){if(b){var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}var fa;\nif("function"==typeof Object.setPrototypeOf)fa=Object.setPrototypeOf;else{var ha;a:{var ia={hb:!0},ka={};try{ka.__proto__=ia;ha=ka.hb;break a}catch(a){}ha=!1}fa=ha?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var la=fa;da("Object.setPrototypeOf",function(a){return a||la});var p=this||self;\nfunction ma(a,b,c){a=a.split(".");c=c||p;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function na(){}\nfunction oa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";\nelse if("function"==b&&"undefined"==typeof a.call)return"object";return b}function r(a){return"function"==oa(a)}function qa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ra="closure_uid_"+(1E9*Math.random()>>>0),sa=0;function ta(a,b,c){return a.call.apply(a.bind,arguments)}\nfunction ua(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function va(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?va=ta:va=ua;return va.apply(null,arguments)}\nfunction wa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}}function t(a,b){ma(a,b,void 0)}function xa(a,b){function c(){}c.prototype=b.prototype;a.W=b.prototype;a.prototype=new c;a.prototype.constructor=a};function x(){}t("H.util.ICache",x);x.prototype.add=function(){};x.prototype.add=x.prototype.add;x.prototype.get=function(){};x.prototype.get=x.prototype.get;x.prototype.sa=function(){};x.prototype.drop=x.prototype.sa;x.prototype.forEach=function(){};x.prototype.forEach=x.prototype.forEach;x.prototype.U=function(){};x.prototype.removeAll=x.prototype.U;x.prototype.ca=function(){};x.prototype.registerOnDrop=x.prototype.ca;x.prototype.qa=function(){};x.prototype.deRegisterOnDrop=x.prototype.qa;function ya(){var a=za,b;for(b in a)return!1;return!0}function Aa(a){var b={},c;for(c in a)b[c]=a[c];return b}var Ba="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ca(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Ba.length;f++)c=Ba[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var y=this;function Da(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Da);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}xa(Da,Error);Da.prototype.name="CustomError";var Ea=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Fa=va,Ga=String,Ha=y.Object.freeze||function(a){return a},z=self.eval("undefined"),Ia=self.eval("null");function La(a){return Ga(a).split(","!==z?",":" ")}var Ma="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Na(a,b,c,d){if(!(b=a instanceof b)&&c)throw new A(c,d,void 0!==z?void 0:a);return b}function Oa(a,b,c,d){var e;if(!(e="Array"===Pa(a))&&b)throw new A(b,c,d!==z?d:a);return e}\nt("H.lang.isArray",function(a,b,c,d){return Oa(a,b,c,d)});function Qa(a){return"string"===typeof a}t("H.lang.isString",Qa);var Ra=isNaN;function Sa(a){return a===+a}t("H.lang.isNumber",Sa);t("H.lang.isInteger",Number.isInteger?Number.isInteger:function(a){return"number"===typeof a&&0===a%1});function Pa(a){var b=Object[Ma[0]][Ma[6]].call(a).match(/^\\[object (\\w+)\\]$/);return b?b[1]:typeof a}var Ta=[];0>Ta.indexOf(Ta)&&Ta.push(Ta);\nfunction Ua(a,b,c,d){var e="",f=2>arguments.length,g;f&&(b={H:y.H},c="",d=Ta.slice());Va(b,!0,function(h,k){try{if(g=h[k],k=Wa(h,g),!(qa(g)&&g.window===g&&g.self===g||qa(g)&&0<g.nodeType&&r(g.cloneNode))&&qa(g)){if(g===a)return e=c+"."+k,!0;if(0>d.indexOf(g)&&(d.push(g),e=Ua(a,g,c+"."+k,d)))return!0}}catch(m){}});f&&(e=e?e.substr(1).replace("."+Ma[0]+".","#"):"~"+(r(a)?Xa(a)+"()":Pa(a)));return e}\nfunction Wa(a,b){var c=[];Va(a,!1,function(d,e){d[e]===b&&c.push(e)});return c.sort(Ya)[0]}function Ya(a,b){return b.length-a.length}var Za=Object[Ma[0]][Ma[2]];function Va(a,b,c){var d;if(a){for(e in a)if((!b||Za.call(a,e))&&c(a,e,!0))return;for(d=Ma.length;d--;){var e=Ma[d];if((!b||Za.call(a,e))&&c(a,e,!1))break}}}function Xa(a){return(a=/^\\s*function ([^\\( ]+)/.exec(a))?a[1]:"anonymous"}function $a(a,b,c){c[b]="#"+b};function B(a,b,c){this.g=[];b&&this.ca(b);if(c&&!r(c))throw new A(B,2,c);this.b=0;this.filter=c;this.a={};this.f=this.c=null;this.Ia(a)}t("H.util.Cache",B);B.prototype.add=function(a,b,c){var d,e;c=+c;if(!Sa(c)||0>c)throw new A(this.add,2,c);a=String(a);if(e=this.filter?this.filter(a,b,c):!0)(d=this.a[a])?(d.data!==b&&db(this,d),this.b+=c-d.size,d.size=c,d.data=b,eb(this,d)):this.a[a]=fb(this,{id:a,data:b,size:c,A:null,F:null},this.c),gb(this);return e};B.prototype.add=B.prototype.add;\nB.prototype.ca=function(a){if(!r(a))throw new A(this.ca,0,a);this.g.push(a)};B.prototype.registerOnDrop=B.prototype.ca;B.prototype.qa=function(a){this.g=this.g.filter(function(b){return b!==a})};B.prototype.deRegisterOnDrop=B.prototype.qa;B.prototype.get=function(a,b){return(a=b?this.a[a]:eb(this,this.a[a]))&&a.data};B.prototype.get=B.prototype.get;B.prototype.sa=function(a){var b;(b=this.a[a])&&hb(this,b,!0)};B.prototype.drop=B.prototype.sa;\nB.prototype.forEach=function(a,b,c){var d;for(d in this.a){var e=this.a[d];(c?c(d,e.data,e.size):1)&&a.call(b,d,e.data,e.size)}};B.prototype.forEach=B.prototype.forEach;B.prototype.U=function(a){var b;for(b in this.a){var c=this.a[b];(a?a(b,c.data,c.size):1)&&hb(this,this.a[b],!0)}};B.prototype.removeAll=B.prototype.U;B.prototype.Ia=function(a){if(!(0<+a))throw new A(B.prototype.Ia,0,a);this.o=+a;gb(this);return this};B.prototype.setMaxSize=B.prototype.Ia;B.prototype.Bb=function(){return this.o};\nB.prototype.getMaxSize=B.prototype.Bb;B.prototype.xb=function(){return this.b};B.prototype.getCurrentSize=B.prototype.xb;function eb(a,b){b&&(a.c=fb(a,b,a.c));return b}function gb(a){for(;a.b>a.o&&a.f;)hb(a,a.f,!0)}function fb(a,b,c){if(c!==b){(b.A||b.F)&&hb(a,b,!1);if(b.A=c)b.F=c.F,c.F=b;b.F||(a.c=b);b.A||(a.f=b);a.b+=b.size}return b}function hb(a,b,c){var d=b.F,e=b.A;if(d||e||b==a.c&&b==a.f)d?d.A=e:a.c=e,e?e.F=d:a.f=d,a.b-=b.size,c&&(delete a.a[b.id],db(a,b));b.A=b.F=null}\nfunction db(a,b){for(var c=a.g.length;c--;)a.g[c].call(a,b.id,b.data,b.size)};function C(){}t("H.service.extension.dataView.ITable",C);C.prototype.ya=function(){};C.prototype.getMeta=C.prototype.ya;C.prototype.za=function(){};C.prototype.getRowCount=C.prototype.za;C.prototype.ja=function(){};C.prototype.getRow=C.prototype.ja;C.prototype.D=function(){};C.prototype.getColumnNames=C.prototype.D;C.prototype.xa=function(){};C.prototype.getColumn=C.prototype.xa;C.prototype.s=function(){};C.prototype.getCell=C.prototype.s;C.prototype.concat=function(){};C.prototype.concat=C.prototype.concat;function ib(){}t("H.service.extension.dataView.IRow",ib);ib.prototype.D=function(){};ib.prototype.getColumnNames=ib.prototype.D;ib.prototype.s=function(){};ib.prototype.getCell=ib.prototype.s;ib.prototype.Aa=function(){};ib.prototype.getTable=ib.prototype.Aa;function jb(a,b){this.a=a;this.b=b}t("H.service.extension.dataView.ObjRow",jb);jb.prototype.D=function(){return this.a.D()};jb.prototype.getColumnNames=jb.prototype.D;jb.prototype.s=function(a){return this.a.s(this.b,a)};jb.prototype.getCell=jb.prototype.s;jb.prototype.Aa=function(){return this.a};jb.prototype.getTable=jb.prototype.Aa;function kb(){}t("H.service.extension.dataView.IColumn",kb);kb.prototype.s=function(){};kb.prototype.getCell=kb.prototype.s;function lb(a,b){this.b=a;this.a=b}t("H.service.extension.dataView.ObjColumn",lb);lb.prototype.s=function(a){return this.b.s(a,this.a)};lb.prototype.getCell=lb.prototype.s;function A(a,b,c){var d=arguments.length;b=b!==z?+b:b;if(b!==z){var e=(e=/^.*?\\(([^\\)]+)/.exec((""+a).replace(/(\\/\\*([\\s\\S]*?)\\*\\/)|(\\/\\/(.*)$)/gm,"")))?La(e[1].replace(/\\s+/g,"")):[];e.forEach($a);e=e[b]||"#"+b}var f=a?Ua(a):"";d=2<d?Ga(c):"";if(e||d)f+=" (Argument "+(e||"")+(d?" "+d:"")+")";d=Error(f);Object.setPrototypeOf(d,A.prototype);return d}xa(A,Error);t("H.lang.InvalidArgumentError",A);A.prototype.name="InvalidArgumentError";function D(a,b,c){var d;b=b||(a&&a.length?Object.keys(a[0]):z);this.G=a;if(b)for(this.O=b,this.pa=a=Object.create(Ia,void 0),d=b.length;d--;)a[b[d]]=!0;c!==z&&(this.Ca=c)}t("H.service.extension.dataView.ObjTable",D);l=D.prototype;l.Ca=z;l.G=z;l.O=z;l.pa=z;l.ya=function(){return this.Ca};D.prototype.getMeta=D.prototype.ya;D.prototype.za=function(){return this.G?this.G.length:0};D.prototype.getRowCount=D.prototype.za;D.prototype.ja=function(a){var b=this.G;return b&&b[a]?new jb(this,a):z};\nD.prototype.getRow=D.prototype.ja;D.prototype.D=function(){return this.O||mb};D.prototype.getColumnNames=D.prototype.D;D.prototype.xa=function(a){return this.pa[a]?new lb(this,a):z};D.prototype.getColumn=D.prototype.xa;D.prototype.s=function(a,b){var c=this.G;return(a=c&&this.pa[b]&&c[a])&&a[b]};D.prototype.getCell=D.prototype.s;\nD.prototype.concat=function(){var a=arguments.length,b,c=this.O,d=""+this.O,e=(this.G||[]).slice();for(b=0;b<a;b++){var f=arguments[b];if(!(f instanceof D))throw new A(this.concat,b);if(f.G){if(c&&""+f.O!==d)throw new A(this.concat,b,"Incompatible columns!");e=e.concat(f.G)}}return new D(e,this.O,this.Ca)};D.prototype.concat=D.prototype.concat;function E(a,b){this.x=+a;this.y=+b}t("H.math.Point",E);E.prototype.set=E;E.prototype.set=E.prototype.set;E.prototype.clone=function(a){a?(a.x=this.x,a.y=this.y):a=new E(this.x,this.y);return a};E.prototype.clone=E.prototype.clone;E.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};E.prototype.add=E.prototype.add;E.prototype.sub=function(a){this.x-=a.x;this.y-=a.y;return this};E.prototype.sub=E.prototype.sub;E.prototype.scale=function(a,b){this.x*=a;this.y*=void 0===b?a:b;return this};\nE.prototype.scale=E.prototype.scale;E.prototype.round=function(){this.x=nb(this.x);this.y=nb(this.y);return this};E.prototype.round=E.prototype.round;E.prototype.floor=function(){this.x=ob(this.x);this.y=ob(this.y);return this};E.prototype.floor=E.prototype.floor;E.prototype.ceil=function(){this.x=pb(this.x);this.y=pb(this.y);return this};E.prototype.ceil=E.prototype.ceil;E.prototype.I=function(a){return!(!a||this.x!==a.x||this.y!==a.y)};E.prototype.equals=E.prototype.I;\nE.prototype.Cb=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a;if(c||d){var f=((this.x-a.x)*c+(this.y-a.y)*d)/(c*c+d*d);0>=f?e=a:1<=f?e=b:e=new E(a.x+f*c,a.y+f*d)}return e};E.prototype.getNearest=E.prototype.Cb;E.prototype.ra=function(a){return qb(rb(this.x-a.x,2)+rb(this.y-a.y,2))};E.prototype.distance=E.prototype.ra;E.fromIPoint=function(a){if(!a)throw Error("invalid argument");return a instanceof E?a:new E(a.x,a.y)};var F=Math,sb=F.min,tb=F.max,nb=F.round,ob=F.floor,pb=F.ceil,ub=F.abs,vb=F.log,qb=F.sqrt,rb=F.pow,wb=F.exp,xb=F.sin,yb=F.asin,zb=F.cos,Ab=F.tan,Bb=F.atan,Cb=F.atan2,Db=F.LN2,I=F.PI,Eb=I/2,Gb=I/4,Hb=2*I,Ib=3*I,Jb=I/180,Kb=180/I,Lb=1/0;rb(-2,53);function Mb(a,b){var c;return 0>(c=a%b)===0>b?c:c+b}t("H.math.normalize",function(a,b,c){b-=c=c||0;a-=c;return a-ob(a/b)*b+c});function Nb(a,b,c){return a>c?c:a<b?b:a}t("H.math.clamp",Nb);function Ob(a,b,c){return b<c?a>=b&&a<=c:a>=c&&a<=b}\nfunction Pb(a,b,c,d,e,f){return qb(rb((a-e)*(d-f)-(b-f)*(c-e),2)/(rb(c-e,2)+rb(d-f,2)))}var Qb={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};t("H.math.CoverType",Qb);\nfunction Rb(a,b,c){for(var d=c.length,e=d,f,g,h,k,m=c[0],n=0,q=0,u=0;1!=n&&1<e;){g=c[--e];f=c[--e];k=c[e?e-1:(d+(e-1))%d];h=c[e?e-2:(d+(e-2))%d];if(f>=a&&f<=a&&g>=b&&g<=b||h>=a&&h<=a&&k>=b&&k<=b)n=1;else if(!n&&f===a)h===a&&(g<b&&k>b||g>b&&k<b)||(m<=a&&h>a||m>=a&&h<a)&&(g>=b?++q:++u),n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0;else if(!n&&Ob(a,f,h)){if(f<a&&h>a||f>a&&h<a)m=g+(a-f)/(h-f)*(k-g),q+=m>b,u+=m<b;n=Ob(b,g,k)&&0>=Pb(a,b,f,g,h,k)?2:0}m=f}!n&&0!==u&&0!==q%2&&(n=3);return n}\nfunction Sb(a,b){return Rb(a.x,a.y,b)!==Qb.NONE}t("H.math.isPointInsidePolygon",Sb);function Tb(a){for(var b=a.length,c=new Float64Array(2*b),d=b&&a[0].x!==z;b--;){var e=a[b],f=b<<1;c[f]=d?e.x:e[0];c[f+1]=d?e.y:e[1]}return c}t("H.math.flatten",Tb);function Ub(a,b,c,d,e,f){var g,h,k=a.length,m,n;if(k)for(g=[];k--;){var q=a[k];var u=q.length;var J=0;for(m=1;m<u;m++)if(n=Vb(q[m-1],q[m],c,b,d,e)){var M=n[0];var v=n[1];J&&J.I(M)?h.push(v):g.push(h=n);J=v;f&&(m=u,k=0)}}else g=a;return g}t("H.math.clipping.clipStrips",Ub);\nfunction Vb(a,b,c,d,e,f){var g=a.x;a=-a.y;var h=b.x;b=-b.y;c=-c;f=-f;if(g>h){if(h>e||g<d)return;var k=g;var m=a;g=h;a=b;h=k;b=m;k=1}else if(g>e||h<d)return;if(a>b){if(b>c||a<f)return;var n=1;a=-a;b=-b;m=f;f=-c;c=-m}else if(a>c||b<f)return;if(g<d){if((a+=(d-g)*(b-a)/(h-g))>c)return;g=d}if(a<f){if((g+=(f-a)*(h-g)/(b-a))>e)return;a=f}h>e&&(b=a+(e-g)*(b-a)/(h-g),h=e);b>c&&(h=g+(c-a)*(h-g)/(b-a),b=c);n&&(a=-a,b=-b);return k?[new E(h,-b),new E(g,-a)]:[new E(g,-a),new E(h,-b)]}\nfunction Wb(a,b,c){a=Xb(a,!0);b=Xb(b,!1);var d,e;var f={};var g=d=1;switch(~~(c||0)){case 1:g=d=0;break;case 2:d=0;g=1;break;case 3:d=1,g=0}c=d;var h=g;if(b&&a){b.ia=Yb(b.x,b.y,null,Zb(b));a.ia=Yb(a.x,a.y,null,Zb(a));for(g=b;g.next;g=g.next)if(!g.C)for(d=a;d.next;d=d.next)if(!d.C){var k=$b(g.next);var m=$b(d.next);if(e=ac(g,k,d,m,f)){e=f.kb;var n=f.lb;var q=f.kc;var u=f.lc;e=Yb(q,u,null,null,null,null,!0,0,0,e);bc(e,g,k);k=Yb(q,u,null,null,null,null,!0,0,0,n);bc(k,d,m);e.Da=k;k.Da=e}}f=Sb(b,cc(a));\nc&&(f=!f);for(g=b;g;g=g.next)g.C&&(g.ta=f,f=!f);f=Sb(a,cc(b));h&&(f=!f);for(d=a;d.next;d=d.next)d.C&&(d.ta=f,f=!f);dc(b);for(dc(a);(a=ec(b))!=b;){for(c=null;!a.na;a=a.Da){for(f=a.ta;;){c=Yb(a.x,a.y,c);c.artificial=a.C||a.Ob;a.na=1;a=f?a.next:a.u;if(!a)break;if(a.C){a.na=1;break}}if(!a)break}c.Xa=J;var J=c}return J}}t("H.math.clipping.clipPolygon",Wb);\nfunction Yb(a,b,c,d,e,f,g,h,k,m){a={x:a,y:b,next:c||null,u:d||null,Xa:e||null,Da:f||null,C:!!g,ta:h||0,na:k||0,alpha:m||0};d&&(a.u.next=a);c&&(a.next.u=a);return a}function $b(a){for(;a&&a.C;)a=a.next;return a}function Zb(a){if(a)for(;a.next;)a=a.next;return a}function ec(a){var b=a;if(b){do b=b.next;while(b!=a&&(!b.C||b.C&&b.na))}return b}function dc(a){var b=Zb(a);b.u.next=a;a.u=b.u}\nfunction ac(a,b,c,d,e){var f,g=b.x-a.x,h=b.y-a.y;var k=d.x-c.x;var m=d.y-c.y;var n=g*m-h*k;if(!n)return 0;k=((c.x-a.x)*m-(c.y-a.y)*k)/n;n=(h*(c.x-a.x)-g*(c.y-a.y))/n;if(0>k||1<k||0>n||1<n)return 0;0===k?f=a:1===k?f=b:0===n?f=c:1===n&&(f=d);if(f)return f.x+=2.480549651603763E-5,f.y+=7.321997314118067E-5,f.ia&&(f.ia.x=f.x,f.ia.y=f.y),ac(a,b,c,d,e);e.kc=a.x+k*g;e.lc=a.y+k*h;e.kb=k;e.lb=n;return 1}function cc(a){for(var b=[];a;)b.push(a.x,a.y),a=a.next;return b}\nfunction bc(a,b,c){for(b=b.next;b!==c&&b.alpha<=a.alpha;)b=b.next;a.next=b;a.u=b.u;a.next.u=a;a.u.next=a}function Xb(a,b){for(var c,d=null,e=0,f=a.length;e<f;e++){c=Yb(a[e].x,a[e].y,d);c.Ob=b;if(c.next=d)d.u=c;d=c}return d};function fc(a,b){var c=[];a&&c.push(Ua(a));1<arguments.length&&c.push(""+b);c=Error(c.join(" "));Object.setPrototypeOf(c,fc.prototype);return c}xa(fc,Error);t("H.lang.IllegalOperationError",fc);fc.prototype.name="IllegalOperationError";function gc(){if(!Qa("STATIC_DB"))throw new A(this.constructor,0);this.o=y.indexedDB||y.jc||y.Rb||y.Sb;if(!this.o)throw new fc(this.constructor,"This browser does not support IndexedDB");this.a=[];this.c=[];this.g=Fa(this.g,this)}var hc,ic;gc.prototype.get=function(a,b,c){var d;if(!Qa(a)&&!Sa(a))throw new A(this.get,0);if(!r(b))throw new A(this.get,1);jc(this,function(e){d=e.get(a);kc(d,b,c)},c);return{cancel:function(){d&&(d.onsuccess=lc)}}};\ngc.prototype.g=function(){var a=this.b.result;a.objectStoreNames.contains("data")||a.createObjectStore("data")};\nfunction mc(a,b,c){if(a.b)a.a?(a.a.push(b),c&&a.c.push(c)):a.f?c&&c(a.f):b(a.b.result);else{a.b=a.o.open(nc+"STATIC_DB",1);a.b.onupgradeneeded=a.g;var d=a.b.onerror=function(){clearTimeout(a.v);a.f=this.error;a.c.forEach(function(e){e(a.f)});a.a=a.c=null};a.v=setTimeout(function(){d.call({error:Error("DbOpenTimeoutError")})},500);a.b.onsuccess=function(){clearTimeout(a.v);a.a?(a.a.forEach(function(e){e(this.result)},this),a.a=a.c=null):(a.b=a.f=null,a.a=[],a.c=[])};a.a.push(b);c&&a.c.push(c)}}\nfunction jc(a,b,c){mc(a,function(d){d=d.transaction(["data"],"readwrite");b(d.objectStore("data"))},c)}function kc(a,b,c){b&&(a.onsuccess=function(){b(this.result)});c&&(a.onerror=function(){c(this.error)})}t("H.util.IndexedDBStorage.getInstance",function(){hc||(hc=new gc);return hc});var nc="H_";\nt("H.util.IndexedDBStorage.isSupported",function(){if(ic===z)if("file:"===window.location.protocol&&-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&128<=window.location.href.length)ic=!1;else{var a=y.indexedDB||y.jc||y.Rb||y.Sb;var b=nc+"TEST_DB";try{var c=a&&a.open(b,1)}catch(d){}ic=!!c&&null===c.onupgradeneeded;c&&a.deleteDatabase&&a.deleteDatabase(b)}return ic});function K(){0!=oc&&(pc[this[ra]||(this[ra]=++sa)]=this);this.c=this.c;this.a=this.a}var oc=0,pc={};K.prototype.c=!1;K.prototype.B=function(){if(!this.c&&(this.c=!0,this.P(),0!=oc)){var a=this[ra]||(this[ra]=++sa);if(0!=oc&&this.a&&0<this.a.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass\' method.");delete pc[a]}};\nK.prototype.N=function(a,b){this.c?void 0!==b?a.call(b):a():(this.a||(this.a=[]),this.a.push(void 0!==b?va(a,b):a))};K.prototype.P=function(){if(this.a)for(;this.a.length;)this.a.shift()()};function L(a,b){this.type=a;this.currentTarget=this.target=b;this.a=!1;this.Za=!0}L.prototype.stopPropagation=function(){this.a=!0};L.prototype.c=function(){this.Za=!1};t("H.util.Event",L);L.prototype.stopPropagation=L.prototype.stopPropagation;L.prototype.stopPropagation=L.prototype.stopPropagation;L.prototype.CAPTURING_PHASE=1;L.prototype.CAPTURING_PHASE=L.prototype.CAPTURING_PHASE;L.prototype.AT_TARGET=2;L.prototype.AT_TARGET=L.prototype.AT_TARGET;L.prototype.BUBBLING_PHASE=3;L.prototype.BUBBLING_PHASE=L.prototype.BUBBLING_PHASE;L.prototype.eventPhase=0;L.prototype.eventPhase=L.prototype.eventPhase;function qc(a,b,c){qc.W.constructor.call(this,a,c);this.data=b}xa(qc,L);t("H.util.DataEvent",qc);function rc(a,b,c){rc.W.constructor.call(this,a,c);this.message=b}xa(rc,L);t("H.util.ErrorEvent",rc);function sc(a,b){this.c=a;this.f=b;this.b=0;this.a=null}sc.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next;a.next=null}else a=this.c();return a};function tc(a,b){a.f(b);100>a.b&&(a.b++,b.next=a.a,a.a=b)};function uc(){this.b=this.a=null}var wc=new sc(function(){return new vc},function(a){a.reset()});uc.prototype.add=function(a,b){var c=wc.get();c.set(a,b);this.b?this.b.next=c:this.a=c;this.b=c};function xc(){var a=yc,b=null;a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null);return b}function vc(){this.next=this.b=this.a=null}vc.prototype.set=function(a,b){this.a=a;this.b=b;this.next=null};vc.prototype.reset=function(){this.next=this.b=this.a=null};var Bc=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function Cc(a,b){return a<b?-1:a>b?1:0};var Dc;a:{var Ec=p.navigator;if(Ec){var Fc=Ec.userAgent;if(Fc){Dc=Fc;break a}}Dc=""}function Gc(a){return-1!=Dc.indexOf(a)};function Hc(a,b){this.b=a===Ic&&b||"";this.a=Jc}var Jc={},Ic={},Kc=new Hc(Ic,"");function Lc(a,b){this.b=a===Mc&&b||"";this.a=Nc}var Nc={},Mc={};function Oc(){this.a="";this.b=Pc}function Qc(){var a=Rc;if(a instanceof Oc&&a.constructor===Oc&&a.b===Pc)return a.a;oa(a);return"type_error:SafeHtml"}var Pc={};function Sc(a){var b=new Oc;b.a=a;return b}Sc("<!DOCTYPE html>");var Rc=Sc("");Sc("<br>");function Tc(a){var b=new Lc(Mc,Kc instanceof Hc&&Kc.constructor===Hc&&Kc.a===Jc?Kc.b:"type_error:Const");b instanceof Lc&&b.constructor===Lc&&b.a===Nc?b=b.b:(oa(b),b="type_error:TrustedResourceUrl");a.src=b.toString()};function Uc(a){Uc[" "](a);return a}Uc[" "]=na;var Vc=Gc("Opera"),Wc=Gc("Trident")||Gc("MSIE"),Xc=Gc("Edge"),Yc=Gc("Gecko")&&!(-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge"))&&!(Gc("Trident")||Gc("MSIE"))&&!Gc("Edge"),Zc=-1!=Dc.toLowerCase().indexOf("webkit")&&!Gc("Edge");function $c(){var a=p.document;return a?a.documentMode:void 0}var ad;\na:{var bd="",cd=function(){var a=Dc;if(Yc)return/rv:([^\\);]+)(\\)|;)/.exec(a);if(Xc)return/Edge\\/([\\d\\.]+)/.exec(a);if(Wc)return/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a);if(Zc)return/WebKit\\/(\\S+)/.exec(a);if(Vc)return/(?:Version)[ \\/]?(\\S+)/.exec(a)}();cd&&(bd=cd?cd[1]:"");if(Wc){var dd=$c();if(null!=dd&&dd>parseFloat(bd)){ad=String(dd);break a}}ad=bd}var ed={},fd;fd=p.document&&Wc?$c():void 0;function gd(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function hd(a){p.setTimeout(function(){throw a;},0)}var id;\nfunction jd(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Gc("Presto")&&(a=function(){var e=gd("IFRAME");e.style.display="none";Tc(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Qc());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=va(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},\nthis);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!Gc("Trident")&&!Gc("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Oa;c.Oa=null;e()}};return function(e){d.next={Oa:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in gd("SCRIPT")?function(e){var f=gd("SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=null;\nf.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){p.setTimeout(e,0)}};function kd(a,b){ld||md();nd||(ld(),nd=!0);yc.add(a,b)}var ld;function md(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);ld=function(){a.then(od)}}else ld=function(){var b=od;!r(p.setImmediate)||p.Window&&p.Window.prototype&&!Gc("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(id||(id=jd()),id(b)):p.setImmediate(b)}}var nd=!1,yc=new uc;function od(){for(var a;a=xc();){try{a.a.call(a.b)}catch(b){hd(b)}tc(wc,a)}nd=!1};function pd(a){this.a=qd;this.v=void 0;this.f=this.b=this.c=null;this.g=this.o=!1;if(a!=na)try{var b=this;a.call(void 0,function(c){rd(b,sd,c)},function(c){rd(b,td,c)})}catch(c){rd(this,td,c)}}var qd=0,sd=2,td=3;function ud(){this.next=this.c=this.b=this.f=this.a=null;this.g=!1}ud.prototype.reset=function(){this.c=this.b=this.f=this.a=null;this.g=!1};var vd=new sc(function(){return new ud},function(a){a.reset()});function wd(a,b,c){var d=vd.get();d.f=a;d.b=b;d.c=c;return d}\nfunction xd(a,b,c){yd(a,b,c,null)||kd(wa(b,a))}function zd(a){return new pd(function(b,c){var d=a.length,e=[];if(d)for(var f=function(m,n){d--;e[m]=n;0==d&&b(e)},g=function(m){c(m)},h=0,k;h<a.length;h++)k=a[h],xd(k,wa(f,h),g);else b(e)})}function Ad(){var a,b,c=new pd(function(d,e){a=d;b=e});return new Bd(c,a,b)}pd.prototype.then=function(a,b,c){return Cd(this,r(a)?a:null,r(b)?b:null,c)};pd.prototype.$goog_Thenable=!0;\npd.prototype.cancel=function(a){if(this.a==qd){var b=new Dd(a);kd(function(){Ed(this,b)},this)}};function Ed(a,b){if(a.a==qd)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.g||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==qd&&1==d?Ed(c,b):(f?(d=f,d.next==c.f&&(c.f=d),d.next=d.next.next):Fd(c),Gd(c,e,td,b)))}a.c=null}else rd(a,td,b)}function Hd(a,b){a.b||a.a!=sd&&a.a!=td||Id(a);a.f?a.f.next=b:a.b=b;a.f=b}\nfunction Cd(a,b,c,d){var e=wd(null,null,null);e.a=new pd(function(f,g){e.f=b?function(h){try{var k=b.call(d,h);f(k)}catch(m){g(m)}}:f;e.b=c?function(h){try{var k=c.call(d,h);void 0===k&&h instanceof Dd?g(h):f(k)}catch(m){g(m)}}:g});e.a.c=a;Hd(a,e);return e.a}pd.prototype.Ea=function(a){this.a=qd;rd(this,sd,a)};pd.prototype.Ga=function(a){this.a=qd;rd(this,td,a)};\nfunction rd(a,b,c){a.a==qd&&(a===c&&(b=td,c=new TypeError("Promise cannot resolve to itself")),a.a=1,yd(c,a.Ea,a.Ga,a)||(a.v=c,a.a=b,a.c=null,Id(a),b!=td||c instanceof Dd||Jd(a,c)))}function yd(a,b,c,d){if(a instanceof pd)return Hd(a,wd(b||na,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(g){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;if(qa(a))try{var f=a.then;if(r(f))return Kd(a,f,b,c,d),!0}catch(g){return c.call(d,g),!0}return!1}\nfunction Kd(a,b,c,d,e){function f(k){h||(h=!0,d.call(e,k))}function g(k){h||(h=!0,c.call(e,k))}var h=!1;try{b.call(a,g,f)}catch(k){f(k)}}function Id(a){a.o||(a.o=!0,kd(a.T,a))}function Fd(a){var b=null;a.b&&(b=a.b,a.b=b.next,b.next=null);a.b||(a.f=null);return b}pd.prototype.T=function(){for(var a;a=Fd(this);)Gd(this,a,this.a,this.v);this.o=!1};\nfunction Gd(a,b,c,d){if(c==td&&b.b&&!b.g)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Ld(b,c,d);else try{b.g?b.f.call(b.c):Ld(b,c,d)}catch(e){Md.call(null,e)}tc(vd,b)}function Ld(a,b,c){b==sd?a.f.call(a.c,c):a.b&&a.b.call(a.c,c)}function Jd(a,b){a.g=!0;kd(function(){a.g&&Md.call(null,b)})}var Md=hd;function Dd(a){Da.call(this,a)}xa(Dd,Da);Dd.prototype.name="cancel";function Bd(a,b,c){this.a=a;this.b=b;this.reject=c};function Nd(a,b,c){this.type=a;this.data=b;this.a=Ad();this.Va=Fa(this.Va,this);this.reject=Fa(this.reject,this);this.priority=Od;c!==z&&(this.priority=c);this.b().add(this)}var Od=1,Pd={nc:0,oc:Od,mc:2};l=Nd.prototype;l.then=function(a,b,c){return this.a.a.then(a,b,c)};l.Va=function(a){this.$=3;this.a.b(a)};l.reject=function(a){this.$=5;this.a.reject(a)};l.$=0;\nl.cancel=function(){if(3>this.$){this.c();var a=this.b(),b=this.priority,c=a.a[b].indexOf(this);-1<c?a.a[b].splice(c,1):this.Na&&a.ea.ob(this.Na);this.$=4}};function Qd(a){var b;this.a={};for(b in Pd)this.a[Pd[b]]=[];this.ea=a;this.ea.addEventListener("allocatable",Fa(this.b,this))}t("H.util.JobManager",Qd);var Rd=Object.keys(Pd).map(function(a){return Pd[a]}).sort().reverse();Qd.prototype.add=function(a){Na(a,Nd,this.add,0);this.a[a.priority].push(a);this.b()};Qd.prototype.contains=function(a){return-1<this.a[a.priority].indexOf(a)};\nQd.prototype.b=function(){Rd.forEach(function(a){this.a[a]=this.a[a].filter(function(b){var c;if((c=this.ea.pc(b))!==Ia){var d=Fa(this.ea.ob,this.ea,c,b);b.Na=c;b.then(d,d);b.$=b.qc(c)?1:5}else return!0},this)},this)};function Sd(a,b,c){var d=[],e=arguments.length;a&&d.push(Ua(a));1<e&&(e=2<e&&Oa(c,void 0,void 0,void 0)?" out of ["+c[0]+"..."+c[1]+"]":"",d.push("("+b+e+")"));d=Error(d.join(" "));Object.setPrototypeOf(d,Sd.prototype);return d}xa(Sd,Error);t("H.lang.OutOfRangeError",Sd);Sd.prototype.name="OutOfRangeError";var Td="closure_listenable_"+(1E6*Math.random()|0),Ud=0;function Vd(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.ka=e;this.key=++Ud;this.V=this.fa=!1}function Wd(a){a.V=!0;a.listener=null;a.proxy=null;a.src=null;a.ka=null};function Xd(a){this.src=a;this.a={};this.b=0}Xd.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var g=Yd(a,b,d,e);-1<g?(b=a[g],c||(b.fa=!1)):(b=new Vd(b,this.src,f,!!d,e),b.fa=c,a.push(b));return b};function Zd(a,b){var c=b.type;if(c in a.a){var d=a.a[c],e=Ea(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(Wd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}\nXd.prototype.U=function(a){a=a&&a.toString();var b=0,c;for(c in this.a)if(!a||c==a){for(var d=this.a[c],e=0;e<d.length;e++)++b,Wd(d[e]);delete this.a[c];this.b--}return b};function Yd(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.V&&f.listener==b&&f.capture==!!c&&f.ka==d)return e}return-1};var $d;($d=!Wc)||($d=9<=Number(fd));var ae=$d,be;\nif(be=Wc){var ce;if(Object.prototype.hasOwnProperty.call(ed,"9"))ce=ed["9"];else{for(var de=0,ee=Bc(String(ad)).split("."),fe=Bc("9").split("."),ge=Math.max(ee.length,fe.length),he=0;0==de&&he<ge;he++){var ie=ee[he]||"",je=fe[he]||"";do{var ke=/(\\d*)(\\D*)(.*)/.exec(ie)||["","","",""],le=/(\\d*)(\\D*)(.*)/.exec(je)||["","","",""];if(0==ke[0].length&&0==le[0].length)break;de=Cc(0==ke[1].length?0:parseInt(ke[1],10),0==le[1].length?0:parseInt(le[1],10))||Cc(0==ke[2].length,0==le[2].length)||Cc(ke[2],le[2]);\nie=ke[3];je=le[3]}while(0==de)}ce=ed["9"]=0<=de}be=!ce}var me=be,ne=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{p.addEventListener("test",na,b),p.removeEventListener("test",na,b)}catch(c){}return a}();function oe(a,b){L.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.b=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Yc){a:{try{Uc(b.nodeName);var e=!0;break a}catch(f){}e=\n!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=\na.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:pe[a.pointerType]||"";this.b=a;a.defaultPrevented&&this.c()}}xa(oe,L);var pe={2:"touch",3:"pen",4:"mouse"};oe.prototype.stopPropagation=function(){oe.W.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};\noe.prototype.c=function(){oe.W.c.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,me)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var qe="closure_lm_"+(1E6*Math.random()|0),re={},se=0;function te(a,b,c,d,e){if(d&&d.once)ue(a,b,c,d,e);else if("array"==oa(b))for(var f=0;f<b.length;f++)te(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!1,qa(d)?!!d.capture:!!d,e):we(a,b,c,!1,d,e)}\nfunction we(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=qa(e)?!!e.capture:!!e,h=xe(a);h||(a[qe]=h=new Xd(a));c=h.add(b,c,d,g,f);if(!c.proxy){d=ye();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ne||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ze(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");se++}}\nfunction ye(){var a=Ae,b=ae?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function ue(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)ue(a,b[f],c,d,e);else c=ve(c),a&&a[Td]?a.b.add(String(b),c,!0,qa(d)?!!d.capture:!!d,e):we(a,b,c,!0,d,e)}\nfunction Ce(a,b,c,d,e){if("array"==oa(b))for(var f=0;f<b.length;f++)Ce(a,b[f],c,d,e);else(d=qa(d)?!!d.capture:!!d,c=ve(c),a&&a[Td])?(a=a.b,b=String(b).toString(),b in a.a&&(f=a.a[b],c=Yd(f,c,d,e),-1<c&&(Wd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--)))):a&&(a=xe(a))&&(b=a.a[b.toString()],a=-1,b&&(a=Yd(b,c,d,e)),(c=-1<a?b[a]:null)&&De(c))}\nfunction De(a){if("number"!==typeof a&&a&&!a.V){var b=a.src;if(b&&b[Td])Zd(b.b,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ze(c),d):b.addListener&&b.removeListener&&b.removeListener(d);se--;(c=xe(b))?(Zd(c,a),0==c.b&&(c.src=null,b[qe]=null)):Wd(a)}}}function ze(a){return a in re?re[a]:re[a]="on"+a}\nfunction Ee(a,b,c,d){var e=!0;if(a=xe(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.V&&(f=Fe(f,d),e=e&&!1!==f)}return e}function Fe(a,b){var c=a.listener,d=a.ka||a.src;a.fa&&De(a);return c.call(d,b)}\nfunction Ae(a,b){if(a.V)return!0;if(!ae){if(!b)a:{b=["window","event"];for(var c=p,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new oe(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.a&&0<=e;e--){b.currentTarget=d[e];var f=Ee(d[e],a,!0,b);c=c&&f}for(e=0;!b.a&&e<d.length;e++)b.currentTarget=\nd[e],f=Ee(d[e],a,!1,b),c=c&&f}return c}return Fe(a,new oe(b,this))}function xe(a){a=a[qe];return a instanceof Xd?a:null}var Ge="__closure_events_fn_"+(1E9*Math.random()>>>0);function ve(a){if(r(a))return a;a[Ge]||(a[Ge]=function(b){return a.handleEvent(b)});return a[Ge]};function N(){K.call(this);this.b=new Xd(this);this.v=this;this.o=null}xa(N,K);N.prototype[Td]=!0;l=N.prototype;l.K=function(){return this.o};l.Ja=function(a){this.o=a};l.addEventListener=function(a,b,c,d){te(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Ce(this,a,b,c,d)};\nl.dispatchEvent=function(a){var b,c=this.K();if(c)for(b=[];c;c=c.K())b.push(c);c=this.v;var d=a.type||a;if("string"===typeof a)a=new L(a,c);else if(a instanceof L)a.target=a.target||c;else{var e=a;a=new L(d,c);Ca(a,e)}e=!0;if(b)for(var f=b.length-1;!a.a&&0<=f;f--){var g=a.currentTarget=b[f];e=g.R(d,!0,a)&&e}a.a||(g=a.currentTarget=c,e=g.R(d,!0,a)&&e,a.a||(e=g.R(d,!1,a)&&e));if(b)for(f=0;!a.a&&f<b.length;f++)g=a.currentTarget=b[f],e=g.R(d,!1,a)&&e;return e};\nl.P=function(){N.W.P.call(this);this.b&&this.b.U(void 0);this.o=null};l.R=function(a,b,c){a=this.b.a[String(a)];if(!a)return!0;a=a.concat();for(var d=!0,e=0;e<a.length;++e){var f=a[e];if(f&&!f.V&&f.capture==b){var g=f.listener,h=f.ka||f.src;f.fa&&Zd(this.b,f);d=!1!==g.call(h,c)&&d}}return d&&0!=c.Za};t("H.util.EventTarget",N);N.prototype.Ja=N.prototype.Ja;N.prototype.setParentEventTarget=N.prototype.Ja;N.prototype.K=N.prototype.K;N.prototype.getParentEventTarget=N.prototype.K;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.dispatchEvent=N.prototype.dispatchEvent;\nN.prototype.dispatchEvent=N.prototype.dispatchEvent;N.prototype.B=N.prototype.B;N.prototype.dispose=N.prototype.B;N.prototype.N=N.prototype.N;N.prototype.addOnDisposeCallback=N.prototype.N;N.prototype.T=N.prototype.R;\nN.prototype.R=function(a,b,c){var d,e,f=!0;var g=c[c.currentTarget===c.target?"AT_TARGET":b?"CAPTURING_PHASE":(d=!0,"BUBBLING_PHASE")];if(!d||"pointerenter"!==(e=c.type)&&"pointerleave"!==e)c.eventPhase=g,f=N.prototype.T.apply(this,arguments),d&&this.K&&null===this.K()&&delete c.eventPhase;return f};function O(a){a=a||{};var b=a.callback;this.g=a.label;r(b)&&(this.callback=b);this.f=!!a.disabled;O.W.constructor.call(this)}xa(O,N);t("H.util.ContextItem",O);O.prototype.zb=function(){return this.g};O.prototype.getLabel=O.prototype.zb;O.prototype.cc=function(a){this.g!==a&&(this.g=a,this.dispatchEvent("update"));return this};O.prototype.setLabel=O.prototype.cc;O.prototype.Pb=function(){return this.f};O.prototype.isDisabled=O.prototype.Pb;\nO.prototype.bc=function(a){a^this.f&&(this.f=a,this.dispatchEvent("update"));return this};O.prototype.setDisabled=O.prototype.bc;var He=new O;O.SEPARATOR=He;function Ie(){if(y.document){var a=document.createElement("canvas");a.width=a.height=1;a.getContext("2d")}}t("H.util.getPixelRatio",function(){return window.devicePixelRatio||1});Object.create(Ia,void 0);t("H.util.eval",function(a){return eval(a)});t("H.util.provide",function(a){var b=p.$jscomp;if(b&&("function"!=typeof b.wb?0:b.wb()))throw Error("goog.provide cannot be used within a module.");ma(a,void 0)});function Je(){this.A=0}\nJe.prototype.next=function(a){if(9007199254740992===this.A)throw new Sd(a,this.A,[0,9007199254740991]);return this.A++};var Ke=new Je;Fa(Ke.next,Ke);function lc(){}var mb=Ha([]);Ha({});Ie();Ie();function Le(a,b,c){var d=Nb(+a,-90,90);if(b&&Ra(d))throw new A(b,c,a);return d}function Me(a,b,c){var d=+a;if(-180>d||180<d)d=Mb(d+180,360)-180;if(b&&Ra(d))throw new A(b,c,a);return d}function Ne(a,b,c){var d;if(a!==z&&Ra(d=+a)&&b)throw new A(b,c,a);return d}t("H.geo.isDBC",function(a,b){return 0!==(0>a^0>b)&&180<ub(b-a)});function Q(){var a=Q;if(!0===(Na(this,a)&&this.constructor===a))throw new TypeError("Illegal constructor "+Ua(a));}t("H.geo.AbstractGeometry",Q);Q.prototype.getBoundingBox=Q.prototype.Y;Q.prototype.equals=Q.prototype.I;Q.prototype.oa="";Q.prototype.wa="";Q.prototype.toString=function(){return this.eb([this.oa.toUpperCase()," "]).join("")};Q.prototype.toString=Q.prototype.toString;Q.prototype.ec=function(){return{type:this.wa,coordinates:this.cb()}};Q.prototype.toGeoJSON=Q.prototype.ec;\nQ.prototype.ua=function(){return{type:this.oa,coordinates:this.va(),boundingBox:this.Y().ua()}};Q.prototype.forWorkerMessage=Q.prototype.ua;function R(a,b,c){this.lat=Le(a,R,0);this.lng=Me(b,R,1);c!==z&&(this.alt=Ne(c,R,2))}xa(R,Q);t("H.geo.Point",R);R.prototype.I=function(a){return this===a||!!a&&this.lat===a.lat&&this.lng===a.lng&&(this.alt||0)===(a.alt||0)};R.prototype.equals=R.prototype.I;R.prototype.ra=function(a){if(this===a||this.lat===a.lat&&this.lng===a.lng)a=0;else{var b=this.lat*Jb;var c=a.lat*Jb;a=1.274200158E7*yb(sb(1,qb(rb(xb((b-c)/2),2)+zb(b)*zb(c)*rb(xb((this.lng*Jb-a.lng*Jb)/2),2))))}return a};\nR.prototype.distance=R.prototype.ra;\nR.prototype.ic=function(a,b,c){if(c){if(b/=6371000.79){a*=Jb;var d=Jb*this.lat;var e=xb(d);var f=xb(b);var g=zb(b);var h=Jb*this.lng;var k=zb(d);d=yb(k*zb(a)*f+e*g);a=Cb(xb(a)*k*f,g-e*xb(d));a=(h+a+I)%(2*I)-I;k=a*Kb}return b?new R(d*Kb,(k+540)%360-180):this}a=(a%360+360)%360;if(0===(a+90)%180)return d=this.lng+b/(6371000.79*Hb*zb(this.lat*Jb))*(270===a?-360:360),new R(this.lat,(d+540)%360-180);if(b/=6371000.79){a*=Jb;h=this.lat*Jb;e=this.lng*Jb;f=h+b*zb(a);g=f-h;d=vb(Ab(f/2+Gb)/Ab(h/2+Gb));d=Ra(g/\nd)?zb(h):g/d;var m=b*xb(a)/d;ub(f)>Eb&&(f=0<f?I-f:-(I+f))}return b?new R(f*Kb,((e+m+Ib+(ub(h+g)>Eb?I:0))%Hb-I)*Kb):this};R.prototype.walk=R.prototype.ic;R.prototype.Y=function(){return new T(this.lat,this.lng,this.lat,this.lng)};R.prototype.getBoundingBox=R.prototype.Y;function Oe(a,b,c){var d=qa(a)&&!(Ra(a.lat=Le(a.lat))||Ra(a.lng=Me(a.lng))||a.alt!==z&&Ra(a.alt=Ne(a.alt)));if(!d&&b)throw new A(b,c,a);return d}R.validate=Oe;\nfunction Pe(a){if(!a)throw new A(Pe,0,a);return new R(a.lat,a.lng,a.alt)}R.fromIPoint=Pe;l=R.prototype;l.oa="Point";l.eb=function(a){a.push("(",this.lng," ",this.lat,")");return a};l.wa="Point";l.cb=function(){return[this.lng,this.lat,this.alt||0]};l.va=function(){return[this.lat,this.lng,this.alt||0]};var W={};t("H.geo.mercator",W);W.a=function(a){return sb(1,tb(0,.5-vb(Ab(Gb+Eb*a/180))/I/2))};W.b=function(a){return a/360+.5};W.la=function(a,b,c){c?(c.x=W.b(b),c.y=W.a(a)):c=new E(W.b(b),W.a(a));return c};W.latLngToPoint=W.la;W.tb=function(a,b){return W.la(a.lat,a.lng,b)};W.geoToPoint=W.tb;W.f=function(a){return 0>=a?90:1<=a?-90:Kb*(2*Bb(wb(I*(1-2*a)))-Eb)};W.c=function(a){return 360*(1===a?1:Mb(a,1))-180};W.X=function(a,b,c){c?(c.lat=W.f(b),c.lng=W.c(a)):c=new R(W.f(b),W.c(a));return c};\nW.xyToGeo=W.X;W.Wb=function(a,b){return W.X(a.x,a.y,b)};W.pointToGeo=W.Wb;t("H.util.constants.DEFAULT_MIN_ZOOM_LEVEL",0);t("H.util.constants.DEFAULT_MAX_ZOOM_LEVEL",22);function X(a,b){this.projection=a||W;this.b=0;this.a=this.exp=vb(b||256)/Db;Qe(this);this.y=this.x=0}t("H.geo.PixelProjection",X);var Re=ub(24)+ub(-8);X.prototype.Zb=W;X.prototype.projection=X.prototype.Zb;X.prototype.x=0;X.prototype.x=X.prototype.x;X.prototype.y=0;X.prototype.y=X.prototype.y;X.prototype.hc=rb(2,Re);X.prototype.w=X.prototype.hc;X.prototype.Jb=rb(2,Re);X.prototype.h=X.prototype.Jb;\nX.prototype.da=function(a){if(Ra(a))throw new A(this.da,0,a);var b=this.x/this.w;var c=this.y/this.h;this.b=a;this.a=this.exp+a;Qe(this);this.x=b*this.w;this.y=c*this.h};X.prototype.rescale=X.prototype.da;function Qe(a){a.a>Re&&(a.a=Re);a.w=rb(2,a.a);a.h=rb(2,a.a)}X.prototype.Sa=function(){return this.b||0};X.prototype.getZoomScale=X.prototype.Sa;X.prototype.sb=function(a,b){a=this.projection.la(a.lat,a.lng,b);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};X.prototype.geoToPixel=X.prototype.sb;\nX.prototype.Fa=function(a,b){return this.projection.X((a.x+this.x)/this.w,(a.y+this.y)/this.h,b)};X.prototype.pixelToGeo=X.prototype.Fa;X.prototype.X=function(a,b,c){return this.projection.X((a+this.x)/this.w,(b+this.y)/this.h,c)};X.prototype.xyToGeo=X.prototype.X;X.prototype.Ba=function(a,b,c){a=this.projection.la(a,b,c);a.x=a.x*this.w-this.x;a.y=a.y*this.h-this.y;return a};X.prototype.latLngToPixel=X.prototype.Ba;X.prototype.Xb=function(a){return new E(a.x*this.w-this.x,a.y*this.h-this.y)};\nX.prototype.pointToPixel=X.prototype.Xb;t("H.util.Disposable",K);K.prototype.N=K.prototype.N;K.prototype.addOnDisposeCallback=K.prototype.N;t("H.util.dispose",function(a){a&&"function"==typeof a.B&&a.B()});K.prototype.B=K.prototype.B;K.prototype.dispose=K.prototype.B;K.prototype.P=K.prototype.P;function Se(){}t("H.util.ICancelable",Se);Se.prototype.cancel=function(){};Se.prototype.cancel=Se.prototype.cancel;function Te(a,b,c,d){this.key="";this.x=a;this.y=b;this.b=c;this.Z=d;this.a=Ad()}Te.prototype.then=function(a,b,c){return this.a.a.then(a,b,c)};Te.prototype.reject=function(a){this.a.reject(a)};Te.prototype.cancel=function(){this.a.a.cancel()};function Ue(a,b,c,d){if(!a||!b||!c)throw new A(Ue,null,"Must specify name, version and revision parameter");this.name=a;this.version=b;this.revision=c;d&&Ca(this,d)}t("H.util.BuildInfo",Ue);Ue.prototype.toString=function(){var a,b=[];for(a in this)Qa(this[a])&&b.push(this[a]);return b.join(";")};var Ve={};function We(a,b,c,d){if(!a)throw new A(We,1,"Must specify a name parameter");return Ve[a]||(Ve[a]=new Ue(a,b,c,d))}Ue.get=We;function Z(a,b,c,d,e,f){if(a&&b)this.bb(a),this.Ha(b),this.Ka(c),this.ab(e),this.$a(f),this.La(d);else throw Error(\'Parameters "scheme" and "host" must be specified\');}t("H.service.Url",Z);\nfunction Xe(a,b){var c=y.document,d,e=c&&c.createElement("a"),f="";if(c){if(b){var g=(d=c.getElementsByTagName("base")[0])&&d.href;var h=c.head;var k=d||h.appendChild(c.createElement("base"));k.href=b}e.href=a;f=e.href;b&&(d?d.href=g:h.removeChild(k))}else/[\\w]+:\\/\\//.test(a)&&(f=a);g=/(?:(\\w+):\\/\\/)?(?:([^:]+):([^@/]*)@)?([^/:]+)?(?:[:]{1}([0-9]+))?(\\/[^?#]*)?(\\?[^#]+)?(#.*)?/.exec(f);a=g[1];k=g[4];b=g[5];h=g[6];c=g[7];d=g[8];!g[2]&&k&&/@/.test(k)&&(k=k.split("@")[1]);g=k;h=h&&0<h.length?h.substr(1):\n"";k={};if(c)for(e=/([?&]?([^=&+]+))(=([^&]+))?/g;f=e.exec(c);)k[decodeURIComponent(f[2])]=f[4]?decodeURIComponent(f[4]):void 0;return new Z(a,g,h,k,isNaN(+b)?void 0:+b,d&&0<d.length?d.substr(1):"")}Z.parse=Xe;var Ye=0;Z.prototype.clone=function(){Ye++;var a={},b;for(b in this.a)a[b]=this.a[b];return new Z(this.o,this.f,this.b,a,this.g,this.c)};Z.prototype.clone=Z.prototype.clone;\nZ.prototype.bb=function(a){if(!a||"string"!==typeof a)throw Error(\'The "scheme" parameter must be a non-empty string.\');this.o=a;return this};Z.prototype.setScheme=Z.prototype.bb;Z.prototype.Gb=function(){return this.o};Z.prototype.getScheme=Z.prototype.Gb;Z.prototype.Ha=function(a){if(!a||"string"!==typeof a||"-"===a.charAt(0)||"."===a.charAt(0)||"."===a.charAt(a.length-1))throw Error(\'The "host" parameter is not a valid host name.\');this.f=a;return this};Z.prototype.setHost=Z.prototype.Ha;\nZ.prototype.yb=function(){return this.f};Z.prototype.getHost=Z.prototype.yb;Z.prototype.Ka=function(a){this.b=a||void 0;return this};Z.prototype.setPath=Z.prototype.Ka;Z.prototype.Db=function(){return this.b};Z.prototype.getPath=Z.prototype.Db;Z.prototype.La=function(a){if(a)if("object"==typeof a)this.a=a;else throw Error(\'Parameter "params" must be an object.\');else this.a={};return this};Z.prototype.setQuery=Z.prototype.La;Z.prototype.Kb=function(){return!Ze(this)};Z.prototype.hasQuery=Z.prototype.Kb;\nZ.prototype.getQuery=function(){return this.a};Z.prototype.getQuery=Z.prototype.getQuery;Z.prototype.ab=function(a){if(a&&isNaN(parseInt(a,10)))throw Error(\'Parameter "port" must be a number or undefined\');this.g=+a||void 0;return this};Z.prototype.setPort=Z.prototype.ab;Z.prototype.Eb=function(){return this.g};Z.prototype.getPort=Z.prototype.Eb;Z.prototype.$a=function(a){this.c=a||void 0;return this};Z.prototype.setAnchor=Z.prototype.$a;Z.prototype.ub=function(){return this.c};\nZ.prototype.getAnchor=Z.prototype.ub;Z.prototype.aa=function(a){if("object"!==typeof a)throw Error(\'Parameter "other" must be an object.\');var b=this.a,c;for(c in a)a.hasOwnProperty(c)&&"function"!==typeof a[c]&&(b[c]=a[c]);return this};Z.prototype.mergeQuery=Z.prototype.aa;Z.prototype.ib=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subDomain" must be a non-empty string\');"."===a.substr(a.length-1)&&(a=a.substr(0,a.length-1));return this.Ha(a+"."+this.f)};\nZ.prototype.addSubDomain=Z.prototype.ib;Z.prototype.jb=function(a){if(!a||"string"!==typeof a)throw Error(\'Parameter "subPath" must be a non-empty string\');return this.Ka((this.b?this.b+"/":"")+a)};Z.prototype.addSubPath=Z.prototype.jb;Z.prototype.toString=function(){return[this.o+"://",this.f,this.g?":"+this.g:"",this.b||!Ze(this)||this.c?"/":"",this.b?encodeURI(this.b):"",$e(this),this.c?"#"+encodeURIComponent(this.c):""].join("")};Z.prototype.toString=Z.prototype.toString;\nfunction $e(a){function b(g,h){return encodeURIComponent(g)+(void 0===h?"":"="+encodeURIComponent(h).replace(/[!\'()*]/g,function(k){return"%"+k.charCodeAt(0).toString(16)}))}var c=[],d,e=a.a;for(d in e)if(e.hasOwnProperty(d)&&"function"!==typeof e[d]){var f=a.a[d];Na(f,af)?f.fb.forEach(function(g){c.push(b(d,g))}):c.push(b(d,f))}return 0<c.length?"?"+c.join("&"):""}function Ze(a){var b,c=0;for(b in a.a)if(a.a.hasOwnProperty(b)&&"function"!==typeof a.a[b]&&(c++,0<c))break;return!c}\nfunction af(a){var b;if(!Oa(a,void 0,void 0,void 0))throw new A(af,0,a);for(b=0;b<a.length;b++){var c=a[b];if(!Qa(c)&&!Sa(c))throw new A(af,0,"The array can only contain strings and numbers");}this.fb=a}Z.MultiValueQueryParameter=af;af.prototype.Ib=function(){return this.fb};af.prototype.getValues=af.prototype.Ib;var bf={};function cf(a){try{importScripts.apply(self,arguments)}catch(b){this.postError("invalid_script")}}function df(a){bf[a]=null;this.postMessage(a)}function ef(a,b,c){if(r(b))var d=b;else try{d=self.eval("("+b+")"),r(d)||(d=null)}catch(e){}d?(bf[a]=d,c||this.postMessage(a)):this.postError("invalid_processor")}function ff(a){this.b=a&&a[0];this.a=a&&a[1];this.c=a&&a[2]||[]}ff.prototype.postError=function(a){this.postMessage(a,z,0)};\nff.prototype.postMessage=function(a,b,c){self.postMessage({processor:this.b,taskId:this.a,type:c===z?1:c,data:a},b||z)};function gf(a,b,c){if(!Qa(a))throw new A(gf,0,"InvalidArgument");if(!r(b))throw new A(gf,1,"InvalidArgument");var d=hf++;jf[d]={mimeType:c||kf,mb:b};(new ff(["3",d,[]])).postMessage(a,[],2)}var jf={},hf=0;\nfunction lf(a,b){var c=a;if(jf[this.a]){var d=jf[this.a];var e=d.mb;delete jf[this.a];if(b)e(null,b);else{if(d.mimeType===mf){a=new Uint8Array(a);b=a.byteLength;d="";c=0;for(var f,g,h,k;c<b;)f=a[c++],192>f||(g=a[c++],224>f?f=(f&31)<<6|g&63:(h=a[c++],240>f?f=(f&15)<<12|(g&63)<<6|h&63:(k=a[c++],f=(f&7)<<18|(g&63)<<12|(h&63)<<6|k&63))),65536>f?d+=String.fromCharCode(f):(f-=65536,d+=String.fromCharCode((f>>10)+55296,(f&1023)+56320));c=d}e(c)}}}var kf=0,mf=1;function T(a,b,c,d){nf(this,Le(a,T,0),Me(b,T,1),Le(c,T,2),Me(d,T,3))}xa(T,Q);t("H.geo.Rect",T);T.prototype.oa="Polygon";T.prototype.eb=function(a){var b=this.m,c=this.i,d=this.l,e=this.j;a.push("(","(",c," ",b,",",e," ",b,",",e," ",d,",",c," ",d,",",c," ",b,")",")");return a};T.prototype.I=function(a){return this===a||!!a&&this.m===a.m&&this.i===a.i&&this.l===a.l&&this.j===a.j};T.prototype.equals=T.prototype.I;T.prototype.clone=function(){return new T(this.m,this.i,this.l,this.j)};\nT.prototype.clone=T.prototype.clone;function nf(a,b,c,d,e){a.i=c;a.j=e;b<d&&(c=b,b=d,d=c);a.m=b;a.l=d;a.c=a.a=a.b=null;return a}T.prototype.Ra=function(){this.c||(this.c=new R(this.m,this.i));return this.c};T.prototype.getTopLeft=T.prototype.Ra;T.prototype.Qa=function(){this.a||(this.a=new R(this.l,this.j));return this.a};T.prototype.getBottomRight=T.prototype.Qa;T.prototype.Hb=function(){return this.m};T.prototype.getTop=T.prototype.Hb;T.prototype.vb=function(){return this.l};\nT.prototype.getBottom=T.prototype.vb;T.prototype.Ab=function(){return this.i};T.prototype.getLeft=T.prototype.Ab;T.prototype.Fb=function(){return this.j};T.prototype.getRight=T.prototype.Fb;T.prototype.J=function(){this.b||(this.b=new R(this.l+(this.m-this.l)/2,of(this.i,this.L())));return this.b};T.prototype.getCenter=T.prototype.J;T.prototype.L=function(){return pf(this.i,this.j)};T.prototype.getWidth=T.prototype.L;T.prototype.S=function(){return this.m-this.l};T.prototype.getHeight=T.prototype.S;\nT.prototype.Nb=function(){return this.i>this.j};T.prototype.isCDB=T.prototype.Nb;T.prototype.Qb=function(){return!this.L()&&!this.S()};T.prototype.isEmpty=T.prototype.Qb;T.prototype.Y=function(){return new T(this.m,this.i,this.l,this.j)};T.prototype.getBoundingBox=T.prototype.Y;T.prototype.ga=function(a,b,c){var d=this.J();c||(a=Le(a,this.ga,0),b=Me(b,this.ga,1));b=this.M(a,b,c);a=b.J();return a.lat===d.lat&&a.lng===d.lng&&this.S()===b.S()&&this.L()===b.L()};T.prototype.containsLatLng=T.prototype.ga;\nT.prototype.ha=function(a,b){b||Oe(a,this.ha,0);return this.ga(a.lat,a.lng,b)};T.prototype.containsPoint=T.prototype.ha;T.prototype.Pa=function(a,b){var c=this.J();if(!b&&!Na(a,T))throw new A(this.Pa,0,a);b=this.ma(a,b);a=b.J();return a.lat===c.lat&&a.lng===c.lng&&this.S()===b.S()&&this.L()===b.L()};T.prototype.containsRect=T.prototype.Pa;\nT.prototype.M=function(a,b,c,d){if(!c){if(Ra(a=Le(a)))throw new A(this.M,0,a);if(Ra(b=Me(b)))throw new A(this.M,1,b);}return qf(this.m,this.i,this.l,this.j,a,b,a,b,d)};T.prototype.mergeLatLng=T.prototype.M;T.prototype.Wa=function(a,b,c){b||Oe(a,this.Wa,0);return this.M(a.lat,a.lng,b,c)};T.prototype.mergePoint=T.prototype.Wa;T.prototype.ma=function(a,b,c){if(!b&&!Na(a,T))throw new A(this.ma,0,a);return qf(this.m,this.i,this.l,this.j,a.m,a.i,a.l,a.j,c)};T.prototype.mergeRect=T.prototype.ma;\nT.prototype.ba=function(a,b,c,d,e,f){e||(a=Le(a,this.ba,0),b=Me(b,this.ba,1),c=Le(c,this.ba,2),d=Me(d,this.ba,3));return qf(this.m,this.i,this.l,this.j,a,b,c,d,f)};T.prototype.mergeTopLeftBottomRight=T.prototype.ba;T.prototype.Ua=function(a,b){var c=this.i<=this.j,d=a.i<=a.j,e=this.i<a.j,f=a.i<this.j;if(!b&&!Na(a,T))throw new A(this.Ua,0,a);return this.l<=a.m&&a.l<=this.m&&(!c&&(!d||e||f)||!d&&(e||f)||e&&f)};T.prototype.intersects=T.prototype.Ua;function pf(a,b){a=b-a;return a+(0>a?360:0)}\nfunction of(a,b){a+=b/2;return a-(180<a?360:0)}function qf(a,b,c,d,e,f,g,h,k){c=sb(c,g);a=tb(a,e);e=pf(b,d);var m=of(b,e);g=pf(f,h);var n=of(f,g)-m;n+=0>n-1E-6?360:0;if(180>n-1E-6){m=b;var q=h}else n=360-n,m=f,q=d;n=n+e/2+g/2;360<=n+5E-7?(m=-180,q=180):n-5E-7<e?(m=b,q=d):n-5E-7<g&&(m=f,q=h);return k?nf(k,a,m,c,q):new T(a,m,c,q)}T.merge=qf;function rf(a,b,c){c||(Oe(a,rf,0),Oe(b,rf,1));return new T(a.lat,a.lng,b.lat,b.lng)}T.fromPoints=rf;\nfunction sf(a,b){var c=1,d=a.length,e=null;var f=oa(a);if("array"!=f&&("object"!=f||"number"!=typeof a.length))throw new A(sf,0,a);if(0<d)for(f=a[0],e=rf(f,f,b);c<d;c++)f=a[c],e.M(f.lat,f.lng,b,e);return e}T.coverPoints=sf;function tf(a,b){var c=3,d=a.length,e;if(!(b||a&&null!=a.length))throw new A(tf,0,a);if(0<d)for(e=new T(a[0],a[1],a[0],a[1]);c<d;c+=3)e.M(a[c],a[c+1],b,e);return e}T.coverLatLngAlts=tf;\nfunction uf(a,b){var c=1,d=a.length,e;if(b&&(!a||null==a.length))throw new A(uf,0,a);if(0<d)for(e=new T(a[0].m,a[0].i,a[0].l,a[0].j);c<d;c++)e.ma(a[c],b,e);return e}T.coverRects=uf;\nT.prototype.Ya=function(a,b){var c=this.i,d=this.m,e=this.j,f=this.l,g=this.J().lng;Oe(a,this.Ya,0);var h=a.lat-f-(d-f)/2;var k=a.lng-g;k=180<k||-180>k?-(g+a.lng):k;a=c+(0>k?2*k:0);a=-180>a?360+a:a;e+=0<k?2*k:0;e=180<e?e-360:e;d=0<h?d+2*h:d;90<=d&&(d=90);f=0>h?f+2*h:f;-90>=f&&(f=-90);return b?nf(b,d,a,f,e):new T(d,a,f,e)};T.prototype.resizeToCenter=T.prototype.Ya;T.prototype.wa="Polygon";\nT.prototype.cb=function(){return[[this.i,this.m,0],[this.j,this.m,0],[this.j,this.l,0],[this.i,this.l,0],[this.i,this.m,0]]};T.prototype.ua=function(){return this.va()};T.prototype.va=function(){return[this.m,this.i,this.l,this.j]};function vf(a,b,c,d){var e=!!c,f,g=0,h=0,k=0,m=0,n=0,q,u=-1;var J=y.Float32Array;var M,v=[];if(b){b=La(b);a=La(a);e&&(f=La(c));c=b.length;d=d?1E-7:1E-5;for(M=new J(3*c);g<c;){J=b[g];var G=+J;var Y=+a[g];e&&(q=+f[g]);wf.test(J)?0<=u&&(0<g-u&&v.push(u,g+1),u=-1):0>u&&(u=g);g++;m=M[h++]=m+Y*d;k=M[h++]=k+G*d;e&&(n=M[h]=n+q);h++}0<=u&&1<c-u&&v.push(u,c)}else M=new J(0);return{path:M,outlineIndices:v}}var wf=/^-?0\\d/;\nfunction xf(a,b){for(var c=0,d=a.length/3,e=new y.Array(d),f=0;c<d;)e[c++]=b.Ba(a[f],a[++f]),f+=2;return e};function yf(a,b){b=180/(1<<b);var c=a.lat+90;a=(a.lng+180)%360;var d=0;180==c&&d--;d+=Math.floor(c/b);return[d,Math.floor(a/b)]}var zf=1/Math.pow(10,10);function Af(a,b){var c=[],d=a.Ra();a=a.Qa();var e;180==a.lng&&(a.lng-=zf);d=yf(d,b);a=yf(a,b);for(e=d[0];e>=a[0];e--)for(b=d[1];b<=a[1];b++)c.push(e,b);return c};function Bf(a,b){var c=a.tileSize||256;this.b={};this.v=Xe(a.serverUrl);this.g=b;this.fc=a.layerConfigs||[];this.o=a.projected;this.T=c;this.Ea=!1!==a.batchTiles;this.Ga=a.horizontalMargin||0;this.gc=a.onlyOutline;this.gb=new X(Ia,c);this.f=new X(Ia,c);this.f.da(22-Math.log(c)/Math.LN2+8)}xa(Bf,K);l=Bf.prototype;\nl.ac=function(a,b,c){var d=this.T,e=this.Ga,f={x:a*d-e,y:b*d};d={x:(a+1)*d-1+e,y:(b+1)*d-1};e=this.gb;e.da(c);f=e.Fa(f);d=e.Fa(d);return Cf(this,new T(f.lat,f.lng,d.lat,d.lng),this.fc,{x:a,y:b,z:c})};l.$b=function(a,b,c,d,e){return Cf(this,new T(a,b,c,d),e)};\nfunction Cf(a,b,c,d){var e=Df(c),f=e.length,g={},h,k=a.b,m=[],n=[];for(c=0;c<f;c++){var q=e[c];var u=q.layerId;var J=q.level;g[u]=q.columns;q=Af(b,J);var M=q.length-1;for(h=0;h<M;h+=2){var v=[u,q[h+1],q[h],J].join("_");var G=k[v]||a.g.get(v);G||(G=new Te(q[h+1],q[h],J,u),G.key=v,k[v]=G,n.push(G));m.push(G)}}n.length&&(a.Ea?Ef(a,n):Ff(a,n));return zd(m.map(function(Y){return Y.then(Fa(this.qb,this,Y.Z,Gf(e))).then(Fa(this.Yb,this,Y,d||{})).then(Fa(this.rb,this,g[Y.Z]))},a))}\nl.qb=function(a,b,c){var d=c.Rows,e=d.length,f,g;if(e&&(f=b[a])){b=new D(c.Rows);var h=[];for(g=0;g<e;g++){var k=d[g];f(b.ja(g),a)&&h.push(k)}a={Rows:h};if(c=c.Meta)a.Meta=c}else a=c;return a};function Ff(a,b){function c(k,m,n){n?(delete a.b[k.key],k.reject(n)):Hf(a,k,m)}var d,e=b.length,f=a.v;for(d=0;d<e;d++){var g=b[d];var h=f.clone().aa({tilex:g.x}).aa({tiley:g.y}).aa({level:g.b}).aa({layer:g.Z});new gf(h.toString(),Fa(c,null,g),mf)}}\nfunction Ef(a,b){var c=b.length,d;for(d=0;d<c;d+=15){var e=b.slice(d,d+15);If(a,e)}}function If(a,b){var c=a.v.clone(),d=[],e=[],f=[],g=c.getQuery();b.length&&(b.forEach(function(h){d.push(h.x,h.y);e.push(h.b);f.push(h.Z)}),g.tilexy=d.join(","),g.layers=f.join(","),g.levels=e.join(","),c.La(g),new gf(c.toString(),function(h,k){k?b.forEach(function(m){delete a.b[m.key];m.reject("error")}):Hf(a,b,h)},mf))}\nfunction Hf(a,b,c){var d=b.length,e;if(Oa(b,void 0,void 0,void 0)){var f=c.indexOf("[")+1;for(e=0;e<d;e++){var g=c.indexOf("]},{",f+3)+2;g<f&&(g=c.lastIndexOf("]}"));var h=c.substr(f,g-f);f=g+1;Jf(a,b[e],h)}}else Jf(a,b,c)}function Jf(a,b,c){try{var d=c.length;var e=b.key;delete a.b[e];a.g.add(e,b,2*d);var f=JSON.parse(c);b.a.b(f)}catch(g){b.reject(g.message)}}\nfunction Gf(a){var b={},c,d=a.length;for(c=0;c<d;c++){var e=a[c];if(e.rowFilter){var f=e.layerId;f=f!==z?f:e.layer;b[f]=Fa(e.rowFilter,e.rowFilterContext)}}return b}function Kf(a,b,c,d,e){return e?[new E(a,b),new E(c,b),new E(c,d),new E(a,d),new E(a,b)]:[a,b,c,b,c,d,a,d]}\nl.Yb=function(a,b,c){var d=this.f.Sa()-b.z,e=this.T<<d,f=50<<d,g=b.x*e;b=b.y*e;var h=g+e;e=b+e;var k=g-f,m=b-f,n=h+f;f=e+f;var q,u,J=c.Rows,M=J.length,v,G=/^ADAS/.test(a.Z),Y=this.f,pa=this.gc,S,ab=[],Ja=[],Ka=[],bb=[];for(a=0;a<M;a++){var w=v=J[a];var P=(S=G)?"HPY":"LAT";var U=S?"HPX":"LON";var ea=S?"HPZ":"ZLEVEL";if(w[P]){var V=vf(w[P],w[U],w[ea],S);w.geometry=V;delete w[P];delete w[U];delete w[ea];if(w.INNER_LAT)for(P=w.INNER_LAT.split(";"),V=w.INNER_LON.split(";"),delete w.INNER_LAT,delete w.INNER_LON,\nw.interiors=ea=[],U=P.length,w=0;w<U;w++)ea.push(vf(P[w],V[w],"",S))}if(this.o){S=void 0;U=v;V=Y;P=U.$$projected$$;if(!P){var ba=U.geometry;w=xf(ba.path,V);v=[w];U.$$projected$$=P={Vb:v};U=(ea=U.interiors)?ea.length:0;v.length+=U;S|=Lf(v,w,ba.outlineIndices);if(U)for(P.Lb=1,q=0;q<U;q++)ba=ea[q],w=xf(ba.path,V),v[1+q]=w,S|=Lf(v,w,ba.outlineIndices);S&&(P.Tb=1+U)}w=P;S=w.Vb;v=w.Lb;var zc=w.Tb;V=[];P=U=Lb;var cb=ea=z;w=S[0];if(1===w.length){var Ac=Ac||(Ac=Kf(g,b,h,e,!1));v=w[0];Rb(v.x,v.y,Ac)&&V.push(Mf(w,\ng,b,d))}else{var Be=S.length;for(ba=pa?zc:0;ba<Be&&(pa||!ba||V.length);ba++)if(w=S[ba],ba>=zc){ba===zc&&(P=V.length);var ja=Ub([w],k,m,n,f,!1);Nf(ja,g,b,d,V)}else{var Fb=Fb||(Fb=Kf(k,m,n,f,!0));if(ba>=v)if(ba===v&&(U=V.length),cb)for(q=cb.length;q--;){if(ja=Of(cb[q],w),u=ja.length){for(ea=ea||[];u--;)ea.push(q);Nf(ja,g,b,d,V)}}else ja=Of(Fb,w),Nf(ja,g,b,d,V);else if(ja=Of(Fb,w),Nf(ja,g,b,d,V),1<ja.length&&v<Be)for(cb=[],q=ja.length;q--;)cb[q]=ja[q]}}V.length&&(ab[a]=V,Ja[a]=U,Ka[a]=ea,bb[a]=P)}}return{dc:c,\nnb:ab,Mb:Ja,pb:Ka,Ub:bb}};function Lf(a,b,c){for(var d=c.length,e=0,f,g,h=b.length;e<d;)f=c[e++],g=c[e++],a.push(g-f===h?b:b.slice(f,g));return 0<c.length}function Of(a,b){var c,d=[];if(c=Wb(a,b)){do{a=[];b=c;do a.push(b);while(b=b.next);d.push(a)}while(c=c.Xa)}else Sb(b[0],Tb(a))?d.push(b):Sb(a[0],Tb(b))&&d.push(a);return d}function Nf(a,b,c,d,e){for(var f=0,g=a.length;f<g;f++)e.push(Mf(a[f],b,c,d))}\nfunction Mf(a,b,c,d){var e,f=a.length,g=new Int32Array(2*f),h=0;for(e=0;e<f;e++){var k=a[e];g[h++]=k.x-b>>d;g[h++]=k.y-c>>d}return g}\nl.rb=function(a,b){var c=b.dc,d=b.nb,e=b.Mb,f=b.Ub;b=b.pb;for(var g=[],h,k={Rows:g},m,n=a?a.length:0,q=0,u,J=c.Rows,M=J.length,v;q<M;q+=1)if(d[q]||!this.o){h={};u=J[q];if(n)for(m=0;m<n;m++)u.hasOwnProperty(a[m])&&(h[a[m]]=u[a[m]]);else for(v in u)"$$projected$$"!==v&&(h[v]=u[v]);u.geometry&&(h.geometry=u.geometry);m=void 0;var G,Y=h,pa=d[q],S=e[q],ab=b[q],Ja=f[q],Ka=g;if(pa){var bb=pa.length;if(ab)for(G=S;G--;){if(G){var w={};for(m in Y)w[m]=Y[m]}else w=Y;u=[pa[G]];var P=sb(bb,Ja)-S;for(h=0;h<P;h++)ab[h]===\nG&&u.push(pa[S+h]);P=u.length;if(!G)for(h=Ja;h<bb;h++)u.push(pa[h]);w.$HProjGeometry={paths:u,interiorsIndex:1,outlinesIndex:P};Ka.push(w)}else Y.$HProjGeometry={paths:pa,interiorsIndex:S,outlinesIndex:Ja},Ka.push(Y)}else Ka.push(Y)}c.Meta&&(k.Meta=c.Meta);return k};l.P=function(){var a,b=this.b;for(a in b)b.hasOwnProperty(a)&&(b[a].reject("disposed"),delete b[a])};\nfunction Df(a){for(var b=[],c,d=a.length,e=0;e<d;e++){c=Aa(a[e]);if(c.rowFilter&&(c.rowFilter=eval("("+c.rowFilter+")"),!r(c.rowFilter)))throw Error("Invalid row filter for layer "+c.layerId);b.push(c)}return b};t("H.service.extension.worker.processor",function(a,b,c){function d(h){e.postMessage(h)}var e=this,f=za[a];var g=function(h){e.postError(h.toString())};if(0===b)f||(za[a]=new Bf(c,Pf)),this.postMessage();else if(f)switch(b){case 1:try{f.ac.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 2:try{f.$b.apply(f,c).then(d,g)}catch(h){this.postError(h.message)}break;case 3:f.B();delete za[a];ya()&&Pf.U();break;default:e.postError("Unsupported command")}});\nvar Pf=new B(26214400),za=Object.create(Ia,void 0);function Qf(a,b,c){var d=a[b];a=a[b+1];this.Ta=[];this.Ma=0;this.b=b;this.a=[a-c,d-c,a+c,d+c]}Qf.prototype.ha=function(a,b){var c=a[b];a=a[b+1];b=this.a;return b[1]<=c&&c<=b[3]&&b[0]<=a&&a<=b[2]};Qf.prototype.J=function(){return this.b};var Rf=new E(0,0);function Sf(a,b,c,d,e){d[e]=b;d[e+1]=a}var Tf=new X;function Uf(a,b,c,d,e){Tf.Ba(a,b,Rf);d[e]=Rf.x;d[e+1]=Rf.y}\nt("H.clustering.dynamicgrid.worker",function(a,b,c,d,e){var f=e?Sf:Uf,g=0;e=!!self.ArrayBuffer;var h=a.byteLength?new Float64Array(a):a,k=h.length/3;a=[];var m=[],n=[],q=e?new Float64Array(2*k):[];k=0;var u=0;for(Tf.da(d);g<h.length;){var J=h[g++];var M=h[g++];var v=h[g++];f(v,M,d,q,u);for(v=a.length;v--;)if(M=a[v],M.ha(q,u)){var G=M;break}G||(G=new Qf(q,u,b),a.push(G));v=u/2;G.Ma+=J||1;G.Ta.push(v);G=null;u+=2}for(v=a.length;v--;)M=a[v],b=M.Ma>=c,f=M.Ta,d=f.length,b?(m.push(d),m=m.concat(f)):\n(k+=d,n=n.concat(f));c=[k].concat(n,m);c=e?(new Uint32Array(c)).buffer:c;this.postMessage(c,[c])});self.addEventListener("message",function(a){a=new ff(a.data);var b=bf[a.b];if(b)try{b.apply(a,a.c)}catch(c){a.postError(c.message)}else a.postError("processor_not_found")});(function(){var a=new ff;var b=function(c,d){ef.apply(a,[c,d,!0])};b("0",cf);b("1",ef);b("2",df);b("3",lf)})();\n',e=function(){var t,i,n;"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||!(module.exports||"undefined"!=typeof window)||(t=e.toString(),i="",n="undefined"!=typeof document&&document.currentScript instanceof HTMLScriptElement?document.currentScript.src:""),function(){function e(t){return r.call(t).slice(8,-1)}var r={}.toString,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t,e){return t(e={exports:{}},e.exports),e.exports}function s(t){return t&&t.Math==Math&&t}function u(t){try{return!!t()}catch(t){return!0}}function l(t){return"object"==typeof t?null!==t:"function"==typeof t}function h(t){return x?w.createElement(t):{}}function c(t){if(!l(t))throw TypeError(String(t)+" is not an object");return t}function f(t,e){if(!l(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!l(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!l(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!l(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}function p(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function d(t,e){try{k(b,t,e)}catch(i){b[t]=e}return e}function g(t){return"Symbol(".concat(void 0===t?"":t,")_",(++S+I).toString(36))}function y(t){return O[t]||(O[t]=L&&C[t]||(L?C:g)("Symbol."+t))}function v(t){var i,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(i=Object(t),P))?n:R?e(i):"Object"==(r=e(i))&&"function"==typeof i.callee?"Arguments":r}var m="object",b=s(typeof globalThis==m&&globalThis)||s(typeof window==m&&window)||s(typeof self==m&&self)||s(typeof o==m&&o)||Function("return this")(),_=!u((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),w=b.document,x=l(w)&&l(w.createElement),M=!_&&!u((function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a})),E=Object.defineProperty,A={f:_?E:function(t,e,i){if(c(t),e=f(e,!0),c(i),M)try{return E(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},k=_?function(t,e,i){return A.f(t,e,p(1,i))}:function(t,e,i){return t[e]=i,t},T=a((function(t){var e="__core-js_shared__",i=b[e]||d(e,{});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.1.0",mode:"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})})),S=0,I=Math.random(),L=!u((function(){return!String(Symbol())})),O=T("wks"),C=b.Symbol,P=y("toStringTag"),R="Arguments"==e(function(){return arguments}()),j={};function N(t,e){return K.call(t,e)}function D(t){return $[t]||($[t]=g(t))}j[y("toStringTag")]="z";var z,B,F,U,V,q,G,W,Y="[object z]"!==String(j)?function(){return"[object "+v(this)+"]"}:j.toString,K={}.hasOwnProperty,Z=T("native-function-to-string",Function.toString),X=b.WeakMap,J="function"==typeof X&&/native code/.test(Z.call(X)),$=T("keys"),Q={},tt=b.WeakMap;G=J?(z=new tt,B=z.get,F=z.has,U=z.set,V=function(t,e){return U.call(z,t,e),e},q=function(t){return B.call(z,t)||{}},function(t){return F.call(z,t)}):(W=D("state"),Q[W]=!0,V=function(t,e){return k(t,W,e),e},q=function(t){return N(t,W)?t[W]:{}},function(t){return N(t,W)});var et={set:V,get:q,has:G,enforce:function(t){return G(t)?q(t):V(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=q(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},it=a((function(t){var e=et.get,i=et.enforce,n=String(Z).split("toString");T("inspectSource",(function(t){return Z.call(t)})),(t.exports=function(t,e,r,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||N(r,"name")||k(r,"name",e),i(r).source=n.join("string"==typeof e?e:"")),t!==b?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=r:k(t,e,r)):s?t[e]=r:d(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Z.call(this)}))})),nt=Object.prototype;function rt(t){return isNaN(t=+t)?0:(0<t?gt:dt)(t)}function ot(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(t){return _t(ot(t))}function st(t){return 0<t?Mt(rt(t),9007199254740991):0}function ut(t,e){var i,n=at(t),r=0,o=[];for(i in n)!N(Q,i)&&N(n,i)&&o.push(i);for(;e.length>r;)N(n,i=e[r++])&&(~kt(o,i)||o.push(i));return o}function lt(t,e){var i=jt[Rt(t)];return i==Dt||i!=Nt&&("function"==typeof e?u(e):!!e)}function ht(t,e){var i,n,r,o,a=t.target,s=t.global,u=t.stat,l=s?b:u?b[a]||d(a,{}):(b[a]||{}).prototype;if(l)for(i in e){if(r=e[i],n=t.noTargetGet?(o=Bt(l,i))&&o.value:l[i],!zt(s?i:a+(u?".":"#")+i,t.forced)&&void 0!==n){if(typeof r==typeof n)continue;!function(t,e){for(var i=Ct(e),n=A.f,r=xt.f,o=0;o<i.length;o++){var a=i[o];N(t,a)||n(t,a,r(e,a))}}(r,n)}(t.sham||n&&n.sham)&&k(r,"sham",!0),it(l,i,r,t)}}Y!==nt.toString&&it(nt,"toString",Y,{unsafe:!0});var ct,ft,pt,dt=Math.ceil,gt=Math.floor,yt={}.propertyIsEnumerable,vt=Object.getOwnPropertyDescriptor,mt={f:vt&&!yt.call({1:2},1)?function(t){var e=vt(this,t);return!!e&&e.enumerable}:yt},bt="".split,_t=u((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==e(t)?bt.call(t,""):Object(t)}:Object,wt=Object.getOwnPropertyDescriptor,xt={f:_?wt:function(t,e){if(t=at(t),e=f(e,!0),M)try{return wt(t,e)}catch(t){}if(N(t,e))return p(!mt.f.call(t,e),t[e])}},Mt=Math.min,Et=Math.max,At=Math.min,kt=function(t,e,i){for(var n,r,o=at(t),a=st(o.length),s=(n=a,(r=rt(i))<0?Et(r+n,0):At(r,n));s<a;s++)if(s in o&&o[s]===e)return s||0;return-1},Tt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],St=Tt.concat("length","prototype"),It={f:Object.getOwnPropertyNames||function(t){return ut(t,St)}},Lt={f:Object.getOwnPropertySymbols},Ot=b.Reflect,Ct=Ot&&Ot.ownKeys||function(t){var e=It.f(c(t)),i=Lt.f;return i?e.concat(i(t)):e},Pt=/#|\.prototype\./,Rt=lt.normalize=function(t){return String(t).replace(Pt,".").toLowerCase()},jt=lt.data={},Nt=lt.NATIVE="N",Dt=lt.POLYFILL="P",zt=lt,Bt=xt.f,Ht=!u((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ft=D("IE_PROTO"),Ut=Object.prototype,Vt=Ht?Object.getPrototypeOf:function(t){return N(t=Object(ot(t)),Ft)?t[Ft]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ut:null},qt=y("iterator"),Gt=!1;function Wt(){}[].keys&&("next"in(pt=[].keys())?(ft=Vt(Vt(pt)))!==Object.prototype&&(ct=ft):Gt=!0),null==ct&&(ct={}),N(ct,qt)||k(ct,qt,(function(){return this}));var Yt={IteratorPrototype:ct,BUGGY_SAFARI_ITERATORS:Gt},Kt=Object.keys||function(t){return ut(t,Tt)},Zt=_?Object.defineProperties:function(t,e){c(t);for(var i,n=Kt(e),r=n.length,o=0;o<r;)A.f(t,i=n[o++],e[i]);return t},Xt=b.document,Jt=Xt&&Xt.documentElement,$t=D("IE_PROTO"),Qt="prototype",te=function(){var t,e=h("iframe"),i=Tt.length;for(e.style.display="none",Jt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),te=t.F;i--;)delete te[Qt][Tt[i]];return te()},ee=Object.create||function(t,e){var i;return null!==t?(Wt[Qt]=c(t),i=new Wt,Wt[Qt]=null,i[$t]=t):i=te(),void 0===e?i:Zt(i,e)};function ie(t,e,i){t&&!N(t=i?t:t.prototype,se)&&ae(t,se,{configurable:!0,value:e})}function ne(){return this}function re(){return this}function oe(t,e,i,n,r,o,a){var s,u,l;function h(t){if(t===r&&b)return b;if(!pe&&t in v)return v[t];switch(t){case"keys":case de:case ge:return function(){return new i(this,t)}}return function(){return new i(this)}}u=n,l=e+" Iterator",(s=i).prototype=ee(le,{next:p(1,u)}),ie(s,l,!1),ue[l]=ne;var c,f,d,g=e+" Iterator",y=!1,v=t.prototype,m=v[ce]||v["@@iterator"]||r&&v[r],b=!pe&&m||h(r),_="Array"==e&&v.entries||m;if(_&&(c=Vt(_.call(new t)),fe!==Object.prototype&&c.next&&(Vt(c)!==fe&&(he?he(c,fe):"function"!=typeof c[ce]&&k(c,ce,re)),ie(c,g,!0))),r==de&&m&&m.name!==de&&(y=!0,b=function(){return m.call(this)}),v[ce]!==b&&k(v,ce,b),ue[e]=b,r)if(f={values:h(de),keys:o?b:h("keys"),entries:h(ge)},a)for(d in f)!pe&&!y&&d in v||it(v,d,f[d]);else ht({target:e,proto:!0,forced:pe||y},f);return f}Q[$t]=!0;var ae=A.f,se=y("toStringTag"),ue={},le=Yt.IteratorPrototype,he=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(i){}return function(i,n){return function(t,e){if(c(t),!l(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i,n),e?t.call(i,n):i.__proto__=n,i}}():void 0),ce=y("iterator"),fe=Yt.IteratorPrototype,pe=Yt.BUGGY_SAFARI_ITERATORS,de="values",ge="entries",ye="String Iterator",ve=et.set,me=et.getterFor(ye);oe(String,"String",(function(t){ve(this,{type:ye,string:String(t),index:0})}),(function(){var t,e,i,n,r,o,a,s=me(this),u=s.string,l=s.index;return l>=u.length?{value:void 0,done:!0}:(e=l,r=String(ot(u)),o=rt(e),a=r.length,t=o<0||a<=o?"":(i=r.charCodeAt(o))<55296||56319<i||o+1===a||(n=r.charCodeAt(o+1))<56320||57343<n?r.charAt(o):r.slice(o,o+2),s.index+=t.length,{value:t,done:!1})}));var be={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},_e=y("unscopables"),we=Array.prototype;function xe(t){we[_e][t]=!0}null==we[_e]&&k(we,_e,ee(null));var Me="Array Iterator",Ee=et.set,Ae=et.getterFor(Me),ke=oe(Array,"Array",(function(t,e){Ee(this,{type:Me,target:at(t),index:0,kind:e})}),(function(){var t=Ae(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?{value:t.target=void 0,done:!0}:"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");ue.Arguments=ue.Array,xe("keys"),xe("values"),xe("entries");var Te=y("iterator"),Se=y("toStringTag"),Ie=ke.values;for(var Le in be){var Oe=b[Le],Ce=Oe&&Oe.prototype;if(Ce){if(Ce[Te]!==Ie)try{k(Ce,Te,Ie)}catch(o){Ce[Te]=Ie}if(Ce[Se]||k(Ce,Se,Le),be[Le])for(var Pe in ke)if(Ce[Pe]!==ke[Pe])try{k(Ce,Pe,ke[Pe])}catch(o){Ce[Pe]=ke[Pe]}}}function Re(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function je(t,e,i){if(Re(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}var Ne=y("iterator"),De=Array.prototype,ze=y("iterator"),Be=a((function(t){var e={};(t.exports=function(t,i,n,r,o){var a,s,u,l,h,f,p=je(i,n,r?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[ze]||t["@@iterator"]||ue[v(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(f=s)&&(ue.Array===f||De[Ne]===f)){for(u=0,l=st(t.length);u<l;u++)if((r?p(c(h=t[u])[0],h[1]):p(t[u]))===e)return e;return}a=s.call(t)}for(;!(h=a.next()).done;)if(function(t,e,i,n){try{return n?e(c(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&c(r.call(t)),e}}(a,p,h.value,r)===e)return e}).BREAK=e})),He=y("iterator"),Fe=!1;try{var Ue=0;({next:function(){return{done:!!Ue++}},return:function(){Fe=!0}})[He]=function(){return this}}catch(o){}function Ve(t,e){var i,n=c(t).constructor;return void 0===n||null==(i=c(n)[Je])?e:Re(i)}function qe(t){var e;oi.hasOwnProperty(t)&&(e=oi[t],delete oi[t],e())}function Ge(t){return function(){qe(t)}}function We(t){qe(t.data)}function Ye(t){b.postMessage(t+"",$e.protocol+"//"+$e.host)}var Ke,Ze,Xe,Je=y("species"),$e=b.location,Qe=b.setImmediate,ti=b.clearImmediate,ei=b.process,ii=b.MessageChannel,ni=b.Dispatch,ri=0,oi={},ai="onreadystatechange";Qe&&ti||(Qe=function(t){for(var e=[],i=1;i<arguments.length;)e.push(arguments[i++]);return oi[++ri]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ke(ri),ri},ti=function(t){delete oi[t]},"process"==e(ei)?Ke=function(t){ei.nextTick(Ge(t))}:ni&&ni.now?Ke=function(t){ni.now(Ge(t))}:ii?(Xe=(Ze=new ii).port2,Ze.port1.onmessage=We,Ke=je(Xe.postMessage,Xe,1)):!b.addEventListener||"function"!=typeof postMessage||b.importScripts||u(Ye)?Ke=ai in h("script")?function(t){Jt.appendChild(h("script"))[ai]=function(){Jt.removeChild(this),qe(t)}}:function(t){setTimeout(Ge(t),0)}:(Ke=Ye,b.addEventListener("message",We,!1)));var si,ui,li,hi,ci,fi,pi,di={set:Qe,clear:ti},gi=b.navigator,yi=gi&&gi.userAgent||"",vi=xt.f,mi=di.set,bi=b.MutationObserver||b.WebKitMutationObserver,_i=b.process,wi=b.Promise,xi="process"==e(_i),Mi=vi(b,"queueMicrotask"),Ei=Mi&&Mi.value;function Ai(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=Re(e),this.reject=Re(i)}function ki(t,e){if(c(t),l(e)&&e.constructor===t)return e;var i=Vi.f(t);return(0,i.resolve)(e),i.promise}function Ti(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function Si(t){return"function"==typeof t?t:void 0}function Ii(t,e){return arguments.length<2?Si(qi[t])||Si(b[t]):qi[t]&&qi[t][e]||b[t]&&b[t][e]}function Li(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e}function Oi(t,e,i){var n;e.notified||(e.notified=!0,n=e.reactions,Ui((function(){for(var r=e.value,o=1==e.state,a=0;n.length>a;)!function(i){var n,a,s,u=o?i.ok:i.fail,l=i.resolve,h=i.reject,c=i.domain;try{u?(o||(2===e.rejection&&gn(t,e),e.rejection=1),!0===u?n=r:(c&&c.enter(),n=u(r),c&&(c.exit(),s=!0)),n===i.promise?h(Qi("Promise-chain cycle")):(a=Li(n))?a.call(n,l,h):l(n)):h(r)}catch(i){c&&!s&&c.exit(),h(i)}}(n[a++]);e.reactions=[],e.notified=!1,i&&!e.rejection&&pn(t,e)})))}function Ci(t,e,i){var n,r;ln?((n=tn.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,!1,!0),b.dispatchEvent(n)):n={promise:e,reason:i},(r=b["on"+t])?r(n):t===hn&&function(t,e){var i=b.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}("Unhandled promise rejection",i)}function Pi(t,e,i,n){return function(r){t(e,i,r,n)}}function Ri(t,e,i,n){e.done||(e.done=!0,n&&(e=n),e.value=i,e.state=2,Oi(t,e,!0))}Ei||(si=function(){var t,e;for(xi&&(t=_i.domain)&&t.exit();ui;){e=ui.fn,ui=ui.next;try{e()}catch(t){throw ui?hi():li=void 0,t}}li=void 0,t&&t.enter()},hi=xi?function(){_i.nextTick(si)}:bi&&!/(iphone|ipod|ipad).*applewebkit/i.test(yi)?(ci=!0,fi=document.createTextNode(""),new bi(si).observe(fi,{characterData:!0}),function(){fi.data=ci=!ci}):wi&&wi.resolve?(pi=wi.resolve(void 0),function(){pi.then(si)}):function(){mi.call(b,si)});var ji,Ni,Di,zi,Bi,Hi,Fi,Ui=Ei||function(t){var e={fn:t,next:void 0};li&&(li.next=e),ui||(ui=e,hi()),li=e},Vi={f:function(t){return new Ai(t)}},qi=b,Gi=y("species"),Wi="Promise",Yi=di.set,Ki=y("species"),Zi=et.get,Xi=et.set,Ji=et.getterFor(Wi),$i=b[Wi],Qi=b.TypeError,tn=b.document,en=b.process,nn=b.fetch,rn=en&&en.versions,on=rn&&rn.v8||"",an=Vi.f,sn=an,un="process"==e(en),ln=!!(tn&&tn.createEvent&&b.dispatchEvent),hn="unhandledrejection",cn=zt(Wi,(function(){function t(){}var e=$i.resolve(1),i=(e.constructor={})[Ki]=function(e){e(t,t)};return!((un||"function"==typeof PromiseRejectionEvent)&&e.then(t)instanceof i&&0!==on.indexOf("6.6")&&-1===yi.indexOf("Chrome/66"))})),fn=cn||!function(t,e){if(!Fe)return!1;var i=!1;try{var n={};n[He]=function(){return{next:function(){return{done:i=!0}}}},function(t){$i.all(t).catch((function(){}))}(n)}catch(t){}return i}(),pn=function(t,e){Yi.call(b,(function(){var i,n=e.value;if(dn(e)&&(i=Ti((function(){un?en.emit("unhandledRejection",n,t):Ci(hn,t,n)})),e.rejection=un||dn(e)?2:1,i.error))throw i.value}))},dn=function(t){return 1!==t.rejection&&!t.parent},gn=function(t,e){Yi.call(b,(function(){un?en.emit("rejectionHandled",t):Ci("rejectionhandled",t,e.value)}))},yn=function(t,e,i,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===i)throw Qi("Promise can't be resolved itself");var r=Li(i);r?Ui((function(){var n={done:!1};try{r.call(i,Pi(yn,t,n,e),Pi(Ri,t,n,e))}catch(i){Ri(t,n,i,e)}})):(e.value=i,e.state=1,Oi(t,e,!1))}catch(i){Ri(t,{done:!1},i,e)}}};function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bn(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _n(t,e,i){return e&&bn(t.prototype,e),i&&bn(t,i),t}function wn(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xn(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)),n}function Mn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?xn(Object(i),!0).forEach((function(e){wn(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):xn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function En(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Sn(t,e,i){return(Sn=Tn()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&kn(r,i.prototype),r}).apply(null,arguments)}function In(t){var e="function"==typeof Map?new Map:void 0;return(In=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return Sn(t,arguments,An(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),kn(n,t)})(t)}function Ln(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function On(t){var e=Tn();return function(){var i,n,r,o=An(t);return n=this,!(r=e?(i=An(this).constructor,Reflect.construct(o,arguments,i)):o.apply(this,arguments))||"object"!=typeof r&&"function"!=typeof r?Ln(n):r}}function Cn(t,e,i){return(Cn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=An(t)););return t}(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function Pn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||jn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rn(t){return function(t){if(Array.isArray(t))return Nn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||jn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(t,e){if(t){if("string"==typeof t)return Nn(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Nn(t,e):void 0}}function Nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function Dn(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=jn(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}cn&&($i=function(t){!function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect Promise invocation")}(this,$i),Re(t),ji.call(this);var e=Zi(this);try{t(Pi(yn,this,e),Pi(Ri,this,e))}catch(t){Ri(this,e,t)}},(ji=function(){Xi(this,{type:Wi,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,i){for(var n in e)it(t,n,e[n],void 0);return t}($i.prototype,{then:function(t,e){var i=Ji(this),n=an(Ve(this,$i));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=un?en.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&Oi(this,i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Ni=function(){var t=new ji,e=Zi(t);this.promise=t,this.resolve=Pi(yn,t,e),this.reject=Pi(Ri,t,e)},Vi.f=an=function(t){return t===$i||t===Di?new Ni:sn(t)},"function"==typeof nn&&ht({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return ki($i,nn.apply(b,arguments))}})),ht({global:!0,wrap:!0,forced:cn},{Promise:$i}),ie($i,Wi,!1),zi=Ii(Wi),Bi=A.f,_&&zi&&!zi[Gi]&&Bi(zi,Gi,{configurable:!0,get:function(){return this}}),Di=qi[Wi],ht({target:Wi,stat:!0,forced:cn},{reject:function(t){var e=an(this);return e.reject.call(void 0,t),e.promise}}),ht({target:Wi,stat:!0,forced:cn},{resolve:function(t){return ki(this,t)}}),ht({target:Wi,stat:!0,forced:fn},{all:function(t){var e=this,i=an(e),n=i.resolve,r=i.reject,o=Ti((function(){var i=Re(e.resolve),o=[],a=0,s=1;Be(t,(function(t){var u=a++,l=!1;o.push(void 0),s++,i.call(e,t).then((function(t){l||(l=!0,o[u]=t,--s||n(o))}),r)})),--s||n(o)}));return o.error&&r(o.value),i.promise},race:function(t){var e=this,i=an(e),n=i.reject,r=Ti((function(){var r=Re(e.resolve);Be(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}}),ht({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=Ve(this,Ii("Promise")),i="function"==typeof t;return this.then(i?function(i){return ki(e,t()).then((function(){return i}))}:t,i?function(i){return ki(e,t()).then((function(){throw i}))}:t)}}),qi.Promise,"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}),"function"!=typeof Object.values&&(Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}),Math.hypot=Math.hypot||function(){for(var t=0,e=arguments.length,i=0;i<e;i++){if(arguments[i]===1/0||arguments[i]===-1/0)return 1/0;t+=arguments[i]*arguments[i]}return Math.sqrt(t)},Math.log2=Math.log2||function(t){return Math.log(t)*Math.LOG2E},"undefined"!=typeof window?("performance"in window==0&&(window.performance={}),Hi=window.performance):"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&("performance"in self==0&&(self.performance={}),Hi=self.performance),Hi&&"function"!=typeof Hi.now&&(Fi=+new Date,Hi.now=function(){return new Date-Fi});var zn=Bn;function Bn(t,e){this.x=t,this.y=e}Bn.prototype={clone:function(){return new Bn(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,i=t.y-this.y;return e*e+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,i=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=i,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=e*this.x-i*this.y,r=i*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var i=Math.cos(t),n=Math.sin(t),r=e.x+i*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+i*(this.y-e.y);return this.x=r,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Bn.convert=function(t){return t instanceof Bn||!Array.isArray(t)?t:new Bn(t[0],t[1])};var Hn=Fn;function Fn(t,e,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(Un,this,e)}function Un(t,e,i){1==t?e.id=i.readVarint():2==t?function(t,e){for(var i=t.readVarint()+t.pos;t.pos<i;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(i,e):3==t?e.type=i.readVarint():4==t&&(e._geometry=i.pos)}Fn.types=["Unknown","Point","LineString","Polygon"],Fn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i,n=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<n;)if(o||(r=7&(i=t.readVarint()),o=i>>3),o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new zn(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}return e&&u.push(e),u},Fn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e,i=t.readVarint()+t.pos,n=1,r=0,o=0,a=0,s=1/0,u=-1/0,l=1/0,h=-1/0;t.pos<i;)if(r||(n=7&(e=t.readVarint()),r=e>>3),r--,1===n||2===n)(o+=t.readSVarint())<s&&(s=o),u<o&&(u=o),(a+=t.readSVarint())<l&&(l=a),h<a&&(h=a);else if(7!==n)throw new Error("unknown command "+n);return[s,l,u,h]},Fn.prototype.toGeoJSON=function(t,e,i){var n,r=this.extent*Math.pow(2,i),o=this.extent*t,a=this.extent*e,s=this.loadGeometry(),u=Fn.types[this.type];function l(t){for(var e=0;e<t.length;e++){var i=t[e],n=180-360*(i.y+a)/r;t[e]=[360*(i.x+o)/r-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:for(var h=[],c=0;c<s.length;c++)h[c]=s[c][0];l(s=h);break;case 2:for(c=0;c<s.length;c++)l(s[c]);break;case 3:for(s=function(t){var e=t.length;if(e<=1)return[t];for(var i,n,r=[],o=0;o<e;o++){var a=function(t){for(var e,i,n=0,r=0,o=t.length,a=o-1;r<o;a=r++)e=t[r],n+=((i=t[a]).x-e.x)*(e.y+i.y);return n}(t[o]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&r.push(i),i=[t[o]]):i.push(t[o]))}return i&&r.push(i),r}(s),c=0;c<s.length;c++)for(n=0;n<s[c].length;n++)l(s[c][n])}1===s.length?s=s[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:s},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Vn=qn;function qn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Gn,this,e),this.length=this._features.length}function Gn(t,e,i){15===t?e.version=i.readVarint():1===t?e.name=i.readString():5===t?e.extent=i.readVarint():2===t?e._features.push(i.pos):3===t?e._keys.push(i.readString()):4===t&&e._values.push(function(t){for(var e=null,i=t.readVarint()+t.pos;t.pos<i;){var n=t.readVarint()>>3;e=1==n?t.readString():2==n?t.readFloat():3==n?t.readDouble():4==n?t.readVarint64():5==n?t.readVarint():6==n?t.readSVarint():7==n?t.readBoolean():null}return e}(i))}function Wn(t,e,i){var n;3!==t||(n=new Vn(i,i.readVarint()+i.pos)).length&&(e[n.name]=n)}qn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Hn(this._pbf,e,this.extent,this._keys,this._values)};var Yn,Kn=function(t,e){this.layers=t.readFields(Wn,{},e)},Zn=Hn,Xn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Jn={};(function(){var t,e,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},n="undefined"!=typeof window&&window===this||void 0===Xn||null==Xn?this:Xn;if("function"==typeof Object.setPrototypeOf)t=Object.setPrototypeOf;else{t:{var r={};try{r.__proto__={ea:!0},e=r.ea;break t}catch(t){}e=!1}t=e?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=t;!function(t,e){if(e){var r=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(e=e(o=r[t=t[t.length-1]]))!=o&&null!=e&&i(r,t,{configurable:!0,writable:!0,value:e})}}("Object.setPrototypeOf",(function(t){return t||o}));var a=this||self;function s(t){var e=vn(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function u(t){return"function"==s(t)}function l(t){var e=vn(t);return"object"==e&&null!=t||"function"==e}function h(t,e){t=t.split(".");var i,n=a;t[0]in n||void 0===n.execScript||n.execScript("var "+t[0]);for(;t.length&&(i=t.shift());)t.length||void 0===e?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=e}function c(t,e){function i(){}i.prototype=e.prototype,t.ua=e.prototype,t.prototype=new i,t.prototype.constructor=t}var f=Math,p=f.min,d=f.max,g=f.round,y=f.floor,v=f.ceil,m=f.abs,b=f.log,_=f.sqrt,w=f.pow,x=f.sin,M=f.asin,E=f.cos,A=f.tan,k=f.atan2,T=f.PI,S=T/2,I=T/4,L=2*T,O=3*T,C=T/180,P=180/T;function R(t,e,i){return i<t?i:t<e?e:t}function j(t,e,i){return e<i?e<=t&&t<=i:i<=t&&t<=e}function N(t,e,i,n,r,o){return _(w((t-r)*(n-o)-(e-o)*(i-r),2)/(w(i-r,2)+w(n-o,2)))}h("H.math.normalize",(function(t,e,i){return e-=i=i||0,(t-=i)-y(t/e)*e+i})),h("H.math.clamp",R);var D={NONE:0,VERTEX:1,EDGE:2,SURFACE:3};function z(t,e){var i=t.x;t=t.y;for(var n,r,o,a,s=e.length,u=s,l=e[0],h=0,c=0,f=0;1!=h&&1<u;)r=e[--u],n=e[--u],a=e[u?u-1:(s+(u-1))%s],o=e[u?u-2:(s+(u-2))%s],i<=n&&n<=i&&t<=r&&r<=t||i<=o&&o<=i&&t<=a&&a<=t?h=1:h||n!==i?!h&&j(i,n,o)&&((n<i&&i<o||i<n&&o<i)&&(c+=t<(l=r+(i-n)/(o-n)*(a-r)),f+=l<t),h=j(t,r,a)&&N(i,t,n,r,o,a)<=0?2:0):(o===i&&(r<t&&t<a||t<r&&a<t)||(l<=i&&i<o||i<=l&&o<i)&&(t<=r?++c:++f),h=j(t,r,a)&&N(i,t,n,r,o,a)<=0?2:0),l=n;return h||0===f||0==c%2||(h=3),h!==D.NONE}function B(t,e){this.x=+t,this.y=+e}function H(t,e,i,n,r,o,a,s,u,l){return t={x:t,y:e,next:i||null,s:n||null,ta:r||null,X:o||null,o:!!a,T:s||0,O:u||0,alpha:l||0},n&&(t.s.next=t),i&&(t.next.s=t),t}function F(t){for(;t&&t.o;)t=t.next;return t}function U(t){if(t)for(;t.next;)t=t.next;return t}function V(t){var e=U(t);(e.s.next=t).s=e.s}function q(t){for(var e=[];t;)e.push(t.x,t.y),t=t.next;return e}function G(t,e,i){for(e=e.next;e!==i&&e.alpha<=t.alpha;)e=e.next;t.next=e,t.s=e.s,(t.next.s=t).s.next=t}function W(t,e){for(var i,n=null,r=0,o=t.length;r<o;r++)(i=H(t[r].x,t[r].y,n)).qa=e,(i.next=n)&&(n.s=i),n=i;return n}function Y(t,e,i,n){return(t-=i)*t+(e-=n)*e}h("H.math.CoverType",D),h("H.math.isPointInsidePolygon",z),h("H.math.flatten",(function(t){for(var e=t.length,i=new Float64Array(2*e),n=e&&t[0].x!==X;e--;){var r=t[e],o=e<<1;i[o]=n?r.x:r[0],i[1+o]=n?r.y:r[1]}return i})),h("H.math.Point",B),(B.prototype.set=B).prototype.clone=function(t){return t?(t.x=this.x,t.y=this.y):t=new B(this.x,this.y),t},B.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},B.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},B.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0===e?t:e,this},B.prototype.round=function(){return this.x=g(this.x),this.y=g(this.y),this},B.prototype.floor=function(){return this.x=y(this.x),this.y=y(this.y),this},B.prototype.ceil=function(){return this.x=v(this.x),this.y=v(this.y),this},B.prototype.equals=B.prototype.w=function(t){return!(!t||this.x!==t.x||this.y!==t.y)},B.prototype.getNearest=B.prototype.la=function(t,e){var i,n=e.x-t.x,r=e.y-t.y,o=t;return(n||r)&&(o=(i=((this.x-t.x)*n+(this.y-t.y)*r)/(n*n+r*r))<=0?t:1<=i?e:new B(t.x+i*n,t.y+i*r)),o},B.prototype.distance=B.prototype.R=function(t){return _(w(this.x-t.x,2)+w(this.y-t.y,2))},B.fromIPoint=function(t){if(!t)throw Error("invalid argument");return t instanceof B?t:new B(t.x,t.y)},h("H.math.clipping.clipStrips",(function(t,e,i,n,r,o){var a,s,u,l=t.length;if(l)for(a=[];l--;)for(var h,c,f=t[l],p=f.length,d=0,g=1;g<p;g++)(u=function(t,e,i,n,r,o){var a=t.x;t=-t.y;var s=e.x;if(e=-e.y,i=-i,o=-o,s<a){if(r<s||a<n)return;var u=a,l=t;a=s,t=e,s=u,e=l,u=1}else if(r<a||s<n)return;if(e<t){if(i<e||t<o)return;var h=1;t=-t,e=-e,l=o,o=-i,i=-l}else if(i<t||e<o)return;if(a<n){if((t+=(n-a)*(e-t)/(s-a))>i)return;a=n}if(t<o){if((a+=(o-t)*(s-a)/(e-t))>r)return;t=o}return r<s&&(e=t+(r-a)*(e-t)/(s-a),s=r),i<e&&(s=a+(i-t)*(s-a)/(e-t),e=i),h&&(t=-t,e=-e),u?[new B(s,-e),new B(a,-t)]:[new B(a,-t),new B(s,-e)]}(f[g-1],f[g],i,e,n,r))&&(h=u[0],c=u[1],d&&d.w(h)?s.push(c):a.push(s=u),d=c,o&&(g=p,l=0));else a=t;return a})),h("H.math.clipping.clipPolygon",(function(t,e,i){var n;t=W(t,!0),e=W(e,!1);var r={},o=n=1;switch(~~(i||0)){case 1:o=n=0;break;case 2:n=0,o=1;break;case 3:n=1,o=0}i=n;var a,s,u,l,h,c,f=o;if(e&&t){for(e.M=H(e.x,e.y,null,U(e)),t.M=H(t.x,t.y,null,U(t)),o=e;o.next;o=o.next)if(!o.o)for(n=t;n.next;n=n.next)n.o||(c=function t(e,i,n,r,o){var a,s=i.x-e.x,u=i.y-e.y,l=r.x-n.x,h=r.y-n.y,c=s*h-u*l;return c?(l=((n.x-e.x)*h-(n.y-e.y)*l)/c,c=(u*(n.x-e.x)-s*(n.y-e.y))/c,l<0||1<l||c<0||1<c?0:(0===l?a=e:1===l?a=i:0===c?a=n:1===c&&(a=r),a?(a.x+=2480549651603763e-20,a.y+=7321997314118067e-20,a.M&&(a.M.x=a.x,a.M.y=a.y),t(e,i,n,r,o)):(o.xa=e.x+l*s,o.ya=e.y+l*u,o.fa=l,o.ga=c,1))):0}(o,a=F(o.next),n,s=F(n.next),r))&&(c=r.fa,u=r.ga,G(c=H(l=r.xa,h=r.ya,null,null,null,null,!0,0,0,c),o,a),G(a=H(l,h,null,null,null,null,!0,0,0,u),n,s),(c.X=a).X=c);for(r=z(e,q(t)),i&&(r=!r),o=e;o;o=o.next)o.o&&(r=!(o.T=r));for(r=z(t,q(e)),f&&(r=!r),n=t;n.next;n=n.next)n.o&&(r=!(n.T=r));for(V(e),V(t);(t=function(t){var e=t;if(e)for(;(e=e.next)!=t&&(!e.o||e.o&&e.O););return e}(e))!=e;){for(i=null;!t.O;t=t.X){for(r=t.T;(i=H(t.x,t.y,i)).artificial=t.o||t.qa,t.O=1,t=r?t.next:t.s;)if(t.o){t.O=1;break}if(!t)break}i.ta=p;var p=i}return p}})),h("H.math.simplifyDP",(function(t,e,i){return function t(e,i,n,r,o){var a=0,s=r,u=e[r].x,l=e[r].y,h=e[o].x,c=e[o].y,f=r+1,p=Y(u,l,h,c);if(p)for(;f<o;){var d=e[f++],g=d.x,y=((g-u)*(h-u)+((d=d.y)-l)*(c-l))/p;a<(g=y<0?Y(g,d,u,l):1<y?Y(g,d,h,c):Y(g,d,u+y*(h-u),l+y*(c-l)))&&(a=g,s=f-1)}else for(;f<o;)a<(g=Y(g=(d=e[f++]).x,d=d.y,u,l))&&(a=g,s=f-1);return i<=a||0<n&&s-r?(--n,1<s-r?(r=t(e,i,n,r,s)).splice(r.length-1,1):r=[e[r]],1<o-s?r.concat(t(e,i,n,s,o)):r.concat(e.slice(s,o+1))):[e[r],e[o]]}(t,e*e,i||0,0,t.length-1)}));var K=this,Z=String,X=self.eval("undefined"),J=self.eval("null"),$="prototype constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q(t,e){if(1==(t instanceof e&&t.constructor===e))throw new TypeError("Illegal constructor "+rt(e))}h("H.lang.isArray",(function(t,e,i,n){var r;if(!(r="Array"===it(t))&&e)throw new lt(e,i,n!==X?n:t);return r})),h("H.lang.isString",(function(t){return"string"==typeof t}));var tt=isNaN;function et(t){return t===+t}function it(t){var e=Object[$[0]][$[6]].call(t).match(/^\[object (\w+)\]$/);return e?e[1]:vn(t)}h("H.lang.isNumber",et),h("H.lang.isInteger",Number.isInteger?Number.isInteger:function(t){return"number"==typeof t&&0==t%1});var nt=[];function rt(t,e,i,n){var r,o,a="",s=arguments.length<2;return s&&(e={H:K.H},i="",n=nt.slice()),st(e,!0,(function(e,o){try{if(r=e[o],s=r,st(e,!(h=[]),(function(t,e){t[e]===s&&h.push(e)})),o=h.sort(ot)[0],!(l(r)&&r.window===r&&r.self===r||l(r)&&0<r.nodeType&&u(r.cloneNode))&&l(r)){if(r===t)return a=i+"."+o,1;if(n.indexOf(r)<0&&(n.push(r),a=rt(t,r,i+"."+o,n)))return 1}}catch(e){}var s,h})),s&&(a=a?a.substr(1).replace("."+$[0]+".","#"):"~"+(u(t)?((o=/^\s*function ([^\( ]+)/.exec(o=t))?o[1]:"anonymous")+"()":it(t))),a}function ot(t,e){return e.length-t.length}nt.indexOf(nt)<0&&nt.push(nt);var at=Object[$[0]][$[2]];function st(t,e,i){var n;if(t){for(r in t)if((!e||at.call(t,r))&&i(t,r,!0))return;for(n=$.length;n--;){var r=$[n];if((!e||at.call(t,r))&&i(t,r,!1))break}}}function ut(t,e,i){i[e]="#"+e}function lt(t,e,i){var n,r,o=arguments.length;return(e=e!==X?+e:e)!==X&&((r=n=(r=/^.*?\(([^\)]+)/.exec((""+t).replace(/(\/\*([\s\S]*?)\*\/)|(\/\/(.*)$)/gm,"")))?Z(r[1].replace(/\s+/g,"")).split(","!==X?",":" "):[]).forEach(ut),r=r[e]||"#"+e),n=t?rt(t):"",o=2<o?Z(i):"",(r||o)&&(n+=" (Argument "+(r||"")+(o?" "+o:"")+")"),o=Error(n),Object.setPrototypeOf(o,lt.prototype),o}function ht(t,e,i){var n=R(+t,-90,90);if(e&&tt(n))throw new lt(e,i,t);return n}function ct(t,e,i){var n,r=+t;if((r<-180||180<r)&&(r=(0==(n=(r+180)%360)<0?n:360+n)-180),e&&tt(r))throw new lt(e,i,t);return r}function ft(t,e,i){var n;if(t!==X&&tt(n=+t)&&e)throw new lt(e,i,t);return n}function pt(){Q(this,pt)}function dt(t,e,i){this.lat=ht(t,dt,0),this.lng=ct(e,dt,1),i!==X&&(this.alt=ft(i,dt,2))}function gt(t,e,i){var n=l(t)&&!(tt(t.lat=ht(t.lat))||tt(t.lng=ct(t.lng))||t.alt!==X&&tt(t.alt=ft(t.alt)));if(!n&&e)throw new lt(e,i,t);return n}function yt(t,e,i,n){vt(this,ht(t,yt,0),ct(e,yt,1),ht(i,yt,2),ct(n,yt,3))}function vt(t,e,i,n,r){return t.f=i,t.g=r,e<n&&(i=e,e=n,n=i),t.i=e,t.h=n,t.m=t.b=t.c=null,t}function mt(t,e){return(t=e-t)+(t<0?360:0)}function bt(t,e){return(t+=e/2)-(180<t?360:0)}function _t(t,e,i,n,r,o,a,s,u){i=p(i,a),t=d(t,r);var l=bt(e,r=mt(e,n)),h=bt(o,a=mt(o,s))-l,c=(h+=h-1e-6<0?360:0)-1e-6<180?(l=e,s):(h=360-h,l=o,n);return 360<=(h=h+r/2+a/2)+5e-7?(l=-180,c=180):h-5e-7<r?(l=e,c=n):h-5e-7<a&&(l=o,c=s),u?vt(u,t,l,i,c):new yt(t,l,i,c)}function wt(t,e,i){return i||(gt(t,wt,0),gt(e,wt,1)),new yt(t.lat,t.lng,e.lat,e.lng)}function xt(t,e,i,n,r,o){Q(this,xt),this.sa=t||10,this.c=this.b=null,this.j=n||0,this.l=r||0,this.m=e||1,this.u=i||1,this.I=!!o,this.flush()}function Mt(t,e,i){var n,r;if(t.I&&(n=t.c))for(r=3;0<=r;r--){var o=e[r];if(r%3?o>=n[r]:o<=n[r]){if(!i){t.c=null;break}n[r]=o}}}function Et(t,e){var i,n=t.a;if(e){var r=e;if(r!==n)for(n=r;r=r.c;)(r.entries||1<r.a)&&(n=r)}else for(;!n.entries&&(i=n.a)<2&&i;)n=r;t.a=n}c(lt,Error),h("H.lang.InvalidArgumentError",lt),lt.prototype.name="InvalidArgumentError",h("H.geo.isDBC",(function(t,e){return 0!=(t<0^e<0)&&180<m(e-t)})),h("H.geo.AbstractGeometry",pt),pt.prototype.getBoundingBox=pt.prototype.D,pt.prototype.equals=pt.prototype.w,pt.prototype.a="",pt.prototype.l="",pt.prototype.toString=function(){return this.I([this.a.toUpperCase()," "]).join("")},pt.prototype.toGeoJSON=pt.prototype.va=function(){return{type:this.l,coordinates:this.u()}},pt.prototype.forWorkerMessage=pt.prototype.U=function(){return{type:this.a,coordinates:this.j(),boundingBox:this.D().U()}},c(dt,pt),h("H.geo.Point",dt),dt.prototype.equals=dt.prototype.w=function(t){return this===t||!!t&&this.lat===t.lat&&this.lng===t.lng&&(this.alt||0)===(t.alt||0)},dt.prototype.distance=dt.prototype.R=function(t){var e,i;return this===t||this.lat===t.lat&&this.lng===t.lng?0:(e=this.lat*C,i=t.lat*C,12742001.58*M(p(1,_(w(x((e-i)/2),2)+E(e)*E(i)*w(x((this.lng*C-t.lng*C)/2),2)))))},dt.prototype.walk=dt.prototype.wa=function(t,e,i){var n,r,o,a,s,u,l;return i?((e/=6371000.79)&&(t*=C,s=C*this.lat,n=x(s),r=x(e),o=E(e),a=C*this.lng,u=E(s),s=M(u*E(t)*r+n*o),u=(t=(a+(t=k(x(t)*u*r,o-n*x(s)))+T)%(2*T)-T)*P),e?new dt(s*P,(u+540)%360-180):this):0==(90+(t=(t%360+360)%360))%180?(s=this.lng+e/(6371000.79*L*E(this.lat*C))*(270===t?-360:360),new dt(this.lat,(s+540)%360-180)):((e/=6371000.79)&&(t*=C,a=this.lat*C,n=this.lng*C,o=(r=a+e*E(t))-a,s=b(A(r/2+I)/A(a/2+I)),s=tt(o/s)?E(a):o/s,l=e*x(t)/s,m(r)>S&&(r=0<r?T-r:-(T+r))),e?new dt(r*P,((n+l+O+(m(a+o)>S?T:0))%L-T)*P):this)},dt.prototype.getBoundingBox=dt.prototype.D=function(){return new yt(this.lat,this.lng,this.lat,this.lng)},dt.validate=gt,dt.fromIPoint=function t(e){if(!e)throw new lt(t,0,e);return new dt(e.lat,e.lng,e.alt)},dt.prototype.a="Point",dt.prototype.I=function(t){return t.push("(",this.lng," ",this.lat,")"),t},dt.prototype.l="Point",dt.prototype.u=function(){return[this.lng,this.lat,this.alt||0]},dt.prototype.j=function(){return[this.lat,this.lng,this.alt||0]},c(yt,pt),h("H.geo.Rect",yt),yt.prototype.a="Polygon",yt.prototype.I=function(t){var e=this.i,i=this.f,n=this.h,r=this.g;return t.push("(","(",i," ",e,",",r," ",e,",",r," ",n,",",i," ",n,",",i," ",e,")",")"),t},yt.prototype.equals=yt.prototype.w=function(t){return this===t||!!t&&this.i===t.i&&this.f===t.f&&this.h===t.h&&this.g===t.g},yt.prototype.clone=function(){return new yt(this.i,this.f,this.h,this.g)},yt.prototype.getTopLeft=yt.prototype.W=function(){return this.m||(this.m=new dt(this.i,this.f)),this.m},yt.prototype.getBottomRight=yt.prototype.V=function(){return this.b||(this.b=new dt(this.h,this.g)),this.b},yt.prototype.getTop=yt.prototype.na=function(){return this.i},yt.prototype.getBottom=yt.prototype.ha=function(){return this.h},yt.prototype.getLeft=yt.prototype.ja=function(){return this.f},yt.prototype.getRight=yt.prototype.ma=function(){return this.g},yt.prototype.getCenter=yt.prototype.F=function(){return this.c||(this.c=new dt(this.h+(this.i-this.h)/2,bt(this.f,this.A()))),this.c},yt.prototype.getWidth=yt.prototype.A=function(){return mt(this.f,this.g)},yt.prototype.getHeight=yt.prototype.G=function(){return this.i-this.h},yt.prototype.isCDB=yt.prototype.N=function(){return this.f>this.g},yt.prototype.isEmpty=yt.prototype.ra=function(){return!this.A()&&!this.G()},yt.prototype.getBoundingBox=yt.prototype.D=function(){return new yt(this.i,this.f,this.h,this.g)},yt.prototype.containsLatLng=yt.prototype.L=function(t,e,i){var n=this.F();return i||(t=ht(t,this.L,0),e=ct(e,this.L,1)),(t=(e=this.B(t,e,i)).F()).lat===n.lat&&t.lng===n.lng&&this.G()===e.G()&&this.A()===e.A()},yt.prototype.containsPoint=yt.prototype.$=function(t,e){return e||gt(t,this.$,0),this.L(t.lat,t.lng,e)},yt.prototype.containsRect=yt.prototype.aa=function(t,e){var i=this.F();if(!(e||t instanceof yt))throw new lt(this.aa,0,t);return(t=(e=this.J(t,e)).F()).lat===i.lat&&t.lng===i.lng&&this.G()===e.G()&&this.A()===e.A()},yt.prototype.mergeLatLng=yt.prototype.B=function(t,e,i,n){if(!i){if(tt(t=ht(t)))throw new lt(this.B,0,t);if(tt(e=ct(e)))throw new lt(this.B,1,e)}return _t(this.i,this.f,this.h,this.g,t,e,t,e,n)},yt.prototype.mergePoint=yt.prototype.ca=function(t,e,i){return e||gt(t,this.ca,0),this.B(t.lat,t.lng,e,i)},yt.prototype.mergeRect=yt.prototype.J=function(t,e,i){if(!(e||t instanceof yt))throw new lt(this.J,0,t);return _t(this.i,this.f,this.h,this.g,t.i,t.f,t.h,t.g,i)},yt.prototype.mergeTopLeftBottomRight=yt.prototype.C=function(t,e,i,n,r,o){return r||(t=ht(t,this.C,0),e=ct(e,this.C,1),i=ht(i,this.C,2),n=ct(n,this.C,3)),_t(this.i,this.f,this.h,this.g,t,e,i,n,o)},yt.prototype.intersects=yt.prototype.ba=function(t,e){var i=this.f<=this.g,n=t.f<=t.g,r=this.f<t.g,o=t.f<this.g;if(!(e||t instanceof yt))throw new lt(this.ba,0,t);return this.h<=t.i&&t.h<=this.i&&(!i&&(!n||r||o)||!n&&(r||o)||r&&o)},yt.merge=_t,yt.fromPoints=wt,yt.coverPoints=function t(e,i){var n=1,r=e.length,o=null,a=s(e);if("array"!=a&&("object"!=a||"number"!=typeof e.length))throw new lt(t,0,e);if(0<r)for(o=wt(a=e[0],a,i);n<r;n++)a=e[n],o.B(a.lat,a.lng,i,o);return o},yt.coverLatLngAlts=function t(e,i){var n,r=3,o=e.length;if(!(i||e&&null!=e.length))throw new lt(t,0,e);if(0<o)for(n=new yt(e[0],e[1],e[0],e[1]);r<o;r+=3)n.B(e[r],e[r+1],i,n);return n},yt.coverRects=function t(e,i){var n,r=1,o=e.length;if(i&&(!e||null==e.length))throw new lt(t,0,e);if(0<o)for(n=new yt(e[0].i,e[0].f,e[0].h,e[0].g);r<o;r++)n.J(e[r],i,n);return n},yt.prototype.resizeToCenter=yt.prototype.da=function(t,e){var i=this.f,n=this.i,r=this.g,o=this.h,a=this.F().lng;gt(t,this.da,0);var s=t.lat-o-(n-o)/2,u=t.lng-a;return t=(t=i+((u=180<u||u<-180?-(a+t.lng):u)<0?2*u:0))<-180?360+t:t,r=180<(r+=0<u?2*u:0)?r-360:r,90<=(n=0<s?n+2*s:n)&&(n=90),(o=s<0?o+2*s:o)<=-90&&(o=-90),e?vt(e,n,t,o,r):new yt(n,t,o,r)},yt.prototype.l="Polygon",yt.prototype.u=function(){return[[this.f,this.i,0],[this.g,this.i,0],[this.g,this.h,0],[this.f,this.h,0],[this.f,this.i,0]]},yt.prototype.U=function(){return this.j()},yt.prototype.j=function(){return[this.i,this.f,this.h,this.g]},xt.prototype.remove=function(t){var e,i,n,r,o,a,s=!1;if(t&&(e=t.a)&&e.b===this&&(i=e.entries)&&0<=(n=i.indexOf(t))){for(i.splice(n,1),i=this.a;e;)(r=e.entries)&&r.length||(r&&delete e.entries,e.a||!(o=e.c))?e=J:((n=o)[a=(s=e).j]===s&&(delete n[a],delete s.c,--n.a),i===e&&(i=o),e=o);this.a!==i&&(this.a=i,Et(this)),Mt(this,t,!1),s=!0}return s},xt.prototype.flush=function(){var t=new kt(null,NaN,this.j-this.m,this.l-this.u,this.j+this.m,this.l+this.u);(t.b=this).a=this.b=t,this.c=null},xt.prototype.o=function(t,e,i,n,r,o){var a=[],s=this.a,u=this.b;return t<=s[5]&&e<=s[6]&&(r?i>=s[7]:i>s[7])&&(o?n>=s[4]:n>s[4])&&function t(e,i,n,r,o,a,s,u,l){var h,c=i.entries,f=i[7],p=i[4],d=i[5],g=i[6],y=i[8],v=i[9];if(c){var m=c.length;if(p<o||f<r||s<g||a<d)for(;m--;)p=(f=c[m])[3],d=f[0],g=f[1],o<=f[2]&&r<=g&&(d<s||u&&d==s)&&(p<a||l&&p==a)&&n.push(f);else for(;m--;)n.push(c[m])}(y<a||l&&a==y)&&(o<v&&(h=i[1])&&t(e,h,n,r,o,a,s,u,l),(v<s||u&&s==v)&&(h=i[3])&&t(e,h,n,r,o,a,s,u,l)),r<y&&(o<v&&(h=i[0])&&t(e,h,n,r,o,a,s,u,l),(v<s||u&&s==v)&&(h=i[2])&&t(e,h,n,r,o,a,s,u,l))}(this,s,a,t,e,i,n,o||n>=u[6],r||i>=u[5]),a};var At=0;function kt(t,e,i,n,r,o){this.j=e,t&&(this.c=t,this.b=t.b,r=1&e?(i=t[8],t[5]):(i=t[7],t[8]),o=2&e?(n=t[9],t[6]):(n=t[4],t[9])),this[7]=i,this[5]=r,this[8]=(i+r)/2,this[4]=n,this[6]=o,this[9]=(n+o)/2}function Tt(t,e,i,n,r,o){Tt.ua.constructor.apply(this,arguments)}function St(t,e,i,n,r,o,a){var s,u,l=e[8],h=e[9];return a&&(r<l||(s=l<=i))&&(o<h||(u=h<=n))?i=(l=St)(t,e=e[s|=u<<1]||(++e.a,e[s]=new kt(e,s)),i,n,r,o,a-1):(n=i=new It(i,n,r,o),(e.entries||(e.entries=[])).push(n),n.a=e,Mt(t,i,!0),Et(t,e)),i}function It(t,e,i,n){this.id=At++,this[0]=e,this[1]=i,this[2]=n,this[3]=t}function Lt(t){this.l=new Tt(+t||10,180,90,0,0,!0),this.j=[],this.m=!1,this.a=this.b=this.c=null}function Ot(t,e,i,n,r,o){if(o)o=new It(r,-e,i+360,-n),t.j.push(o),t.m=!0,t.a&&t.a.C(e,i,n,r,!0,t.a);else{var a=-e,s=-n,u=(o=t.l).b,l=u[5],h=u[6];if(!(u[7]<=i&&u[4]<=a&&(r<l||l===r&&l===u.b.b[5])&&(s<h||h===s&&h===u.b.b[6])))throw Error("Coordinates out of bounds");o=St(o,o.b,i,a,r,s,o.sa),t.b&&t.b.C(e,i,n,r,!0,t.b)}return t.c=null,o}function Ct(t,e,i,n,r,o,a){var s=(t=t.j).length,u=[];if(s)for(var l=i+360,h=r+360;s--;){var c=t[s];(Pt(c,e,i,n,r,o,a)||Pt(c,e,l,n,h,o,a))&&u.push(c)}return u}function Pt(t,e,i,n,r,o,a){var s=t[3],u=t[0],l=t[1];return t=t[2],(o?u<=n:u<n)&&(a?s<=r:s<r)&&e<=t&&i<=l}function Rt(t,e){var i,n;if(i=e.length){for(var r=t.length,o={};r--;)o[t[r].id]=1;for(;i--;)(n=e[i]).id in o||t.push(n)}}function jt(){}function Nt(t,e,i){if(this.l=[],e&&this.K(e),i&&!u(i))throw new lt(Nt,2,i);this.b=0,this.m=i,this.a={},this.j=this.c=null,this.Z(t)}function Dt(t,e){return e&&(t.c=Bt(t,e,t.c)),e}function zt(t){for(;t.b>t.u&&t.j;)Ht(t,t.j,!0)}function Bt(t,e,i){return i!==e&&((e.H||e.v)&&Ht(t,e),(e.H=i)&&(e.v=i.v,i.v=e),e.v||(t.c=e),e.H||(t.j=e),t.b+=e.size),e}function Ht(t,e,i){var n=e.v,r=e.H;if((n||r||e==t.c&&e==t.j)&&(n?n.H=r:t.c=r,r?r.v=n:t.j=n,t.b-=e.size,i)){for(i=t.l.length;i--;)t.l[i].call(t,e.id,e.data,e.size);delete t.a[e.id]}e.H=e.v=null}kt.prototype.a=0,c(Tt,xt),h("H.geo.QuadTree",Lt),Lt.prototype.N=function(){return this.m},Lt.prototype.D=function(){var t;if(!this.c){var e,i,n=[];if((a=!this.b)&&(s=(o=this.l).c,o.I&&!s&&((a=o.a).entries||a[0]||a[1]||a[2]||a[3])&&(s=function t(e,i){for(var n,r,o=0,a=3;0<=a;a--){for(var s=a+4,u=0<a%3,l=[],h=i[a],c=e[a],f=c.length;f--;){var p=c[f];if(n=p.entries)for(r=n.length;r--;){var d=n[r][a];(u?h<d:d<h)&&(h=d)}for(r=4;r--;)(n=p[r])&&(u?n[s]>h:n[s]<h)&&l.push(n)}o+=l.length,i[a]=h,e[a]=l}return o&&(i=t(e,i)),i}([s=[a],s,s,s],[a[6],a[7],a[4],a[5]]),o.c=s),a=o=s),a&&(this.b=new yt(-o[0],o[3],-o[2],o[1])),(t=this.b)&&n.push(t),!this.a&&(i=(e=this.j).length)){for(a=360,s=-(o=90),u=0;i--;)var r=e[i],o=p(o,r[0]),a=p(a,r[3]),s=d(s,r[2]),u=d(u,r[1]);this.a=new yt(-o,a,-s,u-360)}(t=this.a)&&n.push(t),(t=n[0])&&(n[1]&&(t=t.J(n[1],!0)),this.c=t)}return this.c},Lt.prototype.insertBoundingBox=Lt.prototype.oa=function(t){var e=t.W(),i=t.V();return(t=t.N())?Ot(this,e.lat,i.lng,i.lat,e.lng,t):Ot(this,e.lat,e.lng,i.lat,i.lng,t)},Lt.prototype.remove=function(t){var e,i;return t.a?(i=this.l.remove(t),this.b=null):(i=0<=(t=(e=this.j).indexOf(t)))&&(e.splice(t,1),this.m=0<e.length,this.a=null),i&&(this.c=null),i},Lt.prototype.intersectBoundingBox=Lt.prototype.pa=function(t,e,i){var n=this.l,r=t.W(),o=t.V(),a=-r.lat,s=(r=r.lng,-o.lat);return o=o.lng,!e&&a==s||!i&&r===o?t=[]:t.N()?(Rt(t=n.o(-180,a,o,s,i,e),n.o(r,a,180,s,!1,e)),Rt(t,Ct(this,a,o,s,r+360,e,i))):Rt(t=n.o(r,a,o,s,i,e),Ct(this,a,r,s,o,e,i)),t},h("H.util.ICache",jt),jt.prototype.add=function(){},jt.prototype.get=function(){},jt.prototype.drop=jt.prototype.S=function(){},jt.prototype.forEach=function(){},jt.prototype.removeAll=jt.prototype.Y=function(){},jt.prototype.registerOnDrop=jt.prototype.K=function(){},jt.prototype.deRegisterOnDrop=jt.prototype.P=function(){},h("H.util.Cache",Nt),Nt.prototype.add=function(t,e,i){if(!et(i=+i)||i<0)throw new lt(this.add,2,i);t=String(t);var n=this.a[t],r=!0;return this.m&&(r=this.m(t,e,i)),n?r?(this.b+=i-n.size,n.size=i,n.data=e,Dt(this,n)):Ht(this,n,!0):r&&(this.a[t]=Bt(this,{id:t,data:e,size:i,H:null,v:null},this.c)),zt(this),r},Nt.prototype.registerOnDrop=Nt.prototype.K=function(t){if(!u(t))throw new lt(this.K,0,t);this.l.push(t)},Nt.prototype.deRegisterOnDrop=Nt.prototype.P=function(t){this.l=this.l.filter((function(e){return e!==t}))},Nt.prototype.get=function(t,e){return(t=e?this.a[t]:Dt(this,this.a[t]))&&t.data},Nt.prototype.drop=Nt.prototype.S=function(t){var e;(e=this.a[t])&&Ht(this,e,!0)},Nt.prototype.forEach=function(t,e,i){var n;for(n in this.a){var r=this.a[n];i&&!i(n,r.data,r.size)||t.call(e,n,r.data,r.size)}},Nt.prototype.removeAll=Nt.prototype.Y=function(t){var e;for(e in this.a){var i=this.a[e];t&&!t(e,i.data,i.size)||Ht(this,this.a[e],!0)}},Nt.prototype.setMaxSize=Nt.prototype.Z=function(t){if(!(0<+t))throw new lt(Nt.prototype.Z,0,t);return this.u=+t,zt(this),this},Nt.prototype.getMaxSize=Nt.prototype.ka=function(){return this.u},Nt.prototype.getCurrentSize=Nt.prototype.ia=function(){return this.b}}).call(Jn);var $n,Qn=Yn={};function tr(t){return Sn(Jn.H.math.Point,Rn(t))}Yn.clipPolygon=function(t,e){var i,n,r,o=[],a=Jn.H.math.clipping.clipPolygon(t.map(tr),e.map(tr));if(a)do{for(i=[],n=a;i.push([(r=n).x,r.y]),n=n.next;);o.push(i)}while(a=a.nextPoly);else Yn.isPointInsidePolygon(e[0],t)?o.push(e):Yn.isPointInsidePolygon(t[0],e)&&o.push(t);return o},Yn.isPointInsidePolygon=function(t,e){return Jn.H.math.isPointInsidePolygon({x:t[0],y:t[1]},Jn.H.math.flatten(e))},Yn.clamp=function(t,e,i){return(t-=0)>i?i:t<e?e:t},Yn.splitLegs=function(t,e){var i=[];t.push(t[0]);for(var n=0;n<t.length-1;n++){var r,o=t[n],a=t[n+1];i.push(o),Math.abs(a[0]-o[0])>=e&&(r=[(o[0]+a[0])/2,(o[1]+a[1])/2],i.push(r))}return i.length!==t.length-1?Yn.splitLegs(i,e):i},Yn.getBBox=function(t){var e=1/0,i=1/0,n=-1/0,r=-1/0;return t.forEach((function(t){t[0]<e&&(e=t[0]),t[1]<i&&(i=t[1]),t[0]>n&&(n=t[0]),t[1]>r&&(r=t[1])})),[e,i,n,r]},Yn.getBBoxCenter=function(t){var e=Pn(t,4),i=e[0],n=e[1];return[i+(e[2]-i)/2,n+(e[3]-n)/2]},Yn.getLineLength=function(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},Yn.modulo=function(t,e){var i;return(i=t%e)<0==e<0?i:i+e};var er=$n={};$n.default_source_max_zoom=18,$n.default_view_max_zoom=20,$n.tile_size=256,$n.half_circumference_meters=20037508.342789244,$n.circumference_meters=2*$n.half_circumference_meters,$n.min_zoom_meters_per_pixel=$n.circumference_meters/$n.tile_size;var ir=[];$n.metersPerPixel=function(t){return ir[t]=ir[t]||$n.min_zoom_meters_per_pixel/Math.pow(2,t),ir[t]};var nr=[];$n.metersPerTile=function(t){return nr[t]=nr[t]||$n.circumference_meters/Math.pow(2,t),nr[t]},$n.tile_scale=4096,$n.units_per_pixel=$n.tile_scale/$n.tile_size,$n.height_scale=16;var rr=[];$n.unitsPerMeter=function(t){return rr[t]=rr[t]||$n.tile_scale/($n.tile_size*$n.metersPerPixel(t)),rr[t]},$n.metersForTile=function(t){return{x:t.x*$n.circumference_meters/Math.pow(2,t.z)-$n.half_circumference_meters,y:-(t.y*$n.circumference_meters/Math.pow(2,t.z)-$n.half_circumference_meters)}},$n.tileForMeters=function(t,e){var i=Pn(t,2),n=i[0],r=i[1];return{x:Math.floor((n+$n.half_circumference_meters)/($n.circumference_meters/Math.pow(2,e))),y:Math.floor((-r+$n.half_circumference_meters)/($n.circumference_meters/Math.pow(2,e))),z:e}},$n.metersToExactTileCoords=function(t,e){var i=Pn(t,2),n=i[0],r=i[1];return{x:Math.pow(2,e-1)*(1+n/$n.half_circumference_meters),y:Math.pow(2,e-1)*(1-r/$n.half_circumference_meters),z:e}},$n.wrapTile=function(t){var e=t.x,i=t.y,n=t.z,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{x:!0,y:!1},o=(1<<n)-1;return r.x&&(e&=o),r.y&&(i&=o),{x:e,y:i,z:n}},$n.wrapMeters=function(t){var e=t.x,i=t.y;return{x:Qn.modulo(e+$n.half_circumference_meters,$n.circumference_meters)-$n.half_circumference_meters,y:i}},$n.metersToLatLng=function(t){var e=Pn(t,2),i=e[0],n=e[1];return i/=$n.half_circumference_meters,n/=$n.half_circumference_meters,n=(2*Math.atan(Math.exp(n*Math.PI))-Math.PI/2)/Math.PI,[i*=180,n*=180]},$n.latLngToMeters=function(t){var e=Pn(t,2),i=e[0],n=e[1];return n=Math.log(Math.tan(n*Math.PI/360+Math.PI/4))/Math.PI,n*=$n.half_circumference_meters,n=Math.min(Math.max(n,-$n.half_circumference_meters),$n.half_circumference_meters),[i*=$n.half_circumference_meters/180,n]},$n.tileSpaceToMeters=function(t,e,i){var n=Pn(t,2),r=n[0],o=n[1],a=$n.unitsPerMeter(e);return[r/a+i.x,o/a+i.y]},$n.tileSpaceToLatlng=function(t,e,i){var n=$n.unitsPerMeter(e);return $n.transformGeometry(t,(function(t){t[0]=t[0]/n+i.x,t[1]=t[1]/n+i.y;var e=Pn($n.metersToLatLng(t),2),r=e[0],o=e[1];t[0]=r,t[1]=o})),t},$n.copyGeometry=function(t){if(null!=t){var e={type:t.type};return"Point"===t.type?e.coordinates=[t.coordinates[0],t.coordinates[1]]:"LineString"===t.type||"MultiPoint"===t.type?e.coordinates=t.coordinates.map((function(t){return[t[0],t[1]]})):"Polygon"===t.type||"MultiLineString"===t.type?e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return[t[0],t[1]]}))})):"MultiPolygon"===t.type&&(e.coordinates=t.coordinates.map((function(t){return t.map((function(t){return t.map((function(t){return[t[0],t[1]]}))}))}))),e}},$n.transformGeometry=function(t,e){null!=t&&("Point"===t.type?e(t.coordinates):"LineString"===t.type||"MultiPoint"===t.type?t.coordinates.forEach(e):"Polygon"===t.type||"MultiLineString"===t.type?t.coordinates.forEach((function(t){return t.forEach(e)})):"MultiPolygon"===t.type&&t.coordinates.forEach((function(t){t.forEach((function(t){return t.forEach(e)}))})))},$n.boxIntersect=function(t,e){return!(e.sw.x>t.ne.x||e.ne.x<t.sw.x||e.sw.y>t.ne.y||e.ne.y<t.sw.y)},$n.findBoundingBox=function(t){for(var e=1/0,i=-1/0,n=1/0,r=-1/0,o=t[0].length,a=0;a<o;a++){var s=t[0][a];s[0]<e&&(e=s[0]),s[1]<n&&(n=s[1]),s[0]>i&&(i=s[0]),s[1]>r&&(r=s[1])}return[e,n,i,r]},$n.geometryType=function(t){return"Polygon"===t||"MultiPolygon"===t?"polygon":"LineString"===t||"MultiLineString"===t?"line":"Point"===t||"MultiPoint"===t?"point":void 0},$n.centroid=function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(t&&0!==t.length){var i,n=0,r=0,o=0,a=t[0],s=a.length;e&&(i=a[0],a=a.map((function(t){return[t[0]-i[0],t[1]-i[1]]})));for(var u=0,l=s-1;u<s;l=u,u++){var h=a[u],c=a[l],f=h[1]*c[0]-c[1]*h[0];n+=(h[0]+c[0])*f,r+=(h[1]+c[1])*f,o+=3*f}var p=[n/o,r/o];return e&&(p[0]+=i[0],p[1]+=i[1]),p}},$n.multiCentroid=function(t){for(var e=t.length,i=[0,0],n=0;n<t.length;n++){var r=$n.centroid(t[n]);i[0]+=r[0],i[1]+=r[1]}return i[0]/=e,i[1]/=e,i},$n.signedPolygonRingAreaSum=function(t){for(var e=0,i=t.length,n=0;n<i-1;n++){var r=t[n],o=t[n+1];e+=r[0]*o[1]-o[0]*r[1]}return e+(t[i-1][0]*t[0][1]-t[0][0]*t[i-1][1])},$n.polygonRingArea=function(t){return Math.abs($n.signedPolygonRingAreaSum(t))/2},$n.polygonArea=function(t){if(t)return $n.polygonRingArea(t[0])},$n.multiPolygonArea=function(t){for(var e=0,i=0;i<t.length;i++)e+=$n.polygonArea(t[i]);return e},$n.ringWinding=function(t){var e=$n.signedPolygonRingAreaSum(t);return 0<e?"CW":e<0?"CCW":void 0},$n.getTileBoundingBox=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=$n.wrapTile(t,{x:!0}),r=$n.metersForTile(n),o=$n.metersPerPixel(n.z),a=$n.metersToLatLng([r.x-i*o,r.y+i*o]),s=$n.metersToLatLng([r.x+(e+i)*o,r.y-(e+i)*o]),u=$n.isLastTile(n);return new Jn.H.geo.Rect(0===t.y?90:Qn.clamp(a[1],-90,90),Qn.clamp(a[0],-180,180),u.row?-90:Qn.clamp(s[1],-90,90),u.column?180:Qn.clamp(s[0],-180,180))},$n.isLastTile=function(t){var e=t.x,i=t.y,n=t.z;return{row:i===Math.pow(2,n)-1,column:e===Math.pow(2,n)-1}};var or,ar,sr=function(){En(e,In(Error));var t=On(e);function e(i){var n;return mn(this,e),(n=t.call(this)).name="MethodNotImplemented",n.message="Method "+i+" must be implemented in subclass",n}return e}(),ur=!1,lr=!1;try{window.document!==HTMLDocument&&(lr=!0)}catch(o){void 0!==self&&(ur=!0,self.window={document:{}},self.document=self.window.document)}var hr={get is_fake_worker(){return self.is_fake_worker},get is_worker(){return void 0!==ar?ar:ur||self.is_fake_worker},set is_worker(t){ar=t},get is_main(){return void 0!==or?or:lr&&!self.is_fake_worker},set is_main(t){or=t},is_native_worker:ur},cr={},fr=0,pr={},dr={},gr={};function yr(t,e,i){var n=2<arguments.length&&void 0!==i?i:dr,r=[];if("string"==typeof t&&(t=(r=t.split(".")).pop()),hr.is_main&&e&&1===r.length&&"self"===r[0])n=e;else for(var o=0;o<r.length;o++){if(!n[r[o]])return[];n=n[r[o]]}return[t,n]}cr.addTarget=function(t,e){hr.is_fake_worker?gr[t]=e:dr[t]=e},cr.removeTarget=function(t){delete dr[t],delete gr[t]};var vr=" No object with that name is registered on main thread.",mr=" Object has no method with that name.",br="_worker_broker_error_not_set_";function _r(t){Array.isArray(t)&&t.filter((function(t){return t.parent&&t.property})).forEach((function(t){return delete t.parent[t.property]}))}cr.withTransferables=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(!(this instanceof cr.withTransferables))return Sn(cr.withTransferables,e);this.value=e,this.transferables=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];if(!e)return r;if(Array.isArray(e))e.forEach((function(i,n){return t(i,e,n,r)}));else if("object"===vn(e))if(e instanceof ArrayBuffer)r.push({object:e,parent:i,property:n});else if(e.buffer instanceof ArrayBuffer)r.push({object:e.buffer,parent:i,property:n});else for(var o in e)t(e[o],e,o,r);return r}(this.value)},hr.is_main&&(cr.postMessage=function(t,e){for(var i=arguments.length,n=new Array(2<i?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];if(Array.isArray(t))return Promise.all(t.map((function(t){return cr.postMessage.apply(cr,[t,e].concat(Rn(n)))})));var o,a={};"object"===vn(e)&&(e=(a=e).method);var s="main_send";"string"==typeof t?(e=t,n=Array.prototype.slice.call(arguments,1),o=!0,s="worker_send"):t.init&&(o=!0);var u,l=[];if(n&&1===n.length&&n[0]instanceof cr.withTransferables&&(l=n[0].transferables,n=n[0].value),u={type:s,message_id:++fr,method:e,message:n},o)return function(t,e){var i=t.type,n=Pn(yr(t.method,e,"main_send"===i?gr:dr),2),r=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(t.method," on target ").concat(t.target,".");if(!o)throw Error(a+vr);var s="function"==typeof o[r]&&o[r];if(!s)throw Error(a+mr);return new Promise((function(e,i){var n;try{n=s.apply(o,t.message)}catch(n){return void i(n)}n instanceof Promise?n.then((function(t){t instanceof cr.withTransferables&&(t=t.value[0]),e(t)}),(function(t){i(t instanceof Error?"".concat(t.message,": ").concat(t.stack):t)})):(n instanceof cr.withTransferables&&(n=n.value[0]),e(n))}))}(u,t&&t.init?t:void 0);var h=new Promise((function(t,i){pr[fr]={method:e,message:n,resolve:t,reject:i}}));return a.stringify&&(u=JSON.stringify(u)),t.postMessage(u,l.map((function(t){return t.object}))),_r(l),h},cr.addWorker=function(t){if(!(t instanceof Worker))throw Error("Worker broker could not add non-Worker object",t);t.addEventListener("message",(function(e){var i="string"==typeof e.data?JSON.parse(e.data):e.data,n=i.message_id;if("worker_reply"===i.type)pr[n]&&(i.error?pr[n].reject(i.error):pr[n].resolve(i.message),delete pr[n]);else if("worker_send"===i.type&&null!=n){var r=Pn(yr(i.method),2),o=r[0],a=r[1],s="Worker broker could not dispatch message type ".concat(i.method," on target ").concat(i.target,".");if(!a)throw Error(s+vr);var u="function"==typeof a[o]&&a[o];if(!u)throw Error(s+mr);var l,h=br;try{l=u.apply(a,i.message)}catch(e){h=e}var c,f=[];l&&"function"==typeof l.then?l.then((function(e){e instanceof cr.withTransferables&&(f=e.transferables,e=e.value[0]),c={type:"main_reply",message_id:n,message:e},t.postMessage(c,f.map((function(t){return t.object}))),_r(f)}),(function(e){t.postMessage({type:"main_reply",message_id:n,error:e instanceof Error?"".concat(e.message,": ").concat(e.stack):e})})):(l instanceof cr.withTransferables&&(f=l.transferables,l=l.value[0]),c={type:"main_reply",message_id:n,message:l,error:h instanceof Error?"".concat(h.message,": ").concat(h.stack):h},t.postMessage(c,f.map((function(t){return t.object}))),_r(f))}}))},cr.getMessages=function(){return pr},cr.getMessageId=function(){return fr}),hr.is_worker&&(cr.postMessage=function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var r={};"object"===vn(t)&&(t=(r=t).method);var o,a=new Promise((function(e,n){pr[fr]={method:t,message:i,resolve:e,reject:n}})),s=[];return i&&1===i.length&&i[0]instanceof cr.withTransferables&&(s=i[0].transferables,i=i[0].value),o={type:"worker_send",message_id:fr,method:t,message:i},r.stringify&&(o=JSON.stringify(o)),self.postMessage(o,s.map((function(t){return t.object}))),_r(s),fr++,a},self.addEventListener("message",(function(t){var e="string"==typeof t.data?JSON.parse(t.data):t.data,i=e.message_id;if("main_reply"===e.type)pr[i]&&(e.hasOwnProperty("error")&&e.error!==br?pr[i].reject(e.error):pr[i].resolve(e.message),delete pr[i]);else if("main_send"===e.type&&null!=i){var n=Pn(yr(e.method),2),r=n[0],o=n[1],a="Worker broker could not dispatch message type ".concat(e.method," on target ").concat(e.target,".");if(!o)throw Error(a+vr);var s,u,l="function"==typeof o[r]&&o[r];if(!l)throw Error(a+mr);try{s=l.apply(o,e.message)}catch(t){u=t}var h,c=[];s instanceof Promise?s.then((function(t){t instanceof cr.withTransferables&&(c=t.transferables,t=t.value[0]),h={type:"worker_reply",message_id:i,message:t},self.postMessage(h,c.map((function(t){return t.object}))),_r(c)}),(function(t){self.postMessage({type:"worker_reply",message_id:i,error:t instanceof Error?"".concat(t.message,": ").concat(t.stack):t})})):(s instanceof cr.withTransferables&&(c=s.transferables,s=s.value[0]),h={type:"worker_reply",message_id:i,message:s,error:u instanceof Error?"".concat(u.message,": ").concat(u.stack):u},self.postMessage(h,c.map((function(t){return t.object}))),_r(c))}})));var wr,xr={silent:-1,error:0,warn:1,info:2,debug:3,trace:4},Mr={},Er={};function Ar(t){var e,i="object"===vn(t)?t.level:t;if(xr[i]<=xr[Ar.level]){for(var n=arguments.length,r=new Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(hr.is_native_worker)cr.postMessage.apply(cr,[{method:"_logProxy",stringify:!0},t].concat(r));else{if("object"===vn(t)&&!0===t.once){if(Er[JSON.stringify(r)])return;Er[JSON.stringify(r)]=!0}var a=(Mr[e=i]=Mr[e]||(console[e]?console[e]:console.log).bind(console),Mr[e]);1<r.length?a.apply(void 0,["Tangram [".concat(i,"]: ").concat(r[0])].concat(Rn(r.slice(1)))):a("Tangram [".concat(i,"]: ").concat(r[0]))}}}function kr(t,e,i){var n,r;return i=i||0,function(){var o=this,a=arguments;function s(){r=0,t.apply(o,a)}clearTimeout(n),r&&i&&Date.now()-r>=i?s():(r=r||Date.now(),n=setTimeout((function(){s()}),e))}}Ar.level="info",Ar.workers=null,Ar.setLevel=function(t){Ar.level=t,hr.is_main&&Array.isArray(Ar.workers)&&cr.postMessage(Ar.workers,"_logSetLevelProxy",t)},hr.is_main&&(Ar.setWorkers=function(t){Ar.workers=t},Ar.reset=function(){Er={}}),cr.addTarget("_logProxy",Ar),cr.addTarget("_logSetLevelProxy",Ar.setLevel);var Tr=wr={};cr.addTarget("Utils",wr),wr.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},wr.isMicrosoft=function(){return/(Trident\/7.0|Edge[ /](\d+[\.\d]+))/i.test(navigator.userAgent)},wr._requests={},wr._proxy_requests={},wr.io=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6e4,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"text",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"GET",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:null,a=6<arguments.length&&void 0!==arguments[6]&&arguments[6];if(hr.is_worker&&wr.isMicrosoft())return Ar("debug","Proxying request for URL to worker",t),o&&(wr._proxy_requests[o]=!0),cr.postMessage("Utils.io",t,e,i,n,r,o,!0);var s=new XMLHttpRequest,u=(u=new Promise((function(r,o){s.open(n,t,!0),s.timeout=e,s.responseType=i,s.onload=function(){200===s.status?-1<["text","json"].indexOf(s.responseType)?r(s.responseText):r(s.response):o(Error("Request error with a status of "+s.statusText))},s.onerror=function(t){o(Error("There was a network error"+t.toString()))},s.ontimeout=function(t){o(Error("timeout "+t.toString()))},s.send()}))).then((function(t){return o&&delete wr._requests[o],a?cr.withTransferables(t):t}));return o&&(wr._requests[o]=s),u},wr.cancelRequest=function(t){if(hr.is_worker&&wr._proxy_requests[t])return cr.postMessage("Utils.cancelRequest",t);wr._requests[t]?(Ar("trace","Cancelling network request key '".concat(t,"'")),wr._requests[t].abort(),delete wr._requests[t]):Ar("trace","Could not find network request key '".concat(t,"'"))},wr.requestAnimationFramePolyfill=function(){"function"!=typeof window.requestAnimationFrame&&(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)})},wr.serializeWithFunctions=function(t){return"function"==typeof t?t.toString():JSON.stringify(t,(function(t,e){return"function"==typeof e?e.toString():e}))},wr.stringsToFunctions=function(t,e){if("string"==typeof t)t=wr.stringToFunction(t,e);else if(null!=t&&"object"===vn(t))for(var i in t)t[i]=wr.stringsToFunctions(t[i],e);return t},wr._use_count=0,wr._function_cache={};var Sr,Ir,Lr=kr((function(){Ar("trace","Cleared cached ".concat(Object.keys(wr._function_cache).length," functions (reused ").concat(wr._use_count," times)")),wr._use_count=0,wr._function_cache={}}),1e4),Or=/^\s*function[^(]*\(([^)]*)\)\s*?\{([\s\S]*)\}$/m;function Cr(t){if("string"!=typeof t||-1!==t.search(/^(data|blob):/))return"";var e=t.indexOf("?");-1<e&&(t=t.substr(0,e));var i=t.indexOf("#");return-1<i&&(t=t.substr(0,i)),t.substr(0,t.lastIndexOf("/")+1)||""}function Pr(t){return"string"==typeof t&&!(-1<t.search(/^(http|https|data|blob):/)||"//"===t.substr(0,2))}function Rr(t){return void 0===Sr&&"function"!=typeof(Sr=window.URL&&window.URL.createObjectURL||window.webkitURL&&window.webkitURL.createObjectURL)&&(Sr=null,Ar("warn","window.URL.createObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Sr?Sr(t):t}wr.stringToFunction=function(t,e){var i=t;e&&(i+=e.toString());var n=wr._function_cache[i];if(Lr(),n)return wr._use_count++,n;var r="string"==typeof t&&t.match(Or);if(r&&2<r.length)try{var o=r[2],a=0<(a=0<r[1].length&&r[1].split(",").map((function(t){return t.trim()})).filter((function(t){return t}))).length?a:["context"],s=new Function(a.toString(),"function"==typeof e?e(o):o);return wr._function_cache[i]=s}catch(e){return t}return t},wr.device_pixel_ratio=1,wr.isPowerOf2=function(t){return 0==(t&t-1)},wr.interpolate=function(t,e,i){if(!Array.isArray(e)||!Array.isArray(e[0]))return e;if(e.length<1)return e;var n,r,o,a,s;if(t<=e[0][0])a=e[0][1],"function"==typeof i&&(a=i(a));else if(t>=e[e.length-1][0])a=e[e.length-1][1],"function"==typeof i&&(a=i(a));else for(var u=0;u<e.length-1;u++)if(t>=e[u][0]&&t<e[u+1][0]){if(n=e[u][0],r=e[u+1][0],Array.isArray(e[u][1])){a=[];for(var l=0;l<e[u][1].length;l++)"function"==typeof i?(s=i(e[u][1][l]),o=i(e[u+1][1][l])-s,a[l]=o*(t-n)/(r-n)+s):(o=e[u+1][1][l]-e[u][1][l],a[l]=o*(t-n)/(r-n)+e[u][1][l])}else a="function"==typeof i?(s=i(e[u][1]),(o=i(e[u+1][1])-s)*(t-n)/(r-n)+s):(o=e[u+1][1]-e[u][1])*(t-n)/(r-n)+e[u][1];break}return a},wr.toCSSColor=function(t){return 1===t[3]?"rgb(".concat(t.slice(0,3).map((function(t){return Math.round(255*t)})).join(", "),")"):"rgba(".concat(t.map((function(t,e){return e<3&&Math.round(255*t)||t})).join(", "),")")},wr.pointInTile=function(t){return 0<=t[0]&&t[1]>-er.tile_scale&&t[0]<er.tile_scale&&t[1]<=0},wr.zoomToTileLevel=function(t){return Math.floor(t)};var jr=function(){function t(e,i){var n=this;if(mn(this,t),this.config=e,this.sources=i,this.id=e.id,this.name=e.name,this.pad_scale=e.pad_scale||1e-4,this.default_winding=null,this.rasters=[],Array.isArray(e.rasters)&&e.rasters.forEach((function(t){-1===n.rasters.indexOf(t)&&n.rasters.push(t)})),this.preprocess=e.preprocess,"function"==typeof this.preprocess&&this.preprocess.bind(this),this.transform=e.transform,"function"==typeof this.transform)this.transform=this.transform.bind(this);else if("object"===vn(this.transform))for(var r in this.transform)"function"==typeof this.transform[r]&&(this.transform[r]=this.transform[r].bind(this));this.extra_data=e.extra_data,this.scripts=e.scripts,this.max_zoom=null!=e.max_zoom?e.max_zoom:er.default_source_max_zoom,this.setTileSize(e.tile_size),this.max_coord_zoom=this.max_zoom+this.zoom_bias,this.min_display_zoom=null!=e.min_display_zoom?e.min_display_zoom:0,this.max_display_zoom=null!=e.max_display_zoom?e.max_display_zoom:null,this._has_volatile_data=!!e.has_volatile_data}return _n(t,[{key:"hasLabeledData",value:function(){return!0}},{key:"_transformTile",value:function(t){if(t.source_data.layers){var e={coords:t.coords},i=[];if("function"==typeof this.transform)i.push(this.transform);else if("object"===vn(this.transform))for(var n=Object.keys(this.transform).sort(),r=0;r<n.length;r++)i.push(this.transform[n[r]]);for(var o=1===Object.keys(t.source_data.layers).length&&t.source_data.layers._default,a=0;a<i.length;a++)o?t.source_data.layers._default=i[a](t.source_data.layers._default,this.extra_data,e):t.source_data.layers=i[a](t.source_data.layers,this.extra_data,e)}}},{key:"_postProcessTile",value:function(t){var e=this;for(var i in this._transformTile(t),t.source_data.layers){var n=t.source_data.layers[i];n&&n.features&&n.features.forEach((function(t){er.transformGeometry(t.geometry,(function(t){t[1]=-t[1],e.pad_scale&&(t[0]=Math.round(t[0]*(1+e.pad_scale)-er.tile_scale*e.pad_scale/2),t[1]=Math.round(t[1]*(1+e.pad_scale)-er.tile_scale*e.pad_scale/2))})),e.updateDefaultWinding(t.geometry)}))}t.default_winding=this.default_winding||"CCW"}},{key:"load",value:function(t){return t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Rn(this.rasters),this._load(t)}},{key:"_load",value:function(){throw new sr("_load")}},{key:"setTileSize",value:function(t){this.tile_size=t||256,("number"!=typeof this.tile_size||this.tile_size<256||!Tr.isPowerOf2(this.tile_size))&&(Ar({level:"warn",once:!0},"Data source '".concat(this.name,"': 'tile_size' parameter must be a number that is a power of 2 greater than or equal to 256, but was '").concat(t,"'")),this.tile_size=256),this.zoom_bias=Math.log2(this.tile_size)-8}},{key:"updateDefaultWinding",value:function(t){return null==this.default_winding&&("Polygon"===t.type?this.default_winding=er.ringWinding(t.coordinates[0]):"MultiPolygon"===t.type&&(this.default_winding=er.ringWinding(t.coordinates[0][0]))),this.default_winding}},{key:"includesTile",value:function(t,e){if(t.z<this.min_display_zoom||null!=this.max_display_zoom&&e>this.max_display_zoom)return!1;for(var i=0;i<this.rasters.length;i++){var n=this.rasters[i];if(this.sources[n]&&this.sources[n]!==this&&!this.sources[n].includesTile(t,t.z))return!1}return!0}},{key:"has_volatile_data",get:function(){return this._has_volatile_data},set:function(t){var e=0<arguments.length&&void 0!==t&&t;this._has_volatile_data=e}}],[{key:"create",value:function(e,i){for(var n in i)if(i[n].config.name===e.name&&t.sameConfig(i[n],{config:e}))return i[n];if(t.types[e.type])return new t.types[e.type](e,i)}},{key:"sameConfig",value:function(t,e){if(!t||!e)return!1;var i=Object.assign({},t.config,{id:null,tiled:null,url:null}),n=Object.assign({},e.config,{id:null,tiled:null,url:null});return JSON.stringify(i)===JSON.stringify(n)}},{key:"coordsToMeters",value:function(t){var e=Pn(er.latLngToMeters(t),2),i=e[0],n=e[1];t[0]=i,t[1]=n}},{key:"projectData",value:function(e){for(var i in e.layers)for(var n=e.layers[i].features.length,r=0;r<n;r++){var o=e.layers[i].features[r];er.transformGeometry(o.geometry,t.coordsToMeters)}}},{key:"metersToTileUnits",value:function(t,e,i){i[0]=Math.round((i[0]-e.x)*t),i[1]=-1*Math.round((i[1]-e.y)*t)}},{key:"scaleData",value:function(e,i){var n=i.coords.z,r=i.min,o=(i.max,t.metersToTileUnits.bind(this,er.unitsPerMeter(n),r));for(var a in e.layers)for(var s=e.layers[a].features.length,u=0;u<s;u++){var l=e.layers[a].features[u];er.transformGeometry(l.geometry,o)}}},{key:"register",value:function(e,i){e&&i&&(t.types[i]=e)}}]),t}();jr.types={};var Nr=0,Dr=function(){En(e,jr);var t=On(e);function e(i,n){var r;mn(this,e),(r=t.call(this,i,n)).response_type="";var o=Pn(function(t,e){if(!e||0===Object.keys(e).length)return[t,[]];var i=t.indexOf("?"),n=t.indexOf("#"),r="";-1<n&&(r=t.slice(n),t=t.slice(0,n)),-1===i&&(i=t.length,t+="?"),i++;var o="",a=[];for(var s in e)""===function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}(s,t)?o+="".concat(s,"=").concat(e[s],"&"):a.push([s,e[s]]);return[t=t.slice(0,i)+o+t.slice(i)+r,a]}(i.url,i.url_params),2),a=o[0],s=o[1];if(r.url=a,s.forEach((function(t){var e=Pn(t,2),n=e[0],o=e[1];Ar({level:"warn",once:!0},"Data source '".concat(r.name,"': parameter '").concat(n,"' already present in URL '").concat(i.url,"', ")+"skipping value '".concat(n,"=").concat(o,"' specified in 'url_params'"))})),"string"!=typeof r.url)throw Error("Network data source must provide a string `url` property");return r}return _n(e,[{key:"_load",value:function(t){var e=this,i=this.formatUrl(this.url,t),n=t.source_data;return n.url=i,new Promise((function(r,o){n.error=null;var a=Nr+++"-"+i,s=Tr.io(i,6e4,e.response_type,"GET",{},a);n.request_id=a,s.then((function(i){"function"==typeof e.preprocess&&(i=e.preprocess(i)),(i=i instanceof Promise?i:Promise.resolve(i)).then((function(i){e.parseSourceData(t,n,i),e._postProcessTile(t),r(t)}))}),(function(i){n.error=i.stack,e._postProcessTile(t),r(t)}))}))}},{key:"formatUrl",value:function(){throw new sr("formatUrl")}},{key:"parseSourceData",value:function(){throw new sr("parseSourceData")}}]),e}(),zr=function(){En(e,Dr);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).tiled=!0,r.parseBounds(i),r.builds_geometry_tiles=!1,r.tms=!0===i.tms,-1<r.url.search("{s}")&&(Array.isArray(i.url_subdomains)&&0<i.url_subdomains.length?(r.url_subdomains=i.url_subdomains,r.next_url_subdomain=0):Ar({level:"warn",once:!0},"Data source '".concat(r.name,"': source URL includes '{s}' subdomain marker ('").concat(r.url,"'), but no subdomains ")+"were specified in 'url_subdomains' parameter")),r}return _n(e,[{key:"parseBounds",value:function(t){var e,i,n,r,o;Array.isArray(t.bounds)&&4===t.bounds.length&&(this.bounds=t.bounds,i=(e=Pn(this.bounds,4))[0],n=e[1],r=e[2],o=e[3],this.bounds_meters={min:er.latLngToMeters([i,o]),max:er.latLngToMeters([r,n])},this.bounds_tiles={min:{},max:{}})}},{key:"checkBounds",value:function(t){if(this.bounds){t=er.wrapTile(t,{x:!0});var e=(e=this.bounds_tiles.min[t.z])||(this.bounds_tiles.min[t.z]=er.tileForMeters(this.bounds_meters.min,t.z)),i=(i=this.bounds_tiles.max[t.z])||(this.bounds_tiles.max[t.z]=er.tileForMeters(this.bounds_meters.max,t.z));if(t.x<e.x||t.x>i.x||t.y<e.y||t.y>i.y)return!1}return!0}},{key:"includesTile",value:function(t,i){return!!Cn(An(e.prototype),"includesTile",this).call(this,t,i)&&!!this.checkBounds(t)}},{key:"formatUrl",value:function(t,e){var i=er.wrapTile(e.coords,{x:!0});this.tms&&(i.y=Math.pow(2,i.z)-1-i.y);var n=t.replace("{x}",i.x).replace("{y}",i.y).replace("{z}",i.z);return null!=this.url_subdomains&&(n=n.replace("{s}",this.url_subdomains[this.next_url_subdomain]),this.next_url_subdomain=(this.next_url_subdomain+1)%this.url_subdomains.length),n}},{key:"urlHasTilePattern",value:function(t){return t&&-1<t.search("{x}")&&-1<t.search("{y}")&&-1<t.search("{z}")}}]),e}(),Br=function(){En(e,jr);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).target_name="MapsJsSource"+i.uid,r.tiled=!!i.tiled,cr.addTarget(r.target_name,Ln(r)),hr.is_worker&&cr.postMessage(r.target_name+".onWorkerInitialized"),hr.is_main&&(r._workers_left=0),r}return _n(e,[{key:"initialize",value:function(t,e,i,n){this._main_initialized||(this.provider=t,this.worker=n,this._workers_left+=i,this._on_update=e,this._main_initialized=!0,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate),this._isReady()&&this.onReady())}},{key:"onWorkerInitialized",value:function(){--this._workers_left,this._isReady()&&this.onReady()}},{key:"onReady",value:function(){}},{key:"_isReady",value:function(){return this._main_initialized&&!this._workers_left}},{key:"_onProviderUpdate",value:function(t){this._isReady()&&this.onProviderUpdate(t)}},{key:"onProviderUpdate",value:function(t){this.dispatchUpdate(void 0,t.data)}},{key:"dispatchUpdate",value:function(t,e){this._on_update(this.name,t,e)}},{key:"dispose",value:function(){cr.removeTarget(this.target_name),this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}(),Hr=function(t,e,i,n,r){var o,a,s=8*r-n-1,u=(1<<s)-1,l=u>>1,h=-7,c=i?r-1:0,f=i?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-h)-1,p>>=-h,h+=s;0<h;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;0<h;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},Fr=function(t,e,i,n,r,o){var a,s,u,l=8*o-r-1,h=(1<<l)-1,c=h>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+c?f/u:f*Math.pow(2,1-c))*u&&(a++,u/=2),h<=a+c?(s=0,a=h):1<=a+c?(s=(e*u-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));8<=r;t[i+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;0<l;t[i+p]=255&a,p+=d,a/=256,l-=8);t[i+p-d]|=128*g},Ur=Vr;function Vr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}Vr.Varint=0,Vr.Fixed64=1,Vr.Bytes=2,Vr.Fixed32=5;var qr=4294967296,Gr=1/qr;function Wr(t){return t.type===Vr.Bytes?t.readVarint()+t.pos:t.pos+1}function Yr(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function Kr(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;t<=r;r--)i.buf[r+n]=i.buf[r]}function Zr(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Xr(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function Jr(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function $r(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function Qr(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function to(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function eo(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function io(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function no(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function ro(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function oo(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function ao(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}Vr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,o=this.pos;this.type=7&n,t(r,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=ro(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=ao(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=ro(this.buf,this.pos)+ro(this.buf,this.pos+4)*qr;return this.pos+=8,t},readSFixed64:function(){var t=ro(this.buf,this.pos)+ao(this.buf,this.pos+4)*qr;return this.pos+=8,t},readFloat:function(){var t=Hr(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Hr(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,i=e[this.pos++],n=127&i;return i<128?n:(n|=(127&(i=e[this.pos++]))<<7,i<128?n:(n|=(127&(i=e[this.pos++]))<<14,i<128?n:(n|=(127&(i=e[this.pos++]))<<21,i<128?n:function(t,e,i){var n,r,o=i.buf;if(n=(112&(r=o[i.pos++]))>>4,r<128)return Yr(t,n,e);if(n|=(127&(r=o[i.pos++]))<<3,r<128)return Yr(t,n,e);if(n|=(127&(r=o[i.pos++]))<<10,r<128)return Yr(t,n,e);if(n|=(127&(r=o[i.pos++]))<<17,r<128)return Yr(t,n,e);if(n|=(127&(r=o[i.pos++]))<<24,r<128)return Yr(t,n,e);if(n|=(1&(r=o[i.pos++]))<<31,r<128)return Yr(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(i=e[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){for(var n,r,o,a="",s=e;s<i;){var u=t[s],l=null,h=239<u?4:223<u?3:191<u?2:1;if(i<s+h)break;1===h?u<128&&(l=u):2===h?128==(192&(n=t[s+1]))&&(l=(31&u)<<6|63&n)<=127&&(l=null):3===h?(n=t[s+1],r=t[s+2],128==(192&n)&&128==(192&r)&&((l=(15&u)<<12|(63&n)<<6|63&r)<=2047||55296<=l&&l<=57343)&&(l=null)):4===h&&(n=t[s+1],r=t[s+2],o=t[s+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&((l=(15&u)<<18|(63&n)<<12|(63&r)<<6|63&o)<=65535||1114112<=l)&&(l=null)),null===l?(l=65533,h=1):65535<l&&(l-=65536,a+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),a+=String.fromCharCode(l),s+=h}return a}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=Wr(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=Wr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===Vr.Varint)for(;127<this.buf[this.pos++];);else if(e===Vr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Vr.Fixed32)this.pos+=4;else{if(e!==Vr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,i=this.length||16;i<this.pos+t;)i*=2;i!==this.length&&((e=new Uint8Array(i)).set(this.buf),this.buf=e,this.length=i)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),oo(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),oo(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),oo(this.buf,-1&t,this.pos),oo(this.buf,Math.floor(t*Gr),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),oo(this.buf,-1&t,this.pos),oo(this.buf,Math.floor(t*Gr),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var i,n;if(0<=t?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:n=n+1|(i=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(i,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,o=0;o<e.length;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!r){56319<n||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&Kr(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),Fr(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Fr(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;128<=n&&Kr(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,Vr.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,Zr,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Xr,e)},writePackedBoolean:function(t,e){this.writeMessage(t,Qr,e)},writePackedFloat:function(t,e){this.writeMessage(t,Jr,e)},writePackedDouble:function(t,e){this.writeMessage(t,$r,e)},writePackedFixed32:function(t,e){this.writeMessage(t,to,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,eo,e)},writePackedFixed64:function(t,e){this.writeMessage(t,io,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,no,e)},writeBytesField:function(t,e){this.writeTag(t,Vr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,Vr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,Vr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,Vr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,Vr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,Vr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,Vr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,Vr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,Vr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,Vr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}},Zn.prototype.loadGeometry=function(t){var e=this._pbf;e.pos=this._geometry;for(var i,n,r=e.readVarint()+e.pos,o=1,a=0,s=0,u=0,l=[];e.pos<r;)if(a<=0&&(o=7&(n=e.readVarint()),a=n>>3),a--,1===o||2===o)s+=e.readSVarint(),u+=e.readSVarint(),1===o&&(i&&l.push(i),i=[]),i.push([s*t,u*t]);else{if(7!==o)throw new Error("unknown command "+o);i&&i.push(i[0].slice())}return i&&l.push(i),l};function so(t){var e=[],i=t&&t.features;if(i)for(var n=0,r=i.length;n<r;n++){var o=i[n],a=o.type,s=void 0;switch(a){case 1:s={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case 2:case 3:if(s={type:"MultiLineString",coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},3===a&&null==(s=uo(s)))continue;break;default:continue}e.push({id:o.id,type:"Feature",geometry:s,properties:o.tags})}return{type:"FeatureCollection",features:e}}function uo(t){for(var e,i=[],n=[],r=0,o=t.coordinates.length;r<o;r++){var a=t.coordinates[r],s=er.ringWinding(a);null!=s&&(s===(e=e||s)&&n.length&&(i.push(n),n=[]),n.push(a))}return 0<n.length&&i.push(n),1===i.length?(t.type="Polygon",t.coordinates=i[0]):1<i.length?(t.type="MultiPolygon",t.coordinates=i):t=null,t}var lo={type:"FeatureCollection",features:[]},ho=function(){En(e,Br);var t=On(e);function e(i,n){return mn(this,e),i.tiled=!0,t.call(this,i,n)}return _n(e,[{key:"fetchTile",value:function(t,e,i){return this.provider?this.provider.requestTileAsPromise(t,e,i).then((function(t){return t.data})):Promise.resolve()}},{key:"_load",value:function(t){var e=this,i=er.wrapTile(t.coords,{x:!0,y:!0}),n=i.x,r=i.y,o=i.z;return cr.postMessage(this.target_name+".fetchTile",n,r,o).then((function(i){var n;return i instanceof ArrayBuffer?(n=new Ur(new Uint8Array(i)),t.source_data.layers=function(t){var e={};for(var i in t.layers){for(var n=t.layers[i],r=[],o=er.tile_scale/n.extent,a=0,s=n.length;a<s;a++){var u=n.feature(a),l=Zn.types[u.type],h=u.loadGeometry(o),c=null;switch(l){case"Point":c=function(t){var e=t.coordinates.length;if(1<e){t.type="MultiPoint";for(var i=[],n=0;n<e;n++)i.push(t.coordinates[n][0]);t.coordinates=i}else t.type="Point",t.coordinates=t.coordinates[0][0];return t}({coordinates:h});break;case"LineString":c=1===h.length?{type:l,coordinates:h[0]}:{type:"MultiLineString",coordinates:h};break;case"Polygon":c=uo({coordinates:h})}c&&c.coordinates&&r.push({type:"Feature",geometry:c,properties:u.properties})}e[i]={type:"FeatureCollection",features:r}}return e}(new Kn(n))):i?t.source_data.error=i:t.source_data.layers={_default:lo},e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();function co(t){return Math.max(t,0)}function fo(t){return isNaN(t)?0:t}function po(t){return Array.isArray(t)?t.map(parseFloat).map(fo):fo(parseFloat(t))}function go(t){return Array.isArray(t)?t.map(po).map(co):co(po(t))}jr.register(ho,"MVT"),jr.register(ho,"OMV");var yo=a((function(t,e){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:255<t?255:t}function r(t){return t<0?0:1<t?1:t}function o(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function s(t,e,i){return i<0?i+=1:1<i&&--i,6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in i)return i[r].slice();if("#"===r[0])return 4===r.length?0<=(e=parseInt(r.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&0<=(e=parseInt(r.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=r.indexOf("("),l=r.indexOf(")");if(-1!==u&&l+1===r.length){var h=r.substr(0,u),c=r.substr(u+1,l-(u+1)).split(","),f=1;switch(h){case"rgba":if(4!==c.length)return null;f=a(c.pop());case"rgb":return 3!==c.length?null:[o(c[0]),o(c[1]),o(c[2]),f];case"hsla":if(4!==c.length)return null;f=a(c.pop());case"hsl":if(3!==c.length)return null;var p=(parseFloat(c[0])%360+360)%360/360,d=a(c[1]),g=a(c[2]),y=g<=.5?g*(d+1):g+d-g*d,v=2*g-y;return[n(255*s(v,y,p+1/3)),n(255*s(v,y,p)),n(255*s(v,y,p-1/3)),f];default:return null}}return null}}catch(t){}})),vo=(yo.parseCSSColor,{});Object.assign(vo,{clampPositive:co,noNaN:fo,parseNumber:po,parsePositiveNumber:go}),vo.wrapFunction=function(t){return"\n        var feature = context.feature.properties;\n        var global = context.global;\n        var $zoom = context.zoom;\n        var $layer = context.layer;\n        var $source = context.source;\n        var sources = context.sources;\n        var $geometry = context.geometry;\n        var $meters_per_pixel = context.meters_per_pixel;\n\n        var val = (function(){ ".concat(t," }());\n\n        if (typeof val === 'number' && isNaN(val)) {\n            val = null; // convert NaNs to nulls\n        }\n\n        return val;\n    ")},vo.zeroPair=Object.freeze([0,0]),vo.defaults={color:[1,1,1,1],width:1,size:1,extrude:!1,height:20,min_height:0,order:0,z:0,outline:{color:[0,0,0,0],width:0},material:{ambient:1,diffuse:1}},vo.macros={"Style.color.pseudoRandomColor":function(){return[parseInt(feature.id,16)/100%1*.7,parseInt(feature.id,16)/1e4%1*.7,parseInt(feature.id,16)/1e6%1*.7,1]},"Style.color.randomColor":function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random(),1]}},vo.getFeatureParseContext=function(t,e,i,n){return{feature:t,tile:e,global:i,sources:n,zoom:e.style_zoom,geometry:er.geometryType(t.geometry.type),meters_per_pixel:e.meters_per_pixel,meters_per_pixel_sq:e.meters_per_pixel_sq,units_per_meter_overzoom:e.units_per_meter_overzoom}};var mo={STATIC:0,DYNAMIC:1,ZOOM:2};function bo(t){return"string"==typeof t&&"%"===t[t.length-1]}function _o(t){return"auto"===t}function wo(t){return bo(t)||_o(t)}vo.CACHE_TYPE=mo,vo.createPropertyCache=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null!=t){if(t.value)return{value:t.value,zoom:t.zoom?{}:null,type:t.type};var i={value:t,type:mo.STATIC};return Array.isArray(i.value)&&Array.isArray(i.value[0])?(i.zoom={},i.type=mo.ZOOM):"function"==typeof i.value&&(i.type=mo.DYNAMIC),"function"==typeof e&&(i.zoom?i.value=i.value.map((function(t,i){return[t[0],e(t[1],i)]})):"function"!=typeof i.value&&(i.value=e(i.value,0))),i}},vo.createColorPropertyCache=function(t){return vo.createPropertyCache(t,(function(t){return"Style.color.pseudoRandomColor"===t?Tr.stringToFunction(vo.wrapFunction(vo.macros["Style.color.pseudoRandomColor"])):"Style.color.randomColor"===t?vo.macros["Style.color.randomColor"]:t}))};var xo="'size' can specify either width or height as derived from aspect ratio, but not both";vo.createPointSizePropertyCache=function(t){var e=null,i=null;if(bo(t))e=[!0];else if(Array.isArray(t))if(Array.isArray(t[0])){if(t.some((function(t){return Array.isArray(t[1])?t[1].some(wo):bo(t[1])}))&&(e=t.map((function(t){return Array.isArray(t[1])?t[1].map(bo):bo(t[1])})),(i=t.map((function(t){return Array.isArray(t[1])&&t[1].map(_o)}))).some((function(t){return Array.isArray(t)&&t.every((function(t){return t}))}))))throw xo}else if(t.some(wo)&&(e=[t.map(bo)],(i=[t.map(_o)])[0].every((function(t){return t}))))throw xo;return e?((t={value:t}).has_pct=e,t.has_ratio=i,t.sprites={}):t=vo.createPropertyCache(t,go),t},vo.evalCachedPointSizeProperty=function(t,e,i){return t.has_pct||t.has_ratio?e?(t.sprites[e.sprite]||(t.sprites[e.sprite]=vo.createPropertyCache(t.value,(function(i,n){return Array.isArray(i)?(i=i.map((function(e,i){return t.has_ratio[n][i]?e:go(e)})).map((function(i,r){return t.has_pct[n][r]?e.css_size[r]*i/100:i})),t.has_ratio[n][0]?i[0]=i[1]*e.aspect:t.has_ratio[n][1]&&(i[1]=i[0]/e.aspect)):(i=go(i),i=t.has_pct[n]?e.css_size.map((function(t){return t*i/100})):[i,i]),i}))),vo.evalCachedProperty(t.sprites[e.sprite],i)):void 0:vo.evalCachedProperty(t,i)},vo.evalCachedProperty=function(t,e){if(null!=t)return t.dynamic?t.dynamic(e):t.static?t.static:t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?Array.isArray(t.value)&&Array.isArray(t.value[0])?(t.zoom=t.zoom||{},t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value),t.zoom[e.zoom]):(t.static=t.value,t.static):(t.dynamic=t.value,t.dynamic(e))},vo.convertUnits=function(t,e){if(null!=t.val)return"px"===t.units?t.val*er.metersPerPixel(e.zoom):t.val;if("string"==typeof t)"px"===t.trim().slice(-2)?(t=po(t),t*=er.metersPerPixel(e.zoom)):t=po(t);else if(Array.isArray(t))return Array.isArray(t[0])?t.map((function(t){return[t[0],vo.convertUnits(t[1],e)]})):t.map((function(t){return vo.convertUnits(t,e)}));return t},vo.parseUnits=function(t){var e={val:po(t)};return 0!==e.val&&"string"==typeof t&&"px"===t.trim().slice(-2)&&(e.units="px"),e},vo.evalCachedDistanceProperty=function(t,e){return t.dynamic?t.dynamic(e):t.zoom&&t.zoom[e.zoom]?t.zoom[e.zoom]:"function"!=typeof t.value?t.zoom?(t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value,(function(t){return vo.convertUnits(t,e)})),t.zoom[e.zoom]):vo.convertUnits(t.value,e):(t.dynamic=t.value,t.dynamic(e))},vo.string_colors={},vo.colorForString=function(t){if(vo.string_colors[t])return vo.string_colors[t];var e=null;return"none"!==t&&((e=yo.parseCSSColor(t))&&4===e.length?(e[0]/=255,e[1]/=255,e[2]/=255):e=vo.defaults.color),vo.string_colors[t]=e},vo.evalCachedColorProperty=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.dynamic){var i=t.dynamic(e);return"string"==typeof i&&(i=vo.colorForString(i)),i&&null==i[3]&&(i[3]=1),i}if(t.static)return t.static;if(t.zoom&&t.zoom[e.zoom])return t.zoom[e.zoom];if("function"==typeof t.value){t.dynamic=t.value;var n=t.dynamic(e);return"string"==typeof n&&(n=vo.colorForString(n)),n&&null==n[3]&&(n[3]=1),n}if("string"==typeof t.value)return t.static=vo.colorForString(t.value),t.static;if(t.zoom){if(!t.zoom_preprocessed){for(var r=0;r<t.value.length;r++){var o=t.value[r];o&&"string"==typeof o[1]&&(o[1]=vo.colorForString(o[1]))}t.zoom_preprocessed=!0}return t.zoom[e.zoom]=Tr.interpolate(e.zoom,t.value),t.zoom[e.zoom][3]=t.zoom[e.zoom][3]||1,t.zoom[e.zoom]}return t.static=t.value.map((function(t){return t})),t.static&&null==t.static[3]&&(t.static[3]=1),t.static},vo.parseColor=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof t&&(t=t(e)),"string"==typeof t)t=vo.colorForString(t);else if(Array.isArray(t)&&Array.isArray(t[0])){for(var i=0;i<t.length;i++){var n=t[i];"string"==typeof n[1]&&(n[1]=vo.colorForString(n[1]))}e.zoom&&(t=Tr.interpolate(e.zoom,t))}return Array.isArray(t)?null==(t=t.map((function(t){return t})))[3]&&(t[3]=1):t=[0,0,0,1],t},vo.calculateOrder=function(t,e){return"function"==typeof t?t=t(e):"string"==typeof t&&(t=e.feature.properties[t]?e.feature.properties[t]:go(t)),t},vo.evalProperty=function(t,e){return"function"==typeof t?t(e):t};var Mo=function(){function t(e,i){mn(this,t),this.key=e,this.repeat_dist=i,this.repeat_dist_sq=this.repeat_dist*this.repeat_dist,this.positions=[]}return _n(t,[{key:"check",value:function(t){for(var e=t.position,i=0;i<this.positions.length;i++){var n=this.positions[i],r=e[0]-n[0],o=e[1]-n[1],a=r*r+o*o;if(a<this.repeat_dist_sq)return{dist_sq:a,repeat_dist_sq:this.repeat_dist_sq}}}},{key:"add",value:function(t){t&&t.position&&this.positions.push(t.position)}}],[{key:"clear",value:function(t){this.groups[t]={}}},{key:"check",value:function(t,e,i){if(e.repeat_distance&&e.repeat_group&&this.groups[i][e.repeat_group])return this.groups[i][e.repeat_group].check(t)}},{key:"add",value:function(e,i,n){i.repeat_distance&&i.repeat_group&&(null==this.groups[n][i.repeat_group]&&(this.groups[n][i.repeat_group]=new t(i.repeat_group,i.repeat_distance*i.repeat_scale)),this.groups[n][i.repeat_group].add(e))}}]),t}();Mo.groups={};var Eo=function(){function t(e,i,n){mn(this,t);var r=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(i/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=i,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/i,this.boxUid=0,this.circleUid=0}return _n(t,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(t,e,i,n,r){this._forEachCell(e,i,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(r)}},{key:"insertCircle",value:function(t,e,i,n){this._forEachCell(e-n,i-n,e+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(i),this.circles.push(n)}},{key:"insertCircleList",value:function(t,e){for(var i=0;i<e.length-2;i+=3)this.insertCircle("".concat(t,"/").concat(i),e[i],e[i+1],e[i+2])}},{key:"_insertBoxCell",value:function(t,e,i,n,r,o){this.boxCells[r].push(o)}},{key:"_insertCircleCell",value:function(t,e,i,n,r,o){this.circleCells[r].push(o)}},{key:"_query",value:function(t,e,i,n,r,o){if(i<0||t>this.width||n<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=i&&this.height<=n){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],h=this.circles[3*u+1],c=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-c,y1:h-c,x2:l+c,y2:h+c})}return o?a.filter(o):a}var f={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,i,n,this._queryCell,a,f,o),r?0<a.length:a}},{key:"_queryCircle",value:function(t,e,i,n,r){var o=t-i,a=t+i,s=e-i,u=e+i;if(a<0||o>this.width||u<0||s>this.height)return!n&&[];var l=[],h={hitTest:n,circle:{x:t,y:e,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(o,s,a,u,this._queryCellCircle,l,h,r),n?0<l.length:l}},{key:"query",value:function(t,e,i,n,r){return this._query(t,e,i,n,!1,r)}},{key:"hitTest",value:function(t,e,i,n,r){return this._query(t,e,i,n,!0,r)}},{key:"hitTestCircle",value:function(t,e,i,n){return this._queryCircle(t,e,i,!0,n)}},{key:"hitTestCircleList",value:function(t,e){for(var i=0;i<t.length-2;i+=3)if(this.hitTestCircle(t[i],t[i+1],t[i+2],e))return!0;return!1}},{key:"_queryCell",value:function(t,e,i,n,r,o,a,s){var u=a.seenUids,l=this.boxCells[r];if(null!==l){var h,c=this.bboxes,f=Dn(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=c[2+d]&&e<=c[3+d]&&i>=c[0+d]&&n>=c[1+d]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:c[d],y1:c[1+d],x2:c[2+d],y2:c[3+d]})}}}}catch(t){f.e(t)}finally{f.f()}}var g=this.circleCells[r];if(null!==g){var y,v=this.circles,m=Dn(g);try{for(m.s();!(y=m.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(v[_],v[1+_],v[2+_],t,e,i,n)&&(!s||s(this.circleKeys[b]))){if(a.hitTest)return o.push(!0),!0;var w=v[_],x=v[1+_],M=v[2+_];o.push({key:this.circleKeys[b],x1:w-M,y1:x-M,x2:w+M,y2:x+M})}}}}catch(t){m.e(t)}finally{m.f()}}}},{key:"_queryCellCircle",value:function(t,e,i,n,r,o,a,s){var u=a.circle,l=a.seenUids,h=this.boxCells[r];if(null!==h){var c,f=this.bboxes,p=Dn(h);try{for(p.s();!(c=p.n()).done;){var d=c.value;if(!l.box[d]){l.box[d]=!0;var g=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[0+g],f[1+g],f[2+g],f[3+g])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}}catch(t){p.e(t)}finally{p.f()}}var y=this.circleCells[r];if(null!==y){var v,m=this.circles,b=Dn(y);try{for(b.s();!(v=b.n()).done;){var _=v.value;if(!l.circle[_]){l.circle[_]=!0;var w=3*_;if(this._circlesCollide(m[w],m[1+w],m[2+w],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return o.push(!0),!0}}}catch(t){b.e(t)}finally{b.f()}}}},{key:"_forEachCell",value:function(t,e,i,n,r,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),h=this._convertToXCellCoord(i),c=this._convertToYCellCoord(n),f=u;f<=h;f++)for(var p=l;p<=c;p++){var d=this.xCellCount*p+f;if(r.call(this,t,e,i,n,d,o,a,s))return}}},{key:"_convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"_convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}},{key:"_circlesCollide",value:function(t,e,i,n,r,o){var a=n-t,s=r-e,u=i+o;return a*a+s*s<u*u}},{key:"_circleAndRectCollide",value:function(t,e,i,n,r,o,a){var s=(o-n)/2,u=Math.abs(t-(n+s));if(s+i<u)return!1;var l=(a-r)/2,h=Math.abs(e-(r+l));if(l+i<h)return!1;if(u<=s||h<=l)return!0;var c=u-s,f=h-l;return c*c+f*f<=i*i}}]),t}(),Ao=function(t,e,i,n){var r;if(n&&(r=function(t){return t!==n.id}),!e){if("point"===t.type&&!t.angle){var o=t.getAABB(),a=o.left,s=o.top,u=o.right,l=o.bottom;if(i.hitTest(a,-s,u,-l,r)){if(Array.isArray(t.layout.anchor))for(var h=1;h<t.layout.anchor.length;h++){t.setAnchor(t.layout.anchor[h]);var c=t.getAABB(),f=c.left,p=c.top,d=c.right,g=c.bottom;if(!i.hitTest(f,-p,d,-g,r))return!1}return!0}return!1}var y=t.getBoundingCircles();return i.hitTestCircleList(y,r)}if(e){if("point"===t.type&&!t.isFlat()){var v=t.getScreenSpaceBoundingBox(),m=v.left,b=v.top,_=v.right,w=v.bottom;return i.hitTest(m,b,_,w,r)}var x=t.getBoundingCircles();return i.hitTestCircleList(x,r)}return!1},ko={tiles:{},startTile:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},n=i.apply_repeat_groups,r=void 0===n||n,o=i.return_hidden,a=void 0!==o&&o,s=i.grid_index,u=void 0===s?null:s,l=this.tiles[t]={grid_index:u||new Eo(er.tile_scale,er.tile_scale,240),objects:{},labels:{},styles:{},repeat:r,return_hidden:a};null==l.complete&&(l.complete=new Promise((function(t,e){l.resolve=t,l.reject=e})))},resetTile:function(t){delete this.tiles[t]},abortTile:function(t){this.tiles[t]&&this.tiles[t].resolve&&this.tiles[t].resolve([]),this.resetTile(t)},addStyle:function(t,e){this.tiles[e].styles[t]=!0},collide:function(t,e,i){var n=this.tiles[i];if(!n)return Promise.resolve([]);for(var r=n.objects,o=0;o<t.length;o++){var a=t[o],s=a.label.layout.priority;r[s]=r[s]||{},r[s][e]=r[s][e]||[],r[s][e].push(a)}return delete n.styles[e],0===Object.keys(n.styles).length&&this.endTile(i),n.complete.then((function(){return n.resolve=null,n.labels[e]||[]}))},endTile:function(t){var e=this.tiles[t],i=e.labels;e.repeat&&Mo.clear(t);for(var n=Object.keys(e.objects).sort((function(t,e){return t-e})),r=0;r<n.length;r++){var o=e.objects[n[r]];if(o)for(var a in o){var s=o[a];i[a]=i[a]||[];for(var u=0;u<s.length;u++){var l=s[u];this.canBePlaced(l,t,l.linked,e)?l.linked?this.canBePlaced(l.linked,t,l,e)?(l.show=!0,(l.label.breach||l.linked.label.breach)&&(l.label.breach=!0,l.linked.label.breach=!0),i[a].push(l),this.place(l,t,e),this.place(l.linked,t,e)):e.return_hidden&&(l.show=!1,i[a].push(l)):(l.show=!0,i[a].push(l),this.place(l,t,e)):e.return_hidden&&(l.show=!1,i[a].push(l))}}}delete this.tiles[t],e.resolve()},canBePlaced:function(t,e,i,n){var r=2<arguments.length&&void 0!==i?i:null,o=(3<arguments.length&&void 0!==n?n:{}).repeat,a=void 0===o||o,s=t.label,u=t.label.layout;if(null!==s.placed)return s.placed;var l=this.tiles[e].grid_index;if(u.collide&&Ao(s,"main"===e,l,r&&r.label))u.collide&&(s.placed=!1);else{if(!a||!Mo.check(s,u,e))return!0;s.placed=!1}return s.placed},place:function(t,e,i){var n=t.label,r=i.repeat,o=void 0===r||r;null===n.placed&&(o&&Mo.add(n,n.layout,e),function(t,e,i){var n,r,o,a,s,u,l,h,c,f,p,d,g=t.id;t.placed=!0,e||("point"!==t.type||t.angle?(n=t.getBoundingCircles(),i.insertCircleList(g,n)):(o=(r=t.getAABB()).left,a=r.top,s=r.right,u=r.bottom,i.insert(g,o,-a,s,-u))),e&&("point"!==t.type||t.isFlat()?(l=t.getBoundingCircles(),i.insertCircleList(g,l)):(c=(h=t.getScreenSpaceBoundingBox()).left,f=h.top,p=h.right,d=h.bottom,i.insert(g,c,f,p,d)))}(n,"main"===e,this.tiles[e].grid_index))}},To={id:0,queue:[],max_time:20,start_time:null,state:{},ignore_user_moving_view:!1,_ignoreViewMoveWithDebounce:kr((function(){To.ignore_user_moving_view=!0}),0,500),add:function(t){t.id=To.id++,t.max_time=t.max_time||To.max_time,t.pause_factor=t.pause_factor||1;var e=new Promise((function(e,i){t.resolve=e,t.reject=i}));return t.promise=e,t.total_elapsed=0,t.stats={calls:0},this.queue.push(t),this.start_time=this.start_time||performance.now(),this.elapsed=performance.now()-this.start_time,this.elapsed<To.max_time&&this.process(t),t.promise},remove:function(t){var e=this.queue.indexOf(t);-1<e&&this.queue.splice(e,1)},process:function(t){if(!this.state.user_moving_view||!1!==t.user_moving_view||this.ignore_user_moving_view)return t.pause?(t.pause--,!0):(t.stats.calls++,t.start_time=performance.now(),t.run(t));To._ignoreViewMoveWithDebounce()},processAll:function(){this.start_time=this.start_time||performance.now(),this.ignore_user_moving_view&&!this.hasPendingTasks()&&(this.ignore_user_moving_view=!1);for(var t=0;t<this.queue.length;t++){var e=this.queue[t];if(!0!==this.process(e)&&(e.pause||(e.pause=e.elapsed>e.max_time?e.pause_factor:0),e.total_elapsed+=e.elapsed),this.elapsed=performance.now()-this.start_time,this.elapsed>=To.max_time){this.start_time=null;break}}},finish:function(t,e){return t.elapsed=performance.now()-t.start_time,t.total_elapsed+=t.elapsed,this.remove(t),t.resolve(e),t.promise},cancel:function(t){var e;t.cancel instanceof Function&&(e=t.cancel(t)),t.resolve(e||{})},shouldContinue:function(t){return t.elapsed=performance.now()-t.start_time,this.elapsed=performance.now()-this.start_time,t.elapsed<t.max_time&&this.elapsed<To.max_time},removeForTile:function(t){for(var e=this.queue.length-1;0<=e;e--)this.queue[e].tile_id===t&&(this.cancel(this.queue[e]),this.queue.splice(e,1))},setState:function(t){this.state=t},hasPendingTasks:function(){return!!this.queue.length}};function So(t){return{coords:t.coords,uid:t.uid,filtering:t.filtering,sprites:t.sprites,url:t.url,element:t.element,data:t.data,width:t.width,height:t.height,density:t.density,repeat:t.repeat,TEXTURE_WRAP_S:t.TEXTURE_WRAP_S,TEXTURE_WRAP_T:t.TEXTURE_WRAP_T,UNPACK_FLIP_Y_WEBGL:t.UNPACK_FLIP_Y_WEBGL,UNPACK_PREMULTIPLY_ALPHA_WEBGL:t.UNPACK_PREMULTIPLY_ALPHA_WEBGL}}var Io=function(){function t(e,i,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};mn(this,t),r=So(r),this.gl=e,this.texture=e.createTexture(),this.texture&&(this.valid=!0),this.manager=n,this.bind(),this.name=i,this.retain_count=0,this.config_type=null,this.loading=null,this.loaded=!1,this.filtering=r.filtering,this.density=r.density||1,this.sprites=r.sprites,this.texcoords={},this.sizes={},this.css_sizes={},this.aspects={},this._byte_length=0,this.setData(1,1,new Uint8Array([0,0,0,0]),{filtering:"nearest"}),this.loaded=!1,this.manager.textures[this.name]&&(this.retain_count=this.manager.textures[this.name].retain_count,this.manager.textures[this.name].retain_count=0,this.manager.textures[this.name].destroy()),(this.manager.textures[this.name]=this).manager.texture_configs[this.name]=JSON.stringify(Object.assign({name:i},r)),this.load(r),Ar("trace","creating Texture ".concat(this.name))}return _n(t,[{key:"destroy",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).force;0<this.retain_count&&!e?Ar("error","Texture '".concat(this.name,"': destroying texture with retain count of '").concat(this.retain_count,"'")):this.valid&&(this.gl.deleteTexture(this.texture),this.texture=null,delete this.data,this.data=null,delete this.manager.textures[this.name],delete this.manager.texture_configs[this.name],this.valid=!1,this._byte_length=0,Ar("trace","destroying Texture ".concat(this.name)))}},{key:"retain",value:function(){this.retain_count++}},{key:"release",value:function(){this.retain_count<=0&&Ar("error","Texture '".concat(this.name,"': releasing texture with retain count of '").concat(this.retain_count,"'")),this.retain_count--,this.retain_count<=0&&this.destroy()}},{key:"bind",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;this.valid&&(this.manager.activeUnit!==e&&(this.gl.activeTexture(this.gl.TEXTURE0+e),this.manager.activeUnit=e,this.manager.boundTexture=null),this.manager.boundTexture!==this.texture&&(this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.manager.boundTexture=this.texture))}},{key:"load",value:function(t){var e=this;return t?(this.loading=null,"string"==typeof t.url?(this.config_type="url",this.setUrl(t.url,t)):t.element?(this.config_type="element",this.setElement(t.element,t)):t.data&&t.width&&t.height&&(this.config_type="data",this.setData(t.width,t.height,t.data,t)),this.loading=this.loading&&this.loading.then((function(){return e.calculateSprites(),e}))||Promise.resolve(this),this.loading):this.loading||Promise.resolve(this)}},{key:"setUrl",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e?e:{};if(this.valid)return this.url=t,this.loading=new Promise((function(t,e){var r=new Image;r.onload=function(){try{i.setElement(r,n)}catch(t){i.loaded=!1,Ar("warn","Texture '".concat(i.name,"': failed to load url: '").concat(i.url,"'"),t,n),i.manager.trigger("warning",{message:"Failed to load texture from ".concat(i.url),error:t,texture:n})}i.loaded=!0,t(i)},r.onerror=function(e){i.loaded=!1,Ar("warn","Texture '".concat(i.name,"': failed to load url: '").concat(i.url,"'"),e,n),i.manager.trigger("warning",{message:"Failed to load texture from ".concat(i.url),error:e,texture:n}),t(i)},Tr.isSafari()&&"data:"===i.url.slice(0,5)||(r.crossOrigin="anonymous"),r.src=i.url})),this.loading}},{key:"setData",value:function(t,e,i,n){var r=3<arguments.length&&void 0!==n?n:{};return this.width=t,this.height=e,Array.isArray(i)&&(i=new Uint8Array(i)),this.update(i,r),this.setFiltering(r),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"setElement",value:function(t,e){var i,n=t;return"string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof HTMLVideoElement?(this.update(t,e),this.setFiltering(e)):(this.loaded=!1,i="the 'element' parameter (`element: ".concat(JSON.stringify(n),"`) must be a CSS "),i+="selector string, or a <canvas>, <image> or <video> object",Ar("warn","Texture '".concat(this.name,"': ").concat(i),e),this.manager.trigger("warning",{message:"Failed to load texture because ".concat(i),texture:e})),this.loaded=!0,this.loading=Promise.resolve(this),this.loading}},{key:"update",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};this.valid&&(this.bind(),t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLImageElement&&t.complete?(this.width=t.width,this.height=t.height,this._byte_length=this.width*this.height*4,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1!==i.UNPACK_FLIP_Y_WEBGL),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.UNPACK_PREMULTIPLY_ALPHA_WEBGL||!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)):(this._byte_length=t?t.byteLength:0,this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t)),this.manager.trigger("update",this))}},{key:"getByteLength",value:function(){return this._byte_length}},{key:"setFiltering",value:function(t){var e,i=0<arguments.length&&void 0!==t?t:{};this.valid&&(i.filtering=i.filtering||"linear",e=this.gl,this.bind(),Tr.isPowerOf2(this.width)&&Tr.isPowerOf2(this.height)?(this.power_of_2=!0,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,i.TEXTURE_WRAP_S||i.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,i.TEXTURE_WRAP_T||i.repeat&&e.REPEAT||e.CLAMP_TO_EDGE),"mipmap"===i.filtering?(this.filtering="mipmap",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.generateMipmap(e.TEXTURE_2D)):"linear"===i.filtering?(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)):"nearest"===i.filtering&&(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST))):(this.power_of_2=!1,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),"nearest"===i.filtering?(this.filtering="nearest",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)):(this.filtering="linear",e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR))),this.manager.trigger("update",this))}},{key:"calculateSprites",value:function(){if(this.sprites)for(var t in this.sprites){var e=this.sprites[t];this.texcoords[t]=this.manager.getTexcoordsForSprite([e[0],e[1]],[e[2],e[3]],[this.width,this.height]),this.sizes[t]=[e[2],e[3]],this.css_sizes[t]=[e[2]/this.density,e[3]/this.density],this.aspects[t]=e[2]/e[3]}}}]),t}();function Lo(t){var e=[];return Object.assign(t,{subscribe:function(t){-1===e.indexOf(t)&&e.push(t)},unsubscribe:function(t){var i=e.indexOf(t);-1<i&&e.splice(i,1)},unsubscribeAll:function(){e=[]},trigger:function(t){for(var i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];e.forEach((function(e){if("function"==typeof e[t])try{e[t].apply(e,n)}catch(e){Ar("warn","Caught exception in listener for event '".concat(t,"':"),e)}}))},hasSubscribersFor:function(t){var i=!1;return e.forEach((function(e){"function"==typeof e[t]&&(i=!0)})),i}})}var Oo=function(){function t(e){mn(this,t),this.default=t.DEFAULT_TEXTURE_NAME,this.textures={},this.texture_configs={},this.boundTexture=null,this.activeUnit=null,this.scene_id=e,cr.addTarget("Texture"+this.scene_id,this),Lo(this)}return _n(t,[{key:"create",value:function(e,i,n){for(var r=t.matchers_,o=0;o<r.length;o++){var a=r[o][0],s=r[o][1];if(s&&s(n))return new a(e,i,this,n)}return new Io(e,i,this,n)}},{key:"retain",value:function(t){this.textures[t]&&this.textures[t].retain()}},{key:"release",value:function(t){this.textures[t]&&this.textures[t].release()}},{key:"getRetainCount",value:function(t){if(this.textures[t])return this.textures[t].retain_count}},{key:"getByteLength",value:function(t){if(this.textures[t])return this.textures[t].getByteLength()}},{key:"destroy",value:function(t){var e=this;Object.keys(this.textures).forEach((function(i){var n=e.textures[i];i!==e.default&&n.gl===t&&n.destroy({force:!0})}))}},{key:"getSpriteInfo",value:function(t,e){var i=this.textures[t];return i&&{size:i.sizes[e],css_size:i.css_sizes[e],aspect:i.aspects[e],texcoords:i.texcoords[e]}}},{key:"getTexcoordsForSprite",value:function(t,e,i){var n=i[1]-t[1]-e[1];return[t[0]/i[0],n/i[1],(e[0]+t[0])/i[0],(e[1]+n)/i[1]]}},{key:"createFromObject",value:function(t,e){var i=[];if(e)for(var n in e){var r,o=e[n];this.changed(n,o)&&(r=this.create(t,n,o),i.push(r.loading))}return Promise.all(i)}},{key:"createDefault",value:function(t){return this.create(t,this.default)}},{key:"changed",value:function(t,e){var i=this.textures[t];if(i){if("element"===i.config_type||null!=e.element)return!0;if(e=So(e),this.texture_configs[t]===JSON.stringify(Object.assign({name:t},e)))return!1}return!0}},{key:"getInfo",value:function(t){var e=this;if(t=t||Object.keys(this.textures),Array.isArray(t))return Promise.all(t.map((function(t){return e.getInfo(t)})));var i=this.textures[t];return i?(i.loading||Promise.resolve(i)).then((function(){return{name:i.name,width:i.width,height:i.height,density:i.density,sprites:i.sprites,texcoords:i.texcoords,sizes:i.sizes,css_sizes:i.css_sizes,aspects:i.aspects,filtering:i.filtering,power_of_2:i.power_of_2,valid:i.valid}})):Promise.resolve(null)}},{key:"syncTexturesToWorker",value:function(t){var e=this;return hr.is_main?Promise.all(t.map((function(t){var i=e.textures[t];return i&&i.loading||Promise.resolve()}))).then((function(){return e.textures})):cr.postMessage("Texture"+this.scene_id+".getInfo",t).then((function(t){return t.forEach((function(t){e.textures[t.name]=t})),e.textures}))}},{key:"getMaxTextureSize",value:function(t){return t.getParameter(t.MAX_TEXTURE_SIZE)}}],[{key:"register",value:function(e,i){var n=t.matchers_;if(!(e instanceof Function&&i instanceof Function))throw"Invalid texture constructor or matcher";this.deRegister(e),n.push([e,i])}},{key:"deRegister",value:function(e){for(var i=t.matchers_,n=0;n<i.length;n++)i[n][0]===e&&i.splice(n,1)}}]),t}();Oo.DEFAULT_TEXTURE_NAME="__default",Oo.matchers_=[];var Co={};function Po(t){return Co[t]||(Co[t]=new Oo(t)),Co[t]}var Ro=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},jo=function(t,e,i){var n=new Float64Array(3);return n[0]=t,n[1]=e,n[2]=i,n},No=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=i[3]*n+i[7]*r+i[11]*o+i[15];return a=a||1,t[0]=(i[0]*n+i[4]*r+i[8]*o+i[12])/a,t[1]=(i[1]*n+i[5]*r+i[9]*o+i[13])/a,t[2]=(i[2]*n+i[6]*r+i[10]*o+i[14])/a,t},Do=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],p=e[10],d=e[11],g=e[12],y=e[13],v=e[14],m=e[15],b=i[0],_=i[1],w=i[2],x=i[3];return t[0]=b*n+_*s+w*c+x*g,t[1]=b*r+_*u+w*f+x*y,t[2]=b*o+_*l+w*p+x*v,t[3]=b*a+_*h+w*d+x*m,b=i[4],_=i[5],w=i[6],x=i[7],t[4]=b*n+_*s+w*c+x*g,t[5]=b*r+_*u+w*f+x*y,t[6]=b*o+_*l+w*p+x*v,t[7]=b*a+_*h+w*d+x*m,b=i[8],_=i[9],w=i[10],x=i[11],t[8]=b*n+_*s+w*c+x*g,t[9]=b*r+_*u+w*f+x*y,t[10]=b*o+_*l+w*p+x*v,t[11]=b*a+_*h+w*d+x*m,b=i[12],_=i[13],w=i[14],x=i[15],t[12]=b*n+_*s+w*c+x*g,t[13]=b*r+_*u+w*f+x*y,t[14]=b*o+_*l+w*p+x*v,t[15]=b*a+_*h+w*d+x*m,t},zo=function(t,e,i){var n,r,o,a,s,u,l,h,c,f,p,d,g=i[0],y=i[1],v=i[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*v+e[12],t[13]=e[1]*g+e[5]*y+e[9]*v+e[13],t[14]=e[2]*g+e[6]*y+e[10]*v+e[14],t[15]=e[3]*g+e[7]*y+e[11]*v+e[15]):(n=e[0],r=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],p=e[10],d=e[11],t[0]=n,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=p,t[11]=d,t[12]=n*g+s*y+c*v+e[12],t[13]=r*g+u*y+f*v+e[13],t[14]=o*g+l*y+p*v+e[14],t[15]=a*g+h*y+d*v+e[15]),t},Bo=Ro,Ho=function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15],m=i*s-n*a,b=i*u-r*a,_=i*l-o*a,w=n*u-r*s,x=n*l-o*s,M=r*l-o*u,E=h*g-c*d,A=h*y-f*d,k=h*v-p*d,T=c*y-f*g,S=c*v-p*g,I=f*v-p*y,L=m*I-b*S+_*T+w*k-x*A+M*E;return L?(L=1/L,t[0]=(s*I-u*S+l*T)*L,t[1]=(r*S-n*I-o*T)*L,t[2]=(g*M-y*x+v*w)*L,t[3]=(f*x-c*M-p*w)*L,t[4]=(u*k-a*I-l*A)*L,t[5]=(i*I-r*k+o*A)*L,t[6]=(y*_-d*M-v*b)*L,t[7]=(h*M-f*_+p*b)*L,t[8]=(a*S-s*k+l*E)*L,t[9]=(n*k-i*S-o*E)*L,t[10]=(d*x-g*_+v*m)*L,t[11]=(c*_-h*x-p*m)*L,t[12]=(s*A-a*T-u*E)*L,t[13]=(i*T-n*A+r*E)*L,t[14]=(g*b-d*w-y*m)*L,t[15]=(h*w-c*b+f*m)*L,t):null},Fo=function(t,e,i){var n=e[0],r=e[1],o=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*o+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*o+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*o+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*o+i[15]*a,t},Uo=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},Vo=0,qo=0,Go=function(){function t(e){var i=e.coords,n=e.style_zoom,r=e.source,o=e.worker,a=e.view,s=e.sceneId;mn(this,t),this.textureManager=Po(s),this.id=Vo++,this.worker=o,this.view=a,this.source=r,this.generation=null,this.valid=!0,this.proxy_for=null,this.proxy_depth=0,this.proxied_as=null,this.fade_in=!0,this.loading=!1,this.loaded=!1,this.built=!1,this.labeled=!1,this.error=null,this.style_zoom=n,this.coords=t.normalizedCoordinate(i,this.source,this.style_zoom),this.key=t.key(this.coords,this.source,this.style_zoom),this.overzoom=Math.max(this.style_zoom-this.coords.z,0),this.overzoom2=Math.pow(2,this.overzoom),this.min=er.metersForTile(this.coords),this.max=er.metersForTile({x:this.coords.x+1,y:this.coords.y+1,z:this.coords.z}),this.span={x:this.max.x-this.min.x,y:this.max.y-this.min.y},this.bounds={sw:{x:this.min.x,y:this.max.y},ne:{x:this.max.x,y:this.min.y}},this.center_dist=0,this.meters_per_pixel=er.metersPerPixel(this.style_zoom),this.meters_per_pixel_sq=this.meters_per_pixel*this.meters_per_pixel,this.units_per_pixel=er.units_per_pixel/this.overzoom2,this.units_per_meter_overzoom=er.unitsPerMeter(this.coords.z)*this.overzoom2,this.meshes={},this.new_mesh_styles=[]}return _n(t,[{key:"freeResources",value:function(){for(var t in this.meshes)this.meshes[t].forEach((function(t){return t.destroy()}));this.meshes={}}},{key:"destroy",value:function(){To.removeForTile(this.id),this.workerMessage("self.removeTile",this.id),this.freeResources(),this.worker=null,this.valid=!1}},{key:"buildAsMessage",value:function(){return{id:this.id,key:this.key,source:this.source.name,coords:this.coords,min:this.min,max:this.max,units_per_pixel:this.units_per_pixel,meters_per_pixel:this.meters_per_pixel,meters_per_pixel_sq:this.meters_per_pixel_sq,units_per_meter_overzoom:this.units_per_meter_overzoom,style_zoom:this.style_zoom,overzoom:this.overzoom,overzoom2:this.overzoom2,generation:this.generation}}},{key:"workerMessage",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return cr.postMessage.apply(cr,[this.worker].concat(e))}},{key:"build",value:function(t,e){var i=(1<arguments.length&&void 0!==e?e:{}).fade_in,n=void 0===i||i;return this.generation=t,this.fade_in=n,this.loaded||(this.loading=!0,this.built=!1,this.labeled=!1),this.workerMessage("self.buildTile",{tile:this.buildAsMessage()})}},{key:"buildMeshes",value:function(t,e){if(!this.error){this.build_id=qo++;var i={},n=this.mesh_data;if(n)for(var r in n){for(var o in n[r].meshes){var a=n[r].meshes[o];if(a.vertex_data){if(!t[r]){Ar("warn","Could not create mesh because style '".concat(r,"' not found, for tile ").concat(this.key,", aborting tile"));break}var s=Object.assign({},n[r]);s.uniforms=Object.assign({},s.uniforms,a.uniforms),s.variant=a.variant,a.textures&&(s.textures=a.textures),a.labels&&(s.retain=!0);var u=t[r].makeMesh(a.vertex_data,a.vertex_elements,s);u.variant=s.variant,u.labels=a.labels,i[r]=i[r]||[],i[r].push(u),null==u.variant.order&&(u.variant.order=i[r].length-1)}}i[r]&&i[r].sort((function(t,e){var i=t.variant.order,n=e.variant.order;return null!=i&&(null==n||i<n)?-1:1}))}for(var l in delete this.mesh_data,i)this.meshes[l]&&this.meshes[l].forEach((function(t){return t.destroy()})),this.meshes[l]=i[l],this.new_mesh_styles.push(l);if(e.done){for(var h in this.meshes)-1===this.new_mesh_styles.indexOf(h)&&(this.meshes[h].forEach((function(t){return t.destroy()})),delete this.meshes[h]);this.new_mesh_styles=[]}}}},{key:"setProxyFor",value:function(t){t?(this.proxy_for=this.proxy_for||[],this.proxy_for.push(t),this.proxy_depth=1,t.proxied_as=t.style_zoom>this.style_zoom?"child":"parent"):(this.proxy_for=null,this.proxy_depth=0)}},{key:"isProxy",value:function(){return null!=this.proxy_for}},{key:"shouldProxyForStyle",value:function(t){return!this.proxy_for||this.proxy_for.some((function(e){return null==e.meshes[t]}))}},{key:"setupProgram",value:function(t,e){var i=t.model,n=t.model32;e.uniform("4fv","u_tile_origin",[this.min.x,this.min.y,this.style_zoom,this.coords.z]),e.uniform("1f","u_tile_proxy_depth",this.proxy_depth),Bo(i),zo(i,i,jo(this.min.x,this.min.y,0)),function(t,e,i){var n=i[0],r=i[1],o=i[2];t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(i,i,jo(this.span.x/er.tile_scale,-1*this.span.y/er.tile_scale,1)),function(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(n,i),e.uniform("Matrix4fv","u_model",n),e.uniform("1i","u_tile_fade_in",this.fade_in&&"child"!==this.proxied_as)}},{key:"merge",value:function(t){return this.loading=t.loading,this.loaded=t.loaded,this.generation=t.generation,this.error=t.error,this.mesh_data=t.mesh_data,this.selection_data?Object.assign(this.selection_data,t.selection_data):this.selection_data=t.selection_data,this}}],[{key:"coord",value:function(e){return{x:e.x,y:e.y,z:e.z,key:t.coordKey(e)}}},{key:"coordKey",value:function(t){return t.x+"/"+t.y+"/"+t.z}},{key:"key",value:function(t,e,i){if(!(t.y<0||t.y>=1<<t.z||t.z<0))return[e.name,i,t.x,t.y,t.z].join("/")}},{key:"normalizedKey",value:function(e,i,n){return t.key(t.normalizedCoordinate(e,i,n),i,n)}},{key:"normalizedCoordinate",value:function(e,i){return i.zoom_bias&&(e=t.coordinateAtZoom(e,Math.max(0,e.z-i.zoom_bias))),t.coordinateWithMaxZoom(e,i.max_zoom)}},{key:"coordinateAtZoom",value:function(e,i){var n,r=e.x,o=e.y,a=e.z;return a!==i&&(n=Math.pow(2,a-i),r=Math.floor(r/n),o=Math.floor(o/n),a=i),t.coord({x:r,y:o,z:a})}},{key:"coordinateWithMaxZoom",value:function(e,i){var n=e.x,r=e.y,o=e.z;return void 0!==i&&i<o?t.coordinateAtZoom({x:n,y:r,z:o},i):t.coord({x:n,y:r,z:o})}},{key:"childrenForCoordinate",value:function(e){var i=e.x,n=e.y,r=e.z,o=e.key;return t.coord_children[o]||(r++,i*=2,n*=2,t.coord_children[o]=[t.coord({x:i,y:n,z:r}),t.coord({x:i+1,y:n,z:r}),t.coord({x:i,y:n+1,z:r}),t.coord({x:i+1,y:n+1,z:r})]),t.coord_children[o]}},{key:"isDescendant",value:function(e,i){if(i.z>e.z){var n=t.coordinateAtZoom(i,e.z),r=n.x,o=n.y;return e.x===r&&e.y===o}return!1}},{key:"cancel",value:function(e){e&&(e.canceled=!0,e.source_data&&e.source_data.request_id&&(Tr.cancelRequest(e.source_data.request_id),e.source_data.request_id=null),t.abortBuild(e))}},{key:"buildGeometry",value:function(e,i){var n=i.scene_id,r=i.layers,o=i.styles,a=i.global,s=i.sources,u=e.source_data;for(var l in ko.startTile(e.id,{apply_repeat_groups:!0}),r){var h=r[l];if(h&&h.config_data){if(h.config_data.source===e.source)for(var c=t._getDataForSource(u,h.config_data,l),f=0;f<c.length;f++){var p=c[f],d=p.geom;if(d)for(var g=0;g<d.features.length;g++){var y=d.features[g];if(null!=y.geometry){var v=vo.getFeatureParseContext(y,e,a,s);v.winding=e.default_winding,v.source=e.source,v.layer=p.layer;var m=h.buildDrawGroups(v,!0);if(m)for(var b in m){var _=m[b],w=_.style||b,x=o[w];x?null!=(_=x.preprocess(_,e.source))&&!1!==_.visible&&(v.layers=_.layers,x.addFeature(y,_,v)):Ar("warn","Style '".concat(w,"' not found, skipping layer '").concat(l,"':"),_,y)}}}}}else Ar("warn","Layer ".concat(l," was defined without a geometry data source and will not be rendered."))}var M=t._stylesForTile(e,o);t._sendStyleGroups(e,M,{scene_id:n},(function(t){return t.collision?"collision":"non-collision"}))}},{key:"_stylesForTile",value:function(t,e){var i=[];for(var n in e)e[n].hasDataForTile(t)&&i.push(e[n]);return i}},{key:"_sendStyleGroups",value:function(e,i,n,r){var o=n.scene_id,a={};i.forEach((function(t){var e=r(t);a[e]=a[e]||[],a[e].push(t)})),0<Object.keys(a).length?function(){var i={start:!0};for(var n in e.mesh_data={},a)!function(n){var r=a[n];Promise.all(r.map((function(t){return t.endData(e)}))).then((function(){Ar("trace","Finished style group '".concat(n,"' for tile ").concat(e.key)),a[n]=[],Object.keys(a).every((function(t){return 0===a[t].length}))&&(i.done=!0),cr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),cr.withTransferables({tile:t.slice(e,["mesh_data","selection_data"]),progress:i})),i.start=null,e.mesh_data={},e.selection_data={},i.done&&ko.resetTile(e.id)}),(function(t){Ar("error","Error for style group '".concat(n,"' for tile ").concat(e.key),t)}))}(n)}():(cr.postMessage("TileManager_".concat(o,".buildTileStylesCompleted"),cr.withTransferables({tile:t.slice(e),progress:{start:!0,done:!0}})),ko.resetTile(e.id))}},{key:"_getDataForSource",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:null,r=[];return null!=e&&null!=t&&null!=t.layers&&(!e.layer&&t.layers._default||"string"==typeof e.layer&&!t.layers[e.layer]&&new RegExp("^\\d+_"+e.layer+"$").test(n)&&t.layers._default?r.push({geom:t.layers._default}):!e.layer&&n?r.push({layer:n,geom:t.layers[n]}):"string"==typeof e.layer?r.push({layer:e.layer,geom:t.layers[e.layer]}):Array.isArray(e.layer)&&e.layer.forEach((function(e){t.layers[e]&&t.layers[e].features&&r.push({layer:e,geom:t.layers[e]})}))),r}},{key:"abortBuild",value:function(t,e){if(To.removeForTile(t.id),ko.abortTile(t.id),t.mesh_data)for(var i in t.mesh_data){var n=t.mesh_data[i].textures;n&&n.forEach((function(i){var n=Po(e).textures[i];n&&(Ar("trace","releasing texture ".concat(i," for tile ").concat(t.key)),n.release())}))}}},{key:"slice",value:function(t,e){var i=["id","key","loading","loaded","generation","error","debug"];Array.isArray(e)&&i.push.apply(i,Rn(e));for(var n={},r=0;r<i.length;r++){var o=i[r];n[o]=t[o]}return n}}]),t}();Go.coord_children={};var Wo,Yo=function(){En(e,zr);var t=On(e);function e(i,n){var r;return mn(this,e),-1===(r=t.call(this,i,n)).rasters.indexOf(r.name)&&r.rasters.unshift(r.name),r.filtering=i.filtering,r.textures={},r}return _n(e,[{key:"load",value:function(t){t.source_data={},t.source_data.layers={},t.pad_scale=this.pad_scale,t.rasters=Rn(this.rasters);var e=er.tile_scale;return t.source_data.layers={_default:{type:"FeatureCollection",features:[{geometry:{type:"Polygon",coordinates:[[[0,0],[e,0],[e,-e],[0,-e],[0,0]]]},properties:{}}]}},t.default_winding="CW",Promise.resolve(t)}},{key:"tileTexture",value:function(t){var e,i,n=t.coords.key;return this.textures[n]||(e=Go.coordinateWithMaxZoom(t.coords,this.max_zoom),i=this.formatUrl(this.url,{coords:e}),this.textures[n]={url:i,filtering:this.filtering,coords:e}),this.textures[n]}}]),e}();jr.register(Yo,"Raster");var Ko=Wo={};function Zo(t,e,i,n){for(var r,o=n,a=i-e>>1,s=i-e,u=t[e],l=t[e+1],h=t[i],c=t[i+1],f=e+3;f<i;f+=3){var p,d=function(t,e,i,n,r,o){var a,s=r-i,u=o-n;return 0===s&&0===u||(1<(a=((t-i)*s+(e-n)*u)/(s*s+u*u))?(i=r,n=o):0<a&&(i+=s*a,n+=u*a)),(s=t-i)*s+(u=e-n)*u}(t[f],t[f+1],u,l,h,c);o<d?(r=f,o=d):d!==o||(p=Math.abs(f-a))<s&&(r=f,s=p)}n<o&&(3<r-e&&Zo(t,e,r,n),t[r+2]=o,3<i-r&&Zo(t,r,i,n))}function Xo(t,e,i,n){var r={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)Jo(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)Jo(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)Jo(t,e[n][r])}(r),r}function Jo(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function $o(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)Qo(i,t.features[n],e,n);else"Feature"===t.type?Qo(i,t,e):Qo(i,{geometry:t},e);return i}function Qo(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],u=e.id;if(i.promoteId?u=e.properties[i.promoteId]:i.generateId&&(u=n||0),"Point"===o)ta(r,s);else if("MultiPoint"===o)for(var l=0;l<r.length;l++)ta(r[l],s);else if("LineString"===o)ea(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(l=0;l<r.length;l++)s=[],ea(r[l],s,a,!1),t.push(Xo(u,"LineString",s,e.properties));return}ia(r,s,a,!1)}else if("Polygon"===o)ia(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(l=0;l<e.geometry.geometries.length;l++)Qo(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},i,n);return}for(l=0;l<r.length;l++){var h=[];ia(r[l],h,a,!0),s.push(h)}}t.push(Xo(u,o,s,e.properties))}}function ta(t,e){e.push(na(t[0])),e.push(ra(t[1])),e.push(0)}function ea(t,e,i,n){for(var r,o,a=0,s=0;s<t.length;s++){var u=na(t[s][0]),l=ra(t[s][1]);e.push(u),e.push(l),e.push(0),0<s&&(a+=n?(r*l-u*o)/2:Math.sqrt(Math.pow(u-r,2)+Math.pow(l-o,2))),r=u,o=l}var h=e.length-3;e[2]=1,Zo(e,0,h,i),e[2+h]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function ia(t,e,i,n){for(var r=0;r<t.length;r++){var o=[];ea(t[r],o,i,n),e.push(o)}}function na(t){return t/360+.5}function ra(t){var e=Math.sin(t*Math.PI/180),i=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return i<0?0:1<i?1:i}function oa(t,e,i,n,r,o,a,s){if(n/=e,(i/=e)<=o&&a<n)return t;if(a<i||n<=o)return null;for(var u=[],l=0;l<t.length;l++){var h=t[l],c=h.geometry,f=h.type,p=0===r?h.minX:h.minY,d=0===r?h.maxX:h.maxY;if(i<=p&&d<n)u.push(h);else if(!(d<i||n<=p)){var g=[];if("Point"===f||"MultiPoint"===f)!function(t,e,i,n,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];i<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(c,g,i,n,r);else if("LineString"===f)aa(c,g,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===f)ua(c,g,i,n,r,!1);else if("Polygon"===f)ua(c,g,i,n,r,!0);else if("MultiPolygon"===f)for(var y=0;y<c.length;y++){var v=[];ua(c[y],v,i,n,r,!0),v.length&&g.push(v)}if(g.length){if(s.lineMetrics&&"LineString"===f){for(y=0;y<g.length;y++)u.push(Xo(h.id,f,g[y],h.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),u.push(Xo(h.id,f,g,h.tags))}}}return u.length?u:null}function aa(t,e,i,n,r,o,a){for(var s,u,l=sa(t),h=0===r?ha:ca,c=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],g=t[f+2],y=t[f+3],v=t[f+4],m=0===r?p:d,b=0===r?y:v,_=!1;a&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(d-v,2))),m<i?i<b&&(u=h(l,p,d,y,v,i),a&&(l.start=c+s*u)):n<m?b<n&&(u=h(l,p,d,y,v,n),a&&(l.start=c+s*u)):la(l,p,d,g),b<i&&i<=m&&(u=h(l,p,d,y,v,i),_=!0),n<b&&m<=n&&(u=h(l,p,d,y,v,n),_=!0),!o&&_&&(a&&(l.end=c+s*u),e.push(l),l=sa(t)),a&&(c+=s)}var w=t.length-3;p=t[w],d=t[w+1],g=t[w+2],i<=(m=0===r?p:d)&&m<=n&&la(l,p,d,g),w=l.length-3,o&&3<=w&&(l[w]!==l[0]||l[w+1]!==l[1])&&la(l,l[0],l[1],l[2]),l.length&&e.push(l)}function sa(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ua(t,e,i,n,r,o){for(var a=0;a<t.length;a++)aa(t[a],e,i,n,r,o,!1)}function la(t,e,i,n){t.push(e),t.push(i),t.push(n)}function ha(t,e,i,n,r,o){var a=(o-e)/(n-e);return t.push(o),t.push(i+(r-i)*a),t.push(1),a}function ca(t,e,i,n,r,o){var a=(o-i)/(r-i);return t.push(e+(n-e)*a),t.push(o),t.push(1),a}function fa(t,e){var i=e.buffer/e.extent,n=t,r=oa(t,1,-1-i,i,0,-1,2,e),o=oa(t,1,1-i,2+i,0,-1,2,e);return(r||o)&&(n=oa(t,1,-i,1+i,0,-1,2,e)||[],r&&(n=pa(r,1).concat(n)),o&&(n=n.concat(pa(o,-1)))),n}function pa(t,e){for(var i=[],n=0;n<t.length;n++){var r,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=da(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(da(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(da(o.geometry[s][l],e));r.push(u)}i.push(Xo(o.id,a,r,o.tags))}return i}function da(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function ga(t,e){if(t.transformed)return t;for(var i,n=1<<t.z,r=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],u=s.geometry,l=s.type;if(s.geometry=[],1===l)for(i=0;i<u.length;i+=2)s.geometry.push(ya(u[i],u[i+1],e,n,r,o));else for(i=0;i<u.length;i++){for(var h=[],c=0;c<u[i].length;c+=2)h.push(ya(u[i][c],u[i][c+1],e,n,r,o));s.geometry.push(h)}}return t.transformed=!0,t}function ya(t,e,i,n,r,o){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-o))]}function va(t,e,i,n,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,i,n){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)ma(a,r,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)ma(a,r[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<r.length;u++){var l=r[u];for(s=0;s<l.length;s++)ma(a,l[s],t,i,!0,0===s)}if(a.length){var h=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var c in h={},e.tags)h[c]=e.tags[c];h.mapbox_clip_start=r.start/r.size,h.mapbox_clip_end=r.end/r.size}var f={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:h};null!==e.id&&(f.id=e.id),t.features.push(f)}}(a,t[s],o,r);var u=t[s].minX,l=t[s].minY,h=t[s].maxX,c=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),h>a.maxX&&(a.maxX=h),c>a.maxY&&(a.maxY=c)}return a}function ma(t,e,i,n,r,o){var a=n*n;if(0<n&&e.size<(r?a:n))i.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===n||e[u+2]>a)&&(i.numSimplified++,s.push(e[u]),s.push(e[u+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,o=r-2;n<r;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<i===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,o),t.push(s)}}var ba={maxZoom:14,tolerance:3,extent:4096,buffer:64,lineMetrics:!(Wo.deepClone=function(t){return Array.isArray(t)?t.map(Wo.deepClone):t}),promoteId:null,generateId:!1};function _a(t,e,i,n,r){var o=Object.assign({},ba,r),a=$o(t,o),s=function(t){var e,i=2,n=-1,r=1,o=0,a=Dn(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.minX<i&&(i=s.minX),s.maxX>n&&(n=s.maxX),s.minY<r&&(r=s.minY),s.maxY>o&&(o=s.maxY)}}catch(t){a.e(t)}finally{a.f()}return{minX:i,maxX:n,minY:r,maxY:o}}(a=fa(a,o)),u=s.minX,l=s.minY,h=s.maxX,c=s.maxY,f=1<<e,p=o.buffer/o.extent,d=1+p;return a=oa(a,f,i-p,i+d,0,u,h,o)||[],ga(va(a=oa(a,f,n-p,n+d,1,l,c,o)||[],e,i,n,o),o.extent)}function wa(t,e){this.items=[],this.algorithm=t;var i=void 0===(e=e||{}).sort||e.sort;this.sort=i}wa.prototype={addItem:function(t){this.items.push(t)},normalizeCoordinates:function(){var t=this.items,e=1/0,i=1/0;t.forEach((function(t){var n=t;e=Math.min(e,n.x),i=Math.min(i,n.y)})),t.forEach((function(t){var n=t;n.x-=e,n.y-=i}))},getStats:function(){var t=this.items.map((function(t){return t})),e=t.map((function(t){return t.x})),i=t.map((function(t){return t.y})),n=t.map((function(t){return t.x+t.width})),r=t.map((function(t){return t.y+t.height}));return{minX:Math.max.apply(Math,e),minY:Math.max.apply(Math,i),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,r)}},getItems:function(){return this.items},processItems:function(){var t=this.items;return this.sort&&(t=this.algorithm.sort(t)),t=this.algorithm.placeItems(t),this.items=t},exportItems:function(){return this.processItems(),this.normalizeCoordinates(),this.items},export:function(){var t=this.exportItems(),e=this.getStats();return{height:e.maxY,width:e.maxX,items:t}}};var xa=wa,Ma=[],Ea=[],Aa="undefined"!=typeof Uint8Array?Uint8Array:Array,ka=!1;function Ta(){ka=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)Ma[e]=t[e],Ea[t.charCodeAt(e)]=e;Ea["-".charCodeAt(0)]=62,Ea["_".charCodeAt(0)]=63}function Sa(t,e,i){for(var n,r,o=[],a=e;a<i;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(Ma[(r=n)>>18&63]+Ma[r>>12&63]+Ma[r>>6&63]+Ma[63&r]);return o.join("")}function Ia(t){var e;ka||Ta();for(var i=t.length,n=i%3,r="",o=[],a=0,s=i-n;a<s;a+=16383)o.push(Sa(t,a,s<a+16383?s:a+16383));return 1==n?(e=t[i-1],r+=Ma[e>>2],r+=Ma[e<<4&63],r+="=="):2==n&&(e=(t[i-2]<<8)+t[i-1],r+=Ma[e>>10],r+=Ma[e>>4&63],r+=Ma[e<<2&63],r+="="),o.push(r),o.join("")}function La(t,e,i,n,r){var o,a,s=8*r-n-1,u=(1<<s)-1,l=u>>1,h=-7,c=i?r-1:0,f=i?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-h)-1,p>>=-h,h+=s;0<h;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;0<h;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)}function Oa(t,e,i,n,r,o){var a,s,u,l=8*o-r-1,h=(1<<l)-1,c=h>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),2<=(e+=1<=a+c?f/u:f*Math.pow(2,1-c))*u&&(a++,u/=2),h<=a+c?(s=0,a=h):1<=a+c?(s=(e*u-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));8<=r;t[i+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;0<l;t[i+p]=255&a,p+=d,a/=256,l-=8);t[i+p-d]|=128*g}var Ca={}.toString,Pa=Array.isArray||function(t){return"[object Array]"==Ca.call(t)};Da.TYPED_ARRAY_SUPPORT=void 0===Xn.TYPED_ARRAY_SUPPORT||Xn.TYPED_ARRAY_SUPPORT;var Ra=ja();function ja(){return Da.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Na(t,e){if(ja()<e)throw new RangeError("Invalid typed array length");return Da.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Da.prototype:(null===t&&(t=new Da(e)),t.length=e),t}function Da(t,e,i){if(!(Da.TYPED_ARRAY_SUPPORT||this instanceof Da))return new Da(t,e,i);if("number"!=typeof t)return za(this,t,e,i);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Ha(this,t)}function za(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),Da.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Da.prototype:t=Fa(t,e),t}(t,e,i,n):"string"==typeof e?function(t,e,i){if("string"==typeof i&&""!==i||(i="utf8"),!Da.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|qa(e,i),r=(t=Na(t,n)).write(e,i);return r!==n&&(t=t.slice(0,r)),t}(t,e,i):function(t,e){if(Va(e)){var i=0|Ua(e.length);return 0===(t=Na(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?Na(t,0):Fa(t,e);if("Buffer"===e.type&&Pa(e.data))return Fa(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Ba(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Ha(t,e){if(Ba(e),t=Na(t,e<0?0:0|Ua(e)),!Da.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function Fa(t,e){var i=e.length<0?0:0|Ua(e.length);t=Na(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function Ua(t){if(t>=ja())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ja().toString(16)+" bytes");return 0|t}function Va(t){return null!=t&&t._isBuffer}function qa(t,e){if(Va(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return ss(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return us(t).length;default:if(n)return ss(t).length;e=(""+e).toLowerCase(),n=!0}}function Ga(t,e,i){var n,r,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||n<i)&&(i=n);for(var r="",o=e;o<i;++o)r+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return r}(this,e,i);case"utf8":case"utf-8":return Ja(this,e,i);case"ascii":return function(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}(this,e,i);case"latin1":case"binary":return function(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}(this,e,i);case"base64":return n=this,o=i,0===(r=e)&&o===n.length?Ia(n):Ia(n.slice(r,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}(this,e,i);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function Wa(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function Ya(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=Da.from(e,n)),Va(e))return 0===e.length?-1:Ka(t,e,i,n,r);if("number"==typeof e)return e&=255,Da.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):Ka(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function Ka(t,e,i,n,r){var o=1,a=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(r)for(var l=-1,h=i;h<a;h++)if(u(t,h)===u(e,-1===l?0:h-l)){if(-1===l&&(l=h),h-l+1===s)return l*o}else-1!==l&&(h-=h-l),l=-1;else for(a<i+s&&(i=a-s),h=i;0<=h;h--){for(var c=!0,f=0;f<s;f++)if(u(t,h+f)!==u(e,f)){c=!1;break}if(c)return h}return-1}function Za(t,e,i,n){return ls(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function Xa(t,e,i,n){return ls(function(t,e){for(var i,n,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(i=t.charCodeAt(a))>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function Ja(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,a,s,u,l=t[r],h=null,c=239<l?4:223<l?3:191<l?2:1;if(r+c<=i)switch(c){case 1:l<128&&(h=l);break;case 2:128==(192&(o=t[r+1]))&&127<(u=(31&l)<<6|63&o)&&(h=u);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&2047<(u=(15&l)<<12|(63&o)<<6|63&a)&&(u<55296||57343<u)&&(h=u);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)&&u<1114112&&(h=u)}null===h?(h=65533,c=1):65535<h&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),r+=c}return function(t){var e=t.length;if(e<=$a)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=$a));return i}(n)}Da.poolSize=8192,Da._augment=function(t){return t.__proto__=Da.prototype,t},Da.from=function(t,e,i){return za(null,t,e,i)},Da.TYPED_ARRAY_SUPPORT&&(Da.prototype.__proto__=Uint8Array.prototype,Da.__proto__=Uint8Array),Da.alloc=function(t,e,i){return n=null,o=e,a=i,Ba(r=t),r<=0||void 0===o?Na(n,r):"string"==typeof a?Na(n,r).fill(o,a):Na(n,r).fill(o);var n,r,o,a},Da.allocUnsafe=function(t){return Ha(null,t)},Da.allocUnsafeSlow=function(t){return Ha(null,t)},Da.isBuffer=hs,Da.compare=function(t,e){if(!Va(t)||!Va(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},Da.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Da.concat=function(t,e){if(!Pa(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Da.alloc(0);if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;for(var i=Da.allocUnsafe(e),n=0,r=0;r<t.length;++r){var o=t[r];if(!Va(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},Da.byteLength=qa,Da.prototype._isBuffer=!0,Da.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Wa(this,e,e+1);return this},Da.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Wa(this,e,e+3),Wa(this,e+1,e+2);return this},Da.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Wa(this,e,e+7),Wa(this,e+1,e+6),Wa(this,e+2,e+5),Wa(this,e+3,e+4);return this},Da.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?Ja(this,0,t):Ga.apply(this,arguments)},Da.prototype.equals=function(t){if(!Va(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Da.compare(this,t)},Da.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},Da.prototype.compare=function(t,e,i,n,r){if(!Va(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(r<=n&&i<=e)return 0;if(r<=n)return-1;if(i<=e)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(n,r),l=t.slice(e,i),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},Da.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},Da.prototype.indexOf=function(t,e,i){return Ya(this,t,e,i,!0)},Da.prototype.lastIndexOf=function(t,e,i){return Ya(this,t,e,i,!1)},Da.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||r<i)&&(i=r),0<t.length&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,a,s,u,l=!1;;)switch(n){case"hex":return function(t,e,i,n){i=Number(i)||0;var r=t.length-i;(!n||r<(n=Number(n)))&&(n=r);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}(this,t,e,i);case"utf8":case"utf-8":return s=e,u=i,ls(ss(t,this.length-s),this,s,u);case"ascii":case"latin1":case"binary":return Za(this,t,e,i);case"base64":return o=e,a=i,ls(us(t),this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Xa(this,t,e,i);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},Da.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $a=4096;function Qa(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+e)throw new RangeError("Trying to access beyond buffer length")}function ts(t,e,i,n,r,o){if(!Va(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r<e||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function es(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function is(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function ns(t,e,i,n){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function rs(t,e,i,n,r){return r||ns(t,0,i,4),Oa(t,e,i,n,23,4),i+4}function os(t,e,i,n,r){return r||ns(t,0,i,8),Oa(t,e,i,n,52,8),i+8}Da.prototype.slice=function(t,e){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):i<e&&(e=i),e<t&&(e=t),Da.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=Da.prototype;else for(var n=e-t,r=new Da(n,void 0),o=0;o<n;++o)r[o]=this[o+t];return r},Da.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||Qa(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},Da.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||Qa(t,e,this.length);for(var n=this[t+--e],r=1;0<e&&(r*=256);)n+=this[t+--e]*r;return n},Da.prototype.readUInt8=function(t,e){return e||Qa(t,1,this.length),this[t]},Da.prototype.readUInt16LE=function(t,e){return e||Qa(t,2,this.length),this[t]|this[t+1]<<8},Da.prototype.readUInt16BE=function(t,e){return e||Qa(t,2,this.length),this[t]<<8|this[t+1]},Da.prototype.readUInt32LE=function(t,e){return e||Qa(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Da.prototype.readUInt32BE=function(t,e){return e||Qa(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Da.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||Qa(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return(r*=128)<=n&&(n-=Math.pow(2,8*e)),n},Da.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||Qa(t,e,this.length);for(var n=e,r=1,o=this[t+--n];0<n&&(r*=256);)o+=this[t+--n]*r;return(r*=128)<=o&&(o-=Math.pow(2,8*e)),o},Da.prototype.readInt8=function(t,e){return e||Qa(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Da.prototype.readInt16LE=function(t,e){e||Qa(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},Da.prototype.readInt16BE=function(t,e){e||Qa(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},Da.prototype.readInt32LE=function(t,e){return e||Qa(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Da.prototype.readInt32BE=function(t,e){return e||Qa(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Da.prototype.readFloatLE=function(t,e){return e||Qa(t,4,this.length),La(this,t,!0,23,4)},Da.prototype.readFloatBE=function(t,e){return e||Qa(t,4,this.length),La(this,t,!1,23,4)},Da.prototype.readDoubleLE=function(t,e){return e||Qa(t,8,this.length),La(this,t,!0,52,8)},Da.prototype.readDoubleBE=function(t,e){return e||Qa(t,8,this.length),La(this,t,!1,52,8)},Da.prototype.writeUIntLE=function(t,e,i,n){t=+t,e|=0,i|=0,n||ts(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},Da.prototype.writeUIntBE=function(t,e,i,n){t=+t,e|=0,i|=0,n||ts(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;0<=--r&&(o*=256);)this[e+r]=t/o&255;return e+i},Da.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,1,255,0),Da.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Da.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,2,65535,0),Da.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):es(this,t,e,!0),e+2},Da.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,2,65535,0),Da.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):es(this,t,e,!1),e+2},Da.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,4,4294967295,0),Da.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):is(this,t,e,!0),e+4},Da.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,4,4294967295,0),Da.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):is(this,t,e,!1),e+4},Da.prototype.writeIntLE=function(t,e,i,n){var r;t=+t,e|=0,n||ts(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},Da.prototype.writeIntBE=function(t,e,i,n){var r;t=+t,e|=0,n||ts(this,t,e,i,(r=Math.pow(2,8*i-1))-1,-r);var o=i-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},Da.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,1,127,-128),Da.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Da.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,2,32767,-32768),Da.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):es(this,t,e,!0),e+2},Da.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,2,32767,-32768),Da.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):es(this,t,e,!1),e+2},Da.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,4,2147483647,-2147483648),Da.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):is(this,t,e,!0),e+4},Da.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||ts(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Da.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):is(this,t,e,!1),e+4},Da.prototype.writeFloatLE=function(t,e,i){return rs(this,t,e,!0,i)},Da.prototype.writeFloatBE=function(t,e,i){return rs(this,t,e,!1,i)},Da.prototype.writeDoubleLE=function(t,e,i){return os(this,t,e,!0,i)},Da.prototype.writeDoubleBE=function(t,e,i){return os(this,t,e,!1,i)},Da.prototype.copy=function(t,e,i,n){if(i=i||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),e=e||0,0<n&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;0<=r;--r)t[r+e]=this[r+i];else if(o<1e3||!Da.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},Da.prototype.fill=function(t,e,i,n){if("string"==typeof t){var r;if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1!==t.length||(r=t.charCodeAt(0))<256&&(t=r),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Da.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;if(e>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(s=e;s<i;++s)this[s]=t;else for(var o=Va(t)?t:ss(new Da(t,n).toString()),a=o.length,s=0;s<i-e;++s)this[s+e]=o[s%a];return this};var as=/[^+\/0-9A-Za-z-_]/g;function ss(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],a=0;a<n;++a){if(55295<(i=t.charCodeAt(a))&&i<57344){if(!r){if(56319<i){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===n){-1<(e-=3)&&o.push(239,191,189);continue}r=i;continue}if(i<56320){-1<(e-=3)&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&-1<(e-=3)&&o.push(239,191,189);if(r=null,i<128){if(--e<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function us(t){return function(t){var e,i,n,r;ka||Ta();var o=t.length;if(0<o%4)throw new Error("Invalid string. Length must be a multiple of 4");n="="===t[o-2]?2:"="===t[o-1]?1:0,r=new Aa(3*o/4-n),e=0<n?o-4:o;for(var a=0,s=0;s<e;s+=4,0)i=Ea[t.charCodeAt(s)]<<18|Ea[t.charCodeAt(s+1)]<<12|Ea[t.charCodeAt(s+2)]<<6|Ea[t.charCodeAt(s+3)],r[a++]=i>>16&255,r[a++]=i>>8&255,r[a++]=255&i;return 2==n?(i=Ea[t.charCodeAt(s)]<<2|Ea[t.charCodeAt(s+1)]>>4,r[a++]=255&i):1==n&&(i=Ea[t.charCodeAt(s)]<<10|Ea[t.charCodeAt(s+1)]<<4|Ea[t.charCodeAt(s+2)]>>2,r[a++]=i>>8&255,r[a++]=255&i),r}(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(as,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ls(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function hs(t){return null!=t&&(!!t._isBuffer||cs(t)||"function"==typeof(e=t).readFloatLE&&"function"==typeof e.slice&&cs(e.slice(0,0)));var e}function cs(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var fs=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:Ra,Buffer:Da,SlowBuffer:function(t){return+t!=t&&(t=0),Da.alloc(+t)},isBuffer:hs});Xn.setTimeout,Xn.clearTimeout,Xn.performance;var ps="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){function i(){}t.super_=e,i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},ds=ps;function gs(t,e){var i={seen:[],stylize:vs};return 3<=arguments.length&&(i.depth=arguments[2]),4<=arguments.length&&(i.colors=arguments[3]),ws(e)?i.showHidden=e:e&&function(t,e){if(e&&ks(e))for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]]}(i,e),Es(i.showHidden)&&(i.showHidden=!1),Es(i.depth)&&(i.depth=2),Es(i.colors)&&(i.colors=!1),Es(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=ys),ms(i,t,i.depth)}function ys(t,e){var i=gs.styles[e];return i?"["+gs.colors[i][0]+"m"+t+"["+gs.colors[i][1]+"m":t}function vs(t,e){return t}function ms(t,e,i){if(t.customInspect&&e&&Is(e.inspect)&&e.inspect!==gs&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(i,t);return Ms(n)||(n=ms(t,n,i)),n}var r=function(t,e){if(Es(e))return t.stylize("undefined","undefined");if(Ms(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return"number"==typeof e?t.stylize(""+e,"number"):ws(e)?t.stylize(""+e,"boolean"):xs(e)?t.stylize("null","null"):void 0}(t,e);if(r)return r;var o,a=Object.keys(e),s=(o={},a.forEach((function(t,e){o[t]=!0})),o);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),Ss(e)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return bs(e);if(0===a.length){if(Is(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(As(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Ts(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Ss(e))return bs(e)}var l,h,c="",f=!1,p=["{","}"];return l=e,Array.isArray(l)&&(f=!0,p=["[","]"]),Is(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),As(e)&&(c=" "+RegExp.prototype.toString.call(e)),Ts(e)&&(c=" "+Date.prototype.toUTCString.call(e)),Ss(e)&&(c=" "+bs(e)),0!==a.length||f&&0!=e.length?i<0?As(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),h=f?function(t,e,i,n,r){for(var o=[],a=0,s=e.length;a<s;++a)Cs(e,String(a))?o.push(_s(t,e,i,n,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(_s(t,e,i,n,r,!0))})),o}(t,e,i,s,a):a.map((function(n){return _s(t,e,i,s,n,f)})),t.seen.pop(),function(t,e,i){return 60<t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(h,c,p)):p[0]+c+p[1]}function bs(t){return"["+Error.prototype.toString.call(t)+"]"}function _s(t,e,i,n,r,o){var a,s,u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]};if(u.get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),Cs(n,r)||(a="["+r+"]"),s||(t.seen.indexOf(u.value)<0?-1<(s=xs(i)?ms(t,u.value,null):ms(t,u.value,i-1)).indexOf("\n")&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),Es(a)){if(o&&r.match(/^\d+$/))return s;a=(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(a,"string"))}return a+": "+s}function ws(t){return"boolean"==typeof t}function xs(t){return null===t}function Ms(t){return"string"==typeof t}function Es(t){return void 0===t}function As(t){return ks(t)&&"[object RegExp]"===Os(t)}function ks(t){return"object"==typeof t&&null!==t}function Ts(t){return ks(t)&&"[object Date]"===Os(t)}function Ss(t){return ks(t)&&("[object Error]"===Os(t)||t instanceof Error)}function Is(t){return"function"==typeof t}function Ls(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Os(t){return Object.prototype.toString.call(t)}function Cs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ps(t,e){if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0}gs.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},gs.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Rs,js=Object.prototype.hasOwnProperty,Ns=Object.keys||function(t){var e=[];for(var i in t)js.call(t,i)&&e.push(i);return e},Ds=Array.prototype.slice;function zs(){return void 0!==Rs?Rs:Rs="foo"===function(){}.name}function Bs(t){return Object.prototype.toString.call(t)}function Hs(t){if(!hs(t)&&"function"==typeof Xn.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(t);if(t)return t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)}}function Fs(t,e){t||Ys(t,!0,e,"==",Ks)}var Us=/\s*function\s+([^\(\s]*)\s*/;function Vs(t){if(Is(t)){if(zs())return t.name;var e=t.toString().match(Us);return e&&e[1]}}function qs(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=Gs(Ws(this.actual),128)+" "+this.operator+" "+Gs(Ws(this.expected),128),this.generatedMessage=!0);var e,i,n,r,o,a=t.stackStartFunction||Ys;Error.captureStackTrace?Error.captureStackTrace(this,a):(e=new Error).stack&&(o=e.stack,i=Vs(a),0<=(n=o.indexOf("\n"+i))&&(r=o.indexOf("\n",n+1),o=o.substring(r+1)),this.stack=o)}function Gs(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function Ws(t){if(zs()||!Is(t))return gs(t);var e=Vs(t);return"[Function"+(e?": "+e:"")+"]"}function Ys(t,e,i,n,r){throw new qs({message:i,actual:t,expected:e,operator:n,stackStartFunction:r})}function Ks(t,e){t||Ys(t,!0,e,"==",Ks)}function Zs(t,e,i,n){if(t===e)return!0;if(hs(t)&&hs(e))return 0===Ps(t,e);if(Ts(t)&&Ts(e))return t.getTime()===e.getTime();if(As(t)&&As(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(Hs(t)&&Hs(e)&&Bs(t)===Bs(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===Ps(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(hs(t)!==hs(e))return!1;var r=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==r&&r===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,i,n){if(null==t||null==e)return!1;if(Ls(t)||Ls(e))return t===e;if(i&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var r=Xs(t),o=Xs(e);if(r&&!o||!r&&o)return!1;if(r)return Zs(t=Ds.call(t),e=Ds.call(e),i);var a,s,u=Ns(t),l=Ns(e);if(u.length!==l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;0<=s;s--)if(u[s]!==l[s])return!1;for(s=u.length-1;0<=s;s--)if(!Zs(t[a=u[s]],e[a],i,n))return!1;return!0}(t,e,i,n))}return i?t===e:t==e}function Xs(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function Js(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}if(!Error.isPrototypeOf(e))return!0===e.call({},t)}}function $s(t,e,i,n){var r;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof i&&(n=i,i=null),r=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(i&&i.name?" ("+i.name+").":".")+(n?" "+n:"."),t&&!r&&Ys(r,i,"Missing expected exception"+n);var o="string"==typeof n,a=!t&&r&&!i;if((!t&&Ss(r)&&o&&Js(r,i)||a)&&Ys(r,i,"Got unwanted exception"+n),t&&r&&i&&!Js(r,i)||!t&&r)throw r}function Qs(){}ds(Fs.AssertionError=qs,Error),Fs.fail=Ys,Fs.ok=Ks,Fs.equal=function t(e,i,n){e!=i&&Ys(e,i,n,"==",t)},Fs.notEqual=function t(e,i,n){e==i&&Ys(e,i,n,"!=",t)},Fs.deepEqual=function t(e,i,n){Zs(e,i,!1)||Ys(e,i,n,"deepEqual",t)},Fs.deepStrictEqual=function t(e,i,n){Zs(e,i,!0)||Ys(e,i,n,"deepStrictEqual",t)},Fs.notDeepEqual=function t(e,i,n){Zs(e,i,!1)&&Ys(e,i,n,"notDeepEqual",t)},Fs.notDeepStrictEqual=function t(e,i,n){Zs(e,i,!0)&&Ys(e,i,n,"notDeepStrictEqual",t)},Fs.strictEqual=function t(e,i,n){e!==i&&Ys(e,i,n,"===",t)},Fs.notStrictEqual=function t(e,i,n){e===i&&Ys(e,i,n,"!==",t)},Fs.throws=function(t,e,i){$s(!0,t,e,i)},Fs.doesNotThrow=function(t,e,i){$s(!1,t,e,i)},Fs.ifError=function(t){if(t)throw t};var tu={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,i=0;return t.forEach((function(t){t.x=e,t.y=i,e+=t.width,i+=t.height})),t}},eu={sort:function(t){return t.sort((function(t,e){return Math.sqrt(Math.pow(t.height,2)+Math.pow(t.width,2))-Math.sqrt(Math.pow(e.height,2)+Math.pow(e.width,2))})),t},placeItems:function(t){var e=0,i=0;return t.forEach((function(t){var n=t.width;t.x=e-n,t.y=i,e-=n,i+=t.height})),t}};Qs.prototype={fit:function(t){var e,i,n,r,o=t.length,a=0<o?t[0].width:0,s=0<o?t[0].height:0;for(this.root={x:0,y:0,width:a,height:s},e=0;e<o;e++)n=t[e],r=(i=this.findNode(this.root,n.width,n.height))?this.splitNode(i,n.width,n.height):this.growNode(n.width,n.height),n.x=r.x,n.y=r.y},findNode:function(t,e,i){return t.used?this.findNode(t.right,e,i)||this.findNode(t.down,e,i):e<=t.width&&i<=t.height?t:null},splitNode:function(t,e,i){return t.used=!0,t.down={x:t.x,y:t.y+i,width:t.width,height:t.height-i},t.right={x:t.x+e,y:t.y,width:t.width-e,height:i},t},growNode:function(t,e){var i=t<=this.root.width,n=e<=this.root.height,r=n&&this.root.height>=this.root.width+t,o=i&&this.root.width>=this.root.height+e;return r?this.growRight(t,e):o?this.growDown(t,e):n?this.growRight(t,e):i?this.growDown(t,e):null},growRight:function(t,e){var i;return this.root={used:!0,x:0,y:0,width:this.root.width+t,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:t,height:this.root.height}},(i=this.findNode(this.root,t,e))?this.splitNode(i,t,e):null},growDown:function(t,e){var i;return this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root},(i=this.findNode(this.root,t,e))?this.splitNode(i,t,e):null}};var iu=Qs,nu={sort:function(t){return t},placeItems:function(t){return function(t,e){e=e||{};var i=new iu,n=e.inPlace||!1,r=(r=t.map((function(t){return n?t:{width:t.width,height:t.height,item:t}}))).sort((function(t,e){return e.width*e.height-t.width*t.height}));i.fit(r);var o={width:r.reduce((function(t,e){return Math.max(t,e.x+e.width)}),0),height:r.reduce((function(t,e){return Math.max(t,e.y+e.height)}),0)};n||(o.items=r)}(t,{inPlace:!0}),t}},ru={};function ou(t,e){var i=t||"top-down";return"string"==typeof i&&Fs(i=ru[t],"Sorry, the '"+t+"' algorithm could not be loaded."),new xa(i,e)}function au(t,e){ru[t]=e}ou.PackingSmith=xa,ou.addAlgorithm=au,ou.algorithms=ru,au("top-down",{sort:function(t){return t.sort((function(t,e){return t.height-e.height})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=0,t.y=e,e+=t.height})),t}}),au("left-right",{sort:function(t){return t.sort((function(t,e){return t.width-e.width})),t},placeItems:function(t){var e=0;return t.forEach((function(t){t.x=e,t.y=0,e+=t.width})),t}}),au("diagonal",tu),au("alt-diagonal",eu),au("binary-tree",nu);var su=ou;function uu(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++){var i=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(i)for(var n in i){var r=i[n];null===r||"object"!==vn(r)||Array.isArray(r)?void 0!==r&&(t[n]=r):null===t[n]||"object"!==vn(t[n])||Array.isArray(t[n])?t[n]=uu({},r):t[n]=uu(t[n],r)}}return t}function lu(t){var e;try{t.getContext("2d").getImageData(0,0,1,1)}catch(t){e=t.message}return e}function hu(t,e,i){var n;return t instanceof HTMLImageElement&&((n=t.ownerDocument.createElement("canvas")).width=e,n.height=i,n.getContext("2d").drawImage(t,0,0,e,i),t=n),t}var cu=er.metersToLatLng([er.half_circumference_meters,er.half_circumference_meters]),fu=Math.log(er.tile_size)/Math.LN2,pu=function(){En(e,Br);var t=On(e);function e(i,n){var r;return mn(this,e),r=t.call(this,i,n),hr.is_worker&&(r._quad_tree=new Jn.H.geo.QuadTree,r._marker_quad_tree=new Jn.H.geo.QuadTree,r._tree_entries_by_object_id={},r._groups_by_id={},r._layersCache=new Jn.H.util.Cache(100)),hr.is_main&&(r._objects_by_id={},r._commands=[],r._sendCommands=kr(r._sendCommands,100,200),r.dispatchUpdate=r.dispatchUpdate.bind(Ln(r))),r}return _n(e,[{key:"hasLabeledData",value:function(){return!1}},{key:"onReady",value:function(){this._synced_at=this.provider.getInvalidations().getMark();var t,e,i=this.provider.getRootGroup(),n=i.getObjects(!0),r=[];for(n.push(i),t=n.length;t--;)e=n[t],this._isObjectSupported(e)&&this._shouldBeStored(e)&&(this._objects_by_id[e.getId()]=e,r.push(e.forWorkerMessage()));var o=[{method_name:"addObjects",arguments:[r]}];this._sendImmediateCommands(o)}},{key:"onProviderUpdate",value:function(t){var e,i,n,r,o=t.target,a=t.currentTarget.getInvalidations(o.type);this._isObjectSupported(o)&&(e=this._synced_at,i=o.getId(),a.isRemove(e)?(delete this._objects_by_id[i],this._commands.push({method_name:"removeObjectsByIds",arguments:[[i],!0]})):a.isAdd(e)?this._shouldBeStored(o)&&(this._objects_by_id[i]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]})):a.isSpatial(e)||a.isZOrder(e)?this._shouldBeStored(o)&&(n=[{method_name:"removeObjectsByIds",arguments:[[i],!0]},{method_name:"addObjects",arguments:[[(this._objects_by_id[i]=o).forWorkerMessage()]]}],this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands(n):this._commands.push(n[0],n[1])):a.isVisual(e)?this._shouldBeStored(o)&&(r={method_name:"updateObjectProperties",arguments:[(this._objects_by_id[i]=o).forWorkerMessage()]},this.has_volatile_data&&!this.hasPendingCommands()?this._sendImmediateCommands([r]):this._commands.push(r)):a.isVolatility(e)&&(delete this._objects_by_id[i],this._commands.push({method_name:"removeObjectsByIds",arguments:[[i],!0]}),this._shouldBeStored(o)&&(this._objects_by_id[i]=o,this._commands.push({method_name:"addObjects",arguments:[[o.forWorkerMessage()]]}))),this._commands.length&&this._sendCommands()),this._synced_at=a.getMark()}},{key:"_shouldBeStored",value:function(t){return 16===t.type||(!t.getIcon||1===t.getIcon().getState())&&this._hasSameVolatility(t)}},{key:"_hasSameVolatility",value:function(t){return t.getVolatility(!0)===this.has_volatile_data}},{key:"hasPendingCommands",value:function(){return 0<this._commands.length}},{key:"_sendCommands",value:function(){this._sendImmediateCommands(this._commands),this._commands=[]}},{key:"_sendImmediateCommands",value:function(t){t.length&&cr.postMessage(this.worker,this.target_name+".executeCommands",t).then(this.dispatchUpdate)}},{key:"_isObjectSupported",value:function(t){return t.forWorkerMessage&&8!==t.type}},{key:"getSyncedAt",value:function(){return this._synced_at}},{key:"getMapObjectById",value:function(t){return this._objects_by_id[t]}},{key:"getIconBitmapByObjectId",value:function(t,e){var i=this.getMapObjectById(t);if(i){var n=i.getIcon();if(n.uid===e&&1===n.getState()){var r=n.getSize();return hu(n.getBitmap(),r.w,r.h)}}}},{key:"_getRastersForMarkers",value:function(t){for(var e={},i=su("binary-tree"),n=0;n<t.length;n++){var r=t[n],o=r.properties.icon;e[o.id]||(i.addItem({width:o.size.w,height:o.size.h,meta:{objectId:r.id,id:o.id}}),e[o.id]=!0)}return i.export()}},{key:"fetchFeaturesForTile",value:function(t){var i=[],n=[],r=[],o=[],a=[],s=this._marker_quad_tree.intersectBoundingBox(er.getTileBoundingBox(t.coords,this.tile_size));t.source_data.error=null;for(var u=0;u<s.length;u++){var l={id:s[u].$feature$.id,properties:Object.assign({},s[u].$feature$.properties),geometry:{type:s[u].$feature$.geometry.type,coordinates:Ko.deepClone(s[u].$feature$.geometry.coordinates)}};i.push(l)}s=this._quad_tree.intersectBoundingBox(er.getTileBoundingBox(t.coords,this.tile_size,100));for(var h=0;h<s.length;h++){var c,f={id:s[h].$feature$.id,properties:Object.assign({},s[h].$feature$.properties),geometry:{type:s[h].$feature$.geometry.type,coordinates:Ko.deepClone(s[h].$feature$.geometry.coordinates)}};f.properties.overlay?n.push(f):f.geometry.type.includes("LineString")?r.push(f):f.geometry.type.includes("Polygon")&&(o.push(f),c={id:f.id,properties:f.properties,geometry:{type:f.geometry.type,coordinates:Ko.deepClone(f.geometry.coordinates)}},a.push(c))}i.sort(e._compareZInfo),o.sort(e._compareZInfo),n.sort(e._compareZInfo);var p=this.has_volatile_data?4096:0;a.sort(e._compareZInfo);for(var d=0;d<a.length;d++)a[d].properties.effectiveZIdx=p++;r.sort(e._compareZInfo);for(var g=0;g<r.length;g++)r[g].properties.effectiveZIdx=p++;t.source_data.layers.markers={type:"FeatureCollection",features:i},t.source_data.layers.polylines={type:"FeatureCollection",features:r},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},t.source_data.layers.overlays={type:"FeatureCollection",features:n}}},{key:"tileTexture",value:function(t){var e=t.source_data.layers.overlays;if(e){var i=this.name+"_"+t.coords.key,n=Go.coordinateWithMaxZoom(t.coords,this.max_zoom),r=e.features[0].properties.overlays_config;return{name:i,filtering:this.filtering,coords:n,width:er.tile_size,height:er.tile_size,overlays_config:r,source:this.name}}}},{key:"_load",value:function(t){var e=er.wrapTile(t.coords,{x:!0}),i=e.z,n=e.x,r=e.y,o="".concat(i,"_").concat(n,"_").concat(r),a=this._layersCache.get(o),s=!1;if(a)t.source_data.layers=a;else{this.fetchFeaturesForTile(t);var u={maxZoom:this.max_zoom,tolerance:1.5,extent:er.tile_scale},l=t.source_data.layers.overlays;l.features.length&&delete t.source_data.layers.overlays;var h=t.source_data.layers.markers;for(var c in h.features.length&&delete t.source_data.layers.markers,t.source_data.layers){var f,p=t.source_data.layers[c];p.features.length&&(u.buffer=c.includes("lines")?100*er.units_per_pixel:0,f=_a(p,i,n,r,u),t.source_data.layers[c]=so(f))}t.source_data.layers.overlays=this._processOverlays(t,l);for(var d=t.source_data.layers.overlays.features.length;d--;)if(!t.source_data.layers.overlays.features[d].id){s=!0,this._layersCache.drop(o);break}t.source_data.layers.markers=this._processMarkers(t,h),this._postProcessTile(t),s||this._layersCache.add(o,t.source_data.layers,1)}return t.rasters=this._getRastersForMarkers(t.source_data.layers.markers.features),Promise.resolve(t)}},{key:"_processMarkers",value:function(t,e){var i=e.features.length;if(i){for(var n=er.unitsPerMeter(t.coords.z),r=er.wrapTile(t.coords,{x:!0}),o=er.metersForTile(r),a=er.isLastTile(r),s=er.wrapMeters(t.min),u=er.wrapMeters(t.max),l=function(e){jr.coordsToMeters(e);var i=Pn(e,2),r=i[0],l=i[1],h=r>=s.x&&(a.column||r<u.x)&&l>=u.y&&(a.row||!t.coords.y||l<s.y);return jr.metersToTileUnits(n,o,e),h},h=[],c=0;c<i;c++){var f,p=e.features[c].geometry,d=!1;"Point"===p.type?l(f=p.coordinates)?p.coordinates=f:d=!0:"MultiPoint"===p.type&&(p.coordinates=p.coordinates.filter(l),0===p.coordinates.length&&(d=!0)),d||h.push(e.features[c])}e.features=h}return e}},{key:"_processOverlays",value:function(t,e){var i=this;if(!e.features.length)return e;var n={coords:t.coords,min:er.metersForTile(er.wrapTile(t.coords,{x:!0}))},r={coords:t.coords,source_data:{layers:{_default:{type:"FeatureCollection",features:e.features}}}},o=Math.pow(2,t.coords.z+fu);Br.projectData(r.source_data),Br.scaleData(r.source_data,n);var a=e.features.map((function(t){var e=t.geometry.coordinates[0],i=e[0],n=e[5===e.length?2:3],r=Math.floor(i[0]/er.tile_scale*er.tile_size),a=Math.floor(i[1]/er.tile_scale*er.tile_size),s=Math.floor(n[0]/er.tile_scale*er.tile_size),u=Math.floor(n[1]/er.tile_scale*er.tile_size)-a,l=s<=r,h=l?o-(r-s):s-r,c=[];return r<=er.tile_size&&c.push([r,a,h,u]),l&&0<s&&c.push([r-o,a,h,u]),{id:t.id,properties:t.properties,texcoords:c}})).filter((function(e){return i._isVisible(e.properties)&&i.isInMinMaxRange(e.properties,t.style_zoom)})),s=er.tile_scale;return t.pad_scale=this.pad_scale,t.default_winding="CW",e.features=a.length?[{geometry:{type:"Polygon",coordinates:[[[0,0],[s,0],[s,s],[0,s],[0,0]]]},properties:{overlays_config:a}}]:a,e}},{key:"executeCommands",value:function(t){for(var e,i=t.length<10,n=0;n<t.length;n++){var r=t[n];r.arguments.push(i);var o=this[r.method_name].apply(this,r.arguments);i&&(o&&e?e.mergeRect(o,!0,e):o&&(e=o))}return e?e.forWorkerMessage():void 0}},{key:"_getClampedGeoRectForFeature",value:function(t){var e=t.geometry.boundingBox;return new Jn.H.geo.Rect(Qn.clamp(e[0],-cu[1],cu[1]),e[1],Qn.clamp(e[2],-cu[1],cu[1]),e[3])}},{key:"addObjects",value:function(t,i){for(var n,r=1<arguments.length&&void 0!==i&&i,o=0;o<t.length;o++){var a,s,u,l=t[o];"Group"===l.type?(l.$children_ids$={},this._groups_by_id[l.id]=l):(e._preprocessGeometry(l.geometry),a=this._getClampedGeoRectForFeature(l),r&&(n?n.mergeRect(a,!0,n):n=a),(u=(s=-1!==l.geometry.type.indexOf("Point")?this._marker_quad_tree:this._quad_tree).insertBoundingBox(a)).$tree=s,u.$feature$=l,this._tree_entries_by_object_id[l.id]=u)}for(var h=0;h<t.length;h++){var c=t[h];c.properties.parent&&(this._groups_by_id[c.properties.parent].$children_ids$[c.id]=c.id),c.properties.ref={effectiveVisibility:this._isVisible(c.properties),zInfo:this._getZInfo([],c)}}return this._layersCache.removeAll(),n}},{key:"removeObjectsByIds",value:function(t,e,i){for(var n,r=2<arguments.length&&void 0!==i&&i,o=0;o<t.length;o++){var a,s=t[o],u=void 0,l=void 0;(u=this._tree_entries_by_object_id[s])?(r&&(a=this._getClampedGeoRectForFeature(u.$feature$),n?n.mergeRect(a,!0,n):n=a),delete this._groups_by_id[u.$feature$.properties.parent].$children_ids$[s],u.$tree.remove(u),delete this._tree_entries_by_object_id[s]):(l=this._groups_by_id[s])&&(l.properties.parent&&delete this._groups_by_id[l.properties.parent].$children_ids$[s],e&&this.removeObjectsByIds(Object.keys(l.$children_ids$),!0),delete this._groups_by_id[s])}return this._layersCache.removeAll(),n}},{key:"updateObjectProperties",value:function(t,e){var i,n=1<arguments.length&&void 0!==e&&e;return"Group"===t.type?(uu(this._groups_by_id[t.id].properties,t.properties),this._groups_by_id[t.id].properties.ref.effectiveVisibility=this._isVisible(t.properties)):(this._tree_entries_by_object_id[t.id]||this.addObjects([t]),uu(this._tree_entries_by_object_id[t.id].$feature$.properties,t.properties),this._tree_entries_by_object_id[t.id].$feature$.properties.ref.effectiveVisibility=this._isVisible(t.properties),n&&(i=this._getClampedGeoRectForFeature(t))),i}},{key:"_getZInfo",value:function(t,e){var i=e.properties.zIdx,n=e.properties.sIdx;return t[0]|=void 0!==i,t.splice(1,0,i||0,n<0?e.id:n),0===e.properties.parent?t:this._getZInfo(t,this._groups_by_id[e.properties.parent])}},{key:"_isVisible",value:function(t){var e=t.visible,i=!t.parent||this._isVisible(this._groups_by_id[t.parent].properties);return e&&i}},{key:"isInMinMaxRange",value:function(t,e){var i=t.min<=e&&t.max>=e,n=!t.parent||this.isInMinMaxRange(this._groups_by_id[t.parent].properties,e);return i&&n}},{key:"dispose",value:function(){this._commands=[],Cn(An(e.prototype),"dispose",this).call(this)}}],[{key:"_compareZInfo",value:function(t,e){for(var i,n=t.properties.ref.zInfo,r=e.properties.ref.zInfo,o=n.length,a=r.length,s=Math.min(o,a),u=1;u<s;u++)if(i=n[u]-r[u])return i;return o-a}},{key:"_preprocessGeometry",value:function(t){var i=t.type;t.coordinates="Point"===i?e._processPointCoordinates(t.coordinates):"MultiPoint"===i?t.coordinates.map(e._processPointCoordinates):"LineString"===i?e._processLineStringCoordinates(t.coordinates):"MultiLineString"===i?t.coordinates.map(e._processLineStringCoordinates):"Polygon"===i?t.coordinates.map(e._processPolygonCoordinates):"MultiPolygon"===i?t.coordinates.map(e._processMultiPolygonCoordinates):[]}},{key:"_processPointCoordinates",value:function(t){return[t[1],t[0],t[2]]}},{key:"_processLineStringCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!1)}},{key:"_processPolygonCoordinates",value:function(t){return e._latLngAltArrayToLineString(t,!0)}},{key:"_processMultiPolygonCoordinates",value:function(t){return t.map(e._processPolygonCoordinates)}},{key:"_latLngAltArrayToLineString",value:function(t,e){for(var i=[],n=t.length,r=0;r<n;r+=3)i.push([t[r+1],t[r]]);return e&&i.push([t[1],t[0]]),i}}]),e}();Br.register(pu,"ObjectSource");var du=function(){function t(){mn(this,t),this._map={}}return _n(t,[{key:"set",value:function(t,e,i){var n;this._map[t]?this._map[t].accumulator.add(i):((n=new Set).add(i),this._map[t]={value:e,accumulator:n})}},{key:"get",value:function(t){return this._map[t]&&this._map[t].value}},{key:"delete",value:function(t,e){var i=this._map[t];i&&i.accumulator&&(i.accumulator.delete(e),0===i.accumulator.size&&delete this._map[t])}}]),t}(),gu=function(){En(e,Br);var t=On(e);function e(i,n){var r;return mn(this,e),r=t.call(this,i,n),hr.is_worker||(r._icons=new du),r}return _n(e,[{key:"onProviderUpdate",value:function(t){t.target instanceof H.map.provider.Tile?this.dispatchUpdate(t.target,t.data):this.dispatchUpdate(void 0,t.data)}},{key:"onReady",value:function(){var t=this.provider;t.setTileCanvasRendering&&t.setTileCanvasRendering(!1),t.providesMarkers()&&(this._onCacheDrop=this._onCacheDrop.bind(this),t.getCache().registerOnDrop(this._onCacheDrop)),this.dispatchUpdate()}},{key:"dispose",value:function(){Cn(An(e.prototype),"dispose",this).call(this);var t=this.provider;t.providesMarkers()&&t.getCache().deRegisterOnDrop(this._onCacheDrop)}},{key:"_onCacheDrop",value:function(t,e){this.provider.cacheFilter(t)&&this._deleteIcons(t,e.data)}},{key:"_deleteIcons",value:function(t,e){for(var i=0,n=e.length;i<n;i++){var r=e[i].getIcon();this._icons.delete(r.uid,t)}}},{key:"getIconBitmapByObjectId",value:function(t,e){var i=this._icons.get(e);return i&&i.getBitmap()}},{key:"requestMarkerTile",value:function(t){var e=this;return new Promise((function(i,n){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var n,r,o=[];if(t.data)for(r=(n=t.data).length;r--;){var a=n[r],s=a.getIcon();e._icons.set(s.uid,s,t.key),o.push(a.forWorkerMessage())}i(o)})):i([])}))}},{key:"requestSpatialTile",value:function(t){var e=this;return new Promise((function(i,n){e.provider?e.provider.requestTileAsPromise(t.x,t.y,t.z,!1).then((function(t){var e,n=[];if(t.getObjects){e=t.getObjects();for(var r=0;r<e.length;r++){var o=e[r];n.push({id:o.getId(),geometries:o.getGeometriesForTile(t),isClosed:o.isClosed(),style:o.getStyle().forWorkerMessage()})}}i(n)})):i([])}))}},{key:"_pointToArray",value:function(t){var e=er.tile_scale/this.tile_size;return[t.x*e,t.y*e]}},{key:"_getGeoJsonMultiPolygon",value:function(t){for(var e=t.geometries,i=e.length,n=[],r={coordinates:n,type:"MultiPolygon"},o=0;o<i;o++){var a=e[o],s=a.paths,u=s.length,l=a.interiorsIndex,h=a.outlinesIndex,c=Math.min(l,h,u),f=void 0,p=void 0;for(p=0;p<c;p++)f=[s[p].map(this._pointToArray,this)],n.push(f);if(1===c)for(c=Math.min(h,u),p=l;p<c;p++)f.push(s[p].map(this._pointToArray,this))}return r}},{key:"_getGeoJsonMultiLineString",value:function(t,e){for(var i=1<arguments.length&&void 0!==e&&e,n={coordinates:[],type:"MultiLineString"},r=t.geometries,o=0;o<r.length;o++)for(var a=r[o],s=i?a.outlinesIndex:0,u=i?a.paths.length:Math.min(a.interiorsIndex,a.outlinesIndex,a.paths.length),l=s;l<u;l++){var h=a.paths[l].map(this._pointToArray,this);n.coordinates.push(h)}return n}},{key:"_getGeoJsonGeometry",value:function(t,e){var i=1===e?this._getGeoJsonMultiPolygon(t):this._getGeoJsonMultiLineString(t,3===e);return i.coordinates.length?i:null}},{key:"_load",value:function(t){var e=this;return new Promise((function(i,n){var r=cr.postMessage(e.target_name+".requestMarkerTile",t.coords).then(e._prepareTileData.bind(e,t)),o=new Promise((function(i,n){cr.postMessage(e.target_name+".requestSpatialTile",t.coords).then((function(n){for(var r=[],o=[],a=[],s=0;s<n.length;s++){var u,l=n[s],h=void 0,c=l.isClosed?(h=o,1):(h=r,2),f=e._getGeoJsonGeometry(l,c);f&&(u={id:l.id,type:"Feature",properties:{height:0,style:l.style},geometry:f},2===c&&(u.properties.effectiveZIdx=r.length),h.push(u));var p=e._getGeoJsonGeometry(l,3);p&&a.push({id:l.id,type:"Feature",properties:{height:0,style:l.style,effectiveZIdx:a.length},geometry:p})}t.source_data.layers.polylines={type:"FeatureCollection",features:r},t.source_data.layers.polygons={type:"FeatureCollection",features:o},t.source_data.layers.outlines={type:"FeatureCollection",features:a},i(t)}))}));Promise.all([r,o]).then((function(n){e._postProcessTile(t),i(t)}))}))}},{key:"_prepareTileData",value:function(t,e){var i=er.wrapTile(t.coords,{x:!0,y:!0}),n=er.metersForTile(i);t.source_data.layers={markers:{features:e,type:"FeatureCollection"}};var r={coords:i,min:n},o=t.source_data,a=su("binary-tree"),s={};for(var u in o.layers)for(var l=o.layers[u].features.length,h=0;h<l;h++){var c=o.layers[u].features[h],f=c.properties.icon;s[f.id]||(a.addItem({width:f.size.w,height:f.size.h,meta:{objectId:c.id,id:f.id}}),s[f.id]=!0),er.transformGeometry(c.geometry,(function(t){var e=t[0];t[0]=t[1],t[1]=e}))}return t.rasters=a.export(),Br.projectData(t.source_data),Br.scaleData(t.source_data,r),t}}]),e}();Br.register(gu,"ObjectTileSource");var yu=function(){En(e,Yo);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).uid_=i.uid,r}return _n(e,[{key:"initialize",value:function(t,e){this.provider=t,this._on_update=e,this._onProviderUpdate=this._onProviderUpdate.bind(this),t.addEventListener("update",this._onProviderUpdate)}},{key:"_onProviderUpdate",value:function(){this._on_update(this.name)}},{key:"tileTexture",value:function(t){return Object.assign(Cn(An(e.prototype),"tileTexture",this).call(this,t),{uid:this.uid_,url:this.uid_+"_"+t.coords.key,coords:t.coords})}},{key:"dispose",value:function(){this.provider.removeEventListener("update",this._onProviderUpdate)}}]),e}();function vu(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(i&&console.time("preprocess data"),e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=$o(t,e);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=fa(n,e)).length&&this.splitTile(n,0,0,0),i&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function mu(t,e,i){return 32*((1<<t)*i+e)+t}jr.register(yu,"RemoteRasterTileSource"),vu.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vu.prototype.splitTile=function(t,e,i,n,r,o,a){for(var s=[t,e,i,n],u=this.options,l=u.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var h,c,f,p,d,g,y,v,m,b,_,w=1<<e,x=mu(e,i,n),M=this.tiles[x];if(M||(1<l&&console.time("creation"),M=this.tiles[x]=va(t,e,i,n,u),this.tileCoords.push({z:e,x:i,y:n}),l&&(1<l&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,i,n,M.numFeatures,M.numPoints,M.numSimplified),console.timeEnd("creation")),h="z"+e,this.stats[h]=(this.stats[h]||0)+1,this.total++)),M.source=t,r){if(e===u.maxZoom||e===r)continue;var E=1<<r-e;if(i!==Math.floor(o/E)||n!==Math.floor(a/E))continue}else if(e===u.indexMaxZoom||M.numPoints<=u.indexMaxPoints)continue;M.source=null,0!==t.length&&(1<l&&console.time("clipping"),f=.5-(c=.5*u.buffer/u.extent),d=1+c,m=g=y=v=null,b=oa(t,w,i-c,i+(p=.5+c),0,M.minX,M.maxX,u),_=oa(t,w,i+f,i+d,0,M.minX,M.maxX,u),t=null,b&&(m=oa(b,w,n-c,n+p,1,M.minY,M.maxY,u),g=oa(b,w,n+f,n+d,1,M.minY,M.maxY,u),b=null),_&&(y=oa(_,w,n-c,n+p,1,M.minY,M.maxY,u),v=oa(_,w,n+f,n+d,1,M.minY,M.maxY,u),_=null),1<l&&console.timeEnd("clipping"),s.push(m||[],e+1,2*i,2*n),s.push(g||[],e+1,2*i,2*n+1),s.push(y||[],e+1,2*i+1,2*n),s.push(v||[],e+1,2*i+1,2*n+1))}},vu.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent,o=n.debug;if(t<0||24<t)return null;var a=1<<t,s=mu(t,e=(e%a+a)%a,i);if(this.tiles[s])return ga(this.tiles[s],r);1<o&&console.log("drilling down to z%d-%d-%d",t,e,i);for(var u,l=t,h=e,c=i;!u&&0<l;)l--,h=Math.floor(h/2),c=Math.floor(c/2),u=this.tiles[mu(l,h,c)];return u&&u.source?(1<o&&console.log("found parent tile z%d-%d-%d",l,h,c),1<o&&console.time("drilling down"),this.splitTile(u.source,l,h,c,t,e,i),1<o&&console.timeEnd("drilling down"),this.tiles[s]?ga(this.tiles[s],r):null):null};var bu={type:"FeatureCollection",features:[]},_u=function(){En(e,Br);var t=On(e);function e(i,n){return mn(this,e),i.tiled=!0,i.url="",t.call(this,i,n)}return _n(e,[{key:"fetchTile",value:function(t,e,i){return this.provider?this.provider.requestTileAsPromise(t,e,i).then((function(t){return t.data})):Promise.resolve(bu)}},{key:"_load",value:function(t){var e=this,i=er.wrapTile(t.coords,{x:!0,y:!0}),n={indexMaxZoom:0,maxZoom:this.max_zoom,tolerance:1.5,extent:er.tile_scale};return cr.postMessage(this.target_name+".fetchTile",i.x,i.y,i.z).then((function(r){for(var o in t.source_data.layers="FeatureCollection"===r.type?{_default:r}:r,t.source_data.layers){var a=new vu(t.source_data.layers[o],n).getTile(i.z,i.x,i.y);t.source_data.layers[o]=so(a)}return e._postProcessTile(t),t}))}},{key:"onReady",value:function(){this.dispatchUpdate()}}]),e}();jr.register(_u,"GeoJSONTileSource");var wu,xu={layers:{_default:{type:"FeatureCollection",features:[{type:"Point",geometry:{}}]}}},Mu=function(){En(e,jr);var t=On(e);function e(i,n){return mn(this,e),i.max_zoom=0,t.call(this,i,n)}return _n(e,[{key:"load",value:function(t){return t.source_data="0/0/0"===t.coords.key?xu:void 0,Promise.resolve(t)}}]),e}();jr.register(Mu,"SkyBox");var Eu,Au=wu={draw_label_collision_boxes:!1,draw_label_texture_boxes:!1,suppress_label_fade_in:!1,suppress_snap_animation:!1,show_hidden_labels:!1,layer_stats:!1};function ku(t,e){var i={};return e.forEach((function(e){return i[e]=t[e]})),i}var Tu=Eu={},Su=0;Eu.getContext=function(t,e){var i=!1;null==t&&((t=document.createElement("canvas")).style.position="absolute",t.style.top=0,t.style.left=0,t.style.zIndex=-1,document.body.appendChild(t),i=!0);var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("Couldn't create WebGL context.");return n._tangram_id=Su++,i?(Eu.resize(n,window.innerWidth,window.innerHeight,e.device_pixel_ratio),window.addEventListener("resize",(function(){Eu.resize(n,window.innerWidth,window.innerHeight,e.device_pixel_ratio)}))):Eu.resize(n,parseFloat(t.style.width),parseFloat(t.style.height),e.device_pixel_ratio),n},Eu.resize=function(t,e,i,n){t.canvas.style.width=e+"px",t.canvas.style.height=i+"px",t.canvas.width=Math.round(e*n),t.canvas.height=Math.round(i*n),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.canvas.width,t.canvas.height)};var Iu={parseUniforms:function(t){var e=[];for(var i in t){var n,r=i,o=t[i];if("number"==typeof o)e.push({type:"float",method:"1f",name:i,value:o,key:r,uniforms:t});else if(Array.isArray(o)){if("number"==typeof o[0])2<=o.length&&o.length<=4?e.push({type:"vec"+o.length,method:o.length+"fv",name:i,value:o,key:r,uniforms:t}):4<o.length&&e.push({type:"float[]",method:"1fv",name:i+"[0]",value:o,key:r,uniforms:t});else if("string"==typeof o[0])for(n=0;n<o.length;n++)e.push({type:"sampler2D",method:"1i",name:i+"["+n+"]",value:o[n],key:n,uniforms:o});else if(Array.isArray(o[0])&&"number"==typeof o[0][0]&&2<=o[0].length&&o[0].length<=4)for(n=0;n<o.length;n++)e.push({type:"vec"+o[0].length,method:o[n].length+"fv",name:i+"["+n+"]",value:o[n],key:n,uniforms:o})}else"boolean"==typeof o?e.push({type:"bool",method:"1i",name:i,value:o,key:r,uniforms:t}):"string"==typeof o&&e.push({type:"sampler2D",method:"1i",name:i,value:o,key:r,uniforms:t})}return e},defineVariable:function(t,e){var i,n;if("number"==typeof e)i="float";else if(Array.isArray(e))"number"==typeof e[0]?2<=e.length&&e.length<=4?i="vec"+e.length:(i="float",n=e.length):"string"==typeof e[0]&&(i="sampler2D",n=e.length);else if("boolean"==typeof e)i="bool";else{if("string"!=typeof e)return;i="sampler2D"}var r="";return r+="".concat(i," ").concat(t),n&&(r+="[".concat(n,"]")),r+";\n"},defineUniform:function(t,e){var i=Iu.defineVariable(t,e);if(i)return"uniform "+i},isUniformDefined:function(t,e){var i=new RegExp("uniform[^;]+(?:{[\\s\\S]*})?[^;]*\\b"+t+"\\b","g");return!!e.match(i)},isSymbolReferenced:function(t,e){var i=new RegExp("\\b"+t+"\\b","g");return 0<=e.search(i)},expandVec3:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(2!==t.length)return t;e=[].concat(Rn(t),[i]).map(parseFloat)}else e=[t,t,t].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e},expandVec4:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;if(Array.isArray(t)){if(3!==t.length)return t;e=[].concat(Rn(t),[i]).map(parseFloat)}else e=[t,t,t,i].map(parseFloat);if(e&&e.every((function(t){return"number"==typeof t&&!isNaN(t)})))return e}},Lu=[];function Ou(t,e){var i=Lu.filter((function(e){return e[0]===t}))[0];return(i=i&&i[1])||(Lu.push([t,{}]),i=Lu[Lu.length-1][1]),i[e]||(i[e]=t.getExtension(e)),i[e]}function Cu(t){var e,i,n=0;if(0===t.length)return n;for(e=0,i=t.length;e<i;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}var Pu=a((function(t){var e="(.|[\\r\\n]|\\n)*?\\*\\/\\n?\\n?",i=/(^|[^\S\n])(?:\/\/)([\s\S]+?)$/gm,n=/(^|[^\S\n])(?:\/\/[^!])([\s\S]+?)$/gm,r=t.exports=function(t,e){return t?r.block(r.line(t,e),e):""};r.block=function(t,i){i=i||{};var n=new RegExp("\\/\\*"+e,"gm");return i.safe&&(n=new RegExp("\\/\\*(?!\\*?\\!)"+e,"gm")),t?t.replace(n,""):""},r.line=function(t,e){var r=i;return(e=e||{}).safe&&(r=n),t?t.replace(r,""):""}})),Ru=/^\s*#pragma.*$/gm,ju=/\\\s*\n/gm,Nu=function(){function t(e,i,n,r,o){if(mn(this,t),o=o||{},this.textureManager=Po(r),this.gl=e,this.program=null,this.compiled=!1,this.compiling=!1,this.error=null,!t.polyfills[r]){t.polyfills[r]={};try{this.gl.uniformMatrix3fv(null,!1,new Float64Array(9))}catch(e){t.polyfills[r].uniformMatrix3fv=this.gl.uniformMatrix3fv,this.gl.uniformMatrix3fv=function(e,i,n){t.polyfills[r].uniformMatrix3fv.call(this,e,i,new Float32Array(n))}}try{this.gl.uniformMatrix4fv(null,!1,new Float64Array(16))}catch(e){t.polyfills[r].uniformMatrix4fv=this.gl.uniformMatrix4fv,this.gl.uniformMatrix4fv=function(e,i,n){t.polyfills[r].uniformMatrix4fv.call(this,e,i,new Float32Array(n))}}}this.defines=Object.assign({},o.defines||{}),this.blocks=Object.assign({},o.blocks||{}),this.block_scopes=Object.assign({},o.block_scopes||{}),this.extensions=o.extensions||[],this.dependent_uniforms=o.uniforms,this.uniforms={},this.attribs={},this.vertex_source=i,this.fragment_source=n,this.id=t.id++,this.name=o.name}return _n(t,[{key:"destroy",value:function(){this.gl.useProgram(null),this.gl.deleteProgram(this.program),this.program=null,this.uniforms={},this.attribs={},this.compiled=!1}},{key:"use",value:function(){this.compiled&&(t.current!==this&&this.gl.useProgram(this.program),t.current=this)}},{key:"compile",value:function(){var e=this;if(this.compiling)throw new Error("ShaderProgram.compile(): skipping for ".concat(this.id," (").concat(this.name,") because already compiling"));this.compiling=!0,this.compiled=!1,this.error=null,this.computed_vertex_source=this.vertex_source,this.computed_fragment_source=this.fragment_source;var i,n=this.checkExtensions(),r=this.buildDefineList(),o=this.buildShaderBlockList();for(var a in o){var s,u,l,h=o[a];!h||Array.isArray(h)&&0===h.length||(i=new RegExp("^\\s*#pragma\\s+tangram:\\s+"+a+"\\s*$","m"),s=this.computed_vertex_source.match(i),u=this.computed_fragment_source.match(i),null==s&&null==u||(l="",h.forEach((function(t){var e="".concat(t.scope,", ").concat(t.key,", ").concat(t.num);l+="\n// tangram-block-start: ".concat(e,"\n"),l+=t.source,l+="\n// tangram-block-end: ".concat(e,"\n")})),null!=s&&(this.computed_vertex_source=this.computed_vertex_source.replace(i,l)),null!=u&&(this.computed_fragment_source=this.computed_fragment_source.replace(i,l)),r["TANGRAM_BLOCK_"+a.replace(/[\s-]+/g,"_").toUpperCase()]=!0))}this.computed_vertex_source=this.computed_vertex_source.replace(Ru,""),this.computed_fragment_source=this.computed_fragment_source.replace(Ru,""),this.ensureUniforms(this.dependent_uniforms);var c=this.gl.getShaderPrecisionFormat(this.gl.FRAGMENT_SHADER,this.gl.HIGH_FLOAT),f=c&&0<c.precision?"precision highp float;\n":"precision mediump float;\n";r.TANGRAM_VERTEX_SHADER=!0,r.TANGRAM_FRAGMENT_SHADER=!1,this.computed_vertex_source=f+t.buildDefineString(r)+this.computed_vertex_source,r.TANGRAM_VERTEX_SHADER=!1,r.TANGRAM_FRAGMENT_SHADER=!0,this.computed_fragment_source=t.buildExtensionString(n)+f+t.buildDefineString(r)+this.computed_fragment_source,this.computed_vertex_source=this.computed_vertex_source.replace(ju,""),this.computed_fragment_source=this.computed_fragment_source.replace(ju,"");try{this.program=t.updateProgram(this.gl,this.program,this.computed_vertex_source,this.computed_fragment_source),this.compiled=!0,this.compiling=!1}catch(n){throw this.program=null,this.compiled=!1,this.compiling=!1,"vertex"!==(this.error=n).type&&"fragment"!==n.type||(this.shader_errors=n.errors,this.shader_errors.forEach((function(t){t.type=n.type,t.block=e.block(n.type,t.line)}))),n}this.computed_vertex_source=null,this.computed_fragment_source=null,this.use(),this.refreshUniforms(),this.refreshAttributes()}},{key:"buildDefineList",value:function(){var e,i={};for(e in t.defines)i[e]=t.defines[e];for(e in this.defines)i[e]=this.defines[e];return i}},{key:"buildShaderBlockList",value:function(){var e,i,n={};for(e in t.blocks)n[e]=[],Array.isArray(t.blocks[e])?(i=n[e]).push.apply(i,Rn(t.blocks[e].map((function(t,i){return{key:e,source:t,num:i,scope:"ShaderProgram"}})))):n[e]=[{key:e,source:t.blocks[e],num:0,scope:"ShaderProgram"}];for(e in this.blocks)if(n[e]=n[e]||[],Array.isArray(this.blocks[e]))for(var r=this.block_scopes&&this.block_scopes[e]||[],o=null,a=0,s=0;s<this.blocks[e].length;s++)r[s]!==o&&(o=r[s],a=0),n[e].push({key:e,source:this.blocks[e][s],num:a,scope:o||this.name}),a++;else n[e].push({key:e,source:this.blocks[e],num:0,scope:this.name});return n}},{key:"ensureUniforms",value:function(t){if(t){var e,i=Pu(this.computed_vertex_source),n=Pu(this.computed_fragment_source),r=[],o=[];for(var a in t){var s=Iu.isUniformDefined(a,i),u=Iu.isUniformDefined(a,n);if(!s||!u){if(!(e=Iu.defineUniform(a,t[a])))continue;s||(Ar("trace","Program ".concat(this.name,": ").concat(a," not defined in vertex shader, injecting: '").concat(e,"'")),r.push(e)),u||(Ar("trace","Program ".concat(this.name,": ").concat(a," not defined in fragment shader, injecting: '").concat(e,"'")),o.push(e))}}0<r.length&&(this.computed_vertex_source=r.join("\n")+this.computed_vertex_source),0<o.length&&(this.computed_fragment_source=o.join("\n")+this.computed_fragment_source)}}},{key:"setUniforms",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;if(this.compiled){i&&(this.texture_unit=0);for(var n=Iu.parseUniforms(t),r=0;r<n.length;r++){var o=n[r];"sampler2D"===o.type?this.setTextureUniform(o.name,o.value):this.uniform(o.method,o.name,o.value)}}}},{key:"saveUniforms",value:function(t){var e=t||this.uniforms;for(var i in e){var n=this.uniforms[i];n&&(n.saved_value=n.value)}this.saved_texture_unit=this.texture_unit||0}},{key:"restoreUniforms",value:function(t){var e=t||this.uniforms;for(var i in e){var n=this.uniforms[i];n&&n.saved_value&&(n.value=n.saved_value,this.updateUniform(n))}this.texture_unit=this.saved_texture_unit||0}},{key:"setTextureUniform",value:function(t,e){var i=this.textureManager.textures[e];null!=i?(i.bind(this.texture_unit),this.uniform("1i",t,this.texture_unit),this.texture_unit++):Ar("warn","Cannot find texture '".concat(e,"'"))}},{key:"uniform",value:function(t,e,i){var n;this.compiled&&(this.uniforms[e]=this.uniforms[e]||{},(n=this.uniforms[e]).name=e,void 0===n.location&&(n.location=this.gl.getUniformLocation(this.program,e)),n.method=t,n.value=i,this.updateUniform(n))}},{key:"updateUniform",value:function(t){this.compiled&&t&&null!=t.location&&(this.use(),this.commitUniform(t))}},{key:"commitUniform",value:function(t){var e=t.location,i=t.value;switch(t.method){case"1i":this.gl.uniform1i(e,i);break;case"1f":this.gl.uniform1f(e,i);break;case"2f":this.gl.uniform2f(e,i[0],i[1]);break;case"3f":this.gl.uniform3f(e,i[0],i[1],i[2]);break;case"4f":this.gl.uniform4f(e,i[0],i[1],i[2],i[3]);break;case"1iv":this.gl.uniform1iv(e,i);break;case"3iv":this.gl.uniform3iv(e,i);break;case"1fv":this.gl.uniform1fv(e,i);break;case"2fv":this.gl.uniform2fv(e,i);break;case"3fv":this.gl.uniform3fv(e,i);break;case"4fv":this.gl.uniform4fv(e,i);break;case"Matrix3fv":this.gl.uniformMatrix3fv(e,!1,i);break;case"Matrix4fv":this.gl.uniformMatrix4fv(e,!1,i)}}},{key:"refreshUniforms",value:function(){if(this.compiled)for(var t in this.uniforms){var e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,t),this.updateUniform(e)}}},{key:"refreshAttributes",value:function(){this.attribs={}}},{key:"attribute",value:function(t){if(this.compiled){var e=this.attribs[t]=this.attribs[t]||{};return null!=e.location||(e.name=t,e.location=this.gl.getAttribLocation(this.program,t)),e}}},{key:"source",value:function(t){return"vertex"===t?this.computed_vertex_source:"fragment"===t?this.computed_fragment_source:void 0}},{key:"lines",value:function(t){var e=this.source(t);return e?e.split("\n"):[]}},{key:"line",value:function(t,e){var i=this.lines(t);if(i)return i[e]}},{key:"block",value:function(t,e){for(var i,n=this.lines(t),r=0;r<e&&r<n.length;r++){var o=n[r],a=o.match(/\/\/ tangram-block-start: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/);a&&1<a.length?i={scope:a[1],name:a[2],num:a[3]}:(a=o.match(/\/\/ tangram-block-end: ([A-Za-z0-9_-]+), ([A-Za-z0-9_-]+), (\d+)/))&&1<a.length&&(i=null),i&&(i.line=null==i.line?-1:i.line+1,i.source=o)}return i}},{key:"checkExtensions",value:function(){var t=this,e=[];return this.extensions.forEach((function(i){var n=Ou(t.gl,i),r="TANGRAM_EXTENSION_".concat(i);t.defines[r]=null!=n,n?e.push(i):Ar("debug","Could not enable extension '".concat(i,"'"))})),e}}]),t}();Nu.polyfills={},Nu.id=0,Nu.current=null,Nu.defines={},Nu.blocks={},Nu.reset=function(){Nu.programs_by_source={},Nu.shaders_by_source={}},Nu.reset(),Nu.buildDefineString=function(t){var e="";for(var i in t)null!=t[i]&&!1!==t[i]&&("boolean"==typeof t[i]&&!0===t[i]?e+="#define "+i+"\n":"number"==typeof t[i]&&Math.floor(t[i])===t[i]?e+="#define "+i+" "+t[i].toFixed(1)+"\n":e+="#define "+i+" "+t[i]+"\n");return e},Nu.buildExtensionString=function(t){var e="";return(t=t||[]).forEach((function(t){e+="#ifdef GL_".concat(t,"\n#extension GL_").concat(t," : enable\n#endif\n")})),e},Nu.addBlock=function(t){var e;Nu.blocks[t]=Nu.blocks[t]||[];for(var i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];(e=Nu.blocks[t]).push.apply(e,n)},Nu.removeBlock=function(t){Nu.blocks[t]=[]},Nu.replaceBlock=function(t){Nu.removeBlock(t);for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];Nu.addBlock.apply(Nu,[t].concat(i))},Nu.updateProgram=function(t,e,i,n){var r=Cu(t._tangram_id+"::"+i+"::"+n);if(Nu.programs_by_source[r])return Ar("trace","Reusing identical source GL program object"),Nu.programs_by_source[r];var o=Nu.createShader(t,i,t.VERTEX_SHADER),a=Nu.createShader(t,n,t.FRAGMENT_SHADER);if(t.useProgram(null),null!=e)for(var s=t.getAttachedShaders(e),u=0;u<s.length;u++)t.detachShader(e,s[u]);else e=t.createProgram();if(null==o||null==a)return e;if(t.attachShader(e,o),t.attachShader(e,a),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return Nu.programs_by_source[r]=e;var l=new Error("WebGL program error:\n            VALIDATE_STATUS: ".concat(t.getProgramParameter(e,t.VALIDATE_STATUS),"\n            ERROR: ").concat(t.getError(),"\n            --- Vertex Shader ---\n            ").concat(i,"\n            --- Fragment Shader ---\n            ").concat(n));throw Object.assign(new Error(l),{type:"program"})};var Du={disabled:!(Nu.createShader=function(t,e,i){var n=Cu(t._tangram_id+"::"+e);if(Nu.shaders_by_source[n])return Ar("trace","Reusing identical source GL shader object"),Nu.shaders_by_source[n];var r=t.createShader(i);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return Nu.shaders_by_source[n]=r;var o=i===t.VERTEX_SHADER?"vertex":"fragment",a=t.getShaderInfoLog(r),s=function(t){t=String(t);for(var e,i=[];e=t.match(/ERROR\:([^\n]+)/);){t=t.slice(e.index+1);var n=(a=e[1].trim()).split(":"),r=n.slice(2).join(":").trim(),o=parseInt(n[0],10),a=parseInt(n[1],10);i.push({message:r,file:o,line:a})}return i}(a);throw Object.assign(new Error(a),{type:o,errors:s})}),bound_vao:[],init:function(t){var e;!0!==this.disabled&&(e=Ou(t,"OES_vertex_array_object")),null!=e?Ar("info","Vertex Array Object extension available"):!0!==this.disabled?Ar("warn","Vertex Array Object extension NOT available"):Ar("warn","Vertex Array Object extension force disabled")},create:function(t,e,i){var n={};n.setup=e,n.teardown=i;var r=Ou(t,"OES_vertex_array_object");return null!=r&&(n._vao=r.createVertexArrayOES(),r.bindVertexArrayOES(n._vao)),n.setup(!0),n},getCurrentBinding:function(t){var e=this.bound_vao.filter((function(e){return e[0]===t}))[0];return e&&e[1]},setCurrentBinding:function(t,e){var i=this.bound_vao,n=i.filter((function(e){return e[0]===t}))[0];null==n?i.push([t,e]):n[1]=e},bind:function(t,e){var i,n=Ou(t,"OES_vertex_array_object");null!=e?null!=n&&null!=e._vao?(n.bindVertexArrayOES(e._vao),this.setCurrentBinding(t,e)):e.setup(!1):(i=this.getCurrentBinding(t),null!=n?n.bindVertexArrayOES(null):null!=i&&"function"==typeof i.teardown&&i.teardown(),this.setCurrentBinding(t,null))},destroy:function(t,e){var i=Ou(t,"OES_vertex_array_object");null!=i&&null!=e&&null!=e._vao&&(i.deleteVertexArrayOES(e._vao),e._vao=null)}},zu=function(){function t(e,i){mn(this,t),this._gl=e,this._requests={},this._pixels=null,this._has_dirty_buffer=!1,this._fbo=this._gl.createFramebuffer(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._fbo_size={width:256,height:256};var n=Po(i).create(this._gl,"selection_fbo",{filtering:"nearest"});n.setData(this._fbo_size.width,this._fbo_size.height,null,{filtering:"nearest"}),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,n.texture,0);var r=this._gl.createRenderbuffer();this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,r),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,this._fbo_size.width,this._fbo_size.height),this._gl.framebufferRenderbuffer(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.RENDERBUFFER,r),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null)}return _n(t,[{key:"destroy",value:function(){this._gl&&this._fbo&&(this._gl.deleteFramebuffer(this._fbo),this._fbo=null,this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null))}},{key:"bind",value:function(){var e;this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fbo),this._gl.viewport(0,0,this._fbo_size.width,this._fbo_size.height),(e=this._gl).clearColor.apply(e,Rn(t.defaultColor))}},{key:"getFeatureAt",value:function(e,i,n){var r=i.radius,o=i.top_most_only,a=void 0===o||o;!e||e.x<0||e.y<0||1<e.x||1<e.y?n({features:null}):(this.selection_request_id=this.selection_request_id+1||0,this._requests[this.selection_request_id]={id:this.selection_request_id,point:e,radius:r,top_most_only:a,ttl:a?1:t.MAX_PICKING_TRIES,callback:n})}},{key:"hasPendingRequests",value:function(){return 0<Object.keys(this._requests).length}},{key:"clearPendingRequests",value:function(){for(var t in this._requests)this._requests[t].callback(new Error("cleared")),delete this._requests[t];this._pending_deep_request=null}},{key:"read",value:function(t){if(this.hasPendingRequests()){var e=this._gl;for(var i in e.bindFramebuffer(e.FRAMEBUFFER,this._fbo),this._pending_deep_request&&this.processRequest(this._pending_deep_request,t),this._requests)if(this.processRequest(this._requests[i],t))break;e.bindFramebuffer(e.FRAMEBUFFER,null)}}},{key:"processRequest",value:function(e,i){var n,r,o,a=this._gl,s=255,u=e.point,l=e.radius,h=(o=l?(r=Math.min(this._fbo_size.width,this._fbo_size.height),{x:Math.min(Math.ceil(2*l.x*this._fbo_size.width),r),y:Math.min(Math.ceil(2*l.y*this._fbo_size.height),r)}):(l={x:0,y:0},{x:1,y:1})).x*o.y*4;if(null==this._pixels||this._pixels.byteLength<h)this._pixels=new Uint8Array(h);else if(this._pixels.fill instanceof Function)this._pixels.fill(0,0,h);else for(var c=0;c<h;c++)this._pixels[c]=0;a.readPixels(Math.round((u.x-l.x)*this._fbo_size.width),Math.round((1-u.y-l.y)*this._fbo_size.height),o.x,o.y,a.RGBA,a.UNSIGNED_BYTE,this._pixels),e.ttl--;var f=Math.floor(o.x/2),p=Math.floor(o.y/2),d=4*(p*o.x+f),g=this._pixels.slice(d,d+4),y=g[0]+(g[1]<<8)+(g[2]<<16);if(0<y)n=y+(g[3]<<24)>>>0,s=g[3];else if(4<h)for(var v=1/0,m=(d=0,0);m<o.y;m++)for(var b,_=0;_<o.x;_++,d+=4)0<(y=(g=this._pixels.slice(d,d+4))[0]+(g[1]<<8)+(g[2]<<16))&&(b=Math.pow(_-f,2)+Math.pow(m-p,2))<v&&(n=y+(g[3]<<24)>>>0,s=g[3],v=b);if(255!==s){var w=this._getFeatureByKey(n,i);if(e.features||(e.features=[]),!w)return void this._finishRead(e);if(e.features.every((function(t){return t.id!==w.id}))&&e.features.push(w),e.ttl)return this._pending_deep_request=e,t._discardColor(g),this._has_dirty_buffer=!0;this._finishRead(e)}else this._finishRead(e)}},{key:"_finishRead",value:function(e){var i=e.features||t.EMPTY_ARRAY;e.top_most_only||(this._pending_deep_request=null,t._resetDiscardedColors()),delete this._requests[e.id],e.callback({features:i})}},{key:"_getFeatureByKey",value:function(t,e){for(var i=null,n=0;n<e.length;n++){var r=e[n];if(r.selection_data&&(i=r.selection_data[t])){i.tile={coords:r.coords};break}}return i}},{key:"setupDiscards",value:function(e){for(var i=t.MAX_PICKING_TRIES;i--;)e.uniform("4fv","u_selection_discard".concat(i),t._discarded_colors[i]||t.defaultColor)}},{key:"has_dirty_buffer",get:function(){return this._has_dirty_buffer},set:function(){this._has_dirty_buffer=!!this._pending_deep_request}}],[{key:"makeEntry",value:function(){this.map_entry++;var t=255&this.map_entry,e=this.map_entry>>8&255,i=this.map_entry>>16&255,n=this.map_prefix;return{key:t+(e<<8)+(i<<16)+(n<<24)>>>0,color:[t/255,e/255,i/255,n/255]}}},{key:"reset",value:function(){this.map_entry=0}},{key:"setPrefix",value:function(t){this.map_prefix=t}},{key:"_discardColor",value:function(t){this._discarded_colors.push([t[0]/255,t[1]/255,t[2]/255,t[3]/255])}},{key:"_resetDiscardedColors",value:function(){this._discarded_colors.length=0}}]),t}();zu._discarded_colors=[],zu.map_entry=0,zu.map_prefix=0,zu.defaultColor=[0,0,0,1],zu.MAX_PICKING_TRIES=10,zu.EMPTY_ARRAY=Object.freeze([]);var Bu,Hu=function(){function t(e,i,n,r,o,a){mn(this,t),a=a||{},this.textureManager=Po(o),this.gl=e,this.vertex_data=i,this.element_data=n,this.vertex_layout=r,this.vertex_buffer=this.gl.createBuffer(),this.buffer_size=this.vertex_data.byteLength,this.draw_mode=a.draw_mode||this.gl.TRIANGLES,this.data_usage=a.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.uniforms=a.uniforms,this.textures=a.textures,this.retain=a.retain||!1,this.created_at=+new Date,this.fade_in_time=a.fade_in_time||0,this.vertex_count=this.vertex_data.byteLength/this.vertex_layout.stride,this.element_count=0,this.vaos={},this.toggle_element_array=!1,this.element_data?(this.toggle_element_array=!0,this.element_count=this.element_data.length,this.geometry_count=this.element_count/this.vertices_per_geometry,this.element_type=this.element_data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT,this.element_buffer=this.gl.createBuffer(),this.buffer_size+=this.element_data.byteLength,this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.element_buffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.element_data,this.data_usage)):this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.upload(),this.retain||(delete this.vertex_data,delete this.element_data),this.valid=!0}return _n(t,[{key:"render",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};if(!this.valid)return!1;var i=e.program||Nu.current;i.use(),this.uniforms&&(i.saveUniforms(this.uniforms),i.setUniforms(this.uniforms,!1));var n=(new Date-this.created_at)/1e3;return i.uniform("1f","u_visible_time",n),this.bind(i),this.toggle_element_array?this.gl.drawElements(this.draw_mode,this.element_count,this.element_type,0):this.gl.drawArrays(this.draw_mode,0,this.vertex_count),Du.bind(this.gl,null),this.uniforms&&i.restoreUniforms(this.uniforms),n<this.fade_in_time}},{key:"bind",value:function(t){var e=this,i=this.vaos[t.id];i?Du.bind(this.gl,i):this.vaos[t.id]=Du.create(this.gl,(function(i){e.gl.bindBuffer(e.gl.ARRAY_BUFFER,e.vertex_buffer),e.toggle_element_array&&e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,e.element_buffer),e.vertex_layout.enable(e.gl,t,i)}))}},{key:"upload",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertex_buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}},{key:"destroy",value:function(){var t=this;if(!this.valid)return!1;for(var e in this.valid=!1,this.vaos)Du.destroy(this.gl,this.vaos[e]);return this.gl.deleteBuffer(this.vertex_buffer),this.vertex_buffer=null,this.element_buffer&&(this.gl.deleteBuffer(this.element_buffer),this.element_buffer=null),delete this.vertex_data,delete this.element_data,this.textures&&this.textures.forEach((function(e){return t.textureManager.release(e)})),!0}}]),t}(),Fu=["emission","ambient","diffuse","specular"],Uu=function(){function t(e){var i=this;mn(this,t),e=e||{},Fu.forEach((function(t){var n=e[t];null!=n&&(n.texture?i[t]={texture:n.texture,mapping:n.mapping||"spheremap",scale:Iu.expandVec3(null!=n.scale?n.scale:1),amount:Iu.expandVec4(null!=n.amount?n.amount:1)}:"number"==typeof n||Array.isArray(n)?i[t]={amount:Iu.expandVec4(n)}:i[t]="string"==typeof n?{amount:vo.parseColor(n)}:n)})),this.specular&&(this.specular.shininess=e.shininess?parseFloat(e.shininess):.2),null!=e.normal&&(this.normal={texture:e.normal.texture,mapping:e.normal.mapping||"triplanar",scale:Iu.expandVec3(null!=e.normal.scale?e.normal.scale:1),amount:null!=e.normal.amount?e.normal.amount:1})}return _n(t,[{key:"inject",value:function(e){var i=this;Fu.forEach((function(t){var n="TANGRAM_MATERIAL_".concat(t.toUpperCase()),r=n+"_TEXTURE";e.defines[n]=null!=i[t],i[t]&&i[t].texture&&(e.defines[r]=!0,e.defines[r+"_"+i[t].mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(i[t].mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===i[t].mapping)})),this.normal&&this.normal.texture&&(e.defines.TANGRAM_MATERIAL_NORMAL_TEXTURE=!0,e.defines["TANGRAM_MATERIAL_NORMAL_TEXTURE_"+this.normal.mapping.toUpperCase()]=!0,e.defines["TANGRAM_MATERIAL_TEXTURE_".concat(this.normal.mapping.toUpperCase())]=!0,e.texcoords=e.texcoords||"uv"===this.normal.mapping),e.replaceShaderBlock(t.block,"/*Defines globals:materiallight_accumulator_**/struct Material{\n#ifdef TANGRAM_MATERIAL_EMISSION\nvec4 emission;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nvec3 emissionScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT\nvec4 ambient;\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nvec3 ambientScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nvec4 diffuse;\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nvec3 diffuseScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 specular;float shininess;\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nvec3 specularScale;\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvec3 normalScale;float normalAmount;\n#endif\n};uniform Material u_material;Material material;\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\nuniform sampler2D u_material_emission_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\nuniform sampler2D u_material_ambient_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\nuniform sampler2D u_material_diffuse_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\nuniform sampler2D u_material_specular_texture;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nuniform sampler2D u_material_normal_texture;\n#endif\nvec4 light_accumulator_ambient=vec4(vec3(0.0),1.);vec4 light_accumulator_diffuse=vec4(vec3(0.0),1.);\n#ifdef TANGRAM_MATERIAL_SPECULAR\nvec4 light_accumulator_specular=vec4(vec3(0.0),1.);\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_SPHEREMAP\nvec4 getSphereMap(in sampler2D _tex,in vec3 _eyeToPoint,in vec3 _normal,in vec2 _skew){vec3 eye=normalize(_eyeToPoint);eye.xy-=_skew;eye=normalize(eye);vec3 r=reflect(eye,_normal);r.z+=1.0;float m=2.*length(r);vec2 uv=r.xy/m+.5;return texture2D(_tex,uv);}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_TRIPLANAR\nvec3 getTriPlanarBlend(in vec3 _normal){vec3 blending=abs(_normal);blending=normalize(max(blending,0.00001));float b=(blending.x+blending.y+blending.z);return blending/b;}vec4 getTriPlanar(in sampler2D _tex,in vec3 _pos,in vec3 _normal,in vec3 _scale){vec3 blending=getTriPlanarBlend(_normal);vec4 xaxis=texture2D(_tex,fract(_pos.yz*_scale.x));vec4 yaxis=texture2D(_tex,fract(_pos.xz*_scale.y));vec4 zaxis=texture2D(_tex,fract(_pos.xy*_scale.z));return xaxis*blending.x+yaxis*blending.y+zaxis*blending.z;}\n#endif\n#ifdef TANGRAM_MATERIAL_TEXTURE_PLANAR\nvec4 getPlanar(in sampler2D _tex,in vec3 _pos,in vec2 _scale){return texture2D(_tex,fract(_pos.xy*_scale.x));}\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE\nvoid calculateNormal(inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_UV\n_normal+=texture2D(u_material_normal_texture,fract(v_texcoord*material.normalScale.xy)).rgb*2.0-1.0;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_PLANAR\nvec3 normalTex=getPlanar(u_material_normal_texture,v_world_position.xyz,material.normalScale.xy).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n#ifdef TANGRAM_MATERIAL_NORMAL_TEXTURE_TRIPLANAR\nvec3 normalTex=getTriPlanar(u_material_normal_texture,v_world_position.xyz,_normal,material.normalScale).rgb*2.0-1.0;_normal+=normalTex;\n#endif\n_normal=normalize(_normal);}\n#endif\nvoid calculateMaterial(in vec3 _eyeToPoint,inout vec3 _normal){\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_UV\nmaterial.emission*=texture2D(u_material_emission_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_PLANAR\nmaterial.emission*=getPlanar(u_material_emission_texture,v_world_position.xyz,material.emissionScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_TRIPLANAR\nmaterial.emission*=getTriPlanar(u_material_emission_texture,v_world_position.xyz,_normal,material.emissionScale);\n#endif\n#ifdef TANGRAM_MATERIAL_EMISSION_TEXTURE_SPHEREMAP\nmaterial.emission*=getSphereMap(u_material_emission_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_UV\nmaterial.ambient*=texture2D(u_material_ambient_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_PLANAR\nmaterial.ambient*=getPlanar(u_material_ambient_texture,v_world_position.xyz,material.ambientScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_TRIPLANAR\nmaterial.ambient*=getTriPlanar(u_material_ambient_texture,v_world_position.xyz,_normal,material.ambientScale);\n#endif\n#ifdef TANGRAM_MATERIAL_AMBIENT_TEXTURE_SPHEREMAP\nmaterial.ambient*=getSphereMap(u_material_ambient_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_UV\nmaterial.diffuse*=texture2D(u_material_diffuse_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_PLANAR\nmaterial.diffuse*=getPlanar(u_material_diffuse_texture,v_world_position.xyz,material.diffuseScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_TRIPLANAR\nmaterial.diffuse*=getTriPlanar(u_material_diffuse_texture,v_world_position.xyz,_normal,material.diffuseScale);\n#endif\n#ifdef TANGRAM_MATERIAL_DIFFUSE_TEXTURE_SPHEREMAP\nmaterial.diffuse*=getSphereMap(u_material_diffuse_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_UV\nmaterial.specular*=texture2D(u_material_specular_texture,v_texcoord);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_PLANAR\nmaterial.specular*=getPlanar(u_material_specular_texture,v_world_position.xyz,material.specularScale.xy);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_TRIPLANAR\nmaterial.specular*=getTriPlanar(u_material_specular_texture,v_world_position.xyz,_normal,material.specularScale);\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR_TEXTURE_SPHEREMAP\nmaterial.specular*=getSphereMap(u_material_specular_texture,_eyeToPoint,_normal,u_center_offset);\n#endif\n#endif\n}","Material"),e.addShaderBlock("setup","\nmaterial = u_material;\n","Material")}},{key:"setupProgram",value:function(t){var e=this;Fu.forEach((function(i){e[i]&&(e[i].texture?(t.setTextureUniform("u_material_".concat(i,"_texture"),e[i].texture),t.uniform("3fv","u_material.".concat(i,"Scale"),e[i].scale),t.uniform("4fv","u_material.".concat(i),e[i].amount)):e[i].amount&&t.uniform("4fv","u_material.".concat(i),e[i].amount))})),this.specular&&t.uniform("1f","u_material.shininess",this.specular.shininess),this.normal&&this.normal.texture&&(t.setTextureUniform("u_material_normal_texture",this.normal.texture),t.uniform("3fv","u_material.normalScale",this.normal.scale),t.uniform("1f","u_material.normalAmount",this.normal.amount))}}],[{key:"isValid",value:function(t){return null!=t&&(null!=t.emission||null!=t.ambient||null!=t.diffuse||null!=t.specular)}}]),t}();Uu.block="material";var Vu=Bu={};Bu.copy=function(t){for(var e=[],i=t.length,n=0;n<i;n++)e[n]=t[n];return e},Bu.neg=function(t){for(var e=[],i=t.length,n=0;n<i;n++)e[n]=-t[n];return e},Bu.add=function(t,e){for(var i=[],n=Math.min(t.length,e.length),r=0;r<n;r++)i[r]=t[r]+e[r];return i},Bu.sub=function(t,e){for(var i=[],n=Math.min(t.length,e.length),r=0;r<n;r++)i[r]=t[r]-e[r];return i},Bu.signed_area=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])},Bu.mult=function(t,e){var i,n=[],r=t.length;if("number"==typeof e)for(i=0;i<r;i++)n[i]=t[i]*e;else for(r=Math.min(t.length,e.length),i=0;i<r;i++)n[i]=t[i]*e[i];return n},Bu.multMatrix=function(t,e){return[t[0][0]*e[0]+t[0][1]*e[1],t[1][0]*e[0]+t[1][1]*e[1]]},Bu.div=function(t,e){var i=[];if("number"==typeof e)for(r=0;r<t.length;r++)i[r]=t[r]/e;else for(var n=Math.min(t.length,e.length),r=0;r<n;r++)i[r]=t[r]/e[r];return i},Bu.perp=function(t,e){return[e[1]-t[1],t[0]-e[0]]},Bu.rot=function(t,e){var i=Math.cos(e),n=Math.sin(e);return[t[0]*i-t[1]*n,t[0]*n+t[1]*i]},Bu.angle=function(t){var e=Pn(t,2),i=e[0],n=e[1];return Math.atan2(n,i)},Bu.angleBetween=function(t,e){var i=Bu.dot(Bu.normalize(Bu.copy(t)),Bu.normalize(Bu.copy(e)));return 1<i&&(i=1),Math.acos(i)},Bu.signedAngleBetween=function(t,e){return Math.atan2(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])},Bu.isEqual=function(t,e){for(var i=t.length,n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0},Bu.lengthSq=function(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:3<=t.length?t[0]*t[0]+t[1]*t[1]+t[2]*t[2]:0},Bu.length=function(t){return Math.sqrt(Bu.lengthSq(t))},Bu.normalize=function(t){var e;if(2===t.length){if(1==(e=t[0]*t[0]+t[1]*t[1]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e):(t[0]=0,t[1]=0)}else if(3<=t.length){if(1==(e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2]))return t;0!==(e=Math.sqrt(e))?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0)}return t},Bu.cross=function(t,e){return 2===t.length?t[0]*e[1]-t[1]*e[0]:3===t.length?[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]:void 0},Bu.dot=function(t,e){for(var i=0,n=Math.min(t.length,e.length),r=0;r<n;r++)i+=t[r]*e[r];return i};var qu=function(){function t(e,i){mn(this,t),this.name=i.name,this.view=e,null==i.ambient||"number"==typeof i.ambient?this.ambient=Iu.expandVec3(i.ambient||0):this.ambient=vo.parseColor(i.ambient).slice(0,3),null==i.diffuse||"number"==typeof i.diffuse?this.diffuse=Iu.expandVec3(null!=i.diffuse?i.diffuse:1):this.diffuse=vo.parseColor(i.diffuse).slice(0,3),null==i.specular||"number"==typeof i.specular?this.specular=Iu.expandVec3(i.specular||0):this.specular=vo.parseColor(i.specular).slice(0,3)}return _n(t,[{key:"inject",value:function(){var e="\n            uniform ".concat(this.struct_name," u_").concat(this.name,";\n            ").concat(this.struct_name," ").concat(this.name,";\n            "),i="\n            ".concat(this.name," = u_").concat(this.name,";\n\n        ");Nu.addBlock(t.block,e),Nu.addBlock("setup",i)}},{key:"update",value:function(){}},{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient),t.uniform("3fv","u_".concat(this.name,".diffuse"),this.diffuse),t.uniform("3fv","u_".concat(this.name,".specular"),this.specular)}}],[{key:"create",value:function(e,i){if(t.types[i.type])return new t.types[i.type](e,i)}},{key:"setMode",value:function(e,i){!0===e&&(e="fragment"),e=t.enabled&&(null!=e?e:"fragment"),i.defines.TANGRAM_LIGHTING_FRAGMENT="fragment"===e,i.defines.TANGRAM_LIGHTING_VERTEX="vertex"===e}},{key:"inject",value:function(e){if(Nu.removeBlock(t.block),t.enabled){var i="";if(e&&0<Object.keys(e).length){var n={};for(var r in e)n[e[r].type]=!0;for(var o in n)t.types[o].inject();for(var a in e)e[a].inject(),i+="calculateLight(".concat(a,", _eyeToPoint, _normal);\n")}var s="\n            vec4 calculateLighting(in vec3 _eyeToPoint, in vec3 _normal, in vec4 _color) {\n\n                // Do initial material calculations over normal, emission, ambient, diffuse and specular values\n                calculateMaterial(_eyeToPoint,_normal);\n\n                // Un roll the loop of individual ligths to calculate\n                ".concat(i,"\n\n                //  Final light intensity calculation\n                vec4 color = vec4(vec3(0.), _color.a); // start with vertex color alpha\n\n                #ifdef TANGRAM_MATERIAL_EMISSION\n                    color.rgb = material.emission.rgb;\n                    color.a *= material.emission.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_AMBIENT\n                    color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.ambient.rgb;\n                    color.a *= material.ambient.a;\n                #else\n                    #ifdef TANGRAM_MATERIAL_DIFFUSE\n                        color.rgb += light_accumulator_ambient.rgb * _color.rgb * material.diffuse.rgb;\n                    #endif\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_DIFFUSE\n                    color.rgb += light_accumulator_diffuse.rgb * _color.rgb * material.diffuse.rgb;\n                    color.a *= material.diffuse.a;\n                #endif\n\n                #ifdef TANGRAM_MATERIAL_SPECULAR\n                    color.rgb += light_accumulator_specular.rgb * material.specular.rgb;\n                    color.a *= material.specular.a;\n                #endif\n\n                // Clamp final color\n                color = clamp(color, 0.0, 1.0);\n\n                return color;\n            }");Nu.addBlock(t.block,s)}}}]),t}();qu.types={},qu.block="lighting",qu.enabled=!0;var Gu=function(){En(e,qu);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).type="ambient",r.struct_name="AmbientLight",r}return _n(e,[{key:"setupProgram",value:function(t){t.uniform("3fv","u_".concat(this.name,".ambient"),this.ambient)}}],[{key:"inject",value:function(){Nu.addBlock(qu.block,"/*Expected globals:light_accumulator_**/struct AmbientLight{vec3 ambient;};void calculateLight(in AmbientLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;}")}}]),e}();qu.types.ambient=Gu;var Wu=function(){En(e,qu);var t=On(e);function e(i,n){var r,o;return mn(this,e),(r=t.call(this,i,n)).type="directional",r.struct_name="DirectionalLight",n.direction?r._direction=n.direction:(o=Math.sin(60*Math.PI/180),r._direction=[Math.cos(135*Math.PI/180)*o,Math.sin(135*Math.PI/180)*o,-.5]),null==n.ambient&&(r.ambient=Iu.expandVec3(.5)),r.direction=r._direction.map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r}return _n(e,[{key:"update",value:function(){No(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"setupProgram",value:function(t){Cn(An(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=Vu.normalize(Vu.copy(t))}}],[{key:"inject",value:function(){Nu.addBlock(qu.block,"/*Expected globals:materiallight_accumulator_**/struct DirectionalLight{vec3 ambient;vec3 diffuse;vec3 specular;vec3 direction;};void calculateLight(in DirectionalLight _light,in vec3 _eyeToPoint,in vec3 _normal){light_accumulator_ambient.rgb+=_light.ambient;float nDotVP=clamp(dot(_normal,-_light.direction),0.0,1.0);\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(_light.direction,_normal);float eyeDotR=max(dot(normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf;\n#endif\n}")}}]),e}();qu.types.directional=Wu;var Yu=function(){En(e,qu);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).type="point",r.struct_name="PointLight",r.position=n.position||[0,0,"100px"],r.position_eye=[],r.origin=n.origin||"ground",r.attenuation=isNaN(parseFloat(n.attenuation))?0:parseFloat(n.attenuation),n.radius?Array.isArray(n.radius)&&2===n.radius.length?r.radius=n.radius:r.radius=[null,n.radius]:r.radius=null,r}return _n(e,[{key:"inject",value:function(){Cn(An(e.prototype),"inject",this).call(this),Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT=0!==this.attenuation,Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS=null!=this.radius&&null!=this.radius[0],Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS=null!=this.radius}},{key:"update",value:function(){var t,e,i,n=this.view.lookAtManipulator.getLookAtData().zoom;"world"===this.origin?(e=(t=Pn(er.latLngToMeters(this.position),2))[0],i=t[1],this.position_eye[0]=e-this.view.lookAtManipulator.getLookAtData().position[0],this.position_eye[1]=i-this.view.lookAtManipulator.getLookAtData().position[1],this.position_eye[2]=vo.convertUnits(this.position[2],{zoom:n,meters_per_pixel:er.metersPerPixel(n)}),this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance):"ground"!==this.origin&&"camera"!==this.origin||(this.position_eye=vo.convertUnits(this.position,{zoom:n,meters_per_pixel:er.metersPerPixel(n)}),"ground"===this.origin&&(this.position_eye[2]=this.position_eye[2]-this.view.lookAtManipulator.getLookAtData().distance)),this.position_eye[3]=1}},{key:"setupProgram",value:function(t){Cn(An(e.prototype),"setupProgram",this).call(this,t),t.uniform("4fv","u_".concat(this.name,".position"),this.position_eye),Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT&&t.uniform("1f","u_".concat(this.name,".attenuationExponent"),this.attenuation);var i=this.view.lookAtManipulator.getLookAtData().zoom;Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS&&t.uniform("1f","u_".concat(this.name,".innerRadius"),vo.convertUnits(this.radius[0],{zoom:i,meters_per_pixel:er.metersPerPixel(i)})),Nu.defines.TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS&&t.uniform("1f","u_".concat(this.name,".outerRadius"),vo.convertUnits(this.radius[1],{zoom:i,meters_per_pixel:er.metersPerPixel(i)}))}}],[{key:"inject",value:function(){Nu.addBlock(qu.block,"/*Expected globals:materiallight_accumulator_**/struct PointLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\n};void calculateLight(in PointLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(VP,_normal),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nlight_accumulator_ambient.rgb+=_light.ambient*attenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(0.0,dot(-normalize(_eyeToPoint),reflectVector));pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation;\n#endif\n}")}}]),e}();qu.types.point=Yu;var Ku=function(){En(e,Yu);var t=On(e);function e(i,n){var r;return mn(this,e),(r=t.call(this,i,n)).type="spotlight",r.struct_name="SpotLight",r.direction=r._direction=(n.direction||[0,0,-1]).map(parseFloat),r._initial_direction=[r.direction[0],r.direction[1],r.direction[2]],r.exponent=n.exponent?parseFloat(n.exponent):.2,r.angle=n.angle?parseFloat(n.angle):20,r}return _n(e,[{key:"setupProgram",value:function(t){Cn(An(e.prototype),"setupProgram",this).call(this,t),t.uniform("3fv","u_".concat(this.name,".direction"),this.direction),t.uniform("1f","u_".concat(this.name,".spotCosCutoff"),Math.cos(3.14159*this.angle/180)),t.uniform("1f","u_".concat(this.name,".spotExponent"),this.exponent)}},{key:"update",value:function(){Cn(An(e.prototype),"update",this).call(this),No(this.direction,this._initial_direction,this.view.lookAtManipulator.getTransformationMatrix())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=Vu.normalize(Vu.copy(t))}}],[{key:"inject",value:function(){Nu.addBlock(qu.block,"/*Expected globals:materiallight_accumulator_**/struct SpotLight{vec3 ambient;vec3 diffuse;vec3 specular;vec4 position;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat attenuationExponent;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nfloat innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat outerRadius;\n#endif\nvec3 direction;float spotCosCutoff;float spotExponent;};void calculateLight(in SpotLight _light,in vec3 _eyeToPoint,in vec3 _normal){float dist=length(_light.position.xyz-_eyeToPoint);vec3 VP=(_light.position.xyz-_eyeToPoint)/dist;float nDotVP=clamp(dot(_normal,VP),0.0,1.0);float attenuation=1.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_EXPONENT\nfloat Rin=1.0;float e=_light.attenuationExponent;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#endif\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-(pow(d,e));\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/(pow(d,e)),0.0,1.0);\n#endif\n#else\nfloat Rin=0.0;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_INNER_RADIUS\nRin=_light.innerRadius;\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat Rdiff=_light.outerRadius-Rin;float d=clamp(max(0.0,dist-Rin)/Rdiff,0.0,1.0);attenuation=1.0-d*d;\n#else\nfloat d=max(0.0,dist-Rin)/Rin+1.0;attenuation=clamp(1.0/d,0.0,1.0);\n#endif\n#else\n#ifdef TANGRAM_POINTLIGHT_ATTENUATION_OUTER_RADIUS\nfloat d=clamp(dist/_light.outerRadius,0.0,1.0);attenuation=1.0-d*d;\n#else\nattenuation=1.0;\n#endif\n#endif\n#endif\nfloat spotAttenuation=0.0;float spotDot=clamp(dot(-VP,_light.direction),0.0,1.0);if(spotDot>=_light.spotCosCutoff){spotAttenuation=pow(spotDot,_light.spotExponent);}light_accumulator_ambient.rgb+=_light.ambient*attenuation*spotAttenuation;\n#ifdef TANGRAM_MATERIAL_DIFFUSE\nlight_accumulator_diffuse.rgb+=_light.diffuse*nDotVP*attenuation*spotAttenuation;\n#endif\n#ifdef TANGRAM_MATERIAL_SPECULAR\nfloat pf=0.0;if(nDotVP>0.0){vec3 reflectVector=reflect(-VP,_normal);float eyeDotR=max(dot(-normalize(_eyeToPoint),reflectVector),0.0);pf=pow(eyeDotR,material.shininess);}light_accumulator_specular.rgb+=_light.specular*pf*attenuation*spotAttenuation;\n#endif\n}")}}]),e}();qu.types.spotlight=Ku;var Zu,Xu="#ifdef TANGRAM_FRAGMENT_SHADER\nuniform sampler2D u_raster;uniform vec3 u_raster_offset;\n#define sampleRaster() (texture2D(u_raster, v_modelpos_base_zoom.xy * u_raster_offset.z + u_raster_offset.xy))\n#endif\n",Ju={init:function(t){var e=0<arguments.length&&void 0!==t?t:{},i=e.generation,n=e.styles,r=e.sources,o=void 0===r?{}:r,a=e.introspection,s=e.id,u=void 0!==s?s+"/":"";this.scene_id=s,this.textureManager=Po(s),this.main_thread_target="".concat(u,"Style/").concat(this.name),this.setGeneration(i),this.styles=n,this.sources=o,this.defines=this.hasOwnProperty("defines")&&this.defines||{},this.shaders=this.hasOwnProperty("shaders")&&this.shaders||{},this.introspection=a||!1,this.selection=this.selection||this.introspection||!1,this.compile_setup=!1,this.program=null,this.selection_program=null,this.feature_style={},this.vertex_template=[],this.tile_data={},this.defines.TANGRAM_WORLD_POSITION_WRAP=1e5,this.blend=this.blend||"opaque",this.defines["TANGRAM_BLEND_".concat(this.blend.toUpperCase())]=!0,null==this.blend_order&&(this.blend_order=-1),this.removeShaderBlock("setup"),this.material instanceof Uu||(Uu.isValid(this.material)||(this.material=vo.defaults.material),this.material=new Uu(this.material)),this.material.inject(this),qu.setMode(this.lighting,this),this.setupRasters(),this.initialized=!0},destroy:function(){this.program&&(this.program.destroy(),this.program=null),this.selection_program&&(this.selection_program.destroy(),this.selection_program=null),cr.removeTarget(this.main_thread_target),this.gl=null,this.initialized=!1},reset:function(){},baseStyle:function(){return this.base||this.name},setGeneration:function(t){this.generation=t,hr.is_main&&cr.addTarget(this.main_thread_target,this)},fillVertexTemplate:function(t,e,i,n){var r=n.size,o=void 0===(o=n.offset)?0:o,a=t.index[e];if(void 0!==a)for(var s=0;s<r;++s){var u=i.length>s?i[s]:i;this.vertex_template[a+s+o]=u}else Ar("warn","Style: in style '".concat(this.name,"', no index found in vertex layout for attribute '").concat(e,"'"))},startData:function(t){this.tile_data[t.id]=this.tile_data[t.id]||{meshes:{},uniforms:{},textures:[]}},endData:function(t){var e=this.tile_data[t.id];if(this.tile_data[t.id]=null,e&&0<Object.keys(e.meshes).length){for(var i in e.meshes){var n=e.meshes[i];0!==n.vertex_data.vertex_count?(n.vertex_data.end(),n.vertex_elements=n.vertex_data.element_buffer,n.vertex_data=n.vertex_data.vertex_buffer):delete e.meshes[i]}return t.mesh_data[this.name]=e,this.buildRasterTextures(t,e).then((function(t){return t}))}return Promise.resolve(null)},hasDataForTile:function(t){return null!=this.tile_data[t.id]},getTileMesh:function(t,e){var i=this.tile_data[t.id].meshes;return null==i[e.key]&&(i[e.key]={variant:e,vertex_data:this.vertexLayoutForMeshVariant(e).createVertexData()}),i[e.key]},vertexLayoutForMeshVariant:function(){return this.vertex_layout},default_mesh_variant:{key:0},meshVariantTypeForDraw:function(){return this.default_mesh_variant},addFeature:function(t,e,i){var n=i.tile;this.tile_data[n.id]||this.startData(n);var r,o,a,s=this.parseFeature(t,e,i);s&&(o=(r=this.getTileMesh(n,this.meshVariantTypeForDraw(s))).vertex_data.offset,a=r.vertex_data.vertex_count,0<this.buildGeometry(t.geometry,s,r,i)?t.generation=this.generation:r.vertex_data.vertex_count>a&&(r.vertex_data.vertex_buffer.fill(0,o,r.vertex_data.offset),r.vertex_data.vertex_count=a,r.vertex_data.offset=o))},buildGeometry:function(t,e,i,n){var r;return"Polygon"===t.type?r=this.buildPolygons([t.coordinates],e,i,n):"MultiPolygon"===t.type?r=this.buildPolygons(t.coordinates,e,i,n):"LineString"===t.type?r=this.buildLines([t.coordinates],e,i,n):"MultiLineString"===t.type?r=this.buildLines(t.coordinates,e,i,n):"Point"===t.type?r=this.buildPoints([t.coordinates],e,i,n):"MultiPoint"===t.type&&(r=this.buildPoints(t.coordinates,e,i,n)),r},parseFeature:function(t,e,i){try{var n,r,o,a=this.feature_style;if(a.order=this.parseOrder(e.order,i),null==a.order&&"overlay"!==this.blend){var s="Layer '".concat(e.layers.join(", "),"', draw group '").concat(e.group,"': ");return s+="'order' parameter is required unless blend mode is 'overlay'",null!=e.order&&(s+="; 'order' was set to a dynamic value (e.g. string tied to feature property, ",s+="or JS function), but evaluated to null for one or more features"),void Ar({level:"warn",once:!0},s)}if(!(a=this._parseFeature(t,e,i)))return;return this.selection?a.interactive=vo.evalProperty(this.introspection||e.interactive,i):a.interactive=!1,!0===a.interactive?(r=(n=zu.makeEntry()).color,o=n.key,a.selection_color=r,i.tile.selection_data||(i.tile.selection_data={}),i.tile.selection_data[o]={id:t.id||o,properties:t.properties,source_name:i.source,source_layer:i.layer,layers:i.layers}):a.selection_color=zu.defaultColor,a}catch(e){Ar("error","Style.parseFeature: style parsing error",t,a,e.stack)}},_parseFeature:function(){return this.feature_style},preprocess:function(t,e){if(!t.preprocessed){if(this.draw)for(var i in this.draw){var n=this.draw[i];"object"!==vn(n)||Array.isArray(n)?null==t[i]&&(t[i]=n):t[i]=uu({},n,t[i])}var r=e||"";if(!(t=this._preprocess(t,r)))return;t.preprocessed=!0}return t},_preprocess:function(t){return t},parseOrder:function(t,e){return"number"!=typeof t?vo.calculateOrder(t,e):t},scaleOrder:function(t){return 2*t},parseColor:function(t,e){return t?vo.evalCachedColorProperty(t,e):this.shaders.blocks.color||this.shaders.blocks.filter?vo.defaults.color:void 0},buildPolygons:function(){return 0},buildLines:function(){return 0},buildPoints:function(){return 0},setGL:function(t){this.gl=t,this.max_texture_size=this.textureManager.getMaxTextureSize(this.gl)},makeMesh:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:{},r=this.vertexLayoutForMeshVariant(n.variant);return new Hu(this.gl,t,e,r,this.scene_id,n)},render:function(t){return t.render()},getProgram:function(t){var e=0<arguments.length&&void 0!==t?t:"program";this.compileSetup();var i=this[e];if(i&&!i.error){if(!i.compiled)try{i.compile()}catch(t){Ar("error","Style: error compiling program for style '".concat(this.name,"' (program key '").concat(e,"')"),this,t.stack)}return i}},compileSetup:function(){if(!this.compile_setup){if(!this.gl)throw new Error("style.compile(): skipping for ".concat(this.name," because no GL context"));var t,e=this.buildDefineList();this.selection&&((t=Object.assign({},e)).TANGRAM_FEATURE_SELECTION=!0);var i=this.shaders&&this.shaders.blocks,n=this.shaders&&this.shaders.block_scopes,r=Object.assign({},this.shaders&&this.shaders.uniforms);for(var o in r)null==r[o]&&Ar({level:"warn",once:!0},"Style '".concat(this.name,"' has invalid uniform '").concat(o,"': uniform values must be non-null"));var a=this.shaders&&this.shaders.extensions;"string"==typeof a&&(a=[a]),this.program=new Nu(this.gl,this.vertex_shader_src,this.fragment_shader_src,this.scene_id,{name:this.name,defines:e,uniforms:r,blocks:i,block_scopes:n,extensions:a}),this.selection?this.selection_program=new Nu(this.gl,this.vertex_shader_src,this.crop_by_tile?"\n#pragma tangram: utils\n#ifdef TANGRAM_FEATURE_SELECTION\nuniform float u_meters_per_pixel;varying vec4 v_selection_color;varying vec4 v_local_space_position;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}else{gl_FragColor=v_selection_color;}\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}":"\n#ifdef TANGRAM_FEATURE_SELECTION\nvarying vec4 v_selection_color;\n#endif\nvoid main(void){\n#ifdef TANGRAM_FEATURE_SELECTION\ngl_FragColor=v_selection_color;\n#else\ngl_FragColor=vec4(0.,0.,0.,1.);\n#endif\n}",this.scene_id,{name:this.name+" (selection)",defines:t,uniforms:r,blocks:i,block_scopes:n,extensions:a}):this.selection_program=null,this.compile_setup=!0}},addShaderBlock:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:null;this.shaders.blocks=this.shaders.blocks||{},this.shaders.blocks[t]=this.shaders.blocks[t]||[],this.shaders.blocks[t].push(e),this.shaders.block_scopes=this.shaders.block_scopes||{},this.shaders.block_scopes[t]=this.shaders.block_scopes[t]||[],this.shaders.block_scopes[t].push(n)},removeShaderBlock:function(t){this.shaders.blocks&&(this.shaders.blocks[t]=null)},replaceShaderBlock:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:null;this.removeShaderBlock(t),this.addShaderBlock(t,e,n)},buildDefineList:function(){var t={};if(null!=this.defines)for(var e in this.defines)t[e]=this.defines[e];if(null!=this.shaders&&null!=this.shaders.defines)for(e in this.shaders.defines)t[e]=this.shaders.defines[e];return t},hasRasters:function(){return-1<["color","normal","custom"].indexOf(this.raster)},setupRasters:function(){if(!hr.is_main)return!1;if(!this.hasRasters())return!1;"color"===this.raster?this.defines.TANGRAM_RASTER_TEXTURE_COLOR=!0:"normal"===this.raster&&(this.defines.TANGRAM_RASTER_TEXTURE_NORMAL=!0);var t=!1;for(var e in this.sources)if(this.sources[e]instanceof Yo){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",Xu,"Raster"),!0)},buildRasterTextures:function(t,e){var i=this;if(!this.hasRasters())return Promise.resolve(e);var n={};return t.rasters.map((function(t){return i.sources[t]})).filter((function(t){return t})).forEach((function(e,i){var r;e instanceof Yo&&(r=e.tileTexture(t),n[r.url]=r)})),0===Object.keys(n).length?Promise.resolve(e):cr.postMessage(this.main_thread_target+".loadTextures",n).then((function(i){if(!i||i.length<1)return Ar("trace","Missing texture info for tile ".concat(t.key)),null;if(i.some((function(t){return!t.loaded})))return null;e.uniforms=e.uniforms||{},e.textures=e.textures||[];var r,o,a=i[0].name,s=n[a].coords;return e.uniforms.u_raster=a,e.textures.push(a),t.coords.z>s.z?(r=t.coords.z-s.z,o=Math.pow(2,r),e.uniforms.u_raster_offset=[(t.coords.x%o+o)%o/o,(o-1-t.coords.y%o)/o,1/o]):e.uniforms.u_raster_offset=[0,0,1],e}))},loadTextures:function(t){var e=this;return this.textureManager.createFromObject(this.gl,t).then((function(){return Promise.all(Object.keys(t).map((function(t){return e.textureManager.textures[t]&&e.textureManager.textures[t].load()})).filter((function(t){return t})))})).then((function(t){return t.forEach((function(t){return t.retain()})),t.map((function(t){return{name:t.name,width:t.width,height:t.height,loaded:t.loaded}}))}))},setup:function(){this.setUniforms(),this.material.setupProgram(Nu.current)},setUniforms:function(){var t=Nu.current;t&&t.setUniforms(this.shaders&&this.shaders.uniforms,!0)},render_states:{opaque:{depth_test:!0,depth_write:!0},translucent:{depth_test:!0,depth_write:!0},add:{depth_test:!0,depth_write:!1},multiply:{depth_test:!0,depth_write:!1},inlay:{depth_test:!0,depth_write:!1},overlay:{depth_test:!1,depth_write:!1}},default_blend_orders:{opaque:0,add:1,multiply:2,inlay:3,translucent:4,overlay:5},sortByBlendOrderWithinLayers:function(t){var e=[],i={};for(var n in t.forEach((function(t){var e=parseInt(t.name,10)||0;i[e]||(i[e]=[]),i[e].push(t)})),i)e.push.apply(e,Rn(i[n].sort(Ju.blendOrderSort)));return e},blendOrderSort:function(t,e){return"opaque"===t.blend||"opaque"===e.blend?"opaque"===t.blend&&"opaque"===e.blend?t.name<e.name?-1:1:"opaque"===t.blend?-1:1:t.blend_order<e.blend_order||!(t.blend_order>e.blend_order)&&(Ju.default_blend_orders[t.blend]<Ju.default_blend_orders[e.blend]||!(Ju.default_blend_orders[t.blend]>Ju.default_blend_orders[e.blend])&&t.name<e.name)?-1:1}},$u=Zu={};Zu.BYTE=5120,Zu.UNSIGNED_BYTE=5121,Zu.SHORT=5122,Zu.UNSIGNED_SHORT=5123,Zu.INT=5124,Zu.UNSIGNED_INT=5125,Zu.FLOAT=5126;var Qu,tl=Math.pow(2,16)-1,el=!1,il=function(){function t(e){mn(this,t),this.size_=e||1024,this.position_=0,this.ArrayType_=Uint16Array,this.buffer_=new this.ArrayType_(this.size_),this.overflows_=!1}return _n(t,[{key:"push",value:function(t){if(!this.overflows_||el){if(tl<t){if(this.overflows_=!0,!el)return;this.ArrayType_===Uint16Array&&(this.ArrayType_=Uint32Array,this.buffer_=new this.ArrayType_(this.buffer_))}this.position_===this.size_&&this.expand_(),this.buffer_[this.position_]=t,this.position_+=1}}},{key:"end",value:function(){if(0===this.position_)return!1;var t=this.buffer_,e=this.position_;return this.buffer_=new this.ArrayType_(this.size_),this.position_=0,this.overflows_=!1,t.subarray(0,e)}},{key:"expand_",value:function(){this.size_=this.size_<<1;var t=new this.ArrayType_(this.size_);t.set(this.buffer_),this.buffer_=t}}]),t}();il.setElementIndexUint=function(t){el=t};var nl=(wn(Qu={},$u.FLOAT,Float32Array),wn(Qu,$u.BYTE,Int8Array),wn(Qu,$u.UNSIGNED_BYTE,Uint8Array),wn(Qu,$u.INT,Int32Array),wn(Qu,$u.UNSIGNED_INT,Uint32Array),wn(Qu,$u.SHORT,Int16Array),wn(Qu,$u.UNSIGNED_SHORT,Uint16Array),Qu),rl=function(){function t(e){var i=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).prealloc,n=void 0===i?500:i;mn(this,t),this.vertex_layout=e,this.vertex_elements=new il,this.stride=this.vertex_layout.stride,0<t.array_pool.length?(this.vertex_buffer=t.array_pool.pop(),this.byte_length=this.vertex_buffer.byteLength,this.size=Math.floor(this.byte_length/this.stride),Ar("trace","VertexData: reused buffer of bytes ".concat(this.byte_length,", ").concat(this.size," vertices"))):(this.size=n,this.byte_length=this.stride*this.size,this.vertex_buffer=new Uint8Array(this.byte_length)),this.offset=0,this.vertex_count=0,this.realloc_count=0,this.setBufferViews(),this.setAddVertexFunction()}return _n(t,[{key:"setBufferViews",value:function(){var t=this;this.views={},this.views[$u.UNSIGNED_BYTE]=this.vertex_buffer,this.vertex_layout.dynamic_attribs.forEach((function(e){var i;null==t.views[e.type]&&(i=nl[e.type],t.views[e.type]=new i(t.vertex_buffer.buffer))}))}},{key:"checkBufferSize",value:function(){var e;this.offset+this.stride>this.byte_length&&(this.size=Math.floor(1.5*this.size),this.size-=this.size%4,this.byte_length=this.stride*this.size,(e=new Uint8Array(this.byte_length)).set(this.vertex_buffer),t.array_pool.push(this.vertex_buffer),this.vertex_buffer=e,this.setBufferViews(),this.realloc_count++)}},{key:"setAddVertexFunction",value:function(){this.vertexLayoutAddVertex=this.vertex_layout.getAddVertexFunction()}},{key:"addVertex",value:function(t){this.checkBufferSize(),this.vertexLayoutAddVertex(t,this.views,this.offset),this.offset+=this.stride,this.vertex_count++}},{key:"end",value:function(){return this.vertex_buffer=this.vertex_buffer.subarray(0,this.offset),this.element_buffer=this.vertex_elements.end(),Ar("trace","VertexData: ".concat(this.size," vertices total, realloc count ").concat(this.realloc_count)),this}}]),t}();rl.array_pool=[];var ol=function(){function t(e){mn(this,t),this.attribs=e,this.dynamic_attribs=this.attribs.filter((function(t){return!t.static})),this.components=[],this.index={},this.offset={};for(var i=this.stride=0,n=0,r=0;r<this.attribs.length;r++){var o=this.attribs[r];if(null==o.static){o.offset=this.stride,o.byte_size=o.size;var a=0;switch(o.type){case $u.FLOAT:case $u.INT:case $u.UNSIGNED_INT:o.byte_size*=4,a=2;break;case $u.SHORT:case $u.UNSIGNED_SHORT:o.byte_size*=2,a=1}3&o.byte_size&&(o.byte_size+=4-(3&o.byte_size)),this.stride+=o.byte_size;for(var s=o.offset>>a,u=0;u<o.size;u++)this.components.push({type:o.type,shift:a,offset:s++,index:n++});this.index[o.name]=i,i+=o.size,this.offset[o.name]=o.offset}else o.static=Array.isArray(o.static)?o.static:[o.static],o.method="vertexAttrib".concat(o.static.length,"fv")}}return _n(t,[{key:"enable",value:function(e,i,n){for(var r,o,a=0;a<this.attribs.length;a++)r=this.attribs[a],-1!==(o=i.attribute(r.name).location)&&(null==r.static?(t.enabled_attribs[o]&&!n||e.enableVertexAttribArray(o),e.vertexAttribPointer(o,r.size,r.type,r.normalized,this.stride,r.offset),t.enabled_attribs[o]=i):e[r.method]instanceof Function&&(e.enableVertexAttribArray(o),e[r.method](o,r.static),e.disableVertexAttribArray(o),delete t.enabled_attribs[o]));for(o in t.enabled_attribs)this.disableUnusedAttribute(e,o,i)}},{key:"disableUnusedAttribute",value:function(e,i,n){t.enabled_attribs[i]!==n&&(e.disableVertexAttribArray(i),delete t.enabled_attribs[i])}},{key:"createVertexData",value:function(){return new rl(this)}},{key:"getAddVertexFunction",value:function(){return null==this.addVertex&&this.createAddVertexFunction(),this.addVertex}},{key:"createAddVertexFunction",value:function(){var e=Cu(JSON.stringify(this.attribs));if(null==t.add_vertex_funcs[e]){var i,n=["var t, o;"],r=Rn(this.components);r.sort((function(t,e){return t.type!==e.type?t.type-e.type:t.index-e.index}));for(var o=0;o<r.length;o++){var a=r[o];i!==a.type&&(n.push("t = vs[".concat(a.type,"];")),n.push("o = off".concat(a.shift?" >> "+a.shift:"",";")),i=a.type),n.push("t[o + ".concat(a.offset,"] = v[").concat(a.index,"];"))}n=n.join("\n");var s=new Function("v","vs","off",n);t.add_vertex_funcs[e]=s}this.addVertex=t.add_vertex_funcs[e]}}]),t}();ol.enabled_attribs={},ol.add_vertex_funcs={};var al=[{x:0,y:0},{x:er.tile_scale,y:-er.tile_scale}],sl=[0,0,1,1];function ul(t,e,i){var n=al[0],r=al[1];return t[0]<=n.x+i&&e[0]<=n.x+i||t[0]>=r.x-i&&e[0]>=r.x-i||t[1]>=n.y-i&&e[1]>=n.y-i||t[1]<=r.y+i&&e[1]<=r.y+i}function ll(t,e){e=e||0;var i=al[0],n=al[1];return t[0]<=i.x+e||t[0]>=n.x-e||t[1]>=i.y-e||t[1]<=n.y+e}var hl=cl;function cl(t,e,i){i=i||2;var n,r,o,a,s,u,l,h=e&&e.length,c=h?e[0]*i:t.length,f=fl(t,0,c,i,!0),p=[];if(!f)return p;if(h&&(f=function(t,e,i,n){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=fl(t,e[r]*n,r<o-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(function(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i}(a));for(s.sort(gl),r=0;r<s.length;r++)!function(t,e){var i;(e=function(t,e){var i,n=e,r=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&a<s){if((a=s)===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===a)return i.prev;var u,l=i,h=i.x,c=i.y,f=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=h&&vl(o<c?r:a,o,h,c,o<c?a:r,o,n.x,n.y)&&((u=Math.abs(o-n.y)/(r-n.x))<f||u===f&&n.x>i.x)&&wl(n,t)&&(i=n,f=u),n=n.next;return i}(t,e))&&pl(i=xl(e,t),i.next)}(s[r],i),i=pl(i,i.next);return i}(t,e,f,i)),t.length>80*i){n=o=t[0],r=a=t[1];for(var d=i;d<c;d+=i)(s=t[d])<n&&(n=s),(u=t[d+1])<r&&(r=u),o<s&&(o=s),a<u&&(a=u);l=Math.max(o-n,a-r)}return dl(f,p,i,n,r,l),p}function fl(t,e,i,n,r){var o,a;if(r===0<kl(t,e,i,n))for(o=e;o<i;o+=n)a=Ml(o,t[o],t[o+1],a);else for(o=i-n;e<=o;o-=n)a=Ml(o,t[o],t[o+1],a);return a&&bl(a,a.next)&&(El(a),a=a.next),a}function pl(t,e){if(!t)return t;e=e||t;var i,n=t;do{if(i=!1,n.steiner||!bl(n,n.next)&&0!==ml(n.prev,n,n.next))n=n.next;else{if(El(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function dl(t,e,i,n,r,o,a){if(t){!a&&o&&function(t,e,i,n){for(var r=t;null===r.z&&(r.z=yl(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,a,s,u,l=1;do{for(i=t,o=t=null,a=0;i;){for(a++,n=i,e=s=0;e<l&&(s++,n=n.nextZ);e++);for(u=l;0<s||0<u&&n;)0!==s&&(0===u||!n||i.z<=n.z)?(i=(r=i).nextZ,s--):(n=(r=n).nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,l*=2}while(1<a)}(r)}(t,n,r,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?function(t,e,i,n){var r=t.prev,o=t,a=t.next;if(0<=ml(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,u=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,l=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,h=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,c=yl(s,u,e,i,n),f=yl(l,h,e,i,n),p=t.nextZ;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&vl(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ml(p.prev,p,p.next))return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&vl(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&0<=ml(p.prev,p,p.next))return!1;p=p.prevZ}return!0}(t,n,r,o):function(t){var e=t.prev,i=t,n=t.next;if(0<=ml(e,i,n))return!1;for(var r=t.next.next;r!==t.prev;){if(vl(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=ml(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(s.i/i),e.push(t.i/i),e.push(u.i/i),El(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?dl(t=function(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!bl(r,o)&&_l(r,n,n.next,o)&&wl(r,o)&&wl(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),El(n),El(n.next),n=t=o),n=n.next}while(n!==t);return n}(t,e,i),e,i,n,r,o,2):2===a&&function(t,e,i,n,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_l(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&wl(t,e)&&wl(e,t)&&function(t,e){for(var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==t;);return n}(t,e)}(a,s)){var u=xl(a,s);return a=pl(a,a.next),u=pl(u,u.next),dl(a,e,i,n,r,o),dl(u,e,i,n,r,o)}s=s.next}a=a.next}while(a!==t)}(t,e,i,n,r,o):dl(pl(t),e,i,n,r,o,1);break}}}function gl(t,e){return t.x-e.x}function yl(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vl(t,e,i,n,r,o,a,s){return 0<=(r-a)*(e-s)-(t-a)*(o-s)&&0<=(t-a)*(n-s)-(i-a)*(e-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)}function ml(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function bl(t,e){return t.x===e.x&&t.y===e.y}function _l(t,e,i,n){return bl(t,e)&&bl(i,n)||bl(t,n)&&bl(i,e)||0<ml(t,e,i)!=0<ml(t,e,n)&&0<ml(i,n,t)!=0<ml(i,n,e)}function wl(t,e){return ml(t.prev,t,t.next)<0?0<=ml(t,e,t.next)&&0<=ml(t,t.prev,e):ml(t,e,t.prev)<0||ml(t,t.next,e)<0}function xl(t,e){var i=new Al(t.i,t.x,t.y),n=new Al(e.i,e.x,e.y),r=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function Ml(t,e,i,n){var r=new Al(t,e,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function El(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Al(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function kl(t,e,i,n){for(var r=0,o=e,a=i-n;o<i;o+=n)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}cl.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,a=Math.abs(kl(t,0,o,i));if(r)for(var s=0,u=e.length;s<u;s++){var l=e[s]*i,h=s<u-1?e[s+1]*i:t.length;a-=Math.abs(kl(t,l,h,i))}var c=0;for(s=0;s<n.length;s+=3){var f=n[s]*i,p=n[s+1]*i,d=n[s+2]*i;c+=Math.abs((t[f]-t[d])*(t[1+p]-t[1+f])-(t[f]-t[p])*(t[1+d]-t[1+f]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},cl.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[r][o][a]);0<r&&(n+=t[r-1].length,i.holes.push(n))}return i};var Tl=[0,0,1];function Sl(t,e,i,n){var r,o,a,s,u,l=n.texcoord_index,h=n.texcoord_scale,c=n.texcoord_normalize,f=e.vertex_elements;l&&(c=c||1,o=(r=Pn(h||sl,4))[0],a=r[1],s=r[2],u=r[3]);for(var p,d=0,g=t.length,y=0;y<g;y++){var v,m,b,_,w,x=e.vertex_count,M=t[y];l&&(m=(v=Pn(er.findBoundingBox(M),4))[0],b=v[1],_=(s-o)/(v[2]-m),w=(u-a)/(v[3]-b));for(var E=0;E<M.length;E++)for(var A=M[E],k=0;k<A.length;k++){var T=A[k];i[0]=T[0],i[1]=T[1],l&&(i[l+0]=((T[0]-m)*_+o)*c,i[l+1]=((T[1]-b)*w+a)*c),e.addVertex(i)}for(var S=(p=hl.flatten(M),hl(p.vertices,p.holes,p.dimensions)),I=0;I<S.length;I++)f.push(x+S[I]);d+=S.length/3}return d}var Il="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;attribute vec4 a_position;attribute vec4 a_color;\n#ifdef TANGRAM_NORMAL_ATTRIBUTE\nattribute vec3 a_normal;\n#define TANGRAM_NORMAL a_normal\n#else\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nattribute vec2 a_extrude;attribute vec2 a_offset;attribute vec2 a_scaling;uniform float u_v_scale_adjust;\n#endif\nvarying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nattribute vec2 a_texcoord;varying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvoid main(){\n#pragma tangram: setup\n#ifdef TANGRAM_TEXTURE_COORDS\nv_texcoord=a_texcoord;\n#ifdef TANGRAM_EXTRUDE_LINES\nv_texcoord.y*=u_v_scale_adjust;\n#endif\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nvec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.);\n#ifdef TANGRAM_EXTRUDE_LINES\nvec2 extrude=a_extrude.xy;vec2 offset=a_offset.xy;float dz=clamp(u_map_position.z-u_tile_origin.z,0.,4.);dz+=step(1.,dz)*(1.-dz)+mix(0.,2.,clamp((dz-2.)/2.,0.,1.));float mdz=(dz-0.5)*2.;extrude-=extrude*UNPACK_SCALING(a_scaling.x)*mdz;float dwdz=UNPACK_SCALING(a_scaling.y);float sdwdz=sign(step(0.,dwdz)-0.5);offset-=offset*abs(dwdz)*((1.-step(0.,sdwdz))-(dz*-sdwdz));float ssz=exp2(-dz-(u_tile_origin.z-u_tile_origin.w));extrude*=ssz;offset*=ssz;\n#ifdef TANGRAM_BLOCK_WIDTH\nfloat width=1.;\n#pragma tangram: width\nextrude*=width;\n#endif\nposition.xy+=extrude+offset;\n#endif\nv_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);v_color=a_color;\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);applyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#if defined(SNAP_TO_PIXEL_GRID)\nsnapToPixelGrid(position);\n#endif\ngl_Position=position;}",Ll="uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_EXTRUDE_LINES\nuniform bool u_has_line_texture;uniform sampler2D u_texture;uniform float u_texture_ratio;uniform vec4 u_dash_background_color;\n#endif\n#define TANGRAM_NORMAL v_normal\n#if defined(TANGRAM_TEXTURE_COORDS) || defined(TANGRAM_EXTRUDE_LINES)\nvarying vec2 v_texcoord;\n#endif\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#pragma tangram: utils\nvoid main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_COLOR\ncolor*=sampleRaster();\n#endif\n#ifdef TANGRAM_EXTRUDE_LINES\nif(u_has_line_texture){vec2 _line_st=vec2(v_texcoord.x,fract(v_texcoord.y/u_texture_ratio));vec4 _line_color=texture2D(u_texture,_line_st);if(_line_color.a<TANGRAM_ALPHA_TEST){\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY)\nif(u_dash_background_color.a==0.){discard;}color=u_dash_background_color;\n#else\ncolor=vec4(u_dash_background_color.rgb,color.a*step(TANGRAM_EPSILON,u_dash_background_color.a));\n#endif\n}else{color*=_line_color;}}\n#endif\n#ifdef TANGRAM_RASTER_TEXTURE_NORMAL\nnormal=normalize(sampleRaster().rgb*2.-1.);\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\ngl_FragColor=color;}",Ol=Object.create(Ju);Object.assign(Ol,{name:"polygons",built_in:!0,vertex_shader_src:Il,fragment_shader_src:Ll,selection:!0,init:function(){Ju.init.apply(this,arguments),this.defines.TANGRAM_NORMAL_ATTRIBUTE=!0,this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.texcoords&&(this.defines.TANGRAM_TEXTURE_COORDS=!0)},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:$u.SHORT,normalized:!1},{name:"a_normal",size:3,type:$u.BYTE,normalized:!0},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0}],this.texcoords&&t.push({name:"a_texcoord",size:2,type:$u.UNSIGNED_SHORT,normalized:!0}),this.vertex_layout=new ol(t)),this.vertex_layout},_parseFeature:function(t,e,i){var n=this.feature_style;return n.color=this.parseColor(e.color,i),n.color?(n.z=e.z&&vo.evalCachedDistanceProperty(e.z,i)||vo.defaults.z,n.z*=er.height_scale,n.extrude=vo.evalProperty(e.extrude,i),n.extrude&&(!0===n.extrude?(n.height=void 0!==t.properties.height?t.properties.height:vo.defaults.height,n.min_height=void 0!==t.properties.min_height?t.properties.min_height:vo.defaults.min_height):"number"==typeof n.extrude?(n.height=n.extrude,n.min_height=0):Array.isArray(n.extrude)&&(n.min_height=n.extrude[0],n.height=n.extrude[1]),n.height*=er.height_scale,n.min_height*=er.height_scale),n.tile_edges=e.tile_edges,n):null},_preprocess:function(t){return t.color=vo.createColorPropertyCache(t.color),t.z=vo.createPropertyCache(t.z,vo.parseUnits),t},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=127,this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.texcoords&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildPolygons:function(t,e,i,n){var r=this.makeVertexTemplate(e),o={texcoord_index:this.vertex_layout.index.a_texcoord,texcoord_normalize:65535,remove_tile_edges:!e.tile_edges,tile_edge_tolerance:er.tile_scale*n.tile.pad_scale*4,winding:n.winding};return e.extrude&&e.height?function(t,e,i,n,r,o,a,s,u){var l=u.remove_tile_edges,h=u.tile_edge_tolerance,c=u.texcoord_index,f=u.texcoord_scale,p=u.texcoord_normalize,d=u.winding,g=e+(n||0),y=e+i;o[2]=y;var v,m,b,_,w,x,M=Sl(t,r,o,{texcoord_index:c,texcoord_scale:f,texcoord_normalize:p}),E=r.vertex_elements,A=r.vertex_count;c&&(p=p||1,m=(v=Pn(f||sl,4))[0],b=v[1],_=v[2],x=[[m,w=v[3]],[m,b],[_,b],[_,w]]);for(var k=t.length,T=0;T<k;T++)for(var S=t[T],I=0;I<S.length;I++)for(var L=S[I],O=0;O<L.length-1;O++)if(!l||!ul(L[O],L[O+1],h)){var C,P=void 0,R=[[L[C="CCW"===d?(P=O)+1:(P=O+1,O)][0],L[C][1],y],[L[C][0],L[C][1],g],[L[P][0],L[P][1],g],[L[P][0],L[P][1],y]],j=Vu.normalize([L[C][0]-L[P][0],L[C][1]-L[P][1],0]),N=Vu.cross(Tl,j);o[a+0]=127*N[0],o[a+1]=127*N[1],o[a+2]=127*N[2];for(var D=0;D<R.length;D++)o[0]=R[D][0],o[1]=R[D][1],o[2]=R[D][2],c&&(o[c+0]=x[D][0]*p,o[c+1]=x[D][1]*p),r.addVertex(o);E.push(A+0),E.push(A+1),E.push(A+2),E.push(A+2),E.push(A+3),E.push(A+0),A+=4,M+=2}return M}(t,e.z,e.height,e.min_height,i.vertex_data,r,this.vertex_layout.index.a_normal,0,o):Sl(t,i.vertex_data,r,o)}});var Cl=[0,0],Pl={butt:0,square:1,round:2},Rl={miter:0,bevel:1,round:2},jl=er.tile_scale,Nl=[0,0],Dl=[1,0],zl=[.5,0];function Bl(t,e){if(!(t.length<2)){var i,n,r=e.join_type,o=e.cap_type,a=e.closed_polygon,s=e.remove_tile_edges,u=e.tile_edge_tolerance,l=e.v_scale,h=e.miter_len_sq,c=e.crop_by_tile,f=null!=e.texcoord_index,p=0;if(a&&r===Rl.miter){var d=function(t){if(ll(t[0]))return 0;for(var e=0;e<t.length;e++)if(ll(t[t.length-1-e]))return t.length-1-e;return 0}(t);if(0!==d){var g=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=(n+e)%t.length;0!=r&&i.push(t[r])}return i.push(i[0]),i}(t,d);return e.extra_lines=e.extra_lines||[],void e.extra_lines.push(g)}}var y=0,v=t.length-1,m=0;for(M=t[y],E=t[y+1];Vu.isEqual(M,E);)if(M=E,E=t[1+ ++y],m++,y===t.length-1)return;for(;Vu.isEqual(t[v],t[v-1]);)if(m++,0==--v)return;if(!(t.length<2+m))if(n=Vu.normalize(Vu.perp(M,E)),s&&ul(M,E,u)){var b=Hl(t,y,u);b&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(b))}else{a?function(t,e,i,n,r){void 0===n||ll(t)&&!r.crop_by_tile?(Gl(t,i,i,1,0,r,1),Gl(t,i,i,0,0,r,-1)):n===Rl.miter?Ul(0,t,e,i,r.miter_len_sq,!0,r):Vl(n,0,t,e,i,!0,r)}(M,i=Vu.normalize(Vu.perp(t[v-1],M)),n,r,e):(!c&&ll(M)||(Kl(M,p,n,o,!0,e),f&&o!==Pl.butt&&(p+=.5*l*e.texcoord_width)),Gl(M,n,n,1,p,e,1),Gl(M,n,n,0,p,e,-1)),f&&(p+=l*Vu.length(Vu.sub(E,M)));for(var _=y+1;_<v;_++){var w=_,x=_+1,M=t[w],E=t[x];if(!Vu.isEqual(M,E)){if(s&&ul(M,E,u)){Gl(M,n,n,1,p,e,1),Gl(M,n,n,0,p,e,-1),ql(1,e);var A=Hl(t,w+1,u);return void(A&&(e.extra_lines=e.extra_lines||[],e.extra_lines.push(A)))}i=n,n=Vu.normalize(Vu.perp(M,E)),r===Rl.miter?Ul(p,M,i,n,h,!1,e):Vl(r,p,M,i,n,!1,e),f&&(p+=l*Vu.length(Vu.sub(E,M)))}}M=E,i=n,a?function(t,e,i,n,r,o){var a;ll(t)&&!o.crop_by_tile?(Gl(t,e,e,1,r,o,1),Gl(t,e,e,0,r,o,-1)):(a=Fl(e,i),n===Rl.miter&&Vu.lengthSq(a)>o.miter_len_sq&&(n=Rl.bevel),n===Rl.miter?(Gl(t,a,e,1,r,o,1),Gl(t,a,e,0,r,o,-1)):(Gl(t,e,e,1,r,o,1),Gl(t,e,e,0,r,o,-1))),ql(1,o)}(M,i,n=Vu.normalize(Vu.perp(M,t[1])),r,p,e):(Gl(M,i,n,1,p,e,1),Gl(M,i,n,0,p,e,-1),ql(1,e),!c&&ll(M)||Kl(M,p,i,o,!1,e))}}}function Hl(t,e,i){for(var n=e;t[n+1]&&ul(t[n],t[n+1],i);)n++;return 2<=t.length-n&&t.slice(n)}function Fl(t,e){var i=Vu.normalize(Vu.add(t,e)),n=2/(1+Math.abs(Vu.dot(t,i)));return Vu.mult(i,n*n)}function Ul(t,e,i,n,r,o,a){var s=Fl(i,n);Vu.lengthSq(s)>r?Vl(Rl.bevel,t,e,i,n,o,a):(Gl(e,s,s,1,t,a,1),Gl(e,s,s,0,t,a,-1),o||ql(1,a))}function Vl(t,e,i,n,r,o,a){var s=Fl(n,r),u=0<r[0]*n[1]-r[1]*n[0];null!=a.texcoord_index&&(Nl[1]=e,Dl[1]=e),u?(Gl(i,s,s,1,e,a,1),Gl(i,n,s,0,e,a,-1),o||ql(1,a),Yl(i,Vu.neg(n),s,Vu.neg(r),s,Nl,Dl,Nl,!1,t===Rl.bevel,a),Gl(i,s,s,1,e,a,1),Gl(i,r,s,0,e,a,-1)):(Gl(i,n,s,1,e,a,1),Gl(i,s,s,0,e,a,-1),o||ql(1,a),Yl(i,n,Vu.neg(s),r,s,Dl,Nl,Dl,!1,t===Rl.bevel,a),Gl(i,r,s,1,e,a,1),Gl(i,s,s,0,e,a,-1))}function ql(t,e){for(var i=e.vertex_data.vertex_elements,n=e.vertex_data.vertex_count-2*t-2,r=0;r<t;r++)i.push(n+2*r+2),i.push(n+2*r+1),i.push(n+2*r),i.push(n+2*r+2),i.push(n+2*r+3),i.push(n+2*r+1),e.geom_count+=2}function Gl(t,e,i,n,r,o,a){var s=o.vertex_template,u=o.vertex_data;s[0]=t[0],s[1]=t[1];var l=o.half_width*a;s[o.extrude_index+0]=e[0]*l,s[o.extrude_index+1]=e[1]*l,o.offset&&(s[o.offset_index+0]=i[0]*o.offset,s[o.offset_index+1]=i[1]*o.offset),null!=o.texcoord_index&&(s[o.texcoord_index+0]=n*o.texcoord_normalize,s[o.texcoord_index+1]=r*o.texcoord_normalize),u.addVertex(s)}var Wl=[0,0];function Yl(t,e,i,n,r,o,a,s,u,l,h){for(var c=e[0]*n[1]-e[1]*n[0],f=Vu.dot(e,n),p=Math.atan2(c,f);p>=Math.PI;)p-=2*Math.PI;if(l)d=1;else{var d=function(t,e){t<0&&(t=-t);var i=e>10?Math.log2(e/5):1;return Math.ceil(t/Math.PI*i)}(p,h.half_width);if(d<1)return}var g=h.vertex_data.vertex_count,y=h.vertex_data.vertex_elements;Gl(t,i,r,a[0],a[1],h,1),Gl(t,e,r,o[0],o[1],h,1);var v,m,b=e,_=null!=h.texcoord_index;_&&(u?v=Vu.sub(o,a):(Wl=Vu.copy(o),m=Vu.div(Vu.sub(s,o),d)));for(var w,x=p/d,M=p<0?-1:1,E=0<c?(w=2,1):(w=1,2),A=0;A<d;A++)0===A&&p<0&&(b=Vu.neg(b)),b=Vu.rot(b,x),_&&(u?(v=Vu.rot(v,x),Wl[0]=v[0]+a[0],Wl[1]=v[1]*h.texcoord_width*h.v_scale+a[1]):Wl=Vu.add(Wl,m)),Gl(t,b,r,Wl[0],Wl[1],h,M),y.push(g+A+w),y.push(g),y.push(g+A+E)}function Kl(t,e,i,n,r,o){var a,s=Vu.neg(i),u=null!=o.texcoord_index;switch(n){case Pl.square:r?(a=[i[1],-i[0]],Gl(t,Vu.add(i,a),i,1,e,o,1),Gl(t,Vu.add(s,a),i,0,e,o,1),u&&(e+=.5*o.texcoord_width*o.v_scale),Gl(t,i,i,1,e,o,1),Gl(t,s,i,0,e,o,1)):(a=[-i[1],i[0]],Gl(t,i,i,1,e,o,1),Gl(t,s,i,0,e,o,1),u&&(e+=.5*o.texcoord_width*o.v_scale),Gl(t,Vu.add(i,a),i,1,e,o,1),Gl(t,Vu.add(s,a),i,0,e,o,1)),ql(1,o);break;case Pl.round:var l,h,c=Nl,f=Dl,p=zl;r?(l=i,h=s,u&&(e+=.5*o.texcoord_width*o.v_scale,c=Dl,f=Nl,p=zl)):(l=s,h=i),u&&(Nl[1]=e,Dl[1]=e,zl[1]=e),Yl(t,l,Cl,h,i,c,p,f,!0,!1,o);break;case Pl.butt:return}}var Zl=[255,255,255,255],Xl=[0,0,0,0],Jl=Object.create(Ju);function $l(t,e,i,n,r,o){for(var a={closed:o,vertex_data:i,vertex_template:n,half_width:e/2,vertex_layout_index:r,geom_count:0},s=0,u=t.length;s<u;s++)!function(t,e){if(!(t.length<2)){for(var i=[t[0]],n=0,r=[],o=[],a=1,s=t.length;a<s;a++){var u,l;t[a][0]===t[a-1][0]&&t[a][1]===t[a-1][1]||(i.push(t[a]),u=Vu.sub(t[a],t[a-1]),l=Vu.length(u),r.push(u),o.push([n,n+l]),n+=l)}if(!(i.length<2)){var h=0,c=r[r.length-1],f=r[0],p=r[1],d=[0,0];2<i.length&&(e.closed&&(d[0]=Vu.signedAngleBetween(c,f)),d[1]=Vu.signedAngleBetween(f,p));var g=i[0],y=o[0];e.closed?(eh(g,e,h++,y,n,d,[c,f]),eh(g,e,h++,y,n,d,[c,f])):(eh(g,e,h++,y,n,d,[f,f]),eh(g,e,h++,y,n,d,[f,f]));for(var v=1,m=i.length-1;v<m;v++)g=i[v],c=r[v-1],f=r[v],p=r[v+1],eh(g,e,h++,y=o[v-1],n,d,[c,f]),eh(g,e,h++,y,n,d,[c,f]),Ql(e),y=o[v],d[0]=d[1],d[1]=v!==m-1?Vu.signedAngleBetween(f,p):e.closed?Vu.signedAngleBetween(f,r[0]):0,eh(g,e,h++,y,n,d,[c,f]),eh(g,e,h++,y,n,d,[c,f]);g=i[i.length-1],y=o[o.length-1],f=r[r.length-1],e.closed?(eh(g,e,h++,y,n,d,[f,r[0]]),eh(g,e,h++,y,n,d,[f,r[0]])):(eh(g,e,h++,y,n,d,[f,f]),eh(g,e,h++,y,n,d,[f,f])),Ql(e)}}}(t[s],a);return a.geom_count}function Ql(t){var e=t.vertex_data.vertex_elements,i=t.vertex_data.vertex_count-4;e.push(2+i),e.push(1+i),e.push(i),e.push(2+i),e.push(3+i),e.push(1+i),t.geom_count+=2}Jl.vertex_layouts=[[],[]],Jl.variants={},Jl.dash_textures={},Object.assign(Jl,{name:"lines",built_in:!0,vertex_shader_src:Il,fragment_shader_src:Ll,selection:!0,init:function(){Ju.init.apply(this,arguments),this.styles=this.styles||{},this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_EXTRUDE_LINES=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_TEXTURE_COORDS=!0,this.outline_feature_style={},this.inline_feature_style=this.feature_style},calcDistance:function(t,e){return t&&vo.evalCachedDistanceProperty(t,e)||0},calcDistanceNextZoom:function(t,e){e.zoom++;var i=this.calcDistance(t,e);return e.zoom--,i},calcWidth:function(t,e,i){var n=this.calcDistance(t.width,i);if(!(n<0)){var r,o=t.next_width?this.calcDistanceNextZoom(t.next_width,i):n/2;return!(0===n&&0===o||o<0||(e.width_unscaled=n,e.next_width_unscaled=o,t.next_width?(r=.5*(n+(o*=2)),e.width=r*i.units_per_meter_overzoom,e.width_scale=1-o/r):(e.width=n*i.units_per_meter_overzoom,e.width_scale=0),t.texcoords&&(t.inline_texcoord_width?e.texcoord_width=t.inline_texcoord_width:e.texcoord_width=(e.width_unscaled||e.next_width_unscaled)*i.units_per_meter_overzoom/i.tile.overzoom2),0))}},calcOffset:function(t,e,i){var n,r;t.offset_precalc?(e.offset=t.offset_precalc,e.offset_scale=t.offset_scale_precalc):t.offset?(n=this.calcDistance(t.offset,i),t.next_offset?(r=2*this.calcDistanceNextZoom(t.next_offset,i),Math.abs(n)>=Math.abs(r)?(e.offset=n*i.units_per_meter_overzoom,e.offset_scale=0!==n?1-r/n:0):(e.offset=r*i.units_per_meter_overzoom,e.offset_scale=0!=r?-1*(1-n/r):0)):(e.offset=n*i.units_per_meter_overzoom,e.offset_scale=0)):(e.offset=0,e.offset_scale=0),vo.evalProperty(t.offset_reverse,i)&&(e.offset*=-1)},_parseFeature:function(t,e,i){var n,r,o=this.feature_style;if(!1!==this.calcWidth(e,o,i)&&(this.calcOffset(e,o,i),o.color=this.parseColor(e.color,i),o.color))return o.variant=e.variant,o.z=e.z&&vo.evalCachedDistanceProperty(e.z||0,i)||vo.defaults.z,o.height=t.properties.height||vo.defaults.height,o.extrude=vo.evalProperty(e.extrude,i),o.extrude&&("number"==typeof o.extrude?o.height=o.extrude:Array.isArray(o.extrude)&&(o.height=o.extrude[1])),o.extrude&&o.height&&(o.z+=o.height),o.z*=er.height_scale,o.height*=er.height_scale,o.cap=vo.evalProperty(e.cap,i),o.join=vo.evalProperty(e.join,i),o.miter_limit=vo.evalProperty(e.miter_limit,i),o.tile_edges=e.tile_edges,o.outline=o.outline||{width:{},next_width:{},preprocessed:!0},e.outline&&!1!==e.outline.visible&&e.outline.color&&e.outline.width?(n=2*this.calcDistance(e.outline.width,i),r=2*this.calcDistanceNextZoom(e.outline.next_width,i),0==n&&0==r||n<0||r<0?(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null,o.outline.texcoords=!1):(o.outline.width.value=n+o.width_unscaled,o.outline.next_width.value=r+o.next_width_unscaled,o.outline.inline_texcoord_width=o.texcoord_width,o.outline.offset_precalc=o.offset,o.outline.offset_scale_precalc=o.offset_scale,o.outline.color=e.outline.color,o.outline.cap=e.outline.cap,o.outline.join=e.outline.join,o.outline.miter_limit=e.outline.miter_limit,o.outline.texcoords=e.outline.texcoords,o.outline.style=e.outline.style,o.outline.variant=e.outline.variant,e.outline.order?o.outline.order=this.parseOrder(e.outline.order,i):o.outline.order=o.order,o.outline.order>o.order&&(o.outline.order=o.order),o.outline.order-=.5,o.outline.variant_order=0)):(o.outline.width.value=null,o.outline.next_width.value=null,o.outline.color=null,o.outline.inline_texcoord_width=null),o},_preprocess:function(t,e){var i,n=this.sources[e]?this.sources[e].config.uid:"";return t.color=vo.createColorPropertyCache(t.color),t.width=vo.createPropertyCache(t.width,vo.parseUnits),t.width&&t.width.type!==vo.CACHE_TYPE.STATIC&&(t.next_width=vo.createPropertyCache(t.width,vo.parseUnits)),t.offset=t.offset&&vo.createPropertyCache(t.offset,vo.parseUnits),t.offset&&t.offset.type!==vo.CACHE_TYPE.STATIC&&(t.next_offset=vo.createPropertyCache(t.offset,vo.parseUnits)),t.z=vo.createPropertyCache(t.z,vo.parseUnits),t.dash=void 0!==t.dash?t.dash:this.dash,t.dash_key=t.dash&&this.dashTextureKey(t.dash,n),t.dash_background_color=void 0!==t.dash_background_color?t.dash_background_color:this.dash_background_color,t.dash_background_color=t.dash_background_color&&vo.parseColor(t.dash_background_color),t.texture_merged=t.dash_key||(void 0!==t.texture?t.texture:this.texture),t.texcoords=this.texcoords||t.texture_merged?1:0,this.computeVariant(t),t.outline&&(t.outline.style=t.outline.style||this.name,t.outline.color=vo.createColorPropertyCache(t.outline.color),t.outline.width=vo.createPropertyCache(t.outline.width,vo.parseUnits),t.outline.next_width=vo.createPropertyCache(t.outline.width,vo.parseUnits),t.outline.cap=t.outline.cap||t.cap,t.outline.join=t.outline.join||t.join,t.outline.miter_limit=t.outline.miter_limit||t.miter_limit,t.outline.offset=t.offset,(i=this.styles[t.outline.style])?(t.outline.dash=void 0!==t.outline.dash?t.outline.dash:i.dash,t.outline.texture=void 0!==t.outline.texture?t.outline.texture:i.texture,null!=t.outline.dash?(t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,n),t.outline.texture_merged=t.outline.dash_key):null===t.outline.dash||null!=t.outline.texture?(t.outline.dash_key=null,t.outline.texture_merged=t.outline.texture):(t.outline.dash=t.dash,t.outline.dash_key=t.outline.dash&&this.dashTextureKey(t.outline.dash,n),t.outline.texture_merged=t.outline.dash_key),t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:i.dash_background_color,t.outline.dash_background_color=void 0!==t.outline.dash_background_color?t.outline.dash_background_color:t.dash_background_color,t.outline.dash_background_color=t.outline.dash_background_color&&vo.parseColor(t.outline.dash_background_color),t.outline.texcoords=i.texcoords||t.outline.texture_merged?1:0,this.computeVariant(t.outline)):(Ar({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"line 'outline' specifies non-existent draw style '".concat(t.outline.style,"' (or maybe the style is ")+"defined but is missing a 'base' or has another error), skipping outlines in layer"),t.outline=null)),t},dashTextureKey:function(t,e){return"__dash_"+e+"_"+this.scene_id+"_"+JSON.stringify(t)},getDashTexture:function(t,e){var i,n=this.dashTextureKey(t,this.sources[e].config.uid);null==Jl.dash_textures[n]&&(Jl.dash_textures[n]=!0,i=function(t,e){var i=1<arguments.length&&void 0!==e?e:{},n=i.dash_color||Zl,r=i.background_color||Xl,o=t,a=i.scale||1;o.length%2==1&&Array.prototype.push.apply(o,o);for(var s=!0,u=[],l=0;l<o.length;l++){for(var h=Math.floor(o[l]*a),c=0;c<h;c++)Array.prototype.push.apply(u,s?n:r);s=!s}return{pixels:u=new Uint8Array(u),length:u.length/4}}(t,{scale:20}),this.textureManager.create(this.gl,n,{data:i.pixels,height:i.length,width:1,filtering:"nearest"}))},endData:function(t){var e=this;return Ju.endData.call(this,t).then((function(i){if(i){i.uniforms.u_has_line_texture=!1,i.uniforms.u_texture=e.textureManager.default,i.uniforms.u_v_scale_adjust=er.tile_scale;var n=[];for(var r in i.meshes)!function(r){var o,a,s=i.meshes[r].variant;s.texture&&((o=i.meshes[r].uniforms=i.meshes[r].uniforms||{}).u_has_line_texture=!0,o.u_texture=s.texture,o.u_texture_ratio=1,s.dash&&(o.u_v_scale_adjust=20*er.tile_scale,o.u_dash_background_color=s.dash_background_color||[0,0,0,0]),s.dash_key&&null==Jl.dash_textures[s.dash_key]&&(Jl.dash_textures[s.dash_key]=!0,cr.postMessage(e.main_thread_target+".getDashTexture",s.dash,t.source)),null==e.textureManager.textures[s.texture]?n.push(e.textureManager.syncTexturesToWorker([s.texture]).then((function(t){var e=t[s.texture];e&&(o.u_texture_ratio=e.height/e.width)}))):(a=e.textureManager.textures[s.texture],o.u_texture_ratio=a.height/a.width))}(r);return t.mesh_data[e.name]=i,Promise.all(n).then((function(){return i}))}return i}))},computeVariant:function(t){var e=t.offset?1:0;t.dash_key&&(e+=t.dash_key,t.dash_background_color&&(e+=t.dash_background_color)),t.texture_merged&&(e+=t.texture_merged),e=Cu(e+="/"+t.texcoords),t.variant=e,null==Jl.variants[e]&&(Jl.variants[e]={key:e,order:t.variant_order,offset:t.offset?1:0,texcoords:t.texcoords,texture:t.texture_merged,dash:t.dash,dash_key:t.dash_key,dash_background_color:t.dash_background_color})},vertexLayoutForMeshVariant:function(t){var e;return null==Jl.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:$u.SHORT,normalized:!1},{name:"a_extrude",size:2,type:$u.SHORT,normalized:!1},{name:"a_offset",size:2,type:$u.SHORT,normalized:!1,static:t.offset?null:[0,0]},{name:"a_scaling",size:2,type:$u.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:$u.UNSIGNED_SHORT,normalized:!0,static:t.texcoords?null:[0,0]},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_selection_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0}],Jl.vertex_layouts[t.key]=new ol(e)),Jl.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return Jl.variants[t.variant]},makeVertexTemplate:function(t,e){var i=0;return this.vertex_template[i++]=0,this.vertex_template[i++]=0,this.vertex_template[i++]=t.z||0,this.vertex_template[i++]=this.scaleOrder(t.order),this.vertex_template[i++]=0,this.vertex_template[i++]=0,e.variant.offset&&(this.vertex_template[i++]=0,this.vertex_template[i++]=0),this.vertex_template[i++]=1024*t.width_scale,this.vertex_template[i++]=1024*t.offset_scale,e.variant.texcoords&&(this.vertex_template[i++]=0,this.vertex_template[i++]=0),this.vertex_template[i++]=255*t.color[0],this.vertex_template[i++]=255*t.color[1],this.vertex_template[i++]=255*t.color[2],this.vertex_template[i++]=255*t.color[3],this.selection&&(this.vertex_template[i++]=255*t.selection_color[0],this.vertex_template[i++]=255*t.selection_color[1],this.vertex_template[i++]=255*t.selection_color[2],this.vertex_template[i++]=255*t.selection_color[3]),this.vertex_template},buildLines:function(t,e,i,n,r){var o;this.feature_style=this.outline_feature_style,!e.outline||null==e.outline.color||null==e.outline.width.value||(o=this.styles[e.outline.style])&&o.addFeature(n.feature,e.outline,n),this.feature_style=this.inline_feature_style;var a=i.vertex_data,s=a.vertex_layout,u=this.makeVertexTemplate(e,i);return function(t,e,i,n,r){var o,a,s=r.texcoord_index,u=r.texcoord_width,l=r.texcoord_ratio,h=r.texcoord_normalize,c=r.join,f=r.cap,p=r.miter_limit,d=c?Rl[c]:Rl.miter;d===Rl.miter&&(o=(p=p||3)*p),s&&(h=h||1,a=1/(u*(l=l||1)*jl));for(var g={closed_polygon:r.closed_polygon,remove_tile_edges:r.remove_tile_edges,tile_edge_tolerance:r.tile_edge_tolerance,miter_len_sq:o,join_type:d,cap_type:f?Pl[f]:Pl.butt,vertex_data:i,vertex_template:n,half_width:e/2,extrude_index:r.extrude_index,offset_index:r.offset_index,v_scale:a,texcoord_index:s,texcoord_width:u,texcoord_normalize:h,offset:r.offset,geom_count:0,crop_by_tile:r.crop_by_tile},y=0;y<t.length;y++)Bl(t[y],g);if(g.extra_lines)for(var v=0;v<g.extra_lines.length;v++)Bl(g.extra_lines[v],g);return g.geom_count}(t,e.width,a,u,{cap:e.cap,join:e.join,miter_limit:e.miter_limit,extrude_index:s.index.a_extrude,offset_index:s.index.a_offset,texcoord_index:s.index.a_texcoord,texcoord_width:e.texcoord_width,texcoord_normalize:65535,closed_polygon:r&&r.closed_polygon,remove_tile_edges:!e.tile_edges&&r&&r.remove_tile_edges,tile_edge_tolerance:er.tile_scale*n.tile.pad_scale*2,offset:e.offset,crop_by_tile:this.crop_by_tile})},buildPolygons:function(t,e,i,n){for(var r=0,o=0;o<t.length;o++)r+=this.buildLines(t[o],e,i,n,{closed_polygon:!0,remove_tile_edges:!this.crop_by_tile});return r}});var th=[[1,1],[1,-1],[-1,1],[-1,-1]];function eh(t,e,i,n,r,o,a){var s,u=e.vertex_template,l=e.vertex_data;ih(e,"a_position",t),ih(e,"a_width",e.half_width),e.vertex_layout_index.a_barycentric&&((s=[0,0,0])[i%3]=1,ih(e,"a_barycentric",s)),ih(e,"a_tangents",a[0].concat(a[1])),ih(e,"a_segment",n),ih(e,"a_texcoord",th[i%4]),ih(e,"a_length",r),ih(e,"a_closed",e.closed?1:0),ih(e,"a_angles",o),l.addVertex(u)}function ih(t,e,i){var n=i.length,r=t.vertex_template,o=t.vertex_layout_index[e],a=0;if(n)for(;a!==n;)r[o+a]=i[a],a++;else r[o+a]=i}function nh(t,e){for(var i=t.reduce((function(t,e){return t+e})),n=0,r=[],o=0,a=t.length;o<=a;o+=2){var s=Math.max(1e-4,t[o%a]),u=Math.max(1e-4,t[(o+1)%a]);r.push(n,n+s),n+=s+u}for(var l=new Uint8Array(4*e),h=0,c=0;c<e;c++)!function(t){var n=i*t/(e-1),o=function(t){for(var e=t[0],i=0,n=1,r=t.length;n<r;n++)t[n]<e&&(e=t[i=n]);return i}(r.map((function(t){return Math.abs(t-n)}))),a=void 0,s=void 0,u=o%2==0?(a=n<=r[o]?1:0,s=r[o],r[o+1]):(a=n>r[o]?2:0,s=r[o-1],r[o]);l[h++]=r[o],l[h++]=a,l[h++]=s,l[h++]=u}(c);return l}var rh=Object.create(Ju),oh={round:1,"arrow-tail":2,"arrow-head":3,square:4,butt:5},ah={miter:0,round:1,bevel:2},sh=oh.round,uh=ah.miter,lh=[0,0],hh="antialias join linecaps miter_limit dash_index dash dash_caps dash_phase".split(" ");Object.assign(rh,{name:"pattern-lines",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform sampler2D u_uniforms;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform vec3 u_map_position;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_index;uniform vec2 u_dash_caps;uniform float u_dash_phase;uniform float u_dash_period;attribute vec4 a_position;attribute vec4 a_color;attribute float a_width;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nattribute vec3 a_barycentric;\n#endif\nattribute vec2 a_normal;attribute float a_length;attribute vec2 a_segment;attribute vec2 a_texcoord;attribute vec2 a_angles;attribute vec4 a_tangents;attribute float a_closed;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#ifndef TANGRAM_HEIGHT_SCALE\nfloat TANGRAM_HEIGHT_SCALE=16.0;\n#endif\n#define UNPACK_SCALING(x) (x / 1024.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\nconst float PI=3.141592653589793;const float THETA=15.0*PI/180.0;float cross(in vec2 v1,in vec2 v2){return v1.x*v2.y-v1.y*v2.x;}float signed_distance(in vec2 v1,in vec2 v2,in vec2 v3){return cross(v2-v1,v1-v3)/length(v2-v1);}void rotate(in vec2 v,in float angle,out vec2 result){float cosine=cos(angle);float sine=sin(angle);result=vec2(cosine*v.x-sine*v.y,sine*v.x+cosine*v.y);}void main(){\n#pragma tangram: setup\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nv_modelpos_base_zoom=modelPositionBaseZoom();\n#endif\nfloat linewidth=a_width*2.0;v_angles=a_angles;v_segment=a_segment;v_color=a_color;v_length=a_length;v_texcoord=a_texcoord;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nv_barycentric=a_barycentric;\n#endif\nv_color.a=min(linewidth,v_color.a);linewidth=max(linewidth,1.0);linewidth/=exp2(u_map_position.z-u_tile_origin.w);v_linewidth_and_closed=linewidth*(a_closed>0.0 ?-1.0 : 1.0);if(v_color.a<=0.0){gl_Position=vec4(0.0,0.0,0.0,1.0);return;}float width=ceil(1.25*u_antialias+linewidth)/2.0;vec2 t1=normalize(a_tangents.xy);vec2 t2=normalize(a_tangents.zw);float u=a_texcoord.x;u*=-1.0;float v=a_texcoord.y;vec4 position=vec4(a_position.xy,a_position.z/TANGRAM_HEIGHT_SCALE,1.0);if(t1!=t2){float angle=a_texcoord.x==1.0 ? a_angles.x : a_angles.y;vec2 t=normalize(t1+t2);vec2 o=vec2(+t.y,-t.x);float segmentLength=a_segment.y-a_segment.x;float magnitude=width/cos(angle/2.0);float sqMagnitude=magnitude*magnitude;float seg1SqMagnitude=dot(a_tangents.xy,a_tangents.xy);float seg2SqMagnitude=dot(a_tangents.zw,a_tangents.zw);if((abs(magnitude)>linewidth)&&(sqMagnitude>=min(seg1SqMagnitude,seg2SqMagnitude))){if(u==1.0){o=vec2(-t2.y,+t2.x);}else{o=vec2(-t1.y,+t1.x);}magnitude=width;angle=0.0;v_angles.x=0.0;v_angles.y=0.0;}if(u_dash_index>0.0){if((abs(angle)>THETA)){position.xy+=v*width*o/cos(angle/2.0);float s=sign(angle);if(angle<0.0){if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==1.0){position.xy-=2.0*width*t1/sin(angle);u-=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==1.0){position.xy+=2.0*width*t2/sin(angle);u+=2.0*width/sin(angle);}}}else{if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);if(v==-1.0){position.xy+=2.0*width*t1/sin(angle);u+=2.0*width/sin(angle);}}else{u=v_segment.x-v*width*tan(angle/2.0);if(v==-1.0){position.xy-=2.0*width*t2/sin(angle);u-=2.0*width/sin(angle);}}}}else{position.xy+=v*width*o/cos(angle/2.0);if(u==+1.0){u=v_segment.y;}else{u=v_segment.x;}}}else{position.xy+=v*o*magnitude;if(u==+1.0){u=v_segment.y+v*width*tan(angle/2.0);}else{u=v_segment.x-v*width*tan(angle/2.0);}}v_joinIndicator=(segmentLength+v*width*tan(angle/2.0))/segmentLength;}else{v_joinIndicator=-1.0;vec2 o=vec2(+t1.y,-t1.x);position.xy+=v*width*o;if(u==-1.0){u=v_segment.x-width;position.xy-=width*t1;}else{u=v_segment.y+width;position.xy+=width*t2;}}vec2 t;vec2 curr=a_position.xy;if(a_texcoord.x>=0.0){vec2 next=curr+t2*(v_segment.y-v_segment.x);rotate(t1,+a_angles.x/2.0,t);v_miter.x=signed_distance(curr,curr+t,position.xy);rotate(t2,+a_angles.y/2.0,t);v_miter.y=signed_distance(next,next+t,position.xy);}else{vec2 prev=curr-t1*(v_segment.y-v_segment.x);rotate(t1,-a_angles.x/2.0,t);v_miter.x=signed_distance(prev,prev+t,position.xy);rotate(t2,-a_angles.y/2.0,t);v_miter.y=signed_distance(curr,curr+t,position.xy);}v_distances=vec2(u,v*width);v_world_position=wrapWorldPosition(u_model*position);v_local_space_position=position;position=u_modelView*position;\n#pragma tangram: position\nv_position=position;v_normal=normalize(u_normalMatrix*TANGRAM_NORMAL);\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvec3 normal=v_normal;\n#pragma tangram: normal\nv_lighting=calculateLighting(position.xyz-u_eye,normal,vec4(1.));\n#endif\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);\n#endif\ngl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_dash_atlas;uniform float u_antialias;uniform vec2 u_linecaps;uniform float u_linejoin;uniform float u_miter_limit;uniform float u_dash_phase;uniform float u_dash_period;uniform float u_dash_index;uniform vec2 u_dash_caps;varying vec4 v_position;varying vec4 v_local_space_position;varying vec3 v_normal;varying vec4 v_color;varying vec4 v_world_position;\n#ifdef TANGRAM_DEBUG_TRIANGLES\nvarying vec3 v_barycentric;\n#endif\nvarying vec2 v_segment;varying vec2 v_angles;varying vec2 v_texcoord;varying vec2 v_distances;varying vec2 v_miter;varying float v_length;varying float v_linewidth_and_closed;varying float v_joinIndicator;\n#define TANGRAM_NORMAL v_normal\n#ifdef TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING\nvarying vec4 v_modelpos_base_zoom;\n#endif\n#if defined(TANGRAM_LIGHTING_VERTEX)\nvarying vec4 v_lighting;\n#endif\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: global\n#pragma tangram: utils\nconst float PI=3.141592653589793;const float HALF_PI=PI/2.0;const float THETA=15.0*PI/180.0;/***Compute distance to cap.*@param{int}type The Type of the cap(see CAP_TYPE in pattern_lines)*@param{float}dx The distance of the pixel from the beginning of the line(not straight distance,but along the legs)*@param{float}dy The distance of the pixel from the midline(see v_distances in vertex shader,aka 1*half_line_width)*@param{float}aa_radius The distance from the mid-line from where antialiasing starts.*For example for a linewidth 10px width and 2px filter radius it is 10px/2-2px=3px.*@return{float}distance*/float cap(int type,float dx,float dy,float aa_radius){float dist=0.0;dx=abs(dx);dy=abs(dy);if(type==1)dist=sqrt(dx*dx+dy*dy);else if(type==3)dist=(dx+abs(dy));else if(type==2)dist=max(abs(dy),(aa_radius+dx-abs(dy)));else if(type==4)dist=max(dx,dy);else if(type==5)dist=max(dx+aa_radius,dy);return dist;}/***Compute distance to join.*@param{int}type The type of the join(see JOIN_TYPE in pattern_lines)*@param{vec2}segment Interpolated a_segment attribute from the vertex shader*@param{vec2}texcoord Pair of u/v coordinates to identify the 4 different extruded points of the segment.*@param{vec2}distances 2 component vector where:*x is the distance of the pixel from the beginning of the line(along the legs)*y is the  distance of the pixel from the midline(see v_distances in vertex shader,1*half_line_width)*@param{vec2}miter Miter point coordiante*@param{float}miter_limit The miter limit*@param{float}linewidth The width of the line*@return{float}computed distance*/float join(in int type,in vec2 segment,in vec2 texcoord,in vec2 distances,in vec2 miter,in float miter_limit,in float linewidth){float dx=distances.x;float result=abs(distances.y);if((dx<segment.x)||(dx>segment.y)){if(type==1){float s=dx<segment.x ? segment.x : segment.y;result=max(result,length(distances-vec2(s,0.0)));}else{float m=abs(texcoord.x>=0.0 ? miter.x : miter.y);if(type==2){result=max(result,m);}else if(type==0){result=max(result,m-miter_limit*linewidth/2.0);}}}return result;}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;vec3 normal=TANGRAM_NORMAL;\n#ifdef TANGRAM_CROP_BY_TILE\nif(isLocalSpacePixelOutsideTile(v_local_space_position,TANGRAM_TILE_SCALE.x)){discard;}\n#endif\n#if defined(TANGRAM_LIGHTING_FRAGMENT) && defined(TANGRAM_MATERIAL_NORMAL_TEXTURE)\ncalculateNormal(normal);\n#endif\n#if !defined(TANGRAM_LIGHTING_VERTEX)\n#pragma tangram: normal\n#endif\n#pragma tangram: color\n#if defined(TANGRAM_LIGHTING_FRAGMENT)\ncolor=calculateLighting(v_position.xyz-u_eye,normal,color);\n#elif defined(TANGRAM_LIGHTING_VERTEX)\ncolor*=v_lighting;\n#endif\n#pragma tangram: filter\nif(v_color.a<=0.0){discard;}bool solid=(u_dash_index==0.0);bool closed=v_linewidth_and_closed<0.0;float dx=v_distances.x;float dy=v_distances.y;float linewidth=abs(v_linewidth_and_closed);float aa_radius=linewidth/2.0-u_antialias;float dist=0.0;vec2 linecaps=u_linecaps;vec2 dash_caps=u_dash_caps;float line_start=0.0;float line_stop=v_length;if(solid){dist=abs(dy);bool potentialCap=!closed&&v_joinIndicator<0.0;if(potentialCap&&dx<line_start){dist=cap(int(u_linecaps.x),abs(dx),abs(dy),aa_radius);}else if(potentialCap&&dx>line_stop){dist=cap(int(u_linecaps.y),abs(dx)-line_stop,abs(dy),aa_radius);}else{dist=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);}}else{float segment_start=v_segment.x;float segment_stop=v_segment.y;float segment_center=(segment_start+segment_stop)/2.0;float freq=u_dash_period*linewidth;float dash_phase=u_dash_phase-1e-5;float u=mod(dx+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));float dash_center=float(tex.x)*255.0*linewidth;float dash_type=floor(float(tex.y)*255.0+0.5);float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;float dash_start=dx-u+_start;float dash_stop=dx-u+_stop;if((dash_stop<segment_start)&&(dash_caps.x!=5.0)){float u=mod(segment_start+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_start-u+_start;dash_stop=segment_start-u+_stop;}else if((dash_start>segment_stop)&&(dash_caps.y!=5.0)){float u=mod(segment_stop+dash_phase*linewidth,freq);vec4 tex=texture2D(u_dash_atlas,vec2(u/freq,u_dash_index));dash_center=float(tex.x)*255.0*linewidth;float _start=float(tex.z)*255.0*linewidth;float _stop=float(tex.a)*255.0*linewidth;dash_start=segment_stop-u+_start;dash_stop=segment_stop-u+_stop;}bool discontinuous=((dx<segment_center)&&abs(v_angles.x)>THETA)||((dx>=segment_center)&&abs(v_angles.y)>THETA);float d_join=join(int(u_linejoin),v_segment,v_texcoord,v_distances,v_miter,u_miter_limit,linewidth);if(closed){line_start+=linewidth/2.0;line_stop-=linewidth/2.0;}if(dash_stop<=line_start){discard;}if(dash_start>=line_stop){discard;}if(discontinuous){if((dash_start>segment_stop)){discard;}if((dash_stop<segment_start)){discard;}if(dash_caps.x==1.0){if((u>_stop)&&(dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){discard;}}if(dash_caps.y==1.0){if((u<_start)&&(dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){discard;}}if((dash_caps.x!=1.0)&&(dash_caps.x!=5.0)){if((dash_start<segment_start)&&(abs(v_angles.x)<HALF_PI)){float a=v_angles.x/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(segment_start-dx)*cos_a-dy*sin_a;float y=(segment_start-dx)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.x=4.0;}}if((dash_caps.y!=1.0)&&(dash_caps.y!=5.0)){if((dash_stop>segment_stop)&&(abs(v_angles.y)<HALF_PI)){float a=v_angles.y/2.0;float cos_a=cos(a);float sin_a=sin(a);float x=(dx-segment_stop)*cos_a-dy*sin_a;float y=(dx-segment_stop)*sin_a+dy*cos_a;if(x>0.0){discard;}dash_caps.y=4.0;}}}if((dx<line_start)&&(dash_start<=line_start)&&(dash_stop>line_start)){dist=cap(int(linecaps.x),dx-line_start,dy,aa_radius);}else if((dx>line_stop)&&(dash_stop>line_stop)&&(dash_start<line_stop)){dist=cap(int(linecaps.y),dx-line_stop,dy,aa_radius);}else if(dash_type==1.0){dist=cap(int(dash_caps.x),abs(dash_center-u),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}else if(dash_type==0.0){dist=abs(dy);}else if(dash_type==2.0){dist=cap(int(dash_caps.y),abs(u-dash_center),dy,aa_radius);if((dx>line_start)&&(dx<line_stop)){dist=max(dist,d_join);}}if((dx>line_start)&&(dx<line_stop)){if((dx<=segment_start)&&(dash_start<=segment_start)&&(dash_stop>=segment_start)){dist=d_join;float angle=HALF_PI+v_angles.x;float f=abs((segment_start-dx)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if((dx>segment_stop)&&(dash_start<=segment_stop)&&(dash_stop>=segment_stop)){dist=d_join;float angle=HALF_PI+v_angles.y;float f=abs((dx-segment_stop)*cos(angle)-dy*sin(angle));dist=max(f,dist);}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}else if(dx<(segment_start-linewidth/2.)){discard;}else if(dx>(segment_stop+linewidth/2.)){discard;}}dist=dist-aa_radius;if(dist>=0.0){if(u_antialias==0.0){discard;}else{color=vec4(color.rgb,exp(-dist*dist)*color.a);}}\n#ifdef TANGRAM_DEBUG_TRIANGLES\nif(any(lessThan(v_barycentric,vec3(0.0085)))){color=vec4(0.0,1.0,0.0,1.0);}\n#endif\ngl_FragColor=color;}",selection:!0,init:function(){Ju.init.apply(this,arguments),this.defines.TANGRAM_LAYER_ORDER=!0,this.defines.TANGRAM_CROP_BY_TILE=this.crop_by_tile,this.defines.TANGRAM_DEBUG_TRIANGLES=!1,this.defines.TANGRAM_DEBUG_NO_TEXTURE_FLOAT_SUPPORT=!1,this.styles=this.styles||{},rh.vertex_layouts=[],rh.variants={}},calcDistance:function(t,e){return t&&vo.evalCachedDistanceProperty(t,e)||0},calcDash:function(t,e){var i=vo.evalProperty(t.dash,e),n=0;return i&&((i=Array.isArray(i)&&i.length?i:lh).length%2==1&&(i=i.concat(i)),n=+(n=i.reduce((function(t,e){return t+e})))||0),{dash:i,dash_period:n}},calcWidth:function(t,e,i){var n=this.calcDistance(t.width,i);return!(n<0||(e.width=n*i.units_per_meter_overzoom,0))},getCapType:function(t,e,i){var n=vo.evalProperty(t,e);return void 0!==oh[n]?oh[n]:i},_parseFeature:function(t,e,i){if(!1!==this.calcWidth(e,this.feature_style,i)){var n=this.parseColor(e.color,i);if(n&&0!==n[3]){var r=this.getCapType(e.cap,i,sh),o=vo.evalProperty(e.join,i),a=+vo.evalProperty(e.miter_limit,i),s=this.calcDash(e,i),u=s.dash,l=s.dash_period,h=Object.assign({color:n,antialias:e.antialias,linecaps:[this.getCapType(e.tail_cap,i,r),this.getCapType(e.head_cap,i,r)],join:void 0!==ah[o]?ah[o]:uh,miter_limit:0<=a?a:3,dash_index:0===l?0:1,dash:u,dash_caps:[this.getCapType(e.tail_cap,i,r),this.getCapType(e.head_cap,i,r)],dash_phase:+vo.evalProperty(e.dash_phase,i)||0,dash_period:l},this.feature_style);return h.z=e.z&&vo.evalCachedDistanceProperty(e.z||0,i)||vo.defaults.z,h.z*=er.height_scale,h.extrude=vo.evalProperty(e.extrude,i),h.extrude&&(!0===h.extrude?(h.height=void 0!==t.properties.height?t.properties.height:vo.defaults.height,h.min_height=void 0!==t.properties.min_height?t.properties.min_height:vo.defaults.min_height):"number"==typeof h.extrude?(h.height=h.extrude,h.min_height=0):Array.isArray(h.extrude)&&(h.min_height=h.extrude[0],h.height=h.extrude[1]),h.height*=er.height_scale,h.min_height*=er.height_scale),this.computeVariant(h),h}}},_preprocess:function(t){t.color=vo.createColorPropertyCache(t.color),t.width=vo.createPropertyCache(t.width,vo.parseUnits),t.width&&t.width.type!==vo.CACHE_TYPE.STATIC&&(t.next_width=vo.createPropertyCache(t.width,vo.parseUnits)),t.z=vo.createPropertyCache(t.z,vo.parseUnits);var e=+t.antialias;return t.antialias=isNaN(e)?0:e,t},buildRasterTextures:function(t,e){var i=[];for(var n in e.meshes){var r,o=rh.variants[n],a=o.uniforms,s=o.pattern;a.u_dash_index&&(r="__dash_"+s.join("_")+"_"+t.key+"_"+t.id,i.push({name:r,data:nh(s,1024)}),a.u_dash_atlas=r,e.meshes[n].textures=[r]),e.meshes[n].uniforms=a}return e.uniforms=e.uniforms||{},i.length?cr.postMessage(this.main_thread_target+".loadTextures",i).then((function(t){return e})):Promise.resolve(e)},loadTextures:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=(r=this.textureManager.textures[n.name])||this.textureManager.create(this.gl,n.name,{filtering:"nearest",repeat:!0,width:1024,height:1,data:n.data});e.push(r.loading)}return Promise.all(e).then((function(t){return t.map((function(t){return t.retain(),t.name}))}))},computeVariant:function(t){var e=function(t){for(var e=[],i=0,n=hh.length;i<n;i++){var r=t[hh[i]];Array.isArray(r)?e.push(r.join("_")):"boolean"==typeof r?e.push(r?1:0):r&&e.push(r.toString())}return e.join("/")}(t);t.variant=e,null==rh.variants[e]&&(rh.variants[e]={key:e,order:t.variant_order,uniforms:{u_antialias:t.antialias,u_linecaps:t.linecaps,u_linejoin:t.join,u_miter_limit:t.miter_limit,u_dash_index:t.dash_index,u_dash_caps:t.dash_caps,u_dash_phase:t.dash_phase,u_dash_period:t.dash_period},pattern:t.dash})},vertexLayoutForMeshVariant:function(t){var e;return null==rh.vertex_layouts[t.key]&&(e=[{name:"a_position",size:4,type:$u.SHORT,normalized:!1},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_width",size:1,type:$u.FLOAT,normalized:!1},{name:"a_tangents",size:4,type:$u.FLOAT,normalized:!1},{name:"a_segment",size:2,type:$u.FLOAT,normalized:!1},{name:"a_angles",size:2,type:$u.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:$u.FLOAT,normalized:!0},{name:"a_length",size:1,type:$u.FLOAT,normalized:!1},{name:"a_closed",size:1,type:$u.FLOAT,normalized:!1},{name:"a_selection_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0}],this.defines.TANGRAM_DEBUG_TRIANGLES&&e.push({name:"a_barycentric",size:3,type:$u.SHORT,normalized:!1}),rh.vertex_layouts[t.key]=new ol(e)),rh.vertex_layouts[t.key]},meshVariantTypeForDraw:function(t){return rh.variants[t.variant]},makeVertexTemplate:function(t){var e=0;return this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=t.z+t.height||0,this.vertex_template[e++]=this.scaleOrder(t.order),this.vertex_template[e++]=255*t.color[0],this.vertex_template[e++]=255*t.color[1],this.vertex_template[e++]=255*t.color[2],this.vertex_template[e++]=255*t.color[3],this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.selection&&(this.vertex_template[e++]=255*t.selection_color[0],this.vertex_template[e++]=255*t.selection_color[1],this.vertex_template[e++]=255*t.selection_color[2],this.vertex_template[e++]=255*t.selection_color[3]),this.defines.TANGRAM_DEBUG_TRIANGLES&&(this.vertex_template[e++]=0,this.vertex_template[e++]=0,this.vertex_template[e++]=0),this.vertex_template},buildLines:function(t,e,i,n,r){var o=4<arguments.length&&void 0!==r&&r,a=i.vertex_data,s=a.vertex_layout,u=this.makeVertexTemplate(e,i);return $l(t,e.width,a,u,s.index,o)},buildPolygons:function(t,e,i,n){for(var r=0,o=0,a=t.length;o<a;o++)r+=this.buildLines(t[o],e,i,n,!0);return r}});var ch=0,fh={id_prefix:"",nextLabelId:function(){return"".concat(fh.id_prefix,"/").concat(ch++)}};function ph(t){return{priority:t.priority,collide:t.collide,repeat_distance:t.repeat_distance,repeat_group:t.repeat_group,buffer:t.buffer,italic:t.italic}}var dh=["left","top-left","bottom-left"],gh=["right","top-right","bottom-right"],yh=["top","top-left","top-right"],vh=["bottom","bottom-left","bottom-right"],mh={computeOffset:function(t,e,i,n){var r=3<arguments.length&&void 0!==n?n:null;if(!i||"center"===i)return t;var o=[t[0],t[1]];return r=r||this.default_buffer,this.isLeftAnchor(i)?(o[0]-=e[0]/2,"left"===i&&(o[0]-=r[0])):this.isRightAnchor(i)&&(o[0]+=e[0]/2,"right"===i&&(o[0]+=r[1])),this.isTopAnchor(i)?(o[1]-=e[1]/2,"top"===i&&(o[1]-=r[2])):this.isBottomAnchor(i)&&(o[1]+=e[1]/2,"bottom"===i&&(o[1]+=r[3])),o},alignForAnchor:function(t){if(t&&"center"!==t){if(this.isLeftAnchor(t))return"right";if(this.isRightAnchor(t))return"left"}return"center"},isLeftAnchor:function(t){return-1<dh.indexOf(t)},isRightAnchor:function(t){return-1<gh.indexOf(t)},isTopAnchor:function(t){return-1<yh.indexOf(t)},isBottomAnchor:function(t){return-1<vh.indexOf(t)},default_buffer:[2.5,2.5,1.5,.75],zero_buffer:[0,0,0,0]};function bh(t,e,i,n,r){var o=[],a=i-t,s=n-e,u=Qn.getLineLength(t,e,i,n),l=2*r;if((h=u/l)<=1)o.push(t+a/2,e+s/2,r);else{var h,c=l/u,f=a*c,p=s*c;(h=u/r/2)%1&&o.push(i-f/2,n-p/2,r),h|=0;for(var d=t+f/2,g=e+p/2;h--;)o.push(d,g,r),d+=f,g+=p}return o}var _h=function(){function t(e,i,n,r){mn(this,t),this.id=fh.nextLabelId(),this.position=[e[0],e[1]],void 0!==e[2]&&this.position.push(e[2]),this.size=i,this.layout=r,this.anchor=Array.isArray(this.layout.anchor)?this.layout.anchor[0]:this.layout.anchor,this.placed=null,this.type="point",this.parent=this.layout.parent,this.offset=this.computeOffset(),this.align=this.layout.align||mh.alignForAnchor(this.anchor),this._is_flat=n}return _n(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,align:this.align,sides:this.getSides(),breach:!this.inTileBounds(),layout:ph(this.layout)}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,i=t.top,n=t.right,r=t.bottom;return Tr.pointInTile([e,i])&&Tr.pointInTile([n,r])}},{key:"isFlat",value:function(){return this._is_flat}},{key:"setAnchor",value:function(t){this._circles=void 0,this._aabb=void 0,this.anchor=t,this.offset=this.computeOffset()}},{key:"computeOffset",value:function(){var t,e=[this.layout.offset[0],this.layout.offset[1]];return this.parent&&(t=this.parent,e=mh.computeOffset(e,t.size,t.anchor,mh.zero_buffer),e=mh.computeOffset(e,t.size,this.anchor,mh.zero_buffer),t.offset!==vo.zeroPair&&(e===vo.zeroPair?e=t.offset:(e[0]+=t.offset[0],e[1]+=t.offset[1]))),mh.computeOffset(e,this.size,this.anchor)}},{key:"getBoundingCircles",value:function(){return this.angle?(this._circles||(t=this.layout.units_per_pixel,r=-(i=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(n=e*Math.sin(this.angle)),s=(a=Pn(this.position,2))[0],u=a[1],i+=s,n+=u*=-1,r+=s,o+=u,l=this.size[1]/2*t,this._circles=bh(i,n,r,o,l)),this._circles):[];var t,e,i,n,r,o,a,s,u,l}},{key:"getAABB",value:function(){var t,e,i,n,r;return this._aabb||(t=this.layout.units_per_pixel,e=(this.size[0]/2+this.layout.buffer[0])*t,i=(this.size[1]/2+this.layout.buffer[1])*t,n=this.position[0]+this.offset[0]*t,r=this.position[1]-this.offset[1]*t,this._aabb={left:n-e,top:r+i,right:n+e,bottom:r-i}),this._aabb}},{key:"getSides",value:function(){var t=this.getAABB(),e=t.left,i=t.top,n=t.right,r=(i+t.bottom)/2;return[e,r,n,r]}}]),t}();_h.PLACEMENT={VERTEX:0,MIDPOINT:1,SPACED:2,CENTROID:3};var wh=_h.PLACEMENT;function xh(t,e,i,n){var r=[],o=n.placement,a=Math.max(e[0],e[1])*n.placement_min_length_ratio*n.units_per_pixel;switch(o){case wh.SPACED:var s=function(t,e,i){var n=i.units_per_pixel,r=(i.placement_spacing||80)*n,o=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=Eh(t[i],t[i+1]);return e}(t);if(o<=e)return!1;for(var a=Math.max(Math.floor(o/r),1),s=[],u=[],l=.5*(o-(a-1)*r),h=0;h<a;h++){var c=function(t,e,i,n){for(var r,o,a=0,s=0;s<t.length-1;s++){var u=t[s],l=t[s+1],h=Eh(u,l);if(!(h<=i)&&e<(a+=h)){r=function(t,e,i){var n=i/Eh(t,e);return[n*t[0]+(1-n)*e[0],n*t[1]+(1-n)*e[1]]}(u,l,a-e),o=Mh(u,l,n.angle);break}}return{position:r,angle:o}}(t,l,e,i),f=c.position,p=c.angle;null!=f&&null!=p&&(s.push(f),u.push(p)),l+=r}return{positions:s,angles:u}}(t,a,n);if(!s)return[];for(var u=s.positions,l=s.angles,h=0;h<u.length;h++){var c,f=u[h],p=l[h];!0!==n.tile_edges&&ll(f)||((c=new _h(f,e,i,n)).angle=p,r.push(c))}break;case wh.VERTEX:for(var d,g,y,v=0;v<t.length-1;v++)d=t[v],g=t[v+1],!0!==n.tile_edges&&ll(d)||((y=new _h(d,e,i,n)).angle=Mh(d,g,n.angle),r.push(y));(y=new _h(g,e,i,n)).angle=Mh(d,g,n.angle),r.push(y);break;case wh.MIDPOINT:for(var m=0;m<t.length-1;m++){var b,_=t[m],w=t[m+1],x=[.5*(_[0]+w[0]),.5*(_[1]+w[1])];!0!==n.tile_edges&&ll(x)||(!a||Eh(_,w)>a)&&((b=new _h(x,e,i,n)).angle=Mh(_,w,n.angle),r.push(b))}}return r}function Mh(t,e,i){var n=2<arguments.length&&void 0!==i?i:0;return"auto"===n?Math.atan2(e[0]-t[0],e[1]-t[1]):n}function Eh(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}var Ah={key:function(t){return[t.style,t.weight,t.family,t.px_size,t.fill,t.stroke,t.stroke_width,t.transform,t.text_wrap,t.max_lines,t.supersample,t.background_color,t.outline_color,t.outline_width,t.padding,Tr.device_pixel_ratio].join("/")},defaults:{style:"normal",weight:null,size:"12px",px_size:12,family:"Helvetica",fill:"white",text_wrap:15,max_lines:5,align:"center",stroke:null,stroke_width:0,background_color:null,outline_color:null,outline_width:0,padding:[0,0,0,0]},compute:function(t,e,i){var n={};if(e.font=e.font||this.defaults,n.can_articulate=e.can_articulate,n.fill=e.font.fill&&Tr.toCSSColor(vo.evalCachedColorProperty(e.font.fill,i))||this.defaults.fill,n.style=e.font.style||this.defaults.style,n.weight=e.font.weight||this.defaults.weight,e.font.family?(n.family=e.font.family,n.family!==this.defaults.family&&(n.family+=", "+this.defaults.family)):n.family=this.defaults.family,n.transform=e.font.transform,n.size=e.font.size||this.defaults.size,n.supersample=e.supersample_text?1.5:1,n.px_size=vo.evalCachedProperty(e.font.px_size,i)*n.supersample,0!==n.px_size){e.font.stroke&&e.font.stroke.color&&(n.stroke=Tr.toCSSColor(vo.evalCachedColorProperty(e.font.stroke.color,i)||this.defaults.stroke),n.stroke_width=vo.evalCachedProperty(e.font.stroke.width,i)||this.defaults.stroke_width),n.font_css=this.fontCSS(n);var r=e.text_wrap;return null==r&&"line"!==er.geometryType(t.geometry.type)&&(r=!0),!0===r&&(r=this.defaults.text_wrap),n.text_wrap=r,n.max_lines=e.max_lines||this.defaults.max_lines,n.background_color=e.background&&e.background.color&&!e.can_articulate?Tr.toCSSColor(vo.evalCachedColorProperty(e.background.color,i)):this.defaults.background_color,n.outline_color=e.outline&&e.outline.color&&!e.can_articulate?Tr.toCSSColor(vo.evalCachedColorProperty(e.outline.color,i)):this.defaults.outline_color,n.outline_width=e.outline&&e.outline.width&&!e.can_articulate?vo.evalCachedProperty(e.outline.width,i):this.defaults.outline_width,n.padding=e.padding&&!e.can_articulate?vo.evalCachedProperty(e.padding,i):this.defaults.padding,n}},fontCSS:function(t){return[t.style,t.weight,t.px_size+"px",t.family].filter((function(t){return t})).join(" ")}},kh=a((function(t){function e(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function i(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+e+";"}function r(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,1)}function o(t,i){function n(){var t=o;r(t)&&t.a.parentNode&&i(t.g)}var o=t;e(t.b,n),e(t.c,n),r(t)}function a(t,e){var i=e||{};this.family=t,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}function s(t,e){return[t.style,t.weight,function(){if(null===h){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}h=""!==t.style.font}return h}()?t.stretch:"","100px",e].join(" ")}var u,l,h,c;c=h=l=u=null,a.prototype.load=function(t,e){var r=this,a=t||"BESbswy",h=0,f=e||3e3,p=(new Date).getTime();return new Promise((function(t,e){var d,g,y;null===c&&(c=!!document.fonts),(d=c)&&(null===l&&(l=/OS X.*Version\/10\..*Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),d=!l),d?(d=new Promise((function(t,e){!function i(){(new Date).getTime()-p>=f?e():document.fonts.load(s(r,'"'+r.family+'"'),a).then((function(e){1<=e.length?t():setTimeout(i,25)}),(function(){e()}))}()})),g=new Promise((function(t,e){h=setTimeout(e,f)})),Promise.race([g,d]).then((function(){clearTimeout(h),t(r)}),(function(){e(r)}))):(y=function(){function l(){var e;(e=-1!=y&&-1!=v||-1!=y&&-1!=m||-1!=v&&-1!=m)&&((e=y!=v&&y!=m&&v!=m)||(null===u&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=u&&(y==b&&v==b&&m==b||y==_&&v==_&&m==_||y==w&&v==w&&m==w)),e=!e),e&&(x.parentNode&&x.parentNode.removeChild(x),clearTimeout(h),t(r))}var c=new i(a),d=new i(a),g=new i(a),y=-1,v=-1,m=-1,b=-1,_=-1,w=-1,x=document.createElement("div");x.dir="ltr",n(c,s(r,"sans-serif")),n(d,s(r,"serif")),n(g,s(r,"monospace")),x.appendChild(c.a),x.appendChild(d.a),x.appendChild(g.a),document.body.appendChild(x),b=c.a.offsetWidth,_=d.a.offsetWidth,w=g.a.offsetWidth,function t(){var i;(new Date).getTime()-p>=f?(x.parentNode&&x.parentNode.removeChild(x),e(r)):(!0!==(i=document.hidden)&&void 0!==i||(y=c.a.offsetWidth,v=d.a.offsetWidth,m=g.a.offsetWidth,l()),h=setTimeout(t,50))}(),o(c,(function(t){y=t,l()})),n(c,s(r,'"'+r.family+'",sans-serif')),o(d,(function(t){v=t,l()})),n(d,s(r,'"'+r.family+'",serif')),o(g,(function(t){m=t,l()})),n(g,s(r,'"'+r.family+'",monospace'))},document.body?y():document.addEventListener?document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t),y()})):document.attachEvent("onreadystatechange",(function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),y())})))}))},t.exports=a})),Th={fonts_loaded:Promise.resolve(),last_loaded:null,loadFonts:function(t){var e=this,i=JSON.stringify(t)===this.last_loaded;return t&&!i&&function(){var i=[];for(var n in t)!function(n){Array.isArray(t[n])?t[n].forEach((function(t){return i.push(e.loadFontFace(n,t))})):i.push(e.loadFontFace(n,t[n]))}(n);e.last_loaded=JSON.stringify(t),e.fonts_loaded=Promise.all(i.filter((function(t){return t})))}(),this.fonts_loaded},loadFontFace:function(t,e){if(null!=e&&("object"===vn(e)||"external"===e)){var i={family:t},n=Promise.resolve();"object"===vn(e)&&(Object.assign(i,e),"string"==typeof e.url&&(n=this.injectFontFace(i)));var r=new kh(t,i);return n.then((function(){return r.load()})).then((function(){Ar("debug","Font face '".concat(t,"' is available"),i)}),(function(){Ar("debug","Font face '".concat(t,"' is NOT available"),i)}))}},injectFontFace:function(t){var e=this,i=t.family,n=t.url,r=t.weight,o=t.style;void 0===this.supports_native_font_loading&&(this.supports_native_font_loading=void 0!==window.FontFace);var a=Promise.resolve(n);return"blob:"===n.slice(0,5)&&(a=Tr.io(n,6e4,"arraybuffer").then((function(t){var i=new Uint8Array(t);if(e.supports_native_font_loading)return i;for(var n="",r=0;r<i.length;r++)n+=String.fromCharCode(i[r]);return"data:font/opentype;base64,"+btoa(n)}))),a.then((function(t){var n,a,s;e.supports_native_font_loading?("string"==typeof t?n=new FontFace(i,"url(".concat(encodeURI(t),")"),{weight:r,style:o}):t instanceof Uint8Array&&(n=new FontFace(i,t,{weight:r,style:o})),document.fonts.add(n),Ar("trace","Adding FontFace to document.fonts:",n)):(a="\n                    @font-face {\n                        font-family: '".concat(i,"';\n                        font-weight: ").concat(r||"normal",";\n                        font-style: ").concat(o||"normal",";\n                        src: url(").concat(encodeURI(t),");\n                    }\n                "),(s=document.createElement("style")).appendChild(document.createTextNode("")),document.head.appendChild(s),s.sheet.insertRule(a,0),Ar("trace","Injecting CSS font face:",a))}))}},Sh=function(){function t(){mn(this,t),this.vertical_text_buffer=1,this.horizontal_text_buffer=1,this.layout=su("binary-tree")}return _n(t,[{key:"createCanvas",value:function(t,e){var i=document.createElement("canvas");return t&&e&&(i.width=t,i.height=e),i.style.backgroundColor="transparent",i}},{key:"setFont",value:function(t,e){var i=e.font_css,n=e.fill,r=e.stroke,o=e.stroke_width,a=e.px_size,s=e.supersample;this.px_size=a;var u=Tr.device_pixel_ratio*s;r&&0<o&&(t.strokeStyle=r,t.lineWidth=o*u),t.fillStyle=n,t.textBaseline="bottom",t.font=i,t.miterLimit=2}},{key:"textSizes",value:function(t,e,i){var n=this;return Th.loadFonts().then((function(){return To.add({type:"textSizes",run:n.processTextSizesTask.bind(n),texts:e,tile_id:t,cursor:{ctx:i,styles:Object.keys(e),texts:null,style_idx:null,text_idx:null}})}))}},{key:"processTextSizesTask",value:function(t){var e,i=t.cursor,n=t.texts,r=i.ctx;for(i.style_idx=i.style_idx||0;i.style_idx<i.styles.length;){var o=i.styles[i.style_idx];null==i.text_idx&&(i.text_idx=0,i.texts=Object.keys(n[o]));for(var a=n[o],s=!0;i.text_idx<i.texts.length;){var u=i.texts[i.text_idx],l=a[u],h=l.text_settings;if(s&&(this.setFont(r,h),s=!1),l.size=this.textSize(r,o,u,h).size,h.can_articulate){var c=!1,f=!1;if(Lh(u)&&(Ph(u)?c=!0:f=!0),l.isRTL=c,l.no_curving=f||(e=u,Fh.test(e)),l.vertical_buffer=this.vertical_text_buffer+h.outline_width+(h.padding[0]+h.padding[2])/2,l.segment_sizes=[],!l.no_curving){var p=function(t,e){var i=e?1:Uh;if(t.length<i)return[t];var n=t;if(Sh.cache.segment[n])return Sh.cache.stats.segment_hits++,Sh.cache.segment[n];var r=[];if(Rh.exec(t)){r=t.split(jh);for(var o,a=-1,s=0;s<r.length-1;s++)0<s&&(o=Nh.exec(r[s]))&&(r[s]=r[s].substring(o[0].length),r[s-1]+=o[0],a+=o[0].length),a+=1+r[s].length,r[s]+=t.slice(a,a+1);t=""}for(;t.length;){for(var u="",l=t,h=0;h<i&&l.length;h++){var c=(zh.exec(l)||l)[0];u+=c,l=l.substring(c.length)}r.push(u),t=t.substring(u.length)}return e&&r.reverse(),Sh.cache.stats.segment_misses++,Sh.cache.segment[n]=r}(u,c);l.segments=p;for(var d=0;d<p.length;d++)l.segment_sizes.push(this.textSize(r,o,p[d],h).size)}}if(i.text_idx++,!To.shouldContinue(t))return!1}i.text_idx=null,i.style_idx++}return To.finish(t,{texts:n}),!0}},{key:"textSize",value:function(e,i,n,r){var o=r.transform,a=r.text_wrap,s=r.max_lines,u=r.stroke_width,l=void 0===u?0:u,h=r.supersample,c=r.padding,f=r.outline_width,p=r.can_articulate;if(t.cache.text[i]=t.cache.text[i]||{},t.cache.text[i][n])return t.cache.stats.text_hits++,t.cache.text[i][n];t.cache.stats.text_misses++,t.cache.text_count++;var d=Tr.device_pixel_ratio*h,g=this.applyTextTransform(n,o),y=d*(this.vertical_text_buffer+f+(c[0]+c[2])/2),v=d*(this.horizontal_text_buffer+f+l+(c[1]+c[3])/2),m=2*d,b=this.px_size+m,_=Vh.parse(g,a,s,b,e),w=_.height,x=_.width,M=_.lines,E=[x/d,w/d];p||(E[0]+=2*v/d,E[1]+=2*y/d);var A=[x+2*v,w+2*y],k=[A[0]/d,A[1]/d];return t.cache.text[i][n]={lines:M,size:{collision_size:E,texture_size:A,logical_size:k,line_height:b}},t.cache.text[i][n]}},{key:"drawTextMultiLine",value:function(t,e,i,n,r,o){var a=Pn(i,2),s=a[0],u=a[1],l=Tr.device_pixel_ratio*r.supersample,h=r.stroke_width||0,c=r.stroke;r.background_color&&(t.fillStyle=r.background_color,t.fillRect(s,u,n.texture_size[0],n.texture_size[1]));var f=r.outline_width*l,p=r.outline_color;f&&p&&(t.strokeStyle=p,t.lineWidth=f,t.strokeRect(s+f/2,u+f/2,n.texture_size[0]-f,n.texture_size[1]-f)),(r.background_color||f&&p)&&this.setFont(t,r);for(var d,g,y,v,m=n.line_height,b=u,_=0;_<e.length;_++){var w=e[_];this.drawTextLine(t,w,[s,b],n,r,o),b+=m}Au.draw_label_collision_boxes&&(t.save(),d=l*(this.horizontal_text_buffer+r.outline_width+h+(r.padding[1]+r.padding[3])/2),g=l*(this.vertical_text_buffer+r.outline_width+(r.padding[0]+r.padding[2])/2),y=n.collision_size,t.strokeStyle="blue",t.lineWidth=2,t.strokeRect(s+d,u+g,l*y[0],l*y[1]),"curved"===o&&c&&0<h&&t.strokeRect(s+n.texture_size[0]+d,u+g,l*y[0],l*y[1]),t.restore()),Au.draw_label_texture_boxes&&(t.save(),v=n.texture_size,t.strokeStyle="green",t.lineWidth=2,t.strokeRect(s+2,u+2,v[0]-4,v[1]-4),"curved"===o&&c&&0<h&&t.strokeRect(s+2+n.texture_size[0],u+2,v[0]-4,v[1]-4),t.restore())}},{key:"drawTextLine",value:function(t,e,i,n,r,o){var a,s=Pn(i,2),u=s[0],l=s[1],h=r.stroke,c=r.stroke_width,f=void 0===c?0:c,p=r.transform,d=r.align,g=r.supersample,y=r.padding,v=r.outline_width,m=Tr.device_pixel_ratio*g,b=(d=d||"center",n.texture_size),_=n.line_height,w=m*(this.vertical_text_buffer+v),x=m*(this.horizontal_text_buffer+v+f),M=this.applyTextTransform(e.text,p);"left"===d?a=u+x+y[3]*m:"center"===d?a=u+b[0]/2-e.width/2-(y[1]-y[3])*m/2:"right"===d&&(a=u+b[0]-e.width-x-y[1]*m);var E,A=l+w+_+y[0]*m;h&&0<f&&(E="curved"===o?b[0]:0,t.strokeText(M,a+E,A)),t.fillText(M,a,A)}},{key:"rasterize",value:function(e,i,n,r,o,a){return To.removeForTile(n),To.add({type:"rasterizeLabels",run:this.processRasterizeTask.bind(this),cancel:t.returnNoTextures,pause_factor:2,user_moving_view:!1,texts:e,textures:i,texture_prefix:r,gl:o,tile_id:n,texture_manager:a,cursor:{styles:Object.keys(e),texts:null,style_idx:0,text_idx:null,texture_idx:0,texture_names:[]}})}},{key:"processRasterizeTask",value:function(t){if(!To.shouldContinue(t))return!1;for(var e=t.cursor,i=t.texts,n=t.textures;e.texture_idx<t.textures.length;){for(var r=!1,o=n[e.texture_idx],a=this.createCanvas.apply(this,Rn(o.texture_size)),s=a.getContext("2d");e.style_idx<e.styles.length;){var u=e.styles[e.style_idx];null==e.text_idx&&(e.text_idx=0,e.texts=Object.keys(i[u]));for(var l=i[u],h=!0;e.text_idx<e.texts.length;){var c=e.texts[e.text_idx],f=l[c],p=f.text_settings;if(h&&(this.setFont(s,p),h=!1),p.can_articulate){f.texcoords=f.texcoords||{};for(var d=0;d<f.type.length;d++){var g=f.type[d];switch(g){case"straight":if(f.textures[d]!==e.texture_idx)continue;var y,v,m,b,_=f.isRTL?c.split().reverse().join():c,w=o.texcoord_cache[u][_],x=void 0;w.texcoord?x=w.texcoord:(y=w.texture_position,m=(v=this.textSize(s,u,_,p)).size,b=v.lines,this.drawTextMultiLine(s,b,y,m,p,g),x=t.texture_manager.getTexcoordsForSprite(y,m.texture_size,o.texture_size),w.texcoord=x),f.texcoords[g]={texcoord:x,texture_id:w.texture_id};break;case"curved":var M=f.segments;f.texcoords.curved=[],f.texcoords_stroke=[];for(var E,A,k,T,S,I,L,O,C=0;C<M.length;C++)f.textures[d][C]===e.texture_idx&&(E=M[C],T=k=void 0,(A=o.texcoord_cache[u][E]).texcoord&&A.texcoord_stroke?(k=A.texcoord,T=A.texcoord_stroke):(S=A.texture_position,L=(I=this.textSize(s,u,E,p)).size,O=I.lines,this.drawTextMultiLine(s,O,S,L,p,g),k=t.texture_manager.getTexcoordsForSprite(S,L.texture_size,o.texture_size),T=p.stroke&&0<p.stroke_width?t.texture_manager.getTexcoordsForSprite([S[0]+L.texture_size[0],S[1]],L.texture_size,o.texture_size):(r=!0,t.texture_manager.getTexcoordsForSprite([o.texture_size[0],o.texture_size[1]],[0,0],o.texture_size)),A.texcoord=k,A.texcoord_stroke=T),f.texcoords_stroke.push(T),f.texcoords.curved.push({texcoord:k,texture_id:A.texture_id}))}}}else{var P=this.textSize(s,u,c,p).lines;for(var R in f.align)f.align[R].texture_id===e.texture_idx&&(this.drawTextMultiLine(s,P,f.align[R].texture_position,f.size,{stroke:p.stroke,stroke_width:p.stroke_width,transform:p.transform,supersample:p.supersample,align:R,background_color:p.background_color,outline_width:p.outline_width,outline_color:p.outline_color,padding:p.padding,fill:p.fill,font_css:p.font_css,px_size:p.px_size}),f.align[R].texcoords=t.texture_manager.getTexcoordsForSprite(f.align[R].texture_position,f.size.texture_size,o.texture_size))}e.text_idx++}e.text_idx=null,e.style_idx++}!0===r&&(s.fillStyle="rgba(0, 0, 0, 0)",s.fillRect(a.width-1,a.height-1,1,1));var j=t.texture_prefix+e.texture_idx;t.texture_manager.create(t.gl,j,{element:a,filtering:"linear",UNPACK_PREMULTIPLY_ALPHA_WEBGL:!0}),e.texture_names.push(j),e.texture_idx++,e.style_idx=0,a.width=0,a.height=0}return To.finish(t,e.texture_names),!0}},{key:"setTextureTextPositions",value:function(t){var e={texture_id:0,texcoord_cache:{}},i=[];for(var n in t){var r=t[n];for(var o in r){var a=r[o],s=a.text_settings,u=s.can_articulate,l=s.stroke,h=s.stroke_width;if(u){a.textures=[],e.texcoord_cache[n]=e.texcoord_cache[n]||{};for(var c=0;c<a.type.length;c++)switch(a.type[c]){case"straight":var f,p=a.isRTL?o.split().reverse().join():o;e.texcoord_cache[n][p]||(f=a.size.texture_size,e.texcoord_cache[n][p]={},this.placeText(f[0],f[1],{can_articulate:u,style:n,word:p})),a.textures[c]=e.texture_id;break;case"curved":a.textures[c]=[];for(var d=0;d<a.segment_sizes.length;d++){var g,y,v=a.segments[d];e.texcoord_cache[n][v]||(y=(g=a.segment_sizes[d].texture_size)[0],l&&0<h&&(y*=2),e.texcoord_cache[n][v]={},this.placeText(y,g[1],{can_articulate:u,style:n,word:v})),a.textures[c].push(e.texture_id)}}}else{var m=a.size.texture_size;this.placeText(m[0],m[1],{can_articulate:u,text_info:a})}}}var b=this.layout.export(),_=b.items,w=b.width,x=b.height;e.texcoord_cache={};for(var M=0,E=_.length;M<E;M++){var A=_[M],k=A.x,T=A.y;if(A.meta.can_articulate){var S=A.meta,I=S.style,L=S.word;e.texcoord_cache[I]=e.texcoord_cache[I]||{},e.texcoord_cache[I][L]||(e.texcoord_cache[I][L]={texture_id:e.texture_id,texture_position:[k,T]})}else{var O=A.meta.text_info;for(var C in O.align)O.align[C].texture_id=e.texture_id,O.align[C].texture_position=[k,T]}}return 0<w&&0<x&&(i[e.texture_id]={texture_size:[w,x],texcoord_cache:e.texcoord_cache}),i}},{key:"placeText",value:function(t,e,i){this.layout.addItem({width:t+this.vertical_text_buffer,height:e+this.vertical_text_buffer,meta:i})}},{key:"applyTextTransform",value:function(t,e){return"capitalize"===e?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)})):"uppercase"===e?t.toUpperCase():"lowercase"===e?t.toLowerCase():t}}],[{key:"fontPixelSize",value:function(e){if(null!=e){var i=Pn((e="string"==typeof e?e:String(e)).match(t.font_size_re)||[],3),n=i[1],r=i[2];return"em"===(r=r||"px")?n*=16:"pt"===r?n/=.75:"%"===r&&(n/=6.25),(n=vo.parsePositiveNumber(n))*Tr.device_pixel_ratio}}},{key:"pruneTextCache",value:function(){t.cache.text_count>t.cache.text_count_max&&(t.cache.text={},t.cache.text_count=0,Ar("debug","CanvasText: pruning text cache")),Object.keys(t.cache.segment).length>t.cache.segment_count_max&&(t.cache.segment={},Ar("debug","CanvasText: pruning segment cache"))}}]),t}();Sh.font_size_re=/((?:[0-9]*\.)?[0-9]+)\s*(px|pt|em|%)?/,Sh.cache={text:{},text_count:0,text_count_max:2e3,segment:{},segment_count_max:2e3,stats:{text_hits:0,text_misses:0,segment_hits:0,segment_misses:0}},Sh.EMPTY_TEXTURES_ARR=[],Sh.returnNoTextures=function(){return Sh.EMPTY_TEXTURES_ARR};var Ih=new RegExp("[---]");function Lh(t){return Ih.test(t)}var Oh="\0-/:-@[-`{----\u2029-",Ch=new RegExp("["+Oh+"]+");function Ph(t){return Ch.test(t)}var Rh=new RegExp("^["+Oh+"-]+"),jh=new RegExp("["+Oh+"-----]"),Nh=new RegExp("^[-----]+"),Dh="[------------------------------------------]",zh=new RegExp("^.(?:"+Dh+"+)?([]\\W(?:"+Dh+"+)?)*"),Bh={Mongolian:"-"},Hh=Object.keys(Bh).map((function(t){return Bh[t]})).join(""),Fh=new RegExp("["+Hh+"]"),Uh=2,Vh=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1/0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;mn(this,t),this.width=0,this.height=0,this.lines=[],this.max_lines=i,this.text_wrap=n,this.context=e}return _n(t,[{key:"createLine",value:function(t){return this.lines.length<this.max_lines&&new qh(t,this.text_wrap)}},{key:"push",value:function(t){if(this.lines.length<this.max_lines){var e=this.context.measureText(t.text).width;return(t.width=e)>this.width&&(this.width=Math.ceil(e)),this.lines.push(t),this.height+=t.height,!0}return this.addEllipsis(),!1}},{key:"advance",value:function(t,e){return!!this.push(t)&&this.createLine(e)}},{key:"addEllipsis",value:function(){var e=this.lines[this.lines.length-1],i=Math.ceil(this.context.measureText(t.ellipsis).width);e.append(t.ellipsis),e.width+=i,e.width>this.width&&(this.width=e.width)}},{key:"finish",value:function(t){t?this.push(t):this.addEllipsis()}}],[{key:"parse",value:function(e,i,n,r,o){for(var a="number"==typeof i?e.split(" "):[e],s=new t(o,n,i),u=s.createLine(r),l=0;l<a.length;l++){for(var h=a[l].split("\n"),c=0===l,f=0;f<h.length&&u;f++){var p=h[f];Lh(p)&&Ph(p[p.length-1])&&(p+="");var d=c?p:" "+p;if(i&&0<l&&u.exceedsTextwrap(d)){if(!(u=s.advance(u,r)))break;u.append(p),c=!0}else u.append(d);f<h.length-1&&(u=s.advance(u,r),c=!0)}l===a.length-1&&s.finish(u)}return s}}]),t}();Vh.ellipsis="...";var qh=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;mn(this,t),this.chars=0,this.text="",this.height=Math.ceil(e),this.text_wrap=i}return _n(t,[{key:"append",value:function(t){this.chars+=t.length,this.text+=t}},{key:"exceedsTextwrap",value:function(t){return t.length+this.chars>this.text_wrap}}]),t}(),Gh={resetText:function(){this.texts={}},freeText:function(t){delete this.texts[t.id]},parseTextFeature:function(t,e,i,n){var r=this.parseTextSource(t,e,i);if(null!=r&&""!==r){var o=Ah.compute(t,e,i);if(o){var a=Ah.key(o);this.texts[n.id]=this.texts[n.id]||{};var s=this.texts[n.id][a]=this.texts[n.id][a]||{};if(r instanceof Object){var u=[],l=r.left+"-"+r.right;for(var h in r){var c,f=r[h];f&&(c=this.computeTextLayout({},t,e,i,n,f,o,l,h),s[f]||(s[f]={text_settings:o,ref:0}),u.push({draw:e,text:f,text_settings_key:a,layout:c}))}return 0<u.length&&u}var p=this.computeTextLayout({},t,e,i,n,r,o);return s[r]||(s[r]={text_settings:o,ref:0}),{draw:e,text:r,text_settings_key:a,layout:p}}}},parseTextSource:function(t,e,i){var n,r=e.text_source||"name";if(null!=r&&"object"===vn(r))for(var o in n={},r)n[o]=this.parseTextSourceValue(r[o],t,i);else n=this.parseTextSourceValue(r,t,i);return n},parseTextSourceValue:function(t,e,i){var n;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("string"==typeof t[r]?n=e.properties[t[r]]:"function"==typeof t[r]&&(n=t[r](i)),n)return n}else"string"==typeof t?n=e.properties[t]:t instanceof Function&&(n=t(i));return n},prepareTextLabels:function(t,e,i){var n=this;return 0===Object.keys(this.texts[t.id]||{}).length?Promise.resolve([]):cr.postMessage(this.main_thread_target+".calcTextSizes",t.id,this.texts[t.id]).then((function(e){var r=e.texts;return t.canceled?(Ar("trace","Style ".concat(n.name,": stop tile build because tile was canceled: ").concat(t.key,", post-calcTextSizes()")),[]):(n.texts[t.id]=r||[],r?n.buildTextLabels(t,i):(ko.abortTile(t.id),[]))}))},collideAndRenderTextLabels:function(t,e,i){var n=this;return this.prepareTextLabels(t,e,i).then((function(i){return 0===i.length?(ko.collide([],e,t.id),Promise.resolve({})):ko.collide(i,e,t.id).then((function(e){if(t.canceled)return Ar("trace","stop tile build because tile was canceled: ".concat(t.key,", post-collide()")),{};var i=n.texts[t.id];return null==i||0===e.length?{}:(n.cullTextStyles(i,e),e.forEach((function(t){var e=t.text_settings_key,n=i[e]&&i[e][t.text];n.text_settings.can_articulate?(n.type||(n.type=[]),-1===n.type.indexOf(t.label.type)&&n.type.push(t.label.type)):(n.align=n.align||{},n.align[t.label.align]={})})),{labels:e,texts:i,textures:[]})}))}))},cullTextStyles:function(t,e){for(var i=0;i<e.length;i++){var n=e[i];t[n.text_settings_key][n.text].ref++}for(var r in t)for(var o in t[r])t[r][o].ref<1&&delete t[r][o];for(var a in t)0===Object.keys(t[a]).length&&delete t[a]},calcTextSizes:function(t,e){return this._canvas_text||(this._canvas_text=new Sh,this._canvas_ctx_for_sizes=this._canvas_text.createCanvas().getContext("2d")),this._canvas_text.textSizes(t,e,this._canvas_ctx_for_sizes)},preprocessText:function(t){if(t&&t.font&&"object"===vn(t.font))return t.font.fill=vo.createPropertyCache(t.font.fill),t.font.stroke&&(t.font.stroke.color=vo.createPropertyCache(t.font.stroke.color)),t.background&&t.background.color&&(t.background.color=vo.createPropertyCache(t.background.color)),t.outline&&(t.outline.color&&(t.outline.color=vo.createPropertyCache(t.outline.color)),t.outline.width&&(t.outline.width=vo.createPropertyCache(t.outline.width,vo.parsePositiveNumber))),t.padding&&(Array.isArray(t.padding)?2===t.padding.length&&(t.padding=[t.padding[0],t.padding[1],t.padding[0],t.padding[1]]):t.padding=Array(4).fill(t.padding),t.padding=vo.createPropertyCache(t.padding,(function(t){return t.map(vo.parsePositiveNumber)}))),t.font.px_size=vo.createPropertyCache(t.font.size||Ah.defaults.size,Sh.fontPixelSize),t.font.stroke&&null!=t.font.stroke.width&&(t.font.stroke.width=vo.createPropertyCache(t.font.stroke.width,vo.parsePositiveNumber)),t.offset=vo.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(vo.parseNumber)})),t.buffer=vo.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(vo.parsePositiveNumber)})),t.repeat_distance=vo.createPropertyCache(t.repeat_distance||er.tile_size,vo.parsePositiveNumber),t},computeTextLayout:function(t,e,i,n,r,o,a,s,u){var l=t||{};return(l=this.computeLayout(l,e,i,n,r)).repeat_distance&&(s&&(l.repeat_group+="/"+s),l.repeat_group+="/"+o),l.subdiv=r.overzoom2,l.align=i.align,l.italic="normal"!==a.style,"right"===u?l.orientation=1:"left"===u&&(l.orientation=-1),l}},Wh=Math.PI/180,Yh=function(){function t(e,i){mn(this,t),this._min_zoom=H.util.constants.DEFAULT_MIN_ZOOM_LEVEL,this._max_zoom=H.util.constants.DEFAULT_MAX_ZOOM_LEVEL,this._viewport=e,this._center_offset=[],this._center_offset_normalized=[],this._viewport_aspect_ratio=1,this._focal_length=[[16,2],[17,2.5],[18,3],[19,4],[20,6]],this._view_matrix=new Float64Array(16),this._projection_matrix=new Float64Array(16),this._heading_matrix=new Float64Array(16),this._tilt_matrix=new Float64Array(16),this._transformation_matrix=new Float64Array(16),this._camera_matrix=new Float64Array(16),this._lookAtData={position:[0,0,0],zoom:0,tile_level:0,tetragon:void 0,bounds:void 0,unpadded_bounds:void 0,distance:void 0,tilt:0,incline:0,heading:180},this._zoom_direction=0,this._horizon=0,this.handleViewportUpdate(!0),i?this.setLookAtData(i):this._updateMatrices(),Nu.replaceBlock("camera","\n            uniform mat4 u_projection;\n            uniform vec3 u_eye;\n            uniform vec2 u_center_offset;\n\n            void cameraProjection (inout vec4 position) {\n                position = u_projection * position;\n            }")}return _n(t,[{key:"getZoomForBounds",value:function(t,e,i,n){var r,o=this.clone(),a=this._max_zoom,s=this._min_zoom,u=(a-s)/2,l=a-u,h=e,c=Qn.getBBoxCenter(Qn.getBBox(t));for(void 0===h?h=c:(r=c[0]-h[0],Math.abs(r)>er.half_circumference_meters+1e-8&&(h[0]+=Math.round(r/er.circumference_meters)*er.circumference_meters));.001<u;)!function(){o.setLookAtData({zoom:l,position:h,tilt:i,heading:n});var e,r,c,f,p,d=o.getLookAtData().bounds;t.every((function(t){return Qn.isPointInsidePolygon(t,d)}))?s=l:(r=(e=Pn(Qn.getBBox(d),4))[0],c=e[1],f=e[2],p=e[3],f-r+1e-8>=er.circumference_meters&&p-c+1e-8>=er.circumference_meters?s=l:a=l),l=a-(u=(a-s)/2)}();return s}},{key:"setZoomConstraints",value:function(t,e){this._min_zoom=t,this._max_zoom=e,this.setLookAtData(this.getLookAtData())}},{key:"setLookAtData",value:function(t,e){var i,n,r,o,a,s=t.position,u=t.zoom;s===i&&t.bounds!==i&&(s=Qn.getBBoxCenter(Qn.getBBox(t.bounds))),u===i&&t.bounds!==i&&(u=this.getZoomForBounds(t.bounds,s,t.tilt,t.heading)),e!==i&&(n=s||this.screenToWorld(e)),u!==i&&(u=Qn.clamp(u,this._min_zoom,this._max_zoom),(r=Tr.zoomToTileLevel(u))!==(o=this._lookAtData.tile_level)&&(this._zoom_direction=o<r?1:-1),this._lookAtData.zoom=u,this._lookAtData.tile_level=r),t.tilt!==i&&(this._lookAtData.tilt=t.tilt),t.heading!==i&&(this._lookAtData.heading=t.heading),e!==i?(this._updateMatrices(),a=this.screenToWorld(e),this._lookAtData.position[0]-=a[0]-n[0],this._lookAtData.position[1]-=a[1]-n[1]):s&&(this._lookAtData.position=s),this._lookAtData.position[2]=0,this._lookAtData.position[1]=Qn.clamp(this._lookAtData.position[1],-er.half_circumference_meters,er.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"getZoomDirection",value:function(){return this._zoom_direction}},{key:"resetZoomDirection",value:function(){this._zoom_direction=0}},{key:"getLookAtData",value:function(){return this._lookAtData}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,i=this._viewport,n=i.width,r=i.height;this._viewport_aspect_ratio=n/r;var o=this._viewport.center.x-(n/2<<0),a=this._viewport.center.y-(r/2<<0);this._center_offset[0]=o,this._center_offset[1]=a,this._center_offset_normalized[0]=o/n,this._center_offset_normalized[1]=a/-r,e||(this._updateMatrices(),this._updateVisibleBounds())}},{key:"setupMatrices",value:function(t,e){Do(t.model_view32,this._view_matrix,t.model),e.uniform("Matrix4fv","u_modelView",t.model_view32),function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],p=e[11],d=e[12],g=e[13],y=e[14],v=e[15],m=i*s-n*a,b=i*u-r*a,_=i*l-o*a,w=n*u-r*s,x=n*l-o*s,M=r*l-o*u,E=h*g-c*d,A=h*y-f*d,k=h*v-p*d,T=c*y-f*g,S=c*v-p*g,I=f*v-p*y,L=m*I-b*S+_*T+w*k-x*A+M*E;L&&(L=1/L,t[0]=(s*I-u*S+l*T)*L,t[1]=(u*k-a*I-l*A)*L,t[2]=(a*S-s*k+l*E)*L,t[3]=(r*S-n*I-o*T)*L,t[4]=(i*I-r*k+o*A)*L,t[5]=(n*k-i*S-o*E)*L,t[6]=(g*M-y*x+v*w)*L,t[7]=(y*_-d*M-v*b)*L,t[8]=(d*x-g*_+v*m)*L)}(t.normal32,t.model_view32),function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],h=e[8],c=h*a-s*l,f=-h*o+s*u,p=l*o-a*u,d=i*c+n*f+r*p;d&&(d=1/d,t[0]=c*d,t[1]=(-h*n+r*l)*d,t[2]=(s*n-r*a)*d,t[3]=f*d,t[4]=(h*i-r*u)*d,t[5]=(-s*i+r*o)*d,t[6]=p*d,t[7]=(-l*i+n*u)*d,t[8]=(a*i-n*o)*d)}(t.inverse_normal32,t.normal32),e.uniform("Matrix3fv","u_normalMatrix",t.normal32),e.uniform("Matrix3fv","u_inverseNormalMatrix",t.inverse_normal32)}},{key:"_updateMatrices",value:function(){var t=this._viewport.height*er.metersPerPixel(this._lookAtData.zoom),e=Tr.interpolate(this._lookAtData.zoom,this._focal_length);this._lookAtData.distance=t/2*e;var i=this._lookAtData.position[0],n=this._lookAtData.position[1];(function(t,e,i,n){var r,o,a,s,u,l,h,c,f,p,d=e[0],g=e[1],y=e[2],v=n[0],m=n[1],b=n[2],_=i[0],w=i[1],x=i[2];Math.abs(d-_)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(y-x)<1e-6?Ro(t):(h=d-_,c=g-w,f=y-x,r=m*(f*=p=1/Math.sqrt(h*h+c*c+f*f))-b*(c*=p),o=b*(h*=p)-v*f,a=v*c-m*h,(p=Math.sqrt(r*r+o*o+a*a))?(r*=p=1/p,o*=p,a*=p):a=o=r=0,s=c*a-f*o,u=f*r-h*a,l=h*o-c*r,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):l=u=s=0,t[0]=r,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=u,t[6]=c,t[7]=0,t[8]=a,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*d+o*g+a*y),t[13]=-(s*d+u*g+l*y),t[14]=-(h*d+c*g+f*y),t[15]=1)})(this._view_matrix,jo(i,n,0),jo(i,n,-1),jo(0,1,0)),this._heading_matrix=Bo(this._heading_matrix);var r=180-this._lookAtData.heading;r*=Wh,this._heading_matrix[0]=Math.cos(r),this._heading_matrix[1]=-Math.sin(r),this._heading_matrix[4]=Math.sin(r),this._heading_matrix[5]=Math.cos(r),this._tilt_matrix=Bo(this._tilt_matrix),r=0<(r=this._lookAtData.tilt?this._lookAtData.tilt*Wh:0)?-r:r,this._tilt_matrix[5]=Math.cos(r),this._tilt_matrix[6]=Math.sin(r),this._tilt_matrix[9]=-Math.sin(r),this._tilt_matrix[10]=Math.cos(r),Do(this._transformation_matrix,this._tilt_matrix,this._heading_matrix),Do(this._view_matrix,this._transformation_matrix,this._view_matrix);var o=2*Math.atan(1/e),a=2*this._lookAtData.distance;this._depth_buffer_adjustment=2/Math.log(a),function(t,e,i,n,r){var o=1/Math.tan(e/2),a=1/(n-r);t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*a,t[15]=0}(this._projection_matrix,o,this._viewport_aspect_ratio,1,a),this._projection_matrix[8]=2*-this._center_offset_normalized[0],this._projection_matrix[9]=2*-this._center_offset_normalized[1],zo(this._projection_matrix,this._projection_matrix,jo(0,0,-this._lookAtData.distance)),this._camera_matrix=Do(this._camera_matrix,this._projection_matrix,this._view_matrix)}},{key:"_updateVisibleBounds",value:function(){var t,e,i,n,r,o=this._viewport,a=o.width,s=o.height,u=o.padding,l=this._lookAtData.tilt*Math.PI/180;this._horizon=Math.max((u.top+s)/2-Math.cos(l)*(u.top*(1-Math.sin(l))+.75*s),0),this._lookAtData.tetragon=[this.screenToWorld([0,this._horizon]),this.screenToWorld([a,this._horizon]),this.screenToWorld([a,s]),this.screenToWorld([0,s])],this._lookAtData.unpadded_bounds=this._clipAgainstGeoBounds(this._lookAtData.tetragon),0===u.left&&0===u.top&&0===u.right&&0===u.bottom?this._lookAtData.bounds=this._lookAtData.unpadded_bounds:(t=u.left,e=Math.max(this._horizon,u.top),i=a-u.right,n=s-u.bottom,r=[this.screenToWorld([t,e]),this.screenToWorld([i,e]),this.screenToWorld([i,n]),this.screenToWorld([t,n])],this._lookAtData.bounds=this._clipAgainstGeoBounds(r))}},{key:"_clipAgainstGeoBounds",value:function(t){var e,i=Pn(Qn.getBBox(t),4),n=i[0],r=i[1],o=i[2],a=i[3],s=er.half_circumference_meters,u=[[n-1,+s],[o+1,+s],[o+1,-s],[n-1,-s]],l=Qn.clipPolygon(u,t)[0],h=Pn(Qn.getBBox(l),4);n=h[0],r=h[1],o=h[2],a=h[3],o-n>=er.circumference_meters&&(l=[[(e=(o-n)/2)-s,a],[e+s,a],[e+s,r],[e-s,r]]);var c=[];return l&&(c=Qn.splitLegs(l,s)),c}},{key:"applyPxOffset",value:function(t){var e=Pn(t,2),i=e[0],n=e[1],r=Math.PI-this._lookAtData.heading*Wh,o=er.metersPerPixel(this._lookAtData.zoom);this._lookAtData.position[0]+=(i*Math.cos(r)+n*Math.sin(r))*o,this._lookAtData.position[1]-=(n*Math.cos(r)-i*Math.sin(r))*o,this._lookAtData.position[1]=Qn.clamp(this._lookAtData.position[1],-er.half_circumference_meters,er.half_circumference_meters),this._updateMatrices(),this._updateVisibleBounds()}},{key:"screenToWorld",value:function(t){var e=Pn(t,2),i=e[0],n=e[1],r=this._viewport,o=r.width,a=r.height;return 0===o||0===a?[0,0]:(i-=o/2,n-=a/2,this._clipCoordsToWorldPlaneCoords([2*(i+o/2)/o-1,1-2*(n+a/2)/a,-1,1]))}},{key:"_clipToScreenCoords",value:function(t){var e=this._viewport,i=e.width,n=e.height;return[(.5*t[0]+.5)*i,n-(.5*t[1]+.5)*n]}},{key:"_isScreenPointInViewPort",value:function(t){var e=this._viewport,i=e.width,n=e.height;return 0<=t[0]&&t[0]<=i&&0<=t[1]&&t[1]<=n}},{key:"worldToScreen",value:function(t,e){var i,n,r,o,a,s,u=1<arguments.length&&void 0!==e&&e;return t[2]||(t[2]=0),u?(i=this._worldToClipCoords(t),a=this._clipToScreenCoords(i)):(n=Math.sign(this._lookAtData.position[0]),r=Math.trunc(this._lookAtData.position[0]/er.circumference_meters+n/2),t[0]+=er.circumference_meters*r,o=this._worldToClipCoords(t),s=a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]+er.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o),this._isScreenPointInViewPort(a)||(o=this._worldToClipCoords([t[0]-er.circumference_meters,t[1],t[2]]),a=this._clipToScreenCoords(o)),this._isScreenPointInViewPort(a)||(a=s))),a}},{key:"getHorizon",value:function(){return this._horizon}},{key:"_clipCoordsToWorldPlaneCoords",value:function(t){var e=[],i=this._lookAtData.distance,n=this._lookAtData.position,r=[0,0,i,0],o=0,a=i*Math.sin(Wh*this._lookAtData.tilt)*Math.cos(Wh*this._lookAtData.heading),s=i*Math.sin(Wh*this._lookAtData.tilt)*Math.sin(Wh*this._lookAtData.heading),u=new Float64Array(16),l=new Float64Array(16);return Ho(u,this._projection_matrix),Fo(e,t,u),e[2]=-1,e[3]=0,Ho(l,this._view_matrix),Fo(e,e,l),function(t,e){var i=e[0],n=e[1],r=e[2],o=e[3],a=i*i+n*n+r*r+o*o;0<a&&(a=1/Math.sqrt(a),t[0]=i*a,t[1]=n*a,t[2]=r*a,t[3]=o*a)}(e,e),Fo(r,r,this._transformation_matrix),0!==e[2]&&(o=-r[2]/e[2]),Uo(e,e,o),[n[0]+(e[0]+s),n[1]+(e[1]+a)]}},{key:"_worldToClipCoords",value:function(t){var e=[t[0],t[1],t[2],1];return Fo(e,e,this._view_matrix),Fo(e,e,this._projection_matrix),Uo(e,e,1/e[3]),e}},{key:"setupProgram",value:function(t){t.uniform("Matrix4fv","u_projection",this._projection_matrix),t.uniform("3f","u_eye",[0,0,this._lookAtData.distance]),t.uniform("2fv","u_center_offset",this._center_offset_normalized),t.uniform("1f","u_tilt",this._lookAtData.tilt*Wh),t.uniform("1f","u_heading",this._lookAtData.heading*Wh),t.uniform("1f","u_near_plane",1),t.uniform("1f","u_depth_buffer_adjustment",this._depth_buffer_adjustment)}},{key:"getTransformationMatrix",value:function(){return this._transformation_matrix}},{key:"getCameraMatrix",value:function(){return this._camera_matrix}},{key:"clone",value:function(){var e=new t(this._viewport,this._lookAtData);return e.setZoomConstraints(this._min_zoom,this._max_zoom),e}},{key:"getViewport",value:function(){return this._viewport}}]),t}();function Kh(t){return void 0===t.x?t[0]:t.x}function Zh(t){return void 0===t.y?t[1]:t.y}function Xh(t,e){return Kh(t)-Kh(e)}function Jh(t,e){return Zh(t)-Zh(e)}function $h(t){return t.sort(Xh)}function Qh(t,e){for(var i,n=t[0],r=n,o=0;o<t.length;o+=1)e(i=t[o],n)<0?n=i:0<e(i,r)&&(r=i);return[n,r]}function tc(t,e){return Object.values(e.reduce((function(e,i){var n=i[+t];return e[n]||(e[n]=[]),e[n].push(i),e}),{}))}function ec(t,e,i){var n=+t,r=e[n],o=i[n];if(o<r)return[];var a=[e];if(o<r)return a;for(var s=e[(1+n)%2],u=t?function(t){return a.push([s,t])}:function(t){return a.push([t,s])},l=r+1;l<o;l+=1)u(l);return a.push(i),a}function ic(t,e){return ec(!1,t,e)}function nc(t,e){return ec(!0,t,e)}function rc(t){var e={},i=[];return t.forEach((function(t){var n=t.key||(Array.isArray(t)?"".concat(t[0],"/").concat(t[1]):"".concat(t.x,"/").concat(t.y));e[n]||(e[n]=!0,i.push(t))})),i}function oc(t){return t.reduce((function(t,e){return t.concat(e)}))}function ac(t,e,i){var n=function(t,e,i){var n=Pn(t,2),r=n[0],o=n[1],a=Pn(e,2),s=a[0],u=a[1],l=Pn(i,2),h=l[0],c=l[1],f=r+(u-o)/(c-o)*(h-r);return[[[r,o]].concat(Rn($h([[s,u],[f,u]]))),[].concat(Rn($h([[s,u],[f,u]])),[[h,c]])]}.apply(void 0,Rn([t,e,i].sort(Jh))),r=Pn(n,2),o=r[0],a=r[1];return rc(function(t,e,i){var n=Pn(t,2),r=n[0],o=n[1],a=Pn(e,2),s=a[0],u=a[1];return sc(r,s,Pn(i,1)[0],o,u)}.apply(void 0,Rn(o)).concat(function(t,e,i){var n=Pn(t,2),r=n[0],o=n[1],a=Pn(e,1)[0],s=Pn(i,2);return sc(s[0],r,a,s[1],o)}.apply(void 0,Rn(a))))}function sc(t,e,i,n,r){var o,a,s,u,l,h,c,f,p,d,g=Math.min(t,e),y=Math.max(t,i),v=Math.min(n,r),m=Math.max(n,r);if(Math.floor(n)===Math.floor(r))return hc(g,y,n);if(m-v<.125)return o=[y,m],s=(a=Pn([g,v],2))[0],u=a[1],h=(l=Pn(o,2))[0],c=l[1],p=uc(f=lc(s,h),u),d=uc(f,c),p.concat(d);function b(t){k=k.concat(hc(T,S,Math.floor(t))),T+=E,S+=A}var _,w,x=.125*((w=m)-(_=v))/(Math.ceil(w)-Math.floor(_)),M=(m-v)/x,E=(e-t)/M,A=(i-t)/M,k=[],T=t,S=t;if(n<r)for(var I=v;I<=m;I+=x)b(I);else for(var L=m;v<=L;L-=x)b(L);return rc(k)}function uc(t,e){return t.map((function(t){return[t,e]}))}function lc(t,e){var i=Math.floor(t),n=Math.floor(e);if(n<i)return[];if(i===n)return[i];for(var r=[],o=i;o<=n;o+=1)r.push(o);return r}function hc(t,e,i){return uc(lc(t,e),i)}var cc=function(){function t(e,i){mn(this,t),Lo(this),this.scene=e,this.createMatrices(),this.bounds=null,this.center_tile=null,this.panning=!1,this.panning_stop_at=0,this.pan_snap_timer=0,this.user_input_at=0,this.user_input_timeout=50,this.user_input_active=!1,this.size={},this.buffer=0,this.wrap=!1!==i.wrapView,this.preserve_tiles_within_zoom=1,this.lookAtManipulator=new Yh(i.viewport),this._viewport=i.viewport,this._offset_buffer=[0,0],this.handleViewportUpdate(!0)}return _n(t,[{key:"update",value:function(){this.pan_snap_timer=(new Date-this.panning_stop_at)/1e3,this.user_input_active=new Date-this.user_input_at<this.user_input_timeout,this.scene.tile_manager.updateTilesVisibilityCounters()}},{key:"handleViewportUpdate",value:function(t){var e=0<arguments.length&&void 0!==t&&t,i=this._viewport,n=i.width,r=i.height;this.size.css={width:n,height:r},this.size.device={width:Math.round(n*Tr.device_pixel_ratio),height:Math.round(r*Tr.device_pixel_ratio)},this.lookAtManipulator.handleViewportUpdate(),e||this.updateBounds()}},{key:"setLookAtData",value:function(e,i){t._setLookAtDataForManipulator(this.lookAtManipulator,e,i),this.updateBounds()}},{key:"getLookAtData",value:function(e){var i=0<arguments.length&&void 0!==e&&e;return t._getLookAtDataFromManipulator(this.lookAtManipulator,i)}},{key:"getBestLookAtData",value:function(e,i,n){var r=2<arguments.length&&void 0!==n&&n,o=this.lookAtManipulator.clone();return t._setLookAtDataForManipulator(o,e,i),t._getLookAtDataFromManipulator(o,r)}},{key:"getTileLevel",value:function(){return this.lookAtManipulator.getLookAtData().tile_level}},{key:"applyPxOffset",value:function(t){var e=this._offset_buffer;e[0]+=t[0],e[1]+=t[1];var i,n,r=Math.abs(e[0]),o=Math.abs(e[1]);(1<=r||1<=o)&&(i=~~e[0],n=~~e[1],this.lookAtManipulator.applyPxOffset([r<1?0:i,o<1?0:n]),1<=r&&(e[0]-=i),1<=o&&(e[1]-=n),this.updateBounds())}},{key:"setPanning",value:function(t){this.panning=t,this.panning||(this.panning_stop_at=+new Date)}},{key:"markUserInput",value:function(){this.user_input_at=+new Date}},{key:"ready",value:function(){return"number"==typeof this.size.css.width&&"number"==typeof this.size.css.height}},{key:"updateBounds",value:function(){var t,e;this.markUserInput(),this.ready()&&(this.center_tile=er.tileForMeters(this.lookAtManipulator.getLookAtData().position,this.lookAtManipulator.getLookAtData().tile_level),t=this.lookAtManipulator.screenToWorld([0,this.size.css.height]),e=this.lookAtManipulator.screenToWorld([this.size.css.width,0]),this.bounds={sw:{x:t[0],y:t[1]},ne:{x:e[0],y:e[1]}},this.scene.tile_manager.updateTilesForView(!0),this.trigger("move"),this.scene.requestRedraw())}},{key:"getTileGridFlatForBBox",value:function(t,e,i,n,r,o){var a,s=4<arguments.length&&void 0!==r?r:0,u=!(5<arguments.length&&void 0!==o)||o,l=this.lookAtManipulator.getLookAtData().tile_level,h=er.tileForMeters([e,t],l),c=er.tileForMeters([n,i],l);h.x-=s,h.y-=s,c.x+=s,c.y+=s,!1===u&&(a=(1<<l)-1,h.x=Math.min(Math.max(0,h.x),a),h.y=Math.min(Math.max(0,h.y),a),c.x=Math.min(Math.max(0,c.x),a),c.y=Math.min(Math.max(0,c.y),a));for(var f=[],p={},d=h.x;d<=c.x;d++)for(var g=h.y;g<=c.y;g++){var y=Go.coord(er.wrapTile({x:d,y:g,z:l},{x:!u,y:!0}));p[y.key]||(p[y.key]=!0,f.push(y))}return f}},{key:"getTileGridFlat",value:function(){return this.getTileGridFlatForBBox(this.bounds.ne.y,this.bounds.sw.x,this.bounds.sw.y,this.bounds.ne.x,this.buffer,this.wrap)}},{key:"getTileGridDistorted",value:function(){return function(t,e,i){function n(e){return Object.values(er.metersToExactTileCoords(e,t.tile_level))}var r,o,a,s,u,l,h,c,f;return rc((r=function(t,e){return e<=0?t:rc((i=oc(tc(!1,t).map((function(t){var i=Pn(Qh(t,Jh),2),n=i[0],r=i[1],o=[n[0],n[1]-e],a=[r[0],r[1]+e];return t.concat(nc(o,n),nc(r,a))}))),oc(tc(!0,i).map((function(t){var i=Pn(Qh(t,Xh),2),n=i[0],r=i[1],o=[n[0]-e,n[1]],a=[r[0]+e,r[1]];return t.concat(ic(o,n),ic(r,a))})))));var i}((s=n(t.tetragon[0]),u=n(t.tetragon[1]),l=n(t.tetragon[3]),h=n(t.tetragon[2]),c=ac(u,s,l),f=ac(l,h,u),rc(c.concat(f))),e),o=t.tile_level,a=i,r.map((function(t){var e=Pn(t,2),i=e[0],n=e[1];return Go.coord(er.wrapTile({x:i,y:n,z:o},{x:!a,y:!0}))}))))}(this.lookAtManipulator.getLookAtData(),this.buffer,this.wrap)}},{key:"findVisibleTileCoordinates",value:function(){if(!this.bounds)return[];var t=this.lookAtManipulator.getLookAtData(),e=t.tilt,i=t.heading;return 0===e&&180===i?this.getTileGridFlat():this.getTileGridDistorted()}},{key:"createMatrices",value:function(){this.matrices={},this.matrices.model=new Float64Array(16),this.matrices.model32=new Float32Array(16),this.matrices.model_view=new Float64Array(16),this.matrices.model_view32=new Float32Array(16),this.matrices.normal=new Float64Array(9),this.matrices.normal32=new Float32Array(9),this.matrices.inverse_normal32=new Float32Array(9)}},{key:"setupTile",value:function(t,e){t.setupProgram(this.matrices,e),this.lookAtManipulator.setupMatrices(this.matrices,e)}},{key:"setupProgram",value:function(t){var e=this.lookAtManipulator.getLookAtData();t.uniform("2fv","u_resolution",[this.size.device.width,this.size.device.height]),t.uniform("3fv","u_map_position",[e.position[0],e.position[1],Math.trunc(1e5*e.zoom)/1e5]),t.uniform("1f","u_meters_per_pixel",er.metersPerPixel(e.zoom)),t.uniform("1f","u_device_pixel_ratio",Tr.device_pixel_ratio),t.uniform("1f","u_view_pan_snap_timer",this.pan_snap_timer),t.uniform("1i","u_view_panning",this.panning),t.uniform("1f","u_horizon",this.lookAtManipulator.getHorizon()/(this.size.css.height/2)),this.lookAtManipulator.setupProgram(t)}},{key:"isAnimating",value:function(){return this.pan_snap_timer<=.5}},{key:"xyToGeo",value:function(t,e){var i=this.lookAtManipulator.screenToWorld([t,e]),n=Pn(er.metersToLatLng(i),2),r=n[0];return{lat:n[1],lng:r}}},{key:"geoToPixel",value:function(t){var e=er.latLngToMeters([t.lng,t.lat]);e.push(t.alt||0);var i=this.lookAtManipulator.worldToScreen(e);return{x:Math.floor(i[0]),y:Math.floor(i[1])}}},{key:"geoToMeters",value:function(t){var e=Pn(er.latLngToMeters([t.lng,t.lat]),2);return{x:e[0],y:e[1],z:t.alt||0}}},{key:"metersToGeo",value:function(t){var e=Pn(er.metersToLatLng([t.x,t.y]),2),i=e[0];return{lat:e[1],lng:i,alt:t.z||0}}},{key:"setZoomConstraints",value:function(t,e){this.lookAtManipulator.setZoomConstraints(t,e)}}],[{key:"_setLookAtDataForManipulator",value:function(t,e,i){var n=e.position,r=e.zoom,o=e.tilt,a=e.heading,s=e.bounds,u={zoom:r,tilt:o,heading:a};if(n&&"number"==typeof n.lng&&"number"==typeof n.lat&&(u.position=er.latLngToMeters([n.lng,n.lat])),s){var l=s.getExterior().getLatLngAltArray(),h=l.length/3,c=Array(h);if(s.getBoundingBox().isCDB())for(var f=l[1],p=0,d=0;d<h;d++){var g,y=l[3*d+1];0<d&&(g=y-f,180<Math.abs(g)&&(p+=f<y?-360:360)),f=y,c[d]=er.latLngToMeters([y+p,l[3*d]])}else for(var v=0;v<h;v++)c[v]=er.latLngToMeters([l[3*v+1],l[3*v]]);u.bounds=c}t.setLookAtData(u,i)}},{key:"_getLookAtDataFromManipulator",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e,n=t.getLookAtData(),r=n.heading,o=n.incline,a=n.tilt,s=n.zoom,u=n.position,l=n.bounds,h=n.unpadded_bounds,c=Pn(er.metersToLatLng(u),2),f=c[0],p=c[1],d=new H.geo.LineString;return(i?h:l).forEach((function(t){var e=er.metersToLatLng(t);d.pushLatLngAlt(e[1],e[0],0)})),{heading:r,incline:o,tilt:a,zoom:s,bounds:new H.geo.Polygon(d),position:{lat:p,lng:f,alt:u[2]}}}}]),t}(),fc=_h.PLACEMENT,pc=128/Math.PI,dc=16384/Math.PI,gc=Object.create(Ju);gc.variants={},Object.assign(gc,Gh),Object.assign(gc,{name:"points",built_in:!0,vertex_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_tile_proxy_depth;uniform bool u_tile_fade_in;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform bool u_view_panning;uniform float u_tilt;uniform mat4 u_model;uniform mat4 u_modelView;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform float u_heading;uniform float u_near_plane;uniform float u_depth_buffer_adjustment;attribute vec4 a_position;attribute vec4 a_shape;attribute vec4 a_color;attribute vec2 a_texcoord;attribute vec2 a_offset;uniform float u_point_type;attribute float a_is_flat;\n#ifdef TANGRAM_IS_TEXT_STYLE\nattribute vec4 a_offsets_alt;attribute vec4 a_pre_angles_alt;attribute vec4 a_angles_alt;attribute vec4 a_offsets;attribute vec4 a_pre_angles;attribute vec4 a_angles;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nattribute float a_is_stick;attribute float a_stick_height;varying float v_is_stick;\n#endif\nvarying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nattribute float a_outline_edge;attribute vec4 a_outline_color;varying float v_outline_edge;varying vec4 v_outline_color;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#define PI 3.14159265359\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\nvec2 rotate2D(vec2 _st,float _angle){return mat2(cos(_angle),-sin(_angle),sin(_angle),cos(_angle))*_st;}vec3 rotateX3D(vec3 _st,float _angle){return mat3(1.,0.,0.,0.,cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle))*_st;}vec3 rotateZ3D(vec3 _st,float _angle){return mat3(cos(_angle),sin(_angle),0.,-sin(_angle),cos(_angle),0.,0.,0.,1.)*_st;}\n#ifdef TANGRAM_IS_TEXT_STYLE\nfloat mix4linear(float a,float b,float c,float d,float x){return mix(mix(a,b,3.*x),mix(b,mix(c,d,3.*(max(x,.66)-.66)),3.*(clamp(x,.33,.66)-.33)),step(0.33,x));}\n#endif\nvoid main(){\n#pragma tangram: setup\n#ifndef TANGRAM_SHOW_HIDDEN_LABELS\nif(a_shape.w==0.){gl_Position=vec4(0.,0.,0.,1.);return;}\n#else\nif(a_shape.w==0.){v_label_hidden=1.;}else{v_label_hidden=0.;}\n#endif\nv_alpha_factor=1.0;v_color=a_color;v_texcoord=a_texcoord;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nv_outline_color=a_outline_color;v_outline_edge=a_outline_edge;if(u_point_type==TANGRAM_POINT_TYPE_SHADER){v_outline_color=a_outline_color;v_outline_edge=a_outline_edge;float size=abs(a_shape.x/128.);v_texcoord=sign(a_shape.xy)*(size+1.0)/size;size+=2.0;v_aa_offset=2.0/size;}\n#endif\nvec4 position=u_modelView*vec4(a_position.xyz,1.);vec4 shape=vec4(a_shape.xy,0.,0.);vec2 offset=vec2(a_offset.x,-a_offset.y);\n#ifdef TANGRAM_POINT_DRAW_STICK\nv_is_stick=a_is_stick;float scaled_stick_height=(sin(u_tilt+(1.5*PI))+1.0)*a_stick_height;offset.y+=(1.0-a_is_stick)*scaled_stick_height;\n#endif\nfloat zoom=clamp(u_map_position.z-u_tile_origin.z,0.,1.);float theta=a_shape.z/4096.;float heading=u_heading;float delta=(heading-PI);float new_theta=theta-delta;float reversed=abs(new_theta)>PI/2. ? 1. : 0.;if(a_is_flat==1.0){\n#ifdef TANGRAM_IS_TEXT_STYLE\nif(a_offsets[0]!=0.){vec4 angles_scaled;vec4 pre_angles_scaled;vec4 offsets_scaled;if(reversed==1.){offsets_scaled=a_offsets_alt*4.;angles_scaled=(PI/16384.)*a_angles_alt;pre_angles_scaled=(PI/128.)*a_pre_angles_alt;}else{offsets_scaled=a_offsets*4.;angles_scaled=(PI/16384.)*a_angles;pre_angles_scaled=(PI/128.)*a_pre_angles;}float pre_angle=mix4linear(pre_angles_scaled[0],pre_angles_scaled[1],pre_angles_scaled[2],pre_angles_scaled[3],zoom);float angle=mix4linear(angles_scaled[0],angles_scaled[1],angles_scaled[2],angles_scaled[3],zoom);float offset_curve=mix4linear(offsets_scaled[0],offsets_scaled[1],offsets_scaled[2],offsets_scaled[3],zoom);shape.xy=rotate2D(shape.xy,pre_angle+PI*reversed);shape.x+=offset_curve;shape.xy=rotate2D(shape.xy,angle);shape.xy+=rotate2D(offset,theta);}else{shape.xy=rotate2D(shape.xy+offset*256.,theta+(PI*reversed));}\n#else\nshape.xy=rotate2D(shape.xy+offset*256.,theta);\n#endif\nshape.xy/=pow(2.,4.+(u_map_position.z-u_tile_origin.w));shape=u_modelView*shape;position+=shape;}else{shape.xy/=256.;\n#ifdef TANGRAM_POINT_DRAW_STICK\nshape.y*=1.0+(scaled_stick_height-1.0)*a_is_stick;\n#endif\nshape.xy=rotate2D(shape.xy+offset,theta);}\n#ifdef TANGRAM_FADE_IN_RATE\nif(u_tile_fade_in){v_alpha_factor*=clamp(u_visible_time*TANGRAM_FADE_IN_RATE,0.,1.);}\n#endif\n#ifdef TANGRAM_FADE_ON_ZOOM_OUT\nv_alpha_factor*=clamp(1.+TANGRAM_FADE_ON_ZOOM_OUT_RATE*(u_map_position.z-u_tile_origin.z),0.,1.);\n#endif\nv_world_position=u_model*position;v_world_position.xy+=shape.xy*u_meters_per_pixel;v_world_position=wrapWorldPosition(v_world_position);\n#pragma tangram: position\ncameraProjection(position);\n#ifdef TANGRAM_LAYER_ORDER\napplyLayerOrder(a_position.w+u_tile_proxy_depth+1.,position);/***Due to the precision loss on depth buffer,we had a z-fighting of translucent points when the distance to the camera was big.*For more information about the problem see: https:*For more information about the fix see: https:*position.z=(2.0*log(position.w/u_near_plane)/log(u_far_plane/u_near_plane)-1.0)*position.w;*/position.z=(log(position.w/u_near_plane)*u_depth_buffer_adjustment-1.0)*position.w;\n#endif\nif(a_is_flat!=1.){position.xy+=shape.xy*position.w*2.*u_device_pixel_ratio/u_resolution;}\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_SHADER){position.xy+=sign(shape.xy)*position.w*u_device_pixel_ratio/u_resolution;}\n#endif\nif(!u_view_panning){snapToPixelGrid(position);}gl_Position=position;}",fragment_shader_src:"uniform vec2 u_resolution;uniform vec3 u_map_position;uniform vec4 u_tile_origin;uniform float u_meters_per_pixel;uniform float u_device_pixel_ratio;uniform float u_visible_time;uniform mat3 u_normalMatrix;uniform mat3 u_inverseNormalMatrix;uniform sampler2D u_texture;uniform float u_point_type;uniform bool u_apply_color_blocks;varying vec4 v_color;varying vec2 v_texcoord;varying vec4 v_world_position;varying float v_alpha_factor;\n#ifdef TANGRAM_HAS_SHADER_POINTS\nvarying vec4 v_outline_color;varying float v_outline_edge;varying float v_aa_offset;\n#endif\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nvarying float v_label_hidden;\n#endif\n#ifdef TANGRAM_POINT_DRAW_STICK\nvarying float v_is_stick;\n#endif\n#define TANGRAM_NORMAL vec3(0., 0., 1.)\n#pragma tangram: camera\n#pragma tangram: material\n#pragma tangram: lighting\n#pragma tangram: raster\n#pragma tangram: global\n#ifdef TANGRAM_HAS_SHADER_POINTS\nfloat _tangram_antialias(float l,float R){float low=R-v_aa_offset;float high=R+v_aa_offset;return 1.-smoothstep(low,high,l);}\n#endif\nvoid mixTextureColor(inout vec4 color){\n#ifdef TANGRAM_HAS_SHADER_POINTS\nif(u_point_type==TANGRAM_POINT_TYPE_TEXTURE){color*=texture2D(u_texture,v_texcoord);}else if(u_point_type==TANGRAM_POINT_TYPE_LABEL){color=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);}else if(u_point_type==TANGRAM_POINT_TYPE_SHADER){float outline_edge=v_outline_edge;vec4 outlineColor=v_outline_color;float l=length(v_texcoord);float outer_alpha=_tangram_antialias(l,1.);float fill_alpha=_tangram_antialias(l,1.-v_outline_edge*0.5)*color.a;float stroke_alpha=(outer_alpha-_tangram_antialias(l,1.-v_outline_edge))*outlineColor.a;\n#ifdef TANGRAM_BLEND_ADD\ncolor.a=stroke_alpha+fill_alpha;color.rgb=color.rgb*fill_alpha+outlineColor.rgb*stroke_alpha;\n#else\ncolor.a=stroke_alpha+fill_alpha*(1.-stroke_alpha);color.rgb=mix(color.rgb*fill_alpha,outlineColor.rgb,stroke_alpha)/max(color.a,0.001);\n#endif\n}\n#else\ncolor=texture2D(u_texture,v_texcoord);color.rgb/=max(color.a,0.001);\n#endif\nif(u_apply_color_blocks){\n#pragma tangram: color\n#pragma tangram: filter\n}color.a*=v_alpha_factor;\n#ifdef TANGRAM_SHOW_HIDDEN_LABELS\nif(v_label_hidden>0.){color.a*=0.5;color.rgb=vec3(1.,0.,0.);}\n#endif\n#if !defined(TANGRAM_BLEND_OVERLAY) && !defined(TANGRAM_BLEND_INLAY) && !defined(TANGRAM_BLEND_ADD)\nif(color.a<TANGRAM_ALPHA_TEST){discard;}\n#endif\n}void main(void){\n#pragma tangram: setup\nvec4 color=v_color;\n#ifdef TANGRAM_POINT_DRAW_STICK\nif(v_is_stick==0.0){mixTextureColor(color);}\n#else\nmixTextureColor(color);\n#endif\ngl_FragColor=color;}",selection:!0,collision:!0,blend:"overlay",init:function(t){var e=0<arguments.length&&void 0!==t?t:{};Ju.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!0,this.defines.TANGRAM_POINT_TYPE_TEXTURE=1,this.defines.TANGRAM_POINT_TYPE_LABEL=2,this.defines.TANGRAM_POINT_TYPE_SHADER=3,this.defines.TANGRAM_POINT_DRAW_STICK=!!this.stick,this.collision_group_points=this.name+"-points",this.collision_group_text=this.name+"-text",this.reset()},setupDefines:function(){"overlay"!==this.blend&&(this.defines.TANGRAM_LAYER_ORDER=!0),this.defines.TANGRAM_FADE_ON_ZOOM_OUT=!0,this.defines.TANGRAM_FADE_ON_ZOOM_OUT_RATE=2,Au.suppress_label_fade_in||this.suppress_fade?(this.fade_in_time=0,this.defines.TANGRAM_FADE_IN_RATE=null):(this.fade_in_time=.15,this.defines.TANGRAM_FADE_IN_RATE=1/this.fade_in_time),Au.suppress_snap_animation||(this.defines.TANGRAM_VIEW_PAN_SNAP_RATE=2),Au.show_hidden_labels&&(this.defines.TANGRAM_SHOW_HIDDEN_LABELS=!0)},reset:function(){this.queues={},this.resetText(),this.texture_missing_sprites={}},addFeature:function(t,e,i){var n,r,o,a=i.tile,s={};if(s.color=this.parseColor(e.color,i),s.texture=e.texture,s.label_texture=null,s.color||s.texture){if(this.hasSprites(s)){if(!(n=this.parseSprite(s,e,i)))return;s.texcoords=n.texcoords}if(s.size=e.size,s.size){if(s.size=vo.evalCachedPointSizeProperty(e.size,n,i),null==s.size)return void Ar({level:"warn",once:!0},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"'size' includes % and/or ratio-based scaling (".concat(JSON.stringify(e.size.value),"); ")+"these can only applied to sprites, but no sprite was specified, skipping features in layer");"number"==typeof s.size&&(s.size=[s.size,s.size])}else s.size=n&&n.css_size||[16,16];e.outline&&(s.outline_width=vo.evalCachedProperty(e.outline.width,i)||vo.defaults.outline.width,s.outline_color=this.parseColor(e.outline.color,i)),s.outline_edge_pct=0,s.outline_width&&s.outline_color&&(r=s.outline_width,s.size[0]+=r,s.size[1]+=r,s.outline_edge_pct=r/Math.min(s.size[0],s.size[1])*2),s.size[0]=Math.min(s.size[0],256),s.size[1]=Math.min(s.size[1],256),s.placement=e.placement,s.placement_min_length_ratio=vo.evalCachedProperty(e.placement_min_length_ratio,i),s.placement===fc.SPACED&&e.placement_spacing&&(s.placement_spacing=vo.evalCachedProperty(e.placement_spacing,i)),s.angle=vo.evalProperty(e.angle,i)||0,s.elevate_by_altitude=!!e.elevate_by_altitude,s.z=e.z?Qn.clamp(vo.evalCachedDistanceProperty(e.z,i),0,32767):vo.defaults.z,s.flat=e.flat,s.tile_edges=e.tile_edges,this.computeLayout(s,t,e,i,a),e.stick&&!s.flat&&(o=vo.parseNumber(vo.evalProperty(e.stick.height,i)),s.stick={color:this.parseColor(e.stick.color,i)||vo.defaults.color,height:o?Math.max(o,0):0});var u=e.text&&!1!==vo.evalProperty(e.text.visible,i)&&this.parseTextFeature(t,e.text,i,a);Array.isArray(u)&&Ar({level:"warn",once:!(u=null)},"Layer '".concat(e.layers[e.layers.length-1],"': ")+"cannot use boundary labels (e.g. 'text_source: { left: ..., right: ... }') for 'text' labels attached to 'points'; "+"provided 'text_source' value was ".concat(JSON.stringify(e.text.text_source))),u&&(u.layout.parent=s,u.layout.priority=e.text.priority?Math.max(u.layout.priority,s.priority+.5):s.priority+.5,u.layout.move_into_tile=!1,ko.addStyle(this.collision_group_text,a.id)),this.queueFeature({feature:t,draw:e,context:i,style:s,text_feature:u},a),ko.addStyle(this.collision_group_points,a.id)}},hasSprites:function(t){return t.texture&&this.textureManager.textures[t.texture]&&this.textureManager.textures[t.texture].sprites},getSpriteInfo:function(t,e){var i=this.textureManager.textures[t.texture].sprites[e]&&this.textureManager.getSpriteInfo(t.texture,e);return e&&!i?(this.texture_missing_sprites[t.texture]=this.texture_missing_sprites[t.texture]||{},this.texture_missing_sprites[t.texture][e]||(Ar("debug","Style: in style '".concat(this.name,"', could not find sprite '").concat(e,"' for texture '").concat(t.texture,"'")),this.texture_missing_sprites[t.texture][e]=!0)):i&&(i.sprite=e),i},parseSprite:function(t,e,i){var n=vo.evalProperty(e.sprite,i);return this.getSpriteInfo(t,n)||this.getSpriteInfo(t,e.sprite_default)},queueFeature:function(t,e){this.tile_data[e.id]&&this.queues[e.id]||this.startData(e),this.queues[e.id]=this.queues[e.id]||[],this.queues[e.id].push(t)},endData:function(t){var e=this;if(t.canceled)return Ar("trace","Style ".concat(this.name,": stop tile build because tile was canceled: ").concat(t.key)),Promise.resolve();var i=this.queues[t.id];delete this.queues[t.id];var n=[],r=[];return i.forEach((function(t){for(var i=t.style,o=t.feature,a=o.geometry,s=e.buildLabels(i.size,a,i),u=0;u<s.length;u++){var l,h=s[u],c={feature:o,draw:t.draw,context:t.context,style:i,label:h};r.push(c),t.text_feature&&(l={feature:o,draw:t.text_feature.draw,context:t.context,text:t.text_feature.text,text_settings_key:t.text_feature.text_settings_key,layout:t.text_feature.layout,point_label:h,linked:c},n.push(l),t.draw.text.optional||(c.linked=l))}})),Promise.all([ko.collide(r,this.collision_group_points,t.id).then((function(t){t.forEach((function(t){e.feature_style=t.style,e.feature_style.label=t.label,e.feature_style.linked=t.linked,Ju.addFeature.call(e,t.feature,t.draw,t.context)}))})),this.collideAndRenderTextLabels(t,this.collision_group_text,n)]).then((function(i){var n=Pn(i,2)[1],r=n.labels,o=n.texts;return r&&o&&r.forEach((function(t){var i=t.text_settings_key,n=o[i]&&o[i][t.text],r=e.feature_style;r.label=t.label,r.linked=t.linked,r.size=n.size.logical_size,r.angle=0,t.label.text_data={text_info:n,text_settings_key:i,text:t.text},r.label_texture=e.textureManager.default,Ju.addFeature.call(e,t.feature,t.draw,t.context)})),e.freeText(t),Ju.endData.call(e,t)}))},_preprocess:function(t){t.color=vo.createColorPropertyCache(t.color),t.texture=void 0!==t.texture?t.texture:this.texture,t.outline&&(t.outline.color=vo.createColorPropertyCache(t.outline.color),t.outline.width=vo.createPropertyCache(t.outline.width,vo.parsePositiveNumber)),t.z=vo.createPropertyCache(t.z,vo.parseUnits);try{t.size=vo.createPointSizePropertyCache(t.size)}catch(e){return Ar({level:"warn",once:!0},"Layer '".concat(t.layers[t.layers.length-1],"': ")+"".concat(e," (").concat(JSON.stringify(t.size),"), skipping features in layer")),null}return t.offset=vo.createPropertyCache(t.offset,(function(t){return Array.isArray(t)&&t.map(vo.parseNumber)})),t.buffer=vo.createPropertyCache(t.buffer,(function(t){return(Array.isArray(t)?t:[t,t]).map(vo.parsePositiveNumber)})),t.repeat_distance=vo.createPropertyCache(t.repeat_distance,vo.parseNumber),null==t.repeat_group&&(t.repeat_group=t.layers.join("-")),t.placement=fc[t.placement&&t.placement.toUpperCase()],null==t.placement&&(t.placement=fc.VERTEX),t.placement_spacing=null!=t.placement_spacing?t.placement_spacing:80,t.placement_spacing=vo.createPropertyCache(t.placement_spacing,vo.parsePositiveNumber),t.placement_min_length_ratio=null!=t.placement_min_length_ratio?t.placement_min_length_ratio:1,t.placement_min_length_ratio=vo.createPropertyCache(t.placement_min_length_ratio,vo.parsePositiveNumber),"number"==typeof t.angle?t.angle=t.angle*Math.PI/180:t.angle=t.angle||0,t.text=this.preprocessText(t.text),t.text&&(t.text.key=t.key,t.text.group=t.group,t.text.layers=t.layers,t.text.order=t.order,t.text.repeat_group=t.text.repeat_group||t.repeat_group,t.text.anchor=t.text.anchor||this.default_anchor,t.text.optional="boolean"==typeof t.text.optional&&t.text.optional,t.text.interactive=t.text.interactive||t.interactive),t.stick&&(t.stick.color=vo.createColorPropertyCache(t.stick.color)),t},default_anchor:["bottom","top","right","left"],computeLayout:function(t,e,i,n,r){var o=t||{};o.id=e,o.units_per_pixel=r.units_per_pixel||1,o.collide=!1!==i.collide,o.anchor=i.anchor,o.offset=vo.evalCachedProperty(i.offset,n)||vo.zeroPair,o.buffer=vo.evalCachedProperty(i.buffer,n)||vo.zeroPair,o.repeat_distance=vo.evalCachedProperty(i.repeat_distance,n),o.repeat_distance&&(o.repeat_distance*=o.units_per_pixel,o.repeat_scale=1,"function"==typeof i.repeat_group?o.repeat_group=i.repeat_group(n):o.repeat_group=i.repeat_group);var a=i.priority;return null!=a?"function"==typeof a&&(a=a(n)):a=-1>>>0,o.priority=a,o},buildTextLabels:function(t,e){for(var i=[],n=0;n<e.length;n++){var r=e[n],o=this.texts[t.id][r.text_settings_key][r.text].size.collision_size;r.label=new _h(r.point_label.position,o,r.point_label.isFlat(),r.layout),i.push(r)}return i},buildLabels:function(t,e,i){var n=!!i.flat,r=[];if("Point"===e.type)r.push(new _h(e.coordinates,t,n,i));else if("MultiPoint"===e.type)for(var o=e.coordinates,a=0;a<o.length;++a){var s=o[a];r.push(new _h(s,t,n,i))}else if("LineString"===e.type)for(var u=xh(e.coordinates,t,n,i),l=0;l<u.length;++l)r.push(u[l]);else if("MultiLineString"===e.type)for(var h=e.coordinates,c=0;c<h.length;c++)for(var f=xh(h[c],t,n,i),p=0;p<f.length;++p)r.push(f[p]);else if("Polygon"===e.type)if(i.placement===fc.CENTROID){var d=er.centroid(e.coordinates);r.push(new _h(d,t,n,i))}else for(var g=e.coordinates,y=0;y<g.length;y++)for(var v=xh(g[y],t,n,i),m=0;m<v.length;++m)r.push(v[m]);else if("MultiPolygon"===e.type)if(i.placement===fc.CENTROID){var b=er.multiCentroid(e.coordinates);r.push(new _h(b,t,n,i))}else for(var _=e.coordinates,w=0;w<_.length;w++)for(var x=_[w],M=0;M<x.length;M++)for(var E=xh(x[M],t,n,i),A=0;A<E.length;++A)r.push(E[A]);return r},makeVertexTemplate:function(t,e){var i,n=t.color||vo.defaults.color,r=e.vertex_data.vertex_layout;return this.fillVertexTemplate(r,"a_position",0,{size:2}),this.fillVertexTemplate(r,"a_position",t.z||0,{size:1,offset:2}),this.fillVertexTemplate(r,"a_position",this.scaleOrder(t.order),{size:1,offset:3}),this.fillVertexTemplate(r,"a_shape",0,{size:4}),this.fillVertexTemplate(r,"a_shape",t.label.layout.collide?0:1,{size:1,offset:3}),this.fillVertexTemplate(r,"a_texcoord",0,{size:2}),this.fillVertexTemplate(r,"a_offset",0,{size:2}),this.fillVertexTemplate(r,"a_color",Vu.mult(n,255),{size:4}),this.defines.TANGRAM_HAS_SHADER_POINTS&&e.variant.shader_point&&(i=t.outline_color||vo.defaults.outline.color,this.fillVertexTemplate(r,"a_outline_color",Vu.mult(i,255),{size:4}),this.fillVertexTemplate(r,"a_outline_edge",t.outline_edge_pct||vo.defaults.outline.width,{size:1})),this.selection&&this.fillVertexTemplate(r,"a_selection_color",Vu.mult(t.selection_color,255),{size:4}),this.fillVertexTemplate(r,"a_is_flat",0,{size:1}),this.defines.TANGRAM_POINT_DRAW_STICK&&t.stick&&(this.fillVertexTemplate(r,"a_is_stick",0,{size:1}),this.fillVertexTemplate(r,"a_stick_height",t.stick.height,{size:1})),this.vertex_template},buildQuad:function(t,e,i,n,r,o,a,s,u,l,h,c,f,p,d,g,y,v,m){return e[0]<=0||e[1]<=0?0:function(t,e,i,n){var r,o,a,s,u,l,h=n.quad,c=n.offset,f=n.offsets,p=n.offsets_alt,d=n.pre_angles,g=n.pre_angles_alt,y=n.angle,v=n.angles,m=n.angles_alt,b=n.is_flat,_=n.elevate_by_altitude,w=n.build_stick_points,x=n.color,M=n.stick_color,E=n.curve,A=n.texcoord_scale,k=n.texcoord_normalize,T=n.pre_angles_normalize,S=n.angles_normalize,I=n.offsets_normalize,L=(L=n.quad_normalize)||1,O=h[0]/2*L,C=h[1]/2*L,P=[[-O,-C],[O,-C],[O,C],[-O,C]],R=e.vertex_elements,j=e.vertex_count,N=e.vertex_layout.index,D=N.a_texcoord,z=N.a_position,B=N.a_shape,H=N.a_offset,F=N.a_offsets,U=N.a_offsets_alt,V=N.a_pre_angles,q=N.a_pre_angles_alt,G=N.a_angles,W=N.a_angles_alt,Y=N.a_is_flat,K=N.a_is_stick,Z=N.a_color;D&&(k=k||1,l=[[o=(r=Pn(A||sl,4))[0],a=r[1]],[s=r[2],a],[s,u=r[3]],[o,u]]);for(var X=0,J=t.length,$=0;$<J;$++){var Q=t[$];if(w){for(var tt=.5*L,et=+L,it=[[-tt,0],[+tt,0],[+tt,et],[-tt,et]],nt=0;nt<4;nt++)D&&(i[D+0]=l[nt][0]*k,i[D+1]=l[nt][1]*k),i[z+0]=Q[0],i[z+1]=Q[1],_&&(i[z+2]=Qn.clamp(Q[2],0,32767)),i[B+0]=it[nt][0],i[B+1]=it[nt][1],i[B+2]=0,i[Z+0]=M[0],i[Z+1]=M[1],i[Z+2]=M[2],i[Z+3]=M[3],i[K+0]=255,e.addVertex(i);R.push(j+0),R.push(j+1),R.push(j+2),R.push(j+2),R.push(j+3),R.push(j+0),j+=4,X+=2}for(var rt=0;rt<4;rt++)D&&(i[D+0]=l[rt][0]*k,i[D+1]=l[rt][1]*k),i[z+0]=Q[0],i[z+1]=Q[1],_&&(i[z+2]=Qn.clamp(Q[2],0,32767)),i[B+0]=P[rt][0],i[B+1]=P[rt][1],i[B+2]=y,i[Z+0]=x[0],i[Z+1]=x[1],i[Z+2]=x[2],i[Z+3]=x[3],i[H+0]=c[0],i[H+1]=c[1],i[Y+0]=b?255:0,w&&(i[K+0]=0),E&&(i[V+0]=T*d[0],i[V+1]=T*d[1],i[V+2]=T*d[2],i[V+3]=T*d[3],i[G+0]=S*v[0],i[G+1]=S*v[1],i[G+2]=S*v[2],i[G+3]=S*v[3],i[F+0]=I*f[0],i[F+1]=I*f[1],i[F+2]=I*f[2],i[F+3]=I*f[3],p&&(i[U+0]=I*p[0],i[U+1]=I*p[1],i[U+2]=I*p[2],i[U+3]=I*p[3],i[q+0]=T*g[0],i[q+1]=T*g[1],i[q+2]=T*g[2],i[q+3]=T*g[3],i[W+0]=S*m[0],i[W+1]=S*m[1],i[W+2]=S*m[2],i[W+3]=S*m[3])),e.addVertex(i);R.push(j+0),R.push(j+1),R.push(j+2),R.push(j+2),R.push(j+3),R.push(j+0),j+=4,X+=2}return X}(t,d,g,{quad:e,quad_normalize:256,offset:s,offsets:u,offsets_alt:l,pre_angles:o,pre_angles_alt:a,angle:4096*i,angles:n,angles_alt:r,is_flat:f,elevate_by_altitude:p,build_stick_points:y,stick_color:y&&Vu.mult(v,255),color:Vu.mult(m||vo.defaults.color,255),curve:c,texcoord_scale:h,texcoord_normalize:65535,pre_angles_normalize:pc,angles_normalize:dc,offsets_normalize:64})},build:function(t,e,i){var n=t.label;return"curved"===n.type?this.buildCurvedLabel(n,t,e,i):this.buildStraightLabel(n,t,e,i)},buildStraightLabel:function(t,e,i,n){var r,o=this.makeVertexTemplate(e,i),a=t.angle||e.angle,s="point"!==t.type?(r=e.size[t.type],sl):(r=e.size,e.texcoords||sl);i.uniforms=i.uniforms||{},e.label_texture?(i.uniforms.u_texture=e.label_texture,i.uniforms.u_point_type=2,i.uniforms.u_apply_color_blocks=!1):(e.texture?(i.uniforms.u_texture=e.texture,i.uniforms.u_point_type=1):(i.uniforms.u_texture=this.textureManager.default,i.uniforms.u_point_type=3),i.uniforms.u_apply_color_blocks=!0);var u=t.offset,l=this.defines.TANGRAM_POINT_DRAW_STICK&&!e.label_texture&&e.stick&&0<e.stick.height,h=this.buildQuad([t.position],r,a,null,null,null,null,u,null,null,s,!1,t.isFlat(),e.elevate_by_altitude,i.vertex_data,o,l,l&&e.stick.color,e.color),c=e.linked&&e.linked.label.id;return this.trackLabel(t,c,i,h,n,l),h},buildCurvedLabel:function(t,e,i,n){for(var r=this.makeVertexTemplate(e,i),o=t.angle,a=0,s=0;s<2;s++)for(var u=0;u<t.num_segments;u++){var l=e.size[t.type][u],h=sl,c=this.getTileMesh(n.tile,this.meshVariantTypeForDraw(e));c.uniforms=c.uniforms||{},c.uniforms.u_texture=e.label_texture,c.uniforms.u_point_type=2,c.uniforms.u_apply_color_blocks=!1;var f=t.offset||[0,0],p=t.position,d=t.angles[u],g=t.offsets[u],y=t.pre_angles[u],v=t.num_segments-u-1,m=t.alt_angles[v],b=t.alt_pre_angles[v],_=t.alt_offsets[v],w=this.buildQuad([p],l,o,d,m,y,b,f,g,_,h,!0,t.isFlat(),e.elevate_by_altitude,c.vertex_data,r,!1,!1,e.color);a+=w;var x=e.linked&&e.linked.label.id;this.trackLabel(t,x,i,w,n,!1)}return a},trackLabel:function(t,e,i,n,r,o){var a=5<arguments.length&&void 0!==o&&o;i.labels=i.labels||{},i.labels.collision=i.labels.collision||{},i.labels["non-collision"]=i.labels["non-collision"]||{};var s=t.layout.collide?i.labels.collision:i.labels["non-collision"];s[t.id]=s[t.id]||{container:{label:t.text_data?Object.assign(t.toJSON(),{text_data:t.text_data}):t.toJSON(),linked:e},ranges:[]};var u=2*n,l=i.vertex_data.offset-i.vertex_data.stride*u;s[t.id].ranges.push([l,u,a])},buildLines:function(t,e,i,n){return this.build(e,i,n)},buildPoints:function(t,e,i,n){return this.build(e,i,n)},buildPolygons:function(t,e,i,n){return this.build(e,i,n)},vertexLayoutForMeshVariant:function(t){var e;return this.vertex_layout||(e=[{name:"a_position",size:4,type:$u.SHORT,normalized:!1},{name:"a_shape",size:4,type:$u.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:$u.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:$u.SHORT,normalized:!1},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_outline_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0,static:[0,0,0,0]},{name:"a_outline_edge",size:1,type:$u.FLOAT,normalized:!1,static:0},{name:"a_selection_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:$u.UNSIGNED_BYTE,normalized:!0}],this.defines&&this.defines.TANGRAM_POINT_DRAW_STICK&&e.push({name:"a_is_stick",size:1,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_stick_height",size:1,type:$u.FLOAT,normalized:!1}),this.vertex_layout=new ol(e),(e=e.map((function(t){return Object.assign({},t)}))).forEach((function(t){"a_outline_color"!==t.name&&"a_outline_edge"!==t.name||(t.static=null)})),this.vertex_layout_shader_point=new ol(e)),t.shader_point?this.vertex_layout_shader_point:this.vertex_layout},meshVariantTypeForDraw:function(t){var e=t.label_texture||t.texture||this.default_mesh_variant.key;return null==gc.variants[e]&&(gc.variants[e]={key:e,shader_point:e===this.default_mesh_variant.key,order:t.label_texture?1:0}),gc.variants[e]},makeMesh:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:{};return n=Object.assign({},n,{fade_in_time:this.fade_in_time}),Ju.makeMesh.call(this,t,e,n)}});var yc=[0,.33,.66,.99],vc=function(t,e,i,n,r){for(var o=[{type:"straight",tolerance:r.no_curving?1.8:1.5},{type:"curved"},{type:"straight",tolerance:2.3}],a=0;a<o.length;a++){var s=o[a],u=void 0;if("straight"===s.type?u=new bc(e,i,n,r,s.tolerance):"curved"===s.type&&!r.no_curving&&2<i.length&&(u=new _c(t,i,n,r)),u&&!u.throw_away)return u}return!1},mc=function(){function t(e,i){mn(this,t),this.id=fh.nextLabelId(),this.layout=i,this.position=[],this.angle=0,this.offset=i.offset.slice(),this.unit_scale=this.layout.units_per_pixel,this.type="",this.throw_away=!1,this._is_flat=e,this._circles=void 0,this.placed=null}return _n(t,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,size:this.size,offset:this.offset,angle:this.angle,breach:this.breach,layout:ph(this.layout),circles:this.getBoundingCircles()}}},{key:"inTileBounds",value:function(){var t=this.getAABB(),e=t.left,i=t.top,n=t.right,r=t.bottom;return Tr.pointInTile([e,i])&&Tr.pointInTile([n,r])}},{key:"getAABBForSegment",value:function(t,e,i,n){var r,o=this.unit_scale,a=e/2,s=i/2,u=Pn(t,2),l=u[0],h=u[1];0===this.offset[0]&&0===this.offset[1]||(l+=(r=Vu.rot(this.offset,this.angle))[0]*o,h-=r[1]*o);var c=[[Math.cos(n),-Math.sin(n)],[Math.sin(n),Math.cos(n)]],f=Vu.multMatrix(c,[-a,-s]),p=Vu.multMatrix(c,[a,-s]),d=Vu.multMatrix(c,[a,s]),g=Vu.multMatrix(c,[-a,s]);return{left:l+Math.min(f[0],p[0],d[0],g[0]),top:h+Math.max(f[1],p[1],d[1],g[1]),right:l+Math.max(f[0],p[0],d[0],g[0]),bottom:h+Math.min(f[1],p[1],d[1],g[1])}}},{key:"isFlat",value:function(){return this._is_flat}},{key:"getBoundingCircles",value:function(){}},{key:"getAABB",value:function(){}}],[{key:"splitLineByOrientation",value:function(t){for(var e=[t[0]],i=0,n=0,r=0,o=e,a=!1,s=1;s<t.length;s++){var u=t[s],l=t[s-1],h=Vu.length(Vu.sub(u,l));u[0]>l[0]?1===r?(e.push(u),n<(i+=h)&&(o=e,n=i,a=!1)):(e=[l,u],n<(i=h)&&(o=e,n=i,a=!1),r=1):u[0]<l[0]?-1===r?(e.unshift(u),n<(i+=h)&&(o=e,n=i,a=!0)):(e=[u,l],n<(i=h)&&(o=e,n=i,a=!0),r=-1):(-1===r?e.unshift(u):(e.push(u),r=1),n<(i+=h)&&(o=e,n=i,a=-1===r))}return[o,a]}}]),t}(),bc=function(){En(e,mc);var t=On(e);function e(i,n,r,o,a){var s;return mn(this,e),(s=t.call(this,r,o)).type="straight",s.size=i,s.throw_away=!s.fit(i,n,o,a),s}return _n(e,[{key:"fit",value:function(t,e,i,n){var r,o=this.unit_scale,a=Pn(mc.splitLineByOrientation(e),2);e=a[0],r=a[1],"number"==typeof i.orientation&&(this.offset[1]+=1.2*(t[1]-i.vertical_buffer),r&&(this.offset[1]*=-1),-1===i.orientation&&(this.offset[1]*=-1));for(var s=xc(e),u=t[0]*o,l=0;l<e.length-1;l++)for(var h=e[l],c=0,f=0,p=l+1,d=void 0;p<e.length;){var g=e[p-1],y=e[p],v=wc(g,y);if(p!==l+1&&(c+=function(t,e){var i,n;for(n=e<t?(i=e,t):(i=t,e);n-i>Math.PI;)i+=2*Math.PI;return Math.abs(n-i)}(v,d)),.1<Math.abs(c))break;if(u/(f+=s[p-1])<n){var m=Vu.mult(Vu.add(h,y),.5);return this.angle=-v,Math.abs(this.angle-Math.PI/2)<.01&&(this.angle=-Math.PI/2,"number"==typeof i.orientation&&(this.offset[1]*=-1)),this.position=m,this.breach=!this.inTileBounds(),!0}d=v,p++}return!1}},{key:"getBoundingCircles",value:function(){var t,e,i,n,r,o,a,s,u,l,h,c,f,p;return this._circles||(t=this.unit_scale,r=-(i=(e=this.size[0]/2*t)*Math.cos(this.angle)),o=-(n=e*Math.sin(this.angle)),a=this.offset[0]*t,s=this.offset[1]*t,l=(u=Pn(this.position,2))[0],h=u[1],h*=-1,a&&(c=[i,n],Vu.normalize(c),c[0]*=a,c[1]*=a,l+=c[0],h+=c[1]),s&&(f=[n,-i],Vu.normalize(f),f[0]*=s,f[1]*=s,l-=f[0],h-=f[1]),i+=l,n+=h,r+=l,o+=h,p=this.size[1]/2*t,this._circles=bh(i,n,r,o,p)),this._circles}},{key:"getAABB",value:function(){var t,e,i,n,r;return this._aabb||(t=this.unit_scale,e=this.size,i=this.layout.buffer,n=(e[0]+2*i[0])*t,r=(e[1]+2*i[1])*t,this._aabb=this.getAABBForSegment(this.position,n,r,this.angle)),this._aabb}}]),e}(),_c=function(){En(e,mc);var t=On(e);function e(i,n,r,o){var a;return mn(this,e),(a=t.call(this,r,o)).type="curved",a.positions=[],a.angles=[],a._aabbs=[],a.pre_angles=[],a.offsets=[],a.num_segments=i.length,a.sizes=i,a.alt_angles=[],a.alt_pre_angles=[],a.alt_offsets=[],a.throw_away=!a.fit(a.sizes,n,o),a}return _n(e,[{key:"toJSON",value:function(){return{id:this.id,type:this.type,is_flat:this._is_flat,position:this.position,breach:this.breach,layout:ph(this.layout),circles:this.getBoundingCircles()}}},{key:"fit",value:function(t,i,n){var r,o=this.unit_scale,a=Math.max.apply(Math,Rn(t.map((function(t){return t[1]})))),s=a*o,u=Pn(mc.splitLineByOrientation(i),2);i=u[0],r=u[1],"number"==typeof n.orientation&&(this.offset[1]+=1.2*(a-n.vertical_buffer),r&&(this.offset[1]*=-1),-1===n.orientation&&(this.offset[1]*=-1));var l=xc(i),h=t.map((function(t){return t[0]*o})),c=l.reduce((function(t,e){return t+e}),0),f=h.reduce((function(t,e){return t+e}),0);if(c<f)return!1;var p=i.length-1;if(p<2)return!1;var d=e.curvaturePlacement(i,c,l,f,0,p),g=i[d];if(-1===d||p-d<2)return!1;this.position=g;for(var y=0;y<h.length;y++){this.positions[y]=[],this.offsets[y]=[],this.angles[y]=[],this.pre_angles[y]=[];for(var v=0;v<yc.length;v++){var m=yc[v],b=Pn(e.scaleLine(m,i),2),_=b[0],w=b[1],x=(g=_[d],e.placeAtIndex(d,_,w,h)),M=x.positions,E=x.offsets,A=x.angles,k=x.pre_angles,T=E.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));if(0===m){this.angle=1/A.length*A.reduce((function(t,e){return t+e}));for(var S=0;S<M.length;S++){var I=M[S],L=k[S],O=h[S],C=L+A[S];this._aabbs.push(this.getAABBForSegment(I,O,s,C))}}this.positions[y].push(M[y]),this.offsets[y].push(T[y]),this.angles[y].push(A[y]),this.pre_angles[y].push(k[y])}}h=t.slice().reverse().map((function(t){return t[0]*o}));for(var P=0;P<h.length;P++){this.alt_offsets[P]=[],this.alt_angles[P]=[],this.alt_pre_angles[P]=[];for(var R=0;R<yc.length;R++){var j=yc[R],N=Pn(e.scaleLine(j,i),2),D=N[0],z=N[1];g=D[d];var B=e.placeAtIndex(d,D,z,h),H=B.offsets,F=B.angles,U=B.pre_angles,V=H.map((function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])/o}));0===j&&(this.alt_angle=1/F.length*F.reduce((function(t,e){return t+e}))),this.alt_offsets[P].push(V[P]),this.alt_angles[P].push(F[P]),this.alt_pre_angles[P].push(U[P])}}return!0}},{key:"getBoundingCircles",value:function(){if(!this._circles){for(var t=[],e=this.unit_scale,i=0;i<this.positions.length;i++){var n=this.sizes[i],r=this.angles[i][0],o=this.positions[i][0],a=n[0]/2*e,s=a*Math.cos(r),u=a*Math.sin(r),l=-s,h=-u,c=Pn(o,2),f=c[0],p=c[1],d=bh(s+=f,u+=p*=-1,l+=f,h+=p,n[1]/2*e);Array.prototype.push.apply(t,d)}this._circles=t}return this._circles}},{key:"getAABB",value:function(){if(!this._aabb){for(var t=1/0,e=-1/0,i=-1/0,n=1/0,r=0;r<this._aabbs.length;r++){var o=this._aabbs[r];t=Math.min(t,o.left),e=Math.max(e,o.top),i=Math.max(i,o.right),n=Math.min(n,o.bottom)}this._aabb={left:t,top:e,right:i,bottom:n}}return this._aabb}}],[{key:"curvaturePlacement",value:function(t,e,i,n,r,o){r=r||0,o=o||t.length-1;for(var a=[],s=r+1;s<o;s++){var u=t[s-1],l=t[s],h=t[s+1],c=Vu.perp(l,u),f=Vu.perp(h,l),p=Vu.angleBetween(c,f);1<p&&(p=1/0),a.push(p)}a.push(1/0);for(var d=[],g=[],y=r,v=0,m=0;m<r;m++)v+=i[m];for(;v+n<e;){for(var b=v+n,_=v,w=y,x=0;w<o&&_+i[w]<b&&(x+=a[w])!==1/0;)_+=i[w],w++;if(0===x)return y;var M=x/(w-y);d.push(x),g.push(M),v+=i[y],y++}if(0===d.length)return-1;var E=Math.min.apply(null,d),A=g[d.indexOf(E)];return E<1.3&&A<.4?d.indexOf(E):-1}},{key:"scaleLine",value:function(t,e){var i=[e[0]],n=[];return e.forEach((function(r,o){var a,s;o!==e.length-1&&(a=Vu.sub(e[o+1],e[o]),s=Vu.mult(a,1+t),i.push(Vu.add(i[o],s)),n.push(Vu.length(s)))})),[i,n]}},{key:"placeAtIndex",value:function(t,i,n,r){var o=i[t],a=Pn(e.getIndicesAndOffsets(t,n,r),2),s=a[0],u=a[1],l=e.getPositionsFromIndicesAndOffsets(i,s,u),h=Pn(e.getAnglesFromIndicesAndOffsets(o,s,i,l),3);return{positions:l,offsets:h[0],angles:h[1],pre_angles:h[2]}}},{key:"getIndicesAndOffsets",value:function(t,e,i){for(var n=i.length,r=[],o=[],a=0,s=0,u=0;a<n;){for(var l=i[a];a<n&&s+.5*l<=u+e[t];){var h=s-u+.5*l;o.push(h),r.push(t),s+=l,l=i[++a]}u+=e[t],t++}return[r,o]}},{key:"getPositionsFromIndicesAndOffsets",value:function(t,e,i){for(var n=[],r=0;r<e.length;r++){var o=e[r],a=i[r],s=wc(t[o],t[o+1]),u=Vu.rot([a,0],s),l=Vu.add(t[o],u);n.push(l)}return n}},{key:"getAnglesFromIndicesAndOffsets",value:function(t,e,i,n){for(var r=[],o=[],a=[],s=0;s<n.length;s++){var u,l,h=n[s],c=e[s],f=Vu.sub(h,t),p=-Vu.angle(f),d=-wc(i[c],i[c+1])-p;0<s&&(u=r[s-1],l=o[s-1],Math.abs(p-u)>Math.PI&&(p+=u<p?-2*Math.PI:2*Math.PI),Math.abs(l-d)>Math.PI&&(d+=l<d?-2*Math.PI:2*Math.PI)),r.push(p),o.push(d),a.push(f)}return[a,r,o]}}]),e}();function wc(t,e){var i=Vu.sub(e,t);return Vu.angle(i)}function xc(t){for(var e=[],i=0;i<t.length-1;i++){var n=t[i],r=t[i+1],o=Math.hypot(n[0]-r[0],n[1]-r[1]);e.push(o)}return e}var Mc=Object.create(gc);Object.assign(Mc,{name:"text",super:gc,built_in:!0,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};Ju.init.call(this,e),this.setupDefines(),this.defines.TANGRAM_HAS_SHADER_POINTS=!1,this.defines.TANGRAM_IS_TEXT_STYLE=!0,this.reset()},makeVertexTemplate:function(t,e){this.super.makeVertexTemplate.apply(this,arguments);var i=e.vertex_data.vertex_layout;return this.fillVertexTemplate(i,"a_pre_angles",0,{size:4}),this.fillVertexTemplate(i,"a_offsets",0,{size:4}),this.fillVertexTemplate(i,"a_angles",0,{size:4}),this.fillVertexTemplate(i,"a_offsets_alt",0,{size:4}),this.fillVertexTemplate(i,"a_pre_angles_alt",0,{size:4}),this.fillVertexTemplate(i,"a_angles_alt",0,{size:4}),this.vertex_template},reset:function(){this.queues={},this.resetText()},addFeature:function(t,e,i){var n=this,r=i.tile,o=t.geometry.type;e.can_articulate="LineString"===o||"MultiLineString"===o,e.supersample_text="LineString"===o||"MultiLineString"===o;var a=this.parseTextFeature(t,e,i,r);a&&(a instanceof Array?a.forEach((function(e){e.feature=t,e.context=i,e.layout.vertex=!1,n.queueFeature(e,r)})):(a.feature=t,a.context=i,a.layout.vertex=!1,this.queueFeature(a,r)),ko.addStyle(this.name,r.id))},endData:function(t){var e=this,i=this.queues[t.id];return delete this.queues[t.id],this.collideAndRenderTextLabels(t,this.name,i).then((function(i){var n=i.labels,r=i.texts;return n&&r&&(e.texts[t.id]=r,n.forEach((function(i){var n=i.text_settings_key,r=e.texts[t.id][n]&&e.texts[t.id][n][i.text],o=e.feature_style;o.label=i.label,i.label.text_data={text_info:r,text_settings_key:n,text:i.text},o.label_texture=e.textureManager.default,r.text_settings.can_articulate?(o.size={},"straight"===i.label.type?o.size.straight=r.size.logical_size:o.size.curved=r.segment_sizes.map((function(t){return t.logical_size}))):o.size=r.size.logical_size,Ju.addFeature.call(e,i.feature,i.draw,i.context)}))),e.freeText(t),Ju.endData.call(e,t).then((function(i){if(i){for(var n in i.meshes)i.meshes[n].uniforms.u_apply_color_blocks=!0;t.mesh_data[e.name]=i}return i}))}))},_preprocess:function(t){return this.preprocessText(t)},buildTextLabels:function(t,e){for(var i=[],n=0;n<e.length;n++){var r,o,a=e[n],s=this.texts[t.id][a.text_settings_key][a.text];a.layout.vertical_buffer=s.vertical_buffer,o=s.text_settings.can_articulate?(r=s.segment_sizes.map((function(t){return t.collision_size})),a.layout.no_curving=s.no_curving,this.buildLabels(r,a.feature.geometry,a.layout,s.size.collision_size)):this.buildLabels(s.size.collision_size,a.feature.geometry,a.layout);for(var u=0;u<o.length;u++){var l=Object.create(a);l.label=o[u],i.push(l)}}return i},buildLabels:function(t,e,i,n){var r,o,a="Point"!==e.type,s=[];if("LineString"===e.type)Array.prototype.push.apply(s,this.buildLineLabels(e.coordinates,t,a,i,n));else if("MultiLineString"===e.type)for(var u=e.coordinates,l=0;l<u.length;++l)Array.prototype.push.apply(s,this.buildLineLabels(u[l],t,a,i,n));else if("Point"===e.type)s.push(new _h(e.coordinates,t,a,i));else if("MultiPoint"===e.type)for(var h=e.coordinates,c=0;c<h.length;++c)s.push(new _h(h[c],t,a,i));else"Polygon"===e.type?(r=er.centroid(e.coordinates),s.push(new _h(r,t,a,i))):"MultiPolygon"===e.type&&(o=er.multiCentroid(e.coordinates),s.push(new _h(o,t,a,i)));return s},buildLineLabels:function(t,e,i,n,r){var o,a=[],s=Math.min(n.subdiv,t.length-1);if(1<s)for(var u=(t.length-1)/s,l=0;l<s;l++){var h=Math.floor(l*u),c=Math.floor((l+1)*u)+1,f=t.slice(h,c),p=vc(e,r,f,i,n);p&&a.push(p)}return a.length<s&&(o=vc(e,r,t,i,n))&&a.push(o),a},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:4,type:$u.SHORT,normalized:!1},{name:"a_shape",size:4,type:$u.SHORT,normalized:!1},{name:"a_texcoord",size:2,type:$u.UNSIGNED_SHORT,normalized:!0},{name:"a_offset",size:2,type:$u.SHORT,normalized:!1},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_angles",size:4,type:$u.SHORT,normalized:!1},{name:"a_offsets",size:4,type:$u.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles",size:4,type:$u.BYTE,normalized:!1},{name:"a_selection_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_is_flat",size:1,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_offsets_alt",size:4,type:$u.UNSIGNED_SHORT,normalized:!1},{name:"a_pre_angles_alt",size:4,type:$u.BYTE,normalized:!1},{name:"a_angles_alt",size:4,type:$u.SHORT,normalized:!1}],this.vertex_layout=new ol(t)),this.vertex_layout},meshVariantTypeForDraw:gc.meshVariantTypeForDraw}),Mc.texture_id=0;var Ec=Object.create(Ol);Object.assign(Ec,{name:"raster",super:Ol,built_in:!0,init:function(){this.raster=this.raster||"color",this.super.init.apply(this,arguments),this.selection=!1,this.defines.SNAP_TO_PIXEL_GRID=!0},_preprocess:function(t){return t.color=t.color||vo.defaults.color,this.super._preprocess.apply(this,arguments)}});var Ac=Object.create(gc);Object.assign(Ac,{name:"custom_icons",collision:!1,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};gc.init.call(this,e)},loadTexture:function(t,e,i){var n,r=t.width,o=t.height,a=t.items,s=document.createElement("canvas"),u=Tr.device_pixel_ratio,l=this.sources[e],h={sprites:{}};if(s.width=r*u,s.height=o*u,l){var c,f=a.length,p=s.getContext("2d");for(p.scale(u,u);c=a[--f];){var d,g=l.getIconBitmapByObjectId(c.meta.objectId,c.meta.id);g&&((d=lu(g))?Ar("error",d):(p.drawImage(g,c.x,c.y,c.width,c.height),h.sprites[c.meta.id]=[c.x,c.y,c.width,c.height]))}}return h.element=s,(n=this.textureManager.create(this.gl,i,h)).retain(),n.loading.then((function(t){return t.name}))},buildRasterTextures:function(t,e){return cr.postMessage(this.main_thread_target+".loadTexture",t.rasters,t.source,t.texture_name).then((function(t){return e.textures.push(t),e}))},addFeature:function(t,e,i){var n=i.tile.rasters,r={};n.items.forEach((function(t){r[t.meta.id]=[t.x,t.y,t.width,t.height]}));var o="".concat(i.tile.source,"_dyn_").concat(i.tile.coords.key,"_").concat(this.generation,"_").concat(i.tile.id);e.texture=i.tile.texture_name=o;var a=Object.assign({},kc,{name:o,width:n.width,height:n.height,sprites:r,manager:this.textureManager});Io.prototype.calculateSprites.apply(a),this.textureManager.textures[o]=a,gc.addFeature.apply(this,arguments),delete this.textureManager.textures[o]}});var kc={filtering:"linear",density:1,valid:!0,power_of_2:!1,texcoords:{},sizes:{},css_sizes:{},aspects:{}},Tc=Object.create(Ol);Object.assign(Tc,{name:"overlays",super:Ol,init:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.selection=e.selection||!0,this.raster=this.raster||"color",this.super.init.apply(this,arguments)},setupRasters:function(){if(!hr.is_main)return!1;if(this.super.setupRasters.call(this))return!0;var t=!1;for(var e in this.sources)if(this.sources[e]instanceof pu){t=!0;break}return!!t&&(this.defines.TANGRAM_MODEL_POSITION_BASE_ZOOM_VARYING=!0,this.replaceShaderBlock("raster",Xu,"Raster"),!0)},loadTextures:function(t,e){var i,n,r,o=this.sources[e],a=t.name;if(t.overlays_config.forEach((function(e){var a,s=e.texcoords,u=e.id,l=o.getMapObjectById(u),h=l.getBitmap();h&&((a=lu(h=hu(h,h.width,h.height)))?Ar("error",a):(i||((i=document.createElement("canvas")).width=t.width,i.height=t.height,n=i.getContext("2d")),n.save(),n.globalAlpha=l.getOpacity(),s.forEach((function(t){return n.drawImage(h,t[0],t[1],t[2],t[3])})),n.restore(),r=!0))})),r){t.element=i;var s={};return s[a]=t,this.super.loadTextures.call(this,s)}var u=this.textureManager.textures[this.textureManager.default];return Promise.resolve([{name:u.name,width:u.width,height:u.height,loaded:u.loaded}])},buildRasterTextures:function(t,e){var i=this.sources[t.source].tileTexture(t);return i?cr.postMessage(this.main_thread_target+".loadTextures",i,t.source).then((function(t){if(!t||t.length<1)return e;if(t.some((function(t){return!t.loaded})))return null;var i=t[0].name;return e.uniforms=e.uniforms||{},e.textures=e.textures||[],e.uniforms.u_raster=i,e.uniforms.u_raster_offset=[0,0,1],e.textures.push(i),e})):Promise.resolve(e)}});var Sc=Object.create(Ju),Ic=[-1,0,1,0,-1,1,-1,1,1,0,1,1,-1,0,1,0,-1,1,-1,1,1,0,1,1];Object.assign(Sc,{name:"skybox",built_in:!0,vertex_shader_src:"uniform float u_horizon;uniform float u_tilt;uniform float u_zoom;attribute vec2 a_position;attribute float a_is_sky;attribute float a_is_top;attribute vec4 a_color;varying vec4 v_color;const float SIN_THRESHOLD_ANGLE=0.96126069082;void main(){v_color=a_color;float sin_tilt=sin(u_tilt);float sky_bottom_alpha=1.-max(sin_tilt-SIN_THRESHOLD_ANGLE,0.)*3.;if((a_position.y==1.&&a_is_sky==0.)||(a_position.y==0.&&a_is_sky==1.)){v_color.w=sky_bottom_alpha;}float fog_height=max((22.-u_zoom)*0.04,0.)*(sin_tilt-.7);float position_z=u_zoom<17. ? .942 : .9418;gl_Position=vec4(a_position.x,a_is_sky*(a_position.y+a_is_top)+1.0-u_horizon-(1.0-a_is_sky)*(1.0-a_position.y)*fog_height,position_z,1.0);}",fragment_shader_src:"varying vec4 v_color;void main(void){gl_FragColor=v_color;}",selection:!1,blend:"inlay",blend_order:1,init:function(){Ju.init.apply(this,arguments),this.selection=!1},_preprocess:function(t){return t.color={top:vo.createColorPropertyCache(t.color.zenith),bottom:vo.createColorPropertyCache(t.color.horizon),fog:vo.createColorPropertyCache(t.color.fog)},t},vertexLayoutForMeshVariant:function(){var t;return this.vertex_layout||(t=[{name:"a_position",size:2,type:$u.FLOAT,normalized:!1},{name:"a_is_sky",size:1,type:$u.FLOAT,normalized:!0},{name:"a_color",size:4,type:$u.UNSIGNED_BYTE,normalized:!0},{name:"a_is_top",size:1,type:$u.FLOAT,normalized:!0}],this.vertex_layout=new ol(t)),this.vertex_layout},makeVertexTemplate:function(){var t=0;return this.vertex_template[t++]=0,this.vertex_template[1]=0,this.vertex_template},parseFeature:function(t,e,i){var n=this.feature_style;return e.color&&e.color.top&&e.color.bottom&&(n.color_top=this.parseColor(e.color.top,i),n.color_bottom=this.parseColor(e.color.bottom,i),n.color_fog=this.parseColor(e.color.fog||"white",i),Array.isArray(n.color_fog)&&(n.color_fog=n.color_fog.slice(),n.color_fog[3]=0)),n},buildGeometry:function(t,e,i){for(var n=this.makeVertexTemplate(e),r=i.vertex_data,o=i.vertex_data.vertex_layout,a=r.vertex_layout.index.a_position,s={top:e.color_top,bottom:e.color_bottom},u={top:e.color_bottom,bottom:e.color_fog},l=0,h=Ic.length-1;l<h;l+=2){n[a+0]=Ic[l],n[a+1]=Ic[l+1];var c=l<12,f=0<Ic[l+1],p=c?s:u;this.fillVertexTemplate(o,"a_is_sky",c?1:0,{size:1}),this.fillVertexTemplate(o,"a_is_top",f?1:0,{size:1}),this.fillVertexTemplate(o,"a_color",Vu.mult(f?p.top:p.bottom,255),{size:4}),r.addVertex(n)}return 4}});var Lc=function(){function t(){mn(this,t),this.styles={},this.base_styles={},this.register(Object.create(Ol)),this.register(Object.create(Jl)),this.register(Object.create(rh)),this.register(Object.create(gc)),this.register(Object.create(Mc)),this.register(Object.create(Ec)),this.register(Object.create(Ac)),this.register(Object.create(Tc)),this.register(Object.create(Sc))}return _n(t,[{key:"init",value:function(){Nu.removeBlock("global"),Nu.removeBlock("setup"),Nu.addBlock("global","#ifdef TANGRAM_VERTEX_SHADER\nvec4 modelPosition(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE*exp2(u_tile_origin.z-u_tile_origin.w),1.)+vec4(0.,1.,0.,0.);}vec4 modelPositionBaseZoom(){return vec4(a_position.xyz/TANGRAM_TILE_SCALE,1.)+vec4(0.,1.,0.,0.);}\n#endif\nvec4 worldPosition(){return v_world_position;}\n#ifdef TANGRAM_VERTEX_SHADER\nvec4 wrapWorldPosition(vec4 world_position){\n#if defined(TANGRAM_WORLD_POSITION_WRAP)\nvec2 anchor=u_tile_origin.xy-mod(u_tile_origin.xy,TANGRAM_WORLD_POSITION_WRAP);world_position.xy-=anchor;\n#endif\nreturn world_position;}\n#endif\n#if defined(TANGRAM_VERTEX_SHADER)\nvec3 worldNormal(){return TANGRAM_NORMAL;}\n#elif defined(TANGRAM_FRAGMENT_SHADER)\nvec3 worldNormal(){return u_inverseNormalMatrix*TANGRAM_NORMAL;}\n#endif\n"),Nu.addBlock("global","void applyLayerOrder(float layer,inout vec4 position){position.z-=layer*TANGRAM_LAYER_DELTA*position.w;}"),Nu.addBlock("global","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nattribute vec4 a_selection_color;varying vec4 v_selection_color;uniform vec4 u_selection_discard0;uniform vec4 u_selection_discard1;uniform vec4 u_selection_discard2;uniform vec4 u_selection_discard3;uniform vec4 u_selection_discard4;uniform vec4 u_selection_discard5;uniform vec4 u_selection_discard6;uniform vec4 u_selection_discard7;uniform vec4 u_selection_discard8;uniform vec4 u_selection_discard9;\n#endif\n"),Nu.addBlock("global","uniform float u_view_pan_snap_timer;void snapToPixelGrid(inout vec4 position){vec2 position_fract=fract((((position.xy/position.w)+1.)*.5)*u_resolution);vec2 position_snap=position.xy+((step(0.5,position_fract)-position_fract)*position.w*2./u_resolution);\n#ifdef TANGRAM_VIEW_PAN_SNAP_RATE\nposition.xy=mix(position.xy,position_snap,clamp(u_view_pan_snap_timer*TANGRAM_VIEW_PAN_SNAP_RATE,0.,1.));\n#else\nposition.xy=position_snap;\n#endif\n}"),Nu.replaceBlock("utils","#ifndef UTILS\n#define UTILS\nbool isLocalSpacePixelOutsideTile(vec4 pixel_local_space_position,float tile_scale){return pixel_local_space_position.x<0.||pixel_local_space_position.x>=tile_scale||pixel_local_space_position.y>0.||pixel_local_space_position.y<=-tile_scale;}\n#endif\n"),Nu.replaceBlock("setup","\n#if defined(TANGRAM_FEATURE_SELECTION) && defined(TANGRAM_VERTEX_SHADER)\nif(a_selection_color.rgb==vec3(0.)||a_selection_color==u_selection_discard0||a_selection_color==u_selection_discard1||a_selection_color==u_selection_discard2||a_selection_color==u_selection_discard3||a_selection_color==u_selection_discard4||a_selection_color==u_selection_discard5||a_selection_color==u_selection_discard6||a_selection_color==u_selection_discard7||a_selection_color==u_selection_discard8||a_selection_color==u_selection_discard9){gl_Position=vec4(0.,0.,0.,1.);return;}v_selection_color=a_selection_color;\n#endif\n"),Nu.defines.TANGRAM_EPSILON=1e-5,Nu.defines.TANGRAM_LAYER_DELTA=1/16384,Nu.defines.TANGRAM_TILE_SCALE="vec3(".concat(er.tile_scale,"., ").concat(er.tile_scale,"., u_meters_per_pixel * ").concat(er.tile_size,".)"),Nu.defines.TANGRAM_HEIGHT_SCALE=er.height_scale,Nu.defines.TANGRAM_ALPHA_TEST=.1,Jl.dash_textures={}}},{key:"destroy",value:function(t){var e=this;Object.keys(this.styles).forEach((function(i){var n=e.styles[i];n.gl===t&&(Ar("trace","StyleManager.destroy: destroying render style ".concat(n.name)),n.base&&e.remove(n.name),n.destroy())}))}},{key:"register",value:function(t){this.styles[t.name]=t,this.base_styles[t.name]=t}},{key:"remove",value:function(t){delete this.styles[t]}},{key:"mix",value:function(t,e){if(t.mixed)return t;t.mixed={};var i=[];t.mix&&(Array.isArray(t.mix)?i.push.apply(i,Rn(t.mix)):i.push(t.mix),(i=i.map((function(t){return e[t]})).filter((function(e){return e&&e!==t}))).forEach((function(e){return t.mixed[e.name]=!0}))),i.push(t),t.animated=i.some((function(t){return t&&t.animated})),t.texcoords=i.some((function(t){return t&&t.texcoords})),t.base=i.map((function(t){return t.base})).filter((function(t){return t})).pop(),t.lighting=i.map((function(t){return t.lighting})).filter((function(t){return null!=t})).pop(),t.texture=i.map((function(t){return t.texture})).filter((function(t){return t})).pop(),t.raster=i.map((function(t){return t.raster})).filter((function(t){return null!=t})).pop(),t.dash=i.map((function(t){return t.dash})).filter((function(t){return null!=t})).pop(),t.dash_background_color=i.map((function(t){return t.dash_background_color})).filter((function(t){return null!=t})).pop(),i.some((function(t){return t.hasOwnProperty("blend")&&t.blend}))&&(t.blend=i.map((function(t){return t.hasOwnProperty("blend")&&t.blend})).filter((function(t){return t})).pop()),t.blend_order=i.map((function(t){return t.blend_order})).filter((function(t){return null!=t})).pop(),t.defines=Object.assign.apply(Object,[{}].concat(Rn(i.map((function(t){return t.defines})).filter((function(t){return t}))))),t.material=Object.assign.apply(Object,[{}].concat(Rn(i.map((function(t){return t.material})).filter((function(t){return t})))));var n=i.map((function(t){return t.draw})).filter((function(t){return t}));return 0<n.length&&(t.draw=uu.apply(void 0,[{}].concat(Rn(n)))),this.mixShaders(t,e,i),t}},{key:"mixShaders",value:function(t,e,i){var n={},r=i.map((function(t){return t.shaders})).filter((function(t){return t}));if(n.defines=Object.assign.apply(Object,[{}].concat(Rn(r.map((function(t){return t.defines})).filter((function(t){return t}))))),n.uniforms={},n._uniforms=t.shaders&&t.shaders.uniforms||{},n._uniform_scopes={},i.filter((function(t){return t.shaders&&t.shaders.uniforms})).forEach((function(t){for(var i in t.shaders.uniforms)!function(i){n._uniform_scopes[i]=t.name,Object.defineProperty(n.uniforms,i,{enumerable:!0,configurable:!0,get:function(){return void 0!==n._uniforms[i]?n._uniforms[i]:e[n._uniform_scopes[i]].shaders.uniforms!==n.uniforms?e[n._uniform_scopes[i]].shaders.uniforms[i]:void 0},set:function(t){n._uniforms[i]=t}})}(i)})),n.extensions=Object.keys(r.map((function(t){return t.extensions})).filter((function(t){return t})).reduce((function(t,e){return"string"==typeof e?t[e]=!0:e.forEach((function(e){return t[e]=!0})),t}),{})||{}),t.shaders&&t.shaders.blocks)for(var o in t.shaders.block_scopes=t.shaders.block_scopes||{},t.shaders.blocks){var a,s=t.shaders.blocks[o];t.shaders.block_scopes[o]=t.shaders.block_scopes[o]||[],Array.isArray(s)?(a=t.shaders.block_scopes[o]).push.apply(a,Rn(s.map((function(){return t.name})))):t.shaders.block_scopes[o].push(t.name)}var u={};return r.forEach((function(t){if(t.blocks){n.blocks=n.blocks||{},n.block_scopes=n.block_scopes||{};var e={};for(var i in t.blocks){var r=t.blocks[i],o=t.block_scopes[i];n.blocks[i]=n.blocks[i]||[],n.block_scopes[i]=n.block_scopes[i]||[],r=Array.isArray(r)?r:[r],o=Array.isArray(o)?o:[o];for(var a=0;a<r.length;a++)u[o[a]]||(e[o[a]]=!0,n.blocks[i].push(r[a]),n.block_scopes[i].push(o[a]))}Object.assign(u,e)}})),Object.assign(t.mixed,u),t.shaders=n,t}},{key:"create",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:{},r=uu({},e);return r.name=t,(r=this.mix(r,n)).base&&this.base_styles[r.base]?this.styles[t]=r=Object.assign(Object.create(this.base_styles[r.base]),r):r.base=null,r}},{key:"build",value:function(t){var e=this,i=Object.keys(t).sort((function(i,n){return e.inheritanceDepth(i,t)-e.inheritanceDepth(n,t)}));for(var n in this.styles)this.base_styles[n]?this.styles[n].reset():delete this.styles[n];var r={};return i.forEach((function(i){r[i]=e.create(i,t[i],r)})),this.styles}},{key:"initStyles",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};for(var i in this.styles)this.styles[i].init(e)}},{key:"inheritanceDepth",value:function(t,e){for(var i=this,n=0;;){var r=e[t];if(!r)break;if(!r.mix)break;if(n++,Array.isArray(r.mix)){n+=Math.max.apply(Math,Rn(r.mix.map((function(n){if(t!==n)return i.inheritanceDepth(n,e)}))));break}if(t===r.mix)break;t=r.mix}return n}}]),t}();function Oc(t){return null==t}var Cc={isNothing:Oc,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:Oc(t)?[]:[t]},repeat:function(t,e){for(var i="",n=0;n<e;n+=1)i+=t;return i},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var i,n,r,o;if(e)for(i=0,n=(o=Object.keys(e)).length;i<n;i+=1)t[r=o[i]]=e[r];return t}};function Pc(t,e){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():"")}((Pc.prototype=Object.create(Error.prototype)).constructor=Pc).prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var Rc=Pc;function jc(t,e,i,n,r){this.name=t,this.buffer=e,this.position=i,this.line=n,this.column=r}jc.prototype.getSnippet=function(t,e){var i,n,r,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,i="",n=this.position;0<n&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(n-1));)if(--n,this.position-n>e/2-1){i=" ... ",n+=5;break}for(r="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){r=" ... ",o-=5;break}return a=this.buffer.slice(n,o),Cc.repeat(" ",t)+i+a+r+"\n"+Cc.repeat(" ",t+this.position-n+i.length)+"^"},jc.prototype.toString=function(t){var e,i="";return this.name&&(i+='in "'+this.name+'" '),i+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(i+=":\n"+e),i};var Nc=jc,Dc=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],zc=["scalar","sequence","mapping"],Bc=function(t,e){var i,n;if(e=e||{},Object.keys(e).forEach((function(e){if(-1===Dc.indexOf(e))throw new Rc('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(i=e.styleAliases||null,n={},null!==i&&Object.keys(i).forEach((function(t){i[t].forEach((function(e){n[String(e)]=t}))})),n),-1===zc.indexOf(this.kind))throw new Rc('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Hc(t,e,i){var n=[];return t.include.forEach((function(t){i=Hc(t,e,i)})),t[e].forEach((function(t){i.forEach((function(e,i){e.tag===t.tag&&n.push(i)})),i.push(t)})),i.filter((function(t,e){return-1===n.indexOf(e)}))}function Fc(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach((function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new Rc("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=Hc(this,"implicit",[]),this.compiledExplicit=Hc(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,i={};function n(t){i[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(n);return i}(this.compiledImplicit,this.compiledExplicit)}Fc.DEFAULT=null,Fc.create=function(t,e){var i,n;switch(arguments.length){case 1:i=Fc.DEFAULT,n=t;break;case 2:i=t,n=e;break;default:throw new Rc("Wrong number of arguments for Schema.create function")}if(i=Cc.toArray(i),n=Cc.toArray(n),!i.every((function(t){return t instanceof Fc})))throw new Rc("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!n.every((function(t){return t instanceof Bc})))throw new Rc("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Fc({include:i,explicit:n})};var Uc=Fc,Vc=new Uc({explicit:[new Bc("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new Bc("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new Bc("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),qc=new Bc("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),Gc=new Bc("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"}),Wc=new Bc("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,i,n,r,o=t.length,a=0,s=!1;if(!o)return!1;if("-"!==(e=t[a])&&"+"!==e||(e=t[++a]),"0"===e){if(a+1===o)return!0;if("b"===(e=t[++a])){for(a++;a<o;a++)if("_"!==(e=t[a])){if("0"!==e&&"1"!==e)return!1;s=!0}return s}if("x"===e){for(a++;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(n=t.charCodeAt(a))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(!(48<=(i=t.charCodeAt(a))&&i<=55))return!1;s=!0}return s}for(;a<o;a++)if("_"!==(e=t[a])){if(":"===e)break;if(!(48<=(r=t.charCodeAt(a))&&r<=57))return!1;s=!0}return!!s&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(a)))},construct:function(t){var e,i,n=t,r=1,o=[];return-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n?0:"0"===e?"b"===n[1]?r*parseInt(n.slice(2),2):"x"===n[1]?r*parseInt(n,16):r*parseInt(n,8):-1!==n.indexOf(":")?(n.split(":").forEach((function(t){o.unshift(parseInt(t,10))})),n=0,i=1,o.forEach((function(t){n+=t*i,i*=60})),r*n):r*parseInt(n,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!Cc.isNegativeZero(t)},represent:{binary:function(t){return"0b"+t.toString(2)},octal:function(t){return"0"+t.toString(8)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return"0x"+t.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Yc=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Kc=/^[-+]?[0-9]+e/,Zc=new Uc({include:[Vc],implicit:[qc,Gc,Wc,new Bc("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!!Yc.test(t)},construct:function(t){var e,i=t.replace(/_/g,"").toLowerCase(),n="-"===i[0]?-1:1,r=[];return 0<="+-".indexOf(i[0])&&(i=i.slice(1)),".inf"===i?1==n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===i?NaN:0<=i.indexOf(":")?(i.split(":").forEach((function(t){r.unshift(parseFloat(t,10))})),i=0,e=1,r.forEach((function(t){i+=t*e,e*=60})),n*i):n*parseFloat(i,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||Cc.isNegativeZero(t))},represent:function(t,e){var i;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Cc.isNegativeZero(t))return"-0.0";return i=t.toString(10),Kc.test(i)?i.replace("e",".e"):i},defaultStyle:"lowercase"})]}),Xc=new Uc({include:[Zc]}),Jc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$"),$c=new Bc("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&null!==Jc.exec(t)},construct:function(t){var e,i,n,r,o,a,s,u=0,l=null,h=Jc.exec(t);if(null===h)throw new Error("Date resolve error");if(e=+h[1],i=h[2]-1,n=+h[3],!h[4])return new Date(Date.UTC(e,i,n));if(r=+h[4],o=+h[5],a=+h[6],h[7]){for(u=h[7].slice(0,3);u.length<3;)u+="0";u=+u}return h[9]&&(l=6e4*(60*+h[10]+ +(h[11]||0)),"-"===h[9]&&(l=-l)),s=new Date(Date.UTC(e,i,n,r,o,a,u)),l&&s.setTime(s.getTime()-l),s},instanceOf:Date,represent:function(t){return t.toISOString()}}),Qc=new Bc("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}}),tf=fs.Buffer,ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",nf=new Bc("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;for(var e,i=0,n=t.length,r=ef,o=0;o<n;o++)if(!(64<(e=r.indexOf(t.charAt(o))))){if(e<0)return!1;i+=6}return i%8==0},construct:function(t){for(var e,i=t.replace(/[\r\n=]/g,""),n=i.length,r=ef,o=0,a=[],s=0;s<n;s++)s%4==0&&s&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|r.indexOf(i.charAt(s));return 0==(e=n%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18==e?(a.push(o>>10&255),a.push(o>>2&255)):12==e&&a.push(o>>4&255),tf?new tf(a):a},predicate:function(t){return tf&&tf.isBuffer(t)},represent:function(t){for(var e,i="",n=0,r=t.length,o=ef,a=0;a<r;a++)a%3==0&&a&&(i+=o[n>>18&63],i+=o[n>>12&63],i+=o[n>>6&63],i+=o[63&n]),n=(n<<8)+t[a];return 0==(e=r%3)?(i+=o[n>>18&63],i+=o[n>>12&63],i+=o[n>>6&63],i+=o[63&n]):2==e?(i+=o[n>>10&63],i+=o[n>>4&63],i+=o[n<<2&63],i+=o[64]):1==e&&(i+=o[n>>2&63],i+=o[n<<4&63],i+=o[64],i+=o[64]),i}}),rf=Object.prototype.hasOwnProperty,of=Object.prototype.toString,af=new Bc("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,i,n,r=[],o=t,a=0,s=o.length;a<s;a+=1){if(e=o[a],n=!1,"[object Object]"!==of.call(e))return!1;for(i in e)if(rf.call(e,i)){if(n)return!1;n=!0}if(!n)return!1;if(-1!==r.indexOf(i))return!1;r.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),sf=Object.prototype.toString,uf=new Bc("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;for(var e,i,n=t,r=new Array(n.length),o=0,a=n.length;o<a;o+=1){if(e=n[o],"[object Object]"!==sf.call(e))return!1;if(1!==(i=Object.keys(e)).length)return!1;r[o]=[i[0],e[i[0]]]}return!0},construct:function(t){if(null===t)return[];for(var e,i,n=t,r=new Array(n.length),o=0,a=n.length;o<a;o+=1)e=n[o],i=Object.keys(e),r[o]=[i[0],e[i[0]]];return r}}),lf=Object.prototype.hasOwnProperty,hf=new Uc({include:[Xc],implicit:[$c,Qc],explicit:[nf,af,uf,new Bc("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,i=t;for(e in i)if(lf.call(i,e)&&null!==i[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]}),cf=new Bc("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}}),ff=new Bc("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,i=/\/([gim]*)$/.exec(t),n="";if("/"===e[0]){if(i&&(n=i[1]),3<n.length)return!1;if("/"!==e[e.length-n.length-1])return!1}return!0},construct:function(t){var e=t,i=/\/([gim]*)$/.exec(t),n="";return"/"===e[0]&&(i&&(n=i[1]),e=e.slice(1,e.length-n.length-1)),new RegExp(e,n)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{var pf=function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}()}catch(o){"undefined"!=typeof window&&(pf=window.esprima)}var df=new Bc("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",i=pf.parse(e,{range:!0});return"Program"===i.type&&1===i.body.length&&"ExpressionStatement"===i.body[0].type&&"FunctionExpression"===i.body[0].expression.type}catch(t){return!1}},construct:function(t){var e,i="("+t+")",n=pf.parse(i,{range:!0}),r=[];if("Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"FunctionExpression"!==n.body[0].expression.type)throw new Error("Failed to resolve function");return n.body[0].expression.params.forEach((function(t){r.push(t.name)})),e=n.body[0].expression.body.range,new Function(r,i.slice(e[0]+1,e[1]-1))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),gf=Uc.DEFAULT=new Uc({include:[hf],explicit:[cf,ff,df]}),yf=Object.prototype.hasOwnProperty,vf=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mf=/[\x85\u2028\u2029]/,bf=/[,\[\]\{\}]/,_f=/^(?:!|!!|![a-z\-]+!)$/i,wf=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xf(t){return 10===t||13===t}function Mf(t){return 9===t||32===t}function Ef(t){return 9===t||32===t||10===t||13===t}function Af(t){return 44===t||91===t||93===t||123===t||125===t}function kf(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?"":76===t?"\u2028":80===t?"\u2029":""}for(var Tf=new Array(256),Sf=new Array(256),If=0;If<256;If++)Tf[If]=kf(If)?1:0,Sf[If]=kf(If);function Lf(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||gf,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Of(t,e){return new Rc(e,new Nc(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function Cf(t,e){throw Of(t,e)}function Pf(t,e){t.onWarning&&t.onWarning.call(null,Of(t,e))}var Rf={YAML:function(t,e,i){var n,r,o;null!==t.version&&Cf(t,"duplication of %YAML directive"),1!==i.length&&Cf(t,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&Cf(t,"ill-formed argument of the YAML directive"),r=parseInt(n[1],10),o=parseInt(n[2],10),1!==r&&Cf(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&Pf(t,"unsupported YAML version of the document")},TAG:function(t,e,i){var n,r;2!==i.length&&Cf(t,"TAG directive accepts exactly two arguments"),n=i[0],r=i[1],_f.test(n)||Cf(t,"ill-formed tag handle (first argument) of the TAG directive"),yf.call(t.tagMap,n)&&Cf(t,'there is a previously declared suffix for "'+n+'" tag handle'),wf.test(r)||Cf(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[n]=r}};function jf(t,e,i,n){var r,o,a,s;if(e<i){if(s=t.input.slice(e,i),n)for(r=0,o=s.length;r<o;r+=1)9===(a=s.charCodeAt(r))||32<=a&&a<=1114111||Cf(t,"expected valid JSON character");else vf.test(s)&&Cf(t,"the stream contains non-printable characters");t.result+=s}}function Nf(t,e,i,n){var r,o,a,s;for(Cc.isObject(i)||Cf(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(r=Object.keys(i)).length;a<s;a+=1)o=r[a],yf.call(e,o)||(e[o]=i[o],n[o]=!0)}function Df(t,e,i,n,r,o){var a,s;if(r=String(r),null===e&&(e={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(o))for(a=0,s=o.length;a<s;a+=1)Nf(t,e,o[a],i);else Nf(t,e,o,i);else t.json||yf.call(i,r)||!yf.call(e,r)||Cf(t,"duplicated mapping key"),e[r]=o,delete i[r];return e}function zf(t){var e=t.input.charCodeAt(t.position);10===e?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Cf(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Bf(t,e,i){for(var n=0,r=t.input.charCodeAt(t.position);0!==r;){for(;Mf(r);)r=t.input.charCodeAt(++t.position);if(e&&35===r)for(;10!==(r=t.input.charCodeAt(++t.position))&&13!==r&&0!==r;);if(!xf(r))break;for(zf(t),r=t.input.charCodeAt(t.position),n++,t.lineIndent=0;32===r;)t.lineIndent++,r=t.input.charCodeAt(++t.position)}return-1!==i&&0!==n&&t.lineIndent<i&&Pf(t,"deficient indentation"),n}function Hf(t){var e=t.position,i=t.input.charCodeAt(e);return 45!==i&&46!==i||i!==t.input.charCodeAt(e+1)||i!==t.input.charCodeAt(e+2)||(e+=3,0!==(i=t.input.charCodeAt(e))&&!Ef(i))?void 0:1}function Ff(t,e){1===e?t.result+=" ":1<e&&(t.result+=Cc.repeat("\n",e-1))}function Uf(t,e){var i,n,r=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),n=t.input.charCodeAt(t.position);0!==n&&45===n&&Ef(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,Bf(t,!0,-1)&&t.lineIndent<=e)a.push(null),n=t.input.charCodeAt(t.position);else if(i=t.line,Vf(t,e,3,!1,!0),a.push(t.result),Bf(t,!0,-1),n=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>e)&&0!==n)Cf(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=r,t.anchor=o,t.kind="sequence",t.result=a,!0)}function Vf(t,e,i,n,r){var o,a,s,u,l,h,c,f,p=1,d=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=4===i||3===i,n&&Bf(t,!0,-1)&&(d=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),1===p)for(;function(t){var e,i,n,r=!1,o=!1,a=t.input.charCodeAt(t.position);if(33===a){if(null!==t.tag&&Cf(t,"duplication of a tag property"),60===(a=t.input.charCodeAt(++t.position))?(r=!0,a=t.input.charCodeAt(++t.position)):33===a?(o=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){for(;0!==(a=t.input.charCodeAt(++t.position))&&62!==a;);t.position<t.length?(n=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):Cf(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!Ef(a);)33===a&&(o?Cf(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),_f.test(i)||Cf(t,"named tag handle cannot contain such characters"),o=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);n=t.input.slice(e,t.position),bf.test(n)&&Cf(t,"tag suffix cannot contain flow indicator characters")}return n&&!wf.test(n)&&Cf(t,"tag name cannot contain such characters: "+n),r?t.tag=n:yf.call(t.tagMap,i)?t.tag=t.tagMap[i]+n:"!"===i?t.tag="!"+n:"!!"===i?t.tag="tag:yaml.org,2002:"+n:Cf(t,'undeclared tag handle "'+i+'"'),1}}(t)||function(t){var e,i=t.input.charCodeAt(t.position);if(38===i){for(null!==t.anchor&&Cf(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Ef(i)&&!Af(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&Cf(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),1}}(t);)Bf(t,!0,-1)?(d=!0,s=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):s=!1;if(s=s&&(d||r),1!==p&&4!==i||(c=1===i||2===i?e:e+1,f=t.position-t.lineStart,1===p?s&&(Uf(t,f)||function(t,e,i){var n,r,o,a,s=t.tag,u=t.anchor,l={},h={},c=null,f=null,p=null,d=!1,g=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=l),a=t.input.charCodeAt(t.position);0!==a;){if(n=t.input.charCodeAt(t.position+1),o=t.line,63!==a&&58!==a||!Ef(n)){if(!Vf(t,i,2,!1,!0))break;if(t.line===o){for(a=t.input.charCodeAt(t.position);Mf(a);)a=t.input.charCodeAt(++t.position);if(58===a)Ef(a=t.input.charCodeAt(++t.position))||Cf(t,"a whitespace character is expected after the key-value separator within a block mapping"),d&&(Df(t,l,h,c,f,null),c=f=p=null),r=d=!(g=!0),c=t.tag,f=t.result;else{if(!g)return t.tag=s,t.anchor=u,1;Cf(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!g)return t.tag=s,t.anchor=u,1;Cf(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===a?(d&&(Df(t,l,h,c,f,null),c=f=p=null),r=d=g=!0):d?r=!(d=!1):Cf(t,"incomplete explicit mapping pair; a key node is missed"),t.position+=1,a=n;if((t.line===o||t.lineIndent>e)&&(Vf(t,e,4,!0,r)&&(d?f=t.result:p=t.result),d||(Df(t,l,h,c,f,p),c=f=p=null),Bf(t,!0,-1),a=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==a)Cf(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return d&&Df(t,l,h,c,f,null),g&&(t.tag=s,t.anchor=u,t.kind="mapping",t.result=l),g}(t,f,c))||function(t,e){var i,n,r,o,a,s,u,l,h,c=!0,f=t.tag,p=t.anchor,d={},g=t.input.charCodeAt(t.position);if(91===g)s=!(r=93),n=[];else{if(123!==g)return;r=125,s=!0,n={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=n),g=t.input.charCodeAt(++t.position);0!==g;){if(Bf(t,!0,e),(g=t.input.charCodeAt(t.position))===r)return t.position++,t.tag=f,t.anchor=p,t.kind=s?"mapping":"sequence",t.result=n,1;c||Cf(t,"missed comma between flow collection entries"),h=null,o=a=!1,63===g&&Ef(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,Bf(t,!0,e)),i=t.line,Vf(t,e,1,!1,!0),l=t.tag,u=t.result,Bf(t,!0,e),g=t.input.charCodeAt(t.position),!a&&t.line!==i||58!==g||(o=!0,g=t.input.charCodeAt(++t.position),Bf(t,!0,e),Vf(t,e,1,!1,!0),h=t.result),s?Df(t,n,d,l,u,h):o?n.push(Df(t,null,d,l,u,h)):n.push(u),Bf(t,!0,e),44===(g=t.input.charCodeAt(t.position))?(c=!0,g=t.input.charCodeAt(++t.position)):c=!1}Cf(t,"unexpected end of the stream within a flow collection")}(t,c)?g=!0:(a&&function(t,e){var i,n,r,o,a=1,s=!1,u=e,l=0,h=!1,c=t.input.charCodeAt(t.position);if(124===c)n=!1;else{if(62!==c)return;n=!0}for(t.kind="scalar",t.result="";0!==c;)if(43===(c=t.input.charCodeAt(++t.position))||45===c)1===a?a=43===c?3:2:Cf(t,"repeat of a chomping mode identifier");else{if(!(0<=(r=48<=(o=c)&&o<=57?o-48:-1)))break;0==r?Cf(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Cf(t,"repeat of an indentation width identifier"):(u=e+r-1,s=!0)}if(Mf(c)){for(;Mf(c=t.input.charCodeAt(++t.position)););if(35===c)for(;!xf(c=t.input.charCodeAt(++t.position))&&0!==c;);}for(;0!==c;){for(zf(t),t.lineIndent=0,c=t.input.charCodeAt(t.position);(!s||t.lineIndent<u)&&32===c;)t.lineIndent++,c=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>u&&(u=t.lineIndent),xf(c))l++;else{if(t.lineIndent<u){3===a?t.result+=Cc.repeat("\n",l):1===a&&s&&(t.result+="\n");break}for(n?Mf(c)?(h=!0,t.result+=Cc.repeat("\n",l+1)):h?(h=!1,t.result+=Cc.repeat("\n",l+1)):0===l?s&&(t.result+=" "):t.result+=Cc.repeat("\n",l):t.result+=s?Cc.repeat("\n",l+1):Cc.repeat("\n",l),s=!0,l=0,i=t.position;!xf(c)&&0!==c;)c=t.input.charCodeAt(++t.position);jf(t,i,t.position,!1)}}return 1}(t,c)||function(t,e){var i,n,r=t.input.charCodeAt(t.position);if(39===r){for(t.kind="scalar",t.result="",t.position++,i=n=t.position;0!==(r=t.input.charCodeAt(t.position));)if(39===r){if(jf(t,i,t.position,!0),39!==(r=t.input.charCodeAt(++t.position)))return 1;i=n=t.position,t.position++}else xf(r)?(jf(t,i,n,!0),Ff(t,Bf(t,!1,e)),i=n=t.position):t.position===t.lineStart&&Hf(t)?Cf(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);Cf(t,"unexpected end of the stream within a single quoted scalar")}}(t,c)||function(t,e){var i,n,r,o,a,s,u,l,h,c=t.input.charCodeAt(t.position);if(34===c){for(t.kind="scalar",t.result="",t.position++,i=n=t.position;0!==(c=t.input.charCodeAt(t.position));){if(34===c)return jf(t,i,t.position,!0),t.position++,1;if(92===c){if(jf(t,i,t.position,!0),xf(c=t.input.charCodeAt(++t.position)))Bf(t,!1,e);else if(c<256&&Tf[c])t.result+=Sf[c],t.position++;else if(0<(a=120===(h=c)?2:117===h?4:85===h?8:0)){for(r=a,o=0;0<r;r--)l=void 0,0<=(a=48<=(u=c=t.input.charCodeAt(++t.position))&&u<=57?u-48:97<=(l=32|u)&&l<=102?l-97+10:-1)?o=(o<<4)+a:Cf(t,"expected hexadecimal character");t.result+=(s=o)<=65535?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023)),t.position++}else Cf(t,"unknown escape sequence");i=n=t.position}else xf(c)?(jf(t,i,n,!0),Ff(t,Bf(t,!1,e)),i=n=t.position):t.position===t.lineStart&&Hf(t)?Cf(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}Cf(t,"unexpected end of the stream within a double quoted scalar")}}(t,c)?g=!0:function(t){var e,i,n=t.input.charCodeAt(t.position);if(42===n){for(n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Ef(n)&&!Af(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Cf(t,"name of an alias node must contain at least one character"),i=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(i)||Cf(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],Bf(t,!0,-1),1}}(t)?(g=!0,null===t.tag&&null===t.anchor||Cf(t,"alias node should not have any properties")):function(t,e,i){var n,r,o,a,s,u,l,h=t.kind,c=t.result,f=t.input.charCodeAt(t.position);if(!Ef(f)&&!Af(f)&&35!==f&&38!==f&&42!==f&&33!==f&&124!==f&&62!==f&&39!==f&&34!==f&&37!==f&&64!==f&&96!==f&&(63!==f&&45!==f||!(Ef(n=t.input.charCodeAt(t.position+1))||i&&Af(n)))){for(t.kind="scalar",t.result="",r=o=t.position,a=!1;0!==f;){if(58===f){if(Ef(n=t.input.charCodeAt(t.position+1))||i&&Af(n))break}else if(35===f){if(Ef(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Hf(t)||i&&Af(f))break;if(xf(f)){if(s=t.line,u=t.lineStart,l=t.lineIndent,Bf(t,!1,-1),t.lineIndent>=e){a=!0,f=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=u,t.lineIndent=l;break}}a&&(jf(t,r,o,!1),Ff(t,t.line-s),r=o=t.position,a=!1),Mf(f)||(o=t.position+1),f=t.input.charCodeAt(++t.position)}if(jf(t,r,o,!1),t.result)return 1;t.kind=h,t.result=c}}(t,c,1===i)&&(g=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(g=s&&Uf(t,f))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(u=0,l=t.implicitTypes.length;u<l;u+=1)if((h=t.implicitTypes[u]).resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else yf.call(t.typeMap,t.tag)?(h=t.typeMap[t.tag],null!==t.result&&h.kind!==t.kind&&Cf(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result)?(t.result=h.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Cf(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):Cf(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function qf(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var i=new Lf(t,e);for(i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)!function(t){var e,i,n,r,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(r=t.input.charCodeAt(t.position))&&(Bf(t,!0,-1),r=t.input.charCodeAt(t.position),!(0<t.lineIndent||37!==r));){for(a=!0,r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Ef(r);)r=t.input.charCodeAt(++t.position);for(n=[],(i=t.input.slice(e,t.position)).length<1&&Cf(t,"directive name must not be less than one character in length");0!==r;){for(;Mf(r);)r=t.input.charCodeAt(++t.position);if(35===r){for(;0!==(r=t.input.charCodeAt(++t.position))&&!xf(r););break}if(xf(r))break;for(e=t.position;0!==r&&!Ef(r);)r=t.input.charCodeAt(++t.position);n.push(t.input.slice(e,t.position))}0!==r&&zf(t),yf.call(Rf,i)?Rf[i](t,i,n):Pf(t,'unknown document directive "'+i+'"')}Bf(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Bf(t,!0,-1)):a&&Cf(t,"directives end mark is expected"),Vf(t,t.lineIndent-1,4,!1,!0),Bf(t,!0,-1),t.checkLineBreaks&&mf.test(t.input.slice(o,t.position))&&Pf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Hf(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Bf(t,!0,-1)):t.position<t.length-1&&Cf(t,"end of the stream or a document separator is expected")}(i);return i.documents}function Gf(t,e,i){for(var n=qf(t,i),r=0,o=n.length;r<o;r+=1)e(n[r])}function Wf(t,e){var i=qf(t,e);if(0!==i.length){if(1===i.length)return i[0];throw new Rc("expected a single document in the stream, but found more")}}var Yf={loadAll:Gf,load:Wf,safeLoadAll:function(t,e,i){Gf(t,e,Cc.extend({schema:hf},i))},safeLoad:function(t,e){return Wf(t,Cc.extend({schema:hf},e))}},Kf=Object.prototype.toString,Zf=Object.prototype.hasOwnProperty,Xf=10,Jf={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},$f=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Qf(t){this.schema=t.schema||gf,this.indent=Math.max(1,t.indent||2),this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Cc.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var i,n,r,o,a,s,u;if(null===e)return{};for(i={},r=0,o=(n=Object.keys(e)).length;r<o;r+=1)a=n[r],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(u=t.compiledTypeMap[a])&&Zf.call(u.styleAliases,s)&&(s=u.styleAliases[s]),i[a]=s;return i}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tp(t,e){for(var i,n=Cc.repeat(" ",e),r=0,o=-1,a="",s=t.length;r<s;)r=-1===(o=t.indexOf("\n",r))?(i=t.slice(r),s):(i=t.slice(r,o+1),o+1),i.length&&"\n"!==i&&(a+=n),a+=i;return a}function ep(t,e){return"\n"+Cc.repeat(" ",t.indent*e)}function ip(t){this.source=t,this.result="",this.checkpoint=0}function np(t,e){if(""===t)return t;for(var i,n,r=/[^\s] [^\s]/g,o="",a=0,s=0,u=r.exec(t);u;)e<(i=u.index)-s&&(n=a!==s?a:i,o&&(o+="\n"),o+=t.slice(s,n),s=n+1),a=i+1,u=r.exec(t);return o&&(o+="\n"),s!==a&&t.length-s>e?o+=t.slice(s,a)+"\n"+t.slice(a+1):o+=t.slice(s),o}function rp(t){return!(32<=t&&t<=126||133===t||160<=t&&t<=55295||57344<=t&&t<=65533||65536<=t&&t<=1114111)}function op(t,e,i){for(var n,r,o,a=i?t.explicitTypes:t.implicitTypes,s=0,u=a.length;s<u;s+=1)if(((r=a[s]).instanceOf||r.predicate)&&(!r.instanceOf||"object"==typeof e&&e instanceof r.instanceOf)&&(!r.predicate||r.predicate(e))){if(t.tag=i?r.tag:"?",r.represent){if(o=t.styleMap[r.tag]||r.defaultStyle,"[object Function]"===Kf.call(r.represent))n=r.represent(e,o);else{if(!Zf.call(r.represent,o))throw new Rc("!<"+r.tag+'> tag resolver accepts not "'+o+'" style');n=r.represent[o](e,o)}t.dump=n}return 1}}function ap(t,e,i,n,r,o){t.tag=null,t.dump=i,op(t,i,!1)||op(t,i,!0);var a=Kf.call(t.dump);n=n&&(t.flowLevel<0||t.flowLevel>e);var s,u,l="[object Object]"===a||"[object Array]"===a;if(l&&(u=-1!==(s=t.duplicates.indexOf(i))),(null!==t.tag&&"?"!==t.tag||u||2!==t.indent&&0<e)&&(r=!1),u&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(l&&u&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===a)n&&0!==Object.keys(t.dump).length?(function(t,e,i,n){var r,o,a,s,u,l,h="",c=t.tag,f=Object.keys(i);if(!0===t.sortKeys)f.sort();else if("function"==typeof t.sortKeys)f.sort(t.sortKeys);else if(t.sortKeys)throw new Rc("sortKeys must be a boolean or a function");for(r=0,o=f.length;r<o;r+=1)l="",n&&0===r||(l+=ep(t,e)),s=i[a=f[r]],ap(t,e+1,a,!0,!0,!0)&&((u=null!==t.tag&&"?"!==t.tag||t.dump&&1024<t.dump.length)&&(t.dump&&Xf===t.dump.charCodeAt(0)?l+="?":l+="? "),l+=t.dump,u&&(l+=ep(t,e)),ap(t,e+1,s,!0,u)&&(t.dump&&Xf===t.dump.charCodeAt(0)?l+=":":l+=": ",h+=l+=t.dump));t.tag=c,t.dump=h||"{}"}(t,e,t.dump,r),u&&(t.dump="&ref_"+s+t.dump)):(function(t,e,i){for(var n,r,o,a="",s=t.tag,u=Object.keys(i),l=0,h=u.length;l<h;l+=1)o="",0!==l&&(o+=", "),r=i[n=u[l]],ap(t,e,n,!1,!1)&&(1024<t.dump.length&&(o+="? "),o+=t.dump+": ",ap(t,e,r,!1,!1)&&(a+=o+=t.dump));t.tag=s,t.dump="{"+a+"}"}(t,e,t.dump),u&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===a)n&&0!==t.dump.length?(function(t,e,i,n){for(var r="",o=t.tag,a=0,s=i.length;a<s;a+=1)ap(t,e+1,i[a],!0,!0)&&(n&&0===a||(r+=ep(t,e)),r+="- "+t.dump);t.tag=o,t.dump=r||"[]"}(t,e,t.dump,r),u&&(t.dump="&ref_"+s+t.dump)):(function(t,e,i){for(var n="",r=t.tag,o=0,a=i.length;o<a;o+=1)ap(t,e,i[o],!1,!1)&&(0!==o&&(n+=", "),n+=t.dump);t.tag=r,t.dump="["+n+"]"}(t,e,t.dump),u&&(t.dump="&ref_"+s+" "+t.dump));else{if("[object String]"!==a){if(t.skipInvalid)return;throw new Rc("unacceptable kind of an object to dump "+a)}"?"!==t.tag&&function(t,e,i,n){var r,o,a,s,u,l,h,c,f,p,d,g,y,v,m,b,_,w,x,M,E;if(0!==e.length)if(-1===$f.indexOf(e)){for(r=!0,45!==(o=e.length?e.charCodeAt(0):0)&&63!==o&&64!==o&&96!==o||(r=!1),u=s=(a=32===o||32===e.charCodeAt(e.length-1))||-1<t.flowLevel&&t.flowLevel<=i?(a&&(r=!1),!1):!n,l=!0,h=new ip(e),c=!1,p=f=0,d=t.indent*i,-1===(g=t.lineWidth)&&(g=9007199254740991),d<40?g-=d:g=40,v=0;v<e.length;v++){if(y=e.charCodeAt(v),r){if(9!==(E=y)&&Xf!==E&&13!==E&&44!==E&&91!==E&&93!==E&&123!==E&&125!==E&&35!==E&&38!==E&&42!==E&&33!==E&&124!==E&&62!==E&&39!==E&&34!==E&&37!==E&&58!==E&&!Jf[E]&&!rp(E))continue;r=!1}l&&39===y&&(l=!1),m=Jf[y],b=rp(y),(m||b)&&(y!==Xf&&34!==y&&39!==y?u=s=!1:y===Xf&&(l=!(c=!0),0<v&&32===e.charCodeAt(v-1)&&(s=u=!1),s&&(_=v-f,f=v,p<_&&(p=_))),34!==y&&(l=!1),h.takeUpTo(v),h.escapeChar())}if(r&&function(t,e){for(var i=0,n=t.implicitTypes.length;i<n;i+=1)if(t.implicitTypes[i].resolve(e))return 1}(t,e)&&(r=!1),w="",(s||u)&&(x=0,e.charCodeAt(e.length-1)===Xf&&(x+=1,e.charCodeAt(e.length-2)===Xf&&(x+=1)),0===x?w="-":2===x&&(w="+")),(u&&p<g||null!==t.tag)&&(s=!1),c||(u=!1),r)t.dump=e;else if(l)t.dump="'"+e+"'";else if(s)M=function(t,e){var i,n="",r=0,o=t.length,a=/\n+$/.exec(t);for(a&&(o=a.index+1);r<o;)r=o<(i=t.indexOf("\n",r))||-1===i?(n&&(n+="\n\n"),n+=np(t.slice(r,o),e),o):(n&&(n+="\n\n"),n+=np(t.slice(r,i),e),i+1);return a&&"\n"!==a[0]&&(n+=a[0]),n}(e,g),t.dump=">"+w+"\n"+tp(M,d);else if(u)w||(e=e.replace(/\n$/,"")),t.dump="|"+w+"\n"+tp(e,d);else{if(!h)throw new Error("Failed to dump scalar value");h.finish(),t.dump='"'+h.result+'"'}}else t.dump="'"+e+"'";else t.dump="''"}(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return 1}function sp(t,e){var i=new Qf(e=e||{});return i.noRefs||function(t,e){var i,n,r=[],o=[];for(function t(e,i,n){var r,o,a;if(null!==e&&"object"==typeof e)if(-1!==(o=i.indexOf(e)))-1===n.indexOf(o)&&n.push(o);else if(i.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)t(e[o],i,n);else for(o=0,a=(r=Object.keys(e)).length;o<a;o+=1)t(e[r[o]],i,n)}(t,r,o),i=0,n=o.length;i<n;i+=1)e.duplicates.push(r[o[i]]);e.usedDuplicates=new Array(n)}(t,i),ap(i,0,t,!0,!0)?i.dump+"\n":""}ip.prototype.takeUpTo=function(t){var e;if(t<this.checkpoint)throw(e=new Error("position should be > checkpoint")).position=t,e.checkpoint=this.checkpoint,e;return this.result+=this.source.slice(this.checkpoint,t),this.checkpoint=t,this},ip.prototype.escapeChar=function(){var t=this.source.charCodeAt(this.checkpoint),e=Jf[t]||function(t){var e,i,n=t.toString(16).toUpperCase();if(t<=255)e="x",i=2;else if(t<=65535)e="u",i=4;else{if(!(t<=4294967295))throw new Rc("code point within a string may not be greater than 0xFFFFFFFF");e="U",i=8}return"\\"+e+Cc.repeat("0",i-n.length)+n}(t);return this.result+=e,this.checkpoint+=1,this},ip.prototype.finish=function(){this.source.length>this.checkpoint&&this.takeUpTo(this.source.length)};var up={dump:sp,safeDump:function(t,e){return sp(t,Cc.extend({schema:hf},e))}};function lp(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var hp={Type:Bc,Schema:Uc,FAILSAFE_SCHEMA:Vc,JSON_SCHEMA:Zc,CORE_SCHEMA:Xc,DEFAULT_SAFE_SCHEMA:hf,DEFAULT_FULL_SCHEMA:gf,load:Yf.load,loadAll:Yf.loadAll,safeLoad:Yf.safeLoad,safeLoadAll:Yf.safeLoadAll,dump:up.dump,safeDump:up.safeDump,YAMLException:Rc,MINIMAL_SCHEMA:Vc,SAFE_SCHEMA:hf,DEFAULT_SCHEMA:gf,scan:lp("scan"),parse:lp("parse"),compose:lp("compose"),addConstructor:lp("addConstructor")},cp=function(){function t(e,i){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;mn(this,t),this.url=e,!i||Pr(i)&&!Pr(this.url)?this.path=Cr(this.url):this.path=i,this.path_for_parent=i||this.path,this.parent=n,this.container=null,this.parent&&(this.parent.container?this.container=this.parent.container:this.parent.isContainer()&&(this.container=this.parent))}return _n(t,[{key:"load",value:function(){return t=this.url,new Promise((function(e,i){"string"==typeof t?Tr.io(t).then((function(t){try{var n=function(t){var e;try{e=hp.safeLoad(t,{json:!0})}catch(t){throw t}return e}(t);e(n)}catch(t){i(t)}}),i):(t=Object.assign({},t),e(t))}));var t}},{key:"resourceFor",value:function(t){return{url:this.urlFor(t),path:this.pathFor(t),type:this.typeFor(t)}}},{key:"urlFor",value:function(t){return fp(t)?t:Pr(t)&&this.container?this.parent.urlFor(this.path_for_parent+t):function(t,e){if(!t||!Pr(t))return t;var i,n="/"!==t[0];return e?(i=document.createElement("a")).href=e:i=window.location,n?Cr(i.href)+t:(i.origin||i.protocol+"//"+i.host)+t}(t,this.path)}},{key:"pathFor",value:Cr},{key:"typeFor",value:function(t){var e=(t=t.split("/").pop()).lastIndexOf(".");if(-1<e)return t.substring(e+1)}},{key:"isContainer",value:function(){return!1}}]),t}();function fp(t){return!(!t||"global."!==t.slice(0,7))}function pp(t){return null!=t}function dp(t){return"("+t+")"}function gp(t){return"$"===t[0]?"context['"+t.substring(1)+"']":"context.feature.properties['"+t+"']"}function yp(t,e){return dp(("string"==typeof(i=e)?'"'+i+'"':i)+" === "+gp(t));var i}function vp(t,e){return dp(t.filter(pp).map((function(t){return dp(t.join(" && "))})).join(" "+e+" "))}function mp(t,e,i){return e&&0<e.length?vp(e.map((function(t){return bp(t,i)})),"||"):"true"}function bp(t,e){var i=[];if("function"==typeof t)return[dp(t.toString()+"(context)")];if(Array.isArray(t))return[mp(0,t,e)];if(null==t)return["true"];for(var n,r,o,a,s,u,l,h,c=Object.keys(t),f=0;f<c.length;f++){var p=c[f],d=t[p],g=vn(d);if("string"===g||"number"===g)i.push(yp(p,d));else if("boolean"===g)i.push((h=d,dp(gp(p)+(h?" != ":" == ")+"null")));else if("not"===p)i.push("!"+dp(bp(d,e).join(" && ")));else if("any"===p)i.push(mp(0,d,e));else if("all"===p)i.push(function(t,e){return t&&0<t.length?vp(t.map((function(t){return bp(t,e)})),"&&"):"true"}(d,e));else if("none"===p)i.push("!"+dp(mp(0,d,e)));else if(Array.isArray(d))i.push(function(t,e){return dp(e.map((function(e){return yp(t,e)})).join(" || "))}(p,d));else if("object"===g&&null!=d)(d.max||d.min)&&i.push((n=p,r=d,l=u=s=a=void 0,u=[],l=(o=e)&&"function"==typeof o.rangeTransform&&o.rangeTransform,r.max&&(a=l?l(r.max):r.max,u.push(gp(n)+" < "+a)),r.min&&(s=l?s=l(r.min):r.min,u.push(gp(n)+" >= "+s)),dp(u.join(" && "))));else{if(null!=d)throw new Error("Unknown Query syntax: "+d);i.push(" true ")}}return 0===c.length?["true"]:i}function _p(t,e){return null==t?function(){return!0}:new Function("context","return "+dp(bp(t,e).join(" && "))+";")}var wp=["filter","draw","visible","enabled","data"],xp={},Mp=["any","all","not","none"],Ep=function(){function t(e){var i,n=e.layer,r=e.name,o=e.parent,a=e.draw,s=e.visible,u=e.enabled,l=e.filter,h=e.styles;if(mn(this,t),this.id=t.id++,this.config_data=n.data,this.parent=o,this.name=r,this.full_name=this.parent?this.parent.full_name+":"+this.name:this.name,this.draw=a,this.filter=l,this.styles=h,this.is_built=!1,u=void 0===u?s:u,this.parent&&!1===this.parent.visible?this.enabled=!1:this.enabled=!1!==u,this.draw)for(var c in this.draw)this.draw[c]=null==this.draw[c]?{}:this.draw[c],"object"!==vn(this.draw[c])?(i="Draw group '".concat(c,"' for layer ").concat(this.full_name," is invalid, must be an object, "),Ar("warn",i+="but was set to `".concat(c,": ").concat(this.draw[c],"` instead")),delete this.draw[c]):this.draw[c].layer_name=this.full_name}return _n(t,[{key:"build",value:function(){Ar("trace","Building layer '".concat(this.full_name,"'")),this.buildFilter(),this.buildDraw(),this.is_built=!0}},{key:"buildDraw",value:function(){this.draw=Tr.stringsToFunctions(this.draw,vo.wrapFunction),this.calculatedDraw=function(t){var e,i=[];return t.parent&&(e=t.parent.calculatedDraw||[],i.push.apply(i,Rn(e))),i.push(t.draw),i}(this)}},{key:"buildFilter",value:function(){this.filter_original=this.filter,this.filter=Tr.stringsToFunctions(this.filter,vo.wrapFunction);var t=vn(this.filter);if(null==this.filter||"object"===t||"function"===t)try{this.buildZooms(),this.buildPropMatches(),null!=this.filter&&("function"==typeof this.filter||0<Object.keys(this.filter).length)?this.filter=_p(this.filter,Sp):this.filter=null}catch(t){var e="Filter for layer ".concat(this.full_name," is invalid, `filter: ").concat(JSON.stringify(this.filter),"` ");Ar("warn",e+="failed with error '".concat(t.message,"', stack trace: ").concat(t.stack))}else{var i="Filter for layer ".concat(this.full_name," is invalid, filter value must be an object or function, ");Ar("warn",i+="but was set to `filter: ".concat(this.filter,"` instead"))}}},{key:"buildZooms",value:function(){var t=this.filter&&this.filter.$zoom,e=vn(t);if(null!=t&&"function"!==e){if(this.zooms={},"number"===e)this.zooms[t]=!0;else if(Array.isArray(t))for(var i=0;i<t.length;i++)this.zooms[t[i]]=!0;else if("object"===e&&(null!=t.min||null!=t.max))for(var n=t.min||0,r=t.max||25,o=n;o<r;o++)this.zooms[o]=!0;delete this.filter.$zoom}}},{key:"buildPropMatches",value:function(){var t=this;this.filter&&!Array.isArray(this.filter)&&"function"!=typeof this.filter&&Object.keys(this.filter).forEach((function(e){if(-1===Mp.indexOf(e)){var i=t.filter[e],n=vn(i),r=Array.isArray(i);if(!r&&"string"!==n&&"number"!==n)return;"$"===e[0]?(t.context_prop_matches=t.context_prop_matches||[],t.context_prop_matches.push([e.substring(1),r?i:[i]])):(t.feature_prop_matches=t.feature_prop_matches||[],t.feature_prop_matches.push([e,r?i:[i]])),delete t.filter[e]}}))}},{key:"doPropMatches",value:function(t){if(this.feature_prop_matches)for(var e=0;e<this.feature_prop_matches.length;e++){var i=this.feature_prop_matches[e],n=t.feature.properties[i[0]];if(null==n||-1===i[1].indexOf(n))return!1}if(this.context_prop_matches)for(var r=0;r<this.context_prop_matches.length;r++){var o=this.context_prop_matches[r],a=t[o[0]];if(null==a||-1===o[1].indexOf(a))return!1}return!0}},{key:"doesMatch",value:function(t){if(!this.enabled)return!1;if(this.is_built||this.build(),null!=this.zooms&&!this.zooms[t.zoom])return!1;if(!this.doPropMatches(t))return!1;var e;if(this.filter instanceof Function)try{e=this.filter(t)}catch(e){var i="Filter for this ".concat(this.full_name,": `filter: ").concat(this.filter_original,"` ");Ar("error",i+="failed with error '".concat(e.message,"', stack trace: ").concat(e.stack),t.feature)}else e=null==this.filter;return!!e&&(this.children_to_parse&&(function(t,e,i){for(var n in e){var r,o=e[n];"object"!==vn(o)||Array.isArray(o)?(r="Layer value must be an object: cannot create layer '".concat(n,": ").concat(JSON.stringify(o),"'"),r+=", under parent layer '".concat(t.full_name,"'."),i[t.name]&&(r+=" The parent name '".concat(t.name,"' is also the name of a style, did you mean to create a 'draw' group"),t.parent&&(r+=" under '".concat(t.parent.name,"'")),r+=" instead?"),Ar("warn",r)):Lp(n,o,t,i)}}(this,this.children_to_parse,this.styles),delete this.children_to_parse),!0)}}]),t}();Ep.id=0;var Ap,kp=function(){En(e,Ep);var t=On(e);function e(i){var n;return mn(this,e),(n=t.call(this,i)).is_leaf=!0,n}return e}(),Tp=function(){En(e,Ep);var t=On(e);function e(i){var n;return mn(this,e),(n=t.call(this,i)).is_tree=!0,n.layers=i.layers||[],n}return _n(e,[{key:"addLayer",value:function(t){this.layers.push(t)}},{key:"buildDrawGroups",value:function(t){var e=[],i=[];if(function t(e,i,n,r){var o=!1;if(0!==i.length){for(var a=0;a<i.length;a++){var s=i[a];s.is_leaf?s.doesMatch(e)&&(o=!0,n.push(s),r.push(s.id)):s.is_tree&&s.doesMatch(e)&&(o=!0,t(e,s.layers,n,r)||(n.push(s),r.push(s.id)))}return o}}(t,[this],e,i),0<e.length){var n=function(t){if(1<t.length){for(var e=t[0],i=1;i<t.length;i++)e+="/"+t[i];return e}return t[0]}(i);if(void 0===xp[n]){for(var r=e.map((function(t){return t&&!1!==t.visible&&t.calculatedDraw})),o={},a=0;a<r.length;a++){var s=r[a];if(s)for(var u=0;u<s.length;u++){var l=s[u];for(var h in l)o[h]=!0}}for(var c in o)xp[n]=xp[n]||{},xp[n][c]=function(t,e){for(var i,n=0,r=0;r<t.length;r++)t[r].length>n&&(n=t[r].length);if(0===n)return null;for(var o={visible:!0},a=0;a<n;a++)!function(n){i=[],t.forEach((function(t){t[n]&&t[n][e]&&-1===i.indexOf(t[n][e])&&i.push(t[n][e])})),0!==i.length&&(i.sort((function(t,e){return(t&&t.layer_name)>(e&&e.layer_name)?1:-1})),uu.apply(void 0,[o].concat(Rn(i))),delete o.layer_name)}(a);return!1===o.visible?null:o}(r,c),xp[n][c]?(xp[n][c].key=n+"/"+c,xp[n][c].layers=e.map((function(t){return t&&t.full_name})),xp[n][c].group=c):delete xp[n][c];xp[n]&&0===Object.keys(xp[n]).length&&(xp[n]=null)}return xp[n]}}}]),e}(),Sp={rangeTransform:function(t){return"string"==typeof t&&"px2"===t.trim().slice(-3)?"".concat(parseFloat(t)," * context.meters_per_pixel_sq"):t}};function Ip(t){return-1<wp.indexOf(t)}function Lp(t,e,i,n){var r,o={name:t,layer:e=null==e?{}:e,parent:i,styles:n},a=Pn(function(t){var e={},i={};for(var n in t)Ip(n)?e[n]=t[n]:i[n]=t[n];return[e,i]}(e),2),s=a[0],u=a[1],l=(r=u,0===Object.keys(r).length),h=new(l&&null!=i?kp:Tp)(Object.assign(o,s));return h.enabled&&(i&&i.addLayer(h),h.children_to_parse=l?null:u),h}var Op=/^global\.(.+)$/,Cp=Ap={loadScene:function(t,e){var i=this,n=1<arguments.length&&void 0!==e?e:{},r=n.path,o=n.type,a=[];return this.loadSceneRecursive({url:t,path:r,type:o},null,a).then((function(t){return i.finalize(t)})).then((function(t){var e=t.config,n=t.bundle;return e?(0<a.length&&a.forEach((function(t){var e="Failed to import scene: ".concat(t.url);Ar("error",e,t),i.trigger("error",{type:"scene_import",message:e,error:t,url:t.url})})),{config:e,bundle:n}):Promise.reject(a[0])}))},loadSceneRecursive:function(t,e,i){var n=this,r=t.url,o=t.path,a=(t.type,2<arguments.length&&void 0!==i?i:[]);if(!r)return Promise.resolve({});var s=new cp(r,o,e);return s.load().then((function(t){if(null==t.import)return n.normalize(t,s),{config:t,bundle:s};Array.isArray(t.import)||(t.import=[t.import]);var e=[];return t.import.forEach((function(t){"object"===vn(t)&&(t=Rr(new Blob([JSON.stringify(t)]))),e.push(s.resourceFor(t))})),delete t.import,Promise.all(e.map((function(t){return n.loadSceneRecursive(t,s,a)}))).then((function(e){e.forEach((function(t){return n.normalize(t.config,t.bundle)}));var i=e.map((function(t){return t.config}));return t=uu.apply(void 0,Rn(i).concat([t])),n.normalize(t,s),{config:t,bundle:s}}))})).catch((function(t){return t.url=r,a.push(t),{}}))},normalize:function(t,e){return this.normalizeDataSources(t,e),this.normalizeFonts(t,e),this.normalizeTextures(t,e),this.hoistTextures(t,e),{config:t,bundle:e}},normalizeDataSources:function(t,e){for(var i in t.sources=t.sources||{},t.sources)this.normalizeDataSource(t.sources[i],e);return t},normalizeDataSource:function(t,e){if(t.url&&(t.url=e.urlFor(t.url)),t.scripts)for(var i in Array.isArray(t.scripts)&&(t.scripts=t.scripts.reduce((function(t,e){return t[e]=e,t}),{})),t.scripts)t.scripts[i]=e.urlFor(t.scripts[i]);return t},normalizeFonts:function(t,e){for(var i in t.fonts=t.fonts||{},t.fonts){var n;Array.isArray(t.fonts[i])?t.fonts[i].forEach((function(t){t.url=t.url&&e.urlFor(t.url)})):(n=t.fonts[i]).url=n.url&&e.urlFor(n.url)}return t},normalizeTextures:function(t,e){if(t.textures=t.textures||{},t.textures)for(var i in t.textures){var n=t.textures[i];n.url&&(n.url=e.urlFor(n.url))}},hoistTextures:function(t,e){var i=this;if(t.styles)for(var n in t.styles)!function(n){var r=t.styles[n],o=r.texture;"string"!=typeof o||t.textures[o]||(r.texture=i.hoistTexture(o,t,e)),r.material&&["emission","ambient","diffuse","specular","normal"].forEach((function(n){var o=null!=r.material[n]&&r.material[n].texture;"string"!=typeof o||t.textures[o]||(r.material[n].texture=i.hoistTexture(o,t,e))}))}(n);if(this.hoistStyleShaderUniformTextures(t,e,{include_globals:!1}),t.layers)for(var r=[t.layers];0<r.length;){var o=r.pop();if("object"===vn(o)&&!Array.isArray(o))for(var a in o)if("draw"===a){var s,u,l=o[a];for(var h in l)l[h].texture&&("string"!=typeof(s=l[h].texture)||t.textures[s]||(l[h].texture=this.hoistTexture(s,t,e))),l[h].outline&&l[h].outline.texture&&("string"!=typeof(u=l[h].outline.texture)||t.textures[u]||(l[h].outline.texture=this.hoistTexture(u,t,e)))}else{if(Ip(a))continue;r.push(o[a])}}},hoistStyleShaderUniformTextures:function(t,e,i){var n=this,r=i.include_globals;if(t.styles)for(var o in t.styles){var a=t.styles[o];a.shaders&&a.shaders.uniforms&&Iu.parseUniforms(a.shaders.uniforms).forEach((function(i){var o=i.type,a=i.value,s=i.key,u=i.uniforms;"sampler2D"!==o||"string"!=typeof a||t.textures[a]||!r&&fp(a)||(u[s]=n.hoistTexture(a,t,e))}))}},hoistTexture:function(t,e,i){var n=fp(t),r=n?t:i.urlFor(t),o=n?"texture-".concat(r):r;return e.textures[o]={url:r},o},applyGlobalProperties:function(t){if(!t.global||0===Object.keys(t.global).length)return t;var e=function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:".",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};for(var o in n=n?n+i:"",e){var a=n+o,s=e[o];"object"!==vn(r[a]=s)||Array.isArray(s)||t(s,i,a,r)}return r}(t.global);return function t(i){if("string"==typeof i){var n=function t(e,i,n){var r=2<arguments.length&&void 0!==n?n:[];if(-1<r.indexOf(e))Ar({level:"warn",once:!0},"Global properties: cyclical reference detected",r);else{r.push(e);var o=Op.exec(e);if(o){var a=o[1];if(a){var s=i[a];if(void 0!==s)return"string"==typeof s&&Op.exec(s)?t(s,i,r):s;Ar({level:"warn",once:!0},"Global property not found: "+e)}else Ar({level:"warn",once:!0},"Invalid global property reference: "+e)}}}(i,e);void 0!==n&&(i=n)}else if(Array.isArray(i))for(var r=0;r<i.length;r++)i[r]=t(i[r]);else if("object"===vn(i))for(var o in i)i[o]=t(i[o]);return i}(t)},finalize:function(t){var e=t.config,i=t.bundle;return e?(e.global=e.global||{},e.scene=e.scene||{},e.cameras=e.cameras||{},e.lights=e.lights||{},e.styles=e.styles||{},e.layers=e.layers||{},e.camera&&(e.cameras.default=e.camera),0===Object.keys(e.cameras).length&&(e.cameras.default={}),0!==Object.keys(e.lights).length&&!Object.keys(e.lights).every((function(t){return!1===e.lights[t].visible}))||(e.lights.default_light={type:"directional"}),{config:e,bundle:i}):{}}};Lo(Ap);var Pp=function(){function t(){mn(this,t),this.coords={},this.max_proxy_descendant_depth=6,this.max_proxy_ancestor_depth=10}return _n(t,[{key:"sourceTiles",value:function(t,e){return this.coords[t.key]&&this.coords[t.key].sources&&this.coords[t.key].sources[e.name]}},{key:"addTile",value:function(t){var e=t.coords.key,i=this.coords[e];(i=i||(this.coords[e]={descendants:0})).sources||(i.sources={}),i.sources[t.source.name]||(i.sources[t.source.name]={});for(var n=(i.sources[t.source.name][t.style_zoom]=t).coords.z-1;0<=n;n--){var r=Go.coordinateAtZoom(t.coords,n);this.coords[r.key]||(this.coords[r.key]={descendants:0}),this.coords[r.key].descendants++}}},{key:"removeTile",value:function(t){var e=this.sourceTiles(t.coords,t.source),i=t.coords.key;e&&(delete e[t.style_zoom],0===Object.keys(e).length&&(delete this.coords[i].sources[t.source.name],0===Object.keys(this.coords[i].sources).length&&(delete this.coords[i].sources,0===this.coords[i].descendants&&delete this.coords[i])));for(var n=t.coords.z-1;0<=n;n--){var r=Go.coordinateAtZoom(t.coords,n);this.coords[r.key]&&0<this.coords[r.key].descendants&&(this.coords[r.key].descendants--,0!==this.coords[r.key].descendants||this.coords[r.key].sources||delete this.coords[r.key])}}},{key:"getAncestor",value:function(t,e){var i=t.coords,n=t.style_zoom,r=t.source,o=1<arguments.length&&void 0!==e?e:1;if(!(o>this.max_proxy_ancestor_depth)){if(n>r.max_coord_zoom){var a=this.sourceTiles(i,r);if(a)for(var s=n-1;s>=r.max_coord_zoom;s--)if(a[s]&&a[s].loaded)return a[s];n=r.max_coord_zoom}n--;var u=Go.coordinateAtZoom(i,i.z-1),l=this.sourceTiles(u,r);return l&&l[n]&&l[n].loaded?l[n]:0<u.z?this.getAncestor({coords:u,style_zoom:n,source:r},o+1):void 0}}},{key:"getDescendants",value:function(t,e){var i=t.coords,n=t.style_zoom,r=t.source,o=1<arguments.length&&void 0!==e?e:1,a=[];if(n>=r.max_coord_zoom){var s=this.sourceTiles(i,r);if(s)for(var u=Math.max(er.default_view_max_zoom,n+this.max_proxy_descendant_depth),l=n+1;l<=u;l++)if(s[l]&&s[l].loaded)return a.push(s[l]),a;return a}if(this.coords[i.key]&&0<this.coords[i.key].descendants){n++;for(var h=Go.childrenForCoordinate(i),c=0;c<h.length;c++){var f=h[c],p=this.sourceTiles(f,r);p&&p[n]&&p[n].loaded?a.push(p[n]):o<=this.max_proxy_descendant_depth&&f.z<=r.max_coord_zoom&&a.push.apply(a,Rn(this.getDescendants({coords:f,source:r,style_zoom:n},o+1)))}}return a}}]),t}(),Rp=function(){function t(e,i,n,r){mn(this,t),Object.assign(this,e),this.placed=null,this._tile=r;var o=er.unitsPerMeter(r.coords.z)*Math.pow(2,n-r.style_zoom);this.layout=Object.assign({},e.layout),this.layout.repeat_scale=.75,this.layout.repeat_distance=this.layout.repeat_distance||0,this.layout.repeat_distance/=o,this.position=er.tileSpaceToMeters(this.position,r.coords.z,r.min),this._worldToScreen=i,this._screenSpaceBoundingBox=void 0,this._boundingCircles=void 0}return _n(t,[{key:"getTile",value:function(){return this._tile}},{key:"isFlat",value:function(){return this.is_flat}},{key:"getScreenSpaceBoundingBox",value:function(){var t,e,i,n,r,o,a;return this._screenSpaceBoundingBox||((t=this._worldToScreen(this.position,!0))[0]+=this.offset[0],t[1]+=this.offset[1],e=this.size[0]/2+this.layout.buffer[0],i=this.size[1]/2+this.layout.buffer[1],n=t[0]-e,r=t[0]+e,o=t[1]-i,a=t[1]+i,this._screenSpaceBoundingBox={left:n,bottom:a,right:r,top:o}),this._screenSpaceBoundingBox}},{key:"getBoundingCircles",value:function(){return this._boundingCircles||(this._boundingCircles="point"===this.type?this._convertSidesToScreenSpaceCircles():this._convertCirclesToScreenSpace()),this._boundingCircles}},{key:"_convertSidesToScreenSpaceCircles",value:function(){var t=this._tile.coords.z,e=this._tile.min,i=er.tileSpaceToMeters([this.sides[0],this.sides[1]],t,e),n=er.tileSpaceToMeters([this.sides[2],this.sides[3]],t,e),r=Pn(this._worldToScreen(i,!0),2),o=r[0],a=r[1],s=Pn(this._worldToScreen(n,!0),2);return bh(o,a,s[0],s[1],this.size[1]/2+this.layout.buffer[1])}},{key:"_convertCirclesToScreenSpace",value:function(){for(var t=[],e=this.circles,i=this._tile.coords.z,n=this._tile.min,r=0;r<e.length-2;r+=3){var o=er.tileSpaceToMeters([e[r],-e[r+1]],i,n),a=e[r+2]/er.unitsPerMeter(i),s=[o[0]+a,o[1]],u=this._worldToScreen(o,!0),l=this._worldToScreen(s,!0),h=Qn.getLineLength(u[0],u[1],l[0],l[1]);t.push(u[0],u[1],h)}return t}}]),t}(),jp={},Np={},Dp=120===new Uint8Array(new Uint32Array([305419896]).buffer)[0];function zp(t,e,i,n,r){var o=t.container,a=o.label,s=o.linked,u=t.ranges;return{label:new Rp(a,i,n,r),linked:s,ranges:u,mesh:e}}var Bp=function(){function t(e){mn(this,t),this.textureManager=Po(e),this.tiles={},this.meshes=[],this.containers=[]}return _n(t,[{key:"insertLabel",value:function(t,e){var i=t.label.text_data,n=i.text_settings_key,r=i.text,o=i.text_info;this.containers.push(t);var a=this._ensureTextSection(e,n);a[r]?t.label.text_data.text_info=a[r]:a[r]=o}},{key:"trackMesh",value:function(t){-1===this.meshes.indexOf(t)&&this.meshes.push(t)}},{key:"updateMeshes",value:function(){var t=this;return this.containers.forEach((function(e){var i,n,r,o,a,s,u,l,h,c;e.label.text_data&&(i=e.label.getTile(),(n=e.mesh).valid?(r=e.label.type,o=e.label.text_data.text_info,t.tiles[i.id]&&t.tiles[i.id].textures&&(a=t.tiles[i.id].textures[0],n.uniforms.u_texture=a,-1===n.textures.indexOf(a)&&n.textures.push(a),"point"===r||"straight"===r?(s="point"===r?o.align[e.label.align].texcoords:o.texcoords[r].texcoord,t.setTexCoords(n,e,s)):"curved"===r&&(u=o.segments.length,l=o.texcoords_stroke,h=o.texcoords.curved,t.setTexCoords(n,e,(function(t){return t<u?l[t]:h[t-u].texcoord}))))):t.tiles[i.id]&&t.tiles[i.id].textures&&(c=t.tiles[i.id].textures[0],t.textureManager.release(c)))})),this.meshes}},{key:"setTexCoords",value:function(t,e,i){var n,r,o,a,s,u,l=i instanceof Function;l||(r=(n=Pn(i,4))[0],o=n[1],a=n[2],s=n[3],u=[[r,o],[a,o],[a,s],[r,s]]);var h=t.vertex_layout.stride,c=new DataView(t.vertex_data.buffer),f=t.vertex_layout.offset.a_texcoord;e.ranges.forEach((function(t,e){var n,r,o,a,s,p=Pn(t,3),d=p[0],g=p[1],y=p[2];l&&(r=(n=Pn(i(e),4))[0],o=n[1],a=n[2],s=n[3],u=[[r,o],[a,o],[a,s],[r,s]]);for(var v=y?g/2:0;v<g;v++){var m=u[v%4],b=d+v*h;c.setUint16(b+f,65535*m[0],Dp),c.setUint16(b+f+2,65535*m[1],Dp)}}))}},{key:"createTextures",value:function(t){var e=this;return Promise.all(Object.values(this.tiles).map((function(i){var n=i.id,r=i.key,o=i.texts;return e._createTexturesForTile(t,o,"labels-".concat(r,"-").concat(n),n,e.textureManager).then((function(t){t.length&&(t.forEach((function(t){e.textureManager.retain(t),1<e.textureManager.getRetainCount(t)&&e.textureManager.release(t)})),e.tiles[n].textures=t)}))})))}},{key:"_createTexturesForTile",value:function(t,e,i,n,r){var o=new Sh,a=o.setTextureTextPositions(e);return o.rasterize(e,a,n,i,t,r)}},{key:"_ensureTile",value:function(t){var e=t.id,i=t.key;return this.tiles[e]||(this.tiles[e]={id:e,key:i,texts:{}}),this.tiles[e]}},{key:"_ensureTextSection",value:function(t,e){var i=this._ensureTile(t).texts;return i[e]||(i[e]={}),i[e]}}]),t}(),Hp=function(){function t(e){var i=this,n=e.scene,r=e.view;mn(this,t),this._scene=n,this._view=r,this._visible_tiles={},this._pyramid=new Pp,this._visible_coords={},this._building_tiles=null,this._renderable_tiles=[],this._active_styles=[],this._tile_visibility_counters={},this._update_labels_on_queue_check=!1,this._all_visible_tiles_are_cached=!1,this._debouncedUpdateLabels=kr(this._updateLabels.bind(this),100,200),this._main_thread_target=["TileManager",this._scene.id].join("_"),cr.addTarget(this._main_thread_target,this),this._keepCoordinate=this._keepCoordinate.bind(this),this._removeTilesFilter=this._removeTilesFilter.bind(this),this._removeCachedTilesFilter=this._removeCachedTilesFilter.bind(this),this._is_labeled=!1,this._tile_cache=new H.util.Cache(function(){var t=.1;return navigator&&navigator.deviceMemory?t=5*navigator.deviceMemory/100:window&&window.screen&&(t=window.screen.width/512*window.screen.height/512*.03*3,t=Math.min(t,1)),1024*t*1024*1024}(),(function(t,e,n){i._visible_tiles[t]&&i._visible_tiles[t]===e||e.destroy()}))}return _n(t,[{key:"destroy",value:function(){this._tile_cache.removeAll(),this.forEachVisibleTile((function(t){return t.destroy()})),this._visible_tiles={},this._pyramid=null,this._visible_coords={},this._scene=null,this._view=null}},{key:"keepTile",value:function(t){this._visible_tiles[t.key]=t,this._pyramid.addTile(t)}},{key:"hasTile",value:function(t){return void 0!==this._visible_tiles[t]}},{key:"_forgetTile",value:function(t){var e,i;this.hasTile(t)&&(e=this._visible_tiles[t],this._pyramid.removeTile(e),delete this._visible_tiles[t],e.loaded?this._tile_cache.add(e.key,e,function(t){var e=0;for(var i in t.meshes)for(var n=t.meshes[i],r=0;r<n.length;r++){var o=n[r];e+=o.buffer_size;for(var a=0;a<o.textures.length;a++)e+=t.textureManager.getByteLength(o.textures[a])}return e}(e)):(i=this._tile_cache.get(e.key))?this._tile_cache.drop(i.key):e.destroy(),this._tileBuildStop(e))}},{key:"removeTile",value:function(t){this._forgetTile(t),this._scene.requestRedraw()}},{key:"forEachVisibleTile",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])}},{key:"removeTiles",value:function(t){for(var e in this._visible_tiles)t(this._visible_tiles[e])&&this.removeTile(e)}},{key:"removeCachedTiles",value:function(t){var e=this;this._tile_cache.forEach((function(i,n){t(n)&&e._tile_cache.drop(i)}))}},{key:"updateTilesForView",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this._visible_coords={};for(var i=this._view.findVisibleTileCoordinates(),n=0;n<i.length;n++){var r=i[n];this._visible_coords[r.key]=r}this.updateTileStates(e)}},{key:"updateTileStates",value:function(t){var e=0<arguments.length&&void 0!==t&&t;for(var i in this._all_visible_tiles_are_cached=!0,this._visible_coords)this._keepCoordinate(i,e);this._all_visible_tiles_are_cached&&(this._is_labeled=!1,this._debouncedUpdateLabels()),this._tile_cache.removeAll(this._removeCachedTilesFilter),this._updateProxyTiles(),this.removeTiles(this._removeTilesFilter),this._updateRenderableTiles(),this._updateActiveStyles()}},{key:"_removeTilesFilter",value:function(t){if(t.style_zoom===this._view.lookAtManipulator.getLookAtData().tile_level){if(this._visible_coords[t.coords.key])return!1;for(var e in this._visible_coords)if(Go.isDescendant(t.coords,this._visible_coords[e]))return!1}return!t.isProxy()}},{key:"_updateLabels",value:function(){var t=this;this._building_tiles&&0!==Object.keys(this._building_tiles).length||(Sh.pruneTextCache(),function(t,e,i,n,r,o){Np=jp,jp={};var a={},s={},u=[],l=i.worldToScreen.bind(i),h=new Bp(o);for(var c in t.forEach((function(t){for(var i in t.meshes)t.meshes[i].forEach((function(i){if(i.labels){for(var n in h.trackMesh(i),i.labels["non-collision"]){var r=zp(i.labels["non-collision"][n],i,l,e,t);r.label.text_data&&h.insertLabel(r,t)}for(var o in i.labels.collision){var u;a[o]||(u=zp(i.labels.collision[o],i,l,e,t),a[o]=u.label,s[o]=u)}}}))})),s){var f=s[c];f.linked&&(f.linked=s[f.linked]),u.push(f)}var p=i.getViewport(),d=p.width,g=p.height;return ko.startTile("main",{apply_repeat_groups:!0,return_hidden:!0,grid_index:new Eo(d,g,30)}),ko.addStyle("main","main"),ko.collide(u,"main","main").then((function(t){return t.forEach((function(t){var e,i,r,o,a,s,u=t.mesh,l=t.label.getTile();u.valid&&(!(e=0)!==t.show||n&&t.label.breach&&!Np[t.label.id]||(e=1),e&&(jp[t.label.id]=!0),t.label.text_data&&h.insertLabel(t,l),i=u.vertex_layout.offset.a_shape,r=u.vertex_layout.stride,a=(o=u.vertex_layout.attribs.find((function(t){return"a_shape"===t.name}))).byte_size/o.size,i+=3*a,s=!0,t.ranges.forEach((function(t){if(s){for(var n=0;n<t[1];n++){if(u.vertex_data[t[0]+n*r+i]===e)return void(s=!1);u.vertex_data[t[0]+n*r+i]=e}h.trackMesh(u)}})))})),h.createTextures(r).then((function(){return h.updateMeshes()}))})).then((function(e){e.forEach((function(t){return t.valid&&t.upload()})),t.forEach((function(t){t.labeled=!0})),u=[],s={},a={}}))}(this._renderable_tiles.sort(Fp),function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,n=Math.pow(10,i);return Math.round(Math.floor(t*e)/e*n)/n}(this._view.lookAtManipulator.getLookAtData().zoom,2),this._view.lookAtManipulator,this.isLoadingVisibleTiles(),this._scene.gl,this._scene.id).then((function(){t._is_labeled=!To.hasPendingTasks(),t._scene.immediateRedraw(),t._update_labels_on_queue_check=!1})))}},{key:"_updateProxyTiles",value:function(){var t,e=this,i=this._view.lookAtManipulator.getZoomDirection();0!==i&&(t=!1,this.forEachVisibleTile((function(n){var r;if(n.setProxyFor(null),1===i)n.built||(r=e._pyramid.getAncestor(n))&&(r.setProxyFor(n),t=!0);else if(-1===i&&!n.built)for(var o=e._pyramid.getDescendants(n),a=0;a<o.length;a++)o[a].setProxyFor(n),t=!0})),t||this._view.lookAtManipulator.resetZoomDirection())}},{key:"getRenderableTiles",value:function(){return this._renderable_tiles}},{key:"_updateRenderableTiles",value:function(){for(var t in this._renderable_tiles=[],this._visible_tiles){var e=this._visible_tiles[t],i=this._tile_cache.get(t);e.loaded?(this._renderable_tiles.push(e),i&&i!==e&&this._tile_cache.drop(t)):i&&(i.generation===this._scene.generation?this._renderable_tiles.push(i):this._tile_cache.drop(t))}return this._renderable_tiles}},{key:"getWorkerForTile",value:function(t,e){return e.has_volatile_data?this._scene.getWorkers(1)[0]:e.tiled?this._scene.getWorkers(0)[Math.abs(t.x+t.y+t.z)%this._scene.num_workers]:this._scene.getWorkers(0)[e.id%this._scene.num_workers]}},{key:"getActiveStyles",value:function(){return this._active_styles}},{key:"_updateActiveStyles",value:function(){for(var t=this._renderable_tiles,e={},i=0;i<t.length;i++){var n=t[i];Object.keys(n.meshes).forEach((function(t){return e[t]=!0}))}return this._active_styles=Object.keys(e),this._active_styles}},{key:"isLoadingVisibleTiles",value:function(){var t=!1;for(var e in this._visible_tiles)if(!this._visible_tiles[e].built){t=!0;break}return t}},{key:"updateTilesVisibilityCounters",value:function(){var t=this;Object.keys(this._visible_coords).forEach((function(e){e in t._tile_visibility_counters||(t._tile_visibility_counters[e]=0)}));var e=Object.keys(this._tile_visibility_counters),i=[];e.forEach((function(e){e in t._visible_coords?(t._tile_visibility_counters[e]++,30<=t._tile_visibility_counters[e]&&i.push(t._visible_coords[e])):(t._tile_visibility_counters[e]--,t._tile_visibility_counters[e]<=0&&delete t._tile_visibility_counters[e])})),i.length&&this.loadCoordinates(i)}},{key:"loadCoordinates",value:function(t){var e=this;t.sort((function(t,i){var n=e._view.lookAtManipulator.getLookAtData().position,r=er.metersPerTile(t.z)/2,o=er.metersForTile(t);o.x+=r,o.y-=r;var a=er.metersForTile(i);a.x+=r,a.y-=r;var s=Math.abs(n[0]-o.x)+Math.abs(n[1]-o.y),u=Math.abs(n[0]-a.x)+Math.abs(n[1]-a.y);return(t.center_dist=s)<(i.center_dist=u)?-1:u===s?0:1})),t.forEach((function(t){return e.loadCoordinate(t)}))}},{key:"_keepCoordinate",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e,n=this._visible_coords[t];if(n.z===this._view.center_tile.z)for(var r in this._scene.sources){var o,a,s,u=this._scene.sources[r];u.builds_geometry_tiles&&u.includesTile(n,this._view.lookAtManipulator.getLookAtData().tile_level)&&(o=Go.normalizedKey(n,u,this._view.lookAtManipulator.getLookAtData().tile_level))&&!this.hasTile(o)&&((a=i&&this._tile_cache.get(o))||(this._all_visible_tiles_are_cached=!1),s=a||new Go({source:u,coords:n,worker:this.getWorkerForTile(n,u),style_zoom:Tr.zoomToTileLevel(n.z),view:this._view,sceneId:this._scene.id}),"ObjectSource"===u.config.type&&(s.syncedAt=u.getSyncedAt()),this.keepTile(s))}}},{key:"loadCoordinate",value:function(t){if(t.z===this._view.center_tile.z)for(var e in this._scene.sources){var i,n=this._scene.sources[e];n.builds_geometry_tiles&&n.includesTile(t,this._view.lookAtManipulator.getLookAtData().tile_level)&&(i=Go.normalizedKey(t,n,this._view.lookAtManipulator.getLookAtData().tile_level),this.hasTile(i)&&this.buildTile(this._visible_tiles[i]))}}},{key:"buildTile",value:function(t,e){this._building_tiles&&this._building_tiles[t.key]||t.built&&t.generation===this._scene.generation||(this._tileBuildStart(t.key),t.build(this._scene.generation,e))}},{key:"buildTileStylesCompleted",value:function(t){var e=t.tile,i=t.progress;if(null==this._visible_tiles[e.key])Go.abortBuild(e,this._scene.id);else if(e.generation!==this._scene.generation)Go.abortBuild(e,this._scene.id);else{if(e.id<this._visible_tiles[e.key].id)return void Go.abortBuild(e,this._scene.id);e=this._visible_tiles[e.key].merge(e),i.done&&(e.built=!0),e.buildMeshes(this._scene.styles,i),this.updateTileStates(),this._scene.requestRedraw()}i.done&&this._tileBuildStop(e)}},{key:"buildTileError",value:function(t){this._forgetTile(t.key),Go.abortBuild(t,this._scene.id)}},{key:"_tileBuildStart",value:function(t){this._is_labeled=!1,this._building_tiles=this._building_tiles||{},this._building_tiles[t]=!0}},{key:"_tileBuildStop",value:function(t){this._building_tiles&&(t.source&&t.source.hasLabeledData()&&(this._update_labels_on_queue_check=!0),delete this._building_tiles[t.key],To.removeForTile(t.id),this.checkBuildQueue())}},{key:"isReady",value:function(){return this._is_labeled&&!this.isLoadingVisibleTiles()}},{key:"checkBuildQueue",value:function(){this._building_tiles&&0!==Object.keys(this._building_tiles).length||(this._building_tiles=null,this._update_labels_on_queue_check?this._updateLabels():(this._is_labeled=!To.hasPendingTasks(),this._scene.immediateRedraw()))}},{key:"_removeCachedTilesFilter",value:function(t,e){var i=e.source;return!this._visible_tiles[t]&&(e.generation!==this._scene.generation||"ObjectSource"===i.config.type&&i.getSyncedAt()>e.syncedAt)}}]),t}();function Fp(t,e){var i=t.coords,n=e.coords;return i.z-n.z||i.x-n.x||i.y-n.y}function Up(t){mn(this,Up),this.defaults={},this.defaults.culling=!0,this.defaults.culling_face=t.BACK,this.defaults.blending=!1,this.defaults.blending_src=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_dst=t.ONE_MINUS_SRC_ALPHA,this.defaults.blending_src_alpha=t.ONE,this.defaults.blending_dst_alpha=t.ONE_MINUS_SRC_ALPHA,this.defaults.depth_write=!0,this.defaults.depth_test=!0,t.depthFunc(t.LESS),this.culling=new Vp({cull:this.defaults.culling,face:this.defaults.culling_face},(function(e){e.cull?(t.enable(t.CULL_FACE),t.cullFace(e.face)):t.disable(t.CULL_FACE)})),this.blending=new Vp({blend:this.defaults.blending,src:this.defaults.blending_src,dst:this.defaults.blending_dst,src_alpha:this.defaults.blending_src_alpha,dst_alpha:this.defaults.blending_dst_alpha},(function(e){e.blend?(t.enable(t.BLEND),e.src_alpha&&e.dst_alpha?t.blendFuncSeparate(e.src,e.dst,e.src_alpha,e.dst_alpha):t.blendFunc(e.src,e.dst)):t.disable(t.BLEND)})),this.depth_write=new Vp({depth_write:this.defaults.depth_write},(function(e){t.depthMask(e.depth_write)})),this.depth_test=new Vp({depth_test:this.defaults.depth_test},(function(e){e.depth_test?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST)}))}var Vp=function(){function t(e,i){mn(this,t),i(e),this.value=e,this.setup=i}return _n(t,[{key:"get",value:function(){return this.value}},{key:"set",value:function(t){JSON.stringify(this.value)!==JSON.stringify(t)&&(this.setup(t),this.value=t)}}]),t}(),qp=function(){function t(){mn(this,t),this.canvas=null,this.gl=null,this.screenshot_canvas=null,this.screenshot_context=null,this.queue_screenshot=null,this.video_capture=null}return _n(t,[{key:"setCanvas",value:function(t,e){this.canvas=t,this.gl=e}},{key:"screenshot",value:function(t){var e=this,i=(0<arguments.length&&void 0!==t?t:{}).background;return null!=this.queue_screenshot||(this.queue_screenshot={background:i},this.queue_screenshot.promise=new Promise((function(t,i){e.queue_screenshot.resolve=t,e.queue_screenshot.reject=i}))),this.queue_screenshot.promise}},{key:"completeScreenshot",value:function(){if(null!=this.queue_screenshot){var t=this.canvas.width,e=this.canvas.height,i=new Uint8Array(t*e*4);this.gl.readPixels(0,0,t,e,this.gl.RGBA,this.gl.UNSIGNED_BYTE,i);for(var n=(n=this.queue_screenshot.background)&&"transparent"!==n?vo.parseColor(n).slice(0,3).map((function(t){return 255*t})):null,r=new Uint8ClampedArray(t*e*4),o=0;o<e;o++)for(var a=0;a<t;a++){var s=4*((e-o-1)*t+a),u=4*(o*t+a),l=i[3+s];r[0+u]=255*i[0+s]/l,r[1+u]=255*i[1+s]/l,r[2+u]=255*i[2+s]/l,r[3+u]=l,n&&(l/=255,r[0+u]=r[0+u]*l+n[0]*(1-l),r[1+u]=r[1+u]*l+n[1]*(1-l),r[2+u]=r[2+u]*l+n[2]*(1-l),r[3+u]=255)}this.screenshot_canvas=this.screenshot_canvas||document.createElement("canvas");var h=this.screenshot_canvas;h.width=t,h.height=e,this.screenshot_context=this.screenshot_context||h.getContext("2d");var c=this.screenshot_context,f=new ImageData(r,t,e);c.putImageData(f,0,0);for(var p=h.toDataURL("image/png"),d=atob(p.slice(22)),g=new Uint8Array(d.length),y=0;y<d.length;++y)g[y]=d.charCodeAt(y);var v=new Blob([g],{type:"image/png"});this.queue_screenshot.resolve({url:p,blob:v,type:"png"}),this.queue_screenshot=null}}},{key:"startVideoCapture",value:function(){var t=this;if("function"!=typeof window.MediaRecorder||!this.canvas||"function"!=typeof this.canvas.captureStream)return Ar("warn","Video capture (Canvas.captureStream and/or MediaRecorder APIs) not supported by browser"),!1;if(this.video_capture)return Ar("warn","Video capture already in progress, call Scene.stopVideoCapture() first"),!1;try{var e=this.video_capture={};e.chunks=[],e.stream=this.canvas.captureStream(),e.options={mimeType:"video/webm"},e.media_recorder=new MediaRecorder(e.stream,e.options),e.media_recorder.ondataavailable=function(i){var n,r;0<i.data.size&&e.chunks.push(i.data),e.resolve&&(r=Rr(n=new Blob(e.chunks,{type:e.options.mimeType})),e.stream&&(e.stream.getTracks()||[]).forEach((function(t){t.stop(),e.stream.removeTrack(t)})),e.stream=null,e.media_recorder=null,t.video_capture=null,e.resolve({url:r,blob:n,type:"webm"}))},e.media_recorder.start()}catch(t){return this.video_capture=null,Ar("error","Scene video capture failed",t),!1}return!0}},{key:"stopVideoCapture",value:function(){var t=this;return this.video_capture?(this.video_capture.promise=new Promise((function(e,i){t.video_capture.resolve=e,t.video_capture.reject=i})),this.video_capture.media_recorder.stop(),this.video_capture.promise):(Ar("warn","No scene video capture in progress, call Scene.startVideoCapture() first"),Promise.resolve({}))}}]),t}(),Gp=function(){function t(){mn(this,t),this.sources={},this.styles={},this.layers={},this.tiles={},this._isConfigured=!1}return _n(t,[{key:"init",value:function(t,e,i,n,r,o){return this.scene_id=t,this.textureManager=Po(t),this._worker_id=e,Ar.setLevel(i),Tr.device_pixel_ratio=n,il.setElementIndexUint(r),zu.setPrefix(this._worker_id),this._style_manager=new Lc,this._importExternalScripts(o),fh.id_prefix=e,this._isConfigured=!1,e}},{key:"dispose",value:function(){this._last_config_sources=null,this._config_sources=null,this.sources=null,this._style_manager=null,this.styles=null,this.layers=null,this.tiles=null}},{key:"_importExternalScripts",value:function(t){var e;0!==t.length&&(Ar("debug","loading custom data source scripts in worker:",t),e=Object.getOwnPropertyNames(window),importScripts.apply(void 0,Rn(t)),Object.getOwnPropertyNames(window).forEach((function(t){-1===e.indexOf(t)&&(self[t]=window[t])})))}},{key:"updateConfig",value:function(t,e){var i,n=t.config,r=t.generation,o=t.introspection;for(var a in n=JSON.parse(n),i=e,Object.assign(wu,i),this._generation=r,this._isConfigured=!1,n.layers)n.layers[a]&&(n.layers[a].data=Tr.stringsToFunctions(n.layers[a].data));this.global=Tr.stringsToFunctions(n.global),this._createDataSources(n),n.styles=Tr.stringsToFunctions(n.styles,vo.wrapFunction),this.styles=this._style_manager.build(n.styles),self.is_fake_worker=hr.is_main,this._style_manager.initStyles({generation:this._generation,styles:this.styles,sources:this.sources,introspection:o,id:this.scene_id}),delete self.is_fake_worker,this.layers=function(t,e){xp={};var i={};for(var n in t){var r=t[n];r&&(i[n]=Lp(n,r,null,e))}return i}(n.layers,this._style_manager.styles),this._configuring=this._syncTextures(n.textures)}},{key:"_createDataSources",value:function(t){var e=this;this._last_config_sources=this._config_sources||{},this._config_sources=t.sources;var i=this.sources,n=[];for(var r in t.sources=Tr.stringsToFunctions(t.sources),this.sources={},self.is_fake_worker=hr.is_main,t.sources)if(JSON.stringify(this._last_config_sources[r])!==JSON.stringify(t.sources[r])){var o=void 0;try{o=jr.create(Object.assign({},t.sources[r],{name:r}),this.sources)}catch(i){Ar("error","Error creating source.",i.message,t.sources[r]);continue}o&&(this.sources[r]=o,n.push(r))}else this.sources[r]=i[r];delete self.is_fake_worker,n.forEach((function(t){for(var i in e.tiles)e.tiles[i].source===t&&delete e.tiles[i]}))}},{key:"awaitConfiguration",value:function(){return this._configuring}},{key:"_onConfig",value:function(t){var e=this;if((this._isConfigured=!0)!==t.loaded)t.loading=!0,t.loaded=!1,t.error=null,this._loadTileSourceData(t).then((function(){if(e.getTile(t.id)){t.loading=!1,t.loaded=!0;try{Go.buildGeometry(t,e)}catch(i){t.error=i.toString(),cr.postMessage("TileManager_".concat(e.scene_id,".buildTileError"),Go.slice(t))}}else Ar("trace","stop tile build after data source load because tile was removed. Key: ".concat(t.key,", id: ").concat(t.id))}),(function(i){t.loading=!1,t.loaded=!1,t.error=i.stack,Ar("error","tile load error for tile with key ".concat(t.key," and id ").concat(t.id,": ").concat(t.error)),cr.postMessage("TileManager_".concat(e.scene_id,".buildTileError"),Go.slice(t))}));else{Ar("trace","used worker cache for tile with key ".concat(t.key," and id ").concat(t.id));try{Go.buildGeometry(t,this)}catch(e){t.error=e.toString(),cr.postMessage("TileManager_".concat(this.scene_id,".buildTileError"),Go.slice(t))}}}},{key:"buildTile",value:function(t){var e,i=t.tile,n=this.getTile(i.id);n&&n.loading||(i=this.tiles[i.id]=Object.assign(n||{},i),this._isConfigured?this._onConfig(i):(e=this).awaitConfiguration().then((function(){return e._onConfig(i)})))}},{key:"_loadTileSourceData",value:function(t){return this.sources[t.source]?this.sources[t.source].load(t):(t.source_data={},Promise.resolve(t))}},{key:"getTile",value:function(t){return this.tiles[t]}},{key:"removeTile",value:function(t){var e=this.tiles[t];null!=e&&(!0===e.loading&&(Ar("trace","cancel tile load for tile id ".concat(t)),e.loading=!1,Go.cancel(e)),delete this.tiles[t],Ar("trace","remove tile from cache, tile id: ".concat(t)))}},{key:"queryFeatures",value:function(t){var e=this,i=t.filter,n=t.visible,r=t.geometry,o=t.tile_ids,a=[],s=o.map((function(t){return e.tiles[t]})).filter((function(t){return t}));return null!=i&&(i=-1<["{","["].indexOf(i[0])?JSON.parse(i):i,i=Tr.stringsToFunctions(i,vo.wrapFunction)),i=_p(i,Sp),s.forEach((function(t){for(var o in t.source_data.layers)!function(o){t.source_data.layers[o].features.forEach((function(s){var u,l;!0===n&&s.generation!==e._generation||!1===n&&s.generation===e._generation||((u=vo.getFeatureParseContext(s,t,e.global)).source=t.source,u.layer=o,i(u)&&(l={type:s.type,properties:s.properties},!0===r&&(l.geometry=er.copyGeometry(s.geometry),er.tileSpaceToLatlng(l.geometry,t.coords.z,t.min)),a.push(l)))}))}(o)})),a}},{key:"resetFeatureSelection",value:function(){zu.reset()}},{key:"_syncTextures",value:function(t){var e=[];return t&&e.push.apply(e,Rn(Object.keys(t))),Ar("trace","sync textures to worker:",e),0<e.length?this.textureManager.syncTexturesToWorker(e):Promise.resolve()}},{key:"profile",value:function(t){console.profile("worker ".concat(this._worker_id,": ").concat(t))}},{key:"profileEnd",value:function(t){console.profileEnd("worker ".concat(this._worker_id,": ").concat(t))}},{key:"terminate",value:function(){this.dispose()}}]),t}();(hr.is_worker||self.H&&self.H.DEBUG)&&cr.addTarget("self",new Gp);var Wp=function(){function e(t,i){mn(this,e),i=i||{},Lo(this),this.id=e.id++,this.textureManager=Po(this.id),this.initialized=!1,this.initializing=null,this.sources={},this.view=new cc(this,i),this.tile_manager=new Hp({scene:this,view:this.view}),this.num_workers=i.numWorkers||2,!0===i.disableVertexArrayObjects&&(Du.disabled=!0),Tr.device_pixel_ratio=i.devicePixelRatio,this.config=null,this.config_source=t,this.config_bundle=null,this.last_valid_config_source=null,this.styles=null,this.style_manager=new Lc,this.building=null,this.dirty=!0,i.preUpdate&&this.subscribe({pre_update:i.preUpdate}),i.postUpdate&&this.subscribe({post_update:i.postUpdate}),this.render_loop=!i.disableRenderLoop,this.render_loop_active=!1,this.render_loop_stop=!1,this.render_count=0,this.last_render_count=0,this.render_count_changed=!1,this.frame=0,this.last_main_render=-1,this.last_selection_render=-1,this.media_capture=new qp,this.selection=null,this.introspection=!0===i.introspection,this.viewport=i.viewport,this.container=i.container,this.canvas=null,this.contextOptions=i.webGLContextOptions,this.lights=null,this.background=null,this.createListeners(),this.updating=0,this.generation=e.generation,this.last_complete_generation=e.generation,this.log_level=i.logLevel||"warn",Ar.setLevel(this.log_level),Ar.reset()}return _n(e,[{key:"load",value:function(t,e){var i=this,n=0<arguments.length&&void 0!==t?t:null,r=1<arguments.length&&void 0!==e?e:{};return this.initializing||(Ar.reset(),this.updating++,this.initialized=!1,this.initial_build_time=null,(r="string"==typeof r?{base_path:r}:r).blocking=void 0===r.blocking||r.blocking,!1!==this.render_loop&&this.setupRenderLoop(),this.createCanvas(),this.textureManager.destroy(this.gl),this.initializing=this.loadScene(n,r).then((function(){return i.createWorkers()})).then((function(){i.resetFeatureSelection();var t="object"===vn(i.config_source)||i.hasSubscribersFor("load"),e=i.updateConfig({serialize_funcs:t,normalize:!1,load_event:!0,fade_in:!0});if(!0===r.blocking)return e})).then((function(){i.updating--,i.initializing=null,i.initialized=!0,i.last_valid_config_source=i.config_source,i.last_valid_options={base_path:r.base_path,file_type:r.file_type},i.requestRedraw()})).catch((function(t){var e,n;if(i.initializing=null,i.updating=0,n="YAMLException"===t.name?(e="yaml","Error parsing scene YAML"):"Error initializing scene",i.trigger("error",{type:e,message:n,error:t,url:i.config_source}),n="Scene.load() failed to load ".concat(i.config_source,": ").concat(t.message),i.last_valid_config_source)return Ar("warn",n,t),Ar("info","Scene.load() reverting to last valid configuration"),i.load(i.last_valid_config_source,i.last_valid_base_path);throw Ar("error",n,t),t}))),this.initializing}},{key:"destroy",value:function(){var t;this.initialized=!1,this.render_loop_stop=!0,this.destroyListeners(),this.canvas&&this.canvas.parentNode&&(this.canvas.parentNode.removeChild(this.canvas),this.canvas=null),this.container=null,this.selection&&this.selection.destroy(),this.gl&&(this.textureManager.destroy(this.gl),this.style_manager.destroy(this.gl),this.styles={},Nu.reset(),(t=this.gl.getExtension("WEBGL_lose_context"))&&t.loseContext(),this.gl=null),this.sources={},this.tile_manager.destroy(),this.tile_manager=null,this.destroyWorkers(),Ar.reset()}},{key:"createCanvas",value:function(){if(!this.canvas){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.container.style.backgroundColor="transparent",this.container.appendChild(this.canvas);try{this.gl=Tu.getContext(this.canvas,Object.assign({alpha:!0,premultipliedAlpha:!1,stencil:!0,device_pixel_ratio:Tr.device_pixel_ratio},this.contextOptions)),navigator.appVersion.includes("iPhone")&&this.gl.depthRange(.994,1)}catch(t){throw new Error("Couldn't create WebGL context. Your browser may not support WebGL, or it's turned off? Visit http://webglreport.com/ for more info.")}this.handleViewportUpdate(),Du.init(this.gl),this.render_states=new Up(this.gl),this.media_capture.setCanvas(this.canvas,this.gl)}}},{key:"getWorkerUrl",value:function(){var e,r;if(void 0!==t&&(r="("+t+")()",n&&""!==i&&(r+="\n//# sourceMappingURL="+n.slice(0,n.lastIndexOf("/")+1)+i),e=Rr(new Blob([r],{type:"application/javascript"}))),!e)throw new Error("Couldn't find internal Tangram source variable (may indicate the library did not build correctly)");return e}},{key:"updateExternalScripts",value:function(){var t=Rn(this.external_scripts||[]),e=[];if(this.config.scene.scripts)for(var i in this.config.scene.scripts)-1===e.indexOf(this.config.scene.scripts[i])&&e.push(this.config.scene.scripts[i]);for(var n in this.config.sources){var r=this.config.sources[n];if(r.scripts)for(var o in r.scripts)-1===e.indexOf(r.scripts[o])&&e.push(r.scripts[o])}return this.external_scripts=e,!(this.external_scripts.length===t.length&&this.external_scripts.every((function(e,i){return e===t[i]})))}},{key:"createWorkers",value:function(){return this.updateExternalScripts()&&this.destroyWorkers(),this._workers?Promise.resolve():this.makeWorkers(this.getWorkerUrl())}},{key:"makeWorkers",value:function(t){var e=this,i=!!this.gl.getExtension("OES_element_index_uint"),n=[];this._workers=[];for(var r=0;r<this.num_workers;r++)!function(){var o=new Worker(t);e._workers[r]=o,cr.addWorker(o),Ar("debug","Scene.makeWorkers: initializing worker ".concat(r));var a=r;n.push(cr.postMessage(o,"self.init",e.id,r,e.log_level,Tr.device_pixel_ratio,i,e.external_scripts).then((function(t){return Ar("debug","Scene.makeWorkers: initialized worker ".concat(t)),t}),(function(t){return Ar("error","Scene.makeWorkers: failed to initialize worker ".concat(a,":"),t),Promise.reject(t)})))}();var o=new Gp;return this._workers.push(o),n.push(o.init(this.id,r,this.log_level,Tr.device_pixel_ratio,i,[])),this.next_worker=0,Promise.all(n).then((function(){var i;Ar.setWorkers(e._workers.slice(0,e.num_workers)),i=t,void 0===Ir&&"function"!=typeof(Ir=window.URL&&window.URL.revokeObjectURL||window.webkitURL&&window.webkitURL.revokeObjectURL)&&(Ir=null,Ar("warn","window.URL.revokeObjectURL (or vendor prefix) not found, unable to create local blob URLs")),Ir&&Ir(i)}))}},{key:"getWorkers",value:function(t){return this._workers.filter((function(e){switch(t){case 0:return e instanceof Worker;case 1:return e instanceof Gp;default:return!0}}))}},{key:"destroyWorkers",value:function(){this.selection=null,Array.isArray(this._workers)&&(Ar.setWorkers(null),this._workers.forEach((function(t){t.terminate()})),this._workers=null)}},{key:"ready",value:function(){return!(!this.view.ready()||0===Object.keys(this.sources).length)}},{key:"handleViewportUpdate",value:function(){var t=this.viewport,e=t.width,i=t.height;0<e&&0<i&&(this.dirty=!0,this.view.handleViewportUpdate(),this.gl&&Tu.resize(this.gl,e,i,Tr.device_pixel_ratio))}},{key:"requestRedraw",value:function(){this.dirty=!0}},{key:"immediateRedraw",value:function(){this.dirty=!0,this.update()}},{key:"renderLoop",value:function(){this.render_loop_active=!0,this.initialized&&this.update(),To.setState({user_moving_view:this.view.user_input_active}),To.processAll(),this.render_loop_stop?(this.render_loop_stop=!1,this.render_loop_active=!1):window.requestAnimationFrame(this.renderLoop.bind(this))}},{key:"setupRenderLoop",value:function(){var t=this;this.render_loop_active||setTimeout((function(){t.renderLoop()}),0)}},{key:"update",value:function(){var t=this.dirty,e=!!this.selection&&this.selection.hasPendingRequests(),i=!(!1===t&&!1===e||!1===this.initialized||0<this.updating||!1===this.ready());return this.trigger("pre_update",i),this.view.update(),i&&(this.dirty=!1,this.render({main:t,selection:e}),this.updateViewComplete(),this.media_capture.completeScreenshot(),this.trigger("post_update",i),!0!==this.animated&&!this.view.isAnimating()||(this.dirty=!0),this.frame++,Ar("trace","Scene.render()"),!0)}},{key:"render",value:function(t){var e=this,i=t.main,n=t.selection,r=this.gl;if(Object.keys(this.lights).forEach((function(t){return e.lights[t].update()})),i&&(this.render_count=this.renderPass(),this.last_main_render=this.frame),n){if(this.view.panning||this.view.user_input_active)return void this.selection.clearPendingRequests();(this.last_selection_render<this.last_main_render||this.selection.has_dirty_buffer)&&(this.selection.bind(),this.renderPass("selection_program",{allow_blend:!1}),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,this.canvas.width,this.canvas.height),r.clearColor.apply(r,Rn(this.background.color)),this.last_selection_render=this.frame,this.selection.has_dirty_buffer=!1),this.selection.read(this.tile_manager.getRenderableTiles()),this.selection.has_dirty_buffer&&this.render({main:!1,selection:n})}return this.render_count_changed=!1,this.render_count!==this.last_render_count&&(this.render_count_changed=!0),this.last_render_count=this.render_count,!0}},{key:"renderPass",value:function(t,e){var i=this,n=0<arguments.length&&void 0!==t?t:"program",r=(1<arguments.length&&void 0!==e?e:{}).allow_blend,o=this.gl;r=null==r||r,this.clearFrame();for(var a,s=Ju.sortByBlendOrderWithinLayers(this.tile_manager.getActiveStyles().map((function(t){return i.styles[t]})).filter((function(t){return t}))),u=0,l=0,h=0;h<s.length;h++){var c,f,p=s[h],d=l-(c=parseInt(p.name));(p.clean_depth||d)&&(this.render_states.depth_write.value.depth_write?o.clear(o.DEPTH_BUFFER_BIT):(o.depthMask(!0),o.clear(o.DEPTH_BUFFER_BIT),o.depthMask(!1)),d&&(l=c)),p.blend!==a&&(f=Object.assign({},Ju.render_states[p.blend],{blend:r&&p.blend}),this.setRenderState(f));var g="translucent"===p.blend&&"program"===n;g&&(this.gl.colorMask(!1,!1,!1,!1),this.renderStyle(p.name,n),this.gl.colorMask(!0,!0,!0,!0),this.gl.depthFunc(this.gl.EQUAL),this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilFunc(this.gl.EQUAL,this.gl.ZERO,255),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.INCR)),u+=this.renderStyle(p.name,n),g&&(this.gl.disable(this.gl.STENCIL_TEST),this.gl.depthFunc(this.gl.LESS)),a=p.blend}return u}},{key:"renderStyle",value:function(t,e){for(var i,n=this,r=this.styles[t],o=!0,a=0,s=this.tile_manager.getRenderableTiles(),u=Math.max.apply(Math,Rn(s.map((function(e){return e.meshes[t]?Math.max.apply(Math,Rn(e.meshes[t].map((function(t){return t.variant.order})))):-1})))),l=0;l<u+1;l++){var h=function(u){for(var l=0;l<s.length;l++){var h=s[l];if(null!=h.meshes[t]&&h.shouldProxyForStyle(t))for(var c=h.meshes[t].filter((function(t){return t.variant.order===u})),f=0,p=c.length;f<p;f+=1){var d=c[f];if(!0===o&&(o=!1,!(i=n.setupStyle(r,e))))return{v:0};n.view.setupTile(h,i),n.selection.setupDiscards(i),r.render(d)&&n.requestRedraw(),a+=d.geometry_count}}}(l);if("object"===vn(h))return h.v}return a}},{key:"setupStyle",value:function(t,e){var i;try{if(!(i=t.getProgram(e)))return}catch(e){return void this.trigger("warning",{type:"styles",message:"Error compiling style ".concat(t.name),style:t,shader_errors:t.program&&t.program.shader_errors})}for(var n in i.use(),t.setup(),this.view.setupProgram(i),this.lights)this.lights[n].setupProgram(i);return i}},{key:"clearFrame",value:function(){this.initialized&&(this.render_states.depth_write.set({depth_write:!0}),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT))}},{key:"setRenderState",value:function(t){var e,i,n=0<arguments.length&&void 0!==t?t:{},r=n.depth_test,o=n.depth_write,a=n.cull_face,s=n.blend;this.initialized&&(e=this.render_states,r=!1!==r&&e.defaults.depth_test,o=!1!==o&&e.defaults.depth_write,a=!1!==a&&e.defaults.culling,s=null!=s?s:e.defaults.blending,i=this.gl,e.depth_test.set({depth_test:r}),e.depth_write.set({depth_write:o}),e.culling.set({cull:a,face:e.defaults.culling_face}),s&&"opaque"!==s?"overlay"===s||"inlay"===s||"translucent"===s?e.blending.set({blend:!0,src:i.SRC_ALPHA,dst:i.ONE_MINUS_SRC_ALPHA,src_alpha:i.ONE,dst_alpha:i.ONE_MINUS_SRC_ALPHA}):"add"===s?e.blending.set({blend:!0,src:i.ONE,dst:i.ONE}):"multiply"===s&&e.blending.set({blend:!0,src:i.ZERO,dst:i.SRC_COLOR}):e.blending.set({blend:!1}))}},{key:"getFeatureAt",value:function(t,e,i){var n,r=e.radius,o=e.top_most_only;this.initialized?(n={x:t.x/this.view.size.css.width,y:t.y/this.view.size.css.height},r=0<r?{x:r/this.view.size.css.width,y:r/this.view.size.css.height}:null,this.selection.getFeatureAt(n,{radius:r,top_most_only:o},i)):Ar("debug","Scene.getFeatureAt() called before scene was initialized")}},{key:"queryFeatures",value:function(t){var e=0<arguments.length&&void 0!==t?t:{},i=e.filter,n=e.unique,r=void 0===n||n,o=e.group_by,a=void 0===o?null:o,s=e.visible,u=void 0===s?null:s,l=e.geometry,h=void 0!==l&&l,c=(i=Tr.serializeWithFunctions(i),this.tile_manager.getRenderableTiles().map((function(t){return t.id})));return cr.postMessage(this._workers,"self.queryFeatures",{filter:i,visible:u,geometry:h,tile_ids:c}).then((function(t){var e=[],i={},n={},o=(r="string"==typeof r?[r]:r)&&function(t){return JSON.stringify(Array.isArray(r)?ku(t,r):t)},s=(a=("string"==typeof a||Array.isArray(a))&&a)&&function(t){return Array.isArray(a)?JSON.stringify(ku(t,a)):t[a]};return t.forEach((function(t){return t.forEach((function(t){if(o){var r=o(t);if(i[r])return;i[r]=!0}var a;s?(a=s(t.properties),n[a]=n[a]||[],n[a].push(t)):e.push(t)}))})),s?n:e}))}},{key:"loadScene",value:function(t,e){var i=this,n=0<arguments.length&&void 0!==t?t:null,r=1<arguments.length&&void 0!==e?e:{},o=r.base_path,a=r.file_type;return this.config_source=n||this.config_source,"string"==typeof this.config_source?this.base_path=Cr(o||this.config_source):this.base_path=Cr(o),this.config_path=this.base_path,Cp.loadScene(this.config_source,{path:this.base_path,type:a}).then((function(t){var e=t.config,n=t.bundle;return i.config=e,i.config_bundle=n,i.config}))}},{key:"createDataSources",value:function(){var t=this,e=[],i=Object.keys(this.sources),n=0;for(var r in this.config.sources){var o=this.config.sources[r],a=this.sources[r];try{var s=Object.assign({},o,{name:r,id:n++});if(this.sources[r]=jr.create(s,this.sources),!this.sources[r])throw{}}catch(i){delete this.sources[r];var u="Could not create data source: ".concat(i.message);Ar("warn","Scene: ".concat(u),o),this.trigger("warning",{type:"sources",source:o,message:u})}jr.sameConfig(this.sources[r],a)||e.push(r)}for(var l in i.forEach((function(i){t.config.sources[i]||(delete t.sources[i],e.push(i))})),0<e.length&&this.tile_manager.removeTiles((function(t){return-1<e.indexOf(t.source.name)})),this.config.layers){var h=this.config.layers[l];!1!==h.enabled&&h.data&&this.sources[h.data.source]&&(this.sources[h.data.source].builds_geometry_tiles=!0)}}},{key:"loadTextures",value:function(){var t=this;return this.textureManager.createFromObject(this.gl,this.config.textures).then((function(){return t.textureManager.createDefault(t.gl)}))}},{key:"updateStyles",value:function(){if(!this.initialized&&!this.initializing)throw new Error("Scene.updateStyles() called before scene was initialized");for(var t in this.styles=this.style_manager.build(this.config.styles),this.style_manager.initStyles(this),this.styles)this.styles[t].setGL(this.gl);this.dirty=!0}},{key:"createLights",value:function(){for(var t in this.lights={},this.config.lights){var e;this.config.lights[t]&&"object"===vn(this.config.lights[t])&&((e=this.config.lights[t]).name=t.replace("-","_"),e.visible=!1!==e.visible,e.visible&&(this.lights[e.name]=qu.create(this.view,e)))}qu.inject(this.lights)}},{key:"setBackground",value:function(){var t,e=this.config.scene.background;this.background={},e&&e.color&&(this.background.color=vo.parseColor(e.color)),this.background.color||(this.background.color=[0,0,0,0]),1===this.background.color[3]?this.canvas.style.backgroundColor="rgba(".concat(this.background.color.map((function(t){return Math.floor(255*t)})).join(", "),")"):this.canvas.style.backgroundColor="transparent",(t=this.gl).clearColor.apply(t,Rn(this.background.color))}},{key:"setIntrospection",value:function(t){var e=this;return t!==this.introspection?(this.introspection=t||!1,this.updating++,this.updateConfig({normalize:!1}).then((function(){return e.updating--}))):Promise.resolve()}},{key:"updateConfig",value:function(t){var i=0<arguments.length&&void 0!==t?t:{},n=i.load_event,r=void 0!==n&&n,o=i.serialize_funcs,a=i.normalize,s=void 0===a||a;i.fade_in,this.generation=++e.generation,this.updating++,this.config=Cp.applyGlobalProperties(this.config),s?Cp.normalize(this.config,this.config_bundle):(Cp.hoistStyleShaderUniformTextures(this.config,this.config_bundle,{include_globals:!0}),Cp.normalizeTextures(this.config,this.config_bundle)),this.trigger(r?"load":"update",{config:this.config}),this.style_manager.init(),this.createLights(),this.createDataSources(),this.loadTextures(),this.setBackground(),Th.loadFonts(this.config.fonts),this.updateStyles();var u=this.syncConfigToWorker({serialize_funcs:o});return this.updating--,this.view.updateBounds(),this.requestRedraw(),u}},{key:"syncConfigToWorker",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).serialize_funcs,i=void 0===e||e?Tr.serializeWithFunctions(this.config):JSON.stringify(this.config);return cr.postMessage(this._workers,"self.updateConfig",{config:i,generation:this.generation,introspection:this.introspection},Au)}},{key:"createListeners",value:function(){var t=this;this.listeners={},this.listeners.view={move:function(){return t.trigger("move")}},this.view.subscribe(this.listeners.view),this.listeners.texture={update:function(){return t.dirty=!0},warning:function(e){return t.trigger("warning",Object.assign({type:"textures"},e))}},this.textureManager.subscribe(this.listeners.texture),this.listeners.scene_loader={error:function(e){return t.trigger("error",Object.assign({type:"scene"},e))}},Cp.subscribe(this.listeners.scene_loader)}},{key:"destroyListeners",value:function(){this.unsubscribeAll(),this.view.unsubscribe(this.listeners.view),this.textureManager.unsubscribe(this.listeners.texture),Cp.unsubscribe(this.listeners.scene_loader),this.listeners=null}},{key:"resetFeatureSelection",value:function(){this.selection?this._workers&&cr.postMessage(this._workers,"self.resetFeatureSelection"):this.selection=new zu(this.gl,this.id)}},{key:"updateViewComplete",value:function(){(this.render_count_changed||this.generation!==this.last_complete_generation)&&this.tile_manager.isReady()&&(this.last_complete_generation=this.generation,this.trigger("view_complete"))}},{key:"resetViewComplete",value:function(){this.last_complete_generation=null}},{key:"screenshot",value:function(t){var e=(0<arguments.length&&void 0!==t?t:{}).background,i=void 0===e?"white":e;return this.requestRedraw(),this.media_capture.screenshot({background:i})}},{key:"pixelRatio",value:function(){return Tr.device_pixel_ratio}},{key:"startVideoCapture",value:function(){return this.requestRedraw(),this.media_capture.startVideoCapture()}},{key:"stopVideoCapture",value:function(){return this.media_capture.stopVideoCapture()}},{key:"_profile",value:function(t){console.profile("main thread: ".concat(t)),cr.postMessage(this._workers,"self.profile",t)}},{key:"_profileEnd",value:function(t){console.profileEnd("main thread: ".concat(t)),cr.postMessage(this._workers,"self.profileEnd",t)}},{key:"getCameraMatrix",value:function(){return this.view.lookAtManipulator.getCameraMatrix()}},{key:"animated",get:function(){var t=this;return void 0!==this.config.scene.animated?this.config.scene.animated:this.tile_manager.getActiveStyles().some((function(e){return t.styles[e]&&t.styles[e].animated}))}}],[{key:"create",value:function(t,i){return new e(t,1<arguments.length&&void 0!==i?i:{})}}]),e}();Wp.id=0,Wp.generation=0;var Yp=function(){En(e,Io);var t=On(e);function e(i,n,r){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};mn(this,e);var a=Math.pow(2,o.coords.z),s=Math.abs(Math.floor(o.coords.x/a)),u=Math.abs(a*s-Math.abs(o.coords.x)),l=o.coords;return o.coords={x:u,y:l.y,z:l.z},t.call(this,i,n,r,o)}return _n(e,[{key:"load",value:function(t){var i=this;if(!t||!t.uid)return Cn(An(e.prototype),"load",this).call(this,t);var n=t.coords,r=new Uint8Array([0,0,0,0]);return this.loading=new Promise((function(e,o){var a=H.map.DataModel.invoke(t.uid,"requestTileAsPromise",[n.x,n.y,n.z])||null;a?a.then((function(e){var n=e.data;i.loaded=!0,!n||n instanceof ArrayBuffer||"IMG"!==n.tagName.toUpperCase()&&"CANVAS"!==n.tagName.toUpperCase()?i.setData(1,1,r,{filtering:"nearest"}):i.setElement(n,t)}),(function(){i.loaded=!1})).then(e,(function(t){return o(t)})):o(new Error("Unable to invoke on target "+t.uid))})),this.loading}}]),e}();Oo.register(Yp,(function(t){return t&&t.uid}));var Kp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Zp=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Xp="undefined"!=typeof BigInt?BigInt:Number;function Jp(t){var e=t;return e&Xp(1)&&(e=~e),+(e>>=Xp(1)).toString()}function $p(t){for(var e="",i=Xp(t);31<i;){var n=i&Xp(31)|Xp(32);e+=Kp[n],i>>=Xp(5)}return e+Kp[i]}function Qp(t){var e=Xp(t),i=e<0;return e<<=Xp(1),i&&(e=~e),$p(e)}var td={encode:function(t){var e=t.precision,i=void 0===e?5:e,n=t.thirdDim,r=void 0===n?0:n,o=t.thirdDimPrecision,a=void 0===o?0:o,s=t.polyline,u=Math.pow(10,i),l=Math.pow(10,a),h=function(t,e,i){if(t<0||15<t)throw new Error("precision out of range. Should be between 0 and 15");if(i<0||15<i)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(e<0||7<e||4===e||5===e)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");var n=i<<7|e<<4|t;return $p(1)+$p(n)}(i,r,a),c=[],f=Xp(0),p=Xp(0),d=Xp(0);return s.forEach((function(t){var e=Xp(Math.round(t[0]*u));c.push(Qp(e-f)),f=e;var i,n=Xp(Math.round(t[1]*u));c.push(Qp(n-p)),p=n,r&&(i=Xp(Math.round(t[2]*l)),c.push(Qp(i-d)),d=i)})),[].concat(Rn(h),c).join("")},decode:function(t){for(var e=function(t){var e=Xp(0),i=Xp(0),n=[];if(t.split("").forEach((function(t){var r,o=Xp((r=t.charCodeAt(0),Zp[r-45]));e|=(o&Xp(31))<<i,(o&Xp(32))===Xp(0)?(n.push(e),e=Xp(0),i=Xp(0)):i+=Xp(5)})),0<i)throw new Error("Invalid encoding");return n}(t),i=function(t,e){if(1!=+t.toString())throw new Error("Invalid format version");var i=+e.toString();return{precision:15&i,thirdDim:i>>4&7,thirdDimPrecision:i>>7&15}}(e[0],e[1]),n=Math.pow(10,i.precision),r=Math.pow(10,i.thirdDimPrecision),o=i.thirdDim,a=0,s=0,u=0,l=[],h=2;h<e.length;)a+=Jp(e[h])/n,s+=Jp(e[h+1])/n,o?(u+=Jp(e[h+2])/r,l.push([a,s,u]),h+=3):(l.push([a,s]),h+=2);if(h!==e.length)throw new Error("Invalid encoding. Premature ending reached");return Mn(Mn({},i),{},{polyline:l})},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3};self.H=self.H||{},self.H.gl={DataSource:jr,Geo:er,MathUtils:Qn,Scene:Wp,Task:To,Tile:Go,WorkerBroker:cr,log:Ar,SceneLoader:Cp,yaml:hp,flexpolyline:td}}()},e(),this.H=this.H||{},this.H.venues=function(t){function e(t,e){void 0===e&&(e={});var i,n=e.insertAt;t&&"undefined"!=typeof document&&(i=document.head||document.getElementsByTagName("head")[0],(e=document.createElement("style")).type="text/css","top"===n&&i.firstChild?i.insertBefore(e,i.firstChild):i.appendChild(e),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)))}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i,n=Object.keys(t);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(t),e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)),n}function u(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function p(t,e,i){return(p=f()?Reflect.construct:function(t,e,i){var n=[null];return n.push.apply(n,e),n=new(Function.bind.apply(t,n)),i&&c(n,i.prototype),n}).apply(null,arguments)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){var e=f();return function(){var i,n=h(t);return i=e?(i=h(this).constructor,Reflect.construct(n,arguments,i)):n.apply(this,arguments),n=this,!(i=i)||"object"!=typeof i&&"function"!=typeof i?d(n):i}}function y(t,e,i){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){if(t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e),t)return(e=Object.getOwnPropertyDescriptor(t,e)).get?e.get.call(i):e.value})(t,e,i||t)}function v(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}}(t,e)||b(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){if(t){if("string"==typeof t)return _(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e(".H_l_right .venues-ui__drawings .trigger.button--active .arrow {\n  transform: rotate(90deg); }\n\n.H_l_right .venues-ui__drawings .drawings {\n  right: 45px;\n  left: initial; }\n");var w=function(){l(e,H.map.Feature);var t=g(e);function e(i){var r;return n(this,e),(r=t.call(this)).id=i.id,r.model=i,r}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getAddress",value:function(){return this.model.getInternalAddress()}},{key:"getCenter",value:function(){var t=(e=v(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"toGeoJSON",value:function(){return this.model.toJSON()}},{key:"getLevel",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getLevel().getDrawing().getParentEventTarget()}}]),e}(),x=function(){l(e,H.map.Feature);var t=g(e);function e(i){var r;return n(this,e),(r=t.call(this)).id=i.id,r.model=i,r}return o(e,[{key:"getData",value:function(){return this.model}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,m(this.model.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=v(this.model.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getLevel",value:function(t){return this.getLevels().find((function(e){return e.id===t}))}},{key:"getLevels",value:function(){var t=this.getData().getLevels().map((function(t){return t.getId()}));return this.getVenue().getLevels().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getMainLevel",value:function(){return this.getLevel(this.model.getMainLevel().getId())}},{key:"getVenue",value:function(){return this.getParentEventTarget()}}]),e}(),M=function(){l(e,H.map.Feature);var t=g(e);function e(i){var r;return n(this,e),(r=t.call(this)).id=i.id,r.model=i,r}return o(e,[{key:"getGeometry",value:function(t){return this.getGeometries().find((function(e){return e.id===t}))}},{key:"getGeometries",value:function(){var t=this.getData().getGeometries().map((function(t){return t.getId()}));return this.getDrawing().getVenue().getGeometries().filter((function(e){return-1!==t.indexOf(e.id)}))}},{key:"getData",value:function(){return this.model}},{key:"getId",value:function(){return this.model.getId()}},{key:"getName",value:function(){return this.model.getDisplayName()}},{key:"getShortName",value:function(){return this.model.getShortName()}},{key:"getZIndex",value:function(){return this.model.getZIndex()}},{key:"isMain",value:function(){return this.model.isMain()}},{key:"getDrawing",value:function(){return this.getParentEventTarget()}},{key:"getVenue",value:function(){return this.getDrawing().getParentEventTarget()}}]),e}();function E(t,e,i,n){for(var r,o=n,a=i-e>>1,s=i-e,u=t[e],l=t[e+1],h=t[i],c=t[i+1],f=e+3;f<i;f+=3){var p=function(t,e,i,n,r,o){var a,s=r-i,u=o-n;return 0===s&&0===u||(1<(a=((t-i)*s+(e-n)*u)/(s*s+u*u))?(i=r,n=o):0<a&&(i+=s*a,n+=u*a)),(s=t-i)*s+(u=e-n)*u}(t[f],t[f+1],u,l,h,c);o<p?(r=f,o=p):p!==o||(p=Math.abs(f-a))<s&&(r=f,s=p)}n<o&&(3<r-e&&E(t,e,r,n),t[r+2]=o,3<i-r&&E(t,r,i,n))}function A(t,e,i,n){return function(t){var e=t.geometry,i=t.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)k(t,e);else if("Polygon"===i||"MultiLineString"===i)for(var n=0;n<e.length;n++)k(t,e[n]);else if("MultiPolygon"===i)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)k(t,e[n][r])}(n={id:void 0===t?null:t,type:e,geometry:i,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n}function k(t,e){for(var i=0;i<e.length;i+=3)t.minX=Math.min(t.minX,e[i]),t.minY=Math.min(t.minY,e[i+1]),t.maxX=Math.max(t.maxX,e[i]),t.maxY=Math.max(t.maxY,e[i+1])}function T(t,e,i,n){if(e.geometry){var r=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],u=e.id;if(i.promoteId?u=e.properties[i.promoteId]:i.generateId&&(u=n||0),"Point"===o)S(r,s);else if("MultiPoint"===o)for(var l=0;l<r.length;l++)S(r[l],s);else if("LineString"===o)I(r,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(l=0;l<r.length;l++)s=[],I(r[l],s,a,!1),t.push(A(u,"LineString",s,e.properties));return}L(r,s,a,!1)}else if("Polygon"===o)L(r,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"!==o)throw new Error("Input data is not a valid GeoJSON object.");for(l=0;l<e.geometry.geometries.length;l++)T(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},i,n);return}for(l=0;l<r.length;l++){var h=[];L(r[l],h,a,!0),s.push(h)}}t.push(A(u,o,s,e.properties))}}function S(t,e){e.push(O(t[0])),e.push(C(t[1])),e.push(0)}function I(t,e,i,n){for(var r,o,a=0,s=0;s<t.length;s++){var u=O(t[s][0]),l=C(t[s][1]);e.push(u),e.push(l),e.push(0),0<s&&(a+=n?(r*l-u*o)/2:Math.sqrt(Math.pow(u-r,2)+Math.pow(l-o,2))),r=u,o=l}var h=e.length-3;e[2]=1,E(e,0,h,i),e[2+h]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function L(t,e,i,n){for(var r=0;r<t.length;r++){var o=[];I(t[r],o,i,n),e.push(o)}}function O(t){return t/360+.5}function C(t){return t=Math.sin(t*Math.PI/180),(t=.5-.25*Math.log((1+t)/(1-t))/Math.PI)<0?0:1<t?1:t}function P(t,e,i,n,r,o,a,s){if(n/=e,(i/=e)<=o&&a<n)return t;if(a<i||n<=o)return null;for(var u=[],l=0;l<t.length;l++){var h=t[l],c=h.geometry,f=h.type,p=0===r?h.minX:h.minY,d=0===r?h.maxX:h.maxY;if(i<=p&&d<n)u.push(h);else if(!(d<i||n<=p)){var g=[];if("Point"===f||"MultiPoint"===f)!function(t,e,i,n,r){for(var o=0;o<t.length;o+=3){var a=t[o+r];i<=a&&a<=n&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}(c,g,i,n,r);else if("LineString"===f)R(c,g,i,n,r,!1,s.lineMetrics);else if("MultiLineString"===f)N(c,g,i,n,r,!1);else if("Polygon"===f)N(c,g,i,n,r,!0);else if("MultiPolygon"===f)for(var y=0;y<c.length;y++){var v=[];N(c[y],v,i,n,r,!0),v.length&&g.push(v)}if(g.length)if(s.lineMetrics&&"LineString"===f)for(y=0;y<g.length;y++)u.push(A(h.id,f,g[y],h.tags));else"LineString"!==f&&"MultiLineString"!==f||(1===g.length?(f="LineString",g=g[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===g.length?"Point":"MultiPoint"),u.push(A(h.id,f,g,h.tags))}}return u.length?u:null}function R(t,e,i,n,r,o,a){for(var s,u,l=j(t),h=0===r?z:B,c=t.start,f=0;f<t.length-3;f+=3){var p=t[f],d=t[f+1],g=t[f+2],y=t[f+3],v=t[f+4],m=0===r?p:d,b=0===r?y:v,_=!1;a&&(s=Math.sqrt(Math.pow(p-y,2)+Math.pow(d-v,2))),m<i?i<b&&(u=h(l,p,d,y,v,i),a&&(l.start=c+s*u)):n<m?b<n&&(u=h(l,p,d,y,v,n),a&&(l.start=c+s*u)):D(l,p,d,g),b<i&&i<=m&&(u=h(l,p,d,y,v,i),_=!0),n<b&&m<=n&&(u=h(l,p,d,y,v,n),_=!0),!o&&_&&(a&&(l.end=c+s*u),e.push(l),l=j(t)),a&&(c+=s)}var w=t.length-3;p=t[w],d=t[1+w],g=t[2+w],i<=(m=0===r?p:d)&&m<=n&&D(l,p,d,g),w=l.length-3,o&&3<=w&&(l[w]!==l[0]||l[1+w]!==l[1])&&D(l,l[0],l[1],l[2]),l.length&&e.push(l)}function j(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function N(t,e,i,n,r,o){for(var a=0;a<t.length;a++)R(t[a],e,i,n,r,o,!1)}function D(t,e,i,n){t.push(e),t.push(i),t.push(n)}function z(t,e,i,n,r,o){return e=(o-e)/(n-e),t.push(o),t.push(i+(r-i)*e),t.push(1),e}function B(t,e,i,n,r,o){return i=(o-i)/(r-i),t.push(e+(n-e)*i),t.push(o),t.push(1),i}function F(t,e){for(var i=[],n=0;n<t.length;n++){var r,o=t[n],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=U(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<o.geometry.length;s++)r.push(U(o.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(U(o.geometry[s][l],e));r.push(u)}i.push(A(o.id,a,r,o.tags))}return i}function U(t,e){var i=[];i.size=t.size,void 0!==t.start&&(i.start=t.start,i.end=t.end);for(var n=0;n<t.length;n+=3)i.push(t[n]+e,t[n+1],t[n+2]);return i}function V(t,e){if(t.transformed)return t;for(var i,n=1<<t.z,r=t.x,o=t.y,a=0;a<t.features.length;a++){var s=t.features[a],u=s.geometry,l=s.type;if(s.geometry=[],1===l)for(i=0;i<u.length;i+=2)s.geometry.push(q(u[i],u[i+1],e,n,r,o));else for(i=0;i<u.length;i++){for(var h=[],c=0;c<u[i].length;c+=2)h.push(q(u[i][c],u[i][c+1],e,n,r,o));s.geometry.push(h)}}return t.transformed=!0,t}function q(t,e,i,n,r,o){return[Math.round(i*(t*n-r)),Math.round(i*(e*n-o))]}function G(t,e,i,n,r){for(var o=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,function(t,e,i,n){var r=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)W(a,r,t,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<r.length;s++)W(a,r[s],t,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<r.length;u++){var l=r[u];for(s=0;s<l.length;s++)W(a,l[s],t,i,!0,0===s)}if(a.length){var h=e.tags||null;if("LineString"===o&&n.lineMetrics){for(var c in h={},e.tags)h[c]=e.tags[c];h.mapbox_clip_start=r.start/r.size,h.mapbox_clip_end=r.end/r.size}n={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:h},null!==e.id&&(n.id=e.id),t.features.push(n)}}(a,t[s],o,r);var u=t[s].minX,l=t[s].minY,h=t[s].maxX,c=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),h>a.maxX&&(a.maxX=h),c>a.maxY&&(a.maxY=c)}return a}function W(t,e,i,n,r,o){var a=n*n;if(0<n&&e.size<(r?a:n))i.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===n||e[u+2]>a)&&(i.numSimplified++,s.push(e[u]),s.push(e[u+1])),i.numPoints++;r&&function(t,e){for(var i=0,n=0,r=t.length,o=r-2;n<r;o=n,n+=2)i+=(t[n]-t[o])*(t[n+1]+t[o+1]);if(0<i===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,o),t.push(s)}}function Y(t,e){var i=(e=this.options=function(t,e){for(var i in e)t[i]=e[i];return t}(Object.create(this.options),e)).debug;if(e.maxZoom<0||24<e.maxZoom)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n,r,o,a,s=function(t,e){var i=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)T(i,t.features[n],e,n);else"Feature"===t.type?T(i,t,e):T(i,{geometry:t},e);return i}(t,e);this.tiles={},this.tileCoords=[],i&&(this.stats={},this.total=0),t=P(a=n=s,1,-1-(o=(r=e).buffer/r.extent),o,0,-1,2,r),e=P(n,1,1-o,2+o,0,-1,2,r),(t||e)&&(a=P(n,1,-o,1+o,0,-1,2,r)||[],t&&(a=F(t,1).concat(a)),e&&(a=a.concat(F(e,-1)))),(s=a).length&&this.splitTile(s,0,0,0),i&&s.length}function K(t,e,i){return 32*((1<<t)*i+e)+t}function Z(t){for(var e,i=[],n=[],r=0,o=t.coordinates.length;r<o;r+=1){var a=t.coordinates[r],s=function(t){return t=function(t){for(var e=0,i=t.length,n=0;n<i-1;n+=1){var r=t[n],o=t[n+1];e+=r[0]*o[1]-o[0]*r[1]}return e+(t[i-1][0]*t[0][1]-t[0][0]*t[i-1][1])}(t),0<t?nt:t<0?rt:void 0}(a);null!==s&&(s===(e=e||s)&&n.length&&(i.push(n),n=[]),n.push(a))}return 0<n.length&&i.push(n),1===i.length?(t.type=$,t.coordinates=i[0]):1<i.length?(t.type=tt,t.coordinates=i):t=null,t}function X(t,e,i,n,r){var o;return r=(o=i,i=n,n=r,e=1<<(r=e),(r=[])[0]=((t=t)[0]/n+o)/e,r[1]=(t[1]/n+i)/e,e=i={x:r[0],y:r[1]}).x,i=e.y,e=360*(r-.5),r=Math.exp(Math.PI*(.5-i)/.25)-1,i=Math.exp(Math.PI*(.5-i)/.25)+1,[e,180*Math.asin(r/i)/Math.PI]}Y.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Y.prototype.splitTile=function(t,e,i,n,r,o,a){for(var s=[t,e,i,n],u=this.options,l=u.debug;s.length;){n=s.pop(),i=s.pop(),e=s.pop(),t=s.pop();var h,c,f,p,d,g,y,v,m=1<<e,b=K(e,i,n),_=this.tiles[b];if(_||(_=this.tiles[b]=G(t,e,i,n,u),this.tileCoords.push({z:e,x:i,y:n}),l&&(v="z"+e,this.stats[v]=(this.stats[v]||0)+1,this.total++)),_.source=t,r){if(e===u.maxZoom||e===r)continue;var w=1<<r-e;if(i!==Math.floor(o/w)||n!==Math.floor(a/w))continue}else if(e===u.indexMaxZoom||_.numPoints<=u.indexMaxPoints)continue;_.source=null,0!==t.length&&(c=.5-(h=.5*u.buffer/u.extent),f=1+h,y=p=d=g=null,v=P(t,m,i-h,i+(b=.5+h),0,_.minX,_.maxX,u),w=P(t,m,i+c,i+f,0,_.minX,_.maxX,u),t=null,v&&(y=P(v,m,n-h,n+b,1,_.minY,_.maxY,u),p=P(v,m,n+c,n+f,1,_.minY,_.maxY,u),v=null),w&&(d=P(w,m,n-h,n+b,1,_.minY,_.maxY,u),g=P(w,m,n+c,n+f,1,_.minY,_.maxY,u),w=null),s.push(y||[],e+1,2*i,2*n),s.push(p||[],e+1,2*i,2*n+1),s.push(d||[],e+1,2*i+1,2*n),s.push(g||[],e+1,2*i+1,2*n+1))}},Y.prototype.getTile=function(t,e,i){var n=this.options,r=n.extent;if(n.debug,t<0||24<t)return null;if(n=K(t,e=(e%(n=1<<t)+n)%n,i),this.tiles[n])return V(this.tiles[n],r);for(var o,a=t,s=e,u=i;!o&&0<a;)a--,s=Math.floor(s/2),u=Math.floor(u/2),o=this.tiles[K(a,s,u)];return o&&o.source?(this.splitTile(o.source,a,s,u,t,e,i),this.tiles[n]?V(this.tiles[n],r):null):null};var J="Point",$="Polygon",Q="MultiLineString",tt="MultiPolygon",et={fillColor:"#F2F285",outlineColor:"#0088BF",outlineWidth:1.2},it={FOOTPRINT:"FOOTPRINT",ICON:"ICON",TEXT:"TEXT",VECTOR:"VECTOR"},nt="CW",rt="CCW";function ot(t){var e=void 0===(o=t.addressList)?[]:o,i=void 0===(r=t.geometries)?[]:r,r=void 0===(o=t.entity)?null:o,o=void 0===(o=t.name)?"":o;t=void 0===(t=t.icon)?"":t,n(this,ot),this.addressList=e,this.geometries=i,this.icon=t,this.entity=r,this.name=o}var at,st,ut=(function(t){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==i(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}var o=n(1),a=(n=n(7)).get,s=(n.deepValue,n.isArray);function u(t,e){var i=void 0===(f=e.location)?0:f,n=void 0===(_=e.distance)?100:_,r=void 0===(p=e.threshold)?.6:p,o=void 0===(v=e.maxPatternLength)?32:v,s=void 0!==(d=e.caseSensitive)&&d,l=void 0===(b=e.tokenSeparator)?/ +/g:b,h=void 0!==(g=e.findAllMatches)&&g,c=void 0===(m=e.minMatchCharLength)?1:m,f=void 0===(y=e.id)?null:y,p=void 0===(_=e.keys)?[]:_,d=void 0===(v=e.shouldSort)||v,g=void 0===(b=e.getFn)?a:b,y=void 0===(m=e.sortFn)?function(t,e){return t.score-e.score}:m,v=void 0!==(_=e.tokenize)&&_,m=void 0!==(b=e.matchAllTokens)&&b,b=void 0!==(_=e.includeMatches)&&_,_=void 0!==(_=e.includeScore)&&_;e=void 0!==(e=e.verbose)&&e,function(t){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:i,distance:n,threshold:r,maxPatternLength:o,isCaseSensitive:s,tokenSeparator:l,findAllMatches:h,minMatchCharLength:c,id:f,keys:p,includeMatches:b,includeScore:_,shouldSort:d,getFn:g,sortFn:y,verbose:e,tokenize:v,matchAllTokens:m},this.setCollection(t),this._processKeys(p)}(function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}})(u.prototype,[{key:"setCollection",value:function(t){return this.list=t}},{key:"_processKeys",value:function(t){if(this._keyWeights={},this._keyNames=[],t.length&&"string"==typeof t[0])for(var e=0,i=t.length;e<i;e+=1){var n=t[e];this._keyWeights[n]=1,this._keyNames.push(n)}else{for(var r=0,o=0,a=t.length;o<a;o+=1){var s=t[o];if(!s.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=s.name;if(this._keyNames.push(u),!s.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');if((s=s.weight)<0||1<s)throw new Error('"weight" property in key must bein the range of [0, 1)');r+=this._keyWeights[u]=s}if(1<r)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{limit:!1};return this._log('---------\nSearch pattern: "'.concat(t,'"')),t=(e=this._prepareSearchers(t)).tokenSearchers,e=e.fullSearcher,e=this._search(t,e),this._computeScore(e),this.options.shouldSort&&this._sort(e),i.limit&&"number"==typeof i.limit&&(e=e.slice(0,i.limit)),this._format(e)}},{key:"_prepareSearchers",value:function(t){t=0<arguments.length&&void 0!==t?t:"";var e=[];if(this.options.tokenize)for(var i=t.split(this.options.tokenSeparator),n=0,r=i.length;n<r;n+=1)e.push(new o(i[n],this.options));return{tokenSearchers:e,fullSearcher:new o(t,this.options)}}},{key:"_search",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:[],n=1<arguments.length?e:void 0,r=this.list,o={},a=[];if("string"==typeof r[0]){for(var s=0,u=r.length;s<u;s+=1)this._analyze({key:"",value:r[s],record:s,index:s},{resultMap:o,results:a,tokenSearchers:i,fullSearcher:n});return a}for(var l=0,h=r.length;l<h;l+=1)for(var c=r[l],f=0,p=this._keyNames.length;f<p;f+=1){var d=this._keyNames[f];this._analyze({key:d,value:this.options.getFn(c,d),record:c,index:l},{resultMap:o,results:a,tokenSearchers:i,fullSearcher:n})}return a}},{key:"_analyze",value:function(t,e){var i=this,n=t.key,r=void 0===(u=t.arrayIndex)?-1:u,o=t.value,a=t.record,u=t.index,l=void 0===(t=e.tokenSearchers)?[]:t,h=e.fullSearcher,c=void 0===(t=e.resultMap)?{}:t,f=void 0===(e=e.results)?[]:e;!function t(e,r,o,a){if(null!=r)if("string"==typeof r){var u=!1,p=-1,d=0;i._log("\nKey: ".concat(""===n?"--":n));var g=h.search(r);if(i._log('Full text: "'.concat(r,'", score: ').concat(g.score)),i.options.tokenize){for(var y=r.split(i.options.tokenSeparator),v=y.length,m=[],b=0,_=l.length;b<_;b+=1){var w=l[b];i._log('\nPattern: "'.concat(w.pattern,'"'));for(var x=!1,M=0;M<v;M+=1){var E=y[M],A=w.search(E),k={};A.isMatch?(k[E]=A.score,x=u=!0,m.push(A.score)):(k[E]=1,i.options.matchAllTokens||m.push(1)),i._log('Token: "'.concat(E,'", score: ').concat(k[E]))}x&&(d+=1)}p=m[0];for(var T=m.length,S=1;S<T;S+=1)p+=m[S];p/=T,i._log("Token score average:",p)}var I=g.score;-1<p&&(I=(I+p)/2),i._log("Score average:",I);var L=!i.options.tokenize||!i.options.matchAllTokens||d>=l.length;i._log("\nCheck Matches: ".concat(L)),(u||g.isMatch)&&L&&(I={key:n,arrayIndex:e,value:r,score:I},i.options.includeMatches&&(I.matchedIndices=g.matchedIndices),(g=c[a])?g.output.push(I):(c[a]={item:o,output:[I]},f.push(c[a])))}else if(s(r))for(var O=0,C=r.length;O<C;O+=1)t(O,r[O],o,a)}(r,o,a,u)}},{key:"_computeScore",value:function(t){this._log("\n\nComputing score:\n");for(var e=this._keyWeights,i=!!Object.keys(e).length,n=0,r=t.length;n<r;n+=1){for(var o=t[n],a=o.output,s=a.length,u=1,l=0;l<s;l+=1){var h=(f=a[l]).key,c=i?e[h]:1,f=0===f.score&&e&&0<e[h]?Number.EPSILON:f.score;u*=Math.pow(f,c)}o.score=u,this._log(o)}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e,i=[];this.options.verbose&&(e=[],this._log("\n\nOutput:\n\n",JSON.stringify(t,(function(t,i){if("object"===r(i)&&null!==i){if(-1!==e.indexOf(i))return;e.push(i)}return i}),2)),e=null);var n=[];this.options.includeMatches&&n.push((function(t,e){var i=t.output;e.matches=[];for(var n=0,r=i.length;n<r;n+=1){var o,a=i[n];0!==a.matchedIndices.length&&(o={indices:a.matchedIndices,value:a.value},a.key&&(o.key=a.key),a.hasOwnProperty("arrayIndex")&&-1<a.arrayIndex&&(o.arrayIndex=a.arrayIndex),e.matches.push(o))}})),this.options.includeScore&&n.push((function(t,e){e.score=t.score}));for(var o=0,a=t.length;o<a;o+=1){var s=t[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),n.length){for(var u={item:s.item},l=0,h=n.length;l<h;l+=1)n[l](s,u);i.push(u)}else i.push(s.item)}return i}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}]),n=u,t.exports=n},function(t,e,i){var n=i(2),r=i(3),o=i(6);function a(t,e){var i=void 0===(c=e.location)?0:c,n=void 0===(u=e.distance)?100:u,r=void 0===(h=e.threshold)?.6:h,s=void 0===(l=e.maxPatternLength)?32:l,u=void 0!==(c=e.isCaseSensitive)&&c,l=void 0===(h=e.tokenSeparator)?/ +/g:h,h=void 0!==(c=e.findAllMatches)&&c,c=void 0===(c=e.minMatchCharLength)?1:c;e=void 0!==(e=e.includeMatches)&&e,function(t){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.options={location:i,distance:n,threshold:r,maxPatternLength:s,isCaseSensitive:u,tokenSeparator:l,findAllMatches:h,includeMatches:e,minMatchCharLength:c},this.pattern=u?t:t.toLowerCase(),this.pattern.length<=s&&(this.patternAlphabet=o(this.pattern))}(function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}})(a.prototype,[{key:"search",value:function(t){var e=(u=this.options).isCaseSensitive,i=u.includeMatches;if(e||(t=t.toLowerCase()),this.pattern===t){var o={isMatch:!0,score:0};return i&&(o.matchedIndices=[[0,t.length-1]]),o}var a=this.options,s=a.maxPatternLength,u=a.tokenSeparator;return this.pattern.length>s?n(t,this.pattern,u):(o=(e=this.options).location,a=e.distance,s=e.threshold,u=e.findAllMatches,e=e.minMatchCharLength,r(t,this.pattern,this.patternAlphabet,{location:o,distance:a,threshold:s,findAllMatches:u,minMatchCharLength:e,includeMatches:i}))}}]),i=a,t.exports=i},function(t,e){var i=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,r=(n=new RegExp(e.replace(i,"\\$&").replace(n,"|")),t.match(n)),o=[];if(n=!!r)for(var a=0,s=r.length;a<s;a+=1){var u=r[a];o.push([t.indexOf(u),u.length-1])}return{score:n?.5:1,isMatch:n,matchedIndices:o}}},function(t,e,i){var n=i(4),r=i(5);t.exports=function(t,e,i,o){for(var a=void 0===(h=o.location)?0:h,s=void 0===(u=o.distance)?100:u,u=void 0===(h=o.threshold)?.6:h,l=void 0!==(h=o.findAllMatches)&&h,h=void 0===(h=o.minMatchCharLength)?1:h,c=(o=void 0!==(o=o.includeMatches)&&o,a),f=t.length,p=u,d=t.indexOf(e,c),g=e.length,y=[],v=0;v<f;v+=1)y[v]=0;-1!==d&&(u=n(e,{errors:0,currentLocation:d,expectedLocation:c,distance:s}),p=Math.min(u,p),-1!==(d=t.lastIndexOf(e,c+g))&&(O=n(e,{errors:0,currentLocation:d,expectedLocation:c,distance:s}),p=Math.min(O,p))),d=-1;for(var m=[],b=1,_=g+f,w=1<<(g<=31?g-1:30),x=0;x<g;x+=1){for(var M=0,E=_;M<E;)n(e,{errors:x,currentLocation:c+E,expectedLocation:c,distance:s})<=p?M=E:_=E,E=Math.floor((_-M)/2+M);_=E;var A=Math.max(1,c-E+1),k=l?f:Math.min(c+E,f)+g,T=Array(k+2);T[k+1]=(1<<x)-1;for(var S=k;A<=S;--S){var I=S-1,L=i[t.charAt(I)];if(L&&(y[I]=1),T[S]=(T[S+1]<<1|1)&L,0!==x&&(T[S]|=(m[S+1]|m[S])<<1|1|m[S+1]),T[S]&w&&(b=n(e,{errors:x,currentLocation:I,expectedLocation:c,distance:s}))<=p){if(p=b,(d=I)<=c)break;A=Math.max(1,2*c-d)}}if(n(e,{errors:x+1,currentLocation:c,expectedLocation:c,distance:s})>p)break;m=T}var O={isMatch:0<=d,score:0===b?.001:b};return o&&(O.matchedIndices=r(y,h)),O}},function(t,e){t.exports=function(t,e){var i=void 0===(n=e.errors)?0:n,n=void 0===(r=e.currentLocation)?0:r,r=void 0===(r=e.expectedLocation)?0:r;return e=void 0===(e=e.distance)?100:e,t=i/t.length,n=Math.abs(r-n),e?t+n/e:n?1:t}},function(t,e){t.exports=function(){for(var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===r?r=o:s||-1===r||((t=o-1)-r+1>=i&&n.push([r,t]),r=-1)}return e[o-1]&&i<=o-r&&n.push([r,o-1]),n}},function(t,e){t.exports=function(t){for(var e={},i=t.length,n=0;n<i;n+=1)e[t.charAt(n)]=0;for(var r=0;r<i;r+=1)e[t.charAt(r)]|=1<<i-r-1;return e}},function(t,e){function i(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null==t?"":function(){if("string"==typeof t)return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}()}function r(t){return"string"==typeof t}function o(t){return"number"==typeof t}t.exports={get:function(t,e){var a=[];return function t(e,s){if(s){var u=s.indexOf("."),l=s,h=null;-1!==u&&(l=s.slice(0,u),h=s.slice(u+1));var c=e[l];if(null!=c)if(h||!r(c)&&!o(c))if(i(c))for(var f=0,p=c.length;f<p;f+=1)t(c[f],h);else h&&t(c,h);else a.push(n(c))}else a.push(e)}(t,e),a},isArray:i,isString:r,isNum:o,toString:n}}])}(at={exports:{}}),at.exports),lt=(st=ut)&&st.__esModule&&Object.prototype.hasOwnProperty.call(st,"default")?st.default:st,ht=(ut.Fuse,{keys:[{name:"name",weight:.6},{name:"addressList",weight:.4}],threshold:.2}),ct=function(){function t(e){n(this,t),this.fuseSearch=null,this.levels_=null,this.searchListEntities_=[],this.searchListIcons_=[],this.searchList_=[],this.venueModel=e,this.init()}return o(t,[{key:"init",value:function(){var t=this.venueModel.getGeometries().reduce((function(t,e){return t[e.getId()]=e,t}),{});this.initEntityList(this.venueModel.entities),this.initIconList(t),this.levels_=this.venueModel.getLevels().map((function(t){return{levelId:t.getId(),levelName:t.getName(),drawingId:t.getDrawing().getId(),drawingName:t.getDrawing().getName()}})),t=[].concat(m(this.searchListEntities_),m(this.searchListIcons_)),this.searchList_=t.sort((function(t,e){return t.name.localeCompare(e.name)})),this.fuseSearch_=new lt(this.searchList_,ht)}},{key:"initEntityList",value:function(t){t=(0<arguments.length&&void 0!==t?t:[]).map((function(t){return new ot({geometries:t.getGeometries(),addressList:t.getInternalAddress()||[],name:t.getName()||"",entity:t})})),this.searchListEntities_=t}},{key:"initIconList",value:function(t){t=0<arguments.length&&void 0!==t?t:{},this.searchListIcons_=Object.values(t).filter((function(t){return t.getIcon()})).map((function(t){var e=t.getIcon();return new ot({geometries:[t],icon:e.getSVG(),name:e.ar||""})}))}},{key:"all",value:function(){return this.searchList_}},{key:"allIconTypes",value:function(){var t=this.searchListIcons_.reduce((function(t,e){return t[e.name]=e.name,t}),{});return Object.keys(t)}},{key:"find",value:function(t){return""===(t=0<arguments.length&&void 0!==t?t:"")?this.searchList_:this.fuseSearch_.search(t)}},{key:"groupByLevel",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.searchList_;return this.levels_?m(this.levels_.flatMap((function(t){return u(u({},t),{},{results:e.filter((function(e){return i=t,0<(e=e).geometries.length&&e.geometries.find((function(t){return Number(t.getLevel().getId())===Number(i.levelId)}));var i}))})}))):[]}}]),t}(),ft="Point",pt="LineString",dt="Polygon",gt="MultiPoint",yt="MultiLineString",vt="MultiPolygon",mt=Object.freeze({STANDARD:"STANDARD",FLATTEN:"FLATTEN",OUTDOOR_MAIN:"OUTDOOR_MAIN",INDOOR_MAIN:"INDOOR_MAIN",NO_OUTDOORS:"NO_OUTDOORS",FLATTEN_INDOOR_MAIN:"FLATTEN_INDOOR_MAIN",FLATTEN_OUTDOOR_COPY:"FLATTEN_OUTDOOR_COPY"}),bt=Object.freeze({THEME:"THEME",THEME_MAP:"THEME_MAP",PRESETS:"PRESETS",SDK_STRINGS:"SDK_STRINGS",ICON_FILE:"ICON_FILE",INPUT_COLORS:"INPUT_COLORS",BASE_MAP_INFO:"BASE_MAP_INFO",CONFIG_PROFILE:"CONFIG_PROFILE",NAV_THEME:"NAV_THEME",NAV_NAME_THEME:"NAV_NAME_THEME",NAV_PROP_MAP:"NAV_PROP_MAP",NAV_STRINGS:"NAV_STRINGS",NAV_THEME_MAP:"NAV_THEME_MAP",NAV_NAME_THEME_MAP:"NAV_NAME_THEME_MAP",V4_THEME_FAMILY:"V4_THEME_FAMILY",V4_MAPTYPE_THEME:"V4_MAPTYPE_THEME",ICON:"ICON",MARKER:"MARKER",PERMISSIONS:"PERMISSIONS",NAICS_ARRAY:"NAICS_ARRAY",NAICS_MAP:"NAICS_MAP"}),_t=Object.freeze((a(be={},bt.THEME,"themeUrls"),a(be,bt.THEME_MAP,"themeMapUrl"),a(be,bt.PRESETS,"presetsUrl"),a(be,bt.SDK_STRINGS,"stringsUrl"),be)),wt=Object.freeze((a(Le={},bt.THEME,"themeOverrides"),a(Le,bt.THEME_MAP,"themeMapOverrides"),a(Le,bt.PRESETS,"presetOverrides"),a(Le,bt.SDK_STRINGS,"stringsOverrides"),a(Le,bt.INPUT_COLORS,"inputColorOverrides"),Le)),xt=(Object.freeze((a(Et={},bt.THEME,["Modern","Standard","Factory","Navteq","TheBase","Westfield_noLabels","Westfield","TDM_noLabel"]),a(Et,bt.SDK_STRINGS,["Standard","SDK","sdk/standard"]),a(Et,bt.V4_THEME_FAMILY,["modern","standard"]),a(Et,bt.V4_MAPTYPE_THEME,["Airport Terminal","Airport","Casino","College Building","College Campus","Convention","General","Hospital","Outdoor","Retail","School Building","School Campus","Shopping Mall","Traffic","Train Station"]),a(Et,bt.NAV_THEME,["Factory","MapEditor"]),a(Et,bt.ICON,["Multicolor","Standard","TheBase","Factory"]),Et)),Object.freeze((a(be={},bt.THEME,"Modern"),a(be,bt.THEME_MAP,"Standard"),a(be,bt.PRESETS,"Standard"),a(be,bt.SDK_STRINGS,"Standard"),a(be,bt.ICON_FILE,"Standard"),a(be,bt.INPUT_COLORS,"Standard"),a(be,bt.BASE_MAP_INFO,"Standard"),a(be,bt.CONFIG_PROFILE,"factory"),a(be,bt.NAV_THEME,"Factory"),a(be,bt.NAV_NAME_THEME,"FactoryName"),a(be,bt.NAV_PROP_MAP,"Standard"),a(be,bt.NAV_STRINGS,"Standard"),a(be,bt.NAV_THEME_MAP,"Standard"),a(be,bt.NAV_NAME_THEME_MAP,"StandardName"),a(be,bt.V4_THEME_FAMILY,"Standard"),a(be,bt.V4_MAPTYPE_THEME,"Standard"),a(be,bt.ICON,"Multicolor"),a(be,bt.MARKER,"Standard"),be))),Mt=Object.freeze({GEO_JSON:"GEO_JSON",V5_MAP:"V5_MAP",V5_NAV:"V5_NAV",V5_INFO:"V5_INFO",KML:"KML",SVG:"SVG",PNG:"PNG"}),Et=Object.freeze((a(Le={},Mt.V5_MAP,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_DIRECTORY:"COMMUNITY_DIRECTORY",COMMUNITY_DETAIL:"COMMUNITY_DETAIL",LEVEL_GEOMETRY:"LEVEL_GEOMETRY",DRAWING_ENTITY:"DRAWING_ENTITY"}),a(Le,Mt.GEO_JSON,{COMMUNITY_MAP:"COMMUNITY_MAP",COMMUNITY_ENTITY:"COMMUNITY_ENTITY",PATH_LEVEL_GEOMETRY:"PATH_LEVEL_GEOMETRY",GEOJSON_LEVEL_GEOMETRY:"GEOJSON_LEVEL_GEOMETRY"}),a(Le,Mt.V5_NAV,{JSON_NAV:"JSON_NAV",BINARY_NAV:"BINARY_NAV",JSON_ENHANCED_NAV:"JSON_ENHANCED_NAV",BINARY_ENHANCED_NAV:"BINARY_ENHANCED_NAV"}),a(Le,Mt.V5_INFO,{GEOMETRY_INFO:"GEOMETRY_INFO"}),a(Le,Mt.SVG,{PLAIN:"PLAIN",PRETTY:"PRETTY",PRETTY_HORIZONTAL_LABEL:"PRETTY_HORIZONTAL_LABEL"}),a(Le,Mt.KML,{RASTER:"RASTER",VECTOR:"VECTOR",RASTER_HORIZONTAL:"RASTER_HORIZONTAL",VECTOR_HORIZONTAL:"VECTOR_HORIZONTAL"}),a(Le,Mt.PNG,{LOW_RESOLUTION:"LOW_RESOLUTION",HIGH_RESOLUTION:"HIGH_RESOLUTION",LOW_RESOLUTION_GEO:"LOW_RESOLUTION_GEO",HIGH_RESOLUTION_GEO:"HIGH_RESOLUTION_GEO",LOW_RESOLUTION_HORIZONTAL:"LOW_RESOLUTION_HORIZONTAL",HIGH_RESOLUTION_HORIZONTAL:"HIGH_RESOLUTION_HORIZONTAL",LOW_RESOLUTION_HORIZONTAL_GEO:"LOW_RESOLUTION_HORIZONTAL_GEO",HIGH_RESOLUTION_HORIZONTAL_GEO:"HIGH_RESOLUTION_HORIZONTAL_GEO"}),Le));function At(){}function kt(){kt.init.call(this)}function Tt(t){return void 0===t._maxListeners?kt.defaultMaxListeners:t._maxListeners}function St(t,e,i,n){var r,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');return(r=t._events)?(r.newListener&&(t.emit("newListener",e,i.listener||i),r=t._events),o=r[e]):(r=t._events=new At,t._eventsCount=0),o?("function"==typeof o?o=r[e]=n?[i,o]:[o,i]:n?o.unshift(i):o.push(i),o.warned||(n=Tt(t))&&0<n&&o.length>n&&(o.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=t,n.type=e,n.count=o.length,console.warn)):(o=r[e]=i,++t._eventsCount),t}function It(t,e,i){var n=!1;function r(){t.removeListener(e,r),n||(n=!0,i.apply(t,arguments))}return r.listener=i,r}function Lt(t){var e=this._events;if(e){if("function"==typeof(t=e[t]))return 1;if(t)return t.length}return 0}function Ot(t,e){for(var i=new Array(e);e--;)i[e]=t[e];return i}At.prototype=Object.create(null),(kt.EventEmitter=kt).usingDomains=!1,kt.prototype.domain=void 0,kt.prototype._events=void 0,kt.prototype._maxListeners=void 0,kt.defaultMaxListeners=10,kt.init=function(){this.domain=null,kt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new At,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},kt.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},kt.prototype.getMaxListeners=function(){return Tt(this)},kt.prototype.emit=function(t,e,i,n){var r,o,a,s="error"===t,u=this._events;if(u)s=s&&null==u.error;else if(!s)return!1;if(l=this.domain,s){if(s=e,l)return(s=s||new Error('Uncaught, unspecified "error" event')).domainEmitter=this,s.domain=l,s.domainThrown=!1,l.emit("error",s),!1;if(s instanceof Error)throw s;var l=new Error('Uncaught, unspecified "error" event. ('+s+")");throw l.context=s,l}if(!(r=u[t]))return!1;var h,c="function"==typeof r;switch(h=arguments.length){case 1:!function(t,e,i){if(e)t.call(i);else for(var n=t.length,r=Ot(t,n),o=0;o<n;++o)r[o].call(i)}(r,c,this);break;case 2:!function(t,e,i,n){if(e)t.call(i,n);else for(var r=t.length,o=Ot(t,r),a=0;a<r;++a)o[a].call(i,n)}(r,c,this,e);break;case 3:!function(t,e,i,n,r){if(e)t.call(i,n,r);else for(var o=t.length,a=Ot(t,o),s=0;s<o;++s)a[s].call(i,n,r)}(r,c,this,e,i);break;case 4:!function(t,e,i,n,r,o){if(e)t.call(i,n,r,o);else for(var a=t.length,s=Ot(t,a),u=0;u<a;++u)s[u].call(i,n,r,o)}(r,c,this,e,i,n);break;default:for(o=new Array(h-1),a=1;a<h;a++)o[a-1]=arguments[a];!function(t,e,i,n){if(e)t.apply(i,n);else for(var r=t.length,o=Ot(t,r),a=0;a<r;++a)o[a].apply(i,n)}(r,c,this,o)}return!0},kt.prototype.addListener=function(t,e){return St(this,t,e,!1)},kt.prototype.on=kt.prototype.addListener,kt.prototype.prependListener=function(t,e){return St(this,t,e,!0)},kt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,It(this,t,e)),this},kt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,It(this,t,e)),this},kt.prototype.removeListener=function(t,e){var i,n,r,o,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener&&i.listener===e)0==--this._eventsCount?this._events=new At:(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,o=i.length;0<o--;)if(i[o]===e||i[o].listener&&i[o].listener===e){a=i[o].listener,r=o;break}if(r<0)return this;if(1===i.length){if(i[0]=void 0,0==--this._eventsCount)return this._events=new At,this;delete n[t]}else!function(t,e){for(var i=e,n=i+1,r=t.length;n<r;i+=1,n+=1)t[i]=t[n];t.pop()}(i,r);n.removeListener&&this.emit("removeListener",t,a||e)}return this},kt.prototype.removeAllListeners=function(t){var e,i=this._events;if(!i)return this;if(!i.removeListener)return 0===arguments.length?(this._events=new At,this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=new At:delete i[t]),this;if(0===arguments.length){for(var n,r=Object.keys(i),o=0;o<r.length;++o)"removeListener"!==(n=r[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new At,this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)for(;this.removeListener(t,e[e.length-1]),e[0];);return this},kt.prototype.listeners=function(t){var e=this._events,i=e&&(i=e[t])?"function"==typeof i?[i.listener||i]:function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(i):[];return i},kt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Lt.call(t,e)},kt.prototype.listenerCount=Lt,kt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Ct="venues-ui-button--active",Pt="venues-ui-button",Rt="venues-ui__drawings",jt="data-drawing",Nt=function(){function t(e,i,r){var o=this;n(this,t),this.clickHandler=r,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("class",Rt);var a=document.createElement("div");a.setAttribute("class","trigger ".concat(Pt)),(r=document.createElement("div")).setAttribute("class","arrow arrow--down"),a.appendChild(r),a.addEventListener("click",(function(){a.classList.toggle(Ct),o.containerButtons.classList.toggle("drawings--open")})),this.containerDiv.appendChild(a),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class","drawings"),this.containerDiv.appendChild(this.containerButtons),i&&this.update(i),e.appendChild(this.containerDiv)}return o(t,[{key:"drawButton",value:function(t,e,i){var n=this,r=document.createElement("div");i=Number(i)===Number(t),r.setAttribute("class",i?"".concat(Pt," ").concat(Ct):Pt),r.innerHTML=e,r.setAttribute(jt,t),r.addEventListener("click",(function(){n.switch(t),n.clickHandler(t)})),this.containerButtons.appendChild(r)}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Rt," .").concat(Ct)).forEach((function(t){return t.setAttribute("class",Pt)})),(t=this.containerButtons.querySelector("[".concat(jt,"='").concat(t,"']")))&&t.setAttribute("class","".concat(Pt," ").concat(Ct))}},{key:"update",value:function(t){var e=this;this.containerButtons.innerHTML="";var i=function(t){return t=t.getDrawings(),new Map(t.map((function(t){var e=t.getDisplayName()||t.getName();return[t.getId(),e]})))}(t);0<i.size&&i.forEach((function(i,n){return e.drawButton(n,i,t.getRootDrawing().getId())}))}}]),t}(),Dt="venues-ui-button--active",zt="venues-ui-button",Bt="levels",Ht="data-level",Ft="venues-ui__levels",Ut=function(){function t(e,i,r,o){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:4;n(this,t),this.clickHandler=o,this.levelButtonCount=a,this.currentScrollIndex=0,this.containerUI=document.createElement("div"),this.containerUI.setAttribute("class","".concat(Ft)),this.containerButtons=document.createElement("div"),this.containerButtons.setAttribute("class",Bt),this.containerUI.appendChild(this.containerButtons),i&&this.update(i,r),e.appendChild(this.containerUI)}return o(t,[{key:"clear",value:function(){this.containerButtons.innerHTML="",this.buttonScrollUp&&(this.containerUI.removeChild(this.buttonScrollUp),this.buttonScrollUp=null),this.buttonScrollDown&&(this.containerUI.removeChild(this.buttonScrollDown),this.buttonScrollDown=null)}},{key:"drawLevelButton",value:function(t,e){var i=this,n=document.createElement("div");n.innerHTML=e,n.style.fontSize="".concat(Math.max(Math.min(28.8/e.length,11.52),10),"px"),n.style.display="block",n.setAttribute("class",zt),n.setAttribute(Ht,t),n.addEventListener("click",(function(){i.switch(t),i.clickHandler(t)})),this.containerButtons.appendChild(n)}},{key:"drawScrollButtons",value:function(){var t=this;this.buttonScrollUp=document.createElement("div"),this.buttonScrollUp.setAttribute("class","".concat(zt," ").concat(zt,"--up"));var e=document.createElement("div");e.setAttribute("class","arrow arrow--up"),this.buttonScrollUp.appendChild(e),this.buttonScrollUp.addEventListener("click",(function(){return t.scroll(1)})),this.containerUI.insertBefore(this.buttonScrollUp,this.containerButtons),this.buttonScrollDown=document.createElement("div"),this.buttonScrollDown.setAttribute("class","".concat(zt," ").concat(zt,"--down")),(e=document.createElement("div")).setAttribute("class","arrow arrow--down"),this.buttonScrollDown.appendChild(e),this.buttonScrollDown.addEventListener("click",(function(){return t.scroll(-1)})),this.containerUI.appendChild(this.buttonScrollDown)}},{key:"scroll",value:function(t){var e,i=0<arguments.length&&void 0!==t?t:0,n=Array.from(this.containerButtons.querySelectorAll(".".concat(zt))).reverse(),r=[];0<=i?(this.currentScrollIndex=Math.min(this.currentScrollIndex+i,n.length-this.levelButtonCount),t=Math.min(this.currentScrollIndex,n.length-this.levelButtonCount),e=Math.min(this.currentScrollIndex+this.levelButtonCount,n.length),r=n.slice(t,e)):i<0&&(this.currentScrollIndex=Math.max(this.currentScrollIndex+i,0),e=Math.max(0,this.currentScrollIndex),i=Math.min(n.length,this.currentScrollIndex+this.levelButtonCount),r=n.slice(e,i)),n.forEach((function(t){-1!==r.indexOf(t)?t.style.display="block":t.style.display="none"})),this.buttonScrollDown&&(0===this.currentScrollIndex?this.buttonScrollDown.setAttribute("disabled","disabled"):this.buttonScrollDown.removeAttribute("disabled")),this.buttonScrollUp&&(this.currentScrollIndex===n.length-this.levelButtonCount?this.buttonScrollUp.setAttribute("disabled","disabled"):this.buttonScrollUp.removeAttribute("disabled"))}},{key:"switch",value:function(t){this.containerButtons.querySelectorAll(".".concat(Dt)).forEach((function(t){return t.setAttribute("class",zt)}));var e=this.containerButtons.querySelector(".".concat(Ft," [").concat(Ht,"='").concat(t,"']"));e&&(t=Array.from(this.containerButtons.querySelectorAll(".".concat(zt))).reverse(),e.setAttribute("class","".concat(zt," ").concat(Dt)),((e=t.indexOf(e))<this.currentScrollIndex||e>=this.currentScrollIndex+4)&&this.scroll(e-this.currentScrollIndex))}},{key:"update",value:function(t,e){var i=this,n=(e=function(t){return new Map((0<arguments.length&&void 0!==t?t:[]).map((function(t){return[t.getZIndex(),t.getShortName()||t.getDisplayName()||t.getName()]})))}(function(t,e){return e!==mt.FLATTEN?t.getLevels():(t=t.getVenueModel().getLevelMapFlattenedByZIndex_(),Object.values(t).map((function(t){return t[0]})))}(t,e).sort((function(t,e){return e.getZIndex()-t.getZIndex()}))),t.getMainLevel().getZIndex());this.clear(),e.forEach((function(t,e){return i.drawLevelButton(e,t)})),e.size>this.levelButtonCount&&(e.size>this.levelButtonCount+1?this.currentScrollIndex=Math.min(Array.from(e).reverse().findIndex((function(t){return t[0]===n})),e.size-this.levelButtonCount):this.currentScrollIndex=0,this.drawScrollButtons(),this.scroll(0)),this.switch(n)}}]),t}(),Vt={VENUE_DATA_LOADED:"VENUE_DATA_LOADED",VENUE_MAP_DATA_LOADED:"VENUE_MAP_DATA_LOADED",VENUE_ENTITY_DATA_LOADED:"VENUE_ENTITY_DATA_LOADED",VENUE_DATA_MODEL_LOADED:"VENUE_DATA_MODEL_LOADED",VENUE_NAV_DATA_LOADED:"VENUE_NAV_DATA_LOADED",META_DATA_LOADED:"META_DATA_LOADED",META_DATA_MODEL_LOADED:"META_DATA_MODEL_LOADED",META_DATA_MODEL_UPDATED:"META_DATA_MODEL_UPDATED",VENUE_ICONS_LOADED:"VENUE_ICONS_LOADED"},qt=(Object.freeze((a(be={},Vt.VENUE_DATA_LOADED,{description:"event fired when all requested files along with metadata & overrides are loaded",emitTemplate:{}}),a(be,Vt.VENUE_MAP_DATA_LOADED,{description:"event fired when requested levels, drawings & community files are loaded",emitTemplate:{}}),a(be,Vt.VENUE_ENTITY_DATA_LOADED,{description:"event fired when requested entity data is loaded",emitTemplate:{}}),a(be,Vt.VENUE_DATA_MODEL_LOADED,{description:"event fired when a map file is loaded",emitTemplate:{}}),a(be,Vt.VENUE_NAV_DATA_LOADED,{description:"event fired when requested navigation product is loaded",emitTemplate:{}}),a(be,Vt.META_DATA_LOADED,{description:"event fired when all requested meta files are loaded except icon & marker",emitTemplate:{}}),a(be,Vt.META_DATA_MODEL_LOADED,{description:"event fired when a specific model is loaded except icon & marker",emitTemplate:{}}),a(be,Vt.META_DATA_MODEL_UPDATED,{description:"event fired when a specific meta override is added or removed",emitTemplate:{}}),a(be,Vt.VENUE_ICONS_LOADED,{description:"event fired when all icons of venue are loaded",emitTemplate:{}}),be)),new kt);function Gt(t,e){var i,n,r,o,a=0;Object.keys(e).forEach((function(s){for(i=e[s],null==(r=i.priority)&&(r=0),o=!1;!o;)a<t.length?null==(n=(n=t[a]).priority)&&(n=0):n=Number.MAX_VALUE,r<=n&&(t.splice(a,0,i),o=!0),a+=1}))}qt.EVENT_NAME=Vt,qt.on("newListener",(function(t){}));var Wt=Math.PI/180,Yt=180/Math.PI,Kt=function(){function t(){n(this,t)}return o(t,null,[{key:"toRadians",value:function(t){return t*Wt}},{key:"toDegrees",value:function(t){return t*Yt}},{key:"getInverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return(e=[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,0,0])[4]=-(e[0]*t[4]+e[2]*t[5]),e[5]=-(e[1]*t[4]+e[3]*t[5]),e}},{key:"applyTransformToPoint",value:function(t,e){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}},{key:"transformProduct",value:function(t,e){var i=[0,0,0,0,0,0];return i[0]=e[0]*t[0]+e[2]*t[1],i[1]=e[1]*t[0]+e[3]*t[1],i[2]=e[0]*t[2]+e[2]*t[3],i[3]=e[1]*t[2]+e[3]*t[3],i[4]=e[0]*t[4]+e[2]*t[5]+e[4],i[5]=e[1]*t[4]+e[3]*t[5]+e[5],i}},{key:"convertLonLatToMerc",value:function(t){var e=t[0]*Wt;return t=t[1]*Wt,t=Math.sin(t),[.5+e/(2*Math.PI),.5-Math.log((1+t)/(1-t))/(4*Math.PI)]}},{key:"convertMercToLatLon",value:function(t){var e=2*Math.PI*(t[0]-.5);return t=Math.atan(Math.sinh(2*Math.PI*(.5-t[1]))),[e/Wt,t/Wt]}},{key:"getTransformScale",value:function(t){return Math.sqrt(t[0]*t[3]-t[1]*t[2])}},{key:"getLonLatToMercTransform",value:function(e){var i=[1/360,0,0,-1/(360*Math.cos(e[1]*Wt)),0,0],n=t.applyTransformToPoint(i,e);return e=t.convertLonLatToMerc(e),i[4]=e[0]-n[0],i[5]=e[1]-n[1],i}},{key:"getNatToMercTransform",value:function(e){var i=[e[4],e[5]];return i=t.getLonLatToMercTransform(i),t.transformProduct(e,i)}},{key:"convertMxMy2LonLat",value:function(e,i){return e.length&&i.length?t.applyTransformToPoint(e,i):[]}},{key:"convertLonLat2MxMy",value:function(e,i){return e.length&&i.length?(e=t.getInverseTransform(e),t.applyTransformToPoint(e,i)):[]}},{key:"getFlattenedQuadraticBezierCurve",value:function(t,e,i,n){var r=[],o=3<arguments.length&&void 0!==n?n:10;o<1&&(o=6);for(var a=0;a<=o;a+=1){var s=(1-(h=a/o))*(1-h),u=2*h*(1-h),l=h*h,h=s*t[0]+u*e[0]+l*i[0];l=s*t[1]+u*e[1]+l*i[1],r.push([h,l])}return r}},{key:"getFlattenedCubicBezierCurve",value:function(t,e,i,n,r){var o=[],a=4<arguments.length&&void 0!==r?r:10;a<1&&(a=6);for(var s=0;s<=a;s+=1){var u=(1-(f=s/a))*(1-f)*(1-f),l=3*f*(1-f)*(1-f),h=3*f*f*(1-f),c=f*f*f,f=u*t[0]+l*e[0]+h*i[0]+c*n[0];c=u*t[1]+l*e[1]+h*i[1]+c*n[1],o.push([f,c])}return o}},{key:"getRectangularCoordinatesOfLabelArea",value:function(e,i,n){var r=!(2<arguments.length&&void 0!==n)||n,o=(l=v(e,6))[0],a=l[1],s=l[2],u=l[3],l=(n=l[5],t.getDeltaLonLatForMeterAtGivenLonLat(o,a));return e=e[4],r?(n&&(e*=-1),null!=i&&(e=(e+=i<0?2*Math.PI+i:i)<0?2*Math.PI+e:e)):e=0,t.getRectVerticesFromSignatureRectRepresentation([o,a],{xLength:s,yLength:u},e,l)}},{key:"getRotatedPoint",value:function(t,e,i,n){var r=!(2<arguments.length&&void 0!==i)||i,o=3<arguments.length&&void 0!==n?n:[0,0],a=Math.cos(e);return i=Math.sin(e),n=t[0]-o[0],e=t[1]-o[1],t=[],[(t=r?[n*a+e*i,e*a-n*i]:[n*a-e*i,e*a+n*i])[0]+o[0],t[1]+o[1]]}},{key:"getRectVerticesFromSignatureRectRepresentation",value:function(e,i,n,r,o){var a=i.xLength,s=(i=i.yLength,!(4<arguments.length&&void 0!==o)||o),u=(e=v(e,2))[0],l=e[1],h=a/2,c=i/2,f=(r=v(r,2))[0],p=r[1];return[[1,1],[-1,1],[-1,-1],[1,-1]].map((function(t){return[t[0]*h,t[1]*c]})).map((function(e){return t.getRotatedPoint(e,n,s)})).map((function(t){return[t[0]*f,t[1]*p]})).map((function(t){return[t[0]+u,t[1]+l]}))}},{key:"getScaleFactorForRectInSpace",value:function(t,e,i,n){return(n=e/n)<(i=t/i)?n:i}},{key:"getDeltaLonLatForMeterAtGivenLonLat",value:function(t,e){return[1/6371e3*(180/Math.PI)/Math.cos(e*Math.PI/180),1/6371e3*(180/Math.PI)]}},{key:"getBoundingBoxVertices",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return t=[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]],e.reduce((function(t,e){return[[Math.min(e[0],t[0][0]),Math.min(e[1],t[0][1])],[Math.max(e[0],t[1][0]),Math.max(e[1],t[1][1])]]}),t)}},{key:"isPointInBoundingBox",value:function(t,e){if(t&&e){var i=(o=v(t,2))[0],n=o[1],r=v(e,2),o=(t=v(r[0],2))[0];return e=t[1],r=(t=v(r[1],2))[0],t=t[1],i<=r&&o<=i&&n<=t&&e<=n}}},{key:"isPointOnLineSegment",value:function(t,e,i){var n=(o=v(t,2))[0],r=o[1],o=(t=(a=v(e,2))[0],a[1]),a=(e=v(i,2))[0];return e=(o-r)*((i=e[1])-r)<=0,t===a?t===n&&e:r-i==(i-o)/(a-t)*(n-a)&&e}},{key:"rayIntersectLineSegment",value:function(t,e,i){var n=(o=v(t,2))[0],r=o[1],o=(t=v(e,2))[0];return e=t[1],i=(t=v(i,2))[0],t=t[1],o!==i&&0<=(o=(n-o)/(i-o))&&o<1&&r<(t-e)*o+e}},{key:"isPointInPolygon",value:function(e,i){var n=(e=v(e,2))[0],r=e[1];if((e=i.length)<3)return!1;var o=0,a=i[e-1];return i.forEach((function(e){t.rayIntersectLineSegment([n,r],a,e)&&(o+=1),a=e})),o%2!=0}},{key:"isPointOnLineString",value:function(e,i){var n=(e=v(e,2))[0],r=e[1],o=i.length;if(o<2)return!1;for(var a=i[o-1],s=0;s<o;s+=1){var u=i[s];if(t.isPointOnLineSegment([n,r],a,u))return!0;a=i[s]}return!1}},{key:"getAreaOfPolygon",value:function(t){var e=t.length;if(e<3)return null;var i=0,n=t[e-1];return t.forEach((function(t){var e,r,o,a;i+=.5*(r=t,a=(o=v(n,2))[0],e=o[1],r=(o=v(r,2))[0],a*o[1]-e*r),n=t})),i}},{key:"getDistanceBetweenPoints",value:function(t,e){t=(i=v(t,2))[0];var i=i[1];return t-=(e=v(e,2))[0],e=i-e[1],Math.sqrt(t*t+e*e)}}]),t}(),Zt=function(){function t(){n(this,t)}return o(t,null,[{key:"get",value:function(t,e){return fetch(t,1<arguments.length&&void 0!==e?e:{method:"GET"}).then((function(e){return e.ok?e.json():Promise.reject(new Error("Call failed for ".concat(t," : ").concat(e.status," ").concat(e.statusText)))}))}}]),t}(),Xt=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];n(this,t),e&&Object.assign(this,e),this.splitIconGeomBasisGeomType_=i,this.splitIconGeomBasisGeomType_&&this.splitMultiGeom()}return o(t,[{key:"flattenIconShape",value:function(t){var e,i=0<arguments.length&&void 0!==t&&t;this.isFlattened||(e=[],(t=this.g)&&t.forEach((function(t){var i,n=[];t.shp&&t.shp.forEach((function(t){var e,r=v(t,7),o=r[0],a=r[1],s=r[2],u=r[3],l=r[4],h=r[5],c=r[6];switch(o){case 0:case 1:n.push(t),i=[a,s];break;case 2:e=Kt.getFlattenedQuadraticBezierCurve(i,[a,s],[u,l]),i=[u,l];break;case 3:e=Kt.getFlattenedCubicBezierCurve(i,[a,s],[u,l],[h,c]),i=[h,c];break;case 4:n.push(t),i=void 0}e&&(e.splice(0,2),e.forEach((function(t){n.push([1].concat(m(t)))})))})),e.push(u(u({},t),{shp:n}))})),i&&(this.g_original=t),this.g=e,this.isFlattened=!0)}},{key:"splitMultiGeom",value:function(){var e=this;if(this.isIconGeomSplittedBasisGeomType)return this.isIconWithHole;this.splitIconGeomBasisGeomType_||(this.splitIconGeomBasisGeomType_=!0);var i=this.g,n=[],r=[],o=!1,a=!0,s=-1;return!!i&&(i.forEach((function(i){var l,h=[],c=[];3===i.gt||(i.shp.forEach((function(t){var e=v(t,7),o=e[0],f=e[1],p=e[2],d=e[3],g=e[4],y=e[5],b=e[6],_=null;switch(o){case 0:h.push([f,p]),l=[f,p],a||1!==s&&0!==s||n.push(u(u({},i),{},{st:2},{gt:s,shp:r})),s=0,a=!(r=[]),r.push(t);break;case 1:h.push([f,p]),l=[f,p],2===s||0!==s&&1!==s||(s=1,r.push(t));break;case 2:(_=Kt.getFlattenedQuadraticBezierCurve(l,[f,p],[d,g],15)).splice(0,2),h.push.apply(h,m(_)),l=[d,g],2===s||0!==s&&1!==s||(s=1,r.push(t));break;case 3:(_=Kt.getFlattenedCubicBezierCurve(l,[f,p],[d,g],[y,b],15)).splice(0,2),h.push.apply(h,m(_)),l=[y,b],2===s||0!==s&&1!==s||(s=1,r.push(t));break;case 4:r.push(t),s=2,a=!0,2<h.length&&c.push({shp:r,area:Kt.getAreaOfPolygon(h),points:h,children:[]}),l=void 0,h=[]}}),e),t.getLinkedParentChildPolygonArray(c).forEach((function(t){var e=[];e.push.apply(e,m(t.shp)),t.children.forEach((function(t){o=!0,e.push.apply(e,m(t.shp))})),n.push(u(u({},i),{},{st:2},{gt:2,shp:e}))})))}),this),this.g=n,this.isIconGeomSplittedBasisGeomType=!0,this.isIconWithHole=o,this.isIconWithHole)}},{key:"getIconWithOriginTranslatedToIconCenter",value:function(){var e=new t(this,this.splitIconGeomBasisGeomType_),i=Number.parseInt(e.w,10)/2*1,n=Number.parseInt(e.h,10)/2*1;return e.g=[],this.g&&this.g.forEach((function(t){var r=[];t.shp&&t.shp.forEach((function(t){var e=v(t,7),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],h=e[5],c=e[6];switch(o){case 0:case 1:r.push([o,a-i,s-n]);break;case 2:r.push([o,a-i,s-n,u-i,l-n]);break;case 3:r.push([o,a-i,s-n,u-i,l-n,h-i,c-n]);break;case 4:r.push(t)}})),e.g.push(u(u({},t),{shp:r}))})),e}},{key:"getTransformedIconThatFitsInLabelArea",value:function(e,i,n){var r=1<arguments.length&&void 0!==i?i:0,o=(i=!(2<arguments.length&&void 0!==n)||n,n=new t(this,this.splitIconGeomBasisGeomType_),t.getParamForTransformedIconThatFitsInLabelArea(n,e,r,i));i=o.scaleFactor,n.w=i,n.h=i;var a=[];return n.g&&n.g.forEach((function(e){var i=[];e.shp&&e.shp.forEach((function(e){var n=(h=v(e,7))[0],r=h[1],a=h[2],s=h[3],u=h[4],l=h[5],h=h[6],c=(a=v(t.getTransformedIconPointThatFitsInLabelArea([r,a],o),2))[0],f=a[1],p=(u=v(t.getTransformedIconPointThatFitsInLabelArea([s,u],o),2))[0],d=u[1],g=(h=v(t.getTransformedIconPointThatFitsInLabelArea([l,h],o),2))[0],y=h[1];switch(n){case 0:case 1:i.push([n,c,f]);break;case 2:i.push([n,c,f,p,d]);break;case 3:i.push([n,c,f,p,d,g,y]);break;case 4:i.push(e)}})),a.push(u(u({},e),{shp:i}))})),n.g=a,n}},{key:"getSVG",value:function(t){var e,i,n='<?xml version="1.0" encoding="utf-8"?>',r=this.w||50,o=this.h||50,s=this.g;if(n+='<svg viewBox="0 0 '.concat(r," ").concat(o,'" xmlns="http://www.w3.org/2000/svg" width="').concat(r,'" height="').concat(o,'">'),n+="<g>",s&&0<s.length)for(var u=0;u<s.length;u+=1){n+="<path ",s[u].gw&&(n+=' stroke-width="'.concat(s[u].gw,'"')),t?n+=' fill="'.concat(t,'"'):s[u].os&&s[u].os.m?n+=' fill="'.concat(s[u].os.m,'"'):n+=0===u?' fill="#006BB7"':' fill="#ffffff"',n+=' d="';for(var l=0;l<s[u].shp.length;l+=1)for(var h=0;h<s[u].shp[l].length;h+=1)n+=0===h?(e=s[u].shp[l][h],(a(i={},0,"M"),a(i,1,"L"),a(i,2,"Q"),a(i,3,"C"),a(i,4,"Z"),i)[e]):s[u].shp[l][h],0===h||h+1===s[u].shp[l][h].length?n+="":n+=" ";n+='" ></path>'}return(n+="</g>")+"</svg>"}}],[{key:"getParamForTransformedIconThatFitsInLabelArea",value:function(t,e,i,n){var r=2<arguments.length&&void 0!==i?i:0,o=!(3<arguments.length&&void 0!==n)||n,a=(u=v(e,5))[0],s=u[1],u=(i=u[2],n=u[3],e=u[4],(o?0:e)+r);return e=(o=v(Kt.getDeltaLonLatForMeterAtGivenLonLat(a,s),2))[0],r=o[1],{labelCenterX:a,labelCenterY:s,iconWidth:t=(o=[Number.parseInt(t.w,10),Number.parseInt(t.h,10)])[0],iconHeight:o=o[1],deltaLonPerMeter:e,deltaLatPerMeter:r,scaleFactor:Kt.getScaleFactorForRectInSpace(i,n,t,o),effectiveRotation:u}}},{key:"getTransformedIconPointThatFitsInLabelArea",value:function(t,e){var i=(l=v(t,2))[0],n=l[1];if(void 0===i||void 0===n||null===i||null===n)return[];var r=e.labelCenterX,o=e.labelCenterY,a=e.iconWidth,s=e.iconHeight,u=e.deltaLonPerMeter,l=(t=e.deltaLatPerMeter,e.scaleFactor);return e=e.effectiveRotation,i=i,n=n,i-=+a/2,n-=+s/2,n*=-1,u=i*=l*u,t=n*=l*t,i=u*Math.cos(e)+t*Math.sin(e),n=t*Math.cos(e)-u*Math.sin(e),[i+=r,n+=o]}},{key:"getWebGLSuitableCoordinatesOfIconSubGeom",value:function(t){var e,i=t.st,n=t.gt,r=t.shp,o=[];if(2!==i||!r||!n)return o;switch(n){case 2:r.forEach((function(t){var i=v(t,3),n=(t=i[0],i[1]),r=i[2];switch(t){case 0:(e=[]).push([n,r]);break;case 1:e.push([n,r]);break;case 4:o.push(e)}}));break;case 1:r.forEach((function(t){t=(e=v(t,3))[1];var e=e[2];o.push([t,e])}))}return o}},{key:"getLinkedParentChildPolygonArray",value:function(t){var e=[];t.sort((function(t,e){return Math.abs(e.area)-Math.abs(t.area)}));for(var i=0;i<t.length;i+=1){for(var n=null,r=t[i],o=r.points[0],a=i-1;0<=a;--a){var s=t[a];if(r.area*s.area<0&&(Kt.isPointInPolygon(o,s.points)||Kt.isPointOnLineString(o,s.points))){n=s;break}}(n?n.children:e).push(r)}return e}}]),t}(),Jt=Object.freeze({TEXT:"",ICON:"icon:",IMAGE:"icon:"}),$t=Object.freeze({VALUE:"<value>",SHORT:"<short>",LONG:"<long>",FULL:"<full>"}),Qt=Object.freeze({NONE:0,TEXT:1,ICON:2,IMAGE:3}),te=qt.EVENT_NAME,ee=["resetBaseMetaFileRules_","updateOverridableComponents"],ie=function(){function t(e,i,r){if(n(this,t),!e)throw new Error("one should not instantiate object of this class without apt payload");var o=function(t){var e=[];return ee.forEach((function(i){t[i]||e.push(i)})),0<e.length?e:null}(this);if(o)throw new Error("function definition missing in the implementation ".concat(o.join()));this.metaFileIdentifier=i,this.metaInformation_=r,this.basedata_=u({},e),this.baseOverrides_=[],this.customOverrides_=[],this.resetBaseMetaFileRules_()}return o(t,[{key:"applyOverride",value:function(t,e,i){var n=!(1<arguments.length&&void 0!==e)||e;e=2<arguments.length&&void 0!==i&&i,t&&(e||(n?this.customOverrides_:this.baseOverrides_).push(t),this.updateOverridableComponents(t),i=this.getMetaInformation(),!e&&i&&i.config.emitEventOnOverrideUpdate&&(t={applyOverride:!0,metaFileIdentifier:this.metaFileIdentifier,isCustomOverride:n,metaInformation:i,overrideJson:t},qt.emit(te.META_DATA_MODEL_UPDATED,t)))}},{key:"undoOverride",value:function(){var t,e,i=this;0!==this.customOverrides_.length&&(e=this.customOverrides_.pop(),this.resetBaseMetaFileRules_(),this.baseOverrides_.forEach((function(t){return i.applyOverride(t,!1,!0)})),this.customOverrides_.forEach((function(t){return i.applyOverride(t,!0,!0)})),(t=this.getMetaInformation())&&t.config.emitEventOnOverrideUpdate&&(e={metaFileIdentifier:this.metaFileIdentifier,undoOverride:!0,metaInformation:t,overrideJson:e},qt.emit(te.META_DATA_MODEL_UPDATED,e)))}},{key:"getMetaInformation",value:function(){return this.metaInformation_}},{key:"basedata_",get:function(){return this.basedata__},set:function(t){this.basedata__||(this.basedata__=t)}}]),t}(),ne=bt.PRESETS,re=function(){l(e,ie);var t=g(e);function e(i,r){return n(this,e),t.call(this,i,ne,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.property_trees=null,this.named_groups=null,this.named_keys=null,this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){this.property_trees=t.property_trees,this.named_groups=t.named_groups,this.named_keys=t.named_keys}},{key:"getPropertyTree",value:function(t){var e,i=this,n=(t=this.property_trees[t],[]);return t.forEach((function(t){switch(t.input){case"named_group":e=i.getNamedGroup(i.getKeyKey(t)),n=[].concat(m(n),m(e));break;case"named_key":var r;(e=i.getKeyName(t))?((r=i.getNamedKey(e)).k=i.getKeyKey(t),r.name=e,n.push(r)):n.push(i.getNamedKey(i.getKeyKey(t)));break;default:n.push(t)}}),this),n}},{key:"getNamedGroup",value:function(t){return this.named_groups[t]}},{key:"getNamedKey",value:function(t){return this.named_keys[t]}}],[{key:"getMetaFileIdentifier",value:function(){return ne}}]),e}(),oe=bt.SDK_STRINGS,ae=function(){l(e,ie);var t=g(e);function e(i,r){return n(this,e),t.call(this,i,oe,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){this.stringsTable={},this.updateOverridableComponents(this.basedata_)}},{key:"updateOverridableComponents",value:function(t){t&&this.updateTranslationsStringMap(t.translations)}},{key:"updateTranslationsStringMap",value:function(t){var e=this;t&&Object.keys(t).forEach((function(i){e.addToStringsTable(i,t[i])}),this)}},{key:"addToStringsTable",value:function(t,e){this.stringsTable[t]=e}},{key:"translate",value:function(t,e){var i,n=e;return!this.stringsTable||(i=this.stringsTable[t])&&(n=i.en||i.en||(0<(t=Object.keys(i)).length?i[t.pop()]:e)),n}}],[{key:"getMetaFileIdentifier",value:function(){return oe}}]),e}(),se=bt.THEME,ue=function(){l(e,ie);var t=g(e);function e(i,r){return n(this,e),t.call(this,i,se,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.name=t.nm,this.iurl=t.iurl,this.styleMap={},this.iconInfoMap={},this.labelStyleMap={},this.markerMap={},this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){t&&(this.updateStyleMap(t.s),this.updateIconInfoMap(t.i,t.iurl),this.updateLabelStyleMap(t.l),this.updateMarkerMap(t.m))}},{key:"updateStyleMap",value:function(t){this.styleMap=u(u({},this.styleMap),t)}},{key:"updateIconInfoMap",value:function(t,e){var i=this;t&&Object.keys(t).forEach((function(n){var r=t[n],o=e||i.iurl;o&&r.rurl&&(r.url=o+r.rurl),i.iconInfoMap[n]=r}),this)}},{key:"updateLabelStyleMap",value:function(t){this.labelStyleMap=u(u({},this.labelStyleMap),t)}},{key:"updateMarkerMap",value:function(t){this.markerMap=u(u({},this.markerMap),t)}},{key:"getStyleMap",value:function(){return this.styleMap}},{key:"getGeometryStyle",value:function(t){return this.styleMap?this.styleMap[t]:null}},{key:"getGeometryDefaultStyle",value:function(){return this.styleMap?this.styleMap.Object:null}},{key:"getLabelStyle",value:function(t){return this.labelStyleMap?this.labelStyleMap[t]:null}},{key:"getLabelDefaultStyle",value:function(){return this.labelStyleMap?this.labelStyleMap.default:null}},{key:"getMarker",value:function(t){return this.markerMap&&t?this.markerMap[t]:null}},{key:"getIconInfo",value:function(t){return this.iconInfoMap&&t?this.iconInfoMap[t]:null}}],[{key:"getMetaFileIdentifier",value:function(){return se}}]),e}(),le=function(){function t(){n(this,t)}return o(t,null,[{key:"createShortAddress",value:function(t){return t&&Array.isArray(t)?t[1]:null}},{key:"createLongAddress",value:function(t){return t&&Array.isArray(t)?t[0]+" "+t[1]:null}},{key:"createFullAddress",value:function(t){return t&&Array.isArray(t)?(3===t.length?t[2]+" ":"")+t[0]+" "+t[1]:null}}]),t}(),he=bt.THEME_MAP,ce=function(){l(e,ie);var t=g(e);function e(i,r){return n(this,e),t.call(this,i,he,r)}return o(e,[{key:"resetBaseMetaFileRules_",value:function(){var t=this.basedata_;this.ft=t.ft,this.styleTreeList=[],this.labelTreeList=[],this.updateOverridableComponents(t)}},{key:"updateOverridableComponents",value:function(t){this.updateLabelTreeList(t.label),this.updateStyleTreeList(t.style)}},{key:"updateLabelTreeList",value:function(t){t&&Gt(this.labelTreeList,t)}},{key:"updateStyleTreeList",value:function(t){t&&Gt(this.styleTreeList,t)}}],[{key:"getMetaFileIdentifier",value:function(){return he}},{key:"extractThemeMapPayload",value:function(t){return{labelType:t.lt,labelRef:t.r,styleName:t.n}}},{key:"getGeomStyleLookupTag",value:function(t,e){return(t=t?t.styleName:null)===$t.VALUE?e:t}},{key:"getLabelRefConstructed",value:function(t,e,i){var n=t;switch(t){case $t.VALUE:n=i;break;case $t.SHORT:n=le.createShortAddress(e);break;case $t.LONG:n=le.createLongAddress(e);break;case $t.FULL:n=le.createFullAddress(e)}return n}},{key:"getLabelInfoConstructed",value:function(t,e,i,n){var r={lt:t,entry:i};switch(t){case Qt.NONE:break;case Qt.TEXT:i.trans?r.ar=e:r.r=e;break;case Qt.ICON:r.iconIdentifier=e,n?r=u(u({},n),r):r.error=!0;break;case Qt.IMAGE:r.url=e;break;default:r=null}return r}}]),e}(),fe=bt.THEME,pe=bt.THEME_MAP,de=bt.PRESETS,ge=bt.SDK_STRINGS,ye=function(){function t(){n(this,t),this.config=Object.seal({emitEventOnOverrideUpdate:!0}),this.iconCache={},this.imageCache={},this.releaseSettings_={}}return o(t,[{key:"instantiateMetaFileAccessor_",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];switch(t){case fe:this[fe]=p(ue,i.concat([this]));break;case pe:this[pe]=p(ce,i.concat([this]));break;case de:this[de]=p(re,i.concat([this]));break;case ge:this[ge]=p(ae,i.concat([this]));break;default:return null}return this[t]}},{key:"applyOverride",value:function(t,e){this[t]&&this[t].applyOverride(e)}},{key:"undoOverride",value:function(t){this[t]&&this[t].undoOverride()}},{key:"getTheme",value:function(){return this[fe]||{}}},{key:"getThemeMap",value:function(){return this[pe]||{}}},{key:"getPresets",value:function(){return this[de]||{}}},{key:"getStrings",value:function(){return this[ge]||{}}},{key:"getIcon",value:function(t){return t&&t.iconIdentifier?this.iconCache[t.iconIdentifier]:null}},{key:"getImage",value:function(t){return this.imageCache[t]}},{key:"extractGeomStyle",value:function(t){var e=t.valueEntry;return t=t.value,e=ce.extractThemeMapPayload(e),t=ce.getGeomStyleLookupTag(e,t),this.getTheme()?this.getTheme().getGeometryStyle(t):null}},{key:"getStyle",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e&&e,r=this.getThemeMap().styleTreeList,o=this.processValueEntry_.bind(this);if(null===r||0===r.length||!this.getTheme())return null;e=this.getTheme().getGeometryDefaultStyle();var a=this.extractGeomStyle.bind(this),s=t.getAddress(),u=t.getEntities(),l=null,h=null,c={};return u&&0<u.length?r.find((function(e){return h=u.find((function(i){return l=o({geometry:t,entity:i,address:s,valueEntry:e,value:void 0,returnValueFunction:a,valueEntryIdentified:c})}),i)}),this):r.find((function(e){return l=o({geometry:t,entity:h,address:s,valueEntry:e,value:void 0,returnValueFunction:a,valueEntryIdentified:c})}),this),l||n||(l=e),l?JSON.parse(JSON.stringify(l)):void 0}},{key:"getLabelValue",value:function(t){var e=t.address,i=t.valueEntry,n=t.value,r=(t=(r=ce.extractThemeMapPayload(i)).labelType,r.labelRef);return e=ce.getLabelRefConstructed(r,e,n),n=t===Qt.ICON?this.getTheme().getIconInfo(e):null,(n=ce.getLabelInfoConstructed(t,e,i,n))?JSON.parse(JSON.stringify(n)):void 0}},{key:"convertLabelToText",value:function(t){if(t){var e,i=t.r,n=t.ar;if(t=t.lt,i)return i;if(n){switch(t){case Qt.TEXT:e=Jt.TEXT+n;break;case Qt.ICON:e=Jt.ICON+n;break;case Qt.IMAGE:e=Jt.IMAGE+n;break;default:return null}return this.getStrings().translate(e,n)}}return null}},{key:"getLabelStyle",value:function(t,e){var i,n=1<arguments.length&&void 0!==e&&e,r=this.getTheme(),o=r.getLabelDefaultStyle(),a={};return t&&(i=t.t,e=t.zmin,t=t.l,i&&(a.t=i),e&&(a.zmin=e),(t=r.getLabelStyle(t))&&(a=u(u({},a),t))),a||n||(a=o),a}},{key:"getLabelConstantsSet_",value:function(){var t=this.getThemeMap().labelTreeList,e=this.processValueEntry_.bind(this);return null==t||0===t.length?{isInsufficientInput:!0}:{labelTreeList:t,returnValueFunction:this.getLabelValue.bind(this),processValueEntry:e}}},{key:"getGeometryLabelInfo",value:function(t){var e=this,i=this.getLabelConstantsSet_(),n=i.isInsufficientInput,r=i.labelTreeList,o=i.returnValueFunction,a=i.processValueEntry;if(n)return null;var s=t.getAddress(),u=null;return r.find((function(i){return(u=a({geometry:t,address:s,valueEntry:i,returnValueFunction:o}))&&(u.r=e.convertLabelToText(u)),u})),u?JSON.parse(JSON.stringify(u)):void 0}},{key:"getEntityLabelInfo",value:function(t){var e=this.getLabelConstantsSet_(),i=e.isInsufficientInput,n=e.labelTreeList,r=e.returnValueFunction,o=e.processValueEntry;if(i)return null;var a=null;return n.find((function(e){return a=o({entity:t,valueEntry:e,returnValueFunction:r})})),a?JSON.parse(JSON.stringify(a)):void 0}},{key:"getLabelInfo",value:function(t){var e=this,i=this.getLabelConstantsSet_(),n=i.isInsufficientInput,r=i.labelTreeList,o=i.returnValueFunction,a=i.processValueEntry;if(n)return null;var s,u,l=t.getAddress(),h=t.getEntities(),c=null;return h&&1<h.length?(s=null,r.find((function(i){var n,r=null,u=!1;return h.forEach((function(t){n=a({entity:t,valueEntry:i,returnValueFunction:o}),(r=e.convertLabelToText(n))&&0<r.length&&(s?s+=", "+r:(s=r,u=!0))}),e),u||(n=a({geometry:t,address:l,valueEntry:i,returnValueFunction:o}),(r=e.convertLabelToText(n))&&0<r.length&&(s?s+=", "+r:s=r,u=!0)),u&&(c={lt:e.TEXT_LABEL_TYPE,r:s}),u}),this)):(u=h?h[0]:null,r.find((function(i){return(c=a({geometry:t,entity:u,address:l,valueEntry:i,returnValueFunction:o}))&&(c.r=e.convertLabelToText(c)),c}),this)),c?JSON.parse(JSON.stringify(c)):void 0}},{key:"processValueEntry_",value:function(t){var e=this,i=t.geometry,n=t.entity,r=t.address,o=t.valueEntry,a=t.value,s=t.returnValueFunction,u=null;return void 0!==(t=o.ks)&&t.find((function(t){var o;if(t.gk&&i?(a=t.gk,o=i.properties[a]):t.ek&&n?(a=t.ek,o=n.properties[a]):t.ak&&r&&(a=t.ak)===r[0]&&(o=v(r,2)[1]),void 0!==o){if(t.v){var a=t.v[o];if(void 0!==a&&void 0!==(u=e.processValueEntry_({geometry:i,entity:n,address:r,valueEntry:a,value:o,returnValueFunction:s})))return!0}if(void 0!==(u=s({geometry:i,entity:n,address:r,valueEntry:t,value:o})))return!0}return!1}),this)?u:s?s({geometry:i,entity:n,address:r,valueEntry:o,value:a}):u}},{key:"setIcon",value:function(t,e){t&&e&&(this.iconCache[t]=e)}},{key:"setReleaseSettings_",value:function(t){this.releaseSettings_=t}}]),t}(),ve=(Le={NODES_LB:"mfs.micello.com",US_1:"mfs-us-1.micello.com",US_2:"mfs-us-2.micello.com",AU_1:"mfs-au-1.micello.com",AU_2:"mfs-au-2.micello.com",EU_1:"mfs-eu-1.micello.com",SG_1:"mfs-sg-1.micello.com",HUB:"mfs-hub-master.micello.com",PREVIEW:"preview.micello.com/mfs",FACTORY:"factory-mfs.micello.com",CIT:"integration.mfs.hub.venues.ext.here.com",STG:"alpha.mfs.hub.venues.ext.here.com"}).HUB,me=Object.freeze({MFILE:"MFILE",MVAR:"MVAR",MPATH:"MPATH",MKEY:"MKEY",MPATTERN:"MPATTERN",MPACKAGE:"MPACKAGE"}),be=(Object.freeze((a(be={},me.MFILE,"/mfile"),a(be,me.MVAR,"/mvar"),a(be,me.MPATH,"/mpath"),a(be,me.MKEY,"/mkey"),a(be,me.MPATTERN,"/mpattern"),a(be,me.MPACKAGE,"/mpackage"),be)),Object.freeze(Object.values(Le).reduce((function(t,e){return u(u({},t),{},a({},e,{key:null}))}),{}))),_e=Object.freeze({apiKey:null,dataApiType:"MFS",fileHost:ve,queryParamMap:be}),we=Mt.GEO_JSON,xe=(Le=Et[we]).COMMUNITY_MAP,Me=Le.COMMUNITY_ENTITY,Ee=Le.GEOJSON_LEVEL_GEOMETRY,Ae=function(){function t(e){n(this,t),this.baseApi=e}return o(t,[{key:"getBaseAPI",value:function(){return this.baseApi}},{key:"getCommunityMap",value:function(t,e,i){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,we,xe,null,e,i))}},{key:"getCommunityEntity",value:function(t,e,i){return this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,we,Me,null,e,i))}},{key:"getGeoJsonLevelGeometry",value:function(t,e,i,n){return e="/".concat(e),this.baseApi.fetch(this.baseApi.getMapProductFileUrl(t,we,Ee,e,i,n))}}]),t}(),ke=Object.freeze({MAP:"MAP",META:"META",CUSTOMER:"CUSTOMER"}),Te=Object.freeze((a(be={},ke.MAP,"/map"),a(be,ke.META,"/meta"),a(be,ke.CUSTOMER,"/customer"),be)),Se=Object.freeze({METACONFIG:"METACONFIG",OVERRIDES:"OVERRIDES",DATAHOSTS:"DATAHOSTS"}),Ie=Object.freeze((a(Et={},Se.METACONFIG,"/metaConfig"),a(Et,Se.OVERRIDES,"/overrides"),a(Et,Se.DATAHOSTS,"/map/dataHosts"),Et)),Le=Object.freeze({V4:"V4",V5:"V5"}),Oe=(Object.freeze((a(be={},Le.V4,"/v4"),a(be,Le.V5,"/v5"),be)),Object.freeze((a(Et={},bt.THEME,"/theme/v5"),a(Et,bt.THEME_MAP,"/thememap/v5"),a(Et,bt.PRESETS,"/presets/v5"),a(Et,bt.SDK_STRINGS,"/strings/v5"),a(Et,bt.ICON_FILE,"/iconfile/v5"),a(Et,bt.INPUT_COLORS,"/miceditor/inputcolors"),a(Et,bt.BASE_MAP_INFO,"/miceditor/basemapinfo"),a(Et,bt.CONFIG_PROFILE,"/miceditor/configprofile"),a(Et,bt.NAV_THEME,"/navtheme/v5"),a(Et,bt.NAV_NAME_THEME,"/navtheme/v5"),a(Et,bt.NAV_PROP_MAP,"/navpropmap/v5"),a(Et,bt.NAV_STRINGS,"/strings/v5/nav"),a(Et,bt.NAV_THEME_MAP,"/navthememap/v5"),a(Et,bt.NAV_NAME_THEME_MAP,"/navthememap/v5"),a(Et,bt.V4_THEME_FAMILY,"/theme/v4"),a(Et,bt.V4_MAPTYPE_THEME,"/theme/v4"),a(Et,bt.ICON,"/theme/icon/v5"),a(Et,bt.MARKER,"/theme/marker"),a(Et,bt.PERMISSIONS,"/auth/stringroles"),a(Et,bt.NAICS_ARRAY,"/naics/2012/array"),a(Et,bt.NAICS_MAP,"/naics/2012/map"),Et))),Ce=Object.freeze((a(Le={},Mt.GEO_JSON,"/geojson"),a(Le,Mt.V5_MAP,"/v5_map"),a(Le,Mt.V5_NAV,"/v5_nav"),a(Le,Mt.V5_INFO,"/v5_info"),a(Le,Mt.KML,"/kml"),a(Le,Mt.SVG,"/svg"),a(Le,Mt.PNG,"/png"),Le)),Pe=Object.freeze((a(be={},Mt.V5_MAP,{COMMUNITY_MAP:"/com-map",COMMUNITY_DIRECTORY:"/com-dir",COMMUNITY_DETAIL:"/com-detail",LEVEL_GEOMETRY:"/level-geom",DRAWING_ENTITY:"/drawing-entity"}),a(be,Mt.GEO_JSON,{COMMUNITY_MAP:"/com-map",COMMUNITY_ENTITY:"/com-entity",PATH_LEVEL_GEOMETRY:"/path-level-geom",GEOJSON_LEVEL_GEOMETRY:"/geojson-level-geom"}),a(be,Mt.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),a(be,Mt.V5_NAV,{JSON_NAV:"/json",BINARY_NAV:"/bin",JSON_ENHANCED_NAV:"/json-enh",BINARY_ENHANCED_NAV:"/bin-enh"}),a(be,Mt.V5_INFO,{GEOMETRY_INFO:"/geom-info"}),a(be,Mt.SVG,{PLAIN:"/plain",PRETTY:"/pretty",PRETTY_HORIZONTAL_LABEL:"/pretty"}),a(be,Mt.KML,{RASTER:"/raster",RASTER_HORIZONTAL:"/raster",VECTOR:"/vector",VECTOR_HORIZONTAL:"/vector"}),a(be,Mt.PNG,{LOW_RESOLUTION:"/lo-res",HIGH_RESOLUTION:"/high-res",LOW_RESOLUTION_GEO:"/lo-res-geo",HIGH_RESOLUTION_GEO:"/high-res-geo",LOW_RESOLUTION_HORIZONTAL:"/lo-res",HIGH_RESOLUTION_HORIZONTAL:"/high-res",LOW_RESOLUTION_HORIZONTAL_GEO:"/lo-res-geo",HIGH_RESOLUTION_HORIZONTAL_GEO:"/high-res-geo"}),be)),Re=Object.freeze({venueId:null,language:"-",mapVersion:"-",entityVersion:"-",fileVersion:null,themeName:xt[bt.THEME]}),je=Object.freeze({MFILE:"MFILE",MPATH:"MPATH",MVAR:"MVAR"}),Ne=Object.freeze((a(Et={},je.MFILE,"/mfile"),a(Et,je.MPATH,"/mpath"),a(Et,je.MVAR,"/mvar"),Et)),De=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,t),this.productAPI={},this.hostConfig_=e,this.isHostCustom=!1}return o(t,[{key:"getBaseUrl",value:function(t){return t=!(0<arguments.length&&void 0!==t)||t,(t="".concat(this.hostConfig_.fileHost).concat(t?"/ms/v1":"")).startsWith("https://")||t.startsWith("http://")||(t="https://".concat(t)),t}},{key:"getFileServiceBaseUrl",value:function(t){if(t=0<arguments.length&&void 0!==t?t:je.MFILE,je[t])return"".concat(this.getBaseUrl()).concat(Ne[t])}},{key:"getGlobalMetaBaseUrl",value:function(t){var e=Te[ke.META];return t=this.getFileServiceBaseUrl(t),"".concat(t).concat(e)}},{key:"getVenueMapBaseUrl",value:function(t){var e=this.getFileServiceBaseUrl(t);return t=Te[ke.MAP],"".concat(e).concat(t)}},{key:"getGlobalMetaFileUrl",value:function(t,e,i,n){e=1<arguments.length&&void 0!==e?e:xt[t];var r=2<arguments.length?i:void 0,o=(n=3<arguments.length?n:void 0,this.getGlobalMetaBaseUrl(n)),a=Oe[t],s=null===e||""===e?"":"/".concat(e);switch(t){case bt.THEME:case bt.THEME_MAP:case bt.PRESETS:case bt.SDK_STRINGS:case bt.ICON_FILE:case bt.INPUT_COLORS:case bt.BASE_MAP_INFO:case bt.CONFIG_PROFILE:case bt.NAV_THEME:case bt.NAV_NAME_THEME:case bt.NAV_PROP_MAP:case bt.NAV_STRINGS:case bt.NAV_THEME_MAP:case bt.NAV_NAME_THEME_MAP:case bt.V4_THEME_FAMILY:o+="".concat(a).concat(s);break;case bt.ICON:case bt.MARKER:case bt.V4_MAPTYPE_THEME:o+=0<s.length&&r&&0<r.length?"".concat(a).concat(s,"/").concat(r):"".concat(a);break;case bt.PERMISSIONS:case bt.NAICS_ARRAY:case bt.NAICS_MAP:o+="".concat(a)}return o}},{key:"getGeoJsonApi",value:function(){return this.productAPI[Mt.GEO_JSON]||(this.productAPI[Mt.GEO_JSON]=new Ae(this)),this.productAPI[Mt.GEO_JSON]}},{key:"getMapProductUrlPath",value:function(t,e,i,n){return e=!(1<arguments.length&&void 0!==e)||e,i=2<arguments.length?i:void 0,n=3<arguments.length?n:void 0,n=this.getVersionedVenueUrl(t,e,n),i&&(n+="".concat(Ce[i])),n}},{key:"getMapProductFileUrl",value:function(t,e,i,n,r,o){var a=Pe[Mt[e]][i];return r=this.getMapProductUrlPath(t,!0,e,r),i&&(r+="".concat(a)),n&&(r+="".concat(n)),!o&&0!==o||(r+="/fv/".concat(o)),r}},{key:"getMetaConfigUrl",value:function(t,e){var i=Ie[Se.METACONFIG];return(e=this.getVersionedVenueUrl(t,!0,e))+"".concat(i)}},{key:"getMetaFileUrl",value:function(t,e,n){var r;if(n=2<arguments.length&&void 0!==n?n:xt[e],t)return"object"===i(t[e=_t[e]])&&t[e][n]?r=new URL(t[e][n]):"string"==typeof t[e]&&(r=new URL(t[e])),r?this.isHostCustom?"".concat(this.getBaseUrl(!1)).concat(r.pathname):r.toString():null}},{key:"getMetaOverrideFileUrls",value:function(t,e,i,n){return n=3<arguments.length&&void 0!==n?n:xt[i],e&&e.communityOverrides&&e.communityOverrides[t]?(i=wt[i],i=e.communityOverrides[t][i]||{},Array.isArray(i)?i:i[n]||[]):[]}},{key:"getVersionedVenueUrl",value:function(e,i,n){return n=2<arguments.length?n:void 0,(n=1<arguments.length&&void 0!==i&&!i?"":this.getFileServiceBaseUrl(n))+t.getVersionedVenuePathSegment(e)}},{key:"getNormalizedUrl",value:function(t){if(this.isHostCustom){var e=new URL(t);return"".concat(this.getBaseUrl(!1)).concat(e.pathname)}return t}},{key:"getMetaConfig",value:function(t){var e=this;if(!t)return null;var n={venueId:t.cid};Object.values(_t).forEach((function(e){t[e]&&("string"==typeof t[e]?n[e]=t[e]:(n[e]={},Object.keys(t[e]).forEach((function(i){n[e][i]=t[e][i]}))))}));var r={},o=t.communityOverrides[n.venueId];return Object.keys(o).forEach((function(t){var n;Array.isArray(o[t])?r[t]=o[t].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})):"object"===i(o[t])&&(n={},Object.keys(o[t]).forEach((function(i){Array.isArray(o[t][i])&&(n[i]=o[t][i].map((function(t){return"".concat(e.getFileServiceBaseUrl()).concat(t)})))})),r[t]=n)})),n.communityOverrides=a({},n.venueId,r),u(u({},t),n)}}],[{key:"getVersionedVenuePathSegment",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:"-";return e=2<arguments.length&&void 0!==i?i:"-",i=Te[ke.MAP],"".concat(i,"/").concat(t,"/mv/").concat(n,"/ev/").concat(e)}},{key:"getVenueConfig",value:function(t){return(t=u(u({},Re),t)).mapVersion=Number(t.mapVersion)||"-",t.entityVersion=Number(t.entityVersion)||"-",t.fileVersion=Number(t.fileVersion)||null,t.venueId=Number(t.venueId),t}}]),t}(),ze=function(){l(e,De);var t=g(e);function e(i){var r;return n(this,e),(r=t.call(this,i)).setAndUpdateHostConfig_(i),i.fileHost&&(r.isHostCustom=!0),r}return o(e,[{key:"setAndUpdateHostConfig_",value:function(t){var e=t.apiKey,i=(t=t.fileHost,{});Object.keys(_e.queryParamMap).forEach((function(t){i[t]={key:e}})),t&&(i[t]={key:e}),this.hostConfig_={apiKey:e,dataApiType:"MFS",fileHost:t||ve,queryParamMap:u(u({},i),_e.QUERY_PARAM_MAP_DEFAULT)}}},{key:"addServer",value:function(t,e){t=-1<t.indexOf("://")?t.split("://")[1]:t;var i=this.hostConfig_.queryParamMap[t]?u(u({},this.hostConfig_.queryParamMap[t]),e):e;Object.keys(i).forEach((function(t){null!==i[t]&&void 0!==i[t]&&""!==i[t]||delete i[t]})),this.hostConfig_.queryParamMap[t]=i}},{key:"appendQueryParams",value:function(t){var i=this.hostConfig_.queryParamMap,n=-1<t.indexOf("://")?t.split("://")[1]:t;return i=i[v(Object.keys(i).filter((function(t){return n.startsWith(t)})).sort((function(t,e){return e.length-t.length})),1)[0]],e.appendParamList(t,i)}},{key:"fetch",value:function(t,e,i,n){return n=3<arguments.length&&void 0!==n&&n,t.startsWith("http://")&&(t=t.replace(/http:\/\//gm,"https://")),n||(t=this.appendQueryParams(t)),Zt.get(t,e,i)}},{key:"getMapProductFileUrl",value:function(t,i,n,r,o,a){return y(h(e.prototype),"getMapProductFileUrl",this).call(this,t,i,n,r,o,a)}},{key:"getGlobalMetaFileUrl",value:function(t,i,n,r,o){return o=4<arguments.length&&void 0!==o?o:0,n=y(h(e.prototype),"getGlobalMetaFileUrl",this).call(this,t,i,n,r),r&&r===me.MPATH&&(n=e.appendParamList(n,{fvhistory:o})),n}}],[{key:"appendParamList",value:function(t,e){if(!e||"object"!==i(e))return t;var n=t.split("?"),r=v(n,2)[1],o=void 0===r?"":r;return Object.keys(e).filter((function(t){return-1===o.indexOf("".concat(t,"="))})).forEach((function(t){o+="&".concat(t,"=").concat(e[t])})),0<(o=o.startsWith("&")?o.substr(1):o).length?"".concat(n[0],"?").concat(o):t}}]),e}(),Be=function(){function t(){n(this,t)}return o(t,null,[{key:"isPointOnGeoJSONLineString",value:function(t,e){var i=!1;if(e&&1<e.length)for(var n,r,o=1;o<e.length;o+=1)if(n=e[o-1],r=e[o],Kt.isPointOnLineSegment(t,n,r)){i=!0;break}return i}},{key:"isPointOnGeoJSONMultiLineString",value:function(e,i){for(var n=!1,r=0;r<i.length;r+=1)if(t.isPointOnGeoJSONLineString(e,i[r])){n=!0;break}return n}},{key:"isPointInsideGeoJSONPolygon",value:function(t,e){var i=!1;if(Kt.isPointInPolygon(t,e[0])&&(i=!0),i)for(var n=1;n<e.length;n+=1)if(Kt.isPointInPolygon(t,e[n])){i=!1;break}return i}},{key:"isPointInsideGeoJSONMultiPolygon",value:function(e,i){for(var n=i.length,r=0;r<n;r+=1)if(t.isPointInsideGeoJSONPolygon(e,i[r]))return!0;return!1}},{key:"convertIntAddressToGeometryAddressListFormat",value:function(t){if(t&&"string"==typeof t){var e=[];return t.split(" ").forEach((function(t){e.push.apply(e,m(t.split(" ")))})),e}return null}},{key:"getGeometriesByLonLat",value:function(t,e,i){for(var n=2<arguments.length&&void 0!==i&&i,r=[],o=e.filter((function(e){return Kt.isPointInBoundingBox(t,e.getBoundingBox())})),a=0;a<o.length;a+=1){var s=o[a];if(s.isPointInsideGeometry(t,!0)&&(r.push(s),!n))break}return r.sort((function(t,e){return e.getZIndex()-t.getZIndex()}))}}]),t}(),He=function(){function t(e){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;n(this,t),this.venueModel=r,this.id=e,this.properties=u({geometry:[],int_address:[]},i)}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getGeometries",value:function(){var t=this;return this.properties.geometry.filter((function(t){return v(t,2)[1]})).map((function(e){return e=v(e,1)[0],t.venueModel.getGeometryById(e)}))}},{key:"getInternalAddress",value:function(){return this.properties.int_address||[]}},{key:"getName",value:function(){return(Array.isArray(this.properties.name)?this.properties.name[0]:this.properties.name)||""}},{key:"getProperties",value:function(){return this.properties}},{key:"getLabelInfo",value:function(){return this.venueModel.metaInformation_.getEntityLabelInfo(this)}}]),t}(),Fe=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0;n(this,t),this.id=e.id,this.properties=e.properties||{},this.labelArea=e.label_area||[],this.geometry=e.geometry||{},this.location=e.location||{},this.level=i,this.zIndex=r,this.state_={isHighlighted:!1,highlightedStyle:{}}}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getAddress",value:function(){return Be.convertIntAddressToGeometryAddressListFormat(this.getInternalAddress())}},{key:"getInternalAddress",value:function(){return this.properties.int_address||""}},{key:"getCenter",value:function(){return this.location.coordinates||[]}},{key:"getCoordinates",value:function(){return this.geometry.coordinates||[]}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getStyle",value:function(){return this.getMetaInformation_().getStyle(this)}},{key:"getIcon",value:function(){return this.getMetaInformation_().getIcon(this.getLabelInfo())}},{key:"getLabelArea",value:function(){return this.labelArea||[]}},{key:"getLabelInfo",value:function(){return this.getMetaInformation_().getLabelInfo(this)}},{key:"getLabelStyle",value:function(){return u({fill:"#333333"},this.getMetaInformation_().getLabelStyle(this.getStyle()))}},{key:"getGeometryLabelInfo",value:function(){return this.getMetaInformation_().getGeometryLabelInfo(this)}},{key:"getEntities",value:function(){var t=this;return(this.properties.entities||[]).map((function(e){return t.level.getDrawing().getVenueModel().getEntityById(e)}))}},{key:"getLevel",value:function(){return this.level}},{key:"getType",value:function(){return this.geometry.type}},{key:"getZIndex",value:function(){return this.zIndex}},{key:"getBoundingBox",value:function(){var t=this.getType(),e=this.getCoordinates(),i=[];switch(t){case ft:i=[e,e];break;case gt:case pt:i=e;break;case yt:case dt:i=e.reduce((function(t,e){return t.concat(e)}),[]);break;case vt:i=e.reduce((function(t,e){return t.concat(e)}),[]).reduce((function(t,e){return t.concat(e)}),[])}return Kt.getBoundingBoxVertices(i)}},{key:"isIcon",value:function(){var t=this.getLabelInfo();return t&&t.lt===Qt.ICON}},{key:"isPointInsideGeometry",value:function(t,e){var i,n=1<arguments.length&&void 0!==e&&e,r=!1;switch(this.getType()){case ft:i=this.getLabelArea()&&Kt.getRectangularCoordinatesOfLabelArea(this.getLabelArea()),r=Kt.isPointInPolygon(t,i);break;case gt:break;case pt:r=n&&Be.isPointOnGeoJSONLineString(t,this.getCoordinates());break;case yt:r=n&&Be.isPointOnGeoJSONMultiLineString(t,this.getCoordinates());break;case dt:r=Be.isPointInsideGeoJSONPolygon(t,this.getCoordinates());break;case vt:r=Be.isPointInsideGeoJSONMultiPolygon(t,this.getCoordinates())}return r}},{key:"highlight",value:function(t,e){t=!(0<arguments.length&&void 0!==t)||t,e=1<arguments.length?e:void 0,this.state_.isHighlighted=t,this.state_.highlightedStyle=t?e:{}}},{key:"isHighlighted",value:function(){return Boolean(this.state_.isHighlighted)}},{key:"getHighlightedStyle",value:function(){return this.state_.highlightedStyle||{}}},{key:"toJSON",value:function(){return u({},this.geometry)}},{key:"getMetaInformation_",value:function(){return this.getLevel()?this.getLevel().getDrawing().getVenueModel().metaInformation_:null}}]),t}(),Ue=function(){function t(e){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length?arguments[3]:void 0;n(this,t),this.id=e,this.properties=u({},r),this.zIndexCount=0,this.geometries=o.map((function(t){return i.zIndexCount+=1,new Fe(t,i,i.zIndexCount)})),this.drawing=a}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getDrawing",value:function(){return this.drawing}},{key:"getShortName",value:function(){return this.properties["short name"]||""}},{key:"getZIndex",value:function(){return Number(this.properties.zlevel)}},{key:"getFeatureCollectionArray",value:function(){return this.getGeometries().map((function(t){return t.toJSON()}))}},{key:"getGeometryById",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(t){return 0<arguments.length&&void 0!==t&&t?this.geometries.sort((function(t,e){return e.getZIndex()-t.getZIndex()})):this.geometries.sort((function(t,e){return t.getZIndex()-e.getZIndex()}))}},{key:"getGeometriesByAddress",value:function(t){return this.geometries.filter((function(e){return e.getInternalAddress()===t}))}},{key:"isMain",value:function(){return Boolean(this.properties.main)}}]),t}(),Ve=function(){function t(e){var i=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length?arguments[4]:void 0;n(this,t),this.venueModel=s,this.levels=a.map((function(t){return new Ue(t.id,t.properties,t.features,i)})),this.id=e,this.properties=r,this.frame_=o}return o(t,[{key:"getId",value:function(){return this.id}},{key:"getProperties",value:function(){return this.properties}},{key:"isRoot",value:function(){return Boolean(this.properties.is_root)}},{key:"getDisplayName",value:function(){return this.properties.display_name||""}},{key:"getName",value:function(){return this.properties.name||""}},{key:"getBoundingBox",value:function(){var t=(i=this.frame_).height,e=i.width,i=i.transform;return t=(e=v(Kt.getBoundingBoxVertices([Kt.convertMxMy2LonLat(i,[0,0]),Kt.convertMxMy2LonLat(i,[0,t]),Kt.convertMxMy2LonLat(i,[e,0]),Kt.convertMxMy2LonLat(i,[e,t])]),2))[0],[(e=e[1])[1],t[0],t[1],e[0]]}},{key:"getCenter",value:function(){var t=this.frame_;if(t)return Kt.convertMxMy2LonLat(t.transform,[t.width/2,t.height/2])}},{key:"getGeometryById",value:function(t,e){return e?e.getGeometryById(t):this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.levels.flatMap((function(t){return t.getGeometries()}))}},{key:"getLevelById",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevelByZIndex",value:function(t){return this.levels.find((function(e){return e.getZIndex()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getMainLevel",value:function(){return this.levels.find((function(t){return t.isMain()}))}},{key:"getVenueModel",value:function(){return this.venueModel}}]),t}(),qe=mt.STANDARD,Ge=function(){function t(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:new ye;n(this,t),this.metaInformation_=a,this.id=i.id,this.location=i.location||{},this.properties=u({},i.properties),this.drawings=(i.drawings||[]).map((function(t){var i=t.levels.map((function(t){var e=t.id;return o.find((function(t){return t.id===e}))}));return new Ve(t.id,t.properties,t.ref_frame,i,e)})),this.entities=(r.entities||[]).map((function(t){return new He(t.id,t.properties,e)}))}return o(t,[{key:"getDisplaySettings",value:function(){return this.metaInformation_.releaseSettings_.displayOptions.display||qe}},{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.properties.name}},{key:"getBoundingBox",value:function(){var t,e=Kt.getBoundingBoxVertices(this.getDrawings().flatMap((function(t){var e=v(t.getBoundingBox(),4);return t=e[0],[[e[1],e[2]],[e[3],t]]})));return e=(t=v(e,2))[0],[(t=t[1])[1],e[0],e[1],t[0]]}},{key:"getCenter",value:function(){return this.location.coordinates}},{key:"getEntityById",value:function(t){return this.entities.find((function(e){return e.id===t}))}},{key:"getGeometryById",value:function(t){return this.getGeometries().find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.getLevels().sort((function(t,e){return t.getZIndex()-e.getZIndex()})).flatMap((function(t){return t.getGeometries()}))}},{key:"getGeometriesByLonLat",value:function(t,e,i){var n=this;return i=!(2<arguments.length&&void 0!==i)||i,0===(e=(1<arguments.length&&void 0!==e?e:[]).map((function(t){return n.getLevelById(t)}))).length&&(e=this.drawings.filter((function(e){return e=e.getBoundingBox(),Kt.isPointInBoundingBox(t,e)})).flatMap((function(t){return t.getLevels()}))),Be.getGeometriesByLonLat(t,e.flatMap((function(t){return t.getGeometries(!0)})),i)}},{key:"getDrawingById",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getRootDrawing",value:function(){return this.drawings.find((function(t){return t.isRoot()}))}},{key:"getLevelById",value:function(t){return this.getLevels().find((function(e){return e.getId()===t}))}},{key:"getLevelsByZIndex",value:function(t){var e=0<arguments.length&&void 0!==t?t:0;return this.getLevels().filter((function(t){return Number(t.getZIndex())===Number(e)}))}},{key:"getLevels",value:function(){return this.drawings.flatMap((function(t){return t.getLevels()}))}},{key:"getLevelMapFlattenedByZIndex_",value:function(){return this.getLevels().reduce((function(t,e){var i=e.getZIndex();return(t=t)[i]||(t[i]=[]),t[i].push(e),t}),{})}},{key:"getIconsInformation",value:function(){var t=new Map;return this.getGeometries().filter((function(t){return t.isIcon()})).forEach((function(e){e=e.getLabelInfo(),t.set(e.iconIdentifier,e)})),Array.from(t.values())}}]),t}(),We=function(){l(e,De);var t=g(e);function e(i){var r=i.apiKey,o=i.fileHost;return i=i.token,n(this,e),i=t.call(this,{apiKey:r,fileHost:o||"vfs.venue.maps.api.here.com",token:i}),o&&(i.isHostCustom=!0),i}return o(e,[{key:"fetch",value:function(t,e,i){var n=(o=this.hostConfig_).apiKey,r=o.token,o=u({method:"GET",headers:{}},e);return(e=t).startsWith("http://")&&(e=e.replace(/http:\/\//gm,"https://")),r?(t="Bearer ",r=r.startsWith(t)?r:"".concat(t).concat(r),o.headers instanceof Headers?o.headers.append("Authorization",r):o.headers.Authorization=r):n&&(e="".concat(e,"?apiKey=").concat(n)),Zt.get(e,o,i)}}]),e}(),Ye={isIconsEnabled:!0,isMetaEnabled:!0,metaOptions:{},iconOptions:{}},Ke=Object.keys(_t).map((function(t){return{identifier:t,name:void 0,url:void 0}})),Ze=function(){function t(e){var i=e.apiKey,r=e.baseUrl,o=e.token;e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n(this,t),o={apiKey:i,fileHost:r,token:o},this.dataApi_=new(e?ze:We)(o)}return o(t,[{key:"load",value:function(t,e){var i=this,n=(e=1<arguments.length&&void 0!==e?e:{},(e=u(u({},Ye),e)).isIconsEnabled),r=e.isMetaEnabled,o=e.iconOptions,a=e.metaOptions;return Promise.resolve().then((function(){return r?i.getMeta_(t,a).catch((function(t){return Promise.resolve()})):new ye})).then((function(e){return i.getVenue_(t,e)})).then((function(e){if(qt.emit(Vt.VENUE_MAP_DATA_LOADED,{data:e}),n){var r=e.getIconsInformation();return i.getIcons_(t,e.metaInformation_,r,o).then((function(){return e}))}return e}))}},{key:"getVenue_",value:function(t,e){var i=this;return this.getCommunityMap_(t).then((function(e){return Promise.all([Promise.resolve(e),i.getCommunityEntity_(t),i.getLevels_(t,e.drawings.flatMap((function(t){return t.levels.map((function(t){return t.id}))})))])})).then((function(t){var i=(n=v(t,3))[0],n=(t=n[1],n[2]);return new Ge(i,t,void 0===n?[]:n,e)}))}},{key:"getCommunityMap_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityMap(t).catch((function(e){return Promise.reject(new Error("Community map load failed for venue id ".concat(t,' with error "\n ').concat(e.message,'"')))}))}},{key:"getCommunityEntity_",value:function(t){return this.dataApi_.getGeoJsonApi().getCommunityEntity(t).catch((function(e){return Promise.reject(new Error("Community Entity failed for venue id ".concat(t,' with error "').concat(e.message,'"')))}))}},{key:"getLevels_",value:function(t,e){var i=this;return e=1<arguments.length&&void 0!==e?e:[],Promise.all(e.map((function(e){return i.dataApi_.getGeoJsonApi().getGeoJsonLevelGeometry(t,e).catch((function(t){return Promise.reject(new Error("Level load failed for level id ".concat(e,' with error: "').concat(t.message,'"')))}))})))}},{key:"getIcon_",value:function(t,e,i,n){var r=2<arguments.length&&void 0!==i?i:{},o=3<arguments.length&&void 0!==n&&n,a=r.iconIdentifier;return n=r.url,a&&n?this.dataApi_.fetch(this.dataApi_.getNormalizedUrl(n)).then((function(t){return t=new Xt(u(u({},r),t),o),e.setIcon(a,t),t})):Promise.reject(new Error("Issue with icon data, iconIdentifier and url should be available: ".concat(r)))}},{key:"getIcons_",value:function(t,e,i,n){var r=this,o=(i=2<arguments.length&&void 0!==i?i:[],(3<arguments.length&&void 0!==n?n:{}).isMultiObjectToSplit);return Promise.all(i.map((function(i){return r.getIcon_(t,e,i,o).catch((function(t){return Promise.resolve(i)}))}))).catch((function(t){return Promise.resolve()}))}},{key:"getMeta_",value:function(t,e,i){var n=this,r=1<arguments.length&&void 0!==e?e:{},o=2<arguments.length&&void 0!==i?i:Ke,a=new ye;return Promise.resolve().then((function(){return n.getMetaConfig_(t,r).then((function(t){return a.releaseSettings_=t.settings,n.dataApi_.getMetaConfig(t)}))})).then((function(e){return n.getMetaFiles_(e,a,o).then((function(){return n.getMetaOverrides_(t,e,a,o)}))})).then((function(){return a}))}},{key:"getMetaConfig_",value:function(t){return t=this.dataApi_.getMetaConfigUrl(t),this.dataApi_.fetch(t).catch((function(t){return Promise.reject(t)}))}},{key:"getMetaFiles_",value:function(t,e,i,n){var r=this,o=(i=2<arguments.length&&void 0!==i?i:[],!(3<arguments.length&&void 0!==n)||n);return Promise.all(i.map((function(i){var n=i.identifier,a=i.name;return!(i=i.url)&&o&&(i=r.dataApi_.getMetaFileUrl(t,n,a)),i=i||r.dataApi_.getGlobalMetaFileUrl(n,a),r.dataApi_.fetch(i).then((function(t){return e.instantiateMetaFileAccessor_(n,t),t})).catch((function(t){return Promise.resolve()}))})))}},{key:"getMetaOverrides_",value:function(t,e,i,n){var r=this;return n=3<arguments.length&&void 0!==n?n:[],Promise.all(n.map((function(n){var o=n.identifier,a=n.name;return n=o,a=a,a=t&&e&&r.dataApi_.getMetaOverrideFileUrls(t,e,n,a)||[],Promise.all(a.map((function(t){return r.dataApi_.fetch(t).then((function(t){return i[o]&&i[o].applyOverride(t,!1),Promise.resolve()})).catch((function(t){return Promise.resolve()}))})))})))}}]),t}(),Xe="https://meta-indoor-routing.api-gateway.ls.hereapi.com",Je=function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(n(this,t),!e.apiKey&&!e.token)throw new Error("API key or Token is missing");this.config_=u({baseUrl:Xe},e)}return o(t,[{key:"calculateRoute",value:function(t){var e=void 0===(r=t.origin)?{}:r,n=void 0===(o=t.destination)?{}:o,r=function(t,e){if(null==t)return{};var i,n=function(t,e){if(null==t)return{};for(var i,n={},r=Object.keys(t),o=0;o<r.length;o++)i=r[o],0<=e.indexOf(i)||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(t),o=0;o<r.length;o++)i=r[o],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i]);return n}(t,["origin","destination"]);if(!e.coordinates||!n.coordinates)throw new Error("Waypoint coordinates are missing");var o=function(t){var e=t.coordinates,i=t.venueId;return t=t.levelId,e=e.join(","),i&&t?e.concat(";indoorMapId=",i,";levelId=",t):e},a=(t=new URL("".concat(this.config_.baseUrl,"/v1/routes")),new URLSearchParams({origin:o(e),destination:o(n),apiKey:this.config_.apiKey}));return Object.entries(r).forEach((function(t){t=(e=v(t,2))[0];var e=e[1];a.append(t,"object"===i(e)?JSON.stringify(e):e)})),t.search=a,fetch(t,{headers:{"X-Api-Key":this.config_.apiKey}}).then((function(t){return t.json()}))}}]),t}(),$e=function(){l(e,H.map.Feature);var t=g(e);function e(i){var r;if(n(this,e),r=t.call(this),!(i instanceof Ge))throw new Error("It is mandatory to provide valid instance of venueModel");return r.venueModel=i,r.search_=new ct(i),r.status_={activeDrawingId:i.getRootDrawing().getId(),activeLevelIndex:i.getRootDrawing().getMainLevel().getZIndex()},r.mapObjectStore_=r.getDefaultMapObjectsStore_(),r.drawings=i.getDrawings().map((function(t){return(t=new x(t)).setParentEventTarget(d(r)),t})),r.levels=i.getLevels().map((function(t){var e=new M(t);return e.setParentEventTarget(r.drawings.find((function(t){return t.getId()===e.getData().getDrawing().getId()}))),e})),r.geometries=i.getGeometries().map((function(t){var e=new w(t);return e.setParentEventTarget(r.levels.find((function(t){return t.getId()===e.getData().getLevel().getId()}))),e})),r}return o(e,[{key:"getData",value:function(){return this.venueModel}},{key:"getBoundingBox",value:function(){return p(H.geo.Rect,m(this.venueModel.getBoundingBox()))}},{key:"getCenter",value:function(){var t=(e=v(this.venueModel.getCenter(),2))[0],e=e[1];return new H.geo.Point(e,t)}},{key:"getId",value:function(){return this.venueModel.getId()}},{key:"getName",value:function(){return this.venueModel.getName()}},{key:"getDrawing",value:function(t){return this.drawings.find((function(e){return e.getId()===t}))}},{key:"getDrawings",value:function(){return this.drawings}},{key:"getLevel",value:function(t){return this.levels.find((function(e){return e.getId()===t}))}},{key:"getLevels",value:function(){return this.levels}},{key:"getGeometry",value:function(t){return this.geometries.find((function(e){return e.getId()===t}))}},{key:"getGeometries",value:function(){return this.geometries}},{key:"getActiveLevels",value:function(){var t=this;return this.getData().getDisplaySettings()===mt.FLATTEN?this.venueModel.getLevelsByZIndex(this.status_.activeLevelIndex).map((function(e){return t.getLevel(e.getId())})):[this.venueModel.getDrawingById(this.status_.activeDrawingId).getLevelByZIndex(this.status_.activeLevelIndex)].map((function(e){return t.getLevel(e.getId())}))}},{key:"getActiveDrawing",value:function(){return this.getDrawing(this.status_.activeDrawingId)}},{key:"setActiveDrawing",value:function(t){if(this.status_.activeDrawingId!==t){var i=this.venueModel.getDrawingById(t);if(!i)throw new Error("Drawing ".concat(t," was not found"));var n=this.status_.activeDrawingId;this.status_.activeDrawingId=t,this.setActiveLevelIndex(i.getMainLevel().getZIndex()),this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.DRAWING_CHANGE,t,n))}}},{key:"getActiveLevelIndex",value:function(){return this.status_.activeLevelIndex}},{key:"setActiveLevelIndex",value:function(t){var i;this.venueModel.getLevelsByZIndex(t)&&(i=this.status_.activeLevelIndex,this.status_.activeLevelIndex=t,this.dispatchEvent(new H.util.ChangeEvent(e.EVENTS.LEVEL_CHANGE,t,i)))}},{key:"isActive",value:function(){var t=this.getParentEventTarget();return!!t&&this===t.activeVenue}},{key:"getHighlightedGeometries",value:function(){var t=this;return this.venueModel.getGeometries().filter((function(t){return t.isHighlighted()})).map((function(e){return t.getGeometry(e.getId())}))}},{key:"setHighlightedGeometries",value:function(t,i,n){var r=!(0<arguments.length&&void 0!==t)||t,o=(i=1<arguments.length&&void 0!==i?i:[],n=2<arguments.length&&void 0!==n?n:{},(n=u(u({},et),n)).fillColor),a=n.outlineColor,s=n.outlineWidth;i.forEach((function(t){t.getData().highlight(r,{m:o,o:a,w:s})})),this.dispatchEvent(e.EVENTS.GEOMETRY_HIGHLIGHT)}},{key:"getMapObjects",value:function(t,e){return t=0<arguments.length&&void 0!==t?t:this.getActiveLevelIndex(),e=1<arguments.length&&void 0!==e?e:this.getActiveDrawing(),this.mapObjectStore_[t][e.getId()]}},{key:"setMapObjects",value:function(t,e,i){t=0<arguments.length&&void 0!==t?t:[],e=1<arguments.length&&void 0!==e?e:this.getActiveLevelIndex(),i=2<arguments.length&&void 0!==i?i:this.getActiveDrawing(),this.mapObjectStore_[e]&&this.mapObjectStore_[e][i.getId()]&&(this.mapObjectStore_[e][i.getId()]=m(t)),this.updateMapObjectsVisibility_()}},{key:"search",value:function(t){var e=this;return t=0<arguments.length&&void 0!==t?t:"",this.search_.find(t).flatMap((function(t){return t.geometries.map((function(t){return e.getGeometry(t.getId())}))}))}},{key:"updateMapObjectsVisibility_",value:function(){Object.values(this.mapObjectStore_).forEach((function(t){Object.values(t).forEach((function(t){return t.forEach((function(t){return t.setVisibility(!1)}))}))})),this.isActive()&&this.mapObjectStore_[this.getActiveLevelIndex()][this.getActiveDrawing().getId()].forEach((function(t){return t.setVisibility(!0)}))}},{key:"getDefaultMapObjectsStore_",value:function(){var t=this,e=this.getData().getDisplaySettings()===mt.FLATTEN;return this.venueModel.getLevels().reduce((function(i,n){var r=n.getZIndex();return(i=u({},i))[r]||(i[r]={}),i[r][n.getDrawing().getId()]=[],e&&(i[r][t.venueModel.getRootDrawing().getId()]=[]),i}),{})}}]),e}();function Qe(t,e,i){return i===ci.ObjectType.SEGMENT_START_MARKER?0===t?si:li:i===ci.ObjectType.SEGMENT_FINISH_MARKER?1===e.length||t===e.length-1?ui:hi:"indoor"===e[t].departure.place.type?oi:ai}$e.EVENTS={ACTIVE_VENUE_CHANGE:"activevenuechange",DRAWING_CHANGE:"drawingchange",LEVEL_CHANGE:"levelchange",GEOMETRY_HIGHLIGHT:"geometryhighlight"};var ti=function(){function t(){n(this,t)}return o(t,null,[{key:"getIconLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.isIcon()&&t.getIcon()})).map((function(t){var e=(r=v(t.getLabelArea(),2))[0],i=r[1],n=t.getLevel(),r=t.getIcon().getSVG();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:n.getId(),name:t.getDisplayName(),venueId:n.getDrawing().getVenueModel().getId(),url:r?"data:image/svg+xml;utf8,".concat(encodeURIComponent(r)):""},geometry:{type:J,coordinates:[e,i]}}}))}}},{key:"getLabelLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getDisplayName()&&!t.isIcon()})).map((function(t){var e=(r=v(t.getLabelArea(),2))[0],i=r[1],n=(o=t.getLabelStyle()).fill,r=o.zmin,o=t.getLevel();return{type:"Feature",properties:{id:t.getId(),geometryId:t.getId(),levelId:o.getId(),venueId:o.getDrawing().getVenueModel().getId(),name:t.getDisplayName(),minZoom:r||15,textFillColor:n.toLowerCase()},geometry:{type:J,coordinates:[e,i]}}}))}}},{key:"getGeometryLayer",value:function(t){return{type:"FeatureCollection",features:(0<arguments.length&&void 0!==t?t:[]).flatMap((function(t){return t.getData().getGeometries()})).filter((function(t){return t.getType()!==J})).map((function(t){var e=(s=t.getHighlightedStyle()||{}).m,i=s.o,n=s.w,r=(l=u({},t.getStyle())).m,o=l.o,a=l.w,s=1,l=t.getLevel();return{type:"Feature",properties:{id:t.getId(),fillColor:(e||r||"#e0e0e0").toLowerCase(),geometryId:t.getId(),levelId:l.getId(),venueId:l.getDrawing().getVenueModel().getId(),outlineColor:(i||o||"#829DB4").toLowerCase(),outlineWidth:Number(((n||a||s)/3).toFixed(2)),zIndex:t.getZIndex()},geometry:{type:t.getType(),coordinates:t.getCoordinates()}}}))}}},{key:"getFootprintLayer",value:function(t){return{type:"FeatureCollection",features:t.flatMap((function(t){var e=t.getData().getRootDrawing().getMainLevel().getId(),i=t.getLevel(e).getData().getGeometries().filter((function(t){return t.getType()===$}));return[{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:1},geometry:{type:"MultiPolygon",coordinates:i.map((function(t){return t.getCoordinates()}))}},{type:"Feature",properties:{isFootprint:!0,levelId:e,venueId:t.getId(),zIndex:2,venueName:t.getName()},geometry:{type:"Point",coordinates:t.getCenter().toGeoJSON().coordinates.slice(0,2)}}]}))}}}]),t}(),ei=function(){function t(){n(this,t)}return o(t,null,[{key:"getStyle",value:function(t){var e={styles:[{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"solid-line",color:"#613F8E",lineWidth:"2px",renderOrder:1},{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:"#AF91B4",renderOrder:2},{layer:it.FOOTPRINT,when:["==",["geometry-type"],"Point"],technique:"text",color:"black",size:16,text:["get","venueName"],priority:61},{layer:it.VECTOR,when:["==",["geometry-type"],"Polygon"],technique:"fill",color:["get","fillColor"],renderOrder:["get","zIndex"]},{layer:it.VECTOR,technique:"solid-line",color:["get","outlineColor"],lineWidth:["get","outlineWidth"],renderOrder:["get","zIndex"]},{layer:it.TEXT,minZoomLevel:["get","minZoom"],technique:"text",color:["get","textFillColor"],size:13,text:["get","name"],priority:60},{layer:it.ICON,minZoomLevel:18,when:["==",["geometry-type"],"Point"],technique:"labeled-icon",textIsOptional:!0,size:0,imageTexture:["concat","texture",["get","name"]],screenWidth:["interpolate",["linear"],["zoom"],15,3,21,25],screenHeight:["interpolate",["linear"],["zoom"],15,3,21,25],priority:61}],images:{},imageTextures:[]};return(t=0<arguments.length&&void 0!==t?t:[]).forEach((function(t){var i="texture"+t.properties.name;e.images[i]||(e.images[i]={url:t.properties.url,preload:!0},e.imageTextures.push({name:i,image:i}))})),new H.map.render.harp.Style(e)}}]),t}(),ii=function(){function t(){n(this,t)}return o(t,null,[{key:"getIconsTextures",value:function(t){var e={},i={},n=(0<arguments.length&&void 0!==t?t:[]).reduce((function(t,e){var i=e.properties.name;return t[i]||(t[i]=[]),t[i].push(e),t}),{});return Object.keys(n).forEach((function(t){var r="texture".concat(t),o="sprite".concat(t),s=n[t][0].properties.url;e[r]={url:s,sprites:a({},o,[0,0,50,50])},n[t].forEach((function(t){t=t.properties,i["icon".concat(t.name)]={filter:{name:t.name,$zoom:{min:18}},draw:{points:{interactive:!0,priority:1,size:[[15,"5%"],[16,"10%"],[17,"15%"],[18,"25%"],[19,"35%"],[20,"40%"],[21,"50%"]],texture:r,sprite:o}}}}))})),{textures:e,iconLayers:i}}},{key:"getFootprintLayer",value:function(){return{data:{source:"venues",layer:it.FOOTPRINT},draw:{polygons:{interactive:!0,color:"#AF91B4",order:2},lines:{color:"#613F8E",width:"2px",order:1},points:{color:"[0, 0, 0, 0]",size:"0px",order:3,priority:1,text:{anchor:"center",collide:!1,font:{fill:"black",size:"16px"},text_source:"function() { return feature.venueName }"}}}}}},{key:"getGeometryLayer",value:function(){return{data:{source:"venues",layer:it.VECTOR},draw:{polygons:{interactive:!0,color:"function() { return feature.fillColor }",order:"function() { return feature.zIndex }"},lines:{color:"function() { return feature.outlineColor }",order:"function() { return feature.zIndex }",width:"function() { return feature.outlineWidth }"}}}}},{key:"getTextLayer",value:function(){return{filter:{$zoom:{min:18}},data:{source:"venues",layer:it.TEXT},draw:{points:{filter:"function() { return $zoom > feature.minZoom }",color:"[0, 0, 0, 0]",size:"0px",offset:["0px","-10px"],priority:2,text:{font:{fill:"function() { return feature.textFillColor }",size:13},text_source:"function() { return feature.name }"}}}}}},{key:"getIconLayer",value:function(t){return u({data:{source:"venues",layer:it.ICON}},t)}},{key:"getStyle",value:function(e){e=(i=t.getIconsTextures(0<arguments.length&&void 0!==e?e:[])).textures;var i=i.iconLayers;return i={venue_footprints:t.getFootprintLayer(),venue_geometries:t.getGeometryLayer(),venue_labels:t.getTextLayer(),venue_icons:t.getIconLayer(i)},e=H.gl.yaml.safeDump({sources:{venues:{max_zoom:24,type:"GeoJSONTileSource"}},layers:i,textures:e}),new H.map.render.webgl.Style(e)}}]),t}(),ni={type:"FeatureCollection",features:[]},ri={extent:4096,indexMaxZoom:0,maxZoom:24,tolerance:3},oi=(Le=function(){l(e,H.map.provider.RemoteTileProvider);var t=g(e);function e(i){return n(this,e),(i=t.call(this,i)).venues=[],i.activeVenue=null,i.dataLayers_={},i.tileIndexes_={},i.addEventListener($e.EVENTS.ACTIVE_VENUE_CHANGE,i.activeVenueChangeHandler_,void 0,d(i)),i}return o(e,[{key:"setStyle",value:function(t){return this.setStyleInternal(t)}},{key:"getStyle",value:function(){return this.getStyleInternal()}},{key:"isFeatureVisible_",value:function(t,e){var i=t.properties;return this.activeVenue&&i.venueId===this.activeVenue.getId()?e!==it.FOOTPRINT&&this.activeVenue.getActiveLevels().some((function(t){return t.id===i.levelId})):!0===i.isFootprint&&e===it.FOOTPRINT}},{key:"requestInternal",value:function(t,e,i,n){function r(n){for(var r=0;r<n.length;r+=1)n[r]=n[r].map((function(n){return X(n,i,t,e,ri.extent)}))}var o=this,a={};return Object.keys(this.tileIndexes_).forEach((function(n){var s=o.tileIndexes_[n].getTile(i,t,e);a[n]=s?function(t){var e=[],i=t&&t.features;if(i)for(var n=0,r=i.length;n<r;n+=1){var o=i[n],a=o.type,s=void 0,u=!1;switch(a){case 1:s={type:"MultiPoint",coordinates:o.geometry.map((function(t){return t.slice()}))};break;case 2:case 3:s={type:Q,coordinates:o.geometry.map((function(t){return t.map((function(t){return t.slice()}))}))},3===a&&null==(s=Z(s))&&(u=!0);break;default:u=!0}u||e.push({geometry:s,id:o.id,properties:o.tags,type:"Feature"})}return{type:"FeatureCollection",features:e}}(s):ni,a[n].features=a[n].features.filter((function(t){return o.isFeatureVisible_(t,n)}));for(var u=0;u<a[n].features.length;u+=1){var l=a[n].features[u],h=l.geometry.type;if(h===$||h===Q)r(l.geometry.coordinates);else if(h===tt)l.geometry.coordinates.map(r);else for(var c=l.geometry.coordinates,f=0;f<c.length;f+=1)c[f]=X(c[f],i,t,e,ri.extent)}})),n(a),{cancel:function(){}}}},{key:"getActiveVenue",value:function(){return this.activeVenue}},{key:"getVenue",value:function(t){return t?this.venues.find((function(e){return e.getId()===Number(t)})):this.activeVenue}},{key:"setActiveVenue",value:function(t){var e=this.activeVenue;this.activeVenue=t,this.dispatchEvent(new H.util.ChangeEvent($e.EVENTS.ACTIVE_VENUE_CHANGE,t,e)),this.reload()}},{key:"addVenue",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e;if(!(t instanceof $e))throw new Error("Invalid argument");if(e=t.getId(),this.getVenue(e))throw new Error("Please invoke provider.removeVenue to remove old instance of venue ".concat(e," before adding new"));t.setParentEventTarget(this),this.venues.push(t),i||(this.reloadData_(),this.reloadStyle_())}},{key:"addVenues",value:function(t){var e=this;0<(t=0<arguments.length&&void 0!==t?t:[]).length&&(t.forEach((function(t){t instanceof $e&&e.addVenue(t,!0)})),this.reloadData_(),this.reloadStyle_())}},{key:"removeVenue",value:function(t){var e;t instanceof $e&&-1<this.venues.indexOf(t)&&(e=t.getId(),this.activeVenue&&this.activeVenue.getId()===e&&this.setActiveVenue(null),this.venues.splice(this.venues.indexOf(t),1),this.reloadData_(),this.reloadStyle_(),this.reload())}},{key:"getFeatureProxy",value:function(t,e,i){var n=t.geometryId;return t=t.venueId,t=this.getVenue(t),n?i(t.getGeometries().find((function(t){return t.id===n}))):t&&i(t),!0}},{key:"addVenueEventListeners_",value:function(t){t&&(t.addEventListener($e.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.addEventListener($e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.addEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"removeVenueEventListeners_",value:function(t){t&&(t.removeEventListener($e.EVENTS.GEOMETRY_HIGHLIGHT,this.geometryHighlightHandler_,void 0,this),t.removeEventListener($e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),t.removeEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this))}},{key:"activeVenueChangeHandler_",value:function(t){var e=t.oldValue;t=t.newValue,e&&(this.removeVenueEventListeners_(e),e.updateMapObjectsVisibility_()),t&&(this.addVenueEventListeners_(t),t.updateMapObjectsVisibility_())}},{key:"drawingChangeHandler_",value:function(){this.reload()}},{key:"levelChangeHandler_",value:function(){this.activeVenue&&(this.activeVenue.updateMapObjectsVisibility_(),this.reload())}},{key:"geometryHighlightHandler_",value:function(){this.reloadData_([it.VECTOR]),this.reload()}},{key:"createDataLayers_",value:function(t){var e=this,i=(t=0<arguments.length&&void 0!==t?t:Object.keys(it),it.FOOTPRINT),n=it.ICON,r=it.TEXT,o=it.VECTOR;t.forEach((function(t){switch(t){case o:e.dataLayers_[o]=ti.getGeometryLayer(e.venues);break;case i:e.dataLayers_[i]=ti.getFootprintLayer(e.venues);break;case n:e.dataLayers_[n]=ti.getIconLayer(e.venues);break;case r:e.dataLayers_[r]=ti.getLabelLayer(e.venues);break;default:throw new Error("Unsupported Layer ".concat(t))}}))}},{key:"createTileIndexes_",value:function(t){var e=this;(0<arguments.length&&void 0!==t?t:Object.keys(it)).forEach((function(t){e.tileIndexes_[t]=new Y(e.dataLayers_[t],ri)}))}},{key:"reloadData_",value:function(t){t=0<arguments.length&&void 0!==t?t:Object.keys(it),this.createDataLayers_(t),this.createTileIndexes_(t)}},{key:"reloadStyle_",value:function(){var t=this.dataLayers_[it.ICON]?this.dataLayers_[it.ICON].features:[];this.getEngineType()===H.Map.EngineType.WEBGL?this.setStyle(ii.getStyle(t)):this.getEngineType()===H.Map.EngineType.HARP&&this.setStyle(ei.getStyle(t))}},{key:"providesGeoJSON",value:function(){return!0}}]),e}(),new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3})),ai=new H.map.SpatialStyle({strokeColor:"#1ab4bf",lineWidth:3}),si=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImIiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzNC4yNSAzMS42NTJ6Ii8+PG1hc2sgaWQ9ImMiIHdpZHRoPSIzOCIgaGVpZ2h0PSI0NiIgeD0iMCIgeT0iMCIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZWxsaXBzZSBjeD0iMjAiIGN5PSI0NS4xNiIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjOTc5Nzk3IiBzdHJva2Utd2lkdGg9Ii4yNSIgcng9IjMuNSIgcnk9IjMuNSIvPjx1c2UgZmlsbD0iIzAxQjZCMiIgeGxpbms6aHJlZj0iI2IiLz48cGF0aCBmaWxsPSIjMzIzMjMyIiBmaWxsLW9wYWNpdHk9Ii41IiBkPSJNMTEuODEgMzcuNjZoMTYuMzhsLTguMiA4eiIvPjx1c2Ugc3Ryb2tlPSIjNDE2QTg2IiBzdHJva2Utd2lkdGg9Ii41IiBtYXNrPSJ1cmwoI2MpIiB4bGluazpocmVmPSIjYSIvPjxlbGxpcHNlIGN4PSIxOS44MSIgY3k9IjE5LjE5IiBmaWxsPSIjRkZGIiByeD0iNC44MSIgcnk9IjQuODEiLz48L2c+PC9zdmc+"),ui=new H.map.Icon("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI1MCIgdmlld0JveD0iMCAwIDQwIDUwIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0zNC4yNSAzMS42NTJBMTkuMDE1IDE5LjAxNSAwIDAgMCAzOSAxOS4wNkMzOSA4LjU0OSAzMC40NzggMCAyMCAwUzEgOC41NSAxIDE5LjA1OWMwIDQuODIzIDEuNzk1IDkuMjMzIDQuNzUgMTIuNTkzTDE5Ljk3NSA0NiAzMi44MyAzMy4xMDRjLjQwNy0uMzc0IDEuNDE5LTEuNDUyIDEuNDE5LTEuNDUyeiIvPjxtYXNrIGlkPSJjIiB3aWR0aD0iMzgiIGhlaWdodD0iNDYiIHg9IjAiIHk9IjAiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PGVsbGlwc2UgaWQ9ImIiIGN4PSIxOS44MDciIGN5PSIxOS4xNjgiIHJ4PSIxMi4zNjMiIHJ5PSIxMi4xOTciLz48bWFzayBpZD0iZCIgd2lkdGg9IjI1LjcyNSIgaGVpZ2h0PSIyNS4zOTQiIHg9Ii0uNSIgeT0iLS41Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNi45NDQgNi40NzFoMjUuNzI1djI1LjM5NEg2Ljk0NHoiLz48dXNlIHhsaW5rOmhyZWY9IiNiIi8+PC9tYXNrPjwvZGVmcz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxlbGxpcHNlIGN4PSIyMCIgY3k9IjQ1LjE2IiBmaWxsPSIjRkZGIiBzdHJva2U9IiM5Nzk3OTciIHN0cm9rZS13aWR0aD0iLjI1IiByeD0iMy41IiByeT0iMy41Ii8+PHVzZSBmaWxsPSIjMzIzMjMyIiB4bGluazpocmVmPSIjYSIvPjxwYXRoIGZpbGw9IiM3RDdEN0QiIGQ9Ik0xMi4wMTEgMzcuODA1aDE1Ljk3OGwtNy45MTYgOHoiLz48dXNlIHN0cm9rZT0iIzdDN0M3QyIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNlKSIgeGxpbms6aHJlZj0iI2EiLz48dXNlIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLXdpZHRoPSIuNSIgbWFzaz0idXJsKCNjKSIgeGxpbms6aHJlZj0iI2EiLz48ZWxsaXBzZSBmaWxsPSIjRkZGIiBjeD0iMTkuODA3IiBjeT0iMTkuMTY4IiByeD0iMTIuMzYzIiByeT0iMTIuMTk3Ii8+PHBhdGggZmlsbD0iIzMyMzIzMiIgZD0iTTYuODEyIDYuOTQ4aDYuNDV2Ni4zNjRoLTYuNDV6bTAgMTIuNzI3aDYuNDV2Ni4zNjRoLTYuNDV6bTYuNDUtNi4zNjNoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS0xOS4wOTFoNi40NXY2LjM2NGgtNi40NXptMCAxMi43MjdoNi40NXY2LjM2NGgtNi40NXptNi40NS02LjM2M2g2LjQ1djYuMzY0aC02LjQ1em0wIDEyLjcyN2g2LjQ1djYuMzY0aC02LjQ1eiIvPjx1c2Ugc3Ryb2tlPSIjRkZGIiBtYXNrPSJ1cmwoI2QpIiB4bGluazpocmVmPSIjYiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIvPjwvZz48L3N2Zz4="),li=null,hi=null,ci=function(){function t(e,i){n(this,t),this.indoorMapObjects_=null,this.outdoorMapObjects_=null,this.createRouteObjects_(e,i)}return o(t,[{key:"createRouteObjects_",value:function(e,i){var n=this,r=void 0===(e=e.sections)?[]:e,o=1<arguments.length&&void 0!==i?i:Qe;this.indoorMapObjects_={},this.outdoorMapObjects_=new H.map.Group;for(var a=function(e){var i,a=r[e],s=(i=a.departure.place).id,l=i.type,h=H.util.flexiblePolyline.decode(a.polyline).polyline,c=void 0,f=void 0;(i=o(e,r,t.ObjectType.SEGMENT_START_MARKER))&&(c=new H.map.Marker(a.departure.place.location,{icon:i})),(i=o(e,r,t.ObjectType.SEGMENT_FINISH_MARKER))&&(f=new H.map.Marker(a.arrival.place.location,{icon:i}));var p,d=o(e,r,t.ObjectType.SEGMENT_POLYLINE);"indoor"===l?(l=function(t){t=0<arguments.length&&void 0!==t?t:[];var e=new Map,i=new H.geo.LineString,n=v(t[0],3)[2];return e.set(n,[i]),t.forEach((function(t){t[2]!==n&&(n=t[2],i=new H.geo.LineString,e.has(n)?e.get(n).push(i):e.set(n,[i])),i.pushLatLngAlt.apply(i,m(t))})),e}(h),p=Array.from(l.keys()).reduce((function(t,e){return t[e]||(t[e]=new H.map.Group),t}),{}),d&&l.forEach((function(t,e){t.forEach((function(t){1<t.getPointCount()&&(t=new H.map.Polyline(t,{style:d}),p[e].addObject(t))}))})),c&&p[a.departure.place.location.lvl].addObject(c),f&&p[a.arrival.place.location.lvl].addObject(f),n.indoorMapObjects_[s]=u(u({},n.indoorMapObjects_[s]||{}),p)):(d&&(h=new H.geo.LineString(h.flatMap((function(t){return[t[0],t[1],0]}))),h=new H.map.Polyline(h,{style:d}),n.outdoorMapObjects_.addObject(h)),c&&n.outdoorMapObjects_.addObject(c),f&&n.outdoorMapObjects_.addObject(f))},s=0;s<r.length;s++)a(s)}},{key:"getIndoorObjects",value:function(){return this.indoorMapObjects_}},{key:"getOutdoorObjects",value:function(){return this.outdoorMapObjects_}}]),t}();ci.ObjectType={SEGMENT_START_MARKER:1,SEGMENT_FINISH_MARKER:2,SEGMENT_POLYLINE:3};var fi=function(){l(e,H.service.Service);var t=g(e);function e(i){var r;n(this,e),r=t.call(this,e,i);var o={apiKey:i.apikey,baseUrl:i.baseUrl&&i.baseUrl.getHost(),token:i.token},a={apiKey:o.apiKey,token:o.token};o.apiKey||(o.apiKey=r.getUrl().getQuery().apikey);var s=i.useLegacy||!1;return r.venueService_=new Ze(o,s),a.apiKey||(a.apiKey=r.getUrl().getQuery().apikey),i.routingBaseUrl&&(a.baseUrl=i.routingBaseUrl),r.routingService_=new Je(a),r}return o(e,[{key:"loadVenue",value:function(t,e){return e=1<arguments.length&&void 0!==e?e:{},this.venueService_.load(t,e).then((function(t){return new $e(t)}))}},{key:"calculateRoute",value:function(t){return this.routingService_.calculateRoute(t)}}]),e}();return fi.CONFIG_KEY="venues",H.service.Platform.prototype.getVenuesService=function(t){return this.createService(fi,t)},be=function(){l(e,H.ui.Control);var t=g(e);function e(i){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(r=t.call(this)).provider_=null,r.levelSelectorUI_=null,r.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),r.addClass("venues-ui"),i instanceof $e&&r.setVenue(i),r}return o(e,[{key:"renderInternal",value:function(t,i){y(h(e.prototype),"renderInternal",this).call(this,t,i),this.createLevelSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof $e&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.update_(),this.addEventListeners_())}},{key:"createLevelSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.levelSelectorUI_=null,this.levelSelectorUI_=new Ut(t,null,null,(function(t){return e.venue.setActiveLevelIndex(t)}))}},{key:"update_",value:function(){var t,e;this.levelSelectorUI_&&(t=this.venue.getActiveDrawing().getData(),e=this.venue.getData().getDisplaySettings(),this.levelSelectorUI_.update(t,e),this.levelChangeHandler_())}},{key:"addEventListeners_",value:function(){this.venue&&(this.venue.addEventListener($e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.addEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.addEventListener($e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&(this.venue.removeEventListener($e.EVENTS.LEVEL_CHANGE,this.levelChangeHandler_,void 0,this),this.venue.removeEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this)),this.provider_&&this.provider_.removeEventListener($e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"levelChangeHandler_",value:function(){this.levelSelectorUI_.switch(this.venue.getActiveLevelIndex())}},{key:"drawingChangeHandler_",value:function(){this.update_()}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),Et=function(){l(e,H.ui.Control);var t=g(e);function e(i){var r,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n(this,e),(r=t.call(this)).provider_=null,r.drawingSelectorUI_=null,r.addClass("venues-ui"),r.setAlignment(o&&o.alignment||H.ui.LayoutAlignment.RIGHT_BOTTOM),i instanceof $e&&r.setVenue(i),r}return o(e,[{key:"renderInternal",value:function(t,i){y(h(e.prototype),"renderInternal",this).call(this,t,i),this.createDrawingSelectorUI_(t),this.venue&&this.setVenue(this.venue)}},{key:"setVenue",value:function(t){t instanceof $e&&(this.removeEventListeners_(),this.venue=t,this.provider_=t.getParentEventTarget(),this.drawingSelectorUI_&&this.drawingSelectorUI_.update(t.getData()),this.addEventListeners_())}},{key:"createDrawingSelectorUI_",value:function(t){var e=this;t.innerHTML="",this.drawingSelectorUI_=null,this.drawingSelectorUI_=new Nt(t,null,(function(t){return e.venue.setActiveDrawing(t)}))}},{key:"addEventListeners_",value:function(){this.venue&&this.venue.addEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.addEventListener($e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"removeEventListeners_",value:function(){this.venue&&this.venue.removeEventListener($e.EVENTS.DRAWING_CHANGE,this.drawingChangeHandler_,void 0,this),this.provider_&&this.provider_.removeEventListener($e.EVENTS.ACTIVE_VENUE_CHANGE,this.activeVenueChangeHandler_,void 0,this)}},{key:"drawingChangeHandler_",value:function(){this.drawingSelectorUI_.switch(this.venue.getActiveDrawing().id)}},{key:"activeVenueChangeHandler_",value:function(t){this.setVenue(t.newValue)}}]),e}(),be=Object.freeze({__proto__:null,DrawingControl:Et,LevelControl:be}),e(".venues-ui * {\n  font-family: 'Fira Sans', 'Helvetica Neue', Helvetica, sans-serif;\n  color: #0F1621; }\n\n.venues-ui .arrow {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-position: center; }\n  .venues-ui .arrow--up {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-426.000000, -584.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls-Copy' transform='translate(417.753906, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(15.000000, 16.499023) rotate(-180.000000) translate(-15.000000, -16.499023) translate(9.000000, 12.749023)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n  .venues-ui .arrow--down {\n    background-image: url(\"data:image/svg+xml,%0A%3Csvg width='13px' height='9px' viewBox='0 0 13 9' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cg id='VenueMap_Facilities_Detail' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg id='Floorplan-Switcher' transform='translate(-347.000000, -704.000000)' fill='%23383C45'%3E%3Cg id='Map-Controls' transform='translate(338.251953, 572.000000)'%3E%3Cg id='Chevron,-Dark' transform='translate(9.000000, 132.746094)'%3E%3Cpath d='M6.0105,7.5 L4.1895,5.76404817 L0.1695,1.90510321 C0.057,1.79759174 0,1.68291284 0,1.56106651 C0,1.44065367 0.057,1.32597477 0.1695,1.2184633 L1.2465,0.16771789 C1.347,0.0587729358 1.47,0.00430045872 1.617,0.00430045872 C1.764,0.00430045872 1.887,0.0587729358 1.986,0.166284404 L6.009,3.98365826 L10.023,0.161983945 C10.122,0.0530389908 10.236,0 10.3695,0 C10.503,0 10.62,0.0530389908 10.7205,0.161983945 L11.841,1.21129587 C12.0525,1.43922018 12.0525,1.67144495 11.8425,1.89793578 L7.827,5.76118119 L6.0105,7.5 Z' id='Fill-3'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E\"); }\n\n.venues-ui .venues-ui-button {\n  display: block;\n  width: 40px;\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #fff;\n  border: none;\n  border-bottom: 1px solid #9FA2A6;\n  cursor: pointer;\n  overflow: hidden;\n  color: #6e737a;\n  text-align: center;\n  text-overflow: ellipsis;\n  white-space: nowrap; }\n  .venues-ui .venues-ui-button:hover, .venues-ui .venues-ui-button--active {\n    background-color: #f0f0f0;\n    color: #0F1621; }\n\n@keyframes fade {\n  0% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n.venues-ui__drawings .drawings {\n  position: absolute;\n  top: 0;\n  right: 45px;\n  display: none;\n  opacity: 0;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .drawings--open {\n    display: block;\n    opacity: 1;\n    animation: fade 1s; }\n  .venues-ui__drawings .drawings .venues-ui-button {\n    width: auto;\n    padding: 0 10px; }\n    .venues-ui__drawings .drawings .venues-ui-button:first-of-type {\n      border-top-left-radius: 5px;\n      border-top-right-radius: 5px; }\n    .venues-ui__drawings .drawings .venues-ui-button:last-of-type {\n      border-bottom-left-radius: 5px;\n      border-bottom-right-radius: 5px; }\n\n.venues-ui__drawings .trigger {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__drawings .trigger .arrow {\n    transform: rotate(0);\n    transition: 0.4s; }\n  .venues-ui__drawings .trigger.venues-ui-button--active .arrow {\n    transform: rotate(90deg);\n    transition: 0.4s; }\n\n.venues-ui__levels {\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__levels .levels {\n    overflow: hidden; }\n  .venues-ui__levels .venues-ui-button--up + .levels .venues-ui-button {\n    border-radius: 0; }\n  .venues-ui__levels .venues-ui-button:first-of-type {\n    border-top-left-radius: 5px;\n    border-top-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button:last-of-type {\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px; }\n  .venues-ui__levels .venues-ui-button[disabled=disabled] .arrow {\n    opacity: 0.5; }\n\n.venues-ui__directory {\n  position: absolute;\n  top: 10px;\n  right: 60px;\n  bottom: calc(100% - 45px);\n  width: 350px;\n  overflow: hidden;\n  background: white;\n  border-radius: 5px;\n  box-shadow: 0 0 0.4em 0 rgba(15, 22, 33, 0.6); }\n  .venues-ui__directory.active {\n    bottom: 10px; }\n  .venues-ui__directory .directory__list {\n    top: 80px;\n    bottom: 20px;\n    position: absolute;\n    overflow-y: scroll;\n    right: 10px;\n    left: 10px;\n    font-size: 12px; }\n    .venues-ui__directory .directory__list svg {\n      width: 25px;\n      height: 25px; }\n  .venues-ui__directory .directory__heading {\n    margin: 8px;\n    font-size: 15px;\n    font-weight: normal;\n    cursor: pointer; }\n  .venues-ui__directory .directory__input {\n    margin: 10px; }\n    .venues-ui__directory .directory__input input {\n      width: 100%;\n      padding: 5px 0; }\n  .venues-ui__directory .directory__trigger {\n    position: absolute;\n    right: 10px;\n    top: 15px;\n    width: 10px;\n    height: 10px; }\n    .venues-ui__directory .directory__trigger .arrow {\n      transform: rotate(0);\n      transition: 0.4s; }\n    .venues-ui__directory .directory__trigger--active .arrow {\n      transform: rotate(-180deg);\n      transition: 0.4s; }\n"),t.Drawing=x,t.Geometry=w,t.Level=M,t.Provider=Le,t.Route=ci,t.Service=fi,t.Venue=$e,t.ui=be,Object.defineProperty(t,"__esModule",{value:!0}),t}({})}.call(self);const __WEBPACK_DEFAULT_EXPORT__=H},4028:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r,o=t.length;if(0===o)return-1;i=i<0?Math.max(0,i+o):Math.min(i,o-1),r=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<i?n+1+(o-i):n-i+1;for(var a=0;a<r;++a){var s=(i+a)%o;if(t[s]===e)return s}return-1}function i(t,e,i,n){void 0===i&&(i=-1),void 0===n&&(n=0);var r,o=t.length;if(0===o)return-1;r=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<(n=n<0?Math.max(0,n+o):Math.min(n,o-1))?i+1+(o-n):i-n+1;for(var a=0;a<r;++a){var s=(i-a+o)%o;if(t[s]===e)return s}return-1}function n(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r,o=t.length;if(0===o)return-1;i=i<0?Math.max(0,i+o):Math.min(i,o-1),r=(n=n<0?Math.max(0,n+o):Math.min(n,o-1))<i?n+1+(o-i):n-i+1;for(var a=0;a<r;++a){var s=(i+a)%o;if(e(t[s],s))return s}return-1}function r(t,e,i,n){void 0===i&&(i=-1),void 0===n&&(n=0);var r,o=t.length;if(0===o)return-1;r=(i=i<0?Math.max(0,i+o):Math.min(i,o-1))<(n=n<0?Math.max(0,n+o):Math.min(n,o-1))?i+1+(o-n):i-n+1;for(var a=0;a<r;++a){var s=(i-a+o)%o;if(e(t[s],s))return s}return-1}function o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var n=t.length;if(!(n<=1))for(e=e<0?Math.max(0,e+n):Math.min(e,n-1),i=i<0?Math.max(0,i+n):Math.min(i,n-1);e<i;){var r=t[e],o=t[i];t[e++]=o,t[i--]=r}}function a(t,e){var i=t.length;if(e<0&&(e+=i),!(e<0||e>=i)){for(var n=t[e],r=e+1;r<i;++r)t[r-1]=t[r];return t.length=i-1,n}}t.firstIndexOf=e,t.lastIndexOf=i,t.findFirstIndex=n,t.findLastIndex=r,t.findFirstValue=function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=-1);var o=n(t,e,i,r);return-1!==o?t[o]:void 0},t.findLastValue=function(t,e,i,n){void 0===i&&(i=-1),void 0===n&&(n=0);var o=r(t,e,i,n);return-1!==o?t[o]:void 0},t.lowerBound=function(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var o=t.length;if(0===o)return 0;for(var a=n=n<0?Math.max(0,n+o):Math.min(n,o-1),s=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))-n+1;s>0;){var u=s>>1,l=a+u;i(t[l],e)<0?(a=l+1,s-=u+1):s=u}return a},t.upperBound=function(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var o=t.length;if(0===o)return 0;for(var a=n=n<0?Math.max(0,n+o):Math.min(n,o-1),s=(r=r<0?Math.max(0,r+o):Math.min(r,o-1))-n+1;s>0;){var u=s>>1,l=a+u;i(t[l],e)>0?s=u:(a=l+1,s-=u+1)}return a},t.shallowEqual=function(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;++n)if(i?!i(t[n],e[n]):t[n]!==e[n])return!1;return!0},t.slice=function(t,e){void 0===e&&(e={});var i=e.start,n=e.stop,r=e.step;if(void 0===r&&(r=1),0===r)throw new Error("Slice `step` cannot be zero.");var o,a=t.length;void 0===i?i=r<0?a-1:0:i<0?i=Math.max(i+a,r<0?-1:0):i>=a&&(i=r<0?a-1:a),void 0===n?n=r<0?-1:a:n<0?n=Math.max(n+a,r<0?-1:0):n>=a&&(n=r<0?a-1:a),o=r<0&&n>=i||r>0&&i>=n?0:r<0?Math.floor((n-i+1)/r+1):Math.floor((n-i-1)/r+1);for(var s=[],u=0;u<o;++u)s[u]=t[i+u*r];return s},t.move=function(t,e,i){var n=t.length;if(!(n<=1)&&(e=e<0?Math.max(0,e+n):Math.min(e,n-1))!==(i=i<0?Math.max(0,i+n):Math.min(i,n-1))){for(var r=t[e],o=e<i?1:-1,a=e;a!==i;a+=o)t[a]=t[a+o];t[i]=r}},t.reverse=o,t.rotate=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r=t.length;if(!(r<=1||(i=i<0?Math.max(0,i+r):Math.min(i,r-1))>=(n=n<0?Math.max(0,n+r):Math.min(n,r-1)))){var a=n-i+1;if(e>0?e%=a:e<0&&(e=(e%a+a)%a),0!==e){var s=i+e;o(t,i,s-1),o(t,s,n),o(t,i,n)}}},t.fill=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r=t.length;if(0!==r){var o;i=i<0?Math.max(0,i+r):Math.min(i,r-1),o=(n=n<0?Math.max(0,n+r):Math.min(n,r-1))<i?n+1+(r-i):n-i+1;for(var a=0;a<o;++a)t[(i+a)%r]=e}},t.insert=function(t,e,i){var n=t.length;e=e<0?Math.max(0,e+n):Math.min(e,n);for(var r=n;r>e;--r)t[r]=t[r-1];t[e]=i},t.removeAt=a,t.removeFirstOf=function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=-1);var o=e(t,i,n,r);return-1!==o&&a(t,o),o},t.removeLastOf=function(t,e,n,r){void 0===n&&(n=-1),void 0===r&&(r=0);var o=i(t,e,n,r);return-1!==o&&a(t,o),o},t.removeAllOf=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r=t.length;if(0===r)return 0;i=i<0?Math.max(0,i+r):Math.min(i,r-1),n=n<0?Math.max(0,n+r):Math.min(n,r-1);for(var o=0,a=0;a<r;++a)i<=n&&a>=i&&a<=n&&t[a]===e||n<i&&(a<=n||a>=i)&&t[a]===e?o++:o>0&&(t[a-o]=t[a]);return o>0&&(t.length=r-o),o},t.removeFirstWhere=function(t,e,i,r){var o;void 0===i&&(i=0),void 0===r&&(r=-1);var s=n(t,e,i,r);return-1!==s&&(o=a(t,s)),{index:s,value:o}},t.removeLastWhere=function(t,e,i,n){var o;void 0===i&&(i=-1),void 0===n&&(n=0);var s=r(t,e,i,n);return-1!==s&&(o=a(t,s)),{index:s,value:o}},t.removeAllWhere=function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=-1);var r=t.length;if(0===r)return 0;i=i<0?Math.max(0,i+r):Math.min(i,r-1),n=n<0?Math.max(0,n+r):Math.min(n,r-1);for(var o=0,a=0;a<r;++a)i<=n&&a>=i&&a<=n&&e(t[a],a)||n<i&&(a<=n||a>=i)&&e(t[a],a)?o++:o>0&&(t[a-o]=t[a]);return o>0&&(t.length=r-o),o}}(e.ArrayExt||(e.ArrayExt={}))},5777:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new r(n.iter(t.map(n.iter)))};var r=function(){function t(t){this._cloned=!1,this._source=t,this._active=void 0}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone());return e._active=this._active&&this._active.clone(),e._cloned=!0,this._cloned=!0,e},t.prototype.next=function(){if(void 0===this._active){var t=this._source.next();if(void 0===t)return;this._active=this._cloned?t.clone():t}var e=this._active.next();return void 0!==e?e:(this._active=void 0,this.next())},t}();e.ChainIterator=r},5825:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.empty=function(){return new i};var i=function(){function t(){}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t},t.prototype.next=function(){},t}();e.EmptyIterator=i},8457:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.enumerate=function(t,e){return void 0===e&&(e=0),new r(n.iter(t),e)};var r=function(){function t(t,e){this._source=t,this._index=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._index)},t.prototype.next=function(){var t=this._source.next();if(void 0!==t)return[this._index++,t]},t}();e.EnumerateIterator=r},9658:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.filter=function(t,e){return new r(n.iter(t),e)};var r=function(){function t(t,e){this._index=0,this._source=t,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){for(var t,e=this._fn,i=this._source;void 0!==(t=i.next());)if(e(t,this._index++))return t},t}();e.FilterIterator=r},6997:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.find=function(t,e){for(var i,r=0,o=n.iter(t);void 0!==(i=o.next());)if(e(i,r++))return i},e.findIndex=function(t,e){for(var i,r=0,o=n.iter(t);void 0!==(i=o.next());)if(e(i,r++))return r-1;return-1},e.min=function(t,e){var i=n.iter(t),r=i.next();if(void 0!==r){for(var o=r;void 0!==(r=i.next());)e(r,o)<0&&(o=r);return o}},e.max=function(t,e){var i=n.iter(t),r=i.next();if(void 0!==r){for(var o=r;void 0!==(r=i.next());)e(r,o)>0&&(o=r);return o}},e.minmax=function(t,e){var i=n.iter(t),r=i.next();if(void 0!==r){for(var o=r,a=r;void 0!==(r=i.next());)e(r,o)<0?o=r:e(r,a)>0&&(a=r);return[o,a]}}},4558:(t,e,i)=>{"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(4028)),n(i(5777)),n(i(5825)),n(i(8457)),n(i(9658)),n(i(6997)),n(i(244)),n(i(5106)),n(i(2305)),n(i(5248)),n(i(2081)),n(i(6387)),n(i(4604)),n(i(7111)),n(i(7614)),n(i(173)),n(i(8280))},244:(t,e)=>{"use strict";function i(t){return"function"==typeof t.iter?t.iter():new n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.iter=i,e.iterKeys=function(t){return new r(t)},e.iterValues=function(t){return new o(t)},e.iterItems=function(t){return new a(t)},e.iterFn=function(t){return new s(t)},e.each=function(t,e){for(var n,r=0,o=i(t);void 0!==(n=o.next());)if(!1===e(n,r++))return},e.every=function(t,e){for(var n,r=0,o=i(t);void 0!==(n=o.next());)if(!e(n,r++))return!1;return!0},e.some=function(t,e){for(var n,r=0,o=i(t);void 0!==(n=o.next());)if(e(n,r++))return!0;return!1},e.toArray=function(t){for(var e,n=0,r=[],o=i(t);void 0!==(e=o.next());)r[n++]=e;return r},e.toObject=function(t){for(var e,n=i(t),r={};void 0!==(e=n.next());)r[e[0]]=e[1];return r};var n=function(){function t(t){this._index=0,this._source=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._source.length))return this._source[this._index++]},t}();e.ArrayIterator=n;var r=function(){function t(t,e){void 0===e&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?t:this.next()}},t}();e.KeyIterator=r;var o=function(){function t(t,e){void 0===e&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?this._source[t]:this.next()}},t}();e.ValueIterator=o;var a=function(){function t(t,e){void 0===e&&(e=Object.keys(t)),this._index=0,this._source=t,this._keys=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source,this._keys);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._keys.length)){var t=this._keys[this._index++];return t in this._source?[t,this._source[t]]:this.next()}},t}();e.ItemIterator=a;var s=function(){function t(t){this._fn=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){throw new Error("An `FnIterator` cannot be cloned.")},t.prototype.next=function(){return this._fn.call(void 0)},t}();e.FnIterator=s},5106:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.map=function(t,e){return new r(n.iter(t),e)};var r=function(){function t(t,e){this._index=0,this._source=t,this._fn=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source.clone(),this._fn);return e._index=this._index,e},t.prototype.next=function(){var t=this._source.next();if(void 0!==t)return this._fn.call(void 0,t,this._index++)},t}();e.MapIterator=r},2305:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.range=function(t,e,i){return void 0===e?new n(0,t,1):new n(t,e,void 0===i?1:i)};var i,n=function(){function t(t,e,n){this._index=0,this._start=t,this._stop=e,this._step=n,this._length=i.rangeLength(t,e,n)}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._start,this._stop,this._step);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index>=this._length))return this._start+this._step*this._index++},t}();e.RangeIterator=n,function(t){t.rangeLength=function(t,e,i){return 0===i?1/0:t>e&&i>0||t<e&&i<0?0:Math.ceil((e-t)/i)}}(i||(i={}))},5248:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.reduce=function(t,e,i){var r=0,o=n.iter(t),a=o.next();if(void 0===a&&void 0===i)throw new TypeError("Reduce of empty iterable with no initial value.");if(void 0===a)return i;var s,u,l=o.next();if(void 0===l&&void 0===i)return a;if(void 0===l)return e(i,a,r++);for(s=e(void 0===i?a:e(i,a,r++),l,r++);void 0!==(u=o.next());)s=e(s,u,r++);return s}},2081:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=function(t,e){return new i(t,e)},e.once=function(t){return new i(t,1)};var i=function(){function t(t,e){this._value=t,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._value,this._count)},t.prototype.next=function(){if(!(this._count<=0))return this._count--,this._value},t}();e.RepeatIterator=i},6387:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.retro=function(t){return"function"==typeof t.retro?t.retro():new i(t)};var i=function(){function t(t){this._source=t,this._index=t.length-1}return t.prototype.iter=function(){return this},t.prototype.clone=function(){var e=new t(this._source);return e._index=this._index,e},t.prototype.next=function(){if(!(this._index<0||this._index>=this._source.length))return this._source[this._index--]},t}();e.RetroArrayIterator=i},4604:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.topologicSort=function(t){var e=[],i=new Set,r=new Map;return n.each(t,(function(t){var e=t[0],i=t[1],n=r.get(i);n?n.push(e):r.set(i,[e])})),r.forEach((function(t,e){o(e)})),e;function o(t){if(!i.has(t)){i.add(t);var n=r.get(t);n&&n.forEach(o),e.push(t)}}}},7111:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.stride=function(t,e){return new r(n.iter(t),e)};var r=function(){function t(t,e){this._source=t,this._step=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._step)},t.prototype.next=function(){for(var t=this._source.next(),e=this._step-1;e>0;--e)this._source.next();return t},t}();e.StrideIterator=r},7614:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t,e,i){void 0===i&&(i=0);for(var n=new Array(e.length),r=0,o=i,a=e.length;r<a;++r,++o){if(-1===(o=t.indexOf(e[r],o)))return null;n[r]=o}return n}t.findIndices=e,t.matchSumOfSquares=function(t,i,n){void 0===n&&(n=0);var r=e(t,i,n);if(!r)return null;for(var o=0,a=0,s=r.length;a<s;++a){var u=r[a]-n;o+=u*u}return{score:o,indices:r}},t.matchSumOfDeltas=function(t,i,n){void 0===n&&(n=0);var r=e(t,i,n);if(!r)return null;for(var o=0,a=n-1,s=0,u=r.length;s<u;++s){var l=r[s];o+=l-a-1,a=l}return{score:o,indices:r}},t.highlight=function(t,e,i){for(var n=[],r=0,o=0,a=e.length;r<a;){for(var s=e[r],u=e[r];++r<a&&e[r]===u+1;)u++;o<s&&n.push(t.slice(o,s)),s<u+1&&n.push(i(t.slice(s,u+1))),o=u+1}return o<t.length&&n.push(t.slice(o)),n},t.cmp=function(t,e){return t<e?-1:t>e?1:0}}(e.StringExt||(e.StringExt={}))},173:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.take=function(t,e){return new r(n.iter(t),e)};var r=function(){function t(t,e){this._source=t,this._count=e}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.clone(),this._count)},t.prototype.next=function(){if(!(this._count<=0)){var t=this._source.next();if(void 0!==t)return this._count--,t}},t}();e.TakeIterator=r},8280:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(244);e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new r(t.map(n.iter))};var r=function(){function t(t){this._source=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._source.map((function(t){return t.clone()})))},t.prototype.next=function(){for(var t=new Array(this._source.length),e=0,i=this._source.length;e<i;++e){var n=this._source[e].next();if(void 0===n)return;t[e]=n}return t},t}();e.ZipIterator=r},7452:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(4558),o=function(){function t(t){this._root=new n.LeafNode,this.cmp=t}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._root.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){var t=n.firstLeaf(this._root);return t.size>0?t.items[0]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var t=n.lastLeaf(this._root);return t.size>0?t.items[t.size-1]:void 0},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return n.iterItems(this._root)},t.prototype.retro=function(){return n.retroItems(this._root)},t.prototype.slice=function(t,e){return n.sliceItems(this._root,t,e)},t.prototype.retroSlice=function(t,e){return n.retroSliceItems(this._root,t,e)},t.prototype.at=function(t){return n.itemAt(this._root,t)},t.prototype.has=function(t,e){return n.hasItem(this._root,t,e)},t.prototype.indexOf=function(t,e){return n.indexOf(this._root,t,e)},t.prototype.get=function(t,e){return n.getItem(this._root,t,e)},t.prototype.assign=function(t){this.clear(),this.update(t)},t.prototype.insert=function(t){var e=n.insertItem(this._root,t,this.cmp);return this._root=n.maybeSplitRoot(this._root),e},t.prototype.update=function(t){var e=this;r.each(t,(function(t){e.insert(t)}))},t.prototype.delete=function(t,e){var i=n.deleteItem(this._root,t,e);return this._root=n.maybeExtractRoot(this._root),i},t.prototype.remove=function(t){var e=n.removeItem(this._root,t);return this._root=n.maybeExtractRoot(this._root),e},t.prototype.clear=function(){n.clear(this._root),this._root=new n.LeafNode},t}();e.BPlusTree=o,function(t){t.from=function(e,i){var n=new t(i);return n.assign(e),n}}(o=e.BPlusTree||(e.BPlusTree={})),e.BPlusTree=o,function(t){var e=function(){function t(){this.items=[],this.sizes=[],this.children=[]}return Object.defineProperty(t.prototype,"type",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.sizes[this.sizes.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.children.length},enumerable:!0,configurable:!0}),t}();t.BranchNode=e;var i=function(){function t(){this.next=null,this.prev=null,this.items=[]}return Object.defineProperty(t.prototype,"type",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),t}();function n(t){for(;0===t.type;)t=t.children[0];return t}function o(t){for(;0===t.type;)t=t.children[t.children.length-1];return t}function a(t){0===t.type?(r.each(t.children,a),t.children.length=0,t.sizes.length=0,t.items.length=0):(t.items.length=0,t.next=null,t.prev=null)}t.LeafNode=i,t.firstLeaf=n,t.lastLeaf=o,t.iterItems=function(t){var e=n(t);return new l(e,0,-1)},t.retroItems=function(t){var e=o(t);return new h(e,e.size-1,-1)},t.sliceItems=function(t,e,i){e=void 0===e?0:e<0?Math.max(0,e+t.size):Math.min(e,t.size),i=void 0===i?t.size:i<0?Math.max(0,i+t.size):Math.min(i,t.size);var n=Math.max(0,i-e);if(0===n)return r.empty();for(;0===t.type;){var o=c(t.sizes,e);o>0&&(e-=t.sizes[o-1]),t=t.children[o]}return new l(t,e,n)},t.retroSliceItems=function(t,e,i){e=void 0===e?t.size-1:e<0?Math.max(-1,e+t.size):Math.min(e,t.size-1),i=void 0===i?-1:i<0?Math.max(-1,i+t.size):Math.min(i,t.size-1);var n=Math.max(0,e-i);if(0===n)return r.empty();for(;0===t.type;){var o=c(t.sizes,e);o>0&&(e-=t.sizes[o-1]),t=t.children[o]}return new h(t,e,n)},t.itemAt=function(t,e){if(e<0&&(e+=t.size),!(e<0||e>=t.size)){for(;0===t.type;){var i=c(t.sizes,e);i>0&&(e-=t.sizes[i-1]),t=t.children[i]}return t.items[e]}},t.hasItem=function(t,e,i){for(;0===t.type;){var n=f(t.items,e,i);t=t.children[n]}return p(t.items,e,i)>=0},t.indexOf=function(t,e,i){for(var n=0;0===t.type;){var r=f(t.items,e,i);r>0&&(n+=t.sizes[r-1]),t=t.children[r]}var o=p(t.items,e,i);return o>=0?n+o:-n+o},t.getItem=function(t,e,i){for(;0===t.type;){var n=f(t.items,e,i);t=t.children[n]}var r=p(t.items,e,i);return r>=0?t.items[r]:void 0},t.insertItem=function t(e,i,n){if(1===e.type){var o,a=p(e.items,i,n);return a>=0?(o=e.items[a],e.items[a]=i):(o=void 0,r.ArrayExt.insert(e.items,-a-1,i)),o}var u=f(e.items,i,n),l=e.children[u],h=l.size,c=t(l,i,n),y=l.size;if(e.items[u]=l.items[0],h===y)return c;if(l.width>s){var v=g(l);r.ArrayExt.insert(e.children,u+1,v),r.ArrayExt.insert(e.items,u+1,v.items[0])}return d(e,u),c},t.deleteItem=function t(e,i,n){if(1===e.type){var o=p(e.items,i,n);if(o<0)return;return r.ArrayExt.removeAt(e.items,o)}var a=f(e.items,i,n),s=e.children[a],l=s.size,h=t(s,i,n);return l===s.size||(e.items[a]=s.items[0],s.width<u&&(a=y(e,a)),d(e,a)),h},t.removeItem=function t(e,i){if(i<0&&(i+=e.size),!(i<0||i>=e.size)){if(1===e.type)return r.ArrayExt.removeAt(e.items,i);var n=c(e.sizes,i);n>0&&(i-=e.sizes[n]);var o=e.children[n],a=t(o,i);return e.items[n]=o.items[0],o.width<u&&(n=y(e,n)),d(e,n),a}},t.clear=a,t.maybeSplitRoot=function(t){if(t.width<=s)return t;var i=new e,n=g(t);return i.sizes[0]=t.size,i.sizes[1]=t.size+n.size,i.children[0]=t,i.children[1]=n,i.items[0]=t.items[0],i.items[1]=n.items[0],i},t.maybeExtractRoot=function(t){if(1===t.type)return t;if(t.children.length>1)return t;var e=t.children.pop();return a(t),e};var s=32,u=s>>1,l=function(){function t(t,e,i){this._node=t,this._index=e,this._count=i}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node,this._index,this._count)},t.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size?(this._node=this._node.next,this._index=0,this.next()):(this._count>0&&this._count--,this._node.items[this._index++])},t}(),h=function(){function t(t,e,i){this._node=t,this._index=e,this._count=i}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node,this._index,this._count)},t.prototype.next=function(){if(null!==this._node&&0!==this._count)return this._index>=this._node.size&&(this._index=this._node.size-1),this._index<0?(this._node=this._node.prev,this._index=this._node?this._node.size-1:-1,this.next()):(this._count>0&&this._count--,this._node.items[this._index--])},t}();function c(t,e){for(var i=t.length,n=0;n<i;++n)if(t[n]>e)return n;return i-1}function f(t,e,i){for(var n=t.length,r=1;r<n;++r)if(i(t[r],e)>0)return r-1;return n-1}function p(t,e,i){for(var n=t.length,r=0;r<n;++r){var o=i(t[r],e);if(0===o)return r;if(o>0)return-r-1}return-n-1}function d(t,e){for(var i=t.sizes,n=t.children,r=e>0?i[e-1]:0,o=n.length;e<o;++e)r=i[e]=r+n[e].size;i.length=n.length}function g(t){if(1===t.type){for(var n=new i,r=t.items,o=n.items,a=u,s=r.length;a<s;++a)o.push(r[a]);return r.length=u,t.next&&(t.next.prev=n),n.next=t.next,n.prev=t,t.next=n,n}var l=new e,h=t.children,c=l.children;for(a=u,s=h.length;a<s;++a)c.push(h[a]);h.length=u;var f=t.items,p=l.items;for(a=u,s=f.length;a<s;++a)p.push(f[a]);return f.length=u,d(t,u),d(l,0),l}function y(t,e){var i,n,o,s,l,h,c=t.children[e],f=0===e?t.children[e+1]:t.children[e-1],p=0===e,g=1===c.type,y=f.width>u;if(g&&y&&p){var v=f;return(m=c).items.push(v.items.shift()),t.items[e+1]=v.items[0],e}if(g&&y&&!p)return v=f,(m=c).items.unshift(v.items.pop()),t.items[e]=m.items[0],e-1;if(g&&!y&&p){var m=c;return(i=(v=f).items).unshift.apply(i,m.items),r.ArrayExt.removeAt(t.children,e),r.ArrayExt.removeAt(t.items,e+1),m.prev&&(m.prev.next=v),v.prev=m.prev,a(m),e}if(g&&!y&&!p)return m=c,(n=(v=f).items).push.apply(n,m.items),r.ArrayExt.removeAt(t.children,e),r.ArrayExt.removeAt(t.items,e),m.next&&(m.next.prev=v),v.next=m.next,a(m),e-1;if(!g&&y&&p)return v=f,(m=c).children.push(v.children.shift()),m.items.push(v.items.shift()),t.items[e+1]=v.items[0],d(m,m.width-1),d(v,0),e;if(!g&&y&&!p)return v=f,(m=c).children.unshift(v.children.pop()),m.items.unshift(v.items.pop()),t.items[e]=m.items[0],d(m,0),d(v,v.width-1),e-1;if(!g&&!y&&p)return m=c,(o=(v=f).children).unshift.apply(o,m.children),(s=v.items).unshift.apply(s,m.items),r.ArrayExt.removeAt(t.children,e),r.ArrayExt.removeAt(t.items,e+1),d(v,0),m.children.length=0,a(m),e;if(!g&&!y&&!p)return m=c,(l=(v=f).children).push.apply(l,m.children),(h=v.items).push.apply(h,m.items),r.ArrayExt.removeAt(t.children,e),r.ArrayExt.removeAt(t.items,e),d(v,0),m.children.length=0,a(m),e-1;throw"unreachable"}}(n||(n={}))},8699:(t,e,i)=>{"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(7452)),n(i(8723))},8723:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(4558),o=function(){function t(){this._first=null,this._last=null,this._size=0}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first?this._first.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last?this._last.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstNode",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastNode",{get:function(){return this._last},enumerable:!0,configurable:!0}),t.prototype.iter=function(){return new t.ForwardValueIterator(this._first)},t.prototype.retro=function(){return new t.RetroValueIterator(this._last)},t.prototype.nodes=function(){return new t.ForwardNodeIterator(this._first)},t.prototype.retroNodes=function(){return new t.RetroNodeIterator(this._last)},t.prototype.assign=function(t){var e=this;this.clear(),r.each(t,(function(t){e.addLast(t)}))},t.prototype.push=function(t){this.addLast(t)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(t){this.addFirst(t)},t.prototype.unshift=function(){return this.removeFirst()},t.prototype.addFirst=function(t){var e=new n.LinkedListNode(this,t);return this._first?(e.next=this._first,this._first.prev=e,this._first=e):(this._first=e,this._last=e),this._size++,e},t.prototype.addLast=function(t){var e=new n.LinkedListNode(this,t);return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,e},t.prototype.insertBefore=function(t,e){if(!e||e===this._first)return this.addFirst(t);if(!(e instanceof n.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var i=new n.LinkedListNode(this,t),r=e,o=r.prev;return i.next=r,i.prev=o,r.prev=i,o.next=i,this._size++,i},t.prototype.insertAfter=function(t,e){if(!e||e===this._last)return this.addLast(t);if(!(e instanceof n.LinkedListNode)||e.list!==this)throw new Error("Reference node is not owned by the list.");var i=new n.LinkedListNode(this,t),r=e,o=r.next;return i.next=o,i.prev=r,r.next=i,o.prev=i,this._size++,i},t.prototype.removeFirst=function(){var t=this._first;if(t)return t===this._last?(this._first=null,this._last=null):(this._first=t.next,this._first.prev=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},t.prototype.removeLast=function(){var t=this._last;if(t)return t===this._first?(this._first=null,this._last=null):(this._last=t.prev,this._last.next=null),t.list=null,t.next=null,t.prev=null,this._size--,t.value},t.prototype.removeNode=function(t){if(!(t instanceof n.LinkedListNode)||t.list!==this)throw new Error("Node is not owned by the list.");var e=t;e===this._first&&e===this._last?(this._first=null,this._last=null):e===this._first?(this._first=e.next,this._first.prev=null):e===this._last?(this._last=e.prev,this._last.next=null):(e.next.prev=e.prev,e.prev.next=e.next),e.list=null,e.next=null,e.prev=null,this._size--},t.prototype.clear=function(){for(var t=this._first;t;){var e=t.next;t.list=null,t.prev=null,t.next=null,t=e}this._first=null,this._last=null,this._size=0},t}();e.LinkedList=o,function(t){t.from=function(e){var i=new t;return i.assign(e),i};var e=function(){function t(t){this._node=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node)},t.prototype.next=function(){if(this._node){var t=this._node;return this._node=t.next,t.value}},t}();t.ForwardValueIterator=e;var i=function(){function t(t){this._node=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node)},t.prototype.next=function(){if(this._node){var t=this._node;return this._node=t.prev,t.value}},t}();t.RetroValueIterator=i;var n=function(){function t(t){this._node=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node)},t.prototype.next=function(){if(this._node){var t=this._node;return this._node=t.next,t}},t}();t.ForwardNodeIterator=n;var r=function(){function t(t){this._node=t}return t.prototype.iter=function(){return this},t.prototype.clone=function(){return new t(this._node)},t.prototype.next=function(){if(this._node){var t=this._node;return this._node=t.prev,t}},t}();t.RetroNodeIterator=r}(o=e.LinkedList||(e.LinkedList={})),e.LinkedList=o,function(t){t.LinkedListNode=function(t,e){this.list=null,this.next=null,this.prev=null,this.list=t,this.value=e}}(n||(n={}))},3842:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(4558),o=i(6539),a=i(6458),s=i(9847),u=i(4125),l=i(5932),h=function(){function t(){this._timerID=0,this._replaying=!1,this._keystrokes=[],this._keydownEvents=[],this._keyBindings=[],this._exactKeyMatch=null,this._commands=Object.create(null),this._commandChanged=new l.Signal(this),this._commandExecuted=new l.Signal(this),this._keyBindingChanged=new l.Signal(this)}return Object.defineProperty(t.prototype,"commandChanged",{get:function(){return this._commandChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commandExecuted",{get:function(){return this._commandExecuted},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindingChanged",{get:function(){return this._keyBindingChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBindings",{get:function(){return this._keyBindings},enumerable:!0,configurable:!0}),t.prototype.listCommands=function(){return Object.keys(this._commands)},t.prototype.hasCommand=function(t){return t in this._commands},t.prototype.addCommand=function(t,e){var i=this;if(t in this._commands)throw new Error("Command '"+t+"' already registered.");return this._commands[t]=n.createCommand(e),this._commandChanged.emit({id:t,type:"added"}),new a.DisposableDelegate((function(){delete i._commands[t],i._commandChanged.emit({id:t,type:"removed"})}))},t.prototype.notifyCommandChanged=function(t){if(void 0!==t&&!(t in this._commands))throw new Error("Command '"+t+"' is not registered.");this._commandChanged.emit({id:t,type:t?"changed":"many-changed"})},t.prototype.label=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.label.call(void 0,e):""},t.prototype.mnemonic=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.mnemonic.call(void 0,e):-1},t.prototype.icon=function(t,e){return void 0===e&&(e=o.JSONExt.emptyObject),this.iconClass(t,e)},t.prototype.iconClass=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.iconClass.call(void 0,e):""},t.prototype.iconLabel=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.iconLabel.call(void 0,e):""},t.prototype.caption=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.caption.call(void 0,e):""},t.prototype.usage=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.usage.call(void 0,e):""},t.prototype.className=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.className.call(void 0,e):""},t.prototype.dataset=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return i?i.dataset.call(void 0,e):{}},t.prototype.isEnabled=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return!!i&&i.isEnabled.call(void 0,e)},t.prototype.isToggled=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return!!i&&i.isToggled.call(void 0,e)},t.prototype.isVisible=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i=this._commands[t];return!!i&&i.isVisible.call(void 0,e)},t.prototype.execute=function(t,e){void 0===e&&(e=o.JSONExt.emptyObject);var i,n=this._commands[t];if(!n)return Promise.reject(new Error("Command '"+t+"' not registered."));try{i=n.execute.call(void 0,e)}catch(t){i=Promise.reject(t)}var r=Promise.resolve(i);return this._commandExecuted.emit({id:t,args:e,result:r}),r},t.prototype.addKeyBinding=function(t){var e=this,i=n.createKeyBinding(t);return this._keyBindings.push(i),this._keyBindingChanged.emit({binding:i,type:"added"}),new a.DisposableDelegate((function(){r.ArrayExt.removeFirstOf(e._keyBindings,i),e._keyBindingChanged.emit({binding:i,type:"removed"})}))},t.prototype.processKeydownEvent=function(e){if(!this._replaying){var i=t.keystrokeForKeydownEvent(e);if(!i)return this._replayKeydownEvents(),void this._clearPendingState();this._keystrokes.push(i);var r=n.matchKeyBinding(this._keyBindings,this._keystrokes,e),o=r.exact,a=r.partial;if(!o&&!a)return this._replayKeydownEvents(),void this._clearPendingState();if(e.preventDefault(),e.stopPropagation(),o&&!a)return this._executeKeyBinding(o),void this._clearPendingState();o&&(this._exactKeyMatch=o),this._keydownEvents.push(e),this._startTimer()}},t.prototype._startTimer=function(){var t=this;this._clearTimer(),this._timerID=window.setTimeout((function(){t._onPendingTimeout()}),n.CHORD_TIMEOUT)},t.prototype._clearTimer=function(){0!==this._timerID&&(clearTimeout(this._timerID),this._timerID=0)},t.prototype._replayKeydownEvents=function(){0!==this._keydownEvents.length&&(this._replaying=!0,this._keydownEvents.forEach(n.replayKeyEvent),this._replaying=!1)},t.prototype._executeKeyBinding=function(t){var e=t.command,i=t.args;if(this.hasCommand(e)&&this.isEnabled(e,i))this.execute(e,i);else{var n=this.hasCommand(e)?"enabled":"registered",r="Cannot execute key binding '"+t.keys.join(", ")+"':",o="command '"+e+"' is not "+n+".";console.warn(r+" "+o)}},t.prototype._clearPendingState=function(){this._clearTimer(),this._exactKeyMatch=null,this._keystrokes.length=0,this._keydownEvents.length=0},t.prototype._onPendingTimeout=function(){this._timerID=0,this._exactKeyMatch?this._executeKeyBinding(this._exactKeyMatch):this._replayKeydownEvents(),this._clearPendingState()},t}();e.CommandRegistry=h,function(t){function e(t){for(var e="",i=!1,n=!1,r=!1,o=!1,a=0,u=t.split(/\s+/);a<u.length;a++){var l=u[a];"Accel"===l?s.Platform.IS_MAC?n=!0:r=!0:"Alt"===l?i=!0:"Cmd"===l?n=!0:"Ctrl"===l?r=!0:"Shift"===l?o=!0:l.length>0&&(e=l)}return{cmd:n,ctrl:r,alt:i,shift:o,key:e}}t.parseKeystroke=e,t.normalizeKeystroke=function(t){var i="",n=e(t);return n.ctrl&&(i+="Ctrl "),n.alt&&(i+="Alt "),n.shift&&(i+="Shift "),n.cmd&&s.Platform.IS_MAC&&(i+="Cmd "),i+n.key},t.formatKeystroke=function(t){var i="",n=e(t);return s.Platform.IS_MAC?(n.ctrl&&(i+=" "),n.alt&&(i+=" "),n.shift&&(i+=" "),n.cmd&&(i+=" ")):(n.ctrl&&(i+="Ctrl+"),n.alt&&(i+="Alt+"),n.shift&&(i+="Shift+")),i+n.key},t.keystrokeForKeydownEvent=function(t){var e=u.getKeyboardLayout().keyForKeydownEvent(t);if(!e)return"";var i="";return t.ctrlKey&&(i+="Ctrl "),t.altKey&&(i+="Alt "),t.shiftKey&&(i+="Shift "),t.metaKey&&s.Platform.IS_MAC&&(i+="Cmd "),i+e}}(h=e.CommandRegistry||(e.CommandRegistry={})),e.CommandRegistry=h,function(t){t.CHORD_TIMEOUT=1e3,t.createCommand=function(t){return{execute:t.execute,label:u(t.label,e),mnemonic:u(t.mnemonic,i),iconClass:u(t.iconClass||t.icon,e),iconLabel:u(t.iconLabel,e),caption:u(t.caption,e),usage:u(t.usage,e),className:u(t.className,e),dataset:u(t.dataset,a),isEnabled:t.isEnabled||n,isToggled:t.isToggled||r,isVisible:t.isVisible||n}},t.createKeyBinding=function(t){return{keys:l(t),selector:c(t),command:t.command,args:t.args||o.JSONExt.emptyObject}},t.matchKeyBinding=function(t,e,i){for(var n=null,r=!1,o=1/0,a=0,u=0,l=t.length;u<l;++u){var h=t[u],c=f(h.keys,e);if(0!==c)if(2!==c){var d=p(h.selector,i);if(!(-1===d||d>o)){var g=s.Selector.calculateSpecificity(h.selector);(!n||d<o||g>=a)&&(n=h,o=d,a=g)}}else r||-1===p(h.selector,i)||(r=!0)}return{exact:n,partial:r}},t.replayKeyEvent=function(t){t.target.dispatchEvent(function(t){var e=document.createEvent("Event"),i=t.bubbles||!0,n=t.cancelable||!0;return e.initEvent(t.type||"keydown",i,n),e.key=t.key||"",e.keyCode=t.keyCode||0,e.which=t.keyCode||0,e.ctrlKey=t.ctrlKey||!1,e.altKey=t.altKey||!1,e.shiftKey=t.shiftKey||!1,e.metaKey=t.metaKey||!1,e.view=t.view||window,e}(t))};var e=function(){return""},i=function(){return-1},n=function(){return!0},r=function(){return!1},a=function(){return{}};function u(t,e){return void 0===t?e:"function"==typeof t?t:function(){return t}}function l(t){return(s.Platform.IS_WIN?t.winKeys||t.keys:s.Platform.IS_MAC?t.macKeys||t.keys:t.linuxKeys||t.keys).map(h.normalizeKeystroke)}function c(t){if(-1!==t.selector.indexOf(","))throw new Error("Selector cannot contain commas: "+t.selector);if(!s.Selector.isValid(t.selector))throw new Error("Invalid selector: "+t.selector);return t.selector}function f(t,e){if(t.length<e.length)return 0;for(var i=0,n=e.length;i<n;++i)if(t[i]!==e[i])return 0;return t.length>e.length?2:1}function p(t,e){for(var i=e.target,n=e.currentTarget,r=0;null!==i;i=i.parentElement,++r){if(s.Selector.matches(i,t))return r;if(i===n)return-1}return-1}}(n||(n={}))},6539:(t,e,i)=>{"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(1341)),n(i(9676)),n(i(3356)),n(i(7695)),n(i(8463)),n(i(3051))},1341:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function e(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t}function i(t){return Array.isArray(t)}t.emptyObject=Object.freeze({}),t.emptyArray=Object.freeze([]),t.isPrimitive=e,t.isArray=i,t.isObject=function(t){return!e(t)&&!i(t)},t.deepEqual=function t(n,r){if(n===r)return!0;if(e(n)||e(r))return!1;var o=i(n),a=i(r);return o===a&&(o&&a?function(e,i){if(e===i)return!0;if(e.length!==i.length)return!1;for(var n=0,r=e.length;n<r;++n)if(!t(e[n],i[n]))return!1;return!0}(n,r):function(e,i){if(e===i)return!0;for(var n in e)if(!(n in i))return!1;for(var n in i)if(!(n in e))return!1;for(var n in e)if(!t(e[n],i[n]))return!1;return!0}(n,r))},t.deepCopy=function t(n){return e(n)?n:i(n)?function(e){for(var i=new Array(e.length),n=0,r=e.length;n<r;++n)i[n]=t(e[n]);return i}(n):function(e){var i={};for(var n in e)i[n]=t(e[n]);return i}(n)}}(e.JSONExt||(e.JSONExt={}))},9676:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this._types=[],this._values=[]}return t.prototype.types=function(){return this._types.slice()},t.prototype.hasData=function(t){return-1!==this._types.indexOf(t)},t.prototype.getData=function(t){var e=this._types.indexOf(t);return-1!==e?this._values[e]:void 0},t.prototype.setData=function(t,e){this.clearData(t),this._types.push(t),this._values.push(e)},t.prototype.clearData=function(t){var e=this._types.indexOf(t);-1!==e&&(this._types.splice(e,1),this._values.splice(e,1))},t.prototype.clear=function(){this._types.length=0,this._values.length=0},t}();e.MimeData=i},3356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var t=this;this.promise=new Promise((function(e,i){t._resolve=e,t._reject=i}))}return t.prototype.resolve=function(t){(0,this._resolve)(t)},t.prototype.reject=function(t){(0,this._reject)(t)},t}();e.PromiseDelegate=i},7695:(t,e,i)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(e.Random||(e.Random={})).getRandomValues=(n="undefined"!=typeof window&&(window.crypto||window.msCrypto)||i(5835)||null)&&"function"==typeof n.getRandomValues?function(t){return n.getRandomValues(t)}:n&&"function"==typeof n.randomFillSync?function(t){return n.randomFillSync(t)}:n&&"function"==typeof n.randomBytes?function(t){for(var e=n.randomBytes(t.length),i=0,r=e.length;i<r;++i)t[i]=e[i]}:function(t){for(var e=0,i=0,n=t.length;i<n;++i)i%4==0&&(e=4294967295*Math.random()>>>0),t[i]=255&e,e>>>=8}},8463:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Token=function(t){this.name=t,this._tokenStructuralPropertyT=null}},3051:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7695);(e.UUID||(e.UUID={})).uuid4=function(){for(var t=new Uint8Array(16),e=new Array(256),i=0;i<16;++i)e[i]="0"+i.toString(16);for(i=16;i<256;++i)e[i]=i.toString(16);return function(){return n.Random.getRandomValues(t),t[6]=64|15&t[6],t[8]=128|63&t[8],e[t[0]]+e[t[1]]+e[t[2]]+e[t[3]]+"-"+e[t[4]]+e[t[5]]+"-"+e[t[6]]+e[t[7]]+"-"+e[t[8]]+e[t[9]]+"-"+e[t[10]]+e[t[11]]+e[t[12]]+e[t[13]]+e[t[14]]+e[t[15]]}}()},6458:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4558),a=i(5932),s=function(){function t(t){this._fn=t}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return!this._fn},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){if(this._fn){var t=this._fn;this._fn=null,t()}},t}();e.DisposableDelegate=s;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._disposed=new a.Signal(e),e}return r(e,t),Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),a.Signal.clearData(this))},e}(s);e.ObservableDisposableDelegate=u;var l=function(){function t(){this._isDisposed=!1,this._items=new Set}return Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._items.forEach((function(t){t.dispose()})),this._items.clear())},t.prototype.contains=function(t){return this._items.has(t)},t.prototype.add=function(t){this._items.add(t)},t.prototype.remove=function(t){this._items.delete(t)},t.prototype.clear=function(){this._items.clear()},t}();e.DisposableSet=l,function(t){t.from=function(e){var i=new t;return o.each(e,(function(t){i.add(t)})),i}}(l=e.DisposableSet||(e.DisposableSet={})),e.DisposableSet=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._disposed=new a.Signal(e),e}return r(e,t),Object.defineProperty(e.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.isDisposed||(t.prototype.dispose.call(this),this._disposed.emit(void 0),a.Signal.clearData(this))},e}(l);e.ObservableDisposableSet=h,function(t){t.from=function(e){var i=new t;return o.each(e,(function(t){i.add(t)})),i}}(h=e.ObservableDisposableSet||(e.ObservableDisposableSet={})),e.ObservableDisposableSet=h},25:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(e.ClipboardExt||(e.ClipboardExt={})).copyText=function(t){var e=document.body,i=function(n){n.preventDefault(),n.stopPropagation(),n.clipboardData.setData("text",t),e.removeEventListener("copy",i,!0)};e.addEventListener("copy",i,!0),document.execCommand("copy")}},6398:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.ElementExt||(e.ElementExt={})).boxSizing=function(t){var e=window.getComputedStyle(t),i=parseFloat(e.borderTopWidth)||0,n=parseFloat(e.borderLeftWidth)||0,r=parseFloat(e.borderRightWidth)||0,o=parseFloat(e.borderBottomWidth)||0,a=parseFloat(e.paddingTop)||0,s=parseFloat(e.paddingLeft)||0,u=parseFloat(e.paddingRight)||0,l=parseFloat(e.paddingBottom)||0;return{borderTop:i,borderLeft:n,borderRight:r,borderBottom:o,paddingTop:a,paddingLeft:s,paddingRight:u,paddingBottom:l,horizontalSum:n+s+u+r,verticalSum:i+a+l+o}},i.sizeLimits=function(t){var e=window.getComputedStyle(t),i=parseFloat(e.minWidth)||0,n=parseFloat(e.minHeight)||0,r=parseFloat(e.maxWidth)||1/0,o=parseFloat(e.maxHeight)||1/0;return{minWidth:i,minHeight:n,maxWidth:r=Math.max(i,r),maxHeight:o=Math.max(n,o)}},i.hitTest=function(t,e,i){var n=t.getBoundingClientRect();return e>=n.left&&e<n.right&&i>=n.top&&i<n.bottom},i.scrollIntoViewIfNeeded=function(t,e){var i=t.getBoundingClientRect(),n=e.getBoundingClientRect();n.top<=i.top&&n.bottom>=i.bottom||(n.top<i.top&&n.height<=i.height||n.bottom>i.bottom&&n.height>=i.height?t.scrollTop-=i.top-n.top:(n.top<i.top&&n.height>i.height||n.bottom>i.bottom&&n.height<i.height)&&(t.scrollTop-=i.bottom-n.bottom))}},9847:(t,e,i)=>{"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(25)),n(i(6398)),n(i(2115)),n(i(6316))},2115:(t,e)=>{"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),(i=e.Platform||(e.Platform={})).IS_MAC=!!navigator.platform.match(/Mac/i),i.IS_WIN=!!navigator.platform.match(/Win/i),i.IS_IE=/Trident/.test(navigator.userAgent),i.IS_EDGE=/Edge/.test(navigator.userAgent),i.accelKey=function(t){return i.IS_MAC?t.metaKey:t.ctrlKey}},6316:(t,e)=>{"use strict";var i,n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.Selector||(e.Selector={})).calculateSpecificity=function(t){if(t in i.specificityCache)return i.specificityCache[t];var e=i.calculateSingle(t);return i.specificityCache[t]=e},n.isValid=function(t){if(t in i.validityCache)return i.validityCache[t];var e=!0;try{i.testElem.querySelector(t)}catch(t){e=!1}return i.validityCache[t]=e},n.matches=function(t,e){return i.protoMatchFunc.call(t,e)},function(t){var e;t.specificityCache=Object.create(null),t.validityCache=Object.create(null),t.testElem=document.createElement("div"),t.protoMatchFunc=(e=Element.prototype).matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(t){var e=this.ownerDocument.querySelectorAll(t);return-1!==Array.prototype.indexOf.call(e,this)},t.calculateSingle=function(t){var e=0,h=0,c=0;function f(e){var i=t.match(e);return null!==i&&(t=t.slice(i[0].length),!0)}for(t=(t=t.split(",",1)[0]).replace(l," $1 ");t.length>0;)if(f(i))e++;else if(f(n))h++;else if(f(r))h++;else if(f(a))c++;else if(f(s))h++;else if(f(o))c++;else if(!f(u))return 0;return(e=Math.min(e,255))<<16|(h=Math.min(h,255))<<8|Math.min(c,255)};var i=/^#[^\s\+>~#\.\[:]+/,n=/^\.[^\s\+>~#\.\[:]+/,r=/^\[[^\]]+\]/,o=/^[^\s\+>~#\.\[:]+/,a=/^(::[^\s\+>~#\.\[:]+|:first-line|:first-letter|:before|:after)/,s=/^:[^\s\+>~#\.\[:]+/,u=/^[\s\+>~\*]+/,l=/:not\(([^\)]+)\)/g}(i||(i={}))},4177:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(6458),o=function(){function t(t){var e=this;this._onScrollFrame=function(){if(e._scrollTarget){var t=e._scrollTarget,i=t.element,r=t.edge,o=t.distance,a=n.SCROLL_EDGE_SIZE-o,s=Math.pow(a/n.SCROLL_EDGE_SIZE,2),u=Math.max(1,Math.round(s*n.SCROLL_EDGE_SIZE));switch(r){case"top":i.scrollTop-=u;break;case"left":i.scrollLeft-=u;break;case"right":i.scrollLeft+=u;break;case"bottom":i.scrollTop+=u}requestAnimationFrame(e._onScrollFrame)}},this._disposed=!1,this._dropAction="none",this._override=null,this._currentTarget=null,this._currentElement=null,this._promise=null,this._scrollTarget=null,this._resolve=null,this.mimeData=t.mimeData,this.dragImage=t.dragImage||null,this.proposedAction=t.proposedAction||"copy",this.supportedActions=t.supportedActions||"all",this.source=t.source||null}return t.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,this._currentTarget){var t=n.createMouseEvent("mouseup",-1,-1);n.dispatchDragLeave(this,this._currentTarget,null,t)}this._finalize("none")}},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),t.prototype.start=function(t,e){var i=this;if(this._disposed)return Promise.resolve("none");if(this._promise)return this._promise;this._addListeners(),this._attachDragImage(t,e),this._promise=new Promise((function(t,e){i._resolve=t}));var r=n.createMouseEvent("mousemove",t,e);return document.dispatchEvent(r),this._promise},t.prototype.handleEvent=function(t){switch(t.type){case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;default:t.preventDefault(),t.stopPropagation()}},t.prototype._evtMouseMove=function(t){t.preventDefault(),t.stopPropagation(),this._updateCurrentTarget(t),this._updateDragScroll(t),this._moveDragImage(t.clientX,t.clientY)},t.prototype._evtMouseUp=function(t){if(t.preventDefault(),t.stopPropagation(),0===t.button)if(this._updateCurrentTarget(t),this._currentTarget){if("none"===this._dropAction)return n.dispatchDragLeave(this,this._currentTarget,null,t),void this._finalize("none");var e=n.dispatchDrop(this,this._currentTarget,t);this._finalize(e)}else this._finalize("none")},t.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),27===t.keyCode&&this.dispose()},t.prototype._addListeners=function(){document.addEventListener("mousedown",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mouseenter",this,!0),document.addEventListener("mouseleave",this,!0),document.addEventListener("mouseover",this,!0),document.addEventListener("mouseout",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("keyup",this,!0),document.addEventListener("keypress",this,!0),document.addEventListener("contextmenu",this,!0)},t.prototype._removeListeners=function(){document.removeEventListener("mousedown",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mouseenter",this,!0),document.removeEventListener("mouseleave",this,!0),document.removeEventListener("mouseover",this,!0),document.removeEventListener("mouseout",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("keyup",this,!0),document.removeEventListener("keypress",this,!0),document.removeEventListener("contextmenu",this,!0)},t.prototype._updateDragScroll=function(t){var e=n.findScrollTarget(t);(this._scrollTarget||e)&&(this._scrollTarget||setTimeout(this._onScrollFrame,500),this._scrollTarget=e)},t.prototype._updateCurrentTarget=function(t){var e=this._currentTarget,i=this._currentTarget,r=this._currentElement,o=document.elementFromPoint(t.clientX,t.clientY);this._currentElement=o,o!==r&&o!==i&&n.dispatchDragExit(this,i,o,t),o!==r&&o!==i&&(i=n.dispatchDragEnter(this,o,i,t)),i!==e&&(this._currentTarget=i,n.dispatchDragLeave(this,e,i,t));var a=n.dispatchDragOver(this,i,t);this._setDropAction(a)},t.prototype._attachDragImage=function(t,e){if(this.dragImage){this.dragImage.classList.add("p-mod-drag-image");var i=this.dragImage.style;i.pointerEvents="none",i.position="fixed",i.top=e+"px",i.left=t+"px",document.body.appendChild(this.dragImage)}},t.prototype._moveDragImage=function(t,e){if(this.dragImage){var i=this.dragImage.style;i.top=e+"px",i.left=t+"px"}},t.prototype._detachDragImage=function(){if(this.dragImage){var t=this.dragImage.parentNode;t&&t.removeChild(this.dragImage)}},t.prototype._setDropAction=function(e){if(e=n.validateAction(e,this.supportedActions),!this._override||this._dropAction!==e)switch(e){case"none":this._dropAction=e,this._override=t.overrideCursor("no-drop");break;case"copy":this._dropAction=e,this._override=t.overrideCursor("copy");break;case"link":this._dropAction=e,this._override=t.overrideCursor("alias");break;case"move":this._dropAction=e,this._override=t.overrideCursor("move")}},t.prototype._finalize=function(t){var e=this._resolve;this._removeListeners(),this._detachDragImage(),this._override&&(this._override.dispose(),this._override=null),this.mimeData.clear(),this._disposed=!0,this._dropAction="none",this._currentTarget=null,this._currentElement=null,this._scrollTarget=null,this._promise=null,this._resolve=null,e&&e(t)},t}();e.Drag=o,function(t){t.overrideCursor=function(t){var i=++e;return document.body.style.cursor=t,document.body.classList.add("p-mod-override-cursor"),new r.DisposableDelegate((function(){i===e&&(document.body.style.cursor="",document.body.classList.remove("p-mod-override-cursor"))}))};var e=0}(o=e.Drag||(e.Drag={})),e.Drag=o,function(t){t.SCROLL_EDGE_SIZE=20,t.validateAction=function(t,n){return e[t]&i[n]?t:"none"},t.createMouseEvent=function(t,e,i){var n=document.createEvent("MouseEvent");return n.initMouseEvent(t,!0,!0,window,0,0,0,e,i,!1,!1,!1,!1,0,null),n},t.findScrollTarget=function(e){for(var i=e.clientX,n=e.clientY,r=document.elementFromPoint(i,n);r;r=r.parentElement)if(r.hasAttribute("data-p-dragscroll")){var o=0,a=0;r===document.body&&(o=window.pageXOffset,a=window.pageYOffset);var s=r.getBoundingClientRect(),u=s.top+a,l=s.left+o,h=l+s.width,c=u+s.height;if(!(i<l||i>=h||n<u||n>=c)){var f=i-l+1,p=n-u+1,d=h-i,g=c-n,y=Math.min(f,p,d,g);if(!(y>t.SCROLL_EDGE_SIZE)){var v=void 0;switch(y){case g:v="bottom";break;case p:v="top";break;case d:v="right";break;case f:v="left";break;default:throw"unreachable"}var m=r.scrollWidth-r.clientWidth,b=r.scrollHeight-r.clientHeight,_=void 0;switch(v){case"top":_=b>0&&r.scrollTop>0;break;case"left":_=m>0&&r.scrollLeft>0;break;case"right":_=m>0&&r.scrollLeft<m;break;case"bottom":_=b>0&&r.scrollTop<b;break;default:throw"unreachable"}if(_)return{element:r,edge:v,distance:y}}}}return null},t.dispatchDragEnter=function(t,e,i,r){if(!e)return null;var o=n("p-dragenter",t,r,i);return e.dispatchEvent(o)?e===document.body?i:(o=n("p-dragenter",t,r,i),document.body.dispatchEvent(o),document.body):e},t.dispatchDragExit=function(t,e,i,r){if(e){var o=n("p-dragexit",t,r,i);e.dispatchEvent(o)}},t.dispatchDragLeave=function(t,e,i,r){if(e){var o=n("p-dragleave",t,r,i);e.dispatchEvent(o)}},t.dispatchDragOver=function(t,e,i){if(!e)return"none";var r=n("p-dragover",t,i,null);return e.dispatchEvent(r)?"none":r.dropAction},t.dispatchDrop=function(t,e,i){if(!e)return"none";var r=n("p-drop",t,i,null);return e.dispatchEvent(r)?"none":r.dropAction};var e={none:0,copy:1,link:2,move:4},i={none:e.none,copy:e.copy,link:e.link,move:e.move,"copy-link":e.copy|e.link,"copy-move":e.copy|e.move,"link-move":e.link|e.move,all:e.copy|e.link|e.move};function n(t,e,i,n){var r=document.createEvent("MouseEvent");return r.initMouseEvent(t,!0,!0,window,0,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,n),r.dropAction="none",r.mimeData=e.mimeData,r.proposedAction=e.proposedAction,r.supportedActions=e.supportedActions,r.source=e.source,r}}(n||(n={}))},4125:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyboardLayout=function(){return i.keyboardLayout},e.setKeyboardLayout=function(t){i.keyboardLayout=t};var i,n=function(){function t(e,i){this.name=e,this._codes=i,this._keys=t.extractKeys(i)}return t.prototype.keys=function(){return Object.keys(this._keys)},t.prototype.isValidKey=function(t){return t in this._keys},t.prototype.keyForKeydownEvent=function(t){return this._codes[t.keyCode]||""},t}();e.KeycodeLayout=n,function(t){t.extractKeys=function(t){var e=Object.create(null);for(var i in t)e[t[i]]=!0;return e}}(n=e.KeycodeLayout||(e.KeycodeLayout={})),e.KeycodeLayout=n,e.EN_US=new n("en-us",{8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}),function(t){t.keyboardLayout=e.EN_US}(i||(i={}))},6938:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4558),a=i(8699),s=function(){function t(t){this.type=t}return Object.defineProperty(t.prototype,"isConflatable",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.conflate=function(t){return!1},t}();e.Message=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"isConflatable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.conflate=function(t){return!0},e}(s);e.ConflatableMessage=u,function(t){function e(t,e){var i=n.get(t);if(i&&0!==i.length){var r=o.every(o.retro(i),(function(i){return!i||function(t,e,i){var n=!0;try{n="function"==typeof t?t(e,i):t.messageHook(e,i)}catch(t){s(t)}return n}(i,t,e)}));r&&f(t,e)}else f(t,e)}t.sendMessage=e,t.postMessage=function(t,e){e.isConflatable&&o.some(i,(function(i){return i.handler===t&&!!i.msg&&i.msg.type===e.type&&!!i.msg.isConflatable&&i.msg.conflate(e)}))||function(t,e){i.addLast({handler:t,msg:e}),0===u&&(u=h(p))}(t,e)},t.installMessageHook=function(t,e){var i=n.get(t);i&&-1!==i.indexOf(e)||(i?i.push(e):n.set(t,[e]))},t.removeMessageHook=function(t,e){var i=n.get(t);if(i){var r=i.indexOf(e);-1!==r&&(i[r]=null,d(i))}},t.clearData=function(t){var e=n.get(t);e&&e.length>0&&(o.ArrayExt.fill(e,null),d(e)),o.each(i,(function(e){e.handler===t&&(e.handler=null,e.msg=null)}))},t.flush=function(){l||0===u||(c(u),l=!0,p(),l=!1)},t.getExceptionHandler=function(){return s},t.setExceptionHandler=function(t){var e=s;return s=t,e};var i=new a.LinkedList,n=new WeakMap,r=new Set,s=function(t){console.error(t)},u=0,l=!1,h="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate,c="function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearImmediate;function f(t,e){try{t.processMessage(e)}catch(t){s(t)}}function p(){if(u=0,!i.isEmpty){var t={handler:null,msg:null};for(i.addLast(t);;){var n=i.removeFirst();if(n===t)return;n.handler&&n.msg&&e(n.handler,n.msg)}}}function d(t){0===r.size&&h(g),r.add(t)}function g(){r.forEach(y),r.clear()}function y(t){o.ArrayExt.removeAllWhere(t,v)}function v(t){return null===t}}(e.MessageLoop||(e.MessageLoop={}))},17:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,n=function(){function t(t){this._pid=i.nextPID(),this.name=t.name,this._create=t.create,this._coerce=t.coerce||null,this._compare=t.compare||null,this._changed=t.changed||null}return t.prototype.get=function(t){var e=i.ensureMap(t);return this._pid in e?e[this._pid]:e[this._pid]=this._createValue(t)},t.prototype.set=function(t,e){var n,r=i.ensureMap(t);n=this._pid in r?r[this._pid]:r[this._pid]=this._createValue(t);var o=this._coerceValue(t,e);this._maybeNotify(t,n,r[this._pid]=o)},t.prototype.coerce=function(t){var e,n=i.ensureMap(t);e=this._pid in n?n[this._pid]:n[this._pid]=this._createValue(t);var r=this._coerceValue(t,e);this._maybeNotify(t,e,n[this._pid]=r)},t.prototype._createValue=function(t){return(0,this._create)(t)},t.prototype._coerceValue=function(t,e){var i=this._coerce;return i?i(t,e):e},t.prototype._compareValue=function(t,e){var i=this._compare;return i?i(t,e):t===e},t.prototype._maybeNotify=function(t,e,i){var n=this._changed;n&&!this._compareValue(e,i)&&n(t,e,i)},t}();e.AttachedProperty=n,function(t){t.clearData=function(t){i.ownerData.delete(t)}}(n=e.AttachedProperty||(e.AttachedProperty={})),e.AttachedProperty=n,function(t){var e;t.ownerData=new WeakMap,t.nextPID=(e=0,function(){return"pid-"+(""+Math.random()).slice(2)+"-"+e++}),t.ensureMap=function(e){var i=t.ownerData.get(e);return i||(i=Object.create(null),t.ownerData.set(e,i),i)}}(i||(i={}))},5932:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(4558),o=function(){function t(t){this.sender=t}return t.prototype.connect=function(t,e){return n.connect(this,t,e)},t.prototype.disconnect=function(t,e){return n.disconnect(this,t,e)},t.prototype.emit=function(t){n.emit(this,t)},t}();e.Signal=o,function(t){t.disconnectBetween=function(t,e){n.disconnectBetween(t,e)},t.disconnectSender=function(t){n.disconnectSender(t)},t.disconnectReceiver=function(t){n.disconnectReceiver(t)},t.disconnectAll=function(t){n.disconnectAll(t)},t.clearData=function(t){n.disconnectAll(t)},t.getExceptionHandler=function(){return n.exceptionHandler},t.setExceptionHandler=function(t){var e=n.exceptionHandler;return n.exceptionHandler=t,e}}(o=e.Signal||(e.Signal={})),e.Signal=o,function(t){t.exceptionHandler=function(t){console.error(t)},t.connect=function(t,n,r){r=r||void 0;var o=e.get(t.sender);if(o||(o=[],e.set(t.sender,o)),a(o,t,n,r))return!1;var s=r||n,u=i.get(s);u||(u=[],i.set(s,u));var l={signal:t,slot:n,thisArg:r};return o.push(l),u.push(l),!0},t.disconnect=function(t,n,r){r=r||void 0;var o=e.get(t.sender);if(!o||0===o.length)return!1;var s=a(o,t,n,r);if(!s)return!1;var l=r||n,h=i.get(l);return s.signal=null,u(o),u(h),!0},t.disconnectBetween=function(t,n){var o=e.get(t);if(o&&0!==o.length){var a=i.get(n);a&&0!==a.length&&(r.each(a,(function(e){e.signal&&e.signal.sender===t&&(e.signal=null)})),u(o),u(a))}},t.disconnectSender=function(t){var n=e.get(t);n&&0!==n.length&&(r.each(n,(function(t){if(t.signal){var e=t.thisArg||t.slot;t.signal=null,u(i.get(e))}})),u(n))},t.disconnectReceiver=function(t){var n=i.get(t);n&&0!==n.length&&(r.each(n,(function(t){if(t.signal){var i=t.signal.sender;t.signal=null,u(e.get(i))}})),u(n))},t.disconnectAll=function(t){var n=e.get(t);n&&n.length>0&&(r.each(n,(function(t){t.signal=null})),u(n));var o=i.get(t);o&&o.length>0&&(r.each(o,(function(t){t.signal=null})),u(o))},t.emit=function(t,i){var n=e.get(t.sender);if(n&&0!==n.length)for(var r=0,o=n.length;r<o;++r){var a=n[r];a.signal===t&&s(a,i)}};var e=new WeakMap,i=new WeakMap,n=new Set,o="function"==typeof requestAnimationFrame?requestAnimationFrame:setImmediate;function a(t,e,i,n){return r.find(t,(function(t){return t.signal===e&&t.slot===i&&t.thisArg===n}))}function s(e,i){var n=e.signal,r=e.slot,o=e.thisArg;try{r.call(o,n.sender,i)}catch(e){t.exceptionHandler(e)}}function u(t){0===n.size&&o(l),n.add(t)}function l(){n.forEach(h),n.clear()}function h(t){r.ArrayExt.removeAllWhere(t,c)}function c(t){return null===t.signal}}(n||(n={}))},5990:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4558),r=function(t){this.type="text",this.content=t};e.VirtualText=r;var o,a,s=function(t,e,i){this.type="element",this.tag=t,this.attrs=e,this.children=i};function u(t){for(var e={},i=[],n=1,o=arguments.length;n<o;++n){var a=arguments[n];"string"==typeof a?i.push(new r(a)):a instanceof r||a instanceof s?i.push(a):a instanceof Array?u(i,a):1===n&&a&&"object"==typeof a&&(e=a)}return new s(t,e,i);function u(t,e){for(var i=0,n=e;i<n.length;i++){var o=n[i];"string"==typeof o?t.push(new r(o)):(o instanceof r||o instanceof s)&&t.push(o)}}}e.VirtualElement=s,e.h=u,function(t){t.a=t.bind(void 0,"a"),t.abbr=t.bind(void 0,"abbr"),t.address=t.bind(void 0,"address"),t.area=t.bind(void 0,"area"),t.article=t.bind(void 0,"article"),t.aside=t.bind(void 0,"aside"),t.audio=t.bind(void 0,"audio"),t.b=t.bind(void 0,"b"),t.bdi=t.bind(void 0,"bdi"),t.bdo=t.bind(void 0,"bdo"),t.blockquote=t.bind(void 0,"blockquote"),t.br=t.bind(void 0,"br"),t.button=t.bind(void 0,"button"),t.canvas=t.bind(void 0,"canvas"),t.caption=t.bind(void 0,"caption"),t.cite=t.bind(void 0,"cite"),t.code=t.bind(void 0,"code"),t.col=t.bind(void 0,"col"),t.colgroup=t.bind(void 0,"colgroup"),t.data=t.bind(void 0,"data"),t.datalist=t.bind(void 0,"datalist"),t.dd=t.bind(void 0,"dd"),t.del=t.bind(void 0,"del"),t.dfn=t.bind(void 0,"dfn"),t.div=t.bind(void 0,"div"),t.dl=t.bind(void 0,"dl"),t.dt=t.bind(void 0,"dt"),t.em=t.bind(void 0,"em"),t.embed=t.bind(void 0,"embed"),t.fieldset=t.bind(void 0,"fieldset"),t.figcaption=t.bind(void 0,"figcaption"),t.figure=t.bind(void 0,"figure"),t.footer=t.bind(void 0,"footer"),t.form=t.bind(void 0,"form"),t.h1=t.bind(void 0,"h1"),t.h2=t.bind(void 0,"h2"),t.h3=t.bind(void 0,"h3"),t.h4=t.bind(void 0,"h4"),t.h5=t.bind(void 0,"h5"),t.h6=t.bind(void 0,"h6"),t.header=t.bind(void 0,"header"),t.hr=t.bind(void 0,"hr"),t.i=t.bind(void 0,"i"),t.iframe=t.bind(void 0,"iframe"),t.img=t.bind(void 0,"img"),t.input=t.bind(void 0,"input"),t.ins=t.bind(void 0,"ins"),t.kbd=t.bind(void 0,"kbd"),t.label=t.bind(void 0,"label"),t.legend=t.bind(void 0,"legend"),t.li=t.bind(void 0,"li"),t.main=t.bind(void 0,"main"),t.map=t.bind(void 0,"map"),t.mark=t.bind(void 0,"mark"),t.meter=t.bind(void 0,"meter"),t.nav=t.bind(void 0,"nav"),t.noscript=t.bind(void 0,"noscript"),t.object=t.bind(void 0,"object"),t.ol=t.bind(void 0,"ol"),t.optgroup=t.bind(void 0,"optgroup"),t.option=t.bind(void 0,"option"),t.output=t.bind(void 0,"output"),t.p=t.bind(void 0,"p"),t.param=t.bind(void 0,"param"),t.pre=t.bind(void 0,"pre"),t.progress=t.bind(void 0,"progress"),t.q=t.bind(void 0,"q"),t.rp=t.bind(void 0,"rp"),t.rt=t.bind(void 0,"rt"),t.ruby=t.bind(void 0,"ruby"),t.s=t.bind(void 0,"s"),t.samp=t.bind(void 0,"samp"),t.section=t.bind(void 0,"section"),t.select=t.bind(void 0,"select"),t.small=t.bind(void 0,"small"),t.source=t.bind(void 0,"source"),t.span=t.bind(void 0,"span"),t.strong=t.bind(void 0,"strong"),t.sub=t.bind(void 0,"sub"),t.summary=t.bind(void 0,"summary"),t.sup=t.bind(void 0,"sup"),t.table=t.bind(void 0,"table"),t.tbody=t.bind(void 0,"tbody"),t.td=t.bind(void 0,"td"),t.textarea=t.bind(void 0,"textarea"),t.tfoot=t.bind(void 0,"tfoot"),t.th=t.bind(void 0,"th"),t.thead=t.bind(void 0,"thead"),t.time=t.bind(void 0,"time"),t.title=t.bind(void 0,"title"),t.tr=t.bind(void 0,"tr"),t.track=t.bind(void 0,"track"),t.u=t.bind(void 0,"u"),t.ul=t.bind(void 0,"ul"),t.var_=t.bind(void 0,"var"),t.video=t.bind(void 0,"video"),t.wbr=t.bind(void 0,"wbr")}(u=e.h||(e.h={})),(a=e.VirtualDOM||(e.VirtualDOM={})).realize=function(t){return o.createDOMNode(t)},a.render=function(t,e){var i=o.hostMap.get(e)||[],n=o.asContentArray(t);o.hostMap.set(e,n),o.updateContent(e,i,n)},function(t){function e(t){if("text"===t.type)return document.createTextNode(t.content);var n=document.createElement(t.tag);!function(t,e){for(var n in e)n in i||("on"===n.substr(0,2)?t[n]=e[n]:t.setAttribute(n,e[n]));void 0!==e.className&&t.setAttribute("class",e.className),void 0!==e.htmlFor&&t.setAttribute("for",e.htmlFor),e.dataset&&function(t,e){for(var i in e)t.setAttribute("data-"+i,e[i])}(t,e.dataset),e.style&&function(t,e){var i,n=t.style;for(i in e)n[i]=e[i]}(t,e.style)}(n,t.attrs);for(var r=0,o=t.children.length;r<o;++r)n.appendChild(e(t.children[r]));return n}t.hostMap=new WeakMap,t.asContentArray=function(t){return t?t instanceof Array?t:[t]:[]},t.createDOMNode=e,t.updateContent=function t(i,o,a){if(o!==a){for(var s=function(t,e){for(var i=t.firstChild,n=Object.create(null),r=0,o=e;r<o.length;r++){var a=o[r];"element"===a.type&&a.attrs.key&&(n[a.attrs.key]={vNode:a,element:i}),i=i.nextSibling}return n}(i,o),u=o.slice(),l=i.firstChild,h=a.length,c=0;c<h;++c)if(c>=u.length)i.appendChild(e(a[c]));else{var f=u[c],p=a[c];if(f!==p)if("text"!==f.type||"text"!==p.type)if("text"!==f.type&&"text"!==p.type){var d=p.attrs.key;if(d&&d in s){var g=s[d];g.vNode!==f&&(n.ArrayExt.move(u,u.indexOf(g.vNode,c+1),c),i.insertBefore(g.element,l),f=g.vNode,l=g.element)}if(f!==p){var y=f.attrs.key;y&&y!==d?(n.ArrayExt.insert(u,c,p),i.insertBefore(e(p),l)):f.tag===p.tag?(r(l,f.attrs,p.attrs),t(l,f.children,p.children),l=l.nextSibling):(n.ArrayExt.insert(u,c,p),i.insertBefore(e(p),l))}else l=l.nextSibling}else n.ArrayExt.insert(u,c,p),i.insertBefore(e(p),l);else l.textContent=p.content,l=l.nextSibling;else l=l.nextSibling}for(c=u.length-h;c>0;--c)i.removeChild(i.lastChild)}};var i={key:!0,className:!0,htmlFor:!0,dataset:!0,style:!0};function r(t,e,n){if(e!==n){var r;for(r in e)r in i||r in n||("on"===r.substr(0,2)?t[r]=null:t.removeAttribute(r));for(r in n)r in i||e[r]===n[r]||("on"===r.substr(0,2)?t[r]=n[r]:t.setAttribute(r,n[r]));e.className!==n.className&&(void 0!==n.className?t.setAttribute("class",n.className):t.removeAttribute("class")),e.htmlFor!==n.htmlFor&&(void 0!==n.htmlFor?t.setAttribute("for",n.htmlFor):t.removeAttribute("for")),e.dataset!==n.dataset&&function(t,e,i){for(var n in e)n in i||t.removeAttribute("data-"+n);for(var r in i)e[r]!==i[r]&&t.setAttribute("data-"+r,i[r])}(t,e.dataset||{},n.dataset||{}),e.style!==n.style&&function(t,e,i){var n,r=t.style;for(n in e)n in i||(r[n]="");for(n in i)e[n]!==i[n]&&(r[n]=i[n])}(t,e.style||{},n.style||{})}}}(o||(o={}))},3095:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i;e.BoxSizer=function(){this.sizeHint=0,this.minSize=0,this.maxSize=1/0,this.stretch=1,this.size=0,this.done=!1},(i=e.BoxEngine||(e.BoxEngine={})).calc=function(t,e){var i=t.length;if(0===i)return e;for(var n=0,r=0,o=0,a=0,s=0,u=0;u<i;++u){var l=(m=t[u]).minSize,h=m.maxSize,c=m.sizeHint;m.done=!1,m.size=Math.max(l,Math.min(c,h)),o+=m.size,n+=l,r+=h,m.stretch>0&&(a+=m.stretch,s++)}if(e===o)return 0;if(e<=n){for(u=0;u<i;++u)(m=t[u]).size=m.minSize;return e-n}if(e>=r){for(u=0;u<i;++u)(m=t[u]).size=m.maxSize;return e-r}var f=.01,p=i;if(e<o){for(var d=o-e;s>0&&d>f;){var g=d,y=a;for(u=0;u<i;++u)if(!(m=t[u]).done&&0!==m.stretch){var v=m.stretch*g/y;m.size-v<=m.minSize?(d-=m.size-m.minSize,a-=m.stretch,m.size=m.minSize,m.done=!0,p--,s--):(d-=v,m.size-=v)}}for(;p>0&&d>f;)for(v=d/p,u=0;u<i;++u)(m=t[u]).done||(m.size-v<=m.minSize?(d-=m.size-m.minSize,m.size=m.minSize,m.done=!0,p--):(d-=v,m.size-=v))}else{for(d=e-o;s>0&&d>f;)for(g=d,y=a,u=0;u<i;++u)(m=t[u]).done||0===m.stretch||(v=m.stretch*g/y,m.size+v>=m.maxSize?(d-=m.maxSize-m.size,a-=m.stretch,m.size=m.maxSize,m.done=!0,p--,s--):(d-=v,m.size+=v));for(;p>0&&d>f;)for(v=d/p,u=0;u<i;++u){var m;(m=t[u]).done||(m.size+v>=m.maxSize?(d-=m.maxSize-m.size,m.size=m.maxSize,m.done=!0,p--):(d-=v,m.size+=v))}}return 0},i.adjust=function(t,e,i){0!==t.length&&0!==i&&(i>0?function(t,e,i){for(var n=0,r=0;r<=e;++r)n+=(l=t[r]).maxSize-l.size;for(var o=0,a=(r=e+1,t.length);r<a;++r)o+=(l=t[r]).size-l.minSize;var s=i=Math.min(i,n,o);for(r=e;r>=0&&s>0;--r)(h=(l=t[r]).maxSize-l.size)>=s?(l.sizeHint=l.size+s,s=0):(l.sizeHint=l.size+h,s-=h);var u=i;for(r=e+1,a=t.length;r<a&&u>0;++r){var l,h;(h=(l=t[r]).size-l.minSize)>=u?(l.sizeHint=l.size-u,u=0):(l.sizeHint=l.size-h,u-=h)}}(t,e,i):function(t,e,i){for(var n=0,r=e+1,o=t.length;r<o;++r)n+=(l=t[r]).maxSize-l.size;var a=0;for(r=0;r<=e;++r)a+=(l=t[r]).size-l.minSize;var s=i=Math.min(i,n,a);for(r=e+1,o=t.length;r<o&&s>0;++r)(h=(l=t[r]).maxSize-l.size)>=s?(l.sizeHint=l.size+s,s=0):(l.sizeHint=l.size+h,s-=h);var u=i;for(r=e;r>=0&&u>0;--r){var l,h;(h=(l=t[r]).size-l.minSize)>=u?(l.sizeHint=l.size-u,u=0):(l.sizeHint=l.size-h,u-=h)}}(t,e,-i))}},7679:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(6938),l=i(17),h=i(3095),c=i(1558),f=i(2857),p=i(6706),d=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;return i._fixed=0,i._spacing=4,i._dirty=!1,i._sizers=[],i._items=[],i._box=null,i._alignment="start",i._direction="top-to-bottom",void 0!==e.direction&&(i._direction=e.direction),void 0!==e.alignment&&(i._alignment=e.alignment),void 0!==e.spacing&&(i._spacing=o.clampSpacing(e.spacing)),i}return r(e,t),e.prototype.dispose=function(){a.each(this._items,(function(t){t.dispose()})),this._box=null,this._items.length=0,this._sizers.length=0,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.parent&&(this.parent.dataset.direction=t,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},set:function(t){this._alignment!==t&&(this._alignment=t,this.parent&&(this.parent.dataset.alignment=t,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){t=o.clampSpacing(t),this._spacing!==t&&(this._spacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.parent.dataset.direction=this.direction,this.parent.dataset.alignment=this.alignment,t.prototype.init.call(this)},e.prototype.attachWidget=function(t,e){a.ArrayExt.insert(this._items,t,new c.LayoutItem(e)),a.ArrayExt.insert(this._sizers,t,new h.BoxSizer),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.AfterAttach),this.parent.fit()},e.prototype.moveWidget=function(t,e,i){a.ArrayExt.move(this._items,t,e),a.ArrayExt.move(this._sizers,t,e),this.parent.update()},e.prototype.detachWidget=function(t,e){var i=a.ArrayExt.removeAt(this._items,t);a.ArrayExt.removeAt(this._sizers,t),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.AfterDetach),i.dispose(),this.parent.fit()},e.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},e.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._fit=function(){for(var t=0,i=0,n=this._items.length;i<n;++i)t+=+!this._items[i].isHidden;this._fixed=this._spacing*Math.max(0,t-1);var r=o.isHorizontal(this._direction),a=r?this._fixed:0,l=r?0:this._fixed;for(i=0,n=this._items.length;i<n;++i){var h=this._items[i],c=this._sizers[i];h.isHidden?(c.minSize=0,c.maxSize=0):(h.fit(),c.sizeHint=e.getSizeBasis(h.widget),c.stretch=e.getStretch(h.widget),r?(c.minSize=h.minWidth,c.maxSize=h.maxWidth,a+=h.minWidth,l=Math.max(l,h.minHeight)):(c.minSize=h.minHeight,c.maxSize=h.maxHeight,l+=h.minHeight,a=Math.max(a,h.minWidth)))}var f=this._box=s.ElementExt.boxSizing(this.parent.node);a+=f.horizontalSum,l+=f.verticalSum;var d=this.parent.node.style;d.minWidth=a+"px",d.minHeight=l+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,p.Widget.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,p.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,e){this._dirty=!1;for(var i=0,n=0,r=this._items.length;n<r;++n)i+=+!this._items[n].isHidden;if(0!==i){t<0&&(t=this.parent.node.offsetWidth),e<0&&(e=this.parent.node.offsetHeight),this._box||(this._box=s.ElementExt.boxSizing(this.parent.node));var o,a=this._box.paddingTop,u=this._box.paddingLeft,l=t-this._box.horizontalSum,c=e-this._box.verticalSum;switch(this._direction){case"left-to-right":o=h.BoxEngine.calc(this._sizers,Math.max(0,l-this._fixed));break;case"top-to-bottom":o=h.BoxEngine.calc(this._sizers,Math.max(0,c-this._fixed));break;case"right-to-left":o=h.BoxEngine.calc(this._sizers,Math.max(0,l-this._fixed)),u+=l;break;case"bottom-to-top":o=h.BoxEngine.calc(this._sizers,Math.max(0,c-this._fixed)),a+=c;break;default:throw"unreachable"}var f=0,p=0;if(o>0)switch(this._alignment){case"start":break;case"center":f=0,p=o/2;break;case"end":f=0,p=o;break;case"justify":f=o/i,p=0;break;default:throw"unreachable"}for(n=0,r=this._items.length;n<r;++n){var d=this._items[n];if(!d.isHidden){var g=this._sizers[n].size;switch(this._direction){case"left-to-right":d.update(u+p,a,g+f,c),u+=g+f+this._spacing;break;case"top-to-bottom":d.update(u,a+p,l,g+f),a+=g+f+this._spacing;break;case"right-to-left":d.update(u-p-g-f,a,g+f,c),u-=g+f+this._spacing;break;case"bottom-to-top":d.update(u,a-p-g-f,l,g+f),a-=g+f+this._spacing;break;default:throw"unreachable"}}}}},e}(f.PanelLayout);e.BoxLayout=d,function(t){t.getStretch=function(t){return o.stretchProperty.get(t)},t.setStretch=function(t,e){o.stretchProperty.set(t,e)},t.getSizeBasis=function(t){return o.sizeBasisProperty.get(t)},t.setSizeBasis=function(t,e){o.sizeBasisProperty.set(t,e)}}(d=e.BoxLayout||(e.BoxLayout={})),e.BoxLayout=d,function(t){function e(t){t.parent&&t.parent.layout instanceof d&&t.parent.fit()}t.stretchProperty=new l.AttachedProperty({name:"stretch",create:function(){return 0},coerce:function(t,e){return Math.max(0,Math.floor(e))},changed:e}),t.sizeBasisProperty=new l.AttachedProperty({name:"sizeBasis",create:function(){return 0},coerce:function(t,e){return Math.max(0,Math.floor(e))},changed:e}),t.isHorizontal=function(t){return"left-to-right"===t||"right-to-left"===t},t.clampSpacing=function(t){return Math.max(0,Math.floor(t))}}(o||(o={}))},22:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(7679),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,{layout:o.createLayout(e)})||this;return i.addClass("p-BoxPanel"),i}return r(e,t),Object.defineProperty(e.prototype,"direction",{get:function(){return this.layout.direction},set:function(t){this.layout.direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(t){this.layout.alignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(t){this.layout.spacing=t},enumerable:!0,configurable:!0}),e.prototype.onChildAdded=function(t){t.child.addClass("p-BoxPanel-child")},e.prototype.onChildRemoved=function(t){t.child.removeClass("p-BoxPanel-child")},e}(i(5382).Panel);e.BoxPanel=s,function(t){t.getStretch=function(t){return a.BoxLayout.getStretch(t)},t.setStretch=function(t,e){a.BoxLayout.setStretch(t,e)},t.getSizeBasis=function(t){return a.BoxLayout.getSizeBasis(t)},t.setSizeBasis=function(t,e){a.BoxLayout.setSizeBasis(t,e)}}(s=e.BoxPanel||(e.BoxPanel={})),e.BoxPanel=s,function(t){t.createLayout=function(t){return t.layout||new a.BoxLayout(t)}}(o||(o={}))},7688:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=i(4558),u=i(6539),l=i(3842),h=i(9847),c=i(5990),f=i(6706),p=function(t){function e(i){var n=t.call(this,{node:a.createNode()})||this;return n._activeIndex=-1,n._items=[],n._results=null,n.addClass("p-CommandPalette"),n.setFlag(f.Widget.Flag.DisallowLayout),n.commands=i.commands,n.renderer=i.renderer||e.defaultRenderer,n.commands.commandChanged.connect(n._onGenericChange,n),n.commands.keyBindingChanged.connect(n._onGenericChange,n),n}return r(e,t),e.prototype.dispose=function(){this._items.length=0,this._results=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"searchNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-search")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-input")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-CommandPalette-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),e.prototype.addItem=function(t){var e=a.createItem(this.commands,t);return this._items.push(e),this.refresh(),e},e.prototype.removeItem=function(t){this.removeItemAt(this._items.indexOf(t))},e.prototype.removeItemAt=function(t){s.ArrayExt.removeAt(this._items,t)&&this.refresh()},e.prototype.clearItems=function(){0!==this._items.length&&(this._items.length=0,this.refresh())},e.prototype.refresh=function(){this._results=null,this.update()},e.prototype.handleEvent=function(t){switch(t.type){case"click":this._evtClick(t);break;case"keydown":this._evtKeyDown(t);break;case"input":this.refresh();break;case"focus":case"blur":this._toggleFocused()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("click",this),this.node.addEventListener("keydown",this),this.node.addEventListener("input",this),this.node.addEventListener("focus",this,!0),this.node.addEventListener("blur",this,!0)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("click",this),this.node.removeEventListener("keydown",this),this.node.removeEventListener("input",this),this.node.removeEventListener("focus",this,!0),this.node.removeEventListener("blur",this,!0)},e.prototype.onActivateRequest=function(t){if(this.isAttached){var e=this.inputNode;e.focus(),e.select()}},e.prototype.onUpdateRequest=function(t){var e=this.inputNode.value,i=this.contentNode,n=this._results;if(n||(n=this._results=a.search(this._items,e),this._activeIndex=e?s.ArrayExt.findFirstIndex(n,a.canActivate):-1),e||0!==n.length)if(e&&0===n.length){var r=this.renderer.renderEmptyMessage({query:e});c.VirtualDOM.render(r,i)}else{for(var o=this.renderer,u=this._activeIndex,l=new Array(n.length),f=0,p=n.length;f<p;++f){var d=n[f];if("header"===d.type){var g=d.indices,y=d.category;l[f]=o.renderHeader({category:y,indices:g})}else{var v=d.item,m=(g=d.indices,f===u);l[f]=o.renderItem({item:v,indices:g,active:m})}}if(c.VirtualDOM.render(l,i),u<0||u>=n.length)i.scrollTop=0;else{var b=i.children[u];h.ElementExt.scrollIntoViewIfNeeded(i,b)}}else c.VirtualDOM.render(null,i)},e.prototype._evtClick=function(t){if(0===t.button){var e=s.ArrayExt.findFirstIndex(this.contentNode.children,(function(e){return e.contains(t.target)}));-1!==e&&(t.preventDefault(),t.stopPropagation(),this._execute(e))}},e.prototype._evtKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey))switch(t.keyCode){case 13:t.preventDefault(),t.stopPropagation(),this._execute(this._activeIndex);break;case 38:t.preventDefault(),t.stopPropagation(),this._activatePreviousItem();break;case 40:t.preventDefault(),t.stopPropagation(),this._activateNextItem()}},e.prototype._activateNextItem=function(){if(this._results&&0!==this._results.length){var t=this._activeIndex,e=this._results.length,i=t<e-1?t+1:0,n=0===i?e-1:i-1;this._activeIndex=s.ArrayExt.findFirstIndex(this._results,a.canActivate,i,n),this.update()}},e.prototype._activatePreviousItem=function(){if(this._results&&0!==this._results.length){var t=this._activeIndex,e=this._results.length,i=t<=0?e-1:t-1,n=i===e-1?0:i+1;this._activeIndex=s.ArrayExt.findLastIndex(this._results,a.canActivate,i,n),this.update()}},e.prototype._execute=function(t){if(this._results){var e=this._results[t];if(e){if("header"===e.type){var i=this.inputNode;return i.value=e.category.toLowerCase()+" ",i.focus(),void this.refresh()}e.item.isEnabled&&(this.commands.execute(e.item.command,e.item.args),this.inputNode.value="",this.refresh())}}},e.prototype._toggleFocused=function(){var t=document.activeElement===this.inputNode;this.toggleClass("p-mod-focused",t)},e.prototype._onGenericChange=function(){this.refresh()},e}(f.Widget);e.CommandPalette=p,function(t){var e=function(){function t(){}return t.prototype.renderHeader=function(t){var e=this.formatHeader(t);return c.h.li({className:"p-CommandPalette-header"},e)},t.prototype.renderItem=function(t){var e=this.createItemClass(t),i=this.createItemDataset(t);return c.h.li({className:e,dataset:i},this.renderItemIcon(t),this.renderItemContent(t),this.renderItemShortcut(t))},t.prototype.renderEmptyMessage=function(t){var e=this.formatEmptyMessage(t);return c.h.li({className:"p-CommandPalette-emptyMessage"},e)},t.prototype.renderItemIcon=function(t){var e=this.createIconClass(t);return c.h.div({className:e},t.item.iconLabel)},t.prototype.renderItemContent=function(t){return c.h.div({className:"p-CommandPalette-itemContent"},this.renderItemLabel(t),this.renderItemCaption(t))},t.prototype.renderItemLabel=function(t){var e=this.formatItemLabel(t);return c.h.div({className:"p-CommandPalette-itemLabel"},e)},t.prototype.renderItemCaption=function(t){var e=this.formatItemCaption(t);return c.h.div({className:"p-CommandPalette-itemCaption"},e)},t.prototype.renderItemShortcut=function(t){var e=this.formatItemShortcut(t);return c.h.div({className:"p-CommandPalette-itemShortcut"},e)},t.prototype.createItemClass=function(t){var e="p-CommandPalette-item";t.item.isEnabled||(e+=" p-mod-disabled"),t.item.isToggled&&(e+=" p-mod-toggled"),t.active&&(e+=" p-mod-active");var i=t.item.className;return i&&(e+=" "+i),e},t.prototype.createItemDataset=function(t){return o({},t.item.dataset,{command:t.item.command})},t.prototype.createIconClass=function(t){var e="p-CommandPalette-itemIcon",i=t.item.iconClass;return i?e+" "+i:e},t.prototype.formatHeader=function(t){return t.indices&&0!==t.indices.length?s.StringExt.highlight(t.category,t.indices,c.h.mark):t.category},t.prototype.formatEmptyMessage=function(t){return"No commands found that match '"+t.query+"'"},t.prototype.formatItemShortcut=function(t){var e=t.item.keyBinding;return e?e.keys.map(l.CommandRegistry.formatKeystroke).join(", "):null},t.prototype.formatItemLabel=function(t){return t.indices&&0!==t.indices.length?s.StringExt.highlight(t.item.label,t.indices,c.h.mark):t.item.label},t.prototype.formatItemCaption=function(t){return t.item.caption},t}();t.Renderer=e,t.defaultRenderer=new e}(p=e.CommandPalette||(e.CommandPalette={})),e.CommandPalette=p,function(t){function e(t,e){for(var i=t.category.toLowerCase(),n=i+" "+t.label.toLowerCase(),r=1/0,o=null,a=/\b\w/g;;){var u=a.exec(n);if(!u)break;var l=s.StringExt.matchSumOfDeltas(n,e,u.index);if(!l)break;l&&l.score<=r&&(r=l.score,o=l.indices)}if(!o||r===1/0)return null;for(var h=i.length+1,c=s.ArrayExt.lowerBound(o,h,(function(t,e){return t-e})),f=o.slice(0,c),p=o.slice(c),d=0,g=p.length;d<g;++d)p[d]-=h;return 0===f.length?{matchType:0,categoryIndices:null,labelIndices:p,score:r,item:t}:0===p.length?{matchType:1,categoryIndices:f,labelIndices:null,score:r,item:t}:{matchType:2,categoryIndices:f,labelIndices:p,score:r,item:t}}function i(t,e){var i=t.matchType-e.matchType;if(0!==i)return i;var n=t.score-e.score;if(0!==n)return n;var r=0,o=0;switch(t.matchType){case 0:r=t.labelIndices[0],o=e.labelIndices[0];break;case 1:case 2:r=t.categoryIndices[0],o=e.categoryIndices[0]}if(r!==o)return r-o;var a=t.item.category.localeCompare(e.item.category);if(0!==a)return a;var s=t.item.rank,u=e.item.rank;return s!==u?s<u?-1:1:t.item.label.localeCompare(e.item.label)}t.createNode=function(){var t=document.createElement("div"),e=document.createElement("div"),i=document.createElement("div"),n=document.createElement("input"),r=document.createElement("ul");return e.className="p-CommandPalette-search",i.className="p-CommandPalette-wrapper",n.className="p-CommandPalette-input",r.className="p-CommandPalette-content",n.spellcheck=!1,i.appendChild(n),e.appendChild(i),t.appendChild(e),t.appendChild(r),t},t.createItem=function(t,e){return new n(t,e)},t.search=function(t,n){var r=function(t,i){i=i.replace(/\s+/g,"").toLowerCase();for(var n=[],r=0,o=t.length;r<o;++r){var a=t[r];if(a.isVisible)if(i){var s=e(a,i);s&&(a.isEnabled||(s.score+=1e3),n.push(s))}else n.push({matchType:3,categoryIndices:null,labelIndices:null,score:0,item:a})}return n}(t,n);return r.sort(i),function(t){var e=new Array(t.length);s.ArrayExt.fill(e,!1);for(var i=[],n=0,r=t.length;n<r;++n)if(!e[n]){var o=t[n],a=o.item,u=o.categoryIndices,l=a.category;i.push({type:"header",category:l,indices:u});for(var h=n;h<r;++h)if(!e[h]){var c=t[h],f=c.item,p=c.labelIndices;f.category===l&&(i.push({type:"item",item:f,indices:p}),e[h]=!0)}}return i}(r)},t.canActivate=function(t){return"item"===t.type&&t.item.isEnabled};var n=function(){function t(t,e){this._commands=t,this.category=e.category.trim().replace(/\s+/g," "),this.command=e.command,this.args=e.args||u.JSONExt.emptyObject,this.rank=void 0!==e.rank?e.rank:1/0}return Object.defineProperty(t.prototype,"label",{get:function(){return this._commands.label(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconClass",{get:function(){return this._commands.iconClass(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconLabel",{get:function(){return this._commands.iconLabel(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this._commands.caption(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._commands.className(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return this._commands.dataset(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._commands.isEnabled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isToggled",{get:function(){return this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._commands.isVisible(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBinding",{get:function(){var t=this.command,e=this.args;return s.ArrayExt.findLastValue(this._commands.keyBindings,(function(i){return i.command===t&&u.JSONExt.deepEqual(i.args,e)}))||null},enumerable:!0,configurable:!0}),t}()}(a||(a={}))},2419:function(t,e,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r,o=i(4558),a=i(6458),s=i(9847),u=i(4837),l=function(){function t(t){this._idTick=0,this._items=[],this.menu=new u.Menu(t)}return t.prototype.addItem=function(t){var e=this,i=r.createItem(t,this._idTick++);return this._items.push(i),new a.DisposableDelegate((function(){o.ArrayExt.removeFirstOf(e._items,i)}))},t.prototype.open=function(t){var e=this;if(this.menu.clearItems(),0===this._items.length)return!1;var i=r.matchItems(this._items,t);return!(!i||0===i.length||(o.each(i,(function(t){e.menu.addItem(t)})),this.menu.open(t.clientX,t.clientY),0))},t}();e.ContextMenu=l,function(t){function e(t,e){var i=s.Selector.calculateSpecificity(t.selector),n=s.Selector.calculateSpecificity(e.selector);if(i!==n)return n-i;var r=t.rank,o=e.rank;return r!==o?r<o?-1:1:t.id-e.id}t.createItem=function(t,e){var i=function(t){if(-1!==t.indexOf(","))throw new Error("Selector cannot contain commas: "+t);if(!s.Selector.isValid(t))throw new Error("Invalid selector: "+t);return t}(t.selector),r=void 0!==t.rank?t.rank:1/0;return n({},t,{selector:i,rank:r,id:e})},t.matchItems=function(t,i){var n=i.target;if(!n)return null;var r=i.currentTarget;if(!r)return null;if(!(r.contains(n)||(n=document.elementFromPoint(i.clientX,i.clientY))&&r.contains(n)))return null;for(var o=[],a=t.slice();null!==n;){for(var u=[],l=0,h=a.length;l<h;++l){var c=a[l];c&&s.Selector.matches(n,c.selector)&&(u.push(c),a[l]=null)}if(0!==u.length&&(u.sort(e),o.push.apply(o,u)),n===r)break;n=n.parentElement}return o}}(r||(r={}))},3009:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(6938),l=i(3095),h=i(1558),c=i(6706),f=function(t){function e(e){var i=t.call(this)||this;return i._spacing=4,i._dirty=!1,i._root=null,i._box=null,i._items=new Map,i.renderer=e.renderer,void 0!==e.spacing&&(i._spacing=o.clampSpacing(e.spacing)),i}return r(e,t),e.prototype.dispose=function(){var e=this.iter();this._items.forEach((function(t){t.dispose()})),this._box=null,this._root=null,this._items.clear(),a.each(e,(function(t){t.dispose()})),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){t=o.clampSpacing(t),this._spacing!==t&&(this._spacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null===this._root},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return this._root?this._root.iterAllWidgets():a.empty()},e.prototype.widgets=function(){return this._root?this._root.iterUserWidgets():a.empty()},e.prototype.selectedWidgets=function(){return this._root?this._root.iterSelectedWidgets():a.empty()},e.prototype.tabBars=function(){return this._root?this._root.iterTabBars():a.empty()},e.prototype.handles=function(){return this._root?this._root.iterHandles():a.empty()},e.prototype.moveHandle=function(t,e,i){if(this._root&&!t.classList.contains("p-mod-hidden")){var n,r=this._root.findSplitNode(t);r&&0!=(n="horizontal"===r.node.orientation?e-t.offsetLeft:i-t.offsetTop)&&(r.node.holdSizes(),l.BoxEngine.adjust(r.node.sizers,r.index,n),this.parent&&this.parent.update())}},e.prototype.saveLayout=function(){return this._root?(this._root.holdAllSizes(),{main:this._root.createConfig()}):{main:null}},e.prototype.restoreLayout=function(t){var e,i=this,n=new Set;e=t.main?o.normalizeAreaConfig(t.main,n):null;var r=this.widgets(),s=this.tabBars(),u=this.handles();this._root=null,a.each(r,(function(t){n.has(t)||(t.parent=null)})),a.each(s,(function(t){t.dispose()})),a.each(u,(function(t){t.parentNode&&t.parentNode.removeChild(t)})),n.forEach((function(t){t.parent=i.parent})),this._root=e?o.realizeAreaConfig(e,{createTabBar:function(){return i._createTabBar()},createHandle:function(){return i._createHandle()}}):null,this.parent&&(n.forEach((function(t){i.attachWidget(t)})),this.parent.fit())},e.prototype.addWidget=function(t,e){void 0===e&&(e={});var i=e.ref||null,n=e.mode||"tab-after",r=null;if(this._root&&i&&(r=this._root.findTabNode(i)),i&&!r)throw new Error("Reference widget is not in the layout.");switch(t.parent=this.parent,n){case"tab-after":this._insertTab(t,i,r,!0);break;case"tab-before":this._insertTab(t,i,r,!1);break;case"split-top":this._insertSplit(t,i,r,"vertical",!1);break;case"split-left":this._insertSplit(t,i,r,"horizontal",!1);break;case"split-right":this._insertSplit(t,i,r,"horizontal",!0);break;case"split-bottom":this._insertSplit(t,i,r,"vertical",!0)}this.parent&&(this.attachWidget(t),this.parent.fit())},e.prototype.removeWidget=function(t){this._removeWidget(t),this.parent&&(this.detachWidget(t),this.parent.fit())},e.prototype.hitTestTabAreas=function(t,e){if(!this._root||!this.parent||!this.parent.isVisible)return null;this._box||(this._box=s.ElementExt.boxSizing(this.parent.node));var i=this.parent.node.getBoundingClientRect(),n=t-i.left-this._box.borderLeft,r=e-i.top-this._box.borderTop,o=this._root.hitTestTabNodes(n,r);if(!o)return null;var a=o.tabBar,u=o.top,l=o.left,h=o.width,c=o.height,f=this._box.borderLeft+this._box.borderRight,p=this._box.borderTop+this._box.borderBottom;return{tabBar:a,x:n,y:r,top:u,left:l,right:i.width-f-(l+h),bottom:i.height-p-(u+c),width:h,height:c}},e.prototype.init=function(){var e=this;t.prototype.init.call(this),a.each(this,(function(t){e.attachWidget(t)})),a.each(this.handles(),(function(t){e.parent.node.appendChild(t)})),this.parent.fit()},e.prototype.attachWidget=function(t){this.parent.node!==t.node.parentNode&&(this._items.set(t,new h.LayoutItem(t)),this.parent.isAttached&&u.MessageLoop.sendMessage(t,c.Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,c.Widget.Msg.AfterAttach))},e.prototype.detachWidget=function(t){if(this.parent.node===t.node.parentNode){this.parent.isAttached&&u.MessageLoop.sendMessage(t,c.Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,c.Widget.Msg.AfterDetach);var e=this._items.get(t);e&&(this._items.delete(t),e.dispose())}},e.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},e.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._removeWidget=function(t){if(this._root){var e=this._root.findTabNode(t);if(e)if(e.tabBar.titles.length>1)e.tabBar.removeTab(t.title);else if(e.tabBar.dispose(),this._root!==e){this._root.holdAllSizes();var i=e.parent;e.parent=null;var n=a.ArrayExt.removeFirstOf(i.children,e),r=a.ArrayExt.removeAt(i.handles,n);if(a.ArrayExt.removeAt(i.sizers,n),r.parentNode&&r.parentNode.removeChild(r),i.children.length>1)i.syncHandles();else{var s=i.parent;i.parent=null;var u=i.children[0],l=i.handles[0];if(i.children.length=0,i.handles.length=0,i.sizers.length=0,l.parentNode&&l.parentNode.removeChild(l),this._root===i)return u.parent=null,void(this._root=u);var h=s,c=h.children.indexOf(i);if(u instanceof o.TabLayoutNode)return u.parent=h,void(h.children[c]=u);var f=a.ArrayExt.removeAt(h.handles,c);a.ArrayExt.removeAt(h.children,c),a.ArrayExt.removeAt(h.sizers,c),f.parentNode&&f.parentNode.removeChild(f);for(var p=0,d=u.children.length;p<d;++p){var g=u.children[p],y=u.handles[p],v=u.sizers[p];a.ArrayExt.insert(h.children,c+p,g),a.ArrayExt.insert(h.handles,c+p,y),a.ArrayExt.insert(h.sizers,c+p,v),g.parent=h}u.children.length=0,u.handles.length=0,u.sizers.length=0,u.parent=null,h.syncHandles()}}else this._root=null}},e.prototype._insertTab=function(t,e,i,n){if(t!==e){if(!this._root){var r=new o.TabLayoutNode(this._createTabBar());return r.tabBar.addTab(t.title),void(this._root=r)}var a;i||(i=this._root.findFirstTabNode()),-1===i.tabBar.titles.indexOf(t.title)&&(this._removeWidget(t),t.hide()),a=e?i.tabBar.titles.indexOf(e.title):i.tabBar.currentIndex,i.tabBar.insertTab(a+(n?1:0),t.title)}},e.prototype._insertSplit=function(t,e,i,n,r){if(t!==e||!i||1!==i.tabBar.titles.length){this._removeWidget(t);var s=new o.TabLayoutNode(this._createTabBar());if(s.tabBar.addTab(t.title),this._root){if(!i||!i.parent){var u=this._splitRoot(n),l=r?u.children.length:0;u.normalizeSizes();var h=o.createSizer(i?1:o.GOLDEN_RATIO);return a.ArrayExt.insert(u.children,l,s),a.ArrayExt.insert(u.sizers,l,h),a.ArrayExt.insert(u.handles,l,this._createHandle()),s.parent=u,u.normalizeSizes(),void u.syncHandles()}var c=i.parent;if(c.orientation===n){var f=c.children.indexOf(i);c.normalizeSizes();var p=c.sizers[f].sizeHint/=2,d=f+(r?1:0);return a.ArrayExt.insert(c.children,d,s),a.ArrayExt.insert(c.sizers,d,o.createSizer(p)),a.ArrayExt.insert(c.handles,d,this._createHandle()),s.parent=c,void c.syncHandles()}var g=a.ArrayExt.removeFirstOf(c.children,i),y=new o.SplitLayoutNode(n);y.normalized=!0,y.children.push(i),y.sizers.push(o.createSizer(.5)),y.handles.push(this._createHandle()),i.parent=y;var v=r?1:0;a.ArrayExt.insert(y.children,v,s),a.ArrayExt.insert(y.sizers,v,o.createSizer(.5)),a.ArrayExt.insert(y.handles,v,this._createHandle()),s.parent=y,y.syncHandles(),a.ArrayExt.insert(c.children,g,y),y.parent=c}else this._root=s}},e.prototype._splitRoot=function(t){var e=this._root;if(e instanceof o.SplitLayoutNode&&e.orientation===t)return e;var i=this._root=new o.SplitLayoutNode(t);return e&&(i.children.push(e),i.sizers.push(o.createSizer(0)),i.handles.push(this._createHandle()),e.parent=i),i},e.prototype._fit=function(){var t=0,e=0;if(this._root){var i=this._root.fit(this._spacing,this._items);t=i.minWidth,e=i.minHeight}var n=this._box=s.ElementExt.boxSizing(this.parent.node);t+=n.horizontalSum,e+=n.verticalSum;var r=this.parent.node.style;r.minWidth=t+"px",r.minHeight=e+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,c.Widget.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,c.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,e){if(this._dirty=!1,this._root){t<0&&(t=this.parent.node.offsetWidth),e<0&&(e=this.parent.node.offsetHeight),this._box||(this._box=s.ElementExt.boxSizing(this.parent.node));var i=this._box.paddingTop,n=this._box.paddingLeft,r=t-this._box.horizontalSum,o=e-this._box.verticalSum;this._root.update(i,n,r,o,this._spacing,this._items)}},e.prototype._createTabBar=function(){var t=this.renderer.createTabBar();return t.orientation="horizontal",this.parent&&(t.parent=this.parent,this.attachWidget(t)),t},e.prototype._createHandle=function(){var t=this.renderer.createHandle(),e=t.style;return e.position="absolute",e.top="0",e.left="0",e.width="0",e.height="0",this.parent&&this.parent.node.appendChild(t),t},e}(h.Layout);e.DockLayout=f,function(t){function e(t){var e=new l.BoxSizer;return e.sizeHint=t,e.size=t,e}t.GOLDEN_RATIO=.618,t.clampSpacing=function(t){return Math.max(0,Math.floor(t))},t.createSizer=e,t.normalizeAreaConfig=function t(e,i){var n;return n="tab-area"===e.type?function(t,e){if(0===t.widgets.length)return null;var i=[];if(a.each(t.widgets,(function(t){e.has(t)||(e.add(t),i.push(t))})),0===i.length)return null;var n=t.currentIndex;return-1!==n&&(n<0||n>=i.length)&&(n=0),{type:"tab-area",widgets:i,currentIndex:n}}(e,i):function(e,i){for(var n=e.orientation,r=[],o=[],a=0,s=e.children.length;a<s;++a){var u=t(e.children[a],i);u&&("tab-area"===u.type||u.orientation!==n?(r.push(u),o.push(Math.abs(e.sizes[a]||0))):(r.push.apply(r,u.children),o.push.apply(o,u.sizes)))}return 0===r.length?null:1===r.length?r[0]:{type:"split-area",orientation:n,children:r,sizes:o}}(e,i),n},t.realizeAreaConfig=function t(r,o){var s;return s="tab-area"===r.type?function(t,e){var n=e.createTabBar();return a.each(t.widgets,(function(t){t.hide(),n.addTab(t.title)})),n.currentIndex=t.currentIndex,new i(n)}(r,o):function(i,r){var o=new n(i.orientation);return a.each(i.children,(function(n,a){var s=t(n,r),u=e(i.sizes[a]),l=r.createHandle();o.children.push(s),o.handles.push(l),o.sizers.push(u),s.parent=o})),o.syncHandles(),o.normalizeSizes(),o}(r,o),s};var i=function(){function t(t){this.parent=null,this._top=0,this._left=0,this._width=0,this._height=0;var e=new l.BoxSizer,i=new l.BoxSizer;e.stretch=0,i.stretch=1,this.tabBar=t,this.sizers=[e,i]}return Object.defineProperty(t.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),t.prototype.iterAllWidgets=function(){return a.chain(a.once(this.tabBar),this.iterUserWidgets())},t.prototype.iterUserWidgets=function(){return a.map(this.tabBar.titles,(function(t){return t.owner}))},t.prototype.iterSelectedWidgets=function(){var t=this.tabBar.currentTitle;return t?a.once(t.owner):a.empty()},t.prototype.iterTabBars=function(){return a.once(this.tabBar)},t.prototype.iterHandles=function(){return a.empty()},t.prototype.findTabNode=function(t){return-1!==this.tabBar.titles.indexOf(t.title)?this:null},t.prototype.findSplitNode=function(t){return null},t.prototype.findFirstTabNode=function(){return this},t.prototype.hitTestTabNodes=function(t,e){return t<this._left||t>=this._left+this._width||e<this._top||e>=this._top+this._height?null:this},t.prototype.createConfig=function(){return{type:"tab-area",widgets:this.tabBar.titles.map((function(t){return t.owner})),currentIndex:this.tabBar.currentIndex}},t.prototype.holdAllSizes=function(){},t.prototype.fit=function(t,e){var i=0,n=0,r=e.get(this.tabBar),o=this.tabBar.currentTitle,a=o?e.get(o.owner):void 0,s=this.sizers,u=s[0],l=s[1];return r&&r.fit(),a&&a.fit(),r&&!r.isHidden?(i=Math.max(i,r.minWidth),n+=r.minHeight,u.minSize=r.minHeight,u.maxSize=r.maxHeight):(u.minSize=0,u.maxSize=0),a&&!a.isHidden?(i=Math.max(i,a.minWidth),n+=a.minHeight,l.minSize=a.minHeight,l.maxSize=1/0):(l.minSize=0,l.maxSize=1/0),{minWidth:i,minHeight:n,maxWidth:1/0,maxHeight:1/0}},t.prototype.update=function(t,e,i,n,r,o){this._top=e,this._left=t,this._width=i,this._height=n;var a=o.get(this.tabBar),s=this.tabBar.currentTitle,u=s?o.get(s.owner):void 0;if(l.BoxEngine.calc(this.sizers,n),a&&!a.isHidden){var h=this.sizers[0].size;a.update(t,e,i,h),e+=h}u&&!u.isHidden&&(h=this.sizers[1].size,u.update(t,e,i,h))},t}();t.TabLayoutNode=i;var n=function(){function t(t){this.parent=null,this.normalized=!1,this.children=[],this.sizers=[],this.handles=[],this.orientation=t}return t.prototype.iterAllWidgets=function(){var t=a.map(this.children,(function(t){return t.iterAllWidgets()}));return new a.ChainIterator(t)},t.prototype.iterUserWidgets=function(){var t=a.map(this.children,(function(t){return t.iterUserWidgets()}));return new a.ChainIterator(t)},t.prototype.iterSelectedWidgets=function(){var t=a.map(this.children,(function(t){return t.iterSelectedWidgets()}));return new a.ChainIterator(t)},t.prototype.iterTabBars=function(){var t=a.map(this.children,(function(t){return t.iterTabBars()}));return new a.ChainIterator(t)},t.prototype.iterHandles=function(){var t=a.map(this.children,(function(t){return t.iterHandles()}));return a.chain(this.handles,new a.ChainIterator(t))},t.prototype.findTabNode=function(t){for(var e=0,i=this.children.length;e<i;++e){var n=this.children[e].findTabNode(t);if(n)return n}return null},t.prototype.findSplitNode=function(t){var e=this.handles.indexOf(t);if(-1!==e)return{index:e,node:this};for(var i=0,n=this.children.length;i<n;++i){var r=this.children[i].findSplitNode(t);if(r)return r}return null},t.prototype.findFirstTabNode=function(){return 0===this.children.length?null:this.children[0].findFirstTabNode()},t.prototype.hitTestTabNodes=function(t,e){for(var i=0,n=this.children.length;i<n;++i){var r=this.children[i].hitTestTabNodes(t,e);if(r)return r}return null},t.prototype.createConfig=function(){var t=this.orientation,e=this.createNormalizedSizes();return{type:"split-area",orientation:t,children:this.children.map((function(t){return t.createConfig()})),sizes:e}},t.prototype.syncHandles=function(){var t=this;a.each(this.handles,(function(e,i){e.setAttribute("data-orientation",t.orientation),i===t.handles.length-1?e.classList.add("p-mod-hidden"):e.classList.remove("p-mod-hidden")}))},t.prototype.holdSizes=function(){a.each(this.sizers,(function(t){t.sizeHint=t.size}))},t.prototype.holdAllSizes=function(){a.each(this.children,(function(t){return t.holdAllSizes()})),this.holdSizes()},t.prototype.normalizeSizes=function(){var t=this.sizers.length;if(0!==t){this.holdSizes();var e=a.reduce(this.sizers,(function(t,e){return t+e.sizeHint}),0);0===e?a.each(this.sizers,(function(e){e.size=e.sizeHint=1/t})):a.each(this.sizers,(function(t){t.size=t.sizeHint/=e})),this.normalized=!0}},t.prototype.createNormalizedSizes=function(){var t=this.sizers.length;if(0===t)return[];var e=this.sizers.map((function(t){return t.size})),i=a.reduce(e,(function(t,e){return t+e}),0);return 0===i?a.each(e,(function(i,n){e[n]=1/t})):a.each(e,(function(t,n){e[n]=t/i})),e},t.prototype.fit=function(t,e){for(var i="horizontal"===this.orientation,n=Math.max(0,this.children.length-1)*t,r=i?n:0,o=i?0:n,a=0,s=this.children.length;a<s;++a){var u=this.children[a].fit(t,e);i?(o=Math.max(o,u.minHeight),r+=u.minWidth,this.sizers[a].minSize=u.minWidth):(r=Math.max(r,u.minWidth),o+=u.minHeight,this.sizers[a].minSize=u.minHeight)}return{minWidth:r,minHeight:o,maxWidth:1/0,maxHeight:1/0}},t.prototype.update=function(t,e,i,n,r,o){var s="horizontal"===this.orientation,u=Math.max(0,this.children.length-1)*r,h=Math.max(0,(s?i:n)-u);this.normalized&&(a.each(this.sizers,(function(t){t.sizeHint*=h})),this.normalized=!1),l.BoxEngine.calc(this.sizers,h);for(var c=0,f=this.children.length;c<f;++c){var p=this.children[c],d=this.sizers[c].size,g=this.handles[c].style;s?(p.update(t,e,d,n,r,o),t+=d,g.top=e+"px",g.left=t+"px",g.width=r+"px",g.height=n+"px",t+=r):(p.update(t,e,i,d,r,o),e+=d,g.top=e+"px",g.left=t+"px",g.width=i+"px",g.height=r+"px",e+=r)}},t}();t.SplitLayoutNode=n}(o||(o={}))},9937:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(6539),u=i(9847),l=i(4177),h=i(6938),c=i(17),f=i(5932),p=i(3009),d=i(8796),g=i(6706),y=function(t){function e(i){void 0===i&&(i={});var n=t.call(this)||this;n._drag=null,n._pressData=null,n._layoutModified=new f.Signal(n),n.addClass("p-DockPanel"),n._mode=i.mode||"multiple-document",n._renderer=i.renderer||e.defaultRenderer,n._edges=i.edges||o.DEFAULT_EDGES,n.dataset.mode=n._mode;var r={createTabBar:function(){return n._createTabBar()},createHandle:function(){return n._createHandle()}};return n.layout=new p.DockLayout({renderer:r,spacing:i.spacing}),n.overlay=i.overlay||new e.Overlay,n.node.appendChild(n.overlay.node),n}return r(e,t),e.prototype.dispose=function(){this._releaseMouse(),this.overlay.hide(0),this._drag&&this._drag.dispose(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"layoutModified",{get:function(){return this._layoutModified},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(t){this.layout.spacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){if(this._mode!==t){this._mode=t,this.dataset.mode=t;var e=this.layout;switch(t){case"multiple-document":a.each(e.tabBars(),(function(t){t.show()}));break;case"single-document":e.restoreLayout(o.createSingleDocumentConfig(this));break;default:throw"unreachable"}h.MessageLoop.postMessage(this,o.LayoutModified)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.layout.isEmpty},enumerable:!0,configurable:!0}),e.prototype.widgets=function(){return this.layout.widgets()},e.prototype.selectedWidgets=function(){return this.layout.selectedWidgets()},e.prototype.tabBars=function(){return this.layout.tabBars()},e.prototype.handles=function(){return this.layout.handles()},e.prototype.selectWidget=function(t){var e=a.find(this.tabBars(),(function(e){return-1!==e.titles.indexOf(t.title)}));if(!e)throw new Error("Widget is not contained in the dock panel.");e.currentTitle=t.title},e.prototype.activateWidget=function(t){this.selectWidget(t),t.activate()},e.prototype.saveLayout=function(){return this.layout.saveLayout()},e.prototype.restoreLayout=function(t){this._mode="multiple-document",this.layout.restoreLayout(t),(u.Platform.IS_EDGE||u.Platform.IS_IE)&&h.MessageLoop.flush(),h.MessageLoop.postMessage(this,o.LayoutModified)},e.prototype.addWidget=function(t,e){void 0===e&&(e={}),"single-document"===this._mode?this.layout.addWidget(t):this.layout.addWidget(t,e),h.MessageLoop.postMessage(this,o.LayoutModified)},e.prototype.processMessage=function(e){"layout-modified"===e.type?this._layoutModified.emit(void 0):t.prototype.processMessage.call(this,e)},e.prototype.handleEvent=function(t){switch(t.type){case"p-dragenter":this._evtDragEnter(t);break;case"p-dragleave":this._evtDragLeave(t);break;case"p-dragover":this._evtDragOver(t);break;case"p-drop":this._evtDrop(t);break;case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("p-dragenter",this),this.node.addEventListener("p-dragleave",this),this.node.addEventListener("p-dragover",this),this.node.addEventListener("p-drop",this),this.node.addEventListener("mousedown",this)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("p-dragenter",this),this.node.removeEventListener("p-dragleave",this),this.node.removeEventListener("p-dragover",this),this.node.removeEventListener("p-drop",this),this.node.removeEventListener("mousedown",this),this._releaseMouse()},e.prototype.onChildAdded=function(t){o.isGeneratedTabBarProperty.get(t.child)||t.child.addClass("p-DockPanel-widget")},e.prototype.onChildRemoved=function(t){o.isGeneratedTabBarProperty.get(t.child)||(t.child.removeClass("p-DockPanel-widget"),h.MessageLoop.postMessage(this,o.LayoutModified))},e.prototype._evtDragEnter=function(t){t.mimeData.hasData("application/vnd.phosphor.widget-factory")&&(t.preventDefault(),t.stopPropagation())},e.prototype._evtDragLeave=function(t){t.preventDefault(),t.stopPropagation(),this.overlay.hide(1)},e.prototype._evtDragOver=function(t){t.preventDefault(),t.stopPropagation(),"invalid"===this._showOverlay(t.clientX,t.clientY)?t.dropAction="none":t.dropAction=t.proposedAction},e.prototype._evtDrop=function(t){if(t.preventDefault(),t.stopPropagation(),this.overlay.hide(0),"none"!==t.proposedAction){var e=t.clientX,i=t.clientY,n=o.findDropTarget(this,e,i,this._edges),r=n.zone,a=n.target;if("invalid"!==r){var s=t.mimeData.getData("application/vnd.phosphor.widget-factory");if("function"==typeof s){var u=s();if(u instanceof g.Widget)if(u.contains(this))t.dropAction="none";else{var l=a?o.getDropRef(a.tabBar):null;switch(r){case"root-all":this.addWidget(u);break;case"root-top":this.addWidget(u,{mode:"split-top"});break;case"root-left":this.addWidget(u,{mode:"split-left"});break;case"root-right":this.addWidget(u,{mode:"split-right"});break;case"root-bottom":this.addWidget(u,{mode:"split-bottom"});break;case"widget-all":case"widget-tab":this.addWidget(u,{mode:"tab-after",ref:l});break;case"widget-top":this.addWidget(u,{mode:"split-top",ref:l});break;case"widget-left":this.addWidget(u,{mode:"split-left",ref:l});break;case"widget-right":this.addWidget(u,{mode:"split-right",ref:l});break;case"widget-bottom":this.addWidget(u,{mode:"split-bottom",ref:l});break;default:throw"unreachable"}t.dropAction=t.proposedAction,this.activateWidget(u)}else t.dropAction="none"}else t.dropAction="none"}else t.dropAction="none"}else t.dropAction="none"},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),27===t.keyCode&&(this._releaseMouse(),h.MessageLoop.postMessage(this,o.LayoutModified))},e.prototype._evtMouseDown=function(t){if(0===t.button){var e=this.layout,i=t.target,n=a.find(e.handles(),(function(t){return t.contains(i)}));if(n){t.preventDefault(),t.stopPropagation(),document.addEventListener("keydown",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("contextmenu",this,!0);var r=n.getBoundingClientRect(),o=t.clientX-r.left,s=t.clientY-r.top,u=window.getComputedStyle(n),h=l.Drag.overrideCursor(u.cursor);this._pressData={handle:n,deltaX:o,deltaY:s,override:h}}}},e.prototype._evtMouseMove=function(t){if(this._pressData){t.preventDefault(),t.stopPropagation();var e=this.node.getBoundingClientRect(),i=t.clientX-e.left-this._pressData.deltaX,n=t.clientY-e.top-this._pressData.deltaY;this.layout.moveHandle(this._pressData.handle,i,n)}},e.prototype._evtMouseUp=function(t){0===t.button&&(t.preventDefault(),t.stopPropagation(),this._releaseMouse(),h.MessageLoop.postMessage(this,o.LayoutModified))},e.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("keydown",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("contextmenu",this,!0))},e.prototype._showOverlay=function(t,e){var i,n,r,a,s=o.findDropTarget(this,t,e,this._edges),l=s.zone,h=s.target;if("invalid"===l)return this.overlay.hide(100),l;var c=u.ElementExt.boxSizing(this.node),f=this.node.getBoundingClientRect();switch(l){case"root-all":i=c.paddingTop,n=c.paddingLeft,r=c.paddingRight,a=c.paddingBottom;break;case"root-top":i=c.paddingTop,n=c.paddingLeft,r=c.paddingRight,a=f.height*o.GOLDEN_RATIO;break;case"root-left":i=c.paddingTop,n=c.paddingLeft,r=f.width*o.GOLDEN_RATIO,a=c.paddingBottom;break;case"root-right":i=c.paddingTop,n=f.width*o.GOLDEN_RATIO,r=c.paddingRight,a=c.paddingBottom;break;case"root-bottom":i=f.height*o.GOLDEN_RATIO,n=c.paddingLeft,r=c.paddingRight,a=c.paddingBottom;break;case"widget-all":i=h.top,n=h.left,r=h.right,a=h.bottom;break;case"widget-top":i=h.top,n=h.left,r=h.right,a=h.bottom+h.height/2;break;case"widget-left":i=h.top,n=h.left,r=h.right+h.width/2,a=h.bottom;break;case"widget-right":i=h.top,n=h.left+h.width/2,r=h.right,a=h.bottom;break;case"widget-bottom":i=h.top+h.height/2,n=h.left,r=h.right,a=h.bottom;break;case"widget-tab":var p=h.tabBar.node.getBoundingClientRect().height;i=h.top,n=h.left,r=h.right,a=h.bottom+h.height-p;break;default:throw"unreachable"}return this.overlay.show({top:i,left:n,right:r,bottom:a}),l},e.prototype._createTabBar=function(){var t=this._renderer.createTabBar();return o.isGeneratedTabBarProperty.set(t,!0),"single-document"===this._mode&&t.hide(),t.tabsMovable=!0,t.allowDeselect=!1,t.removeBehavior="select-previous-tab",t.insertBehavior="select-tab-if-needed",t.tabMoved.connect(this._onTabMoved,this),t.currentChanged.connect(this._onCurrentChanged,this),t.tabCloseRequested.connect(this._onTabCloseRequested,this),t.tabDetachRequested.connect(this._onTabDetachRequested,this),t.tabActivateRequested.connect(this._onTabActivateRequested,this),t},e.prototype._createHandle=function(){return this._renderer.createHandle()},e.prototype._onTabMoved=function(){h.MessageLoop.postMessage(this,o.LayoutModified)},e.prototype._onCurrentChanged=function(t,e){var i=e.previousTitle,n=e.currentTitle;i&&i.owner.hide(),n&&n.owner.show(),(u.Platform.IS_EDGE||u.Platform.IS_IE)&&h.MessageLoop.flush(),h.MessageLoop.postMessage(this,o.LayoutModified)},e.prototype._onTabActivateRequested=function(t,e){e.title.owner.activate()},e.prototype._onTabCloseRequested=function(t,e){e.title.owner.close()},e.prototype._onTabDetachRequested=function(t,e){var i=this;if(!this._drag){t.releaseMouse();var n=e.title,r=e.tab,o=e.clientX,a=e.clientY,u=new s.MimeData;u.setData("application/vnd.phosphor.widget-factory",(function(){return n.owner}));var h=r.cloneNode(!0);this._drag=new l.Drag({mimeData:u,dragImage:h,proposedAction:"move",supportedActions:"move"}),r.classList.add("p-mod-hidden"),this._drag.start(o,a).then((function(){i._drag=null,r.classList.remove("p-mod-hidden")}))}},e}(g.Widget);e.DockPanel=y,function(t){var e=function(){function t(){this._timer=-1,this._hidden=!0,this.node=document.createElement("div"),this.node.classList.add("p-DockPanel-overlay"),this.node.classList.add("p-mod-hidden"),this.node.style.position="absolute"}return t.prototype.show=function(t){var e=this.node.style;e.top=t.top+"px",e.left=t.left+"px",e.right=t.right+"px",e.bottom=t.bottom+"px",clearTimeout(this._timer),this._timer=-1,this._hidden&&(this._hidden=!1,this.node.classList.remove("p-mod-hidden"))},t.prototype.hide=function(t){var e=this;if(!this._hidden)return t<=0?(clearTimeout(this._timer),this._timer=-1,this._hidden=!0,void this.node.classList.add("p-mod-hidden")):void(-1===this._timer&&(this._timer=window.setTimeout((function(){e._timer=-1,e._hidden=!0,e.node.classList.add("p-mod-hidden")}),t)))},t}();t.Overlay=e;var i=function(){function t(){}return t.prototype.createTabBar=function(){var t=new d.TabBar;return t.addClass("p-DockPanel-tabBar"),t},t.prototype.createHandle=function(){var t=document.createElement("div");return t.className="p-DockPanel-handle",t},t}();t.Renderer=i,t.defaultRenderer=new i}(y=e.DockPanel||(e.DockPanel={})),e.DockPanel=y,function(t){t.GOLDEN_RATIO=.618,t.DEFAULT_EDGES={top:12,right:40,bottom:40,left:40},t.LayoutModified=new h.ConflatableMessage("layout-modified"),t.isGeneratedTabBarProperty=new c.AttachedProperty({name:"isGeneratedTabBar",create:function(){return!1}}),t.createSingleDocumentConfig=function(t){if(t.isEmpty)return{main:null};var e=a.toArray(t.widgets()),i=t.selectedWidgets().next(),n=i?e.indexOf(i):-1;return{main:{type:"tab-area",widgets:e,currentIndex:n}}},t.findDropTarget=function(t,e,i,n){if(!u.ElementExt.hitTest(t.node,e,i))return{zone:"invalid",target:null};var r=t.layout;if(r.isEmpty)return{zone:"root-all",target:null};if("multiple-document"===t.mode){var o=t.node.getBoundingClientRect(),a=e-o.left+1,s=i-o.top+1,l=o.right-e,h=o.bottom-i;switch(Math.min(s,l,h,a)){case s:if(s<n.top)return{zone:"root-top",target:null};break;case l:if(l<n.right)return{zone:"root-right",target:null};break;case h:if(h<n.bottom)return{zone:"root-bottom",target:null};break;case a:if(a<n.left)return{zone:"root-left",target:null};break;default:throw"unreachable"}}var c=r.hitTestTabAreas(e,i);if(!c)return{zone:"invalid",target:null};if("single-document"===t.mode)return{zone:"widget-all",target:c};var f=c.x-c.left+1,p=c.y-c.top+1,d=c.left+c.width-c.x,g=c.top+c.height-c.y;if(p<c.tabBar.node.getBoundingClientRect().height)return{zone:"widget-tab",target:c};var y,v=Math.round(c.width/3),m=Math.round(c.height/3);if(f>v&&d>v&&p>m&&g>m)return{zone:"widget-all",target:c};switch(f/=v,p/=m,d/=v,g/=m,Math.min(f,p,d,g)){case f:y="widget-left";break;case p:y="widget-top";break;case d:y="widget-right";break;case g:y="widget-bottom";break;default:throw"unreachable"}return{zone:y,target:c}},t.getDropRef=function(t){return 0===t.titles.length?null:t.currentTitle?t.currentTitle.owner:t.titles[t.titles.length-1].owner}}(o||(o={}))},7404:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4558),r=i(5932),o=function(){function t(){this._counter=0,this._widgets=[],this._activeWidget=null,this._currentWidget=null,this._numbers=new Map,this._nodes=new Map,this._activeChanged=new r.Signal(this),this._currentChanged=new r.Signal(this)}return t.prototype.dispose=function(){var t=this;this._counter<0||(this._counter=-1,r.Signal.clearData(this),n.each(this._widgets,(function(e){e.node.removeEventListener("focus",t,!0),e.node.removeEventListener("blur",t,!0)})),this._activeWidget=null,this._currentWidget=null,this._nodes.clear(),this._numbers.clear(),this._widgets.length=0)},Object.defineProperty(t.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeChanged",{get:function(){return this._activeChanged},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._counter<0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentWidget",{get:function(){return this._currentWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeWidget",{get:function(){return this._activeWidget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),t.prototype.focusNumber=function(t){var e=this._numbers.get(t);return void 0===e?-1:e},t.prototype.has=function(t){return this._numbers.has(t)},t.prototype.add=function(t){if(!this._numbers.has(t)){var e=t.node.contains(document.activeElement),i=e?this._counter++:-1;this._widgets.push(t),this._numbers.set(t,i),this._nodes.set(t.node,t),t.node.addEventListener("focus",this,!0),t.node.addEventListener("blur",this,!0),t.disposed.connect(this._onWidgetDisposed,this),e&&this._setWidgets(t,t)}},t.prototype.remove=function(t){var e=this;if(this._numbers.has(t)&&(t.disposed.disconnect(this._onWidgetDisposed,this),t.node.removeEventListener("focus",this,!0),t.node.removeEventListener("blur",this,!0),n.ArrayExt.removeFirstOf(this._widgets,t),this._nodes.delete(t.node),this._numbers.delete(t),this._currentWidget===t)){var i=n.filter(this._widgets,(function(t){return-1!==e._numbers.get(t)})),r=n.max(i,(function(t,i){return e._numbers.get(t)-e._numbers.get(i)}))||null;this._setWidgets(r,null)}},t.prototype.handleEvent=function(t){switch(t.type){case"focus":this._evtFocus(t);break;case"blur":this._evtBlur(t)}},t.prototype._setWidgets=function(t,e){var i=this._currentWidget;this._currentWidget=t;var n=this._activeWidget;this._activeWidget=e,i!==t&&this._currentChanged.emit({oldValue:i,newValue:t}),n!==e&&this._activeChanged.emit({oldValue:n,newValue:e})},t.prototype._evtFocus=function(t){var e=this._nodes.get(t.currentTarget);e!==this._currentWidget&&this._numbers.set(e,this._counter++),this._setWidgets(e,e)},t.prototype._evtBlur=function(t){var e=this._nodes.get(t.currentTarget),i=t.relatedTarget;i&&(e.node.contains(i)||n.find(this._widgets,(function(t){return t.node.contains(i)})))||this._setWidgets(this._currentWidget,null)},t.prototype._onWidgetDisposed=function(t){this.remove(t)},t}();e.FocusTracker=o},9388:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(6938),l=i(17),h=i(3095),c=i(1558),f=i(6706),p=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,e)||this;return i._dirty=!1,i._rowSpacing=4,i._columnSpacing=4,i._items=[],i._rowStarts=[],i._columnStarts=[],i._rowSizers=[new h.BoxSizer],i._columnSizers=[new h.BoxSizer],i._box=null,void 0!==e.rowCount&&o.reallocSizers(i._rowSizers,e.rowCount),void 0!==e.columnCount&&o.reallocSizers(i._columnSizers,e.columnCount),void 0!==e.rowSpacing&&(i._rowSpacing=o.clampValue(e.rowSpacing)),void 0!==e.columnSpacing&&(i._columnSpacing=o.clampValue(e.columnSpacing)),i}return r(e,t),e.prototype.dispose=function(){a.each(this._items,(function(t){var e=t.widget;t.dispose(),e.dispose()})),this._box=null,this._items.length=0,this._rowStarts.length=0,this._rowSizers.length=0,this._columnStarts.length=0,this._columnSizers.length=0,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowSizers.length},set:function(t){t!==this.rowCount&&(o.reallocSizers(this._rowSizers,t),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnCount",{get:function(){return this._columnSizers.length},set:function(t){t!==this.columnCount&&(o.reallocSizers(this._columnSizers,t),this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSpacing",{get:function(){return this._rowSpacing},set:function(t){t=o.clampValue(t),this._rowSpacing!==t&&(this._rowSpacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnSpacing",{get:function(){return this._columnSpacing},set:function(t){t=o.clampValue(t),this._columnSpacing!==t&&(this._columnSpacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),e.prototype.rowStretch=function(t){var e=this._rowSizers[t];return e?e.stretch:-1},e.prototype.setRowStretch=function(t,e){var i=this._rowSizers[t];i&&(e=o.clampValue(e),i.stretch!==e&&(i.stretch=e,this.parent&&this.parent.update()))},e.prototype.columnStretch=function(t){var e=this._columnSizers[t];return e?e.stretch:-1},e.prototype.setColumnStretch=function(t,e){var i=this._columnSizers[t];i&&(e=o.clampValue(e),i.stretch!==e&&(i.stretch=e,this.parent&&this.parent.update()))},e.prototype.iter=function(){return a.map(this._items,(function(t){return t.widget}))},e.prototype.addWidget=function(t){-1===a.ArrayExt.findFirstIndex(this._items,(function(e){return e.widget===t}))&&(this._items.push(new c.LayoutItem(t)),this.parent&&this.attachWidget(t))},e.prototype.removeWidget=function(t){var e=a.ArrayExt.findFirstIndex(this._items,(function(e){return e.widget===t}));if(-1===e){var i=a.ArrayExt.removeAt(this._items,e);this.parent&&this.detachWidget(t),i.dispose()}},e.prototype.init=function(){var e=this;t.prototype.init.call(this),a.each(this,(function(t){e.attachWidget(t)}))},e.prototype.attachWidget=function(t){this.parent.isAttached&&u.MessageLoop.sendMessage(t,f.Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,f.Widget.Msg.AfterAttach),this.parent.fit()},e.prototype.detachWidget=function(t){this.parent.isAttached&&u.MessageLoop.sendMessage(t,f.Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&u.MessageLoop.sendMessage(t,f.Widget.Msg.AfterDetach),this.parent.fit()},e.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},e.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._fit=function(){for(var t=0,i=this.rowCount;t<i;++t)this._rowSizers[t].minSize=0;for(t=0,i=this.columnCount;t<i;++t)this._columnSizers[t].minSize=0;var n=this._items.filter((function(t){return!t.isHidden}));for(t=0,i=n.length;t<i;++t)n[t].fit();var r=this.rowCount-1,a=this.columnCount-1;for(n.sort(o.rowSpanCmp),t=0,i=n.length;t<i;++t){var l=n[t],h=e.getCellConfig(l.widget),c=Math.min(h.row,r),p=Math.min(h.row+h.rowSpan-1,r);o.distributeMin(this._rowSizers,c,p,l.minHeight)}for(n.sort(o.columnSpanCmp),t=0,i=n.length;t<i;++t){l=n[t],h=e.getCellConfig(l.widget);var d=Math.min(h.column,a),g=Math.min(h.column+h.columnSpan-1,a);o.distributeMin(this._columnSizers,d,g,l.minWidth)}if("set-no-constraint"!==this.fitPolicy){var y=r*this._rowSpacing,v=a*this._columnSpacing;for(t=0,i=this.rowCount;t<i;++t)y+=this._rowSizers[t].minSize;for(t=0,i=this.columnCount;t<i;++t)v+=this._columnSizers[t].minSize;var m=this._box=s.ElementExt.boxSizing(this.parent.node);v+=m.horizontalSum,y+=m.verticalSum;var b=this.parent.node.style;b.minWidth=v+"px",b.minHeight=y+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,f.Widget.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,f.Widget.Msg.UpdateRequest)}else u.MessageLoop.sendMessage(this.parent,f.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,i){this._dirty=!1,t<0&&(t=this.parent.node.offsetWidth),i<0&&(i=this.parent.node.offsetHeight),this._box||(this._box=s.ElementExt.boxSizing(this.parent.node));var n=this._box.paddingTop,r=this._box.paddingLeft,o=t-this._box.horizontalSum,a=i-this._box.verticalSum,u=this.rowCount-1,l=this.columnCount-1,c=u*this._rowSpacing,f=l*this._columnSpacing;h.BoxEngine.calc(this._rowSizers,Math.max(0,a-c)),h.BoxEngine.calc(this._columnSizers,Math.max(0,o-f));for(var p=0,d=n,g=this.rowCount;p<g;++p)this._rowStarts[p]=d,d+=this._rowSizers[p].size+this._rowSpacing;for(p=0,d=r,g=this.columnCount;p<g;++p)this._columnStarts[p]=d,d+=this._columnSizers[p].size+this._columnSpacing;for(p=0,g=this._items.length;p<g;++p){var y=this._items[p];if(!y.isHidden){var v=e.getCellConfig(y.widget),m=Math.min(v.row,u),b=Math.min(v.column,l),_=Math.min(v.row+v.rowSpan-1,u),w=Math.min(v.column+v.columnSpan-1,l),x=this._columnStarts[b],M=this._rowStarts[m],E=this._columnStarts[w]+this._columnSizers[w].size-x,A=this._rowStarts[_]+this._rowSizers[_].size-M;y.update(x,M,E,A)}}},e}(c.Layout);e.GridLayout=p,function(t){t.getCellConfig=function(t){return o.cellConfigProperty.get(t)},t.setCellConfig=function(t,e){o.cellConfigProperty.set(t,o.normalizeConfig(e))}}(p=e.GridLayout||(e.GridLayout={})),e.GridLayout=p,function(t){t.cellConfigProperty=new l.AttachedProperty({name:"cellConfig",create:function(){return{row:0,column:0,rowSpan:1,columnSpan:1}},changed:function(t){t.parent&&t.parent.layout instanceof p&&t.parent.fit()}}),t.normalizeConfig=function(t){return{row:Math.max(0,Math.floor(t.row||0)),column:Math.max(0,Math.floor(t.column||0)),rowSpan:Math.max(1,Math.floor(t.rowSpan||0)),columnSpan:Math.max(1,Math.floor(t.columnSpan||0))}},t.clampValue=function(t){return Math.max(0,Math.floor(t))},t.rowSpanCmp=function(e,i){var n=t.cellConfigProperty.get(e.widget),r=t.cellConfigProperty.get(i.widget);return n.rowSpan-r.rowSpan},t.columnSpanCmp=function(e,i){var n=t.cellConfigProperty.get(e.widget),r=t.cellConfigProperty.get(i.widget);return n.columnSpan-r.columnSpan},t.reallocSizers=function(t,e){for(e=Math.max(1,Math.floor(e));t.length<e;)t.push(new h.BoxSizer);t.length>e&&(t.length=e)},t.distributeMin=function(t,e,i,n){if(!(i<e))if(e!==i){for(var r=0,o=e;o<=i;++o)r+=t[o].minSize;if(!(r>=n)){var a=(n-r)/(i-e+1);for(o=e;o<=i;++o)t[o].minSize+=a}}else{var s=t[e];s.minSize=Math.max(s.minSize,n)}}}(o||(o={}))},7954:(t,e,i)=>{"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(3095)),n(i(7679)),n(i(22)),n(i(7688)),n(i(2419)),n(i(3009)),n(i(9937)),n(i(7404)),n(i(9388)),n(i(1558)),n(i(4837)),n(i(1131)),n(i(5382)),n(i(2857)),n(i(8066)),n(i(5166)),n(i(2533)),n(i(5690)),n(i(5373)),n(i(9513)),n(i(8796)),n(i(7491)),n(i(5982)),n(i(6706))},1558:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4558),r=i(9847),o=i(6938),a=i(17),s=i(5932),u=i(6706),l=function(){function t(t){void 0===t&&(t={}),this._disposed=!1,this._parent=null,this._fitPolicy=t.fitPolicy||"set-min-size"}return t.prototype.dispose=function(){this._parent=null,this._disposed=!0,s.Signal.clearData(this),a.AttachedProperty.clearData(this)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){if(this._parent!==t){if(this._parent)throw new Error("Cannot change parent widget.");if(t.layout!==this)throw new Error("Invalid parent widget.");this._parent=t,this.init()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fitPolicy",{get:function(){return this._fitPolicy},set:function(t){if(this._fitPolicy!==t&&(this._fitPolicy=t,this._parent)){var e=this._parent.node.style;e.minWidth="",e.minHeight="",e.maxWidth="",e.maxHeight="",this._parent.fit()}},enumerable:!0,configurable:!0}),t.prototype.processParentMessage=function(t){switch(t.type){case"resize":this.onResize(t);break;case"update-request":this.onUpdateRequest(t);break;case"fit-request":this.onFitRequest(t);break;case"before-show":this.onBeforeShow(t);break;case"after-show":this.onAfterShow(t);break;case"before-hide":this.onBeforeHide(t);break;case"after-hide":this.onAfterHide(t);break;case"before-attach":this.onBeforeAttach(t);break;case"after-attach":this.onAfterAttach(t);break;case"before-detach":this.onBeforeDetach(t);break;case"after-detach":this.onAfterDetach(t);break;case"child-removed":this.onChildRemoved(t);break;case"child-shown":this.onChildShown(t);break;case"child-hidden":this.onChildHidden(t)}},t.prototype.init=function(){var t=this;n.each(this,(function(e){e.parent=t.parent}))},t.prototype.onResize=function(t){n.each(this,(function(t){o.MessageLoop.sendMessage(t,u.Widget.ResizeMessage.UnknownSize)}))},t.prototype.onUpdateRequest=function(t){n.each(this,(function(t){o.MessageLoop.sendMessage(t,u.Widget.ResizeMessage.UnknownSize)}))},t.prototype.onBeforeAttach=function(t){n.each(this,(function(e){o.MessageLoop.sendMessage(e,t)}))},t.prototype.onAfterAttach=function(t){n.each(this,(function(e){o.MessageLoop.sendMessage(e,t)}))},t.prototype.onBeforeDetach=function(t){n.each(this,(function(e){o.MessageLoop.sendMessage(e,t)}))},t.prototype.onAfterDetach=function(t){n.each(this,(function(e){o.MessageLoop.sendMessage(e,t)}))},t.prototype.onBeforeShow=function(t){n.each(this,(function(e){e.isHidden||o.MessageLoop.sendMessage(e,t)}))},t.prototype.onAfterShow=function(t){n.each(this,(function(e){e.isHidden||o.MessageLoop.sendMessage(e,t)}))},t.prototype.onBeforeHide=function(t){n.each(this,(function(e){e.isHidden||o.MessageLoop.sendMessage(e,t)}))},t.prototype.onAfterHide=function(t){n.each(this,(function(e){e.isHidden||o.MessageLoop.sendMessage(e,t)}))},t.prototype.onChildRemoved=function(t){this.removeWidget(t.child)},t.prototype.onFitRequest=function(t){},t.prototype.onChildShown=function(t){},t.prototype.onChildHidden=function(t){},t}();e.Layout=l,function(t){t.getHorizontalAlignment=function(t){return h.horizontalAlignmentProperty.get(t)},t.setHorizontalAlignment=function(t,e){h.horizontalAlignmentProperty.set(t,e)},t.getVerticalAlignment=function(t){return h.verticalAlignmentProperty.get(t)},t.setVerticalAlignment=function(t,e){h.verticalAlignmentProperty.set(t,e)}}(l=e.Layout||(e.Layout={})),e.Layout=l;var h,c=function(){function t(t){this._top=NaN,this._left=NaN,this._width=NaN,this._height=NaN,this._minWidth=0,this._minHeight=0,this._maxWidth=1/0,this._maxHeight=1/0,this._disposed=!1,this.widget=t,this.widget.node.style.position="absolute"}return t.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;var t=this.widget.node.style;t.position="",t.top="",t.left="",t.width="",t.height=""}},Object.defineProperty(t.prototype,"minWidth",{get:function(){return this._minWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this._minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this._maxWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.widget.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.widget.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttached",{get:function(){return this.widget.isAttached},enumerable:!0,configurable:!0}),t.prototype.fit=function(){var t=r.ElementExt.sizeLimits(this.widget.node);this._minWidth=t.minWidth,this._minHeight=t.minHeight,this._maxWidth=t.maxWidth,this._maxHeight=t.maxHeight},t.prototype.update=function(t,e,i,n){var r=Math.max(this._minWidth,Math.min(i,this._maxWidth)),a=Math.max(this._minHeight,Math.min(n,this._maxHeight));if(r<i)switch(l.getHorizontalAlignment(this.widget)){case"left":break;case"center":t+=(i-r)/2;break;case"right":t+=i-r;break;default:throw"unreachable"}if(a<n)switch(l.getVerticalAlignment(this.widget)){case"top":break;case"center":e+=(n-a)/2;break;case"bottom":e+=n-a;break;default:throw"unreachable"}var s=!1,h=this.widget.node.style;if(this._top!==e&&(this._top=e,h.top=e+"px"),this._left!==t&&(this._left=t,h.left=t+"px"),this._width!==r&&(s=!0,this._width=r,h.width=r+"px"),this._height!==a&&(s=!0,this._height=a,h.height=a+"px"),s){var c=new u.Widget.ResizeMessage(r,a);o.MessageLoop.sendMessage(this.widget,c)}},t}();e.LayoutItem=c,function(t){function e(t){t.parent&&t.parent.layout&&t.parent.update()}t.horizontalAlignmentProperty=new a.AttachedProperty({name:"horizontalAlignment",create:function(){return"center"},changed:e}),t.verticalAlignmentProperty=new a.AttachedProperty({name:"verticalAlignment",create:function(){return"top"},changed:e})}(h||(h={}))},4837:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=i(4558),u=i(3842),l=i(6539),h=i(9847),c=i(4125),f=i(6938),p=i(5932),d=i(5990),g=i(6706),y=function(t){function e(i){var n=t.call(this,{node:a.createNode()})||this;return n._childIndex=-1,n._activeIndex=-1,n._openTimerID=0,n._closeTimerID=0,n._items=[],n._childMenu=null,n._parentMenu=null,n._aboutToClose=new p.Signal(n),n._menuRequested=new p.Signal(n),n.addClass("p-Menu"),n.setFlag(g.Widget.Flag.DisallowLayout),n.commands=i.commands,n.renderer=i.renderer||e.defaultRenderer,n}return r(e,t),e.prototype.dispose=function(){this.close(),this._items.length=0,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"aboutToClose",{get:function(){return this._aboutToClose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuRequested",{get:function(){return this._menuRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentMenu",{get:function(){return this._parentMenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootMenu",{get:function(){for(var t=this;t._parentMenu;)t=t._parentMenu;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leafMenu",{get:function(){for(var t=this;t._childMenu;)t=t._childMenu;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-Menu-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeItem",{get:function(){return this._items[this._activeIndex]||null},set:function(t){this.activeIndex=t?this._items.indexOf(t):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(t){(t<0||t>=this._items.length)&&(t=-1),-1===t||a.canActivate(this._items[t])||(t=-1),this._activeIndex!==t&&(this._activeIndex=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),e.prototype.activateNextItem=function(){var t=this._items.length,e=this._activeIndex,i=e<t-1?e+1:0,n=0===i?t-1:i-1;this.activeIndex=s.ArrayExt.findFirstIndex(this._items,a.canActivate,i,n)},e.prototype.activatePreviousItem=function(){var t=this._items.length,e=this._activeIndex,i=e<=0?t-1:e-1,n=i===t-1?0:i+1;this.activeIndex=s.ArrayExt.findLastIndex(this._items,a.canActivate,i,n)},e.prototype.triggerActiveItem=function(){if(this.isAttached){var t=this.activeItem;if(t)if(this._cancelOpenTimer(),this._cancelCloseTimer(),"submenu"!==t.type){this.rootMenu.close();var e=t.command,i=t.args;this.commands.isEnabled(e,i)?this.commands.execute(e,i):console.log("Command '"+e+"' is disabled.")}else this._openChildMenu(!0)}},e.prototype.addItem=function(t){return this.insertItem(this._items.length,t)},e.prototype.insertItem=function(t,e){this.isAttached&&this.close(),this.activeIndex=-1;var i=Math.max(0,Math.min(t,this._items.length)),n=a.createItem(this,e);return s.ArrayExt.insert(this._items,i,n),this.update(),n},e.prototype.removeItem=function(t){this.removeItemAt(this._items.indexOf(t))},e.prototype.removeItemAt=function(t){this.isAttached&&this.close(),this.activeIndex=-1,s.ArrayExt.removeAt(this._items,t)&&this.update()},e.prototype.clearItems=function(){this.isAttached&&this.close(),this.activeIndex=-1,0!==this._items.length&&(this._items.length=0,this.update())},e.prototype.open=function(t,e,i){if(void 0===i&&(i={}),!this.isAttached){var n=i.forceX||!1,r=i.forceY||!1;a.openRootMenu(this,t,e,n,r),this.activate()}},e.prototype.handleEvent=function(t){switch(t.type){case"keydown":this._evtKeyDown(t);break;case"mouseup":this._evtMouseUp(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseenter":this._evtMouseEnter(t);break;case"mouseleave":this._evtMouseLeave(t);break;case"mousedown":this._evtMouseDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("keydown",this),this.node.addEventListener("mouseup",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseenter",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this),document.addEventListener("mousedown",this,!0)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mouseup",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseenter",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),document.removeEventListener("mousedown",this,!0)},e.prototype.onActivateRequest=function(t){this.isAttached&&this.node.focus()},e.prototype.onUpdateRequest=function(t){for(var e=this._items,i=this.renderer,n=this._activeIndex,r=a.computeCollapsed(e),o=new Array(e.length),s=0,u=e.length;s<u;++s){var l=e[s],h=s===n,c=r[s];o[s]=i.renderItem({item:l,active:h,collapsed:c})}d.VirtualDOM.render(o,this.contentNode)},e.prototype.onCloseRequest=function(e){this._cancelOpenTimer(),this._cancelCloseTimer(),this.activeIndex=-1;var i=this._childMenu;i&&(this._childIndex=-1,this._childMenu=null,i._parentMenu=null,i.close());var n=this._parentMenu;n&&(this._parentMenu=null,n._childIndex=-1,n._childMenu=null,n.activate()),this.isAttached&&this._aboutToClose.emit(void 0),t.prototype.onCloseRequest.call(this,e)},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation();var e=t.keyCode;if(13!==e)if(27!==e)if(37!==e)if(38!==e)if(39!==e)if(40!==e){var i=c.getKeyboardLayout().keyForKeydownEvent(t);if(i){var n=this._activeIndex+1,r=a.findMnemonic(this._items,i,n);-1===r.index||r.multiple?-1!==r.index?this.activeIndex=r.index:-1!==r.auto&&(this.activeIndex=r.auto):(this.activeIndex=r.index,this.triggerActiveItem())}}else this.activateNextItem();else{var o=this.activeItem;o&&"submenu"===o.type?this.triggerActiveItem():this.rootMenu._menuRequested.emit("next")}else this.activatePreviousItem();else this._parentMenu?this.close():this._menuRequested.emit("previous");else this.close();else this.triggerActiveItem()},e.prototype._evtMouseUp=function(t){0===t.button&&(t.preventDefault(),t.stopPropagation(),this.triggerActiveItem())},e.prototype._evtMouseMove=function(t){var e=s.ArrayExt.findFirstIndex(this.contentNode.children,(function(e){return h.ElementExt.hitTest(e,t.clientX,t.clientY)}));if(e!==this._activeIndex){if(this.activeIndex=e,(e=this.activeIndex)===this._childIndex)return this._cancelOpenTimer(),void this._cancelCloseTimer();-1!==this._childIndex&&this._startCloseTimer(),this._cancelOpenTimer();var i=this.activeItem;i&&"submenu"===i.type&&i.submenu&&this._startOpenTimer()}},e.prototype._evtMouseEnter=function(t){for(var e=this._parentMenu;e;e=e._parentMenu)e._cancelOpenTimer(),e._cancelCloseTimer(),e.activeIndex=e._childIndex},e.prototype._evtMouseLeave=function(t){if(this._cancelOpenTimer(),this._childMenu){var e=t.clientX,i=t.clientY;h.ElementExt.hitTest(this._childMenu.node,e,i)?this._cancelCloseTimer():(this.activeIndex=-1,this._startCloseTimer())}else this.activeIndex=-1},e.prototype._evtMouseDown=function(t){this._parentMenu||(a.hitTestMenus(this,t.clientX,t.clientY)?(t.preventDefault(),t.stopPropagation()):this.close())},e.prototype._openChildMenu=function(t){void 0===t&&(t=!1);var e=this.activeItem;if(e&&"submenu"===e.type&&e.submenu){var i=e.submenu;if(i!==this._childMenu){this._closeChildMenu(),this._childMenu=i,this._childIndex=this._activeIndex,i._parentMenu=this,f.MessageLoop.sendMessage(this,g.Widget.Msg.UpdateRequest);var n=this.contentNode.children[this._activeIndex];a.openSubmenu(i,n),t&&(i.activeIndex=-1,i.activateNextItem()),i.activate()}}else this._closeChildMenu()},e.prototype._closeChildMenu=function(){this._childMenu&&this._childMenu.close()},e.prototype._startOpenTimer=function(){var t=this;0===this._openTimerID&&(this._openTimerID=window.setTimeout((function(){t._openTimerID=0,t._openChildMenu()}),a.TIMER_DELAY))},e.prototype._startCloseTimer=function(){var t=this;0===this._closeTimerID&&(this._closeTimerID=window.setTimeout((function(){t._closeTimerID=0,t._closeChildMenu()}),a.TIMER_DELAY))},e.prototype._cancelOpenTimer=function(){0!==this._openTimerID&&(clearTimeout(this._openTimerID),this._openTimerID=0)},e.prototype._cancelCloseTimer=function(){0!==this._closeTimerID&&(clearTimeout(this._closeTimerID),this._closeTimerID=0)},e}(g.Widget);e.Menu=y,function(t){var e=function(){function t(){}return t.prototype.renderItem=function(t){var e=this.createItemClass(t),i=this.createItemDataset(t);return d.h.li({className:e,dataset:i},this.renderIcon(t),this.renderLabel(t),this.renderShortcut(t),this.renderSubmenu(t))},t.prototype.renderIcon=function(t){var e=this.createIconClass(t);return d.h.div({className:e},t.item.iconLabel)},t.prototype.renderLabel=function(t){var e=this.formatLabel(t);return d.h.div({className:"p-Menu-itemLabel"},e)},t.prototype.renderShortcut=function(t){var e=this.formatShortcut(t);return d.h.div({className:"p-Menu-itemShortcut"},e)},t.prototype.renderSubmenu=function(t){return d.h.div({className:"p-Menu-itemSubmenuIcon"})},t.prototype.createItemClass=function(t){var e="p-Menu-item";t.item.isEnabled||(e+=" p-mod-disabled"),t.item.isToggled&&(e+=" p-mod-toggled"),t.item.isVisible||(e+=" p-mod-hidden"),t.active&&(e+=" p-mod-active"),t.collapsed&&(e+=" p-mod-collapsed");var i=t.item.className;return i&&(e+=" "+i),e},t.prototype.createItemDataset=function(t){var e=t.item,i=e.type,n=e.command,r=e.dataset;return o({},r,"command"===i?{type:i,command:n}:{type:i})},t.prototype.createIconClass=function(t){var e="p-Menu-itemIcon",i=t.item.iconClass;return i?e+" "+i:e},t.prototype.formatLabel=function(t){var e=t.item,i=e.label,n=e.mnemonic;if(n<0||n>=i.length)return i;var r=i.slice(0,n),o=i.slice(n+1),a=i[n];return[r,d.h.span({className:"p-Menu-itemMnemonic"},a),o]},t.prototype.formatShortcut=function(t){var e=t.item.keyBinding;return e?e.keys.map(u.CommandRegistry.formatKeystroke).join(", "):null},t}();t.Renderer=e,t.defaultRenderer=new e}(y=e.Menu||(e.Menu={})),e.Menu=y,function(t){function e(t){return"separator"!==t.type&&t.isEnabled&&t.isVisible}t.TIMER_DELAY=300,t.SUBMENU_OVERLAP=3,t.createNode=function(){var t=document.createElement("div"),e=document.createElement("ul");return e.className="p-Menu-content",t.appendChild(e),t.tabIndex=-1,t},t.canActivate=e,t.createItem=function(t,e){return new i(t.commands,e)},t.hitTestMenus=function(t,e,i){for(var n=t;n;n=n.childMenu)if(h.ElementExt.hitTest(n.node,e,i))return!0;return!1},t.computeCollapsed=function(t){var e=new Array(t.length);s.ArrayExt.fill(e,!1);for(var i=0,n=t.length;i<n;++i)if((a=t[i]).isVisible){if("separator"!==a.type)break;e[i]=!0}for(var r=n-1;r>=0;--r)if((a=t[r]).isVisible){if("separator"!==a.type)break;e[r]=!0}for(var o=!1;++i<r;){var a;(a=t[i]).isVisible&&("separator"!==a.type?o=!1:o?e[i]=!0:o=!0)}return e},t.openRootMenu=function(t,e,i,n,r){f.MessageLoop.sendMessage(t,g.Widget.Msg.UpdateRequest);var o=window.pageXOffset,a=window.pageYOffset,s=document.documentElement.clientWidth,u=document.documentElement.clientHeight,l=u-(r?i:0),h=t.node,c=h.style;c.top="",c.left="",c.width="",c.height="",c.visibility="hidden",c.maxHeight=l+"px",g.Widget.attach(t,document.body);var p=h.getBoundingClientRect(),d=p.width,y=p.height;!n&&e+d>o+s&&(e=o+s-d),!r&&i+y>a+u&&(i>a+u?i=a+u-y:i-=y),c.top=Math.max(0,i)+"px",c.left=Math.max(0,e)+"px",c.visibility=""},t.openSubmenu=function(e,i){f.MessageLoop.sendMessage(e,g.Widget.Msg.UpdateRequest);var n=window.pageXOffset,r=window.pageYOffset,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,s=a,u=e.node,l=u.style;l.top="",l.left="",l.width="",l.height="",l.visibility="hidden",l.maxHeight=s+"px",g.Widget.attach(e,document.body);var c=u.getBoundingClientRect(),p=c.width,d=c.height,y=h.ElementExt.boxSizing(e.node),v=i.getBoundingClientRect(),m=v.right-t.SUBMENU_OVERLAP;m+p>n+o&&(m=v.left+t.SUBMENU_OVERLAP-p);var b=v.top-y.borderTop-y.paddingTop;b+d>r+a&&(b=v.bottom+y.borderBottom+y.paddingBottom-d),l.top=Math.max(0,b)+"px",l.left=Math.max(0,m)+"px",l.visibility=""},t.findMnemonic=function(t,i,n){for(var r=-1,o=-1,a=!1,s=i.toUpperCase(),u=0,l=t.length;u<l;++u){var h=(u+n)%l,c=t[h];if(e(c)){var f=c.label;if(0!==f.length){var p=c.mnemonic;p>=0&&p<f.length?f[p].toUpperCase()===s&&(-1===r?r=h:a=!0):-1===o&&f[0].toUpperCase()===s&&(o=h)}}}return{index:r,multiple:a,auto:o}};var i=function(){function t(t,e){this._commands=t,this.type=e.type||"command",this.command=e.command||"",this.args=e.args||l.JSONExt.emptyObject,this.submenu=e.submenu||null}return Object.defineProperty(t.prototype,"label",{get:function(){return"command"===this.type?this._commands.label(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.label:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mnemonic",{get:function(){return"command"===this.type?this._commands.mnemonic(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.mnemonic:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.iconClass},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconClass",{get:function(){return"command"===this.type?this._commands.iconClass(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconClass:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconLabel",{get:function(){return"command"===this.type?this._commands.iconLabel(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.iconLabel:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return"command"===this.type?this._commands.caption(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.caption:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return"command"===this.type?this._commands.className(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.className:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return"command"===this.type?this._commands.dataset(this.command,this.args):"submenu"===this.type&&this.submenu?this.submenu.title.dataset:{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return"command"===this.type?this._commands.isEnabled(this.command,this.args):"submenu"!==this.type||null!==this.submenu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isToggled",{get:function(){return"command"===this.type&&this._commands.isToggled(this.command,this.args)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return"command"===this.type?this._commands.isVisible(this.command,this.args):"submenu"!==this.type||null!==this.submenu},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyBinding",{get:function(){if("command"===this.type){var t=this.command,e=this.args;return s.ArrayExt.findLastValue(this._commands.keyBindings,(function(i){return i.command===t&&l.JSONExt.deepEqual(i.args,e)}))||null}return null},enumerable:!0,configurable:!0}),t}()}(a||(a={}))},1131:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(4125),l=i(6938),h=i(5990),c=i(6706),f=function(t){function e(i){void 0===i&&(i={});var n=t.call(this,{node:o.createNode()})||this;return n._activeIndex=-1,n._menus=[],n._childMenu=null,n.addClass("p-MenuBar"),n.setFlag(c.Widget.Flag.DisallowLayout),n.renderer=i.renderer||e.defaultRenderer,n}return r(e,t),e.prototype.dispose=function(){this._closeChildMenu(),this._menus.length=0,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"childMenu",{get:function(){return this._childMenu},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-MenuBar-content")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeMenu",{get:function(){return this._menus[this._activeIndex]||null},set:function(t){this.activeIndex=t?this._menus.indexOf(t):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeIndex",{get:function(){return this._activeIndex},set:function(t){(t<0||t>=this._menus.length)&&(t=-1),this._activeIndex!==t&&(this._activeIndex=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menus",{get:function(){return this._menus},enumerable:!0,configurable:!0}),e.prototype.openActiveMenu=function(){-1!==this._activeIndex&&(this._openChildMenu(),this._childMenu&&(this._childMenu.activeIndex=-1,this._childMenu.activateNextItem()))},e.prototype.addMenu=function(t){this.insertMenu(this._menus.length,t)},e.prototype.insertMenu=function(t,e){this._closeChildMenu();var i=this._menus.indexOf(e),n=Math.max(0,Math.min(t,this._menus.length));if(-1===i)return a.ArrayExt.insert(this._menus,n,e),e.addClass("p-MenuBar-menu"),e.aboutToClose.connect(this._onMenuAboutToClose,this),e.menuRequested.connect(this._onMenuMenuRequested,this),e.title.changed.connect(this._onTitleChanged,this),void this.update();n===this._menus.length&&n--,i!==n&&(a.ArrayExt.move(this._menus,i,n),this.update())},e.prototype.removeMenu=function(t){this.removeMenuAt(this._menus.indexOf(t))},e.prototype.removeMenuAt=function(t){this._closeChildMenu();var e=a.ArrayExt.removeAt(this._menus,t);e&&(e.aboutToClose.disconnect(this._onMenuAboutToClose,this),e.menuRequested.disconnect(this._onMenuMenuRequested,this),e.title.changed.disconnect(this._onTitleChanged,this),e.removeClass("p-MenuBar-menu"),this.update())},e.prototype.clearMenus=function(){if(0!==this._menus.length){this._closeChildMenu();for(var t=0,e=this._menus;t<e.length;t++){var i=e[t];i.aboutToClose.disconnect(this._onMenuAboutToClose,this),i.menuRequested.disconnect(this._onMenuMenuRequested,this),i.title.changed.disconnect(this._onTitleChanged,this),i.removeClass("p-MenuBar-menu")}this._menus.length=0,this.update()}},e.prototype.handleEvent=function(t){switch(t.type){case"keydown":this._evtKeyDown(t);break;case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseleave":this._evtMouseLeave(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("keydown",this),this.node.addEventListener("mousedown",this),this.node.addEventListener("mousemove",this),this.node.addEventListener("mouseleave",this),this.node.addEventListener("contextmenu",this)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("keydown",this),this.node.removeEventListener("mousedown",this),this.node.removeEventListener("mousemove",this),this.node.removeEventListener("mouseleave",this),this.node.removeEventListener("contextmenu",this),this._closeChildMenu()},e.prototype.onActivateRequest=function(t){this.isAttached&&this.node.focus()},e.prototype.onUpdateRequest=function(t){for(var e=this._menus,i=this.renderer,n=this._activeIndex,r=new Array(e.length),o=0,a=e.length;o<a;++o){var s=e[o].title,u=o===n;r[o]=i.renderItem({title:s,active:u})}h.VirtualDOM.render(r,this.contentNode)},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation();var e=t.keyCode;if(13!==e&&38!==e&&40!==e){if(27===e)return this._closeChildMenu(),this.activeIndex=-1,void this.node.blur();if(37!==e)if(39!==e){var i=u.getKeyboardLayout().keyForKeydownEvent(t);if(i){var n=this._activeIndex+1,r=o.findMnemonic(this._menus,i,n);-1===r.index||r.multiple?-1!==r.index?this.activeIndex=r.index:-1!==r.auto&&(this.activeIndex=r.auto):(this.activeIndex=r.index,this.openActiveMenu())}}else a=this._activeIndex,s=this._menus.length,this.activeIndex=a===s-1?0:a+1;else{var a=this._activeIndex,s=this._menus.length;this.activeIndex=0===a?s-1:a-1}}else this.openActiveMenu()},e.prototype._evtMouseDown=function(t){if(s.ElementExt.hitTest(this.node,t.clientX,t.clientY)){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();var e=a.ArrayExt.findFirstIndex(this.contentNode.children,(function(e){return s.ElementExt.hitTest(e,t.clientX,t.clientY)}));-1!==e?0===t.button&&(this._childMenu?(this._closeChildMenu(),this.activeIndex=e):(this.activeIndex=e,this._openChildMenu())):this._closeChildMenu()}},e.prototype._evtMouseMove=function(t){var e=a.ArrayExt.findFirstIndex(this.contentNode.children,(function(e){return s.ElementExt.hitTest(e,t.clientX,t.clientY)}));e!==this._activeIndex&&(-1===e&&this._childMenu||(this.activeIndex=e,this._childMenu&&this._openChildMenu()))},e.prototype._evtMouseLeave=function(t){this._childMenu||(this.activeIndex=-1)},e.prototype._openChildMenu=function(){var t=this.activeMenu;if(t){var e=this._childMenu;if(e!==t){this._childMenu=t,e?e.close():(this.addClass("p-mod-active"),document.addEventListener("mousedown",this,!0)),l.MessageLoop.sendMessage(this,c.Widget.Msg.UpdateRequest);var i=this.contentNode.children[this._activeIndex].getBoundingClientRect(),n=i.left,r=i.bottom;t.open(n,r,{forceX:!0,forceY:!0})}}else this._closeChildMenu()},e.prototype._closeChildMenu=function(){if(this._childMenu){this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0);var t=this._childMenu;this._childMenu=null,t.close(),this.activeIndex=-1}},e.prototype._onMenuAboutToClose=function(t){t===this._childMenu&&(this.removeClass("p-mod-active"),document.removeEventListener("mousedown",this,!0),this._childMenu=null,this.activeIndex=-1)},e.prototype._onMenuMenuRequested=function(t,e){if(t===this._childMenu){var i=this._activeIndex,n=this._menus.length;switch(e){case"next":this.activeIndex=i===n-1?0:i+1;break;case"previous":this.activeIndex=0===i?n-1:i-1}this.openActiveMenu()}},e.prototype._onTitleChanged=function(){this.update()},e}(c.Widget);e.MenuBar=f,function(t){var e=function(){function t(){}return t.prototype.renderItem=function(t){var e=this.createItemClass(t),i=this.createItemDataset(t);return h.h.li({className:e,dataset:i},this.renderIcon(t),this.renderLabel(t))},t.prototype.renderIcon=function(t){var e=this.createIconClass(t);return h.h.div({className:e},t.title.iconLabel)},t.prototype.renderLabel=function(t){var e=this.formatLabel(t);return h.h.div({className:"p-MenuBar-itemLabel"},e)},t.prototype.createItemClass=function(t){var e="p-MenuBar-item";return t.title.className&&(e+=" "+t.title.className),t.active&&(e+=" p-mod-active"),e},t.prototype.createItemDataset=function(t){return t.title.dataset},t.prototype.createIconClass=function(t){var e="p-MenuBar-itemIcon",i=t.title.iconClass;return i?e+" "+i:e},t.prototype.formatLabel=function(t){var e=t.title,i=e.label,n=e.mnemonic;if(n<0||n>=i.length)return i;var r=i.slice(0,n),o=i.slice(n+1),a=i[n];return[r,h.h.span({className:"p-MenuBar-itemMnemonic"},a),o]},t}();t.Renderer=e,t.defaultRenderer=new e}(f=e.MenuBar||(e.MenuBar={})),e.MenuBar=f,function(t){t.createNode=function(){var t=document.createElement("div"),e=document.createElement("ul");return e.className="p-MenuBar-content",t.appendChild(e),t.tabIndex=-1,t},t.findMnemonic=function(t,e,i){for(var n=-1,r=-1,o=!1,a=e.toUpperCase(),s=0,u=t.length;s<u;++s){var l=(s+i)%u,h=t[l].title;if(0!==h.label.length){var c=h.mnemonic;c>=0&&c<h.label.length?h.label[c].toUpperCase()===a&&(-1===n?n=l:o=!0):-1===r&&h.label[0].toUpperCase()===a&&(r=l)}}return{index:n,multiple:o,auto:r}}}(o||(o={}))},5382:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(2857),s=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;return i.addClass("p-Panel"),i.layout=o.createLayout(e),i}return r(e,t),Object.defineProperty(e.prototype,"widgets",{get:function(){return this.layout.widgets},enumerable:!0,configurable:!0}),e.prototype.addWidget=function(t){this.layout.addWidget(t)},e.prototype.insertWidget=function(t,e){this.layout.insertWidget(t,e)},e}(i(6706).Widget);e.Panel=s,function(t){t.createLayout=function(t){return t.layout||new a.PanelLayout}}(o||(o={}))},2857:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4558),a=i(6938),s=i(1558),u=i(6706),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._widgets=[],e}return r(e,t),e.prototype.dispose=function(){for(;this._widgets.length>0;)this._widgets.pop().dispose();t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"widgets",{get:function(){return this._widgets},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return o.iter(this._widgets)},e.prototype.addWidget=function(t){this.insertWidget(this._widgets.length,t)},e.prototype.insertWidget=function(t,e){e.parent=this.parent;var i=this._widgets.indexOf(e),n=Math.max(0,Math.min(t,this._widgets.length));if(-1===i)return o.ArrayExt.insert(this._widgets,n,e),void(this.parent&&this.attachWidget(n,e));n===this._widgets.length&&n--,i!==n&&(o.ArrayExt.move(this._widgets,i,n),this.parent&&this.moveWidget(i,n,e))},e.prototype.removeWidget=function(t){this.removeWidgetAt(this._widgets.indexOf(t))},e.prototype.removeWidgetAt=function(t){var e=o.ArrayExt.removeAt(this._widgets,t);e&&this.parent&&this.detachWidget(t,e)},e.prototype.init=function(){var e=this;t.prototype.init.call(this),o.each(this,(function(t,i){e.attachWidget(i,t)}))},e.prototype.attachWidget=function(t,e){var i=this.parent.node.children[t];this.parent.isAttached&&a.MessageLoop.sendMessage(e,u.Widget.Msg.BeforeAttach),this.parent.node.insertBefore(e.node,i),this.parent.isAttached&&a.MessageLoop.sendMessage(e,u.Widget.Msg.AfterAttach)},e.prototype.moveWidget=function(t,e,i){this.parent.isAttached&&a.MessageLoop.sendMessage(i,u.Widget.Msg.BeforeDetach),this.parent.node.removeChild(i.node),this.parent.isAttached&&a.MessageLoop.sendMessage(i,u.Widget.Msg.AfterDetach);var n=this.parent.node.children[e];this.parent.isAttached&&a.MessageLoop.sendMessage(i,u.Widget.Msg.BeforeAttach),this.parent.node.insertBefore(i.node,n),this.parent.isAttached&&a.MessageLoop.sendMessage(i,u.Widget.Msg.AfterAttach)},e.prototype.detachWidget=function(t,e){this.parent.isAttached&&a.MessageLoop.sendMessage(e,u.Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&a.MessageLoop.sendMessage(e,u.Widget.Msg.AfterDetach)},e}(s.Layout);e.PanelLayout=l},8066:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(9847),s=i(4177),u=i(5932),l=i(6706),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,{node:o.createNode()})||this;return i._onRepeat=function(){if(i._repeatTimer=-1,i._pressData){var t=i._pressData.part;if("thumb"!==t){i._repeatTimer=window.setTimeout(i._onRepeat,20);var e=i._pressData.mouseX,n=i._pressData.mouseY;if("decrement"!==t)if("increment"!==t){if("track"===t){if(!a.ElementExt.hitTest(i.trackNode,e,n))return;var r=i.thumbNode;if(a.ElementExt.hitTest(r,e,n))return;var o,s=r.getBoundingClientRect();return o="horizontal"===i._orientation?e<s.left?"decrement":"increment":n<s.top?"decrement":"increment",void i._pageRequested.emit(o)}}else{if(!a.ElementExt.hitTest(i.incrementNode,e,n))return;i._stepRequested.emit("increment")}else{if(!a.ElementExt.hitTest(i.decrementNode,e,n))return;i._stepRequested.emit("decrement")}}}},i._value=0,i._page=10,i._maximum=100,i._repeatTimer=-1,i._pressData=null,i._thumbMoved=new u.Signal(i),i._stepRequested=new u.Signal(i),i._pageRequested=new u.Signal(i),i.addClass("p-ScrollBar"),i.setFlag(l.Widget.Flag.DisallowLayout),i._orientation=e.orientation||"vertical",i.dataset.orientation=i._orientation,void 0!==e.maximum&&(i._maximum=Math.max(0,e.maximum)),void 0!==e.page&&(i._page=Math.max(0,e.page)),void 0!==e.value&&(i._value=Math.max(0,Math.min(e.value,i._maximum))),i}return r(e,t),Object.defineProperty(e.prototype,"thumbMoved",{get:function(){return this._thumbMoved},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stepRequested",{get:function(){return this._stepRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageRequested",{get:function(){return this._pageRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!==t&&(this._releaseMouse(),this._orientation=t,this.dataset.orientation=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=Math.max(0,Math.min(t,this._maximum)),this._value!==t&&(this._value=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(t){t=Math.max(0,t),this._page!==t&&(this._page=t,this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t=Math.max(0,t),this._maximum!==t&&(this._maximum=t,this._value=Math.min(this._value,t),this.update())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decrementNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-button")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incrementNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-button")[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-track")[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbNode",{get:function(){return this.node.getElementsByClassName("p-ScrollBar-thumb")[0]},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("mousedown",this),this.update()},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("mousedown",this),this._releaseMouse()},e.prototype.onUpdateRequest=function(t){var e=100*this._value/this._maximum,i=100*this._page/(this._page+this._maximum);e=Math.max(0,Math.min(e,100)),i=Math.max(0,Math.min(i,100));var n=this.thumbNode.style;"horizontal"===this._orientation?(n.top="",n.height="",n.left=e+"%",n.width=i+"%",n.transform="translate("+-e+"%, 0%)"):(n.left="",n.width="",n.top=e+"%",n.height=i+"%",n.transform="translate(0%, "+-e+"%)")},e.prototype._evtKeyDown=function(t){if(t.preventDefault(),t.stopPropagation(),27===t.keyCode){var e=this._pressData?this._pressData.value:-1;this._releaseMouse(),-1!==e&&this._moveThumb(e)}},e.prototype._evtMouseDown=function(t){if(0===t.button&&(this.activate(),!this._pressData)){var e=o.findPart(this,t.target);if(e){t.preventDefault(),t.stopPropagation();var i=s.Drag.overrideCursor("default");if(this._pressData={part:e,override:i,delta:-1,value:-1,mouseX:t.clientX,mouseY:t.clientY},document.addEventListener("mousemove",this,!0),document.addEventListener("mouseup",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0),"thumb"===e){var n=this.thumbNode,r=n.getBoundingClientRect();return"horizontal"===this._orientation?this._pressData.delta=t.clientX-r.left:this._pressData.delta=t.clientY-r.top,n.classList.add("p-mod-active"),void(this._pressData.value=this._value)}if("track"===e){r=this.thumbNode.getBoundingClientRect();var a;return a="horizontal"===this._orientation?t.clientX<r.left?"decrement":"increment":t.clientY<r.top?"decrement":"increment",this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._pageRequested.emit(a)}return"decrement"===e?(this.decrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("decrement")):"increment"===e?(this.incrementNode.classList.add("p-mod-active"),this._repeatTimer=window.setTimeout(this._onRepeat,350),void this._stepRequested.emit("increment")):void 0}}},e.prototype._evtMouseMove=function(t){if(this._pressData&&(t.preventDefault(),t.stopPropagation(),this._pressData.mouseX=t.clientX,this._pressData.mouseY=t.clientY,"thumb"===this._pressData.part)){var e,i,n=this.thumbNode.getBoundingClientRect(),r=this.trackNode.getBoundingClientRect();"horizontal"===this._orientation?(e=t.clientX-r.left-this._pressData.delta,i=r.width-n.width):(e=t.clientY-r.top-this._pressData.delta,i=r.height-n.height);var o=0===i?0:e*this._maximum/i;this._moveThumb(o)}},e.prototype._evtMouseUp=function(t){0===t.button&&(t.preventDefault(),t.stopPropagation(),this._releaseMouse())},e.prototype._releaseMouse=function(){this._pressData&&(clearTimeout(this._repeatTimer),this._repeatTimer=-1,this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),this.thumbNode.classList.remove("p-mod-active"),this.decrementNode.classList.remove("p-mod-active"),this.incrementNode.classList.remove("p-mod-active"))},e.prototype._moveThumb=function(t){t=Math.max(0,Math.min(t,this._maximum)),this._value!==t&&(this._value=t,this.update(),this._thumbMoved.emit(t))},e}(l.Widget);e.ScrollBar=h,function(t){t.createNode=function(){var t=document.createElement("div"),e=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return e.className="p-ScrollBar-button",i.className="p-ScrollBar-button",e.dataset.action="decrement",i.dataset.action="increment",n.className="p-ScrollBar-track",r.className="p-ScrollBar-thumb",n.appendChild(r),t.appendChild(e),t.appendChild(n),t.appendChild(i),t},t.findPart=function(t,e){return t.thumbNode.contains(e)?"thumb":t.trackNode.contains(e)?"track":t.decrementNode.contains(e)?"decrement":t.incrementNode.contains(e)?"increment":null}}(o||(o={}))},5166:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4558),a=i(6938),s=i(1558),u=i(6706),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._widget=null,e}return r(e,t),e.prototype.dispose=function(){if(this._widget){var e=this._widget;this._widget=null,e.dispose()}t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"widget",{get:function(){return this._widget},set:function(t){t&&(t.parent=this.parent),this._widget!==t&&(this._widget&&this._widget.dispose(),this._widget=t,this.parent&&t&&this.attachWidget(t))},enumerable:!0,configurable:!0}),e.prototype.iter=function(){return this._widget?o.once(this._widget):o.empty()},e.prototype.removeWidget=function(t){this._widget===t&&(this._widget=null,this.parent&&this.detachWidget(t))},e.prototype.init=function(){var e=this;t.prototype.init.call(this),o.each(this,(function(t){e.attachWidget(t)}))},e.prototype.attachWidget=function(t){this.parent.isAttached&&a.MessageLoop.sendMessage(t,u.Widget.Msg.BeforeAttach),this.parent.node.appendChild(t.node),this.parent.isAttached&&a.MessageLoop.sendMessage(t,u.Widget.Msg.AfterAttach)},e.prototype.detachWidget=function(t){this.parent.isAttached&&a.MessageLoop.sendMessage(t,u.Widget.Msg.BeforeDetach),this.parent.node.removeChild(t.node),this.parent.isAttached&&a.MessageLoop.sendMessage(t,u.Widget.Msg.AfterDetach)},e}(s.Layout);e.SingletonLayout=l},2533:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(6938),l=i(17),h=i(3095),c=i(1558),f=i(2857),p=i(6706),d=function(t){function e(e){var i=t.call(this)||this;return i._fixed=0,i._spacing=4,i._dirty=!1,i._hasNormedSizes=!1,i._sizers=[],i._items=[],i._handles=[],i._box=null,i._alignment="start",i._orientation="horizontal",i.renderer=e.renderer,void 0!==e.orientation&&(i._orientation=e.orientation),void 0!==e.alignment&&(i._alignment=e.alignment),void 0!==e.spacing&&(i._spacing=o.clampSpacing(e.spacing)),i}return r(e,t),e.prototype.dispose=function(){a.each(this._items,(function(t){t.dispose()})),this._box=null,this._items.length=0,this._sizers.length=0,this._handles.length=0,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!==t&&(this._orientation=t,this.parent&&(this.parent.dataset.orientation=t,this.parent.fit()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},set:function(t){this._alignment!==t&&(this._alignment=t,this.parent&&(this.parent.dataset.alignment=t,this.parent.update()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this._spacing},set:function(t){t=o.clampSpacing(t),this._spacing!==t&&(this._spacing=t,this.parent&&this.parent.fit())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handles",{get:function(){return this._handles},enumerable:!0,configurable:!0}),e.prototype.relativeSizes=function(){return o.normalize(this._sizers.map((function(t){return t.size})))},e.prototype.setRelativeSizes=function(t){for(var e=this._sizers.length,i=t.slice(0,e);i.length<e;)i.push(0);for(var n=o.normalize(i),r=0;r<e;++r){var a=this._sizers[r];a.sizeHint=n[r],a.size=n[r]}this._hasNormedSizes=!0,this.parent&&this.parent.update()},e.prototype.moveHandle=function(t,e){var i,n=this._handles[t];if(n&&!n.classList.contains("p-mod-hidden")&&0!=(i="horizontal"===this._orientation?e-n.offsetLeft:e-n.offsetTop)){for(var r=0,o=this._sizers;r<o.length;r++){var a=o[r];a.size>0&&(a.sizeHint=a.size)}h.BoxEngine.adjust(this._sizers,t,i),this.parent&&this.parent.update()}},e.prototype.init=function(){this.parent.dataset.orientation=this.orientation,this.parent.dataset.alignment=this.alignment,t.prototype.init.call(this)},e.prototype.attachWidget=function(t,e){var i=new c.LayoutItem(e),n=o.createHandle(this.renderer),r=o.averageSize(this._sizers),s=o.createSizer(r);a.ArrayExt.insert(this._items,t,i),a.ArrayExt.insert(this._sizers,t,s),a.ArrayExt.insert(this._handles,t,n),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.node.appendChild(n),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.AfterAttach),this.parent.fit()},e.prototype.moveWidget=function(t,e,i){a.ArrayExt.move(this._items,t,e),a.ArrayExt.move(this._sizers,t,e),a.ArrayExt.move(this._handles,t,e),this.parent.fit()},e.prototype.detachWidget=function(t,e){var i=a.ArrayExt.removeAt(this._items,t),n=a.ArrayExt.removeAt(this._handles,t);a.ArrayExt.removeAt(this._sizers,t),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.node.removeChild(n),this.parent.isAttached&&u.MessageLoop.sendMessage(e,p.Widget.Msg.AfterDetach),i.dispose(),this.parent.fit()},e.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},e.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._fit=function(){for(var t=0,i=-1,n=0,r=this._items.length;n<r;++n)this._items[n].isHidden?this._handles[n].classList.add("p-mod-hidden"):(this._handles[n].classList.remove("p-mod-hidden"),i=n,t++);-1!==i&&this._handles[i].classList.add("p-mod-hidden"),this._fixed=this._spacing*Math.max(0,t-1);var o="horizontal"===this._orientation,a=o?this._fixed:0,l=o?0:this._fixed;for(n=0,r=this._items.length;n<r;++n){var h=this._items[n],c=this._sizers[n];c.size>0&&(c.sizeHint=c.size),h.isHidden?(c.minSize=0,c.maxSize=0):(h.fit(),c.stretch=e.getStretch(h.widget),o?(c.minSize=h.minWidth,c.maxSize=h.maxWidth,a+=h.minWidth,l=Math.max(l,h.minHeight)):(c.minSize=h.minHeight,c.maxSize=h.maxHeight,l+=h.minHeight,a=Math.max(a,h.minWidth)))}var f=this._box=s.ElementExt.boxSizing(this.parent.node);a+=f.horizontalSum,l+=f.verticalSum;var d=this.parent.node.style;d.minWidth=a+"px",d.minHeight=l+"px",this._dirty=!0,this.parent.parent&&u.MessageLoop.sendMessage(this.parent.parent,p.Widget.Msg.FitRequest),this._dirty&&u.MessageLoop.sendMessage(this.parent,p.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,e){this._dirty=!1;for(var i=0,n=0,r=this._items.length;n<r;++n)i+=+!this._items[n].isHidden;if(0!==i){t<0&&(t=this.parent.node.offsetWidth),e<0&&(e=this.parent.node.offsetHeight),this._box||(this._box=s.ElementExt.boxSizing(this.parent.node));var o,a=this._box.paddingTop,u=this._box.paddingLeft,l=t-this._box.horizontalSum,c=e-this._box.verticalSum,f="horizontal"===this._orientation;if(o=f?Math.max(0,l-this._fixed):Math.max(0,c-this._fixed),this._hasNormedSizes){for(var p=0,d=this._sizers;p<d.length;p++)d[p].sizeHint*=o;this._hasNormedSizes=!1}var g=h.BoxEngine.calc(this._sizers,o),y=0,v=0;if(g>0)switch(this._alignment){case"start":break;case"center":y=0,v=g/2;break;case"end":y=0,v=g;break;case"justify":y=g/i,v=0;break;default:throw"unreachable"}for(n=0,r=this._items.length;n<r;++n){var m=this._items[n];if(!m.isHidden){var b=this._sizers[n].size,_=this._handles[n].style;f?(m.update(u+v,a,b+y,c),u+=b+y,_.top=a+"px",_.left=u+v+"px",_.width=this._spacing+"px",_.height=c+"px",u+=this._spacing):(m.update(u,a+v,l,b+y),a+=b+y,_.top=a+v+"px",_.left=u+"px",_.width=l+"px",_.height=this._spacing+"px",a+=this._spacing)}}}},e}(f.PanelLayout);e.SplitLayout=d,function(t){t.getStretch=function(t){return o.stretchProperty.get(t)},t.setStretch=function(t,e){o.stretchProperty.set(t,e)}}(d=e.SplitLayout||(e.SplitLayout={})),e.SplitLayout=d,function(t){t.stretchProperty=new l.AttachedProperty({name:"stretch",create:function(){return 0},coerce:function(t,e){return Math.max(0,Math.floor(e))},changed:function(t){t.parent&&t.parent.layout instanceof d&&t.parent.fit()}}),t.createSizer=function(t){var e=new h.BoxSizer;return e.sizeHint=Math.floor(t),e},t.createHandle=function(t){var e=t.createHandle();return e.style.position="absolute",e},t.clampSpacing=function(t){return Math.max(0,Math.floor(t))},t.averageSize=function(t){return t.reduce((function(t,e){return t+e.size}),0)/t.length||0},t.normalize=function(t){var e=t.length;if(0===e)return[];var i=t.reduce((function(t,e){return t+Math.abs(e)}),0);return 0===i?t.map((function(t){return 1/e})):t.map((function(t){return t/i}))}}(o||(o={}))},5690:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(4177),u=i(5382),l=i(2533),h=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,{layout:o.createLayout(e)})||this;return i._pressData=null,i.addClass("p-SplitPanel"),i}return r(e,t),e.prototype.dispose=function(){this._releaseMouse(),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"orientation",{get:function(){return this.layout.orientation},set:function(t){this.layout.orientation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this.layout.alignment},set:function(t){this.layout.alignment=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){return this.layout.spacing},set:function(t){this.layout.spacing=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this.layout.renderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handles",{get:function(){return this.layout.handles},enumerable:!0,configurable:!0}),e.prototype.relativeSizes=function(){return this.layout.relativeSizes()},e.prototype.setRelativeSizes=function(t){this.layout.setRelativeSizes(t)},e.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("mousedown",this)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("mousedown",this),this._releaseMouse()},e.prototype.onChildAdded=function(t){t.child.addClass("p-SplitPanel-child"),this._releaseMouse()},e.prototype.onChildRemoved=function(t){t.child.removeClass("p-SplitPanel-child"),this._releaseMouse()},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),27===t.keyCode&&this._releaseMouse()},e.prototype._evtMouseDown=function(t){if(0===t.button){var e=this.layout,i=a.ArrayExt.findFirstIndex(e.handles,(function(e){return e.contains(t.target)}));if(-1!==i){var n;t.preventDefault(),t.stopPropagation(),document.addEventListener("mouseup",this,!0),document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0);var r=e.handles[i],o=r.getBoundingClientRect();n="horizontal"===e.orientation?t.clientX-o.left:t.clientY-o.top;var u=window.getComputedStyle(r),l=s.Drag.overrideCursor(u.cursor);this._pressData={index:i,delta:n,override:l}}}},e.prototype._evtMouseMove=function(t){var e;t.preventDefault(),t.stopPropagation();var i=this.layout,n=this.node.getBoundingClientRect();e="horizontal"===i.orientation?t.clientX-n.left-this._pressData.delta:t.clientY-n.top-this._pressData.delta,i.moveHandle(this._pressData.index,e)},e.prototype._evtMouseUp=function(t){0===t.button&&(t.preventDefault(),t.stopPropagation(),this._releaseMouse())},e.prototype._releaseMouse=function(){this._pressData&&(this._pressData.override.dispose(),this._pressData=null,document.removeEventListener("mouseup",this,!0),document.removeEventListener("mousemove",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0))},e}(u.Panel);e.SplitPanel=h,function(t){var e=function(){function t(){}return t.prototype.createHandle=function(){var t=document.createElement("div");return t.className="p-SplitPanel-handle",t},t}();t.Renderer=e,t.defaultRenderer=new e,t.getStretch=function(t){return l.SplitLayout.getStretch(t)},t.setStretch=function(t,e){l.SplitLayout.setStretch(t,e)}}(h=e.SplitPanel||(e.SplitPanel={})),e.SplitPanel=h,function(t){t.createLayout=function(t){return t.layout||new l.SplitLayout({renderer:t.renderer||h.defaultRenderer,orientation:t.orientation,alignment:t.alignment,spacing:t.spacing})}}(o||(o={}))},5373:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4558),a=i(9847),s=i(6938),u=i(1558),l=i(2857),h=i(6706),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._dirty=!1,e._items=[],e._box=null,e}return r(e,t),e.prototype.dispose=function(){o.each(this._items,(function(t){t.dispose()})),this._box=null,this._items.length=0,t.prototype.dispose.call(this)},e.prototype.attachWidget=function(t,e){o.ArrayExt.insert(this._items,t,new u.LayoutItem(e)),this.parent.isAttached&&s.MessageLoop.sendMessage(e,h.Widget.Msg.BeforeAttach),this.parent.node.appendChild(e.node),this.parent.isAttached&&s.MessageLoop.sendMessage(e,h.Widget.Msg.AfterAttach),this.parent.fit()},e.prototype.moveWidget=function(t,e,i){o.ArrayExt.move(this._items,t,e),this.parent.update()},e.prototype.detachWidget=function(t,e){var i=o.ArrayExt.removeAt(this._items,t);this.parent.isAttached&&s.MessageLoop.sendMessage(e,h.Widget.Msg.BeforeDetach),this.parent.node.removeChild(e.node),this.parent.isAttached&&s.MessageLoop.sendMessage(e,h.Widget.Msg.AfterDetach),i.widget.node.style.zIndex="",i.dispose(),this.parent.fit()},e.prototype.onBeforeShow=function(e){t.prototype.onBeforeShow.call(this,e),this.parent.update()},e.prototype.onBeforeAttach=function(e){t.prototype.onBeforeAttach.call(this,e),this.parent.fit()},e.prototype.onChildShown=function(t){this.parent.fit()},e.prototype.onChildHidden=function(t){this.parent.fit()},e.prototype.onResize=function(t){this.parent.isVisible&&this._update(t.width,t.height)},e.prototype.onUpdateRequest=function(t){this.parent.isVisible&&this._update(-1,-1)},e.prototype.onFitRequest=function(t){this.parent.isAttached&&this._fit()},e.prototype._fit=function(){for(var t=0,e=0,i=0,n=this._items.length;i<n;++i){var r=this._items[i];r.isHidden||(r.fit(),t=Math.max(t,r.minWidth),e=Math.max(e,r.minHeight))}var o=this._box=a.ElementExt.boxSizing(this.parent.node);t+=o.horizontalSum,e+=o.verticalSum;var u=this.parent.node.style;u.minWidth=t+"px",u.minHeight=e+"px",this._dirty=!0,this.parent.parent&&s.MessageLoop.sendMessage(this.parent.parent,h.Widget.Msg.FitRequest),this._dirty&&s.MessageLoop.sendMessage(this.parent,h.Widget.Msg.UpdateRequest)},e.prototype._update=function(t,e){this._dirty=!1;for(var i=0,n=0,r=this._items.length;n<r;++n)i+=+!this._items[n].isHidden;if(0!==i){t<0&&(t=this.parent.node.offsetWidth),e<0&&(e=this.parent.node.offsetHeight),this._box||(this._box=a.ElementExt.boxSizing(this.parent.node));var o=this._box.paddingTop,s=this._box.paddingLeft,u=t-this._box.horizontalSum,l=e-this._box.verticalSum;for(n=0,r=this._items.length;n<r;++n){var h=this._items[n];h.isHidden||(h.widget.node.style.zIndex=""+n,h.update(s,o,u,l))}}},e}(l.PanelLayout);e.StackedLayout=c},9513:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(5932),s=i(5382),u=i(5373),l=function(t){function e(e){void 0===e&&(e={});var i=t.call(this,{layout:o.createLayout(e)})||this;return i._widgetRemoved=new a.Signal(i),i.addClass("p-StackedPanel"),i}return r(e,t),Object.defineProperty(e.prototype,"widgetRemoved",{get:function(){return this._widgetRemoved},enumerable:!0,configurable:!0}),e.prototype.onChildAdded=function(t){t.child.addClass("p-StackedPanel-child")},e.prototype.onChildRemoved=function(t){t.child.removeClass("p-StackedPanel-child"),this._widgetRemoved.emit(t.child)},e}(s.Panel);e.StackedPanel=l,function(t){t.createLayout=function(t){return t.layout||new u.StackedLayout}}(o||(o={}))},8796:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(9847),u=i(4177),l=i(6938),h=i(5932),c=i(5990),f=i(5982),p=i(6706),d=function(t){function e(i){void 0===i&&(i={});var n=t.call(this,{node:o.createNode()})||this;return n._currentIndex=-1,n._titles=[],n._previousTitle=null,n._dragData=null,n._tabMoved=new h.Signal(n),n._currentChanged=new h.Signal(n),n._tabCloseRequested=new h.Signal(n),n._tabDetachRequested=new h.Signal(n),n._tabActivateRequested=new h.Signal(n),n.addClass("p-TabBar"),n.setFlag(p.Widget.Flag.DisallowLayout),n.tabsMovable=i.tabsMovable||!1,n.allowDeselect=i.allowDeselect||!1,n.insertBehavior=i.insertBehavior||"select-tab-if-needed",n.removeBehavior=i.removeBehavior||"select-tab-after",n.renderer=i.renderer||e.defaultRenderer,n._orientation=i.orientation||"horizontal",n.dataset.orientation=n._orientation,n}return r(e,t),e.prototype.dispose=function(){this._releaseMouse(),this._titles.length=0,this._previousTitle=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabMoved",{get:function(){return this._tabMoved},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabActivateRequested",{get:function(){return this._tabActivateRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabCloseRequested",{get:function(){return this._tabCloseRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabDetachRequested",{get:function(){return this._tabDetachRequested},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTitle",{get:function(){return this._titles[this._currentIndex]||null},set:function(t){this.currentIndex=t?this._titles.indexOf(t):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(t){if((t<0||t>=this._titles.length)&&(t=-1),this._currentIndex!==t){var e=this._currentIndex,i=this._titles[e]||null,n=t,r=this._titles[n]||null;this._currentIndex=n,this._previousTitle=i,this.update(),this._currentChanged.emit({previousIndex:e,previousTitle:i,currentIndex:n,currentTitle:r})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation!==t&&(this._releaseMouse(),this._orientation=t,this.dataset.orientation=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titles",{get:function(){return this._titles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentNode",{get:function(){return this.node.getElementsByClassName("p-TabBar-content")[0]},enumerable:!0,configurable:!0}),e.prototype.addTab=function(t){return this.insertTab(this._titles.length,t)},e.prototype.insertTab=function(t,e){this._releaseMouse();var i=o.asTitle(e),n=this._titles.indexOf(i),r=Math.max(0,Math.min(t,this._titles.length));return-1===n?(a.ArrayExt.insert(this._titles,r,i),i.changed.connect(this._onTitleChanged,this),this.update(),this._adjustCurrentForInsert(r,i),i):(r===this._titles.length&&r--,n===r||(a.ArrayExt.move(this._titles,n,r),this.update(),this._adjustCurrentForMove(n,r)),i)},e.prototype.removeTab=function(t){this.removeTabAt(this._titles.indexOf(t))},e.prototype.removeTabAt=function(t){this._releaseMouse();var e=a.ArrayExt.removeAt(this._titles,t);e&&(e.changed.disconnect(this._onTitleChanged,this),e===this._previousTitle&&(this._previousTitle=null),this.update(),this._adjustCurrentForRemove(t,e))},e.prototype.clearTabs=function(){if(0!==this._titles.length){this._releaseMouse();for(var t=0,e=this._titles;t<e.length;t++)e[t].changed.disconnect(this._onTitleChanged,this);var i=this.currentIndex,n=this.currentTitle;this._currentIndex=-1,this._previousTitle=null,this._titles.length=0,this.update(),-1!==i&&this._currentChanged.emit({previousIndex:i,previousTitle:n,currentIndex:-1,currentTitle:null})}},e.prototype.releaseMouse=function(){this._releaseMouse()},e.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._evtMouseDown(t);break;case"mousemove":this._evtMouseMove(t);break;case"mouseup":this._evtMouseUp(t);break;case"keydown":this._evtKeyDown(t);break;case"contextmenu":t.preventDefault(),t.stopPropagation()}},e.prototype.onBeforeAttach=function(t){this.node.addEventListener("mousedown",this)},e.prototype.onAfterDetach=function(t){this.node.removeEventListener("mousedown",this),this._releaseMouse()},e.prototype.onUpdateRequest=function(t){for(var e=this._titles,i=this.renderer,n=this.currentTitle,r=new Array(e.length),o=0,a=e.length;o<a;++o){var s=e[o],u=s===n,l=u?a:a-o-1;r[o]=i.renderTab({title:s,current:u,zIndex:l})}c.VirtualDOM.render(r,this.contentNode)},e.prototype._evtKeyDown=function(t){t.preventDefault(),t.stopPropagation(),27===t.keyCode&&this._releaseMouse()},e.prototype._evtMouseDown=function(t){if((0===t.button||1===t.button)&&!this._dragData){var e=this.contentNode.children,i=a.ArrayExt.findFirstIndex(e,(function(e){return s.ElementExt.hitTest(e,t.clientX,t.clientY)}));if(-1!==i&&(t.preventDefault(),t.stopPropagation(),this._dragData={tab:e[i],index:i,pressX:t.clientX,pressY:t.clientY,tabPos:-1,tabSize:-1,tabPressPos:-1,targetIndex:-1,tabLayout:null,contentRect:null,override:null,dragActive:!1,dragAborted:!1,detachRequested:!1},document.addEventListener("mouseup",this,!0),1!==t.button)){var n=e[i].querySelector(this.renderer.closeIconSelector);n&&n.contains(t.target)||(this.tabsMovable&&(document.addEventListener("mousemove",this,!0),document.addEventListener("keydown",this,!0),document.addEventListener("contextmenu",this,!0)),this.allowDeselect&&this.currentIndex===i?this.currentIndex=-1:this.currentIndex=i,-1!==this.currentIndex&&this._tabActivateRequested.emit({index:this.currentIndex,title:this.currentTitle}))}}},e.prototype._evtMouseMove=function(t){var e=this._dragData;if(e){t.preventDefault(),t.stopPropagation();var i=this.contentNode.children;if(e.dragActive||o.dragExceeded(e,t)){if(!e.dragActive){var n=e.tab.getBoundingClientRect();"horizontal"===this._orientation?(e.tabPos=e.tab.offsetLeft,e.tabSize=n.width,e.tabPressPos=e.pressX-n.left):(e.tabPos=e.tab.offsetTop,e.tabSize=n.height,e.tabPressPos=e.pressY-n.top),e.tabLayout=o.snapTabLayout(i,this._orientation),e.contentRect=this.contentNode.getBoundingClientRect(),e.override=u.Drag.overrideCursor("default"),e.tab.classList.add("p-mod-dragging"),this.addClass("p-mod-dragging"),e.dragActive=!0}if(!e.detachRequested&&o.detachExceeded(e,t)){e.detachRequested=!0;var r=e.index,a=t.clientX,s=t.clientY,l=i[r],h=this._titles[r];if(this._tabDetachRequested.emit({index:r,title:h,tab:l,clientX:a,clientY:s}),e.dragAborted)return}o.layoutTabs(i,e,t,this._orientation)}}},e.prototype._evtMouseUp=function(t){var e=this;if(0===t.button||1===t.button){var i=this._dragData;if(i){if(t.preventDefault(),t.stopPropagation(),document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),!i.dragActive){this._dragData=null;var n=this.contentNode.children,r=a.ArrayExt.findFirstIndex(n,(function(e){return s.ElementExt.hitTest(e,t.clientX,t.clientY)}));if(r!==i.index)return;var u=this._titles[r];if(!u.closable)return;if(1===t.button)return void this._tabCloseRequested.emit({index:r,title:u});var h=n[r].querySelector(this.renderer.closeIconSelector);return h&&h.contains(t.target)?void this._tabCloseRequested.emit({index:r,title:u}):void 0}if(0===t.button){o.finalizeTabPosition(i,this._orientation),i.tab.classList.remove("p-mod-dragging");var c=o.parseTransitionDuration(i.tab);setTimeout((function(){if(!i.dragAborted){e._dragData=null,o.resetTabPositions(e.contentNode.children,e._orientation),i.override.dispose(),e.removeClass("p-mod-dragging");var t=i.index,n=i.targetIndex;-1!==n&&t!==n&&(a.ArrayExt.move(e._titles,t,n),e._adjustCurrentForMove(t,n),e._tabMoved.emit({fromIndex:t,toIndex:n,title:e._titles[n]}),l.MessageLoop.sendMessage(e,p.Widget.Msg.UpdateRequest))}}),c)}}}},e.prototype._releaseMouse=function(){var t=this._dragData;t&&(this._dragData=null,document.removeEventListener("mousemove",this,!0),document.removeEventListener("mouseup",this,!0),document.removeEventListener("keydown",this,!0),document.removeEventListener("contextmenu",this,!0),t.dragAborted=!0,t.dragActive&&(o.resetTabPositions(this.contentNode.children,this._orientation),t.override.dispose(),t.tab.classList.remove("p-mod-dragging"),this.removeClass("p-mod-dragging")))},e.prototype._adjustCurrentForInsert=function(t,e){var i=this.currentTitle,n=this._currentIndex,r=this.insertBehavior;if("select-tab"===r||"select-tab-if-needed"===r&&-1===n)return this._currentIndex=t,this._previousTitle=i,void this._currentChanged.emit({previousIndex:n,previousTitle:i,currentIndex:t,currentTitle:e});n>=t&&this._currentIndex++},e.prototype._adjustCurrentForMove=function(t,e){this._currentIndex===t?this._currentIndex=e:this._currentIndex<t&&this._currentIndex>=e?this._currentIndex++:this._currentIndex>t&&this._currentIndex<=e&&this._currentIndex--},e.prototype._adjustCurrentForRemove=function(t,e){var i=this._currentIndex,n=this.removeBehavior;if(i===t){if(0===this._titles.length)return this._currentIndex=-1,void this._currentChanged.emit({previousIndex:t,previousTitle:e,currentIndex:-1,currentTitle:null});if("select-tab-after"===n)return this._currentIndex=Math.min(t,this._titles.length-1),void this._currentChanged.emit({previousIndex:t,previousTitle:e,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-tab-before"===n)return this._currentIndex=Math.max(0,t-1),void this._currentChanged.emit({previousIndex:t,previousTitle:e,currentIndex:this._currentIndex,currentTitle:this.currentTitle});if("select-previous-tab"===n)return this._previousTitle?(this._currentIndex=this._titles.indexOf(this._previousTitle),this._previousTitle=null):this._currentIndex=Math.min(t,this._titles.length-1),void this._currentChanged.emit({previousIndex:t,previousTitle:e,currentIndex:this._currentIndex,currentTitle:this.currentTitle});this._currentIndex=-1,this._currentChanged.emit({previousIndex:t,previousTitle:e,currentIndex:-1,currentTitle:null})}else i>t&&this._currentIndex--},e.prototype._onTitleChanged=function(t){this.update()},e}(p.Widget);e.TabBar=d,function(t){var e=function(){function t(){this.closeIconSelector=".p-TabBar-tabCloseIcon",this._tabID=0,this._tabKeys=new WeakMap}return t.prototype.renderTab=function(t){var e=t.title.caption,i=this.createTabKey(t),n=this.createTabStyle(t),r=this.createTabClass(t),o=this.createTabDataset(t);return c.h.li({key:i,className:r,title:e,style:n,dataset:o},this.renderIcon(t),this.renderLabel(t),this.renderCloseIcon(t))},t.prototype.renderIcon=function(t){var e=this.createIconClass(t);return c.h.div({className:e},t.title.iconLabel)},t.prototype.renderLabel=function(t){return c.h.div({className:"p-TabBar-tabLabel"},t.title.label)},t.prototype.renderCloseIcon=function(t){return c.h.div({className:"p-TabBar-tabCloseIcon"})},t.prototype.createTabKey=function(t){var e=this._tabKeys.get(t.title);return void 0===e&&(e="tab-key-"+this._tabID++,this._tabKeys.set(t.title,e)),e},t.prototype.createTabStyle=function(t){return{zIndex:""+t.zIndex}},t.prototype.createTabClass=function(t){var e="p-TabBar-tab";return t.title.className&&(e+=" "+t.title.className),t.title.closable&&(e+=" p-mod-closable"),t.current&&(e+=" p-mod-current"),e},t.prototype.createTabDataset=function(t){return t.title.dataset},t.prototype.createIconClass=function(t){var e="p-TabBar-tabIcon",i=t.title.iconClass;return i?e+" "+i:e},t}();t.Renderer=e,t.defaultRenderer=new e}(d=e.TabBar||(e.TabBar={})),e.TabBar=d,function(t){t.DRAG_THRESHOLD=5,t.DETACH_THRESHOLD=20,t.createNode=function(){var t=document.createElement("div"),e=document.createElement("ul");return e.className="p-TabBar-content",t.appendChild(e),t},t.asTitle=function(t){return t instanceof f.Title?t:new f.Title(t)},t.parseTransitionDuration=function(t){var e=window.getComputedStyle(t);return 1e3*(parseFloat(e.transitionDuration)||0)},t.snapTabLayout=function(t,e){for(var i=new Array(t.length),n=0,r=t.length;n<r;++n){var o=t[n],a=window.getComputedStyle(o);i[n]="horizontal"===e?{pos:o.offsetLeft,size:o.offsetWidth,margin:parseFloat(a.marginLeft)||0}:{pos:o.offsetTop,size:o.offsetHeight,margin:parseFloat(a.marginTop)||0}}return i},t.dragExceeded=function(e,i){var n=Math.abs(i.clientX-e.pressX),r=Math.abs(i.clientY-e.pressY);return n>=t.DRAG_THRESHOLD||r>=t.DRAG_THRESHOLD},t.detachExceeded=function(e,i){var n=e.contentRect;return i.clientX<n.left-t.DETACH_THRESHOLD||i.clientX>=n.right+t.DETACH_THRESHOLD||i.clientY<n.top-t.DETACH_THRESHOLD||i.clientY>=n.bottom+t.DETACH_THRESHOLD},t.layoutTabs=function(t,e,i,n){var r,o,a,s;"horizontal"===n?(r=e.pressX,o=i.clientX-e.contentRect.left,a=i.clientX,s=e.contentRect.width):(r=e.pressY,o=i.clientY-e.contentRect.top,a=i.clientY,s=e.contentRect.height);for(var u=e.index,l=o-e.tabPressPos,h=l+e.tabSize,c=0,f=t.length;c<f;++c){var p=void 0,d=e.tabLayout[c],g=d.pos+(d.size>>1);if(c<e.index&&l<g)p=e.tabSize+e.tabLayout[c+1].margin+"px",u=Math.min(u,c);else if(c>e.index&&h>g)p=-e.tabSize-d.margin+"px",u=Math.max(u,c);else if(c===e.index){var y=a-r,v=s-(e.tabPos+e.tabSize);p=Math.max(-e.tabPos,Math.min(y,v))+"px"}else p="";"horizontal"===n?t[c].style.left=p:t[c].style.top=p}e.targetIndex=u},t.finalizeTabPosition=function(t,e){var i,n;if(i="horizontal"===e?t.contentRect.width:t.contentRect.height,t.targetIndex===t.index)n=0;else if(t.targetIndex>t.index)n=(r=t.tabLayout[t.targetIndex]).pos+r.size-t.tabSize-t.tabPos;else{var r;n=(r=t.tabLayout[t.targetIndex]).pos-t.tabPos}var o=i-(t.tabPos+t.tabSize),a=Math.max(-t.tabPos,Math.min(n,o));"horizontal"===e?t.tab.style.left=a+"px":t.tab.style.top=a+"px"},t.resetTabPositions=function(t,e){a.each(t,(function(t){"horizontal"===e?t.style.left="":t.style.top=""}))}}(o||(o={}))},7491:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(9847),s=i(6938),u=i(5932),l=i(7679),h=i(9513),c=i(8796),f=function(t){function e(e){void 0===e&&(e={});var i=t.call(this)||this;i._currentChanged=new u.Signal(i),i.addClass("p-TabPanel"),i.tabBar=new c.TabBar(e),i.tabBar.addClass("p-TabPanel-tabBar"),i.stackedPanel=new h.StackedPanel,i.stackedPanel.addClass("p-TabPanel-stackedPanel"),i.tabBar.tabMoved.connect(i._onTabMoved,i),i.tabBar.currentChanged.connect(i._onCurrentChanged,i),i.tabBar.tabCloseRequested.connect(i._onTabCloseRequested,i),i.tabBar.tabActivateRequested.connect(i._onTabActivateRequested,i),i.stackedPanel.widgetRemoved.connect(i._onWidgetRemoved,i),i._tabPlacement=e.tabPlacement||"top";var n=o.directionFromPlacement(i._tabPlacement),r=o.orientationFromPlacement(i._tabPlacement);i.tabBar.orientation=r,i.tabBar.dataset.placement=i._tabPlacement;var a=new l.BoxLayout({direction:n,spacing:0});return l.BoxLayout.setStretch(i.tabBar,0),l.BoxLayout.setStretch(i.stackedPanel,1),a.addWidget(i.tabBar),a.addWidget(i.stackedPanel),i.layout=a,i}return r(e,t),Object.defineProperty(e.prototype,"currentChanged",{get:function(){return this._currentChanged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentIndex",{get:function(){return this.tabBar.currentIndex},set:function(t){this.tabBar.currentIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentWidget",{get:function(){var t=this.tabBar.currentTitle;return t?t.owner:null},set:function(t){this.tabBar.currentTitle=t?t.title:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabsMovable",{get:function(){return this.tabBar.tabsMovable},set:function(t){this.tabBar.tabsMovable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabPlacement",{get:function(){return this._tabPlacement},set:function(t){if(this._tabPlacement!==t){this._tabPlacement=t;var e=o.directionFromPlacement(t),i=o.orientationFromPlacement(t);this.tabBar.orientation=i,this.tabBar.dataset.placement=t,this.layout.direction=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"widgets",{get:function(){return this.stackedPanel.widgets},enumerable:!0,configurable:!0}),e.prototype.addWidget=function(t){this.insertWidget(this.widgets.length,t)},e.prototype.insertWidget=function(t,e){e!==this.currentWidget&&e.hide(),this.stackedPanel.insertWidget(t,e),this.tabBar.insertTab(t,e.title)},e.prototype._onCurrentChanged=function(t,e){var i=e.previousIndex,n=e.previousTitle,r=e.currentIndex,o=e.currentTitle,u=n?n.owner:null,l=o?o.owner:null;u&&u.hide(),l&&l.show(),this._currentChanged.emit({previousIndex:i,previousWidget:u,currentIndex:r,currentWidget:l}),(a.Platform.IS_EDGE||a.Platform.IS_IE)&&s.MessageLoop.flush()},e.prototype._onTabActivateRequested=function(t,e){e.title.owner.activate()},e.prototype._onTabCloseRequested=function(t,e){e.title.owner.close()},e.prototype._onTabMoved=function(t,e){this.stackedPanel.insertWidget(e.toIndex,e.title.owner)},e.prototype._onWidgetRemoved=function(t,e){this.tabBar.removeTab(e.title)},e}(i(6706).Widget);e.TabPanel=f,function(t){t.orientationFromPlacement=function(t){return e[t]},t.directionFromPlacement=function(t){return i[t]};var e={top:"horizontal",left:"vertical",right:"vertical",bottom:"horizontal"},i={top:"top-to-bottom",left:"left-to-right",right:"right-to-left",bottom:"bottom-to-top"}}(o||(o={}))},5982:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(5932),r=function(){function t(t){this._label="",this._caption="",this._mnemonic=-1,this._iconClass="",this._iconLabel="",this._className="",this._closable=!1,this._changed=new n.Signal(this),this.owner=t.owner,void 0!==t.label&&(this._label=t.label),void 0!==t.mnemonic&&(this._mnemonic=t.mnemonic),void 0!==t.icon&&(this._iconClass=t.icon),void 0!==t.iconClass&&(this._iconClass=t.iconClass),void 0!==t.iconLabel&&(this._iconLabel=t.iconLabel),void 0!==t.caption&&(this._caption=t.caption),void 0!==t.className&&(this._className=t.className),void 0!==t.closable&&(this._closable=t.closable),this._dataset=t.dataset||{}}return Object.defineProperty(t.prototype,"changed",{get:function(){return this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(t){this._label!==t&&(this._label=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mnemonic",{get:function(){return this._mnemonic},set:function(t){this._mnemonic!==t&&(this._mnemonic=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this.iconClass},set:function(t){this.iconClass=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconClass",{get:function(){return this._iconClass},set:function(t){this._iconClass!==t&&(this._iconClass=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconLabel",{get:function(){return this._iconLabel},set:function(t){this._iconLabel!==t&&(this._iconLabel=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this._caption},set:function(t){this._caption!==t&&(this._caption=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{get:function(){return this._className},set:function(t){this._className!==t&&(this._className=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closable",{get:function(){return this._closable},set:function(t){this._closable!==t&&(this._closable=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return this._dataset},set:function(t){this._dataset!==t&&(this._dataset=t,this._changed.emit(void 0))},enumerable:!0,configurable:!0}),t}();e.Title=r},6706:function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},n(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=i(4558),s=i(6938),u=i(17),l=i(5932),h=i(5982),c=function(){function t(t){void 0===t&&(t={}),this._flags=0,this._layout=null,this._parent=null,this._disposed=new l.Signal(this),this.node=o.createNode(t),this.addClass("p-Widget")}return t.prototype.dispose=function(){this.isDisposed||(this.setFlag(t.Flag.IsDisposed),this._disposed.emit(void 0),this.parent?this.parent=null:this.isAttached&&t.detach(this),this._layout&&(this._layout.dispose(),this._layout=null),l.Signal.clearData(this),s.MessageLoop.clearData(this),u.AttachedProperty.clearData(this))},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._disposed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.testFlag(t.Flag.IsDisposed)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAttached",{get:function(){return this.testFlag(t.Flag.IsAttached)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHidden",{get:function(){return this.testFlag(t.Flag.IsHidden)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.testFlag(t.Flag.IsVisible)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return o.titleProperty.get(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.node.id},set:function(t){this.node.id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataset",{get:function(){return this.node.dataset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(e){if(this._parent!==e){if(e&&this.contains(e))throw new Error("Invalid parent widget.");if(this._parent&&!this._parent.isDisposed){var i=new t.ChildMessage("child-removed",this);s.MessageLoop.sendMessage(this._parent,i)}this._parent=e,this._parent&&!this._parent.isDisposed&&(i=new t.ChildMessage("child-added",this),s.MessageLoop.sendMessage(this._parent,i)),this.isDisposed||s.MessageLoop.sendMessage(this,t.Msg.ParentChanged)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},set:function(e){if(this._layout!==e){if(this.testFlag(t.Flag.DisallowLayout))throw new Error("Cannot set widget layout.");if(this._layout)throw new Error("Cannot change widget layout.");if(e.parent)throw new Error("Cannot change layout parent.");this._layout=e,e.parent=this}},enumerable:!0,configurable:!0}),t.prototype.children=function(){return this._layout?this._layout.iter():a.empty()},t.prototype.contains=function(t){for(var e=t;e;e=e._parent)if(e===this)return!0;return!1},t.prototype.hasClass=function(t){return this.node.classList.contains(t)},t.prototype.addClass=function(t){this.node.classList.add(t)},t.prototype.removeClass=function(t){this.node.classList.remove(t)},t.prototype.toggleClass=function(t,e){return!0===e?(this.node.classList.add(t),!0):!1===e?(this.node.classList.remove(t),!1):this.node.classList.toggle(t)},t.prototype.update=function(){s.MessageLoop.postMessage(this,t.Msg.UpdateRequest)},t.prototype.fit=function(){s.MessageLoop.postMessage(this,t.Msg.FitRequest)},t.prototype.activate=function(){s.MessageLoop.postMessage(this,t.Msg.ActivateRequest)},t.prototype.close=function(){s.MessageLoop.sendMessage(this,t.Msg.CloseRequest)},t.prototype.show=function(){if(this.testFlag(t.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||s.MessageLoop.sendMessage(this,t.Msg.BeforeShow),this.clearFlag(t.Flag.IsHidden),this.removeClass("p-mod-hidden"),!this.isAttached||this.parent&&!this.parent.isVisible||s.MessageLoop.sendMessage(this,t.Msg.AfterShow),this.parent)){var e=new t.ChildMessage("child-shown",this);s.MessageLoop.sendMessage(this.parent,e)}},t.prototype.hide=function(){if(!this.testFlag(t.Flag.IsHidden)&&(!this.isAttached||this.parent&&!this.parent.isVisible||s.MessageLoop.sendMessage(this,t.Msg.BeforeHide),this.setFlag(t.Flag.IsHidden),this.addClass("p-mod-hidden"),!this.isAttached||this.parent&&!this.parent.isVisible||s.MessageLoop.sendMessage(this,t.Msg.AfterHide),this.parent)){var e=new t.ChildMessage("child-hidden",this);s.MessageLoop.sendMessage(this.parent,e)}},t.prototype.setHidden=function(t){t?this.hide():this.show()},t.prototype.testFlag=function(t){return 0!=(this._flags&t)},t.prototype.setFlag=function(t){this._flags|=t},t.prototype.clearFlag=function(t){this._flags&=~t},t.prototype.processMessage=function(e){switch(e.type){case"resize":this.notifyLayout(e),this.onResize(e);break;case"update-request":this.notifyLayout(e),this.onUpdateRequest(e);break;case"fit-request":this.notifyLayout(e),this.onFitRequest(e);break;case"before-show":this.notifyLayout(e),this.onBeforeShow(e);break;case"after-show":this.setFlag(t.Flag.IsVisible),this.notifyLayout(e),this.onAfterShow(e);break;case"before-hide":this.notifyLayout(e),this.onBeforeHide(e);break;case"after-hide":this.clearFlag(t.Flag.IsVisible),this.notifyLayout(e),this.onAfterHide(e);break;case"before-attach":this.notifyLayout(e),this.onBeforeAttach(e);break;case"after-attach":this.isHidden||this.parent&&!this.parent.isVisible||this.setFlag(t.Flag.IsVisible),this.setFlag(t.Flag.IsAttached),this.notifyLayout(e),this.onAfterAttach(e);break;case"before-detach":this.notifyLayout(e),this.onBeforeDetach(e);break;case"after-detach":this.clearFlag(t.Flag.IsVisible),this.clearFlag(t.Flag.IsAttached),this.notifyLayout(e),this.onAfterDetach(e);break;case"activate-request":this.notifyLayout(e),this.onActivateRequest(e);break;case"close-request":this.notifyLayout(e),this.onCloseRequest(e);break;case"child-added":this.notifyLayout(e),this.onChildAdded(e);break;case"child-removed":this.notifyLayout(e),this.onChildRemoved(e);break;default:this.notifyLayout(e)}},t.prototype.notifyLayout=function(t){this._layout&&this._layout.processParentMessage(t)},t.prototype.onCloseRequest=function(e){this.parent?this.parent=null:this.isAttached&&t.detach(this)},t.prototype.onResize=function(t){},t.prototype.onUpdateRequest=function(t){},t.prototype.onFitRequest=function(t){},t.prototype.onActivateRequest=function(t){},t.prototype.onBeforeShow=function(t){},t.prototype.onAfterShow=function(t){},t.prototype.onBeforeHide=function(t){},t.prototype.onAfterHide=function(t){},t.prototype.onBeforeAttach=function(t){},t.prototype.onAfterAttach=function(t){},t.prototype.onBeforeDetach=function(t){},t.prototype.onAfterDetach=function(t){},t.prototype.onChildAdded=function(t){},t.prototype.onChildRemoved=function(t){},t}();e.Widget=c,function(t){var e,i;(i=t.Flag||(t.Flag={}))[i.IsDisposed=1]="IsDisposed",i[i.IsAttached=2]="IsAttached",i[i.IsHidden=4]="IsHidden",i[i.IsVisible=8]="IsVisible",i[i.DisallowLayout=16]="DisallowLayout",(e=t.Msg||(t.Msg={})).BeforeShow=new s.Message("before-show"),e.AfterShow=new s.Message("after-show"),e.BeforeHide=new s.Message("before-hide"),e.AfterHide=new s.Message("after-hide"),e.BeforeAttach=new s.Message("before-attach"),e.AfterAttach=new s.Message("after-attach"),e.BeforeDetach=new s.Message("before-detach"),e.AfterDetach=new s.Message("after-detach"),e.ParentChanged=new s.Message("parent-changed"),e.UpdateRequest=new s.ConflatableMessage("update-request"),e.FitRequest=new s.ConflatableMessage("fit-request"),e.ActivateRequest=new s.ConflatableMessage("activate-request"),e.CloseRequest=new s.ConflatableMessage("close-request");var n=function(t){function e(e,i){var n=t.call(this,e)||this;return n.child=i,n}return r(e,t),e}(s.Message);t.ChildMessage=n;var o=function(t){function e(e,i){var n=t.call(this,"resize")||this;return n.width=e,n.height=i,n}return r(e,t),e}(s.Message);t.ResizeMessage=o,function(t){t.UnknownSize=new t(-1,-1)}(o=t.ResizeMessage||(t.ResizeMessage={})),t.attach=function(e,i,n){if(void 0===n&&(n=null),e.parent)throw new Error("Cannot attach a child widget.");if(e.isAttached||document.body.contains(e.node))throw new Error("Widget is already attached.");if(!document.body.contains(i))throw new Error("Host is not attached.");s.MessageLoop.sendMessage(e,t.Msg.BeforeAttach),i.insertBefore(e.node,n),s.MessageLoop.sendMessage(e,t.Msg.AfterAttach)},t.detach=function(e){if(e.parent)throw new Error("Cannot detach a child widget.");if(!e.isAttached||!document.body.contains(e.node))throw new Error("Widget is not attached.");s.MessageLoop.sendMessage(e,t.Msg.BeforeDetach),e.node.parentNode.removeChild(e.node),s.MessageLoop.sendMessage(e,t.Msg.AfterDetach)}}(c=e.Widget||(e.Widget={})),e.Widget=c,function(t){t.titleProperty=new u.AttachedProperty({name:"title",create:function(t){return new h.Title({owner:t})}}),t.createNode=function(t){return t.node||document.createElement("div")}}(o||(o={}))},6338:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(1540),r=i(4102);e.default=function(t,e){void 0===e&&(e={});var i=0,o=0,a=0;return n.coordEach(t,(function(t){i+=t[0],o+=t[1],a++}),!0),r.point([i/a,o/a],e.properties)}},4102:(t,e)=>{"use strict";function i(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function n(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,n)}function r(t,e,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var a=o[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:t},e,n)}function o(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:t},e,n)}function a(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function s(t,e,n){return void 0===n&&(n={}),i({type:"MultiLineString",coordinates:t},e,n)}function u(t,e,n){return void 0===n&&(n={}),i({type:"MultiPoint",coordinates:t},e,n)}function l(t,e,n){return void 0===n&&(n={}),i({type:"MultiPolygon",coordinates:t},e,n)}function h(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t*n}function c(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t/n}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=i,e.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=n,e.points=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return n(t,e)})),i)},e.polygon=r,e.polygons=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return r(t,e)})),i)},e.lineString=o,e.lineStrings=function(t,e,i){return void 0===i&&(i={}),a(t.map((function(t){return o(t,e)})),i)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,n){return void 0===n&&(n={}),i({type:"GeometryCollection",geometries:t},e,n)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},e.radiansToLength=h,e.lengthToRadians=c,e.lengthToDegrees=function(t,e){return f(c(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return h(c(t,e),i)},e.convertArea=function(t,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=e.areaFactors[i];if(!r)throw new Error("invalid original units");var o=e.areaFactors[n];if(!o)throw new Error("invalid final units");return t/r*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}},1540:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(4102);function r(t,e,i){if(null!==t)for(var n,o,a,s,u,l,h,c,f=0,p=0,d=t.type,g="FeatureCollection"===d,y="Feature"===d,v=g?t.features.length:1,m=0;m<v;m++){u=(c=!!(h=g?t.features[m].geometry:y?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var b=0;b<u;b++){var _=0,w=0;if(null!==(s=c?h.geometries[b]:h)){l=s.coordinates;var x=s.type;switch(f=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,m,_,w))return!1;p++,_++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,m,_,w))return!1;p++,"MultiPoint"===x&&_++}"LineString"===x&&_++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-f;o++){if(!1===e(l[n][o],p,m,_,w))return!1;p++}"MultiLineString"===x&&_++,"Polygon"===x&&w++}"Polygon"===x&&_++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(w=0,o=0;o<l[n].length;o++){for(a=0;a<l[n][o].length-f;a++){if(!1===e(l[n][o][a],p,m,_,w))return!1;p++}w++}_++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===r(s.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function s(t,e){var i,n,r,o,a,s,u,l,h,c,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(i=0;i<g;i++){for(s=p?t.features[i].geometry:d?t.geometry:t,l=p?t.features[i].properties:d?t.properties:{},h=p?t.features[i].bbox:d?t.bbox:void 0,c=p?t.features[i].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(o=u?s.geometries[r]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,l,h,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],f,l,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,l,h,c))return!1;f++}}function u(t,e){s(t,(function(t,i,r,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,r,{bbox:o,id:a}),i,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var h={type:s,coordinates:t.coordinates[l]};if(!1===e(n.feature(h,r),i,l))return!1}}))}function l(t,e){u(t,(function(t,i,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,h=0,c=0;return!1!==r(t,(function(r,s,f,p,d){if(void 0===u||i>l||p>h||d>c)return u=r,l=i,h=p,c=d,void(a=0);var g=n.lineString([u,r],t.properties);if(!1===e(g,i,o,d,a))return!1;a++,u=r}))&&void 0}}}))}function h(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,i,r){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,i,r,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(n.lineString(a[s],t.properties),i,r,s))return!1}}}))}e.coordAll=function(t){var e=[];return r(t,(function(t){e.push(t)})),e},e.coordEach=r,e.coordReduce=function(t,e,i,n){var o=i;return r(t,(function(t,n,r,a,s){o=0===n&&void 0===i?t:e(o,t,n,r,a,s)}),n),o},e.featureEach=a,e.featureReduce=function(t,e,i){var n=i;return a(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":u=u||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":return n.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),n.point(l[o],u,e);case"LineString":return s<0&&(s=l.length+s),n.point(l[s],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),n.point(l[a][s],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),n.point(l[o][s],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s),n.point(l[o][a][s],u,e)}throw new Error("geojson is invalid")},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,r=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),u=u||t.features[r].properties,i=t.features[r].geometry;break;case"Feature":u=u||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var l=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),n.lineString([l[s],l[s+1]],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),n.lineString([l[a][s],l[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),n.lineString([l[o][s],l[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s-1),n.lineString([l[o][a][s],l[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.flattenEach=u,e.flattenReduce=function(t,e,i){var n=i;return u(t,(function(t,r,o){n=0===r&&0===o&&void 0===i?t:e(n,t,r,o)})),n},e.geomEach=s,e.geomReduce=function(t,e,i){var n=i;return s(t,(function(t,r,o,a,s){n=0===r&&void 0===i?t:e(n,t,r,o,a,s)})),n},e.lineEach=h,e.lineReduce=function(t,e,i){var n=i;return h(t,(function(t,r,o,a){n=0===r&&void 0===i?t:e(n,t,r,o,a)})),n},e.propEach=o,e.propReduce=function(t,e,i){var n=i;return o(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n},e.segmentEach=l,e.segmentReduce=function(t,e,i){var n=i,r=!1;return l(t,(function(t,o,a,s,u){n=!1===r&&void 0===i?t:e(n,t,o,a,s,u),r=!0})),n}},9809:(t,e,i)=>{"use strict";const n=e;n.bignum=i(3550),n.define=i(2500).define,n.base=i(1979),n.constants=i(6826),n.decoders=i(8307),n.encoders=i(6579)},2500:(t,e,i)=>{"use strict";const n=i(6579),r=i(8307),o=i(5717);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){const e=this.name;function i(t){this._initNamed(t,e)}return o(i,t),i.prototype._initNamed=function(e,i){t.call(this,e,i)},new i(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r[t])),this.decoders[t]},a.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(n[t])),this.encoders[t]},a.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}},6625:(t,e,i)=>{"use strict";const n=i(5717),r=i(8465).b,o=i(2399).Buffer;function a(t,e){r.call(this,e),o.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return s.isEncoderBuffer(t)||(t=new s(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=o.byteLength(t);else{if(!o.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}n(a,r),e.C=a,a.isDecoderBuffer=function(t){return t instanceof a||"object"==typeof t&&o.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},a.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},a.prototype.restore=function(t){const e=new a(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,r.prototype.restore.call(this,t.reporter),e},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},a.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const i=new a(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},a.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.R=s,s.isEncoderBuffer=function(t){return t instanceof s||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},s.prototype.join=function(t,e){return t||(t=o.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(t,e),e+=i.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):o.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},1979:(t,e,i)=>{"use strict";const n=e;n.Reporter=i(8465).b,n.DecoderBuffer=i(6625).C,n.EncoderBuffer=i(6625).R,n.Node=i(1949)},1949:(t,e,i)=>{"use strict";const n=i(8465).b,r=i(6625).R,o=i(6625).C,a=i(9746),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(t,e,i){const n={};this._baseState=n,n.name=i,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=l;const h=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const t=this._baseState,e={};h.forEach((function(i){e[i]=t[i]}));const i=new this.constructor(e.parent);return i._baseState=e,i},l.prototype._wrap=function(){const t=this._baseState;u.forEach((function(e){this[e]=function(){const i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}}),this)},l.prototype._init=function(t){const e=this._baseState;a(null===e.parent),t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this),a.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){const e=this._baseState,i=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==i.length&&(a(null===e.children),e.children=i,i.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(a(null===e.args),e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(i){i==(0|i)&&(i|=0);const n=t[i];e[n]=i})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){l.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),s.forEach((function(t){l.prototype[t]=function(){const e=this._baseState,i=Array.prototype.slice.call(arguments);return a(null===e.tag),e.tag=t,this._useArgs(i),this}})),l.prototype.use=function(t){a(t);const e=this._baseState;return a(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){const e=this._baseState;return a(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){const e=this._baseState;return a(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){const e=this._baseState;return a(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){const e=this._baseState;return a(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},l.prototype.contains=function(t){const e=this._baseState;return a(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){const i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));let n,r=i.default,a=!0,s=null;if(null!==i.key&&(s=t.enterKey(i.key)),i.optional){let n=null;if(null!==i.explicit?n=i.explicit:null!==i.implicit?n=i.implicit:null!==i.tag&&(n=i.tag),null!==n||i.any){if(a=this._peekTag(t,n,i.any),t.isError(a))return a}else{const n=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),a=!0}catch(t){a=!1}t.restore(n)}}if(i.obj&&a&&(n=t.enterObject()),a){if(null!==i.explicit){const e=this._decodeTag(t,i.explicit);if(t.isError(e))return e;t=e}const n=t.offset;if(null===i.use&&null===i.choice){let e;i.any&&(e=t.save());const n=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(n))return n;i.any?r=t.raw(e):t=n}if(e&&e.track&&null!==i.tag&&e.track(t.path(),n,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),i.any||(r=null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e)),t.isError(r))return r;if(i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(t,e)})),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const n=new o(r);r=this._getUse(i.contains,t._reporterState.obj)._decode(n,e)}}return i.obj&&a&&(r=t.leaveObject(n)),null===i.key||null===r&&!0!==a?null!==s&&t.exitKey(s):t.leaveKey(s,i.key,r),r},l.prototype._decodeGeneric=function(t,e,i){const n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0],i):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){const i=this._baseState;return i.useDecoder=this._use(t,e),a(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},l.prototype._decodeChoice=function(t,e){const i=this._baseState;let n=null,r=!1;return Object.keys(i.choice).some((function(o){const a=t.save(),s=i.choice[o];try{const i=s._decode(t,e);if(t.isError(i))return!1;n={type:o,value:i},r=!0}catch(e){return t.restore(a),!1}return!0}),this),r?n:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new r(t,this.reporter)},l.prototype._encode=function(t,e,i){const n=this._baseState;if(null!==n.default&&n.default===t)return;const r=this._encodeValue(t,e,i);return void 0===r||this._skipDefault(r,e,i)?void 0:r},l.prototype._encodeValue=function(t,e,i){const r=this._baseState;if(null===r.parent)return r.children[0]._encode(t,e||new n);let o=null;if(this.reporter=e,r.optional&&void 0===t){if(null===r.default)return;t=r.default}let a=null,s=!1;if(r.any)o=this._createEncoderBuffer(t);else if(r.choice)o=this._encodeChoice(t,e);else if(r.contains)a=this._getUse(r.contains,i)._encode(t,e),s=!0;else if(r.children)a=r.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");const n=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const r=i._encode(t[i._baseState.key],e,t);return e.leaveKey(n),r}),this).filter((function(t){return t})),a=this._createEncoderBuffer(a);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return e.error("Too many args for : "+r.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const i=this.clone();i._baseState.implicit=null,a=this._createEncoderBuffer(t.map((function(i){const n=this._baseState;return this._getUse(n.args[0],t)._encode(i,e)}),i))}else null!==r.use?o=this._getUse(r.use,i)._encode(t,e):(a=this._encodePrimitive(r.tag,t),s=!0);if(!r.any&&null===r.choice){const t=null!==r.implicit?r.implicit:r.tag,i=null===r.implicit?"universal":"context";null===t?null===r.use&&e.error("Tag could be omitted only for .use()"):null===r.use&&(o=this._encodeComposite(t,s,i,a))}return null!==r.explicit&&(o=this._encodeComposite(r.explicit,!1,"context",o)),o},l.prototype._encodeChoice=function(t,e){const i=this._baseState,n=i.choice[t.type];return n||a(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),n._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){const i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)}},8465:(t,e,i)=>{"use strict";const n=i(5717);function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function o(t,e){this.path=t,this.rethrow(e)}e.b=r,r.prototype.isError=function(t){return t instanceof o},r.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},r.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},r.prototype.leaveKey=function(t,e,i){const n=this._reporterState;this.exitKey(t),null!==n.obj&&(n.obj[e]=i)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},r.prototype.leaveObject=function(t){const e=this._reporterState,i=e.obj;return e.obj=t,i},r.prototype.error=function(t){let e;const i=this._reporterState,n=t instanceof o;if(e=n?t:new o(i.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!i.options.partial)throw e;return n||i.errors.push(e),e},r.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},n(o,Error),o.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},160:(t,e)=>{"use strict";function i(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const n=t[i];e[n]=i})),e}e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=i(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=i(e.tag)},6826:(t,e,i)=>{"use strict";const n=e;n._reverse=function(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const n=t[i];e[n]=i})),e},n.der=i(160)},1671:(t,e,i)=>{"use strict";const n=i(5717),r=i(3550),o=i(6625).C,a=i(1949),s=i(160);function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.call(this,"der",t)}function h(t,e){let i=t.readUInt8(e);if(t.isError(i))return i;const n=s.tagClass[i>>6],r=0==(32&i);if(31==(31&i)){let n=i;for(i=0;128==(128&n);){if(n=t.readUInt8(e),t.isError(n))return n;i<<=7,i|=127&n}}else i&=31;return{cls:n,primitive:r,tag:i,tagStr:s.tag[i]}}function c(t,e,i){let n=t.readUInt8(i);if(t.isError(n))return n;if(!e&&128===n)return null;if(0==(128&n))return n;const r=127&n;if(r>4)return t.error("length octect is too long");n=0;for(let e=0;e<r;e++){n<<=8;const e=t.readUInt8(i);if(t.isError(e))return e;n|=e}return n}t.exports=u,u.prototype.decode=function(t,e){return o.isDecoderBuffer(t)||(t=new o(t,e)),this.tree._decode(t,e)},n(l,a),l.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;const n=t.save(),r=h(t,'Failed to peek tag: "'+e+'"');return t.isError(r)?r:(t.restore(n),r.tag===e||r.tagStr===e||r.tagStr+"of"===e||i)},l.prototype._decodeTag=function(t,e,i){const n=h(t,'Failed to decode tag of "'+e+'"');if(t.isError(n))return n;let r=c(t,n.primitive,'Failed to get length of "'+e+'"');if(t.isError(r))return r;if(!i&&n.tag!==e&&n.tagStr!==e&&n.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(n.primitive||null!==r)return t.skip(r,'Failed to match body of: "'+e+'"');const o=t.save(),a=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(a)?a:(r=t.offset-o.offset,t.restore(o),t.skip(r,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){const i=h(t,e);if(t.isError(i))return i;const n=c(t,i.primitive,e);if(t.isError(n))return n;let r;if(r=i.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===i.tagStr)break}},l.prototype._decodeList=function(t,e,i,n){const r=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const o=i.decode(t,"der",n);if(t.isError(o)&&e)break;r.push(o)}return r},l.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let i="";for(let t=0;t<e.length/2;t++)i+=String.fromCharCode(e.readUInt16BE(2*t));return i}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,i){let n;const r=[];let o=0,a=0;for(;!t.isEmpty();)a=t.readUInt8(),o<<=7,o|=127&a,0==(128&a)&&(r.push(o),o=0);128&a&&r.push(o);const s=r[0]/40|0,u=r[0]%40;if(n=i?r:[s,u].concat(r.slice(1)),e){let t=e[n.join(" ")];void 0===t&&(t=e[n.join(".")]),void 0!==t&&(n=t)}return n},l.prototype._decodeTime=function(t,e){const i=t.raw().toString();let n,r,o,a,s,u;if("gentime"===e)n=0|i.slice(0,4),r=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),s=0|i.slice(10,12),u=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");n=0|i.slice(0,2),r=0|i.slice(2,4),o=0|i.slice(4,6),a=0|i.slice(6,8),s=0|i.slice(8,10),u=0|i.slice(10,12),n=n<70?2e3+n:1900+n}return Date.UTC(n,r-1,o,a,s,u,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){const i=t.raw();let n=new r(i);return e&&(n=e[n.toString(10)]||n),n},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},8307:(t,e,i)=>{"use strict";const n=e;n.der=i(1671),n.pem=i(9631)},9631:(t,e,i)=>{"use strict";const n=i(5717),r=i(2399).Buffer,o=i(1671);function a(t){o.call(this,t),this.enc="pem"}n(a,o),t.exports=a,a.prototype.decode=function(t,e){const i=t.toString().split(/[\r\n]+/g),n=e.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,u=-1;for(let t=0;t<i.length;t++){const e=i[t].match(a);if(null!==e&&e[2]===n){if(-1!==s){if("END"!==e[1])break;u=t;break}if("BEGIN"!==e[1])break;s=t}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+n);const l=i.slice(s+1,u).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const h=r.from(l,"base64");return o.prototype.decode.call(this,h,e)}},6984:(t,e,i)=>{"use strict";const n=i(5717),r=i(2399).Buffer,o=i(1949),a=i(160);function s(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new u,this.tree._init(t.body)}function u(t){o.call(this,"der",t)}function l(t){return t<10?"0"+t:t}t.exports=s,s.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},n(u,o),u.prototype._encodeComposite=function(t,e,i,n){const o=function(t,e,i,n){let r;if("seqof"===t?t="seq":"setof"===t&&(t="set"),a.tagByName.hasOwnProperty(t))r=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return n.error("Unknown tag: "+t);r=t}return r>=31?n.error("Multi-octet tag encoding unsupported"):(e||(r|=32),r|=a.tagClassByName[i||"universal"]<<6,r)}(t,e,i,this.reporter);if(n.length<128){const t=r.alloc(2);return t[0]=o,t[1]=n.length,this._createEncoderBuffer([t,n])}let s=1;for(let t=n.length;t>=256;t>>=8)s++;const u=r.alloc(2+s);u[0]=o,u[1]=128|s;for(let t=1+s,e=n.length;e>0;t--,e>>=8)u[t]=255&e;return this._createEncoderBuffer([u,n])},u.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=r.alloc(2*t.length);for(let i=0;i<t.length;i++)e.writeUInt16BE(t.charCodeAt(i),2*i);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},u.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let n=0;for(let e=0;e<t.length;e++){let i=t[e];for(n++;i>=128;i>>=7)n++}const o=r.alloc(n);let a=o.length-1;for(let e=t.length-1;e>=0;e--){let i=t[e];for(o[a--]=127&i;(i>>=7)>0;)o[a--]=128|127&i}return this._createEncoderBuffer(o)},u.prototype._encodeTime=function(t,e){let i;const n=new Date(t);return"gentime"===e?i=[l(n.getUTCFullYear()),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[l(n.getUTCFullYear()%100),l(n.getUTCMonth()+1),l(n.getUTCDate()),l(n.getUTCHours()),l(n.getUTCMinutes()),l(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!r.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=r.from(e)}if(r.isBuffer(t)){let e=t.length;0===t.length&&e++;const i=r.alloc(e);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let i=1;for(let e=t;e>=256;e>>=8)i++;const n=new Array(i);for(let e=n.length-1;e>=0;e--)n[e]=255&t,t>>=8;return 128&n[0]&&n.unshift(0),this._createEncoderBuffer(r.from(n))},u.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},u.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},u.prototype._skipDefault=function(t,e,i){const n=this._baseState;let r;if(null===n.default)return!1;const o=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,i).join()),o.length!==n.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==n.defaultBuffer[r])return!1;return!0}},6579:(t,e,i)=>{"use strict";const n=e;n.der=i(6984),n.pem=i(2883)},2883:(t,e,i)=>{"use strict";const n=i(5717),r=i(6984);function o(t){r.call(this,t),this.enc="pem"}n(o,r),t.exports=o,o.prototype.encode=function(t,e){const i=r.prototype.encode.call(this,t).toString("base64"),n=["-----BEGIN "+e.label+"-----"];for(let t=0;t<i.length;t+=64)n.push(i.slice(t,t+64));return n.push("-----END "+e.label+"-----"),n.join("\n")}},9742:(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),i=e[0],n=e[1];return 3*(i+n)/4-n},e.toByteArray=function(t){var e,i,o=u(t),a=o[0],s=o[1],l=new r(function(t,e,i){return 3*(e+i)/4-i}(0,a,s)),h=0,c=s>0?a-4:a;for(i=0;i<c;i+=4)e=n[t.charCodeAt(i)]<<18|n[t.charCodeAt(i+1)]<<12|n[t.charCodeAt(i+2)]<<6|n[t.charCodeAt(i+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===s&&(e=n[t.charCodeAt(i)]<<2|n[t.charCodeAt(i+1)]>>4,l[h++]=255&e),1===s&&(e=n[t.charCodeAt(i)]<<10|n[t.charCodeAt(i+1)]<<4|n[t.charCodeAt(i+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],a=16383,s=0,u=n-r;s<u;s+=a)o.push(l(t,s,s+a>u?u:s+a));return 1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),o.join("")};for(var i=[],n=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)i[a]=o[a],n[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function l(t,e,n){for(var r,o,a=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3550:function(t,e,i){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(6601).Buffer}catch(t){}function s(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function u(t,e,i){var n=s(t,i);return i-1>=e&&(n|=s(t,i-1)<<4),n}function l(t,e,i,n){for(var r=0,o=Math.min(t.length,i),a=e;a<o;a++){var s=t.charCodeAt(a)-48;r*=n,r+=s>=49?s-49+10:s>=17?s-17+10:s}return r}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===i)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,o=0,a=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=e)n++;n--,r=r/e|0;for(var o=t.length-i,a=o%n,s=Math.min(o,o-a)+i,u=0,h=i;h<s;h+=n)u=l(t,h,h+n,e),this.imuln(r),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var c=1;for(u=l(t,h,t.length,e),h=0;h<a;h++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,i){i.negative=e.negative^t.negative;var n=t.length+e.length|0;i.length=n,n=n-1|0;var r=0|t.words[0],o=0|e.words[0],a=r*o,s=67108863&a,u=a/67108864|0;i.words[0]=s;for(var l=1;l<n;l++){for(var h=u>>>26,c=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;h+=(a=(r=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}i.words[l]=0|c,u=0|h}return 0!==u?i.words[l]=0|u:i.length--,i.strip()}o.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);i=0!=(o=s>>>24-r&16777215)||a!==this.length-1?h[6-u.length]+u+i:u+i,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],p=f[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modn(p).toString(t);i=(d=d.idivn(p)).isZero()?g+i:h[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),o=i||Math.max(1,r);n(r<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,l=new t(o),h=this.clone();if(u){for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[s]=a;for(;s<o;s++)l[s]=0}else{for(s=0;s<o-r;s++)l[s]=0;for(s=0;!h.isZero();s++)a=h.andln(255),h.iushrn(8),l[o-s-1]=a}return l},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var n=0;n<i.length;n++)this.words[n]=e.words[n]^i.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},o.prototype.iadd=function(t){var e,i,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,n=t):(i=t,n=this);for(var r=0,o=0;o<n.length;o++)e=(0|i.words[o])+(0|n.words[o])+r,this.words[o]=67108863&e,r=e>>>26;for(;0!==r&&o<i.length;o++)e=(0|i.words[o])+r,this.words[o]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,n,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,n=t):(i=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|i.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<i.length;a++)o=(e=(0|i.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var n,r,o,a=t.words,s=e.words,u=i.words,l=0,h=0|a[0],c=8191&h,f=h>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],v=8191&y,m=y>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,A=0|a[5],k=8191&A,T=A>>>13,S=0|a[6],I=8191&S,L=S>>>13,O=0|a[7],C=8191&O,P=O>>>13,R=0|a[8],j=8191&R,N=R>>>13,D=0|a[9],z=8191&D,B=D>>>13,H=0|s[0],F=8191&H,U=H>>>13,V=0|s[1],q=8191&V,G=V>>>13,W=0|s[2],Y=8191&W,K=W>>>13,Z=0|s[3],X=8191&Z,J=Z>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],it=8191&et,nt=et>>>13,rt=0|s[6],ot=8191&rt,at=rt>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ht=0|s[8],ct=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,gt=pt>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(l+(n=Math.imul(c,F))|0)+((8191&(r=(r=Math.imul(c,U))+Math.imul(f,F)|0))<<13)|0;l=((o=Math.imul(f,U))+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,F),r=(r=Math.imul(d,U))+Math.imul(g,F)|0,o=Math.imul(g,U);var vt=(l+(n=n+Math.imul(c,q)|0)|0)+((8191&(r=(r=r+Math.imul(c,G)|0)+Math.imul(f,q)|0))<<13)|0;l=((o=o+Math.imul(f,G)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(v,F),r=(r=Math.imul(v,U))+Math.imul(m,F)|0,o=Math.imul(m,U),n=n+Math.imul(d,q)|0,r=(r=r+Math.imul(d,G)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,G)|0;var mt=(l+(n=n+Math.imul(c,Y)|0)|0)+((8191&(r=(r=r+Math.imul(c,K)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(_,F),r=(r=Math.imul(_,U))+Math.imul(w,F)|0,o=Math.imul(w,U),n=n+Math.imul(v,q)|0,r=(r=r+Math.imul(v,G)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(d,Y)|0,r=(r=r+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(l+(n=n+Math.imul(c,X)|0)|0)+((8191&(r=(r=r+Math.imul(c,J)|0)+Math.imul(f,X)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(M,F),r=(r=Math.imul(M,U))+Math.imul(E,F)|0,o=Math.imul(E,U),n=n+Math.imul(_,q)|0,r=(r=r+Math.imul(_,G)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(v,Y)|0,r=(r=r+Math.imul(v,K)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,K)|0,n=n+Math.imul(d,X)|0,r=(r=r+Math.imul(d,J)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,J)|0;var _t=(l+(n=n+Math.imul(c,Q)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,F),r=(r=Math.imul(k,U))+Math.imul(T,F)|0,o=Math.imul(T,U),n=n+Math.imul(M,q)|0,r=(r=r+Math.imul(M,G)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(_,Y)|0,r=(r=r+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(d,Q)|0,r=(r=r+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(l+(n=n+Math.imul(c,it)|0)|0)+((8191&(r=(r=r+Math.imul(c,nt)|0)+Math.imul(f,it)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),r=(r=Math.imul(I,U))+Math.imul(L,F)|0,o=Math.imul(L,U),n=n+Math.imul(k,q)|0,r=(r=r+Math.imul(k,G)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(M,Y)|0,r=(r=r+Math.imul(M,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,n=n+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,n=n+Math.imul(d,it)|0,r=(r=r+Math.imul(d,nt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,nt)|0;var xt=(l+(n=n+Math.imul(c,ot)|0)|0)+((8191&(r=(r=r+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(C,F),r=(r=Math.imul(C,U))+Math.imul(P,F)|0,o=Math.imul(P,U),n=n+Math.imul(I,q)|0,r=(r=r+Math.imul(I,G)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(k,Y)|0,r=(r=r+Math.imul(k,K)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(_,Q)|0,r=(r=r+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(v,it)|0,r=(r=r+Math.imul(v,nt)|0)+Math.imul(m,it)|0,o=o+Math.imul(m,nt)|0,n=n+Math.imul(d,ot)|0,r=(r=r+Math.imul(d,at)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0;var Mt=(l+(n=n+Math.imul(c,ut)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(j,F),r=(r=Math.imul(j,U))+Math.imul(N,F)|0,o=Math.imul(N,U),n=n+Math.imul(C,q)|0,r=(r=r+Math.imul(C,G)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(I,Y)|0,r=(r=r+Math.imul(I,K)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(k,X)|0,r=(r=r+Math.imul(k,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(_,it)|0,r=(r=r+Math.imul(_,nt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(v,ot)|0,r=(r=r+Math.imul(v,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,n=n+Math.imul(d,ut)|0,r=(r=r+Math.imul(d,lt)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,lt)|0;var Et=(l+(n=n+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,F),r=(r=Math.imul(z,U))+Math.imul(B,F)|0,o=Math.imul(B,U),n=n+Math.imul(j,q)|0,r=(r=r+Math.imul(j,G)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(C,Y)|0,r=(r=r+Math.imul(C,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,X)|0,r=(r=r+Math.imul(I,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(k,Q)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,it)|0,r=(r=r+Math.imul(M,nt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(_,ot)|0,r=(r=r+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(v,ut)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0,n=n+Math.imul(d,ct)|0,r=(r=r+Math.imul(d,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var At=(l+(n=n+Math.imul(c,dt)|0)|0)+((8191&(r=(r=r+Math.imul(c,gt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,gt)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,q),r=(r=Math.imul(z,G))+Math.imul(B,q)|0,o=Math.imul(B,G),n=n+Math.imul(j,Y)|0,r=(r=r+Math.imul(j,K)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(I,Q)|0,r=(r=r+Math.imul(I,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(k,it)|0,r=(r=r+Math.imul(k,nt)|0)+Math.imul(T,it)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,r=(r=r+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,n=n+Math.imul(_,ut)|0,r=(r=r+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(v,ct)|0,r=(r=r+Math.imul(v,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(r=(r=r+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;l=((o=o+Math.imul(g,gt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,Y),r=(r=Math.imul(z,K))+Math.imul(B,Y)|0,o=Math.imul(B,K),n=n+Math.imul(j,X)|0,r=(r=r+Math.imul(j,J)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Q)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,it)|0,r=(r=r+Math.imul(I,nt)|0)+Math.imul(L,it)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(k,ot)|0,r=(r=r+Math.imul(k,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,n=n+Math.imul(_,ct)|0,r=(r=r+Math.imul(_,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(v,dt)|0)|0)+((8191&(r=(r=r+Math.imul(v,gt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,gt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,X),r=(r=Math.imul(z,J))+Math.imul(B,X)|0,o=Math.imul(B,J),n=n+Math.imul(j,Q)|0,r=(r=r+Math.imul(j,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,it)|0,r=(r=r+Math.imul(C,nt)|0)+Math.imul(P,it)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,r=(r=r+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(k,ut)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var St=(l+(n=n+Math.imul(_,dt)|0)|0)+((8191&(r=(r=r+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,gt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,Q),r=(r=Math.imul(z,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(j,it)|0,r=(r=r+Math.imul(j,nt)|0)+Math.imul(N,it)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,r=(r=r+Math.imul(C,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(I,ut)|0,r=(r=r+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(k,ct)|0,r=(r=r+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(r=(r=r+Math.imul(M,gt)|0)+Math.imul(E,dt)|0))<<13)|0;l=((o=o+Math.imul(E,gt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,it),r=(r=Math.imul(z,nt))+Math.imul(B,it)|0,o=Math.imul(B,nt),n=n+Math.imul(j,ot)|0,r=(r=r+Math.imul(j,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,n=n+Math.imul(C,ut)|0,r=(r=r+Math.imul(C,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(I,ct)|0,r=(r=r+Math.imul(I,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(k,dt)|0)|0)+((8191&(r=(r=r+Math.imul(k,gt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,gt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ot),r=(r=Math.imul(z,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(j,ut)|0,r=(r=r+Math.imul(j,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,n=n+Math.imul(C,ct)|0,r=(r=r+Math.imul(C,ft)|0)+Math.imul(P,ct)|0,o=o+Math.imul(P,ft)|0;var Ot=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(r=(r=r+Math.imul(I,gt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,gt)|0)+(r>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,ut),r=(r=Math.imul(z,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(j,ct)|0,r=(r=r+Math.imul(j,ft)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(r=(r=r+Math.imul(C,gt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,gt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,ct),r=(r=Math.imul(z,ft))+Math.imul(B,ct)|0,o=Math.imul(B,ft);var Pt=(l+(n=n+Math.imul(j,dt)|0)|0)+((8191&(r=(r=r+Math.imul(j,gt)|0)+Math.imul(N,dt)|0))<<13)|0;l=((o=o+Math.imul(N,gt)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Rt=(l+(n=Math.imul(z,dt))|0)+((8191&(r=(r=Math.imul(z,gt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,gt))+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=yt,u[1]=vt,u[2]=mt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=At,u[10]=kt,u[11]=Tt,u[12]=St,u[13]=It,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=Pt,u[18]=Rt,0!==l&&(u[19]=l,i.length++),i};function g(t,e,i){return(new y).mulp(t,e,i)}function y(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var i,n=this.length+t.length;return i=10===this.length&&10===t.length?d(this,t,e):n<63?p(this,t,e):n<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var n=0,r=0,o=0;o<i.length-1;o++){var a=r;r=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var h=o-l,c=(0|t.words[h])*(0|e.words[l]),f=67108863&c;s=67108863&(f=f+s|0),r+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,n=a,a=r}return 0!==n?i.words[o]=n:i.length--,i.strip()}(this,t,e):g(this,t,e),i},y.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},y.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var n=0,r=0;r<e;r++)n|=(1&t)<<e-r-1,t>>=1;return n},y.prototype.permute=function(t,e,i,n,r,o){for(var a=0;a<o;a++)n[a]=e[t[a]],r[a]=i[t[a]]},y.prototype.transform=function(t,e,i,n,r,o){this.permute(o,t,e,i,n,r);for(var a=1;a<r;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<r;h+=s)for(var c=u,f=l,p=0;p<a;p++){var d=i[h+p],g=n[h+p],y=i[h+p+a],v=n[h+p+a],m=c*y-f*v;v=c*v+f*y,y=m,i[h+p]=d+y,n[h+p]=g+v,i[h+p+a]=d-y,n[h+p+a]=g-v,p!==s&&(m=u*c-l*f,f=u*f+l*c,c=m)}},y.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),n=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+n},y.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var n=0;n<i/2;n++){var r=t[n];t[n]=t[i-n-1],t[i-n-1]=r,r=e[n],e[n]=-e[i-n-1],e[i-n-1]=-r}},y.prototype.normalize13b=function(t,e){for(var i=0,n=0;n<e/2;n++){var r=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+i;t[n]=67108863&r,i=r<67108864?0:r/67108864|0}return t},y.prototype.convert13b=function(t,e,i,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)i[a]=0;n(0===o),n(0==(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},y.prototype.mulp=function(t,e,i){var n=2*this.guessLen13b(t.length,e.length),r=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),c=new Array(n),f=i.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,r),this.transform(l,o,h,c,n,r);for(var p=0;p<n;p++){var d=s[p]*h[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*h[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,r),this.conjugate(f,o,n),this.normalize13b(f,n),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),g(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,o=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=o>>>26,this.words[i]=67108863&o}return 0!==e&&(this.words[i]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var n=i/26|0,r=i%26;e[i]=(t.words[n]&1<<r)>>>r}return e}(t);if(0===e.length)return new o(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var r=i.sqr();n<e.length;n++,r=r.sqr())0!==e[n]&&(i=i.mul(r));return i},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,i=t%26,r=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<i;this.words[e]=u|a,a=s>>>26-i}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var r;n("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=r);l--){var c=0|this.words[l];this.words[l]=h<<26-o|c>>>o,h=c&s}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,i){return n(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var r,o,a=t.length+i;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+i])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+i]=67108863&o}for(;r<this.length-i;r++)s=(o=(0|this.words[r+i])+s)>>26,this.words[r+i]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),r=t,a=0|r.words[r.length-1];0!=(i=26-this._countBits(a))&&(r=r.ushln(i),n.iushln(i),a=0|r.words[r.length-1]);var s,u=n.length-r.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=n.clone()._ishlnsubmul(r,1,u);0===h.negative&&(n=h,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|n.words[r.length+c])+(0|n.words[r.length+c-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(r,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(r,1,c),n.isZero()||(n.negative^=1);s&&(s.words[c]=f)}return s&&s.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,i){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(t)),{div:r,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var r,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),r=t.andln(1),o=i.cmp(n);return o<0||1===r&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var h=i.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(h),a.isub(c)),r.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(i.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(h),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(s),a.isub(u)):(i.isub(e),s.isub(r),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,a=new o(1),s=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(i)>=0?(e.isub(i),a.isub(s)):(i.isub(e),s.isub(a))}return(r=0===e.cmpn(1)?a:s).cmpn(0)<0&&r.iadd(t),r},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var n=0;e.isEven()&&i.isEven();n++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var o=e;e=i,i=o}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var o=r,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),n(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],r=0|t.words[i];if(n!==r){n<r?e=-1:n>r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new M(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},r(b,m),b.prototype.split=function(t,e){for(var i=4194303,n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&i,r=10;r<t.length;r++){var a=0|t.words[r];t.words[r-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[r-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(_,m),r(w,m),r(x,m),x.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new _;else if("p192"===t)e=new w;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return v[t]=e,e},M.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);n(!r.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(u);)h.redIAdd(u);for(var c=this.pow(h,r),f=this.pow(t,r.addn(1).iushrn(1)),p=this.pow(t,r),d=a;0!==p.cmp(s);){for(var g=p,y=0;0!==g.cmp(s);y++)g=g.redSqr();n(y<d);var v=this.pow(c,new o(1).iushln(d-y-1));f=f.redMul(v),c=v.redSqr(),p=p.redMul(c),d=y}return f},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var r=i[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],h=u-1;h>=0;h--){var c=l>>h&1;r!==i[0]&&(r=this.sqr(r)),0!==c||0!==a?(a<<=1,a|=c,(4==++s||0===n&&0===h)&&(r=this.mul(r,i[a]),s=0,a=0)):s=0}u=26}return r},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},r(E,M),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},9931:(t,e,i)=>{var n;function r(t){this.rand=t}if(t.exports=function(t){return n||(n=new r(null)),n.generate(t)},t.exports.Rand=r,r.prototype.generate=function(t){return this._rand(t)},r.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=i(9214);if("function"!=typeof o.randomBytes)throw new Error("Not supported");r.prototype._rand=function(t){return o.randomBytes(t)}}catch(t){}},4497:(t,e,i)=>{var n=i(9509).Buffer;function r(t){n.isBuffer(t)||(t=n.from(t));for(var e=t.length/4|0,i=new Array(e),r=0;r<e;r++)i[r]=t.readUInt32BE(4*r);return i}function o(t){for(;0<t.length;t++)t[0]=0}function a(t,e,i,n,r){for(var o,a,s,u,l=i[0],h=i[1],c=i[2],f=i[3],p=t[0]^e[0],d=t[1]^e[1],g=t[2]^e[2],y=t[3]^e[3],v=4,m=1;m<r;m++)o=l[p>>>24]^h[d>>>16&255]^c[g>>>8&255]^f[255&y]^e[v++],a=l[d>>>24]^h[g>>>16&255]^c[y>>>8&255]^f[255&p]^e[v++],s=l[g>>>24]^h[y>>>16&255]^c[p>>>8&255]^f[255&d]^e[v++],u=l[y>>>24]^h[p>>>16&255]^c[d>>>8&255]^f[255&g]^e[v++],p=o,d=a,g=s,y=u;return o=(n[p>>>24]<<24|n[d>>>16&255]<<16|n[g>>>8&255]<<8|n[255&y])^e[v++],a=(n[d>>>24]<<24|n[g>>>16&255]<<16|n[y>>>8&255]<<8|n[255&p])^e[v++],s=(n[g>>>24]<<24|n[y>>>16&255]<<16|n[p>>>8&255]<<8|n[255&d])^e[v++],u=(n[y>>>24]<<24|n[p>>>16&255]<<16|n[d>>>8&255]<<8|n[255&g])^e[v++],[o>>>=0,a>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],n=[],r=[[],[],[],[]],o=[[],[],[],[]],a=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,i[a]=l,n[l]=a;var h=t[a],c=t[h],f=t[c],p=257*t[l]^16843008*l;r[0][a]=p<<24|p>>>8,r[1][a]=p<<16|p>>>16,r[2][a]=p<<8|p>>>24,r[3][a]=p,p=16843009*f^65537*c^257*h^16843008*a,o[0][l]=p<<24|p>>>8,o[1][l]=p<<16|p>>>16,o[2][l]=p<<8|p>>>24,o[3][l]=p,0===a?a=s=1:(a=h^t[t[t[f^h]]],s^=t[t[s]])}return{SBOX:i,INV_SBOX:n,SUB_MIX:r,INV_SUB_MIX:o}}();function l(t){this._key=r(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,n=4*(i+1),r=[],o=0;o<e;o++)r[o]=t[o];for(o=e;o<n;o++){var a=r[o-1];o%e==0?(a=a<<8|a>>>24,a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a],a^=s[o/e|0]<<24):e>6&&o%e==4&&(a=u.SBOX[a>>>24]<<24|u.SBOX[a>>>16&255]<<16|u.SBOX[a>>>8&255]<<8|u.SBOX[255&a]),r[o]=r[o-e]^a}for(var l=[],h=0;h<n;h++){var c=n-h,f=r[c-(h%4?0:4)];l[h]=h<4||c<=4?f:u.INV_SUB_MIX[0][u.SBOX[f>>>24]]^u.INV_SUB_MIX[1][u.SBOX[f>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[f>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&f]]}this._nRounds=i,this._keySchedule=r,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return a(t=r(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=n.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},l.prototype.decryptBlock=function(t){var e=(t=r(t))[1];t[1]=t[3],t[3]=e;var i=a(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),o=n.allocUnsafe(16);return o.writeUInt32BE(i[0],0),o.writeUInt32BE(i[3],4),o.writeUInt32BE(i[2],8),o.writeUInt32BE(i[1],12),o},l.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},t.exports.AES=l},2422:(t,e,i)=>{var n=i(4497),r=i(9509).Buffer,o=i(1027),a=i(5717),s=i(3288),u=i(7295),l=i(685);function h(t,e,i,a){o.call(this);var u=r.alloc(4,0);this._cipher=new n.AES(e);var h=this._cipher.encryptBlock(u);this._ghash=new s(h),i=function(t,e,i){if(12===e.length)return t._finID=r.concat([e,r.from([0,0,0,1])]),r.concat([e,r.from([0,0,0,2])]);var n=new s(i),o=e.length,a=o%16;n.update(e),a&&(a=16-a,n.update(r.alloc(a,0))),n.update(r.alloc(8,0));var u=8*o,h=r.alloc(8);h.writeUIntBE(u,0,8),n.update(h),t._finID=n.state;var c=r.from(t._finID);return l(c),c}(this,i,h),this._prev=r.from(i),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}a(h,o),h.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=r.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},h.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var n=Math.min(t.length,e.length),r=0;r<n;++r)i+=t[r]^e[r];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},h.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},h.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},h.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=h},4696:(t,e,i)=>{var n=i(1494),r=i(6193),o=i(4946);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=r.createDecipher,e.createDecipheriv=e.Decipheriv=r.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(o)}},6193:(t,e,i)=>{var n=i(2422),r=i(9509).Buffer,o=i(45),a=i(5969),s=i(1027),u=i(4497),l=i(3048);function h(t,e,i){s.call(this),this._cache=new c,this._last=void 0,this._cipher=new u.AES(e),this._prev=r.from(i),this._mode=t,this._autopadding=!0}function c(){this.cache=r.allocUnsafe(0)}function f(t,e,i){var s=o[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=r.from(i)),"GCM"!==s.mode&&i.length!==s.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=r.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new a(s.module,e,i,!0):"auth"===s.type?new n(s.module,e,i,!0):new h(s.module,e,i)}i(5717)(h,s),h.prototype._update=function(t){var e,i;this._cache.add(t);for(var n=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),n.push(i);return r.concat(n)},h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},c.prototype.add=function(t){this.cache=r.concat([this.cache,t])},c.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var i=o[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=l(e,!1,i.key,i.iv);return f(t,n.key,n.iv)},e.createDecipheriv=f},1494:(t,e,i)=>{var n=i(45),r=i(2422),o=i(9509).Buffer,a=i(5969),s=i(1027),u=i(4497),l=i(3048);function h(t,e,i){s.call(this),this._cache=new f,this._cipher=new u.AES(e),this._prev=o.from(i),this._mode=t,this._autopadding=!0}i(5717)(h,s),h.prototype._update=function(t){var e,i;this._cache.add(t);for(var n=[];e=this._cache.get();)i=this._mode.encrypt(this,e),n.push(i);return o.concat(n)};var c=o.alloc(16,16);function f(){this.cache=o.allocUnsafe(0)}function p(t,e,i){var s=n[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=o.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=o.from(i)),"GCM"!==s.mode&&i.length!==s.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===s.type?new a(s.module,e,i):"auth"===s.type?new r(s.module,e,i):new h(s.module,e,i)}h.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},h.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=o.concat([this.cache,t])},f.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},f.prototype.flush=function(){for(var t=16-this.cache.length,e=o.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return o.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var i=n[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var r=l(e,!1,i.key,i.iv);return p(t,r.key,r.iv)}},3288:(t,e,i)=>{var n=i(9509).Buffer,r=n.alloc(16,0);function o(t){var e=n.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function a(t){this.h=t,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}a.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},a.prototype._multiply=function(){for(var t,e,i,n=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],r=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),i=0!=(1&n[3]),e=3;e>0;e--)n[e]=n[e]>>>1|(1&n[e-1])<<31;n[0]=n[0]>>>1,i&&(n[0]=n[0]^225<<24)}this.state=o(r)},a.prototype.update=function(t){var e;for(this.cache=n.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},a.prototype.final=function(t,e){return this.cache.length&&this.ghash(n.concat([this.cache,r],16)),this.ghash(o([0,t,0,e])),this.state},t.exports=a},685:t=>{t.exports=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}}},5292:(t,e,i)=>{var n=i(7295);e.encrypt=function(t,e){var i=n(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},e.decrypt=function(t,e){var i=t._prev;t._prev=e;var r=t._cipher.decryptBlock(e);return n(r,i)}},6311:(t,e,i)=>{var n=i(9509).Buffer,r=i(7295);function o(t,e,i){var o=e.length,a=r(e,t._cache);return t._cache=t._cache.slice(o),t._prev=n.concat([t._prev,i?e:a]),a}e.encrypt=function(t,e,i){for(var r,a=n.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=n.allocUnsafe(0)),!(t._cache.length<=e.length)){a=n.concat([a,o(t,e,i)]);break}r=t._cache.length,a=n.concat([a,o(t,e.slice(0,r),i)]),e=e.slice(r)}return a}},1510:(t,e,i)=>{var n=i(9509).Buffer;function r(t,e,i){for(var n,r,a=-1,s=0;++a<8;)n=e&1<<7-a?128:0,s+=(128&(r=t._cipher.encryptBlock(t._prev)[0]^n))>>a%8,t._prev=o(t._prev,i?n:r);return s}function o(t,e){var i=t.length,r=-1,o=n.allocUnsafe(t.length);for(t=n.concat([t,n.from([e])]);++r<i;)o[r]=t[r]<<1|t[r+1]>>7;return o}e.encrypt=function(t,e,i){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=r(t,e[s],i);return a}},1964:(t,e,i)=>{var n=i(9509).Buffer;function r(t,e,i){var r=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=n.concat([t._prev.slice(1),n.from([i?e:r])]),r}e.encrypt=function(t,e,i){for(var o=e.length,a=n.allocUnsafe(o),s=-1;++s<o;)a[s]=r(t,e[s],i);return a}},6009:(t,e,i)=>{var n=i(7295),r=i(9509).Buffer,o=i(685);function a(t){var e=t._cipher.encryptBlockRaw(t._prev);return o(t._prev),e}e.encrypt=function(t,e){var i=Math.ceil(e.length/16),o=t._cache.length;t._cache=r.concat([t._cache,r.allocUnsafe(16*i)]);for(var s=0;s<i;s++){var u=a(t),l=o+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var h=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,h)}},1084:(t,e)=>{e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},45:(t,e,i)=>{var n={ECB:i(1084),CBC:i(5292),CFB:i(6311),CFB8:i(1964),CFB1:i(1510),OFB:i(8861),CTR:i(6009),GCM:i(6009)},r=i(4946);for(var o in r)r[o].module=n[r[o].mode];t.exports=r},8861:(t,e,i)=>{var n=i(7295);function r(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer.concat([t._cache,r(t)]);var i=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,i)}},5969:(t,e,i)=>{var n=i(4497),r=i(9509).Buffer,o=i(1027);function a(t,e,i,a){o.call(this),this._cipher=new n.AES(e),this._prev=r.from(i),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=a,this._mode=t}i(5717)(a,o),a.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},a.prototype._final=function(){this._cipher.scrub()},t.exports=a},3614:(t,e,i)=>{var n=i(7667),r=i(4696),o=i(45),a=i(9715),s=i(3048);function u(t,e,i){if(t=t.toLowerCase(),o[t])return r.createCipheriv(t,e,i);if(a[t])return new n({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function l(t,e,i){if(t=t.toLowerCase(),o[t])return r.createDecipheriv(t,e,i);if(a[t])return new n({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var i,n;if(t=t.toLowerCase(),o[t])i=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");i=8*a[t].key,n=a[t].iv}var r=s(e,!1,i,n);return u(t,r.key,r.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var i,n;if(t=t.toLowerCase(),o[t])i=o[t].key,n=o[t].iv;else{if(!a[t])throw new TypeError("invalid suite type");i=8*a[t].key,n=a[t].iv}var r=s(e,!1,i,n);return l(t,r.key,r.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(a).concat(r.getCiphers())}},7667:(t,e,i)=>{var n=i(1027),r=i(5251),o=i(5717),a=i(9509).Buffer,s={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function u(t){n.call(this);var e,i=t.mode.toLowerCase(),r=s[i];e=t.decrypt?"decrypt":"encrypt";var o=t.key;a.isBuffer(o)||(o=a.from(o)),"des-ede"!==i&&"des-ede-cbc"!==i||(o=a.concat([o,o.slice(0,8)]));var u=t.iv;a.isBuffer(u)||(u=a.from(u)),this._des=r.create({key:o,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,o(u,n),u.prototype._update=function(t){return a.from(this._des.update(t))},u.prototype._final=function(){return a.from(this._des.final())}},9715:(t,e)=>{e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},3663:(t,e,i)=>{var n=i(3982),r=i(1798);function o(t){var e,i=t.modulus.byteLength();do{e=new n(r(i))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,e){var i=function(t){var e=o(t);return{blinder:e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),r=e.modulus.byteLength(),a=new n(t).mul(i.blinder).umod(e.modulus),s=a.toRed(n.mont(e.prime1)),u=a.toRed(n.mont(e.prime2)),l=e.coefficient,h=e.prime1,c=e.prime2,f=s.redPow(e.exponent1).fromRed(),p=u.redPow(e.exponent2).fromRed(),d=f.isub(p).imul(l).umod(h).imul(c);return p.iadd(d).imul(i.unblinder).umod(e.modulus).toArrayLike(Buffer,"be",r)}a.getr=o,t.exports=a},3982:function(t,e,i){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(1922).Buffer}catch(t){}function s(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void n(!1,"Invalid character in "+t)}function u(t,e,i){var n=s(t,i);return i-1>=e&&(n|=s(t,i-1)<<4),n}function l(t,e,i,r){for(var o=0,a=0,s=Math.min(t.length,i),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=r,a=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&a<r,"Invalid character"),o+=a}return o}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===i)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,o=0,a=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=e)n++;n--,r=r/e|0;for(var o=t.length-i,a=o%n,s=Math.min(o,o-a)+i,u=0,h=i;h<s;h+=n)u=l(t,h,h+n,e),this.imuln(r),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var c=1;for(u=l(t,h,t.length,e),h=0;h<a;h++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){h(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(t){o.prototype.inspect=c}else o.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var n=t.length+e.length|0;i.length=n,n=n-1|0;var r=0|t.words[0],o=0|e.words[0],a=r*o,s=67108863&a,u=a/67108864|0;i.words[0]=s;for(var l=1;l<n;l++){for(var h=u>>>26,c=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;h+=(a=(r=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}i.words[l]=0|c,u=0|h}return 0!==u?i.words[l]=0|u:i.length--,i._strip()}o.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);i=0!=(o=s>>>24-r&16777215)||a!==this.length-1?f[6-u.length]+u+i:u+i,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=p[t],h=d[t];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var g=c.modrn(h).toString(t);i=(c=c.idivn(h)).isZero()?g+i:f[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){this._strip();var r=this.byteLength(),o=i||Math.max(1,r);n(r<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,r),a},o.prototype._toArrayLikeLE=function(t,e){for(var i=0,n=0,r=0,o=0;r<this.length;r++){var a=this.words[r]<<o|n;t[i++]=255&a,i<t.length&&(t[i++]=a>>8&255),i<t.length&&(t[i++]=a>>16&255),6===o?(i<t.length&&(t[i++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(i<t.length)for(t[i++]=n;i<t.length;)t[i++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,n=0,r=0,o=0;r<this.length;r++){var a=this.words[r]<<o|n;t[i--]=255&a,i>=0&&(t[i--]=a>>8&255),i>=0&&(t[i--]=a>>16&255),6===o?(i>=0&&(t[i--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(i>=0)for(t[i--]=n;i>=0;)t[i--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var n=0;n<i.length;n++)this.words[n]=e.words[n]^i.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},o.prototype.iadd=function(t){var e,i,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,n=t):(i=t,n=this);for(var r=0,o=0;o<n.length;o++)e=(0|i.words[o])+(0|n.words[o])+r,this.words[o]=67108863&e,r=e>>>26;for(;0!==r&&o<i.length;o++)e=(0|i.words[o])+r,this.words[o]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,n,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,n=t):(i=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|i.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<i.length;a++)o=(e=(0|i.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var n,r,o,a=t.words,s=e.words,u=i.words,l=0,h=0|a[0],c=8191&h,f=h>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],v=8191&y,m=y>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,A=0|a[5],k=8191&A,T=A>>>13,S=0|a[6],I=8191&S,L=S>>>13,O=0|a[7],C=8191&O,P=O>>>13,R=0|a[8],j=8191&R,N=R>>>13,D=0|a[9],z=8191&D,B=D>>>13,H=0|s[0],F=8191&H,U=H>>>13,V=0|s[1],q=8191&V,G=V>>>13,W=0|s[2],Y=8191&W,K=W>>>13,Z=0|s[3],X=8191&Z,J=Z>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],it=8191&et,nt=et>>>13,rt=0|s[6],ot=8191&rt,at=rt>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ht=0|s[8],ct=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,gt=pt>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(l+(n=Math.imul(c,F))|0)+((8191&(r=(r=Math.imul(c,U))+Math.imul(f,F)|0))<<13)|0;l=((o=Math.imul(f,U))+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,F),r=(r=Math.imul(d,U))+Math.imul(g,F)|0,o=Math.imul(g,U);var vt=(l+(n=n+Math.imul(c,q)|0)|0)+((8191&(r=(r=r+Math.imul(c,G)|0)+Math.imul(f,q)|0))<<13)|0;l=((o=o+Math.imul(f,G)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(v,F),r=(r=Math.imul(v,U))+Math.imul(m,F)|0,o=Math.imul(m,U),n=n+Math.imul(d,q)|0,r=(r=r+Math.imul(d,G)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,G)|0;var mt=(l+(n=n+Math.imul(c,Y)|0)|0)+((8191&(r=(r=r+Math.imul(c,K)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(_,F),r=(r=Math.imul(_,U))+Math.imul(w,F)|0,o=Math.imul(w,U),n=n+Math.imul(v,q)|0,r=(r=r+Math.imul(v,G)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(d,Y)|0,r=(r=r+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(l+(n=n+Math.imul(c,X)|0)|0)+((8191&(r=(r=r+Math.imul(c,J)|0)+Math.imul(f,X)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(M,F),r=(r=Math.imul(M,U))+Math.imul(E,F)|0,o=Math.imul(E,U),n=n+Math.imul(_,q)|0,r=(r=r+Math.imul(_,G)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(v,Y)|0,r=(r=r+Math.imul(v,K)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,K)|0,n=n+Math.imul(d,X)|0,r=(r=r+Math.imul(d,J)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,J)|0;var _t=(l+(n=n+Math.imul(c,Q)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,F),r=(r=Math.imul(k,U))+Math.imul(T,F)|0,o=Math.imul(T,U),n=n+Math.imul(M,q)|0,r=(r=r+Math.imul(M,G)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(_,Y)|0,r=(r=r+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(d,Q)|0,r=(r=r+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(l+(n=n+Math.imul(c,it)|0)|0)+((8191&(r=(r=r+Math.imul(c,nt)|0)+Math.imul(f,it)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),r=(r=Math.imul(I,U))+Math.imul(L,F)|0,o=Math.imul(L,U),n=n+Math.imul(k,q)|0,r=(r=r+Math.imul(k,G)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(M,Y)|0,r=(r=r+Math.imul(M,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,n=n+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,n=n+Math.imul(d,it)|0,r=(r=r+Math.imul(d,nt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,nt)|0;var xt=(l+(n=n+Math.imul(c,ot)|0)|0)+((8191&(r=(r=r+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(C,F),r=(r=Math.imul(C,U))+Math.imul(P,F)|0,o=Math.imul(P,U),n=n+Math.imul(I,q)|0,r=(r=r+Math.imul(I,G)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(k,Y)|0,r=(r=r+Math.imul(k,K)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(_,Q)|0,r=(r=r+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(v,it)|0,r=(r=r+Math.imul(v,nt)|0)+Math.imul(m,it)|0,o=o+Math.imul(m,nt)|0,n=n+Math.imul(d,ot)|0,r=(r=r+Math.imul(d,at)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0;var Mt=(l+(n=n+Math.imul(c,ut)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(j,F),r=(r=Math.imul(j,U))+Math.imul(N,F)|0,o=Math.imul(N,U),n=n+Math.imul(C,q)|0,r=(r=r+Math.imul(C,G)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(I,Y)|0,r=(r=r+Math.imul(I,K)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(k,X)|0,r=(r=r+Math.imul(k,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(_,it)|0,r=(r=r+Math.imul(_,nt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(v,ot)|0,r=(r=r+Math.imul(v,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,n=n+Math.imul(d,ut)|0,r=(r=r+Math.imul(d,lt)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,lt)|0;var Et=(l+(n=n+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,F),r=(r=Math.imul(z,U))+Math.imul(B,F)|0,o=Math.imul(B,U),n=n+Math.imul(j,q)|0,r=(r=r+Math.imul(j,G)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(C,Y)|0,r=(r=r+Math.imul(C,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,X)|0,r=(r=r+Math.imul(I,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(k,Q)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,it)|0,r=(r=r+Math.imul(M,nt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(_,ot)|0,r=(r=r+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(v,ut)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0,n=n+Math.imul(d,ct)|0,r=(r=r+Math.imul(d,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var At=(l+(n=n+Math.imul(c,dt)|0)|0)+((8191&(r=(r=r+Math.imul(c,gt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,gt)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,q),r=(r=Math.imul(z,G))+Math.imul(B,q)|0,o=Math.imul(B,G),n=n+Math.imul(j,Y)|0,r=(r=r+Math.imul(j,K)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(I,Q)|0,r=(r=r+Math.imul(I,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(k,it)|0,r=(r=r+Math.imul(k,nt)|0)+Math.imul(T,it)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,r=(r=r+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,n=n+Math.imul(_,ut)|0,r=(r=r+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(v,ct)|0,r=(r=r+Math.imul(v,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(r=(r=r+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;l=((o=o+Math.imul(g,gt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,Y),r=(r=Math.imul(z,K))+Math.imul(B,Y)|0,o=Math.imul(B,K),n=n+Math.imul(j,X)|0,r=(r=r+Math.imul(j,J)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Q)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,it)|0,r=(r=r+Math.imul(I,nt)|0)+Math.imul(L,it)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(k,ot)|0,r=(r=r+Math.imul(k,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,n=n+Math.imul(_,ct)|0,r=(r=r+Math.imul(_,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(v,dt)|0)|0)+((8191&(r=(r=r+Math.imul(v,gt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,gt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,X),r=(r=Math.imul(z,J))+Math.imul(B,X)|0,o=Math.imul(B,J),n=n+Math.imul(j,Q)|0,r=(r=r+Math.imul(j,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,it)|0,r=(r=r+Math.imul(C,nt)|0)+Math.imul(P,it)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,r=(r=r+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(k,ut)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var St=(l+(n=n+Math.imul(_,dt)|0)|0)+((8191&(r=(r=r+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,gt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,Q),r=(r=Math.imul(z,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(j,it)|0,r=(r=r+Math.imul(j,nt)|0)+Math.imul(N,it)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,r=(r=r+Math.imul(C,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(I,ut)|0,r=(r=r+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(k,ct)|0,r=(r=r+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(r=(r=r+Math.imul(M,gt)|0)+Math.imul(E,dt)|0))<<13)|0;l=((o=o+Math.imul(E,gt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,it),r=(r=Math.imul(z,nt))+Math.imul(B,it)|0,o=Math.imul(B,nt),n=n+Math.imul(j,ot)|0,r=(r=r+Math.imul(j,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,n=n+Math.imul(C,ut)|0,r=(r=r+Math.imul(C,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(I,ct)|0,r=(r=r+Math.imul(I,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(k,dt)|0)|0)+((8191&(r=(r=r+Math.imul(k,gt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,gt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ot),r=(r=Math.imul(z,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(j,ut)|0,r=(r=r+Math.imul(j,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,n=n+Math.imul(C,ct)|0,r=(r=r+Math.imul(C,ft)|0)+Math.imul(P,ct)|0,o=o+Math.imul(P,ft)|0;var Ot=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(r=(r=r+Math.imul(I,gt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,gt)|0)+(r>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,ut),r=(r=Math.imul(z,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(j,ct)|0,r=(r=r+Math.imul(j,ft)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(r=(r=r+Math.imul(C,gt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,gt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,ct),r=(r=Math.imul(z,ft))+Math.imul(B,ct)|0,o=Math.imul(B,ft);var Pt=(l+(n=n+Math.imul(j,dt)|0)|0)+((8191&(r=(r=r+Math.imul(j,gt)|0)+Math.imul(N,dt)|0))<<13)|0;l=((o=o+Math.imul(N,gt)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Rt=(l+(n=Math.imul(z,dt))|0)+((8191&(r=(r=Math.imul(z,gt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,gt))+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=yt,u[1]=vt,u[2]=mt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=At,u[10]=kt,u[11]=Tt,u[12]=St,u[13]=It,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=Pt,u[18]=Rt,0!==l&&(u[19]=l,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var n=0,r=0,o=0;o<i.length-1;o++){var a=r;r=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var h=o-l,c=(0|t.words[h])*(0|e.words[l]),f=67108863&c;s=67108863&(f=f+s|0),r+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,n=a,a=r}return 0!==n?i.words[o]=n:i.length--,i._strip()}function m(t,e,i){return v(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):i<63?g(this,t,e):i<1024?v(this,t,e):m(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var n=0,r=0;r<e;r++)n|=(1&t)<<e-r-1,t>>=1;return n},b.prototype.permute=function(t,e,i,n,r,o){for(var a=0;a<o;a++)n[a]=e[t[a]],r[a]=i[t[a]]},b.prototype.transform=function(t,e,i,n,r,o){this.permute(o,t,e,i,n,r);for(var a=1;a<r;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<r;h+=s)for(var c=u,f=l,p=0;p<a;p++){var d=i[h+p],g=n[h+p],y=i[h+p+a],v=n[h+p+a],m=c*y-f*v;v=c*v+f*y,y=m,i[h+p]=d+y,n[h+p]=g+v,i[h+p+a]=d-y,n[h+p+a]=g-v,p!==s&&(m=u*c-l*f,f=u*f+l*c,c=m)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),n=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+n},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var n=0;n<i/2;n++){var r=t[n];t[n]=t[i-n-1],t[i-n-1]=r,r=e[n],e[n]=-e[i-n-1],e[i-n-1]=-r}},b.prototype.normalize13b=function(t,e){for(var i=0,n=0;n<e/2;n++){var r=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+i;t[n]=67108863&r,i=r<67108864?0:r/67108864|0}return t},b.prototype.convert13b=function(t,e,i,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)i[a]=0;n(0===o),n(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var n=2*this.guessLen13b(t.length,e.length),r=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),c=new Array(n),f=i.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,r),this.transform(l,o,h,c,n,r);for(var p=0;p<n;p++){var d=s[p]*h[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*h[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,r),this.conjugate(f,o,n),this.normalize13b(f,n),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var i=0,r=0;r<this.length;r++){var o=(0|this.words[r])*t,a=(67108863&o)+(67108863&i);i>>=26,i+=o/67108864|0,i+=a>>>26,this.words[r]=67108863&a}return 0!==i&&(this.words[r]=i,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var n=i/26|0,r=i%26;e[i]=t.words[n]>>>r&1}return e}(t);if(0===e.length)return new o(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var r=i.sqr();n<e.length;n++,r=r.sqr())0!==e[n]&&(i=i.mul(r));return i},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,i=t%26,r=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<i;this.words[e]=u|a,a=s>>>26-i}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var r;n("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=r);l--){var c=0|this.words[l];this.words[l]=h<<26-o|c>>>o,h=c&s}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,i){return n(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var r,o,a=t.length+i;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+i])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+i]=67108863&o}for(;r<this.length-i;r++)s=(o=(0|this.words[r+i])+s)>>26,this.words[r+i]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),r=t,a=0|r.words[r.length-1];0!=(i=26-this._countBits(a))&&(r=r.ushln(i),n.iushln(i),a=0|r.words[r.length-1]);var s,u=n.length-r.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=n.clone()._ishlnsubmul(r,1,u);0===h.negative&&(n=h,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|n.words[r.length+c])+(0|n.words[r.length+c-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(r,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(r,1,c),n.isZero()||(n.negative^=1);s&&(s.words[c]=f)}return s&&s._strip(),n._strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,i){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(t)),{div:r,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var r,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),r=t.andln(1),o=i.cmp(n);return o<0||1===r&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var i=(1<<26)%t,r=0,o=this.length-1;o>=0;o--)r=(i*r+(0|this.words[o]))%t;return e?-r:r},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*i;this.words[r]=o/t|0,i=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var h=i.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(h),a.isub(c)),r.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(i.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(h),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(s),a.isub(u)):(i.isub(e),s.isub(r),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,a=new o(1),s=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(i)>=0?(e.isub(i),a.isub(s)):(i.isub(e),s.isub(a))}return(r=0===e.cmpn(1)?a:s).cmpn(0)<0&&r.iadd(t),r},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var n=0;e.isEven()&&i.isEven();n++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var o=e;e=i,i=o}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var o=r,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),n(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],r=0|t.words[i];if(n!==r){n<r?e=-1:n>r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},r(x,w),x.prototype.split=function(t,e){for(var i=4194303,n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&i,r=10;r<t.length;r++){var a=0|t.words[r];t.words[r-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[r-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(M,w),r(E,w),r(A,w),A.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return _[t]=e,e},k.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},k.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);n(!r.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(u);)h.redIAdd(u);for(var c=this.pow(h,r),f=this.pow(t,r.addn(1).iushrn(1)),p=this.pow(t,r),d=a;0!==p.cmp(s);){for(var g=p,y=0;0!==g.cmp(s);y++)g=g.redSqr();n(y<d);var v=this.pow(c,new o(1).iushln(d-y-1));f=f.redMul(v),c=v.redSqr(),p=p.redMul(c),d=y}return f},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var r=i[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],h=u-1;h>=0;h--){var c=l>>h&1;r!==i[0]&&(r=this.sqr(r)),0!==c||0!==a?(a<<=1,a|=c,(4==++s||0===n&&0===h)&&(r=this.mul(r,i[a]),s=0,a=0)):s=0}u=26}return r},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},r(T,k),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},6042:(t,e,i)=>{t.exports=i(5207)},4743:(t,e,i)=>{var n=i(9509).Buffer,r=i(3482),o=i(8473),a=i(5717),s=i(2957),u=i(7753),l=i(5207);function h(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){o.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new h(t)}function p(t){return new c(t)}Object.keys(l).forEach((function(t){l[t].id=n.from(l[t].id,"hex"),l[t.toLowerCase()]=l[t]})),a(h,o.Writable),h.prototype._write=function(t,e,i){this._hash.update(t),i()},h.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},h.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),n=s(i,t,this._hashType,this._signType,this._tag);return e?n.toString(e):n},a(c,o.Writable),c.prototype._write=function(t,e,i){this._hash.update(t),i()},c.prototype.update=function(t,e){return"string"==typeof t&&(t=n.from(t,e)),this._hash.update(t),this},c.prototype.verify=function(t,e,i){"string"==typeof e&&(e=n.from(e,i)),this.end();var r=this._hash.digest();return u(e,r,t,this._signType,this._tag)},t.exports={Sign:f,Verify:p,createSign:f,createVerify:p}},2957:(t,e,i)=>{var n=i(9509).Buffer,r=i(8355),o=i(3663),a=i(6266).ec,s=i(8815),u=i(980),l=i(1308);function h(t,e,i,o){if((t=n.from(t.toArray())).length<e.byteLength()){var a=n.alloc(e.byteLength()-t.length);t=n.concat([a,t])}var s=i.length,u=function(t,e){t=(t=c(t,e)).mod(e);var i=n.from(t.toArray());if(i.length<e.byteLength()){var r=n.alloc(e.byteLength()-i.length);i=n.concat([r,i])}return i}(i,e),l=n.alloc(s);l.fill(1);var h=n.alloc(s);return h=r(o,h).update(l).update(n.from([0])).update(t).update(u).digest(),l=r(o,h).update(l).digest(),{k:h=r(o,h).update(l).update(n.from([1])).update(t).update(u).digest(),v:l=r(o,h).update(l).digest()}}function c(t,e){var i=new s(t),n=(t.length<<3)-e.bitLength();return n>0&&i.ishrn(n),i}function f(t,e,i){var o,a;do{for(o=n.alloc(0);8*o.length<t.bitLength();)e.v=r(i,e.k).update(e.v).digest(),o=n.concat([o,e.v]);a=c(o,t),e.k=r(i,e.k).update(e.v).update(n.from([0])).digest(),e.v=r(i,e.k).update(e.v).digest()}while(-1!==a.cmp(t));return a}function p(t,e,i,n){return t.toRed(s.mont(i)).redPow(e).fromRed().mod(n)}t.exports=function(t,e,i,r,d){var g=u(e);if(g.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return function(t,e){var i=l[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var r=new a(i).keyFromPrivate(e.privateKey).sign(t);return n.from(r.toDER())}(t,g)}if("dsa"===g.type){if("dsa"!==r)throw new Error("wrong private key type");return function(t,e,i){for(var r,o=e.params.priv_key,a=e.params.p,u=e.params.q,l=e.params.g,d=new s(0),g=c(t,u).mod(u),y=!1,v=h(o,u,t,i);!1===y;)d=p(l,r=f(u,v,i),a,u),0===(y=r.invm(u).imul(g.add(o.mul(d))).mod(u)).cmpn(0)&&(y=!1,d=new s(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),n.from(i)}(d,y)}(t,g,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");t=n.concat([d,t]);for(var y=g.modulus.byteLength(),v=[0,1];t.length+v.length+1<y;)v.push(255);v.push(0);for(var m=-1;++m<t.length;)v.push(t[m]);return o(v,g)},t.exports.getKey=h,t.exports.makeKey=f},7753:(t,e,i)=>{var n=i(9509).Buffer,r=i(8815),o=i(6266).ec,a=i(980),s=i(1308);function u(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,e,i,l,h){var c=a(i);if("ec"===c.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,i){var n=s[i.data.algorithm.curve.join(".")];if(!n)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var r=new o(n),a=i.data.subjectPrivateKey.data;return r.verify(e,t,a)}(t,e,c)}if("dsa"===c.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,i){var n=i.data.p,o=i.data.q,s=i.data.g,l=i.data.pub_key,h=a.signature.decode(t,"der"),c=h.s,f=h.r;u(c,o),u(f,o);var p=r.mont(n),d=c.invm(o);return 0===s.toRed(p).redPow(new r(e).mul(d).mod(o)).fromRed().mul(l.toRed(p).redPow(f.mul(d).mod(o)).fromRed()).mod(n).mod(o).cmp(f)}(t,e,c)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");e=n.concat([h,e]);for(var f=c.modulus.byteLength(),p=[1],d=0;e.length+p.length+2<f;)p.push(255),d++;p.push(0);for(var g=-1;++g<e.length;)p.push(e[g]);p=n.from(p);var y=r.mont(c.modulus);t=(t=new r(t).toRed(y)).redPow(new r(c.publicExponent)),t=n.from(t.fromRed().toArray());var v=d<8?1:0;for(f=Math.min(t.length,p.length),t.length!==p.length&&(v=1),g=-1;++g<f;)v|=t[g]^p[g];return 0===v}},8815:function(t,e,i){!function(t,e){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function o(t,e,i){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var a;"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(2363).Buffer}catch(t){}function s(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void n(!1,"Invalid character in "+t)}function u(t,e,i){var n=s(t,i);return i-1>=e&&(n|=s(t,i-1)<<4),n}function l(t,e,i,r){for(var o=0,a=0,s=Math.min(t.length,i),u=e;u<s;u++){var l=t.charCodeAt(u)-48;o*=r,a=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&a<r,"Invalid character"),o+=a}return o}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===e?this._parseHex(t,r,i):(this._parseBase(t,e,r),"le"===i&&this._initArray(this.toArray(),e,i)))},o.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},o.prototype._initArray=function(t,e,i){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var o,a,s=0;if("be"===i)for(r=t.length-1,o=0;r>=0;r-=3)a=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===i)for(r=0,o=0;r<t.length;r+=3)a=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,o=0,a=0;if("be"===i)for(n=t.length-1;n>=e;n-=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;else for(n=(t.length-e)%2==0?e+1:e;n<t.length;n+=2)r=u(t,e,n)<<o,this.words[a]|=67108863&r,o>=18?(o-=18,a+=1,this.words[a]|=r>>>26):o+=8;this._strip()},o.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var n=0,r=1;r<=67108863;r*=e)n++;n--,r=r/e|0;for(var o=t.length-i,a=o%n,s=Math.min(o,o-a)+i,u=0,h=i;h<s;h+=n)u=l(t,h,h+n,e),this.imuln(r),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var c=1;for(u=l(t,h,t.length,e),h=0;h<a;h++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype._move=function(t){h(t,this)},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(t){o.prototype.inspect=c}else o.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(t,e,i){i.negative=e.negative^t.negative;var n=t.length+e.length|0;i.length=n,n=n-1|0;var r=0|t.words[0],o=0|e.words[0],a=r*o,s=67108863&a,u=a/67108864|0;i.words[0]=s;for(var l=1;l<n;l++){for(var h=u>>>26,c=67108863&u,f=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=f;p++){var d=l-p|0;h+=(a=(r=0|t.words[d])*(o=0|e.words[p])+c)/67108864|0,c=67108863&a}i.words[l]=0|c,u=0|h}return 0!==u?i.words[l]=0|u:i.length--,i._strip()}o.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<r|o)).toString(16);i=0!=(o=s>>>24-r&16777215)||a!==this.length-1?f[6-u.length]+u+i:u+i,(r+=2)>=26&&(r-=26,a--)}for(0!==o&&(i=o.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=p[t],h=d[t];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var g=c.modrn(h).toString(t);i=(c=c.idivn(h)).isZero()?g+i:f[l-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(t,e){return this.toArrayLike(a,t,e)}),o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,i){this._strip();var r=this.byteLength(),o=i||Math.max(1,r);n(r<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var a=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](a,r),a},o.prototype._toArrayLikeLE=function(t,e){for(var i=0,n=0,r=0,o=0;r<this.length;r++){var a=this.words[r]<<o|n;t[i++]=255&a,i<t.length&&(t[i++]=a>>8&255),i<t.length&&(t[i++]=a>>16&255),6===o?(i<t.length&&(t[i++]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(i<t.length)for(t[i++]=n;i<t.length;)t[i++]=0},o.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,n=0,r=0,o=0;r<this.length;r++){var a=this.words[r]<<o|n;t[i--]=255&a,i>=0&&(t[i--]=a>>8&255),i>=0&&(t[i--]=a>>16&255),6===o?(i>=0&&(t[i--]=a>>24&255),n=0,o=0):(n=a>>>24,o+=2)}if(i>=0)for(t[i--]=n;i>=0;)t[i--]=0},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var n=0;n<i.length;n++)this.words[n]=e.words[n]^i.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this._strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},o.prototype.iadd=function(t){var e,i,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,n=t):(i=t,n=this);for(var r=0,o=0;o<n.length;o++)e=(0|i.words[o])+(0|n.words[o])+r,this.words[o]=67108863&e,r=e>>>26;for(;0!==r&&o<i.length;o++)e=(0|i.words[o])+r,this.words[o]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,n,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,n=t):(i=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|i.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<i.length;a++)o=(e=(0|i.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<i.length&&i!==this)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=Math.max(this.length,a),i!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var y=function(t,e,i){var n,r,o,a=t.words,s=e.words,u=i.words,l=0,h=0|a[0],c=8191&h,f=h>>>13,p=0|a[1],d=8191&p,g=p>>>13,y=0|a[2],v=8191&y,m=y>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],M=8191&x,E=x>>>13,A=0|a[5],k=8191&A,T=A>>>13,S=0|a[6],I=8191&S,L=S>>>13,O=0|a[7],C=8191&O,P=O>>>13,R=0|a[8],j=8191&R,N=R>>>13,D=0|a[9],z=8191&D,B=D>>>13,H=0|s[0],F=8191&H,U=H>>>13,V=0|s[1],q=8191&V,G=V>>>13,W=0|s[2],Y=8191&W,K=W>>>13,Z=0|s[3],X=8191&Z,J=Z>>>13,$=0|s[4],Q=8191&$,tt=$>>>13,et=0|s[5],it=8191&et,nt=et>>>13,rt=0|s[6],ot=8191&rt,at=rt>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ht=0|s[8],ct=8191&ht,ft=ht>>>13,pt=0|s[9],dt=8191&pt,gt=pt>>>13;i.negative=t.negative^e.negative,i.length=19;var yt=(l+(n=Math.imul(c,F))|0)+((8191&(r=(r=Math.imul(c,U))+Math.imul(f,F)|0))<<13)|0;l=((o=Math.imul(f,U))+(r>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(d,F),r=(r=Math.imul(d,U))+Math.imul(g,F)|0,o=Math.imul(g,U);var vt=(l+(n=n+Math.imul(c,q)|0)|0)+((8191&(r=(r=r+Math.imul(c,G)|0)+Math.imul(f,q)|0))<<13)|0;l=((o=o+Math.imul(f,G)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(v,F),r=(r=Math.imul(v,U))+Math.imul(m,F)|0,o=Math.imul(m,U),n=n+Math.imul(d,q)|0,r=(r=r+Math.imul(d,G)|0)+Math.imul(g,q)|0,o=o+Math.imul(g,G)|0;var mt=(l+(n=n+Math.imul(c,Y)|0)|0)+((8191&(r=(r=r+Math.imul(c,K)|0)+Math.imul(f,Y)|0))<<13)|0;l=((o=o+Math.imul(f,K)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(_,F),r=(r=Math.imul(_,U))+Math.imul(w,F)|0,o=Math.imul(w,U),n=n+Math.imul(v,q)|0,r=(r=r+Math.imul(v,G)|0)+Math.imul(m,q)|0,o=o+Math.imul(m,G)|0,n=n+Math.imul(d,Y)|0,r=(r=r+Math.imul(d,K)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,K)|0;var bt=(l+(n=n+Math.imul(c,X)|0)|0)+((8191&(r=(r=r+Math.imul(c,J)|0)+Math.imul(f,X)|0))<<13)|0;l=((o=o+Math.imul(f,J)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(M,F),r=(r=Math.imul(M,U))+Math.imul(E,F)|0,o=Math.imul(E,U),n=n+Math.imul(_,q)|0,r=(r=r+Math.imul(_,G)|0)+Math.imul(w,q)|0,o=o+Math.imul(w,G)|0,n=n+Math.imul(v,Y)|0,r=(r=r+Math.imul(v,K)|0)+Math.imul(m,Y)|0,o=o+Math.imul(m,K)|0,n=n+Math.imul(d,X)|0,r=(r=r+Math.imul(d,J)|0)+Math.imul(g,X)|0,o=o+Math.imul(g,J)|0;var _t=(l+(n=n+Math.imul(c,Q)|0)|0)+((8191&(r=(r=r+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;l=((o=o+Math.imul(f,tt)|0)+(r>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(k,F),r=(r=Math.imul(k,U))+Math.imul(T,F)|0,o=Math.imul(T,U),n=n+Math.imul(M,q)|0,r=(r=r+Math.imul(M,G)|0)+Math.imul(E,q)|0,o=o+Math.imul(E,G)|0,n=n+Math.imul(_,Y)|0,r=(r=r+Math.imul(_,K)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,K)|0,n=n+Math.imul(v,X)|0,r=(r=r+Math.imul(v,J)|0)+Math.imul(m,X)|0,o=o+Math.imul(m,J)|0,n=n+Math.imul(d,Q)|0,r=(r=r+Math.imul(d,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var wt=(l+(n=n+Math.imul(c,it)|0)|0)+((8191&(r=(r=r+Math.imul(c,nt)|0)+Math.imul(f,it)|0))<<13)|0;l=((o=o+Math.imul(f,nt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(I,F),r=(r=Math.imul(I,U))+Math.imul(L,F)|0,o=Math.imul(L,U),n=n+Math.imul(k,q)|0,r=(r=r+Math.imul(k,G)|0)+Math.imul(T,q)|0,o=o+Math.imul(T,G)|0,n=n+Math.imul(M,Y)|0,r=(r=r+Math.imul(M,K)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,K)|0,n=n+Math.imul(_,X)|0,r=(r=r+Math.imul(_,J)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,J)|0,n=n+Math.imul(v,Q)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,n=n+Math.imul(d,it)|0,r=(r=r+Math.imul(d,nt)|0)+Math.imul(g,it)|0,o=o+Math.imul(g,nt)|0;var xt=(l+(n=n+Math.imul(c,ot)|0)|0)+((8191&(r=(r=r+Math.imul(c,at)|0)+Math.imul(f,ot)|0))<<13)|0;l=((o=o+Math.imul(f,at)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(C,F),r=(r=Math.imul(C,U))+Math.imul(P,F)|0,o=Math.imul(P,U),n=n+Math.imul(I,q)|0,r=(r=r+Math.imul(I,G)|0)+Math.imul(L,q)|0,o=o+Math.imul(L,G)|0,n=n+Math.imul(k,Y)|0,r=(r=r+Math.imul(k,K)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(M,X)|0,r=(r=r+Math.imul(M,J)|0)+Math.imul(E,X)|0,o=o+Math.imul(E,J)|0,n=n+Math.imul(_,Q)|0,r=(r=r+Math.imul(_,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,n=n+Math.imul(v,it)|0,r=(r=r+Math.imul(v,nt)|0)+Math.imul(m,it)|0,o=o+Math.imul(m,nt)|0,n=n+Math.imul(d,ot)|0,r=(r=r+Math.imul(d,at)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,at)|0;var Mt=(l+(n=n+Math.imul(c,ut)|0)|0)+((8191&(r=(r=r+Math.imul(c,lt)|0)+Math.imul(f,ut)|0))<<13)|0;l=((o=o+Math.imul(f,lt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(j,F),r=(r=Math.imul(j,U))+Math.imul(N,F)|0,o=Math.imul(N,U),n=n+Math.imul(C,q)|0,r=(r=r+Math.imul(C,G)|0)+Math.imul(P,q)|0,o=o+Math.imul(P,G)|0,n=n+Math.imul(I,Y)|0,r=(r=r+Math.imul(I,K)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,K)|0,n=n+Math.imul(k,X)|0,r=(r=r+Math.imul(k,J)|0)+Math.imul(T,X)|0,o=o+Math.imul(T,J)|0,n=n+Math.imul(M,Q)|0,r=(r=r+Math.imul(M,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,n=n+Math.imul(_,it)|0,r=(r=r+Math.imul(_,nt)|0)+Math.imul(w,it)|0,o=o+Math.imul(w,nt)|0,n=n+Math.imul(v,ot)|0,r=(r=r+Math.imul(v,at)|0)+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,n=n+Math.imul(d,ut)|0,r=(r=r+Math.imul(d,lt)|0)+Math.imul(g,ut)|0,o=o+Math.imul(g,lt)|0;var Et=(l+(n=n+Math.imul(c,ct)|0)|0)+((8191&(r=(r=r+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;l=((o=o+Math.imul(f,ft)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,F),r=(r=Math.imul(z,U))+Math.imul(B,F)|0,o=Math.imul(B,U),n=n+Math.imul(j,q)|0,r=(r=r+Math.imul(j,G)|0)+Math.imul(N,q)|0,o=o+Math.imul(N,G)|0,n=n+Math.imul(C,Y)|0,r=(r=r+Math.imul(C,K)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,K)|0,n=n+Math.imul(I,X)|0,r=(r=r+Math.imul(I,J)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,J)|0,n=n+Math.imul(k,Q)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(M,it)|0,r=(r=r+Math.imul(M,nt)|0)+Math.imul(E,it)|0,o=o+Math.imul(E,nt)|0,n=n+Math.imul(_,ot)|0,r=(r=r+Math.imul(_,at)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,at)|0,n=n+Math.imul(v,ut)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(m,ut)|0,o=o+Math.imul(m,lt)|0,n=n+Math.imul(d,ct)|0,r=(r=r+Math.imul(d,ft)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ft)|0;var At=(l+(n=n+Math.imul(c,dt)|0)|0)+((8191&(r=(r=r+Math.imul(c,gt)|0)+Math.imul(f,dt)|0))<<13)|0;l=((o=o+Math.imul(f,gt)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(z,q),r=(r=Math.imul(z,G))+Math.imul(B,q)|0,o=Math.imul(B,G),n=n+Math.imul(j,Y)|0,r=(r=r+Math.imul(j,K)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(C,X)|0,r=(r=r+Math.imul(C,J)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,J)|0,n=n+Math.imul(I,Q)|0,r=(r=r+Math.imul(I,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,n=n+Math.imul(k,it)|0,r=(r=r+Math.imul(k,nt)|0)+Math.imul(T,it)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(M,ot)|0,r=(r=r+Math.imul(M,at)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,n=n+Math.imul(_,ut)|0,r=(r=r+Math.imul(_,lt)|0)+Math.imul(w,ut)|0,o=o+Math.imul(w,lt)|0,n=n+Math.imul(v,ct)|0,r=(r=r+Math.imul(v,ft)|0)+Math.imul(m,ct)|0,o=o+Math.imul(m,ft)|0;var kt=(l+(n=n+Math.imul(d,dt)|0)|0)+((8191&(r=(r=r+Math.imul(d,gt)|0)+Math.imul(g,dt)|0))<<13)|0;l=((o=o+Math.imul(g,gt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,Y),r=(r=Math.imul(z,K))+Math.imul(B,Y)|0,o=Math.imul(B,K),n=n+Math.imul(j,X)|0,r=(r=r+Math.imul(j,J)|0)+Math.imul(N,X)|0,o=o+Math.imul(N,J)|0,n=n+Math.imul(C,Q)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,tt)|0,n=n+Math.imul(I,it)|0,r=(r=r+Math.imul(I,nt)|0)+Math.imul(L,it)|0,o=o+Math.imul(L,nt)|0,n=n+Math.imul(k,ot)|0,r=(r=r+Math.imul(k,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(M,ut)|0,r=(r=r+Math.imul(M,lt)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,lt)|0,n=n+Math.imul(_,ct)|0,r=(r=r+Math.imul(_,ft)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ft)|0;var Tt=(l+(n=n+Math.imul(v,dt)|0)|0)+((8191&(r=(r=r+Math.imul(v,gt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((o=o+Math.imul(m,gt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,X),r=(r=Math.imul(z,J))+Math.imul(B,X)|0,o=Math.imul(B,J),n=n+Math.imul(j,Q)|0,r=(r=r+Math.imul(j,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(C,it)|0,r=(r=r+Math.imul(C,nt)|0)+Math.imul(P,it)|0,o=o+Math.imul(P,nt)|0,n=n+Math.imul(I,ot)|0,r=(r=r+Math.imul(I,at)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,at)|0,n=n+Math.imul(k,ut)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,lt)|0,n=n+Math.imul(M,ct)|0,r=(r=r+Math.imul(M,ft)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ft)|0;var St=(l+(n=n+Math.imul(_,dt)|0)|0)+((8191&(r=(r=r+Math.imul(_,gt)|0)+Math.imul(w,dt)|0))<<13)|0;l=((o=o+Math.imul(w,gt)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,Q),r=(r=Math.imul(z,tt))+Math.imul(B,Q)|0,o=Math.imul(B,tt),n=n+Math.imul(j,it)|0,r=(r=r+Math.imul(j,nt)|0)+Math.imul(N,it)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(C,ot)|0,r=(r=r+Math.imul(C,at)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,at)|0,n=n+Math.imul(I,ut)|0,r=(r=r+Math.imul(I,lt)|0)+Math.imul(L,ut)|0,o=o+Math.imul(L,lt)|0,n=n+Math.imul(k,ct)|0,r=(r=r+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,o=o+Math.imul(T,ft)|0;var It=(l+(n=n+Math.imul(M,dt)|0)|0)+((8191&(r=(r=r+Math.imul(M,gt)|0)+Math.imul(E,dt)|0))<<13)|0;l=((o=o+Math.imul(E,gt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(z,it),r=(r=Math.imul(z,nt))+Math.imul(B,it)|0,o=Math.imul(B,nt),n=n+Math.imul(j,ot)|0,r=(r=r+Math.imul(j,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,n=n+Math.imul(C,ut)|0,r=(r=r+Math.imul(C,lt)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,lt)|0,n=n+Math.imul(I,ct)|0,r=(r=r+Math.imul(I,ft)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ft)|0;var Lt=(l+(n=n+Math.imul(k,dt)|0)|0)+((8191&(r=(r=r+Math.imul(k,gt)|0)+Math.imul(T,dt)|0))<<13)|0;l=((o=o+Math.imul(T,gt)|0)+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,ot),r=(r=Math.imul(z,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(j,ut)|0,r=(r=r+Math.imul(j,lt)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,lt)|0,n=n+Math.imul(C,ct)|0,r=(r=r+Math.imul(C,ft)|0)+Math.imul(P,ct)|0,o=o+Math.imul(P,ft)|0;var Ot=(l+(n=n+Math.imul(I,dt)|0)|0)+((8191&(r=(r=r+Math.imul(I,gt)|0)+Math.imul(L,dt)|0))<<13)|0;l=((o=o+Math.imul(L,gt)|0)+(r>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,ut),r=(r=Math.imul(z,lt))+Math.imul(B,ut)|0,o=Math.imul(B,lt),n=n+Math.imul(j,ct)|0,r=(r=r+Math.imul(j,ft)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ft)|0;var Ct=(l+(n=n+Math.imul(C,dt)|0)|0)+((8191&(r=(r=r+Math.imul(C,gt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((o=o+Math.imul(P,gt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,ct),r=(r=Math.imul(z,ft))+Math.imul(B,ct)|0,o=Math.imul(B,ft);var Pt=(l+(n=n+Math.imul(j,dt)|0)|0)+((8191&(r=(r=r+Math.imul(j,gt)|0)+Math.imul(N,dt)|0))<<13)|0;l=((o=o+Math.imul(N,gt)|0)+(r>>>13)|0)+(Pt>>>26)|0,Pt&=67108863;var Rt=(l+(n=Math.imul(z,dt))|0)+((8191&(r=(r=Math.imul(z,gt))+Math.imul(B,dt)|0))<<13)|0;return l=((o=Math.imul(B,gt))+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=yt,u[1]=vt,u[2]=mt,u[3]=bt,u[4]=_t,u[5]=wt,u[6]=xt,u[7]=Mt,u[8]=Et,u[9]=At,u[10]=kt,u[11]=Tt,u[12]=St,u[13]=It,u[14]=Lt,u[15]=Ot,u[16]=Ct,u[17]=Pt,u[18]=Rt,0!==l&&(u[19]=l,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var n=0,r=0,o=0;o<i.length-1;o++){var a=r;r=0;for(var s=67108863&n,u=Math.min(o,e.length-1),l=Math.max(0,o-t.length+1);l<=u;l++){var h=o-l,c=(0|t.words[h])*(0|e.words[l]),f=67108863&c;s=67108863&(f=f+s|0),r+=(a=(a=a+(c/67108864|0)|0)+(f>>>26)|0)>>>26,a&=67108863}i.words[o]=s,n=a,a=r}return 0!==n?i.words[o]=n:i.length--,i._strip()}function m(t,e,i){return v(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(y=g),o.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?y(this,t,e):i<63?g(this,t,e):i<1024?v(this,t,e):m(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var n=0,r=0;r<e;r++)n|=(1&t)<<e-r-1,t>>=1;return n},b.prototype.permute=function(t,e,i,n,r,o){for(var a=0;a<o;a++)n[a]=e[t[a]],r[a]=i[t[a]]},b.prototype.transform=function(t,e,i,n,r,o){this.permute(o,t,e,i,n,r);for(var a=1;a<r;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),h=0;h<r;h+=s)for(var c=u,f=l,p=0;p<a;p++){var d=i[h+p],g=n[h+p],y=i[h+p+a],v=n[h+p+a],m=c*y-f*v;v=c*v+f*y,y=m,i[h+p]=d+y,n[h+p]=g+v,i[h+p+a]=d-y,n[h+p+a]=g-v,p!==s&&(m=u*c-l*f,f=u*f+l*c,c=m)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),n=1&i,r=0;for(i=i/2|0;i;i>>>=1)r++;return 1<<r+1+n},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var n=0;n<i/2;n++){var r=t[n];t[n]=t[i-n-1],t[i-n-1]=r,r=e[n],e[n]=-e[i-n-1],e[i-n-1]=-r}},b.prototype.normalize13b=function(t,e){for(var i=0,n=0;n<e/2;n++){var r=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+i;t[n]=67108863&r,i=r<67108864?0:r/67108864|0}return t},b.prototype.convert13b=function(t,e,i,r){for(var o=0,a=0;a<e;a++)o+=0|t[a],i[2*a]=8191&o,o>>>=13,i[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<r;++a)i[a]=0;n(0===o),n(0==(-8192&o))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var n=2*this.guessLen13b(t.length,e.length),r=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),u=new Array(n),l=new Array(n),h=new Array(n),c=new Array(n),f=i.words;f.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,l,n),this.transform(a,o,s,u,n,r),this.transform(l,o,h,c,n,r);for(var p=0;p<n;p++){var d=s[p]*h[p]-u[p]*c[p];u[p]=s[p]*c[p]+u[p]*h[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,f,o,n,r),this.conjugate(f,o,n),this.normalize13b(f,n),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),m(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var i=0,r=0;r<this.length;r++){var o=(0|this.words[r])*t,a=(67108863&o)+(67108863&i);i>>=26,i+=o/67108864|0,i+=a>>>26,this.words[r]=67108863&a}return 0!==i&&(this.words[r]=i,this.length++),e?this.ineg():this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var n=i/26|0,r=i%26;e[i]=t.words[n]>>>r&1}return e}(t);if(0===e.length)return new o(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var r=i.sqr();n<e.length;n++,r=r.sqr())0!==e[n]&&(i=i.mul(r));return i},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,i=t%26,r=(t-i)/26,o=67108863>>>26-i<<26-i;if(0!==i){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<i;this.words[e]=u|a,a=s>>>26-i}a&&(this.words[e]=a,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,i){var r;n("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=i;if(r-=a,r=Math.max(0,r),u){for(var l=0;l<a;l++)u.words[l]=this.words[l];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,l=0;l<this.length;l++)this.words[l]=this.words[l+a];else this.words[0]=0,this.length=1;var h=0;for(l=this.length-1;l>=0&&(0!==h||l>=r);l--){var c=0|this.words[l];this.words[l]=h<<26-o|c>>>o,h=c&s}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(t,e,i){return n(0===this.negative),this.iushrn(t,e,i)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,i){var r,o,a=t.length+i;this._expand(a);var s=0;for(r=0;r<t.length;r++){o=(0|this.words[r+i])+s;var u=(0|t.words[r])*e;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[r+i]=67108863&o}for(;r<this.length-i;r++)s=(o=(0|this.words[r+i])+s)>>26,this.words[r+i]=67108863&o;if(0===s)return this._strip();for(n(-1===s),s=0,r=0;r<this.length;r++)s=(o=-(0|this.words[r])+s)>>26,this.words[r]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),r=t,a=0|r.words[r.length-1];0!=(i=26-this._countBits(a))&&(r=r.ushln(i),n.iushln(i),a=0|r.words[r.length-1]);var s,u=n.length-r.length;if("mod"!==e){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var h=n.clone()._ishlnsubmul(r,1,u);0===h.negative&&(n=h,s&&(s.words[u]=1));for(var c=u-1;c>=0;c--){var f=67108864*(0|n.words[r.length+c])+(0|n.words[r.length+c-1]);for(f=Math.min(f/a|0,67108863),n._ishlnsubmul(r,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(r,1,c),n.isZero()||(n.negative^=1);s&&(s.words[c]=f)}return s&&s._strip(),n._strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,i){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(r=s.div.neg()),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.iadd(t)),{div:r,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(r=s.div.neg()),{div:r,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),i&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modrn(t.words[0]))}:this._wordDiv(t,e);var r,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),r=t.andln(1),o=i.cmp(n);return o<0||1===r&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var i=(1<<26)%t,r=0,o=this.length-1;o>=0;o--)r=(i*r+(0|this.words[o]))%t;return e?-r:r},o.prototype.modn=function(t){return this.modrn(t)},o.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var i=0,r=this.length-1;r>=0;r--){var o=(0|this.words[r])+67108864*i;this.words[r]=o/t|0,i=o%t}return this._strip(),e?this.ineg():this},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r=new o(1),a=new o(0),s=new o(0),u=new o(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var h=i.clone(),c=e.clone();!e.isZero();){for(var f=0,p=1;0==(e.words[0]&p)&&f<26;++f,p<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(r.isOdd()||a.isOdd())&&(r.iadd(h),a.isub(c)),r.iushrn(1),a.iushrn(1);for(var d=0,g=1;0==(i.words[0]&g)&&d<26;++d,g<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(h),u.isub(c)),s.iushrn(1),u.iushrn(1);e.cmp(i)>=0?(e.isub(i),r.isub(s),a.isub(u)):(i.isub(e),s.isub(r),u.isub(a))}return{a:s,b:u,gcd:i.iushln(l)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var r,a=new o(1),s=new o(0),u=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,h=1;0==(e.words[0]&h)&&l<26;++l,h<<=1);if(l>0)for(e.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var c=0,f=1;0==(i.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(i.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(i)>=0?(e.isub(i),a.isub(s)):(i.isub(e),s.isub(a))}return(r=0===e.cmpn(1)?a:s).cmpn(0)<0&&r.iadd(t),r},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var n=0;e.isEven()&&i.isEven();n++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var o=e;e=i,i=o}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var o=r,a=i;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),n(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var n=0|this.words[i],r=0|t.words[i];if(n!==r){n<r?e=-1:n>r&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:i.ucmp(this.p);return 0===n?(i.words[0]=0,i.length=1):n>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},r(x,w),x.prototype.split=function(t,e){for(var i=4194303,n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&i,r=10;r<t.length;r++){var a=0|t.words[r];t.words[r-10]=(a&i)<<4|o>>>22,o=a}o>>>=22,t.words[r-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},x.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var n=0|t.words[i];e+=977*n,t.words[i]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(M,w),r(E,w),r(A,w),A.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var n=19*(0|t.words[i])+e,r=67108863&n;n>>>=26,t.words[i]=r,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new x;else if("p224"===t)e=new M;else if("p192"===t)e=new E;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return _[t]=e,e},k.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},k.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var i=this.m.add(new o(1)).iushrn(2);return this.pow(t,i)}for(var r=this.m.subn(1),a=0;!r.isZero()&&0===r.andln(1);)a++,r.iushrn(1);n(!r.isZero());var s=new o(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(u);)h.redIAdd(u);for(var c=this.pow(h,r),f=this.pow(t,r.addn(1).iushrn(1)),p=this.pow(t,r),d=a;0!==p.cmp(s);){for(var g=p,y=0;0!==g.cmp(s);y++)g=g.redSqr();n(y<d);var v=this.pow(c,new o(1).iushln(d-y-1));f=f.redMul(v),c=v.redSqr(),p=p.redMul(c),d=y}return f},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new o(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var r=i[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var l=e.words[n],h=u-1;h>=0;h--){var c=l>>h&1;r!==i[0]&&(r=this.sqr(r)),0!==c||0!==a?(a<<=1,a|=c,(4==++s||0===n&&0===h)&&(r=this.mul(r,i[a]),s=0,a=0)):s=0}u=26}return r},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new T(t)},r(T,k),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),o=r;return r.cmp(this.m)>=0?o=r.isub(this.m):r.cmpn(0)<0&&(o=r.iadd(this.m)),o._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(n).iushrn(this.shift),a=r;return r.cmp(this.m)>=0?a=r.isub(this.m):r.cmpn(0)<0&&(a=r.iadd(this.m)),a._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},7295:t=>{t.exports=function(t,e){for(var i=Math.min(t.length,e.length),n=new Buffer(i),r=0;r<i;++r)n[r]=t[r]^e[r];return n}},8764:(t,e,i)=>{"use strict";const n=i(9742),r=i(645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function s(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return c(t)}return l(t,e,i)}function l(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|g(t,e);let n=s(i);const r=n.write(t,e);return r!==i&&(n=n.slice(0,r)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return p(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return p(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return u.from(n,e,i);const r=function(t){if(u.isBuffer(t)){const e=0|d(t.length),i=s(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||X(t.length)?s(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return h(t),s(t<0?0:0|d(t))}function f(t){const e=t.length<0?0:0|d(t.length),i=s(e);for(let n=0;n<e;n+=1)i[n]=255&t[n];return i}function p(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(n,u.prototype),n}function d(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===i)return 0;let r=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(r)return n?-1:W(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,i){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return L(this,e,i);case"utf8":case"utf-8":return k(this,e,i);case"ascii":return S(this,e,i);case"latin1":case"binary":return I(this,e,i);case"base64":return A(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function m(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),X(i=+i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:b(t,e,i,n,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):b(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function b(t,e,i,n,r){let o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,i/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){let n=-1;for(o=i;o<s;o++)if(l(t,o)===l(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(i+u>s&&(i=s-u),o=i;o>=0;o--){let i=!0;for(let n=0;n<u;n++)if(l(t,o+n)!==l(e,n)){i=!1;break}if(i)return o}return-1}function _(t,e,i,n){i=Number(i)||0;const r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;const o=e.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(e.substr(2*a,2),16);if(X(n))return a;t[i+a]=n}return a}function w(t,e,i,n){return K(W(e,t.length-i),t,i,n)}function x(t,e,i,n){return K(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function M(t,e,i,n){return K(Y(e),t,i,n)}function E(t,e,i,n){return K(function(t,e){let i,n,r;const o=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function A(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function k(t,e,i){i=Math.min(t.length,i);const n=[];let r=e;for(;r<i;){const e=t[r];let o=null,a=e>239?4:e>223?3:e>191?2:1;if(r+a<=i){let i,n,s,u;switch(a){case 1:e<128&&(o=e);break;case 2:i=t[r+1],128==(192&i)&&(u=(31&e)<<6|63&i,u>127&&(o=u));break;case 3:i=t[r+1],n=t[r+2],128==(192&i)&&128==(192&n)&&(u=(15&e)<<12|(63&i)<<6|63&n,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:i=t[r+1],n=t[r+2],s=t[r+3],128==(192&i)&&128==(192&n)&&128==(192&s)&&(u=(15&e)<<18|(63&i)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),r+=a}return function(t){const e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);let i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=T));return i}(n)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,i){return l(t,e,i)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,i){return function(t,e,i){return h(t),t<=0?s(t):void 0!==e?"string"==typeof i?s(t).fill(e,i):s(t).fill(e):s(t)}(t,e,i)},u.allocUnsafe=function(t){return c(t)},u.allocUnsafeSlow=function(t){return c(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,n=e.length;for(let r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const n=u.allocUnsafe(e);let r=0;for(i=0;i<t.length;++i){let e=t[i];if(Z(e,Uint8Array))r+e.length>n.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(n,r)):Uint8Array.prototype.set.call(n,e,r);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,r)}r+=e.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(t,e,i,n,r){if(Z(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;let o=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0);const s=Math.min(o,a),l=this.slice(n,r),h=t.slice(e,i);for(let t=0;t<s;++t)if(l[t]!==h[t]){o=l[t],a=h[t];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return m(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return m(this,t,e,i,!1)},u.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}const r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return _(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":case"latin1":case"binary":return x(this,t,e,i);case"base64":return M(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function S(t,e,i){let n="";i=Math.min(t.length,i);for(let r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function I(t,e,i){let n="";i=Math.min(t.length,i);for(let r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function L(t,e,i){const n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);let r="";for(let n=e;n<i;++n)r+=J[t[n]];return r}function O(t,e,i){const n=t.slice(e,i);let r="";for(let t=0;t<n.length-1;t+=2)r+=String.fromCharCode(n[t]+256*n[t+1]);return r}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,i,n,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function R(t,e,i,n,r){U(e,n,r,t,i,7);let o=Number(e&BigInt(4294967295));t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function j(t,e,i,n,r){U(e,n,r,t,i,7);let o=Number(e&BigInt(4294967295));t[i+7]=o,o>>=8,t[i+6]=o,o>>=8,t[i+5]=o,o>>=8,t[i+4]=o;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function N(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(t,e,i,n,o){return e=+e,i>>>=0,o||N(t,0,i,4),r.write(t,e,i,n,23,4),i+4}function z(t,e,i,n,o){return e=+e,i>>>=0,o||N(t,0,i,8),r.write(t,e,i,n,52,8),i+8}u.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let n=this[t],r=1,o=0;for(;++o<e&&(r*=256);)n+=this[t+o]*r;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let n=this[t+--e],r=1;for(;e>0&&(r*=256);)n+=this[t+--e]*r;return n},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=$((function(t){V(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||q(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,r=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(n)+(BigInt(r)<<BigInt(32))})),u.prototype.readBigUInt64BE=$((function(t){V(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||q(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],r=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(n)<<BigInt(32))+BigInt(r)})),u.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let n=this[t],r=1,o=0;for(;++o<e&&(r*=256);)n+=this[t+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let n=e,r=1,o=this[t+--n];for(;n>0&&(r*=256);)o+=this[t+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=$((function(t){V(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||q(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),u.prototype.readBigInt64BE=$((function(t){V(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||q(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,i,n){t=+t,e>>>=0,i>>>=0,n||P(this,t,e,i,Math.pow(2,8*i)-1,0);let r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,i,n){t=+t,e>>>=0,i>>>=0,n||P(this,t,e,i,Math.pow(2,8*i)-1,0);let r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=$((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeBigUInt64BE=$((function(t,e=0){return j(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),u.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*i-1);P(this,t,e,i,n-1,-n)}let r=0,o=1,a=0;for(this[e]=255&t;++r<i&&(o*=256);)t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*i-1);P(this,t,e,i,n-1,-n)}let r=i-1,o=1,a=0;for(this[e+r]=255&t;--r>=0&&(o*=256);)t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=$((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeBigInt64BE=$((function(t,e=0){return j(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),u.prototype.writeFloatLE=function(t,e,i){return D(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return D(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return z(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return z(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,n){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);const r=n-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,n):Uint8Array.prototype.set.call(t,this.subarray(i,n),e),r},u.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{const o=u.isBuffer(t)?t:u.from(t,n),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(r=0;r<i-e;++r)this[r+e]=o[r%a]}return this};const B={};function H(t,e,i){B[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",i=t.length;const n="-"===t[0]?1:0;for(;i>=n+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function U(t,e,i,n,r,o){if(t>i||t<e){const n="bigint"==typeof e?"n":"";let r;throw r=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${i}${n}`,new B.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,i){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||q(e,t.length-(i+1))}(n,r,o)}function V(t,e){if("number"!=typeof t)throw new B.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,i){if(Math.floor(t)!==t)throw V(t,i),new B.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}H("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),H("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),H("ERR_OUT_OF_RANGE",(function(t,e,i){let n=`The value of "${t}" is out of range.`,r=i;return Number.isInteger(i)&&Math.abs(i)>2**32?r=F(String(i)):"bigint"==typeof i&&(r=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(r=F(r)),r+="n"),n+=` It must be ${e}. Received ${r}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function W(t,e){let i;e=e||1/0;const n=t.length;let r=null;const o=[];for(let a=0;a<n;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Y(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,i,n){let r;for(r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function X(t){return t!=t}const J=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const n=16*i;for(let r=0;r<16;++r)e[n+r]=t[i]+t[r]}return e}();function $(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},1027:(t,e,i)=>{var n=i(9509).Buffer,r=i(2830).Transform,o=i(2553).s;function a(t){r.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(5717)(a,r),a.prototype.update=function(t,e,i){"string"==typeof t&&(t=n.from(t,e));var r=this._update(t);return this.hashMode?this:(i&&(r=this._toString(r,i)),r)},a.prototype.setAutoPadding=function(){},a.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},a.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},a.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},a.prototype._transform=function(t,e,i){var n;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){n=t}finally{i(n)}},a.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},a.prototype._finalOrDigest=function(t){var e=this.__final()||n.alloc(0);return t&&(e=this._toString(e,t,!0)),e},a.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new o(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var n=this._decoder.write(t);return i&&(n+=this._decoder.end()),n},t.exports=a},6393:(t,e,i)=>{var n=i(6266),r=i(3550);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function s(t,e,i){Array.isArray(t)||(t=t.toArray());var n=new Buffer(t);if(i&&n.length<i){var r=new Buffer(i-n.length);r.fill(0),n=Buffer.concat([r,n])}return e?n.toString(e):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,i){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),s(i,t)},a.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e));var i=new r(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}},3482:(t,e,i)=>{"use strict";var n=i(5717),r=i(2318),o=i(9785),a=i(9072),s=i(1027);function u(t){s.call(this,"digest"),this._hash=t}n(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new r:"rmd160"===t||"ripemd160"===t?new o:new u(a(t))}},8028:(t,e,i)=>{var n=i(2318);t.exports=function(t){return(new n).update(t).digest()}},8355:(t,e,i)=>{"use strict";var n=i(5717),r=i(1031),o=i(1027),a=i(9509).Buffer,s=i(8028),u=i(9785),l=i(9072),h=a.alloc(128);function c(t,e){o.call(this,"digest"),"string"==typeof e&&(e=a.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<i&&(e=a.concat([e,h],i));for(var n=this._ipad=a.allocUnsafe(i),r=this._opad=a.allocUnsafe(i),s=0;s<i;s++)n[s]=54^e[s],r[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(n)}n(c,o),c.prototype._update=function(t){this._hash.update(t)},c.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new c("rmd160",e):"md5"===t?new r(s,e):new c(t,e)}},1031:(t,e,i)=>{"use strict";var n=i(5717),r=i(9509).Buffer,o=i(1027),a=r.alloc(128),s=64;function u(t,e){o.call(this,"digest"),"string"==typeof e&&(e=r.from(e)),this._alg=t,this._key=e,e.length>s?e=t(e):e.length<s&&(e=r.concat([e,a],s));for(var i=this._ipad=r.allocUnsafe(s),n=this._opad=r.allocUnsafe(s),u=0;u<s;u++)i[u]=54^e[u],n[u]=92^e[u];this._hash=[i]}n(u,o),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,t]))},t.exports=u},5835:(t,e,i)=>{"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=i(1798),e.createHash=e.Hash=i(3482),e.createHmac=e.Hmac=i(8355);var n=i(6042),r=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);e.getHashes=function(){return o};var a=i(5632);e.pbkdf2=a.pbkdf2,e.pbkdf2Sync=a.pbkdf2Sync;var s=i(3614);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=i(2607);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=i(4743);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=i(6393);var h=i(7900);e.publicEncrypt=h.publicEncrypt,e.privateEncrypt=h.privateEncrypt,e.publicDecrypt=h.publicDecrypt,e.privateDecrypt=h.privateDecrypt;var c=i(7963);e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},5789:(t,e,i)=>{var n=i(3645),r=i(1667),o=i(3391),a=i(5436);e=n(!1);var s=r(o),u=r(a);e.push([t.id,"/*\n.mapjs-control-fullscreen{\n  width: 30px;\n  height: 30px;\n}*/\n\na.mapjs-control-fullscreen-button{\n  display: block;\n  width: 30px;\n  height: 30px;\n  line-height: 30px;\n\n}\n.mapjs-control-fullscreen a {\n\n  background:#fff url("+s+") no-repeat 0 0;\n  background-size:26px 52px;\n  }\n  .mapjs-control-fullscreen a {\n    background-position: 2px 2px;\n    }\n  .mapjs-fullscreen-on .mapjs-control-fullscreen a {\n    background-position:0 -26px;\n    }\n  .mapjs-touch.mapjs-fullscreen-on .mapjs-control-fullscreen a {\n    background-position: 2px -24px;\n    }\n\n/* Do not combine these two rules; IE will break.\n.mapjs-container:-webkit-full-screen {\n  width:100%!important;\n  height:100%!important;\n  }*/\n.mapjs-fullscreen-on {\n  width:100%!important;\n  height:100%!important;\n  }\n\n.mapjs-pseudo-fullscreen {\n  position:fixed!important;\n  width:100%!important;\n  height:100%!important;\n  top:0!important;\n  left:0!important;\n  z-index:99999;\n  }\n\n@media\n  (-webkit-min-device-pixel-ratio:2),\n  (min-resolution:192dpi) {\n    .mapjs-control-fullscreen a {\n      background-image:url("+u+");\n    }\n  }\n",""]),t.exports=e},8222:(t,e,i)=>{(e=i(3645)(!1)).push([t.id,".leaflet-sbs-range {\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    z-index: 999;\n}\n.leaflet-sbs-divider {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 50%;\n    margin-left: -2px;\n    width: 4px;\n    background-color: #fff;\n    pointer-events: none;\n    z-index: 999;\n}\n\n",""]),t.exports=e},5024:(t,e,i)=>{(e=i(3645)(!1)).push([t.id,".jupyter-widgets.mapjs-widgets {\n    height: 400px;\n    overflow: hidden;\n    flex: 1 1 auto;\n}\n\n.jp-LinkedOutputView .jupyter-widgets.mapjs-widgets {\n    min-height: 360px;  /* Min-height required for mirred output in jlab < 0.31.6 */\n    height: 100%;\n}\n\n/* Leaflet crispness override */\n.crisp-image {\n    /* Preserve crisp pixels with scaled up images */\n    image-rendering: optimizeSpeed;             /* Legal fallback */\n    image-rendering: -moz-crisp-edges;          /* Firefox        */\n    image-rendering: -o-crisp-edges;            /* Opera          */\n    image-rendering: -webkit-optimize-contrast; /* Safari         */\n    image-rendering: optimize-contrast;         /* CSS3 Proposed  */\n    image-rendering: crisp-edges;               /* CSS4 Proposed  */\n    image-rendering: pixelated;                 /* CSS4 Proposed  */\n    -ms-interpolation-mode: nearest-neighbor;   /* IE8+           */\n}",""]),t.exports=e},2753:(t,e,i)=>{var n=i(3645),r=i(1667),o=i(954);e=n(!1);var a=r(o);e.push([t.id,".leaflet-sbs-range {\n    -webkit-appearance: none;\n    display: inline-block!important;\n    vertical-align: middle;\n    height: 0;\n    padding: 0;\n    margin: 0;\n    border: 0;\n    background: rgba(0, 0, 0, 0.25);\n    min-width: 100px;\n    cursor: pointer;\n    pointer-events: none;\n    z-index: 999;\n}\n.leaflet-sbs-range::-ms-fill-upper {\n    background: transparent;\n}\n.leaflet-sbs-range::-ms-fill-lower {\n    background: rgba(255, 255, 255, 0.25);\n}\n/* Browser thingies */\n\n.leaflet-sbs-range::-moz-range-track {\n    opacity: 0;\n}\n.leaflet-sbs-range::-ms-track {\n    opacity: 0;\n}\n.leaflet-sbs-range::-ms-tooltip {\n    display: none;\n}\n/* For whatever reason, these need to be defined\n * on their own so dont group them */\n\n.leaflet-sbs-range::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    height: 40px;\n    width: 40px;\n    border-radius: 20px;\n    cursor: ew-resize;\n    pointer-events: auto;\n    border: 1px solid #ddd;\n    background-image: url("+a+");\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    background-size: 40px 40px;\n}\n.leaflet-sbs-range::-ms-thumb {\n    margin: 0;\n    padding: 0;\n    background: #fff;\n    height: 40px;\n    width: 40px;\n    border-radius: 20px;\n    cursor: ew-resize;\n    pointer-events: auto;\n    border: 1px solid #ddd;\n    background-image: url("+a+");\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    background-size: 40px 40px;\n}\n.leaflet-sbs-range::-moz-range-thumb {\n    padding: 0;\n    right: 0    ;\n    background: #fff;\n    height: 40px;\n    width: 40px;\n    border-radius: 20px;\n    cursor: ew-resize;\n    pointer-events: auto;\n    border: 1px solid #ddd;\n    background-image: url("+a+");\n    background-position: 50% 50%;\n    background-repeat: no-repeat;\n    background-size: 40px 40px;\n}\n.leaflet-sbs-range:disabled::-moz-range-thumb {\n    cursor: default;\n}\n.leaflet-sbs-range:disabled::-ms-thumb {\n    cursor: default;\n}\n.leaflet-sbs-range:disabled::-webkit-slider-thumb {\n    cursor: default;\n}\n.leaflet-sbs-range:disabled {\n    cursor: default;\n}\n.leaflet-sbs-range:focus {\n    outline: none!important;\n}\n.leaflet-sbs-range::-moz-focus-outer {\n    border: 0;\n}",""]),t.exports=e},1210:(t,e,i)=>{var n=i(3645),r=i(1667),o=i(7298),a=i(3265);e=n(!1);var s=r(o),u=r(a);e.push([t.id,".mapjs-control-search {\n\tposition:relative;\n\tfloat:left;\n\tbackground:#fff;\n\tcolor:#1978cf;\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n\t-moz-border-radius: 4px;\n\t-webkit-border-radius: 4px;\n\tborder-radius: 4px;\n\tbackground-color: rgba(255, 255, 255, 0.8);\n\tz-index:1000;\n\tmargin-left: 10px;\n\tmargin-top: 10px;\n}\n.mapjs-control-search.search-exp {/*expanded*/\n\tbackground: #fff;\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n}\n.mapjs-control-search .search-input {\n\tdisplay:block;\n\tfloat:left;\n\tbackground: #fff;\n\tborder:1px solid #666;\n\tborder-radius:2px;\n\theight:22px;\n\twidth: 200px;\n\tpadding:0 20px 0 2px;\n\tmargin:4px 0 4px 4px;\n}\n.mapjs-control-search.search-load .search-input {\n\tbackground: url("+s+") no-repeat center right #fff;\n}\n.mapjs-control-search.search-load .search-cancel {\n\tvisibility:hidden;\n}\n.mapjs-control-search .search-cancel {\n\tdisplay:block;\n\twidth:22px;\n\theight:22px;\n\tposition:absolute;\n\tright:28px;\n\tmargin:6px 0;\n\tbackground: url("+u+") no-repeat 0 -46px;\n\ttext-decoration:none;\n\tfilter: alpha(opacity=80);\n\topacity: 0.8;\n}\n.mapjs-control-search .search-cancel:hover {\n\tfilter: alpha(opacity=100);\n\topacity: 1;\n}\n.mapjs-control-search .search-cancel span {\n\tdisplay:none;/* comment for cancel button imageless */\n\tfont-size:18px;\n\tline-height:20px;\n\tcolor:#ccc;\n\tfont-weight:bold;\n}\n.mapjs-control-search .search-cancel:hover span {\n\tcolor:#aaa;\n}\n.mapjs-control-search .search-button {\n\tdisplay:block;\n\tfloat:left;\n\twidth:30px;\n\theight:30px;\n\tbackground: url("+u+") no-repeat 4px 4px #fff;\n\tborder-radius:4px;\n}\n.mapjs-control-search .search-button:hover {\n\tbackground: url("+u+") no-repeat 4px -20px #fafafa;\n}\n.mapjs-control-search .search-tooltip {\n\tposition:absolute;\n\ttop:100%;\n\tleft:0;\n\tfloat:left;\n\tlist-style: none;\n\tpadding-left: 0;\n\tmin-width:120px;\n\tmax-height:122px;\n\tbox-shadow: 1px 1px 6px rgba(0,0,0,0.4);\n\tbackground-color: rgba(0, 0, 0, 0.25);\n\tz-index:1010;\n\toverflow-y:auto;\n\toverflow-x:hidden;\n\tcursor: pointer;\n}\n.mapjs-control-search .search-tip {\n\tmargin:2px;\n\tpadding:2px 4px;\n\tdisplay:block;\n\tcolor:black;\n\tbackground: #eee;\n\tborder-radius:.25em;\n\ttext-decoration:none;\n\twhite-space:nowrap;\n\tvertical-align:center;\n}\n.mapjs-control-search .search-button:hover {\n\tbackground-color: #f4f4f4;\n}\n.mapjs-control-search .search-tip-select,\n.mapjs-control-search .search-tip:hover {\n\tbackground-color: #fff;\n}\n.mapjs-control-search .search-alert {\n\tcursor:pointer;\n\tclear:both;\n\tfont-size:.75em;\n\tmargin-bottom:5px;\n\tpadding:0 .25em;\n\tcolor:#e00;\n\tfont-weight:bold;\n\tborder-radius:.25em;\n}\n",""]),t.exports=e},8654:(t,e,i)=>{(e=i(3645)(!1)).push([t.id,'/*\n * Explanation why the layout looks so complicated:\n * The UI container needs a position (absolute or relative) to prevent z-index issues (DomMarker on top of UI)\n * Therefore it has these additional styles:\n *    position: absolute;\n *    width: 100%;\n *    height: 100%;\n * To prevent that the UI container captures all events the container is displaced by\n *   left: 100%;\n * To neutralize the displacement for the UI elements within the UI container the following adjustments are needed:\n *  - InfoBubble (.H_ib):            left: -100%;\n *  - left anchor (.H_l_left):       margin-left: -100%;\n *  - center anchor (.H_l_center):   left: -50%;            (was left: 50%)\n *  - right anchor (.H_l_right):     right: 100%;           (was right: 0)\n *                                        margin-left: -100%;\n */\n\n.H_ui {\n  font-size: 10px;\n  font-family: "Lucida Grande", Arial, Helvetica, sans-serif;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  -o-user-select: none;\n  -ms-user-select: none;\n  /* position ui on top of imprint to make both clickable */\n  z-index: 2;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 100%;\n}\n.H_ui * {\n  /* normalize in case some other normalization CSS likes things differently */\n  box-sizing: content-box;\n  -moz-box-sizing: content-box;\n}\n.H_noevs {\n  pointer-events: none;\n}\n\n/*\n * Layout\n */\n.H_l_left {\n  position: absolute;\n  left: 16px;\n  margin-left: -100%;\n}\n.H_l_center {\n  position: absolute;\n  left: -50%;\n}\n.H_l_right {\n  position: absolute;\n  right: calc(100% + 16px);\n  margin-left: -100%;\n}\n.H_l_top {\n  top: 16px;\n}\n.H_l_middle {\n  top: 50%;\n}\n.H_l_bottom {\n  bottom: 16px;\n}\n\n/* Fix MAPSJS-579 for modern browsers */\n[class^=H_l_] {\n    pointer-events: none;\n}\n.H_ctl {\n    /* hack for IE9-10, auto doesn\'t work for them */\n    pointer-events: visiblePainted;\n    pointer-events: auto;\n}\n\n.H_l_horizontal .H_ctl {\n  float: left;\n}\n\n.H_l_anchor {\n  clear: both;\n  float: right;\n}\n\n.H_l_vertical .H_ctl {\n  clear: both;\n}\n\n.H_l_right .H_l_vertical .H_ctl {\n  float: right;\n}\n\n.H_l_right.H_l_middle.H_l_vertical .H_ctl{\n  float: right;\n}\n\n/**\n *  Element styles\n */\n\n.H_ctl {\n  margin: .8em;\n  position: relative;\n  -ms-touch-action: none;\n}\n\n.H_btn {\n  cursor: pointer;\n}\n\n.H_grp .H_btn,\n.H_rdo_buttons .H_btn {\n    box-shadow: none;\n}\n.H_grp .H_btn.H_active,\n.H_rdo_buttons .H_btn.H_active {\n  background: none;\n}\n\n.H_btn {\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n  border-radius: 0.5em;\n  width: 4em;\n  height: 4em;\n  background: #fff;\n}\n\n.H_disabled,\n.H_disabled:hover {\n  cursor: default;\n}\n\n.H_rdo_title {\n  font-size: 14px;\n  height: 40px;\n  line-height: 40px;\n  background-color: #575B63;\n  color: #fff;\n  padding-left: 16px;\n  padding-right: 16px;\n  border-radius: 5px 5px 0 0;\n  margin-bottom: 8px;\n  cursor: default;\n}\n\n.H_ui[dir=rtl] .H_rdo_title {\n  text-align: right;\n}\n\n.H_rdo ul {\n  list-style: none;\n  margin: 0 auto;\n  padding: 0;\n}\n\n/**\n *   Base Elements\n */\n.H_ctl.H_grp {\n  background: #fff;\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n  border-radius: 0.5em;\n}\n/* Button divider */\n.H_zoom .H_el {\n  position: relative;\n}\n.H_l_vertical .H_zoom .H_el:last-child::after,\n.H_l_horizontal .H_zoom .H_el:last-child::after {\n  content: none;\n}\n\n.H_l_vertical .H_zoom .H_el {\n  margin-bottom: 0.1em;\n}\n.H_l_vertical .H_zoom .H_el:last-child {\n  margin-bottom: 0;\n}\n.H_l_vertical .H_zoom .H_el::after {\n  content: "";\n  position: absolute;\n  width: 2.6em;\n  height: 0.1em;\n  bottom: -0.1em;\n  left: 0.7em;\n  background: rgba(15, 22, 33, 0.1);\n}\n\n.H_l_horizontal .H_zoom .H_el {\n  margin-right: 0.1em;\n}\n.H_l_horizontal .H_zoom .H_el:last-child {\n  margin-right: 0;\n}\n.H_l_horizontal .H_zoom .H_el::after {\n  content: "";\n  position: absolute;\n  width: 0.1em;\n  height: 2.6em;\n  top: 0.7em;\n  right: -0.1em;\n  background: rgba(15, 22, 33, 0.1);\n}\n/* End: Button divider */\n.H_l_horizontal .H_grp .H_btn,\n.H_l_vertical .H_ctl {\n  float: left;\n}\n\n\n/** Menu panel */\n.H_overlay {\n  font-size: 14px;\n  color: rgba(15, 22, 33, 0.6);\n  box-shadow: 0px 0 4px 0 rgba(15, 22, 33, 0.6);\n  border-radius: 5px;\n  position: absolute;\n  min-width: 200px;\n  background: #fff;\n  display: none;\n  z-index: 100;\n  padding-bottom: 4px;\n}\n\n.H_overlay .H_separator {\n  content: "";\n  position: relative;\n  display: block;\n  margin: 8px 16px 8px 16px;\n  height: 1px;\n  background: rgba(15, 22, 33, 0.1);\n}\n\n.H_overlay .H_btn,\n.H_overlay .H_rdo li {\n  width: 184px;\n  height: 24px;\n  line-height: 24px;\n  padding: 8px 16px;\n}\n.H_overlay .H_btn{\n  border-radius: 0px;\n}\n\n.H_overlay .H_btn:hover,\n.H_overlay .H_rdo li:hover {\n  color: rgba(15, 22, 33, 0.8);\n}\n\n.H_overlay .H_btn.H_disabled,\n.H_overlay .H_rdo.H_disabled li,\n.H_overlay .H_btn.H_disabled:hover,\n.H_overlay .H_rdo.H_disabled li:hover {\n  color: rgba(15, 22, 33, 0.2);\n}\n\n.H_overlay .H_btn.H_active,\n.H_overlay .H_rdo.H_active li,\n.H_overlay .H_btn.H_active:hover,\n.H_overlay .H_rdo.H_active li:hover {\n  color: #0F1621;\n}\n\n.H_overlay>*:last-child {\n  clear: both;\n}\n.H_overlay>.H_btn {\n  white-space: nowrap;\n}\n\n.H_overlay.H_open {\n  display: block;\n}\n\n.H_overlay::before, .H_overlay::after {\n  content: " ";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  position: absolute;\n}\n.H_overlay.H_left::before {\n  border-width: 10px 10px 10px 0;\n  border-color: transparent rgba(15, 22, 33, 0.2) transparent transparent;\n  left: -12px;\n}\n.H_overlay.H_left::after {\n  border-width: 10px 10px 10px 0;\n  border-color: transparent #fff transparent transparent;\n  left: -10px;\n}\n.H_overlay.H_top.H_left::after {\n  border-color: transparent #575B63 transparent transparent;\n}\n\n.H_overlay.H_right::before {\n  border-width: 10px 0 10px 10px;\n  border-color: transparent transparent transparent rgba(15, 22, 33, 0.2);\n  left: calc(100% + 1px);\n}\n.H_overlay.H_right::after {\n  border-width: 10px 0 10px 10px;\n  border-color: transparent transparent transparent #fff;\n  left: 100%;\n}\n.H_overlay.H_top.H_right::after {\n  border-color: transparent transparent transparent #575B63;\n}\n\n.H_overlay.H_top::before,\n.H_overlay.H_top::after {\n  top: 10px;\n}\n.H_overlay.H_bottom::before,\n.H_overlay.H_bottom::after {\n  bottom: 10px;\n}\n.H_overlay.H_middle::before,\n.H_overlay.H_middle::after {\n  top: 50%;\n  margin-top: -10px;\n}\n\n.H_overlay.H_top.H_center::before {\n  border-width: 0 10px 10px 10px;\n  border-color: transparent transparent rgba(15, 22, 33, 0.2) transparent;\n  top: -11px;\n  left: 50%;\n  margin-left: -10px;\n}\n.H_overlay.H_top.H_center::after {\n  border-width: 0 10px 10px 10px;\n  border-color: transparent transparent #575B63 transparent;\n  top: -10px;\n  left: 50%;\n  margin-left: -10px;\n}\n\n.H_overlay.H_bottom.H_center::before {\n  border-width: 10px 10px 0 10px;\n  border-color: rgba(15, 22, 33, 0.2) transparent transparent transparent;\n  bottom: -11px;\n  left: 50%;\n  margin-left: -10px;\n}\n.H_overlay.H_bottom.H_center::after {\n  border-width: 10px 10px 0 10px;\n  border-color: #fff transparent transparent transparent;\n  bottom: -10px;\n  left: 50%;\n  margin-left: -10px;\n}\n\n\n/** InfoBubble */\n.H_ib {\n  position: absolute;\n  left: .91em;\n  left: -100%;\n}\n.H_ib_tail {\n  position: absolute;\n  width: 20px;\n  height: 10px;\n  margin: -10px -10px;\n}\n\n.H_ib_tail::before{\n  bottom: -1px;\n  border-width: 10px;\n  position: absolute;\n  display: block;\n  content: "";\n  border-color: transparent;\n  border-style: solid;\n  right: 0px;\n}\n\n.H_ib_tail::after{\n  bottom: 0;\n  position: absolute;\n  display: block;\n  content: "";\n  border-color: white;\n  border-style: solid;\n  border-width: 10px;\n}\n\n.H_ib.H_ib_top .H_ib_tail::after {\n  border-width: 10px 10px 0px 10px;\n  border-color: white transparent;\n}\n\n.H_ib.H_ib_top .H_ib_tail::before {\n  border-top-color: rgba(15, 22, 33, 0.2);\n  border-bottom-width: 0px;\n}\n\n.H_ib_notail .H_ib_tail {\n  display: none;\n}\n.H_ib_body {\n  background: white;\n  position: absolute;\n  bottom: .5em;\n  padding: 0;\n  right: 0px;\n  border-radius: 5px;\n  margin-right: -3em;\n  box-shadow: 0px 0 4px 0 rgba(15, 22, 33, 0.6);\n  margin-bottom: 0.5em;\n}\n\n.H_ib_close {\n  font-size: .6em;\n  position: absolute;\n  right: 12px;\n  width: 12px;\n  height: 12px;\n  cursor: pointer;\n  top: 12px;\n  z-index: 1;\n  background: none;\n  box-shadow: none;\n}\n\n.H_ui[dir=rtl] .H_ib_close {\n  left: 12px;\n  right: auto;\n}\n\n.H_ib_close svg.H_icon {\n    top: 0;\n    transform: none;\n    width: auto;\n    height: auto;\n}\n\n.H_ib_noclose .H_ib_close {\n  display: none;\n}\n.H_ib_noclose .H_ib_body {\n  padding: 0 0 0 0;\n}\n\n.H_ib_content {\n  min-width: 6em;\n  font: 14px "Lucida Grande", Arial, Helvetica, sans-serif;\n  line-height: 24px;\n  margin: 16px 28px 20px 16px;\n  color: rgba(15,22,33,.8);\n  user-select: text;\n  -moz-user-select: text;\n  -khtml-user-select: text;\n  -webkit-user-select: text;\n  -o-user-select: text;\n  -ms-user-select: text;\n}\n\n.H_ui[dir=rtl] .H_ib_content {\n  margin: 16px 16px 20px 28px;\n}\n\n\n/*##################################################  SLIDER  ########################################################*/\n\n.H_l_horizontal .H_zoom_slider {\n  min-width: 262px;\n}\n.H_slider {\n  cursor: pointer;\n}\n.H_l_horizontal.H_slider {\n  float: left;\n  height: 4em;\n  width: auto;\n  padding: 0 1em;\n}\n\n.H_slider .H_slider_track {\n  width: 0.4em;\n  height: 100%;\n}\n\n.H_l_horizontal.H_slider .H_slider_track {\n  height: 0.4em;\n  width: 100%;\n}\n\n.H_l_horizontal.H_slider .H_slider_cont {\n  height: 100%;\n}\n\n.H_l_horizontal.H_slider .H_slider_knob_cont {\n  margin-top: -0.4em;\n}\n\n.H_slider {\n  background-color: #fff;\n  padding: 1em 0em;\n  width: 4em;\n}\n\n\n.H_slider .H_slider_cont {\n  position: relative;\n}\n\n.H_slider .H_slider_knob_cont,\n.H_slider .H_slider_knob_halo {\n  width: 1.8em;\n  height: 1.8em;\n  margin-left: 0em;\n  border-radius:9em;\n}\n\n\n.H_slider .H_slider_knob {\n  width: 1.2em;\n  height: 1.2em;\n  background-color: white;\n  border-radius:9em;\n  -webkit-transform: translate(-50%,-50%);\n  -ms-transform: translate(-50%,-50%);\n  transform: translate(-50%,-50%);\n  top: 50%;\n  left: 50%;\n  box-shadow: 0em 0 0.5em 0 rgba(15, 22, 33, 0.6);\n  position: absolute;\n}\n\n.H_slider:hover .H_slider_knob {\n  box-shadow: 0em 0 0.5em 0 rgba(15, 22, 33, 0.8);\n}\n.H_slider.H_disabled .H_slider_knob {\n  box-shadow: 0em 0 0.5em 0 rgba(15, 22, 33, 0.2);\n}\n.H_slider.H_slider_active .H_slider_knob {\n  box-shadow: 0em 0 0.5em 0 rgba(15, 22, 33, 1);\n}\n\n.H_slider:hover .H_slider_track {\n  background-color: rgba(15, 22, 33, 0.8);\n}\n\n.H_disabled .H_slider_track {\n  background-color: rgba(15, 22, 33, 0.2);\n}\n.H_slider:hover .H_slider_track_active {\n  background-color: rgba(0, 182, 178, 0.8);\n}\n.H_disabled .H_slider_track_active {\n  background-color: rgba(0, 182, 178, 0.2);\n}\n.H_slider.H_slider_active .H_slider_track {\n  background-color: rgba(15, 22, 33, 1.0);\n}\n.H_slider.H_slider_active .H_slider_track_active {\n  background-color: rgba(0, 182, 178, 1.0);\n}\n\n.H_slider .H_slider_track,\n.H_slider .H_slider_knob_cont{\n  position:relative;\n  top: 50%;\n  left: 50%;\n  -webkit-transform: translate(-50%,-50%);\n  -ms-transform: translate(-50%,-50%);\n  transform: translate(-50%,-50%);\n}\n\n.H_slider .H_slider_track {\n  background-color: rgba(15, 22, 33, 0.6);\n  overflow: hidden;\n}\n.H_slider .H_slider_track_active {\n  background-color: #00B6B2;\n  position: absolute;\n  transform: translate(-50%,0%);\n}\n\n.H_slider.H_disabled .H_slider_track {\n  background-color: rgba(15, 22, 33, 0.2);\n}\n.H_slider.H_disabled .H_slider_track_active {\n  background-color: #bae2e3;\n}\n\n.H_slider.H_l_horizontal .H_slider_track_active {\n  transform: translate(-200%, -50%);\n}\n\n.H_slider.H_disabled {\n  cursor: default;\n}\n\n/*###############################################  CONTEXT MENU  #####################################################*/\n.H_context_menu {\n  font-size: 14px;\n  min-width: 158px;\n  max-width: 40%;\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n  position: absolute;\n  left: -100%;\n  top: 0;\n  color: rgba(15, 22, 33, 0.6);\n  background-color: #fff;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  -o-border-radius: 5px;\n  border-radius: 5px;\n  padding: 16px 16px 4px 16px;\n  -moz-user-select: initial;\n  -khtml-user-select: initial;\n  -webkit-user-select: initial;\n  -o-user-select: initial;\n  -ms-user-select: initial;\n  z-index: 200;\n}\n\n.H_context_menu_closed {\n    display: none;\n}\n\n.H_context_menu_item {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  line-height: 24px;\n  margin-bottom: 16px;\n  outline: none;\n}\n\n.H_context_menu_item.clickable:hover {\n  color: rgba(15, 22, 33, 0.8);\n  cursor: pointer;\n}\n.H_context_menu_item.disabled:hover,\n.H_context_menu_item.disabled {\n    background: transparent !important;\n    color: rgba(15, 22, 33, 0.2);\n    cursor: default !important;\n\n    -moz-user-select: none;\n    -khtml-user-select: none;\n    -webkit-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n}\n.H_context_menu_item_separator {\n    height: 0;\n    border-top: 1px solid rgba(15, 22, 33, 0.1);\n    padding-bottom: 16px;\n    line-height: 0;\n    font-size: 0;\n}\n\n\n/*#################################################  SCALE BAR  ######################################################*/\n.H_scalebar {\n  margin-top: 36px;\n  box-shadow: none;\n  display: flex;\n  align-items: center;\n  text-shadow:\n    -1px -1px 0 rgba(255, 255, 255, 0.7),\n    1px -1px 0 rgba(255, 255, 255, 0.7),\n    -1px 1px 0 rgba(255, 255, 255, 0.7),\n    1px 1px 0 rgba(255, 255, 255, 0.7);\n}\n\n\n/*###################################  DISTANCE MEASUREMENT AND TRAFFIC INCIDENTS ####################################*/\n\n.H_tib_content {\n  width: 25em;\n  position: relative;\n  margin: -16px -28px -20px -16px;\n}\n\n[dir="rtl"] .H_tib_content {\n  margin: -16px -16px -20px -28px;\n}\n\n.H_tib .H_tib_desc { padding: 0px 16px 20px 16px }\n.H_tib .H_tib_time {color: rgba(15,22,33,.4);margin-top: 0.8em;}\n.H_tib_right { float:right; }\n\n.H_tib .H_btn > svg.H_icon {\n  fill: rgba(255,255,255, .6);\n}\n\n.H_tib .H_btn:hover > svg.H_icon {\n  fill: white;\n}\n\n.H_dm_label {\n  font: 12px "Lucida Grande", Arial, Helvetica, sans-serif;\n  color: black;\n  text-shadow: 1px 1px .5px #FFF, 1px -1px .5px #FFF, -1px 1px .5px #FFF, -1px -1px .5px #FFF;\n  white-space: nowrap;\n  margin-left: 12px;\n  margin-top: -7px;\n  /* This will not work on IE9, but it is accepted! */\n  pointer-events: none;\n}\n\n\n/*###################################################  ICON  #########################################################*/\nsvg.H_icon {\n  display: block;\n  position: relative;\n  top: 50%;\n  transform: translateY(-50%);\n  margin:auto;\n  width: 24px;\n  height: 24px;\n  fill: rgba(15, 22, 33, 0.6);\n}\nsvg.H_icon .H_icon_stroke {\n  stroke: rgba(15, 22, 33, 0.6);\n  fill: none;\n}\n.H_btn:hover > svg.H_icon {\n  fill: rgba(15, 22, 33, 0.8);\n}\n.H_btn:hover > svg.H_icon .H_icon_stroke {\n  stroke: rgba(15, 22, 33, 0.8);\n}\n.H_btn.H_active {\n  background-color: #CFD0D3;\n}\n.H_rdo .H_btn.H_active {\n  background: none;\n}\n\n.H_active > svg.H_icon,\n.H_active:hover > svg.H_icon {\n  fill: #0F1621 !important;\n}\n.H_active > svg.H_icon .H_icon_stroke,\n.H_active:hover > svg.H_icon .H_icon_stroke {\n  stroke: #0F1621;\n}\n\n.H_disabled svg.H_icon,\n.H_disabled:hover svg.H_icon {\n  fill: rgba(15, 22, 33, 0.2);\n  cursor: default;\n}\n.H_disabled svg.H_icon .H_icon_stroke,\n.H_disabled:hover svg.H_icon .H_icon_stroke {\n  stroke: rgba(15, 22, 33, 0.2);\n}\n\n/*###############################################  OVERVIEW MAP  #####################################################*/\n.H_overview {\n  transition: width 0.2s,height 0.2s,margin-top 0.2s, padding 0.2s;\n  width: 0em;\n  height: 0em;\n  overflow: hidden;\n  cursor: default;\n  position: absolute;\n  margin: auto;\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n\n.H_l_vertical .H_overview_active {\n    margin: auto 5px;\n}\n\n.H_l_horizontal .H_overview_active {\n  margin: 5px auto;\n}\n\n.H_l_center .H_overview {\n  left: -9999px;\n  right: -9999px;\n}\n\n.H_l_middle .H_overview {\n  top: -9999px;\n  bottom: -9999px;\n}\n\n.H_l_right .H_overview {\n  right: 100%;\n}\n\n.H_l_left .H_overview {\n  left: 100%;\n}\n\n.H_l_bottom .H_overview {\n  bottom: 0;\n}\n.H_l_center.H_l_bottom .H_overview {\n  bottom: 100%;\n}\n\n.H_l_top .H_overview {\n  top: 0;\n}\n.H_l_center.H_l_top .H_overview {\n  top: 100%;\n}\n\n.H_overview .H_overview_map {\n  background-color: rgba(256,256,256,0.6);\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n}\n\n\n.H_overview_map .H_ui {\n  display: none;\n}\n\n.H_zoom_lasso {\n  position: absolute;\n  display: none;\n  box-shadow: 0em 0 0.4em 0 rgba(15, 22, 33, 0.6);\n  z-index: 100000;\n  background-color: rgba(15, 22, 33, 0.2);\n}\n',""]),t.exports=e},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i,n,r,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(i=a,n=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(i,"}"):i})).join("")},e.i=function(t,i,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);n&&r[u[0]]||(i&&(u[2]?u[2]="".concat(i," and ").concat(u[2]):u[2]=i),e.push(u))}},e}},1667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},5251:(t,e,i)=>{"use strict";e.utils=i(1278),e.Cipher=i(5756),e.DES=i(778),e.CBC=i(9051),e.EDE=i(651)},9051:(t,e,i)=>{"use strict";var n=i(9746),r=i(5717),o={};function a(t){n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}r(e,t);for(var i=Object.keys(o),n=0;n<i.length;n++){var a=i[n];e.prototype[a]=o[a]}return e.create=function(t){return new e(t)},e},o._cbcInit=function(){var t=new a(this.options.iv);this._cbcState=t},o._update=function(t,e,i,n){var r=this._cbcState,o=this.constructor.super_.prototype,a=r.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=t[e+s];for(o._update.call(this,a,0,i,n),s=0;s<this.blockSize;s++)a[s]=i[n+s]}else{for(o._update.call(this,t,e,i,n),s=0;s<this.blockSize;s++)i[n+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=t[e+s]}}},5756:(t,e,i)=>{"use strict";var n=i(9746);function r(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=r,r.prototype._init=function(){},r.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},r.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),n=0;n<i;n++)this.buffer[this.bufferOff+n]=t[e+n];return this.bufferOff+=i,i},r.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(t){var e=0,i=0,n=(this.bufferOff+t.length)/this.blockSize|0,r=new Array(n*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(r,i)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,r,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return r},r.prototype._updateDecrypt=function(t){for(var e=0,i=0,n=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,r=new Array(n*this.blockSize);n>0;n--)e+=this._buffer(t,e),i+=this._flushBuffer(r,i);return e+=this._buffer(t,e),r},r.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},r.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},r.prototype._unpad=function(t){return t},r.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},778:(t,e,i)=>{"use strict";var n=i(9746),r=i(5717),o=i(1278),a=i(5756);function s(){this.tmp=new Array(2),this.keys=null}function u(t){a.call(this,t);var e=new s;this._desState=e,this.deriveKeys(e,t.key)}r(u,a),t.exports=u,u.create=function(t){return new u(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(t,e){t.keys=new Array(32),n.equal(e.length,this.blockSize,"Invalid key length");var i=o.readUInt32BE(e,0),r=o.readUInt32BE(e,4);o.pc1(i,r,t.tmp,0),i=t.tmp[0],r=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=l[a>>>1];i=o.r28shl(i,s),r=o.r28shl(r,s),o.pc2(i,r,t.keys,a)}},u.prototype._update=function(t,e,i,n){var r=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],"encrypt"===this.type?this._encrypt(r,a,s,r.tmp,0):this._decrypt(r,a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],o.writeUInt32BE(i,a,n),o.writeUInt32BE(i,s,n+4)},u.prototype._pad=function(t,e){for(var i=t.length-e,n=e;n<t.length;n++)t[n]=i;return!0},u.prototype._unpad=function(t){for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)n.equal(t[i],e);return t.slice(0,t.length-e)},u.prototype._encrypt=function(t,e,i,n,r){for(var a=e,s=i,u=0;u<t.keys.length;u+=2){var l=t.keys[u],h=t.keys[u+1];o.expand(s,t.tmp,0),l^=t.tmp[0],h^=t.tmp[1];var c=o.substitute(l,h),f=s;s=(a^o.permute(c))>>>0,a=f}o.rip(s,a,n,r)},u.prototype._decrypt=function(t,e,i,n,r){for(var a=i,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],h=t.keys[u+1];o.expand(a,t.tmp,0),l^=t.tmp[0],h^=t.tmp[1];var c=o.substitute(l,h),f=a;a=(s^o.permute(c))>>>0,s=f}o.rip(a,s,n,r)}},651:(t,e,i)=>{"use strict";var n=i(9746),r=i(5717),o=i(5756),a=i(778);function s(t,e){n.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),r=e.slice(8,16),o=e.slice(16,24);this.ciphers="encrypt"===t?[a.create({type:"encrypt",key:i}),a.create({type:"decrypt",key:r}),a.create({type:"encrypt",key:o})]:[a.create({type:"decrypt",key:o}),a.create({type:"encrypt",key:r}),a.create({type:"decrypt",key:i})]}function u(t){o.call(this,t);var e=new s(this.type,this.options.key);this._edeState=e}r(u,o),t.exports=u,u.create=function(t){return new u(t)},u.prototype._update=function(t,e,i,n){var r=this._edeState;r.ciphers[0]._update(t,e,i,n),r.ciphers[1]._update(i,n,i,n),r.ciphers[2]._update(i,n,i,n)},u.prototype._pad=a.prototype._pad,u.prototype._unpad=a.prototype._unpad},1278:(t,e)=>{"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},e.ip=function(t,e,i,n){for(var r=0,o=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)r<<=1,r|=e>>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=t>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)o<<=1,o|=e>>>s+a&1;for(s=1;s<=25;s+=8)o<<=1,o|=t>>>s+a&1}i[n+0]=r>>>0,i[n+1]=o>>>0},e.rip=function(t,e,i,n){for(var r=0,o=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)r<<=1,r|=e>>>s+a&1,r<<=1,r|=t>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)o<<=1,o|=e>>>s+a&1,o<<=1,o|=t>>>s+a&1;i[n+0]=r>>>0,i[n+1]=o>>>0},e.pc1=function(t,e,i,n){for(var r=0,o=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1}for(s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)o<<=1,o|=e>>s+a&1;for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1}for(s=0;s<=24;s+=8)o<<=1,o|=t>>s+a&1;i[n+0]=r>>>0,i[n+1]=o>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,r){for(var o=0,a=0,s=i.length>>>1,u=0;u<s;u++)o<<=1,o|=t>>>i[u]&1;for(u=s;u<i.length;u++)a<<=1,a|=e>>>i[u]&1;n[r+0]=o>>>0,n[r+1]=a>>>0},e.expand=function(t,e,i){var n=0,r=0;n=(1&t)<<5|t>>>27;for(var o=23;o>=15;o-=4)n<<=6,n|=t>>>o&63;for(o=11;o>=3;o-=4)r|=t>>>o&63,r<<=6;r|=(31&t)<<1|t>>>31,e[i+0]=n>>>0,e[i+1]=r>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var i=0,r=0;r<4;r++)i<<=4,i|=n[64*r+(t>>>18-6*r&63)];for(r=0;r<4;r++)i<<=4,i|=n[256+64*r+(e>>>18-6*r&63)];return i>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,i=0;i<r.length;i++)e<<=1,e|=t>>>r[i]&1;return e>>>0},e.padSplit=function(t,e,i){for(var n=t.toString(2);n.length<e;)n="0"+n;for(var r=[],o=0;o<e;o+=i)r.push(n.slice(o,o+i));return r.join(" ")}},2607:(t,e,i)=>{var n=i(3590),r=i(9799),o=i(7426),a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(t){var e=new Buffer(r[t].prime,"hex"),i=new Buffer(r[t].gen,"hex");return new o(e,i)},e.createDiffieHellman=e.DiffieHellman=function t(e,i,r,s){return Buffer.isBuffer(i)||void 0===a[i]?t(e,"binary",i,r):(i=i||"binary",s=s||"binary",r=r||new Buffer([2]),Buffer.isBuffer(r)||(r=new Buffer(r,s)),"number"==typeof e?new o(n(e,r),r,!0):(Buffer.isBuffer(e)||(e=new Buffer(e,i)),new o(e,r,!0)))}},7426:(t,e,i)=>{var n=i(3550),r=new(i(3047)),o=new n(24),a=new n(11),s=new n(10),u=new n(3),l=new n(7),h=i(3590),c=i(1798);function f(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._pub=new n(t),this}function p(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this._priv=new n(t),this}t.exports=g;var d={};function g(t,e,i){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function y(t,e){var i=new Buffer(t.toArray());return e?i.toString(e):i}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var i=e.toString("hex"),n=[i,t.toString(16)].join("_");if(n in d)return d[n];var c,f=0;if(t.isEven()||!h.simpleSieve||!h.fermatTest(t)||!r.test(t))return f+=1,f+="02"===i||"05"===i?8:4,d[n]=f,f;switch(r.test(t.shrn(1))||(f+=2),i){case"02":t.mod(o).cmp(a)&&(f+=8);break;case"05":(c=t.mod(s)).cmp(u)&&c.cmp(l)&&(f+=8);break;default:f+=4}return d[n]=f,f}(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new n(c(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(t){var e=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new Buffer(e.toArray()),r=this.getPrime();if(i.length<r.length){var o=new Buffer(r.length-i.length);o.fill(0),i=Buffer.concat([o,i])}return i},g.prototype.getPublicKey=function(t){return y(this._pub,t)},g.prototype.getPrivateKey=function(t){return y(this._priv,t)},g.prototype.getPrime=function(t){return y(this.__prime,t)},g.prototype.getGenerator=function(t){return y(this._gen,t)},g.prototype.setGenerator=function(t,e){return e=e||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,e)),this.__gen=t,this._gen=new n(t),this}},3590:(t,e,i)=>{var n=i(1798);t.exports=m,m.simpleSieve=y,m.fermatTest=v;var r=i(3550),o=new r(24),a=new(i(3047)),s=new r(1),u=new r(2),l=new r(5),h=(new r(16),new r(8),new r(10)),c=new r(3),f=(new r(7),new r(11)),p=new r(4),d=(new r(12),null);function g(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var n=Math.ceil(Math.sqrt(i)),r=0;r<e&&t[r]<=n&&i%t[r]!=0;r++);e!==r&&t[r]<=n||(t[e++]=i)}return d=t,t}function y(t){for(var e=g(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function v(t){var e=r.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function m(t,e){if(t<16)return new r(2===e||5===e?[140,123]:[140,39]);var i,d;for(e=new r(e);;){for(i=new r(n(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(s),i.testn(1)||i.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;i.mod(h).cmp(c);)i.iadd(p)}else for(;i.mod(o).cmp(f);)i.iadd(p);if(y(d=i.shrn(1))&&y(i)&&v(d)&&v(i)&&a.test(d)&&a.test(i))return i}}},6266:(t,e,i)=>{"use strict";var n=e;n.version=i(8597).i8,n.utils=i(953),n.rand=i(9931),n.curve=i(8254),n.curves=i(5427),n.ec=i(8863),n.eddsa=i(5980)},4918:(t,e,i)=>{"use strict";var n=i(3550),r=i(953),o=r.getNAF,a=r.getJSF,s=r.assert;function u(t,e){this.type=t,this.p=new n(e.p,16),this.red=e.prime?n.red(e.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=e.n&&new n(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var i=t._getDoubles(),n=o(e,1,this._bitLength),r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;var a,u,l=[];for(a=0;a<n.length;a+=i.step){u=0;for(var h=a+i.step-1;h>=a;h--)u=(u<<1)+n[h];l.push(u)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),p=r;p>0;p--){for(a=0;a<l.length;a++)(u=l[a])===p?f=f.mixedAdd(i.points[a]):u===-p&&(f=f.mixedAdd(i.points[a].neg()));c=c.add(f)}return c.toP()},u.prototype._wnafMul=function(t,e){var i=4,n=t._getNAFPoints(i);i=n.wnd;for(var r=n.points,a=o(e,i,this._bitLength),u=this.jpoint(null,null,null),l=a.length-1;l>=0;l--){for(var h=0;l>=0&&0===a[l];l--)h++;if(l>=0&&h++,u=u.dblp(h),l<0)break;var c=a[l];s(0!==c),u="affine"===t.type?c>0?u.mixedAdd(r[c-1>>1]):u.mixedAdd(r[-c-1>>1].neg()):c>0?u.add(r[c-1>>1]):u.add(r[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,i,n,r){var s,u,l,h=this._wnafT1,c=this._wnafT2,f=this._wnafT3,p=0;for(s=0;s<n;s++){var d=(l=e[s])._getNAFPoints(t);h[s]=d.wnd,c[s]=d.points}for(s=n-1;s>=1;s-=2){var g=s-1,y=s;if(1===h[g]&&1===h[y]){var v=[e[g],null,null,e[y]];0===e[g].y.cmp(e[y].y)?(v[1]=e[g].add(e[y]),v[2]=e[g].toJ().mixedAdd(e[y].neg())):0===e[g].y.cmp(e[y].y.redNeg())?(v[1]=e[g].toJ().mixedAdd(e[y]),v[2]=e[g].add(e[y].neg())):(v[1]=e[g].toJ().mixedAdd(e[y]),v[2]=e[g].toJ().mixedAdd(e[y].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],b=a(i[g],i[y]);for(p=Math.max(b[0].length,p),f[g]=new Array(p),f[y]=new Array(p),u=0;u<p;u++){var _=0|b[0][u],w=0|b[1][u];f[g][u]=m[3*(_+1)+(w+1)],f[y][u]=0,c[g]=v}}else f[g]=o(i[g],h[g],this._bitLength),f[y]=o(i[y],h[y],this._bitLength),p=Math.max(f[g].length,p),p=Math.max(f[y].length,p)}var x=this.jpoint(null,null,null),M=this._wnafT4;for(s=p;s>=0;s--){for(var E=0;s>=0;){var A=!0;for(u=0;u<n;u++)M[u]=0|f[u][s],0!==M[u]&&(A=!1);if(!A)break;E++,s--}if(s>=0&&E++,x=x.dblp(E),s<0)break;for(u=0;u<n;u++){var k=M[u];0!==k&&(k>0?l=c[u][k-1>>1]:k<0&&(l=c[u][-k-1>>1].neg()),x="affine"===l.type?x.mixedAdd(l):x.add(l))}}for(s=0;s<n;s++)c[s]=null;return r?x:x.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=r.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?s(t[t.length-1]%2==0):7===t[0]&&s(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return r.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,r=0;r<e;r+=t){for(var o=0;o<t;o++)n=n.dbl();i.push(n)}return{step:t,points:i}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,n=1===i?null:this.dbl(),r=1;r<i;r++)e[r]=e[r-1].add(n);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}},1138:(t,e,i)=>{"use strict";var n=i(953),r=i(3550),o=i(5717),a=i(4918),s=n.assert;function u(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,a.call(this,"edwards",t),this.a=new r(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function l(t,e,i,n,o){a.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(e,16),this.y=new r(i,16),this.z=n?new r(n,16):this.curve.one,this.t=o&&new r(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(u,a),t.exports=u,u.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},u.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},u.prototype.jpoint=function(t,e,i,n){return this.point(t,e,i,n)},u.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),n=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),a=n.redMul(o.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},u.prototype.pointFromY=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),n=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),a=n.redMul(o.redInvm());if(0===a.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},u.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),n=e.redMul(this.a).redAdd(i),r=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===n.cmp(r)},o(l,a.BasePoint),u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},u.prototype.point=function(t,e,i,n){return new l(this,t,e,i,n)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var n=this.curve._mulA(t),r=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=n.redAdd(e),a=o.redSub(i),s=n.redSub(e),u=r.redMul(a),l=o.redMul(s),h=r.redMul(s),c=a.redMul(o);return this.curve.point(u,l,c,h)},l.prototype._projDbl=function(){var t,e,i,n,r,o,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),u=this.y.redSqr();if(this.curve.twisted){var l=(n=this.curve._mulA(s)).redAdd(u);this.zOne?(t=a.redSub(s).redSub(u).redMul(l.redSub(this.curve.two)),e=l.redMul(n.redSub(u)),i=l.redSqr().redSub(l).redSub(l)):(r=this.z.redSqr(),o=l.redSub(r).redISub(r),t=a.redSub(s).redISub(u).redMul(o),e=l.redMul(n.redSub(u)),i=l.redMul(o))}else n=s.redAdd(u),r=this.curve._mulC(this.z).redSqr(),o=n.redSub(r).redSub(r),t=this.curve._mulC(a.redISub(n)).redMul(o),e=this.curve._mulC(n).redMul(s.redISub(u)),i=n.redMul(o);return this.curve.point(t,e,i)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),n=this.t.redMul(this.curve.dd).redMul(t.t),r=this.z.redMul(t.z.redAdd(t.z)),o=i.redSub(e),a=r.redSub(n),s=r.redAdd(n),u=i.redAdd(e),l=o.redMul(a),h=s.redMul(u),c=o.redMul(u),f=a.redMul(s);return this.curve.point(l,h,f,c)},l.prototype._projAdd=function(t){var e,i,n=this.z.redMul(t.z),r=n.redSqr(),o=this.x.redMul(t.x),a=this.y.redMul(t.y),s=this.curve.d.redMul(o).redMul(a),u=r.redSub(s),l=r.redAdd(s),h=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(o).redISub(a),c=n.redMul(u).redMul(h);return this.curve.twisted?(e=n.redMul(l).redMul(a.redSub(this.curve._mulA(o))),i=u.redMul(l)):(e=n.redMul(l).redMul(a.redSub(o)),i=this.curve._mulC(u).redMul(l)),this.curve.point(c,e,i)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},l.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),n=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(n),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},8254:(t,e,i)=>{"use strict";var n=e;n.base=i(4918),n.short=i(6673),n.mont=i(2881),n.edwards=i(1138)},2881:(t,e,i)=>{"use strict";var n=i(3550),r=i(5717),o=i(4918),a=i(953);function s(t){o.call(this,"mont",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(t,e,i){o.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(e,16),this.z=new n(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(s,o),t.exports=s,s.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),n=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===n.redSqrt().redSqr().cmp(n)},r(u,o.BasePoint),s.prototype.decodePoint=function(t,e){return this.point(a.toArray(t,e),1)},s.prototype.point=function(t,e){return new u(this,t,e)},s.prototype.pointFromJSON=function(t){return u.fromJSON(this,t)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(t,e){return new u(t,e[0],e[1]||t.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),n=t.redMul(e),r=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(n,r)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),n=this.x.redSub(this.z),r=t.x.redAdd(t.z),o=t.x.redSub(t.z).redMul(i),a=r.redMul(n),s=e.z.redMul(o.redAdd(a).redSqr()),u=e.x.redMul(o.redISub(a).redSqr());return this.curve.point(s,u)},u.prototype.mul=function(t){for(var e=t.clone(),i=this,n=this.curve.point(null,null),r=[];0!==e.cmpn(0);e.iushrn(1))r.push(e.andln(1));for(var o=r.length-1;o>=0;o--)0===r[o]?(i=i.diffAdd(n,this),n=n.dbl()):(n=i.diffAdd(n,this),i=i.dbl());return n},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},6673:(t,e,i)=>{"use strict";var n=i(953),r=i(3550),o=i(5717),a=i(4918),s=n.assert;function u(t){a.call(this,"short",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(t,e,i,n){a.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(e,16),this.y=new r(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(t,e,i,n){a.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(e,16),this.y=new r(i,16),this.z=new r(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(u,a),t.exports=u,u.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new r(t.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);e=(e=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(t.lambda)i=new r(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?i=o[0]:(i=o[1],s(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(t){return{a:new r(t.a,16),b:new r(t.b,16)}})):this._getEndoBasis(i)}}},u.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:r.mont(t),i=new r(2).toRed(e).redInvm(),n=i.redNeg(),o=new r(3).toRed(e).redNeg().redSqrt().redMul(i);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},u.prototype._getEndoBasis=function(t){for(var e,i,n,o,a,s,u,l,h,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,p=this.n.clone(),d=new r(1),g=new r(0),y=new r(0),v=new r(1),m=0;0!==f.cmpn(0);){var b=p.div(f);l=p.sub(b.mul(f)),h=y.sub(b.mul(d));var _=v.sub(b.mul(g));if(!n&&l.cmp(c)<0)e=u.neg(),i=d,n=l.neg(),o=h;else if(n&&2==++m)break;u=l,p=f,f=l,y=d,d=h,v=g,g=_}a=l.neg(),s=h;var w=n.sqr().add(o.sqr());return a.sqr().add(s.sqr()).cmp(w)>=0&&(a=e,s=i),n.negative&&(n=n.neg(),o=o.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:n,b:o},{a,b:s}]},u.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],n=e[1],r=n.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),a=r.mul(i.a),s=o.mul(n.a),u=r.mul(i.b),l=o.mul(n.b);return{k1:t.sub(a).sub(s),k2:u.add(l).neg()}},u.prototype.pointFromX=function(t,e){(t=new r(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(0!==n.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(e&&!o||!e&&o)&&(n=n.redNeg()),this.point(t,n)},u.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,n=this.a.redMul(e),r=e.redSqr().redMul(e).redIAdd(n).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)},u.prototype._endoWnafMulAdd=function(t,e,i){for(var n=this._endoWnafT1,r=this._endoWnafT2,o=0;o<t.length;o++){var a=this._endoSplit(e[o]),s=t[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,r[2*o]=a.k1,r[2*o+1]=a.k2}for(var l=this._wnafMulAdd(1,n,r,2*o,i),h=0;h<2*o;h++)n[h]=null,r[h]=null;return l},o(l,a.BasePoint),u.prototype.point=function(t,e,i){return new l(this,t,e,i)},u.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,n=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(n)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(n)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var n=t.point(e[0],e[1],i);if(!e[2])return n;function r(e){return t.point(e[0],e[1],i)}var o=e[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(r))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(r))}},n},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),n=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),n=t.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(n),o=r.redSqr().redISub(this.x.redAdd(this.x)),a=r.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return t=new r(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){var n=[this,e],r=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,r):this.curve._wnafMulAdd(1,n,r,2)},l.prototype.jmulAdd=function(t,e,i){var n=[this,e],r=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,r,!0):this.curve._wnafMulAdd(1,n,r,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,n=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(h,a.BasePoint),u.prototype.jpoint=function(t,e,i){return new h(this,t,e,i)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),n=this.y.redMul(e).redMul(t);return this.curve.point(i,n)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(e),r=t.x.redMul(i),o=this.y.redMul(e.redMul(t.z)),a=t.y.redMul(i.redMul(this.z)),s=n.redSub(r),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),h=l.redMul(s),c=n.redMul(l),f=u.redSqr().redIAdd(h).redISub(c).redISub(c),p=u.redMul(c.redISub(f)).redISub(o.redMul(h)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(f,p,d)},h.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,n=t.x.redMul(e),r=this.y,o=t.y.redMul(e).redMul(this.z),a=i.redSub(n),s=r.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),h=i.redMul(u),c=s.redSqr().redIAdd(l).redISub(h).redISub(h),f=s.redMul(h.redISub(c)).redISub(r.redMul(l)),p=this.z.redMul(a);return this.curve.jpoint(c,f,p)},h.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var n=this.curve.a,r=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),l=a.redAdd(a);for(e=0;e<t;e++){var h=o.redSqr(),c=l.redSqr(),f=c.redSqr(),p=h.redAdd(h).redIAdd(h).redIAdd(n.redMul(u)),d=o.redMul(c),g=p.redSqr().redISub(d.redAdd(d)),y=d.redISub(g),v=p.redMul(y);v=v.redIAdd(v).redISub(f);var m=l.redMul(s);e+1<t&&(u=u.redMul(f)),o=g,s=m,l=v}return this.curve.jpoint(o,l.redMul(r),s)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(a.redISub(u)).redISub(l),i=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),p=this.x.redAdd(c).redSqr().redISub(h).redISub(f);p=p.redIAdd(p);var d=h.redAdd(h).redIAdd(h),g=d.redSqr(),y=f.redIAdd(f);y=(y=y.redIAdd(y)).redIAdd(y),t=g.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(y),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},h.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),o=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);t=u;var l=o.redIAdd(o);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(a.redISub(u)).redISub(l),i=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),p=this.x.redSub(h).redMul(this.x.redAdd(h));p=p.redAdd(p).redIAdd(p);var d=f.redIAdd(f),g=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(g),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(h);var y=c.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),e=p.redMul(d.redISub(t)).redISub(y)}return this.curve.jpoint(t,e,i)},h.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,n=this.z,r=n.redSqr().redSqr(),o=e.redSqr(),a=i.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(r)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(a),h=s.redSqr().redISub(l.redAdd(l)),c=l.redISub(h),f=a.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=s.redMul(c).redISub(f),d=i.redAdd(i).redMul(n);return this.curve.jpoint(h,p,d)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),n=e.redSqr(),r=t.redAdd(t).redIAdd(t),o=r.redSqr(),a=this.x.redAdd(e).redSqr().redISub(t).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=r.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),h=e.redMul(l);h=(h=h.redIAdd(h)).redIAdd(h);var c=this.x.redMul(s).redISub(h);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(l.redMul(u.redISub(l)).redISub(a.redMul(s)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var p=this.z.redAdd(a).redSqr().redISub(i).redISub(s);return this.curve.jpoint(c,f,p)},h.prototype.mul=function(t,e){return t=new r(t,e),this.curve._wnafMul(this,t)},h.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var n=e.redMul(this.z),r=i.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(n)).cmpn(0)},h.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var n=t.clone(),r=this.curve.redN.redMul(e);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},5427:(t,e,i)=>{"use strict";var n,r=e,o=i(3715),a=i(8254),s=i(953).assert;function u(t){"short"===t.type?this.curve=new a.short(t):"edwards"===t.type?this.curve=new a.edwards(t):this.curve=new a.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var i=new u(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:i}),i}})}r.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=i(1037)}catch(t){n=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},8863:(t,e,i)=>{"use strict";var n=i(3550),r=i(2156),o=i(953),a=i(5427),s=i(9931),u=o.assert,l=i(1251),h=i(611);function c(t){if(!(this instanceof c))return new c(t);"string"==typeof t&&(u(Object.prototype.hasOwnProperty.call(a,t),"Unknown curve "+t),t=a[t]),t instanceof a.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=c,c.prototype.keyPair=function(t){return new l(this,t)},c.prototype.keyFromPrivate=function(t,e){return l.fromPrivate(this,t,e)},c.prototype.keyFromPublic=function(t,e){return l.fromPublic(this,t,e)},c.prototype.genKeyPair=function(t){t||(t={});for(var e=new r({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||s(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),o=this.n.sub(new n(2));;){var a=new n(e.generate(i));if(!(a.cmp(o)>0))return a.iaddn(1),this.keyFromPrivate(a)}},c.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},c.prototype.sign=function(t,e,i,o){"object"==typeof i&&(o=i,i=null),o||(o={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new n(t,16));for(var a=this.n.byteLength(),s=e.getPrivate().toArray("be",a),u=t.toArray("be",a),l=new r({hash:this.hash,entropy:s,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),c=this.n.sub(new n(1)),f=0;;f++){var p=o.k?o.k(f):new n(l.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(c)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var g=d.getX(),y=g.umod(this.n);if(0!==y.cmpn(0)){var v=p.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var m=(d.getY().isOdd()?1:0)|(0!==g.cmp(y)?2:0);return o.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),m^=1),new h({r:y,s:v,recoveryParam:m})}}}}}},c.prototype.verify=function(t,e,i,r){t=this._truncateToN(new n(t,16)),i=this.keyFromPublic(i,r);var o=(e=new h(e,"hex")).r,a=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,u=a.invm(this.n),l=u.mul(t).umod(this.n),c=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,i.getPublic(),c)).isInfinity()&&s.eqXToP(o):!(s=this.g.mulAdd(l,i.getPublic(),c)).isInfinity()&&0===s.getX().umod(this.n).cmp(o)},c.prototype.recoverPubKey=function(t,e,i,r){u((3&i)===i,"The recovery param is more than two bits"),e=new h(e,r);var o=this.n,a=new n(t),s=e.r,l=e.s,c=1&i,f=i>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");s=f?this.curve.pointFromX(s.add(this.curve.n),c):this.curve.pointFromX(s,c);var p=e.r.invm(o),d=o.sub(a).mul(p).umod(o),g=l.mul(p).umod(o);return this.g.mulAdd(d,s,g)},c.prototype.getKeyRecoveryParam=function(t,e,i,n){if(null!==(e=new h(e,n)).recoveryParam)return e.recoveryParam;for(var r=0;r<4;r++){var o;try{o=this.recoverPubKey(t,e,r)}catch(t){continue}if(o.eq(i))return r}throw new Error("Unable to find valid recovery factor")}},1251:(t,e,i)=>{"use strict";var n=i(3550),r=i(953).assert;function o(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=o,o.fromPublic=function(t,e,i){return e instanceof o?e:new o(t,{pub:e,pubEnc:i})},o.fromPrivate=function(t,e,i){return e instanceof o?e:new o(t,{priv:e,privEnc:i})},o.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},o.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(t,e){this.priv=new n(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?r(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||r(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},o.prototype.derive=function(t){return t.validate()||r(t.validate(),"public point not validated"),t.mul(this.priv).getX()},o.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},o.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},611:(t,e,i)=>{"use strict";var n=i(3550),r=i(953),o=r.assert;function a(t,e){if(t instanceof a)return t;this._importDER(t,e)||(o(t.r&&t.s,"Signature without r or s"),this.r=new n(t.r,16),this.s=new n(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var i=t[e.place++];if(!(128&i))return i;var n=15&i;if(0===n||n>4)return!1;for(var r=0,o=0,a=e.place;o<n;o++,a++)r<<=8,r|=t[a],r>>>=0;return!(r<=127)&&(e.place=a,r)}function l(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function h(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}t.exports=a,a.prototype._importDER=function(t,e){t=r.toArray(t,e);var i=new s;if(48!==t[i.place++])return!1;var o=u(t,i);if(!1===o)return!1;if(o+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var a=u(t,i);if(!1===a)return!1;var l=t.slice(i.place,a+i.place);if(i.place+=a,2!==t[i.place++])return!1;var h=u(t,i);if(!1===h)return!1;if(t.length!==h+i.place)return!1;var c=t.slice(i.place,h+i.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new n(l),this.s=new n(c),this.recoveryParam=null,!0},a.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=l(e),i=l(i);!(i[0]||128&i[1]);)i=i.slice(1);var n=[2];h(n,e.length),(n=n.concat(e)).push(2),h(n,i.length);var o=n.concat(i),a=[48];return h(a,o.length),a=a.concat(o),r.encode(a,t)}},5980:(t,e,i)=>{"use strict";var n=i(3715),r=i(5427),o=i(953),a=o.assert,s=o.parseBytes,u=i(9087),l=i(3622);function h(t){if(a("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof h))return new h(t);t=r[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=n.sha512}t.exports=h,h.prototype.sign=function(t,e){t=s(t);var i=this.keyFromSecret(e),n=this.hashInt(i.messagePrefix(),t),r=this.g.mul(n),o=this.encodePoint(r),a=this.hashInt(o,i.pubBytes(),t).mul(i.priv()),u=n.add(a).umod(this.curve.n);return this.makeSignature({R:r,S:u,Rencoded:o})},h.prototype.verify=function(t,e,i){t=s(t),e=this.makeSignature(e);var n=this.keyFromPublic(i),r=this.hashInt(e.Rencoded(),n.pubBytes(),t),o=this.g.mul(e.S());return e.R().add(n.pub().mul(r)).eq(o)},h.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return o.intFromLE(t.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},h.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},h.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},h.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},h.prototype.decodePoint=function(t){var e=(t=o.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),n=0!=(128&t[e]),r=o.intFromLE(i);return this.curve.pointFromY(r,n)},h.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(t){return o.intFromLE(t)},h.prototype.isPoint=function(t){return t instanceof this.pointClass}},9087:(t,e,i)=>{"use strict";var n=i(953),r=n.assert,o=n.parseBytes,a=n.cachedProperty;function s(t,e){this.eddsa=t,this._secret=o(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=o(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},a(s,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),a(s,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),a(s,"privBytes",(function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,n=e.slice(0,t.encodingLength);return n[0]&=248,n[i]&=127,n[i]|=64,n})),a(s,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),a(s,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),a(s,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),s.prototype.sign=function(t){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return r(this._secret,"KeyPair is public only"),n.encode(this.secret(),t)},s.prototype.getPublic=function(t){return n.encode(this.pubBytes(),t)},t.exports=s},3622:(t,e,i)=>{"use strict";var n=i(3550),r=i(953),o=r.assert,a=r.cachedProperty,s=r.parseBytes;function u(t,e){this.eddsa=t,"object"!=typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),o(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof n&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}a(u,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),a(u,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),a(u,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),a(u,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},1037:t=>{t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},953:(t,e,i)=>{"use strict";var n=e,r=i(3550),o=i(9746),a=i(4504);n.assert=o,n.toArray=a.toArray,n.zero2=a.zero2,n.toHex=a.toHex,n.encode=a.encode,n.getNAF=function(t,e,i){var n=new Array(Math.max(t.bitLength(),i)+1);n.fill(0);for(var r=1<<e+1,o=t.clone(),a=0;a<n.length;a++){var s,u=o.andln(r-1);o.isOdd()?(s=u>(r>>1)-1?(r>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},n.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var n,r=0,o=0;t.cmpn(-r)>0||e.cmpn(-o)>0;){var a,s,u=t.andln(3)+r&3,l=e.andln(3)+o&3;3===u&&(u=-1),3===l&&(l=-1),a=0==(1&u)?0:3!=(n=t.andln(7)+r&7)&&5!==n||2!==l?u:-u,i[0].push(a),s=0==(1&l)?0:3!=(n=e.andln(7)+o&7)&&5!==n||2!==u?l:-l,i[1].push(s),2*r===a+1&&(r=1-r),2*o===s+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return i},n.cachedProperty=function(t,e,i){var n="_"+e;t.prototype[e]=function(){return void 0!==this[n]?this[n]:this[n]=i.call(this)}},n.parseBytes=function(t){return"string"==typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new r(t,"hex","le")}},7187:t=>{"use strict";var e,i="object"==typeof Reflect?Reflect:null,n=i&&"function"==typeof i.apply?i.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};e=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var r=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise((function(i,n){function r(i){t.removeListener(e,o),n(i)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",r),i([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,r)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function l(t,e,i,n){var r,o,a,l;if(s(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),a=o[e]),void 0===a)a=o[e]=i,++t._eventsCount;else if("function"==typeof a?a=o[e]=n?[i,a]:[a,i]:n?a.unshift(i):a.push(i),(r=u(t))>0&&a.length>r&&!a.warned){a.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=a.length,l=h,console&&console.warn&&console.warn(l)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(t,e,i){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},r=h.bind(n);return r.listener=i,n.wrapFn=r,r}function f(t,e,i){var n=t._events;if(void 0===n)return[];var r=n[e];return void 0===r?[]:"function"==typeof r?i?[r.listener||r]:[r]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(r):d(r,r.length)}function p(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function d(t,e){for(var i=new Array(e),n=0;n<e;++n)i[n]=t[n];return i}function g(t,e,i,n){if("function"==typeof t.on)n.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function r(o){n.once&&t.removeEventListener(e,r),i(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||r(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[t];if(void 0===u)return!1;if("function"==typeof u)n(u,this,e);else{var l=u.length,h=d(u,l);for(i=0;i<l;++i)n(h[i],this,e)}return!0},o.prototype.addListener=function(t,e){return l(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return l(this,t,e,!0)},o.prototype.once=function(t,e){return s(e),this.on(t,c(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return s(e),this.prependListener(t,c(this,t,e)),this},o.prototype.removeListener=function(t,e){var i,n,r,o,a;if(s(e),void 0===(n=this._events))return this;if(void 0===(i=n[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(r=-1,o=i.length-1;o>=0;o--)if(i[o]===e||i[o].listener===e){a=i[o].listener,r=o;break}if(r<0)return this;0===r?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,r),1===i.length&&(n[t]=i[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,i,n;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var r,o=Object.keys(i);for(n=0;n<o.length;++n)"removeListener"!==(r=o[n])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return f(this,t,!0)},o.prototype.rawListeners=function(t){return f(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},3048:(t,e,i)=>{var n=i(9509).Buffer,r=i(2318);t.exports=function(t,e,i,o){if(n.isBuffer(t)||(t=n.from(t,"binary")),e&&(n.isBuffer(e)||(e=n.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=i/8,s=n.alloc(a),u=n.alloc(o||0),l=n.alloc(0);a>0||o>0;){var h=new r;h.update(l),h.update(t),e&&h.update(e),l=h.digest();var c=0;if(a>0){var f=s.length-a;c=Math.min(a,l.length),l.copy(s,f,0,c),a-=c}if(c<l.length&&o>0){var p=u.length-o,d=Math.min(o,l.length-c);l.copy(u,p,c,c+d),o-=d}}return l.fill(0),{key:s,iv:u}}},3391:(t,e,i)=>{t.exports=i.p+"1eb2198bcb02edfa1389bb2edd400fd8.png"},5436:(t,e,i)=>{t.exports=i.p+"06398bec2a4a24629c73517760927f57.png"},7298:(t,e,i)=>{t.exports=i.p+"f9b7a75b186911a1b04d08f8db305b7a.gif"},954:(t,e,i)=>{t.exports=i.p+"69fbc9c24b3665b801445c9bccc7017d.png"},3265:(t,e,i)=>{t.exports=i.p+"549b33bab7247b619c0292995f5a906b.png"},4444:t=>{function e(t){return t&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return t}function n(t,n){const r=(n=n||{}).delimiter||".",o=n.maxDepth,a=n.transformKey||i,s={};return function t(i,u,l){l=l||1,Object.keys(i).forEach((function(h){const c=i[h],f=n.safe&&Array.isArray(c),p=Object.prototype.toString.call(c),d=e(c),g="[object Object]"===p||"[object Array]"===p,y=u?u+r+a(h):a(h);if(!f&&!d&&g&&Object.keys(c).length&&(!n.maxDepth||l<o))return t(c,y,l+1);s[y]=c}))}(t),s}t.exports=n,n.flatten=n,n.unflatten=function t(r,o){const a=(o=o||{}).delimiter||".",s=o.overwrite||!1,u=o.transformKey||i,l={};if(e(r)||"[object Object]"!==Object.prototype.toString.call(r))return r;function h(t){const e=Number(t);return isNaN(e)||-1!==t.indexOf(".")||o.object?t:e}return r=Object.keys(r).reduce((function(t,e){const i=Object.prototype.toString.call(r[e]);return"[object Object]"!==i&&"[object Array]"!==i||function(t){const e=Object.prototype.toString.call(t),i="[object Object]"===e;return!t||("[object Array]"===e?!t.length:i?!Object.keys(t).length:void 0)}(r[e])?(t[e]=r[e],t):function(t,e,i){return Object.keys(i).reduce((function(e,n){return e[t+a+n]=i[n],e}),e)}(e,t,n(r[e],o))}),{}),Object.keys(r).forEach((function(e){const i=e.split(a).map(u);let n=h(i.shift()),c=h(i[0]),f=l;for(;void 0!==c;){if("__proto__"===n)return;const t=Object.prototype.toString.call(f[n]),e="[object Object]"===t||"[object Array]"===t;if(!s&&!e&&void 0!==f[n])return;(s&&!e||!s&&null==f[n])&&(f[n]="number"!=typeof c||o.object?{}:[]),f=f[n],i.length>0&&(n=h(i.shift()),c=h(i[0]))}f[n]=t(r[e],o)})),l}},3349:(t,e,i)=>{"use strict";var n=i(9509).Buffer,r=i(8473).Transform;function o(t){r.call(this),this._block=n.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(5717)(o,r),o.prototype._transform=function(t,e,i){var n=null;try{this.update(t,e)}catch(t){n=t}i(n)},o.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},o.prototype.update=function(t,e){if(function(t,e){if(!n.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");n.isBuffer(t)||(t=n.from(t,e));for(var i=this._block,r=0;this._blockOffset+t.length-r>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)i[o++]=t[r++];this._update(),this._blockOffset=0}for(;r<t.length;)i[this._blockOffset++]=t[r++];for(var a=0,s=8*t.length;s>0;++a)this._length[a]+=s,(s=this._length[a]/4294967296|0)>0&&(this._length[a]-=4294967296*s);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},o.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=o},3715:(t,e,i)=>{var n=e;n.utils=i(6436),n.common=i(5772),n.sha=i(9041),n.ripemd=i(2949),n.hmac=i(2344),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},5772:(t,e,i)=>{"use strict";var n=i(6436),r=i(9746);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=n.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=n.join32(t,0,t.length-i,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),r(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,n=new Array(i+this.padLength);n[0]=128;for(var r=1;r<i;r++)n[r]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[r++]=0;n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=t>>>24&255,n[r++]=t>>>16&255,n[r++]=t>>>8&255,n[r++]=255&t}else for(n[r++]=255&t,n[r++]=t>>>8&255,n[r++]=t>>>16&255,n[r++]=t>>>24&255,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,o=8;o<this.padLength;o++)n[r++]=0;return n}},2344:(t,e,i)=>{"use strict";var n=i(6436),r=i(9746);function o(t,e,i){if(!(this instanceof o))return new o(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(e,i))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),r(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},2949:(t,e,i)=>{"use strict";var n=i(6436),r=i(5772),o=n.rotl32,a=n.sum32,s=n.sum32_3,u=n.sum32_4,l=r.BlockHash;function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,n){return t<=15?e^i^n:t<=31?e&i|~e&n:t<=47?(e|~i)^n:t<=63?e&n|i&~n:e^(i|~n)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}n.inherits(h,l),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var i=this.h[0],n=this.h[1],r=this.h[2],l=this.h[3],h=this.h[4],m=i,b=n,_=r,w=l,x=h,M=0;M<80;M++){var E=a(o(u(i,c(M,n,r,l),t[d[M]+e],f(M)),y[M]),h);i=h,h=l,l=o(r,10),r=n,n=E,E=a(o(u(m,c(79-M,b,_,w),t[g[M]+e],p(M)),v[M]),x),m=x,x=w,w=o(_,10),_=b,b=E}E=s(this.h[1],r,w),this.h[1]=s(this.h[2],l,x),this.h[2]=s(this.h[3],h,m),this.h[3]=s(this.h[4],i,b),this.h[4]=s(this.h[0],n,_),this.h[0]=E},h.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9041:(t,e,i)=>{"use strict";e.sha1=i(4761),e.sha224=i(799),e.sha256=i(9344),e.sha384=i(772),e.sha512=i(5900)},4761:(t,e,i)=>{"use strict";var n=i(6436),r=i(5772),o=i(7038),a=n.rotl32,s=n.sum32,u=n.sum32_5,l=o.ft_1,h=r.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=a(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var r=this.h[0],o=this.h[1],h=this.h[2],f=this.h[3],p=this.h[4];for(n=0;n<i.length;n++){var d=~~(n/20),g=u(a(r,5),l(d,o,h,f),p,i[n],c[d]);p=f,f=h,h=a(o,30),o=r,r=g}this.h[0]=s(this.h[0],r),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],h),this.h[3]=s(this.h[3],f),this.h[4]=s(this.h[4],p)},f.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},799:(t,e,i)=>{"use strict";var n=i(6436),r=i(9344);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,r),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},9344:(t,e,i)=>{"use strict";var n=i(6436),r=i(5772),o=i(7038),a=i(9746),s=n.sum32,u=n.sum32_4,l=n.sum32_5,h=o.ch32,c=o.maj32,f=o.s0_256,p=o.s1_256,d=o.g0_256,g=o.g1_256,y=r.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}n.inherits(m,y),t.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(t,e){for(var i=this.W,n=0;n<16;n++)i[n]=t[e+n];for(;n<i.length;n++)i[n]=u(g(i[n-2]),i[n-7],d(i[n-15]),i[n-16]);var r=this.h[0],o=this.h[1],y=this.h[2],v=this.h[3],m=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(a(this.k.length===i.length),n=0;n<i.length;n++){var x=l(w,p(m),h(m,b,_),this.k[n],i[n]),M=s(f(r),c(r,o,y));w=_,_=b,b=m,m=s(v,x),v=y,y=o,o=r,r=s(x,M)}this.h[0]=s(this.h[0],r),this.h[1]=s(this.h[1],o),this.h[2]=s(this.h[2],y),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],m),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],_),this.h[7]=s(this.h[7],w)},m.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},772:(t,e,i)=>{"use strict";var n=i(6436),r=i(5900);function o(){if(!(this instanceof o))return new o;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,r),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},5900:(t,e,i)=>{"use strict";var n=i(6436),r=i(5772),o=i(9746),a=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,l=n.shr64_lo,h=n.sum64,c=n.sum64_hi,f=n.sum64_lo,p=n.sum64_4_hi,d=n.sum64_4_lo,g=n.sum64_5_hi,y=n.sum64_5_lo,v=r.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function _(t,e,i,n,r){var o=t&i^~t&r;return o<0&&(o+=4294967296),o}function w(t,e,i,n,r,o){var a=e&n^~e&o;return a<0&&(a+=4294967296),a}function x(t,e,i,n,r){var o=t&i^t&r^i&r;return o<0&&(o+=4294967296),o}function M(t,e,i,n,r,o){var a=e&n^e&o^n&o;return a<0&&(a+=4294967296),a}function E(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function A(t,e){var i=s(t,e,28)^s(e,t,2)^s(e,t,7);return i<0&&(i+=4294967296),i}function k(t,e){var i=s(t,e,14)^s(t,e,18)^s(e,t,9);return i<0&&(i+=4294967296),i}function T(t,e){var i=a(t,e,1)^a(t,e,8)^u(t,e,7);return i<0&&(i+=4294967296),i}function S(t,e){var i=s(t,e,1)^s(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function I(t,e){var i=s(t,e,19)^s(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}n.inherits(b,v),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var i=this.W,n=0;n<32;n++)i[n]=t[e+n];for(;n<i.length;n+=2){var r=(y=i[n-4],v=i[n-3],m=void 0,(m=a(y,v,19)^a(v,y,29)^u(y,v,6))<0&&(m+=4294967296),m),o=I(i[n-4],i[n-3]),s=i[n-14],l=i[n-13],h=T(i[n-30],i[n-29]),c=S(i[n-30],i[n-29]),f=i[n-32],g=i[n-31];i[n]=p(r,o,s,l,h,c,f,g),i[n+1]=d(r,o,s,l,h,c,f,g)}var y,v,m},b.prototype._update=function(t,e){this._prepareBlock(t,e);var i,n,r,s=this.W,u=this.h[0],l=this.h[1],p=this.h[2],d=this.h[3],v=this.h[4],m=this.h[5],b=this.h[6],T=this.h[7],S=this.h[8],I=this.h[9],L=this.h[10],O=this.h[11],C=this.h[12],P=this.h[13],R=this.h[14],j=this.h[15];o(this.k.length===s.length);for(var N=0;N<s.length;N+=2){var D=R,z=j,B=(r=void 0,(r=a(i=S,n=I,14)^a(i,n,18)^a(n,i,9))<0&&(r+=4294967296),r),H=k(S,I),F=_(S,0,L,0,C),U=w(0,I,0,O,0,P),V=this.k[N],q=this.k[N+1],G=s[N],W=s[N+1],Y=g(D,z,B,H,F,U,V,q,G,W),K=y(D,z,B,H,F,U,V,q,G,W);D=E(u,l),z=A(u,l),B=x(u,0,p,0,v),H=M(0,l,0,d,0,m);var Z=c(D,z,B,H),X=f(D,z,B,H);R=C,j=P,C=L,P=O,L=S,O=I,S=c(b,T,Y,K),I=f(T,T,Y,K),b=v,T=m,v=p,m=d,p=u,d=l,u=c(Y,K,Z,X),l=f(Y,K,Z,X)}h(this.h,0,u,l),h(this.h,2,p,d),h(this.h,4,v,m),h(this.h,6,b,T),h(this.h,8,S,I),h(this.h,10,L,O),h(this.h,12,C,P),h(this.h,14,R,j)},b.prototype._digest=function(t){return"hex"===t?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7038:(t,e,i)=>{"use strict";var n=i(6436).rotr32;function r(t,e,i){return t&e^~t&i}function o(t,e,i){return t&e^t&i^e&i}function a(t,e,i){return t^e^i}e.ft_1=function(t,e,i,n){return 0===t?r(e,i,n):1===t||3===t?a(e,i,n):2===t?o(e,i,n):void 0},e.ch32=r,e.maj32=o,e.p32=a,e.s0_256=function(t){return n(t,2)^n(t,13)^n(t,22)},e.s1_256=function(t){return n(t,6)^n(t,11)^n(t,25)},e.g0_256=function(t){return n(t,7)^n(t,18)^t>>>3},e.g1_256=function(t){return n(t,17)^n(t,19)^t>>>10}},6436:(t,e,i)=>{"use strict";var n=i(9746),r=i(5717);function o(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function s(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=r,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16))}else for(var n=0,r=0;r<t.length;r++){var a=t.charCodeAt(r);a<128?i[n++]=a:a<2048?(i[n++]=a>>6|192,i[n++]=63&a|128):o(t,r)?(a=65536+((1023&a)<<10)+(1023&t.charCodeAt(++r)),i[n++]=a>>18|240,i[n++]=a>>12&63|128,i[n++]=a>>6&63|128,i[n++]=63&a|128):(i[n++]=a>>12|224,i[n++]=a>>6&63|128,i[n++]=63&a|128)}else for(r=0;r<t.length;r++)i[r]=0|t[r];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=s(t[i].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var i="",n=0;n<t.length;n++){var r=t[n];"little"===e&&(r=a(r)),i+=u(r.toString(16))}return i},e.zero2=s,e.zero8=u,e.join32=function(t,e,i,r){var o=i-e;n(o%4==0);for(var a=new Array(o/4),s=0,u=e;s<a.length;s++,u+=4){var l;l="big"===r?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],a[s]=l>>>0}return a},e.split32=function(t,e){for(var i=new Array(4*t.length),n=0,r=0;n<t.length;n++,r+=4){var o=t[n];"big"===e?(i[r]=o>>>24,i[r+1]=o>>>16&255,i[r+2]=o>>>8&255,i[r+3]=255&o):(i[r+3]=o>>>24,i[r+2]=o>>>16&255,i[r+1]=o>>>8&255,i[r]=255&o)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,n){return t+e+i+n>>>0},e.sum32_5=function(t,e,i,n,r){return t+e+i+n+r>>>0},e.sum64=function(t,e,i,n){var r=t[e],o=n+t[e+1]>>>0,a=(o<n?1:0)+i+r;t[e]=a>>>0,t[e+1]=o},e.sum64_hi=function(t,e,i,n){return(e+n>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,n){return e+n>>>0},e.sum64_4_hi=function(t,e,i,n,r,o,a,s){var u=0,l=e;return u+=(l=l+n>>>0)<e?1:0,u+=(l=l+o>>>0)<o?1:0,t+i+r+a+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,i,n,r,o,a,s){return e+n+o+s>>>0},e.sum64_5_hi=function(t,e,i,n,r,o,a,s,u,l){var h=0,c=e;return h+=(c=c+n>>>0)<e?1:0,h+=(c=c+o>>>0)<o?1:0,h+=(c=c+s>>>0)<s?1:0,t+i+r+a+u+(h+=(c=c+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,n,r,o,a,s,u,l){return e+n+o+s+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},2156:(t,e,i)=>{"use strict";var n=i(3715),r=i(4504),o=i(9746);function a(t){if(!(this instanceof a))return new a(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=r.toArray(t.entropy,t.entropyEnc||"hex"),i=r.toArray(t.nonce,t.nonceEnc||"hex"),n=r.toArray(t.pers,t.persEnc||"hex");o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,n)}t.exports=a,a.prototype._init=function(t,e,i){var n=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},a.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},a.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},a.prototype.reseed=function(t,e,i,n){"string"!=typeof e&&(n=i,i=e,e=null),t=r.toArray(t,e),i=r.toArray(i,n),o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},a.prototype.generate=function(t,e,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(n=i,i=e,e=null),i&&(i=r.toArray(i,n||"hex"),this._update(i));for(var o=[];o.length<t;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var a=o.slice(0,t);return this._update(i),this._reseed++,r.encode(a,e)}},645:(t,e)=>{e.read=function(t,e,i,n,r){var o,a,s=8*r-n-1,u=(1<<s)-1,l=u>>1,h=-7,c=i?r-1:0,f=i?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-h)-1,p>>=-h,h+=s;h>0;o=256*o+t[e+c],c+=f,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=n;h>0;a=256*a+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var a,s,u,l=8*o-r-1,h=(1<<l)-1,c=h>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(a++,u/=2),a+c>=h?(s=0,a=h):a+c>=1?(s=(e*u-1)*Math.pow(2,r),a+=c):(s=e*Math.pow(2,c-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&s,p+=d,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[i+p]=255&a,p+=d,a/=256,l-=8);t[i+p-d]|=128*g}},5717:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},6486:function(t,e,i){var n;t=i.nmd(t),function(){var r,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,h=1/0,c=9007199254740991,f=NaN,p=4294967295,d=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],g="[object Arguments]",y="[object Array]",v="[object Boolean]",m="[object Date]",b="[object Error]",_="[object Function]",w="[object GeneratorFunction]",x="[object Map]",M="[object Number]",E="[object Object]",A="[object Promise]",k="[object RegExp]",T="[object Set]",S="[object String]",I="[object Symbol]",L="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",P="[object Float32Array]",R="[object Float64Array]",j="[object Int8Array]",N="[object Int16Array]",D="[object Int32Array]",z="[object Uint8Array]",B="[object Uint8ClampedArray]",H="[object Uint16Array]",F="[object Uint32Array]",U=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,q=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,Y=RegExp(G.source),K=RegExp(W.source),Z=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,it=RegExp(et.source),nt=/^\s+/,rt=/\s/,ot=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,at=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xt="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",At="["+Et+"]",kt="["+wt+"]",Tt="\\d+",St="["+xt+"]",It="[^\\ud800-\\udfff"+Et+Tt+"\\u2700-\\u27bf"+xt+Mt+"]",Lt="\\ud83c[\\udffb-\\udfff]",Ot="[^\\ud800-\\udfff]",Ct="(?:\\ud83c[\\udde6-\\uddff]){2}",Pt="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+Mt+"]",jt="(?:"+St+"|"+It+")",Nt="(?:"+Rt+"|"+It+")",Dt="(?:['](?:d|ll|m|re|s|t|ve))?",zt="(?:['](?:D|LL|M|RE|S|T|VE))?",Bt="(?:"+kt+"|"+Lt+")?",Ht="[\\ufe0e\\ufe0f]?",Ft=Ht+Bt+"(?:\\u200d(?:"+[Ot,Ct,Pt].join("|")+")"+Ht+Bt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",Ct,Pt].join("|")+")"+Ft,Vt="(?:"+[Ot+kt+"?",kt,Ct,Pt,"[\\ud800-\\udfff]"].join("|")+")",qt=RegExp("[']","g"),Gt=RegExp(kt,"g"),Wt=RegExp(Lt+"(?="+Lt+")|"+Vt+Ft,"g"),Yt=RegExp([Rt+"?"+St+"+"+Dt+"(?="+[At,Rt,"$"].join("|")+")",Nt+"+"+zt+"(?="+[At,Rt+jt,"$"].join("|")+")",Rt+"?"+jt+"+"+Dt,Rt+"+"+zt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tt,Ut].join("|"),"g"),Kt=RegExp("[\\u200d\\ud800-\\udfff"+wt+"\\ufe0e\\ufe0f]"),Zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jt=-1,$t={};$t[P]=$t[R]=$t[j]=$t[N]=$t[D]=$t[z]=$t[B]=$t[H]=$t[F]=!0,$t[g]=$t[y]=$t[O]=$t[v]=$t[C]=$t[m]=$t[b]=$t[_]=$t[x]=$t[M]=$t[E]=$t[k]=$t[T]=$t[S]=$t[L]=!1;var Qt={};Qt[g]=Qt[y]=Qt[O]=Qt[C]=Qt[v]=Qt[m]=Qt[P]=Qt[R]=Qt[j]=Qt[N]=Qt[D]=Qt[x]=Qt[M]=Qt[E]=Qt[k]=Qt[T]=Qt[S]=Qt[I]=Qt[z]=Qt[B]=Qt[H]=Qt[F]=!0,Qt[b]=Qt[_]=Qt[L]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ie=parseInt,ne="object"==typeof global&&global&&global.Object===Object&&global,re="object"==typeof self&&self&&self.Object===Object&&self,oe=ne||re||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,ue=se&&se.exports===ae,le=ue&&ne.process,he=function(){try{return se&&se.require&&se.require("util").types||le&&le.binding&&le.binding("util")}catch(t){}}(),ce=he&&he.isArrayBuffer,fe=he&&he.isDate,pe=he&&he.isMap,de=he&&he.isRegExp,ge=he&&he.isSet,ye=he&&he.isTypedArray;function ve(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function me(t,e,i,n){for(var r=-1,o=null==t?0:t.length;++r<o;){var a=t[r];e(n,a,i(a),t)}return n}function be(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function _e(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function we(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function xe(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[r++]=a)}return o}function Me(t,e){return!(null==t||!t.length)&&Pe(t,e,0)>-1}function Ee(t,e,i){for(var n=-1,r=null==t?0:t.length;++n<r;)if(i(e,t[n]))return!0;return!1}function Ae(t,e){for(var i=-1,n=null==t?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function ke(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function Te(t,e,i,n){var r=-1,o=null==t?0:t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function Se(t,e,i,n){var r=null==t?0:t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}function Ie(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}var Le=De("length");function Oe(t,e,i){var n;return i(t,(function(t,i,r){if(e(t,i,r))return n=i,!1})),n}function Ce(t,e,i,n){for(var r=t.length,o=i+(n?1:-1);n?o--:++o<r;)if(e(t[o],o,t))return o;return-1}function Pe(t,e,i){return e==e?function(t,e,i){for(var n=i-1,r=t.length;++n<r;)if(t[n]===e)return n;return-1}(t,e,i):Ce(t,je,i)}function Re(t,e,i,n){for(var r=i-1,o=t.length;++r<o;)if(n(t[r],e))return r;return-1}function je(t){return t!=t}function Ne(t,e){var i=null==t?0:t.length;return i?He(t,e)/i:f}function De(t){return function(e){return null==e?r:e[t]}}function ze(t){return function(e){return null==t?r:t[e]}}function Be(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function He(t,e){for(var i,n=-1,o=t.length;++n<o;){var a=e(t[n]);a!==r&&(i=i===r?a:i+a)}return i}function Fe(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function Ue(t){return t?t.slice(0,ai(t)+1).replace(nt,""):t}function Ve(t){return function(e){return t(e)}}function qe(t,e){return Ae(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function We(t,e){for(var i=-1,n=t.length;++i<n&&Pe(e,t[i],0)>-1;);return i}function Ye(t,e){for(var i=t.length;i--&&Pe(e,t[i],0)>-1;);return i}function Ke(t,e){for(var i=t.length,n=0;i--;)t[i]===e&&++n;return n}var Ze=ze({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Xe=ze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Je(t){return"\\"+te[t]}function $e(t){return Kt.test(t)}function Qe(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function ti(t,e){return function(i){return t(e(i))}}function ei(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i];a!==e&&a!==s||(t[i]=s,o[r++]=i)}return o}function ii(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function ni(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}function ri(t){return $e(t)?function(t){for(var e=Wt.lastIndex=0;Wt.test(t);)++e;return e}(t):Le(t)}function oi(t){return $e(t)?function(t){return t.match(Wt)||[]}(t):function(t){return t.split("")}(t)}function ai(t){for(var e=t.length;e--&&rt.test(t.charAt(e)););return e}var si=ze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ui=function t(e){var i,n=(e=null==e?oe:ui.defaults(oe.Object(),e,ui.pick(oe,Xt))).Array,rt=e.Date,wt=e.Error,xt=e.Function,Mt=e.Math,Et=e.Object,At=e.RegExp,kt=e.String,Tt=e.TypeError,St=n.prototype,It=xt.prototype,Lt=Et.prototype,Ot=e["__core-js_shared__"],Ct=It.toString,Pt=Lt.hasOwnProperty,Rt=0,jt=(i=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Nt=Lt.toString,Dt=Ct.call(Et),zt=oe._,Bt=At("^"+Ct.call(Pt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=ue?e.Buffer:r,Ft=e.Symbol,Ut=e.Uint8Array,Vt=Ht?Ht.allocUnsafe:r,Wt=ti(Et.getPrototypeOf,Et),Kt=Et.create,te=Lt.propertyIsEnumerable,ne=St.splice,re=Ft?Ft.isConcatSpreadable:r,ae=Ft?Ft.iterator:r,se=Ft?Ft.toStringTag:r,le=function(){try{var t=lo(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,Le=rt&&rt.now!==oe.Date.now&&rt.now,ze=e.setTimeout!==oe.setTimeout&&e.setTimeout,li=Mt.ceil,hi=Mt.floor,ci=Et.getOwnPropertySymbols,fi=Ht?Ht.isBuffer:r,pi=e.isFinite,di=St.join,gi=ti(Et.keys,Et),yi=Mt.max,vi=Mt.min,mi=rt.now,bi=e.parseInt,_i=Mt.random,wi=St.reverse,xi=lo(e,"DataView"),Mi=lo(e,"Map"),Ei=lo(e,"Promise"),Ai=lo(e,"Set"),ki=lo(e,"WeakMap"),Ti=lo(Et,"create"),Si=ki&&new ki,Ii={},Li=Bo(xi),Oi=Bo(Mi),Ci=Bo(Ei),Pi=Bo(Ai),Ri=Bo(ki),ji=Ft?Ft.prototype:r,Ni=ji?ji.valueOf:r,Di=ji?ji.toString:r;function zi(t){if(is(t)&&!Ga(t)&&!(t instanceof Ui)){if(t instanceof Fi)return t;if(Pt.call(t,"__wrapped__"))return Ho(t)}return new Fi(t)}var Bi=function(){function t(){}return function(e){if(!es(e))return{};if(Kt)return Kt(e);t.prototype=e;var i=new t;return t.prototype=r,i}}();function Hi(){}function Fi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function Ui(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Vi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function qi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Gi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Wi(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Gi;++e<i;)this.add(t[e])}function Yi(t){var e=this.__data__=new qi(t);this.size=e.size}function Ki(t,e){var i=Ga(t),n=!i&&qa(t),r=!i&&!n&&Za(t),o=!i&&!n&&!r&&hs(t),a=i||n||r||o,s=a?Fe(t.length,kt):[],u=s.length;for(var l in t)!e&&!Pt.call(t,l)||a&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,u))||s.push(l);return s}function Zi(t){var e=t.length;return e?t[Wn(0,e-1)]:r}function Xi(t,e){return Ro(Tr(t),an(e,0,t.length))}function Ji(t){return Ro(Tr(t))}function $i(t,e,i){(i!==r&&!Fa(t[e],i)||i===r&&!(e in t))&&rn(t,e,i)}function Qi(t,e,i){var n=t[e];Pt.call(t,e)&&Fa(n,i)&&(i!==r||e in t)||rn(t,e,i)}function tn(t,e){for(var i=t.length;i--;)if(Fa(t[i][0],e))return i;return-1}function en(t,e,i,n){return cn(t,(function(t,r,o){e(n,t,i(t),o)})),n}function nn(t,e){return t&&Sr(e,Cs(e),t)}function rn(t,e,i){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function on(t,e){for(var i=-1,o=e.length,a=n(o),s=null==t;++i<o;)a[i]=s?r:Ts(t,e[i]);return a}function an(t,e,i){return t==t&&(i!==r&&(t=t<=i?t:i),e!==r&&(t=t>=e?t:e)),t}function sn(t,e,i,n,o,a){var s,u=1&e,l=2&e,h=4&e;if(i&&(s=o?i(t,n,o,a):i(t)),s!==r)return s;if(!es(t))return t;var c=Ga(t);if(c){if(s=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Pt.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!u)return Tr(t,s)}else{var f=fo(t),p=f==_||f==w;if(Za(t))return wr(t,u);if(f==E||f==g||p&&!o){if(s=l||p?{}:go(t),!u)return l?function(t,e){return Sr(t,co(t),e)}(t,function(t,e){return t&&Sr(e,Ps(e),t)}(s,t)):function(t,e){return Sr(t,ho(t),e)}(t,nn(s,t))}else{if(!Qt[f])return o?t:{};s=function(t,e,i){var n,r=t.constructor;switch(e){case O:return xr(t);case v:case m:return new r(+t);case C:return function(t,e){var i=e?xr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case P:case R:case j:case N:case D:case z:case B:case H:case F:return Mr(t,i);case x:case T:return new r;case M:case S:return new r(t);case k:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case I:return n=t,Ni?Et(Ni.call(n)):{}}}(t,f,u)}}a||(a=new Yi);var d=a.get(t);if(d)return d;a.set(t,s),ss(t)?t.forEach((function(n){s.add(sn(n,e,i,n,t,a))})):ns(t)&&t.forEach((function(n,r){s.set(r,sn(n,e,i,r,t,a))}));var y=c?r:(h?l?io:eo:l?Ps:Cs)(t);return be(y||t,(function(n,r){y&&(n=t[r=n]),Qi(s,r,sn(n,e,i,r,t,a))})),s}function un(t,e,i){var n=i.length;if(null==t)return!n;for(t=Et(t);n--;){var o=i[n],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function ln(t,e,i){if("function"!=typeof t)throw new Tt(o);return Lo((function(){t.apply(r,i)}),e)}function hn(t,e,i,n){var r=-1,o=Me,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;i&&(e=Ae(e,Ve(i))),n?(o=Ee,a=!1):e.length>=200&&(o=Ge,a=!1,e=new Wi(e));t:for(;++r<s;){var h=t[r],c=null==i?h:i(h);if(h=n||0!==h?h:0,a&&c==c){for(var f=l;f--;)if(e[f]===c)continue t;u.push(h)}else o(e,c,n)||u.push(h)}return u}zi.templateSettings={escape:Z,evaluate:X,interpolate:J,variable:"",imports:{_:zi}},zi.prototype=Hi.prototype,zi.prototype.constructor=zi,Fi.prototype=Bi(Hi.prototype),Fi.prototype.constructor=Fi,Ui.prototype=Bi(Hi.prototype),Ui.prototype.constructor=Ui,Vi.prototype.clear=function(){this.__data__=Ti?Ti(null):{},this.size=0},Vi.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Vi.prototype.get=function(t){var e=this.__data__;if(Ti){var i=e[t];return i===a?r:i}return Pt.call(e,t)?e[t]:r},Vi.prototype.has=function(t){var e=this.__data__;return Ti?e[t]!==r:Pt.call(e,t)},Vi.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Ti&&e===r?a:e,this},qi.prototype.clear=function(){this.__data__=[],this.size=0},qi.prototype.delete=function(t){var e=this.__data__,i=tn(e,t);return!(i<0||(i==e.length-1?e.pop():ne.call(e,i,1),--this.size,0))},qi.prototype.get=function(t){var e=this.__data__,i=tn(e,t);return i<0?r:e[i][1]},qi.prototype.has=function(t){return tn(this.__data__,t)>-1},qi.prototype.set=function(t,e){var i=this.__data__,n=tn(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this},Gi.prototype.clear=function(){this.size=0,this.__data__={hash:new Vi,map:new(Mi||qi),string:new Vi}},Gi.prototype.delete=function(t){var e=so(this,t).delete(t);return this.size-=e?1:0,e},Gi.prototype.get=function(t){return so(this,t).get(t)},Gi.prototype.has=function(t){return so(this,t).has(t)},Gi.prototype.set=function(t,e){var i=so(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},Wi.prototype.add=Wi.prototype.push=function(t){return this.__data__.set(t,a),this},Wi.prototype.has=function(t){return this.__data__.has(t)},Yi.prototype.clear=function(){this.__data__=new qi,this.size=0},Yi.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Yi.prototype.get=function(t){return this.__data__.get(t)},Yi.prototype.has=function(t){return this.__data__.has(t)},Yi.prototype.set=function(t,e){var i=this.__data__;if(i instanceof qi){var n=i.__data__;if(!Mi||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Gi(n)}return i.set(t,e),this.size=i.size,this};var cn=Or(bn),fn=Or(_n,!0);function pn(t,e){var i=!0;return cn(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function dn(t,e,i){for(var n=-1,o=t.length;++n<o;){var a=t[n],s=e(a);if(null!=s&&(u===r?s==s&&!ls(s):i(s,u)))var u=s,l=a}return l}function gn(t,e){var i=[];return cn(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function yn(t,e,i,n,r){var o=-1,a=t.length;for(i||(i=yo),r||(r=[]);++o<a;){var s=t[o];e>0&&i(s)?e>1?yn(s,e-1,i,n,r):ke(r,s):n||(r[r.length]=s)}return r}var vn=Cr(),mn=Cr(!0);function bn(t,e){return t&&vn(t,e,Cs)}function _n(t,e){return t&&mn(t,e,Cs)}function wn(t,e){return xe(e,(function(e){return $a(t[e])}))}function xn(t,e){for(var i=0,n=(e=vr(e,t)).length;null!=t&&i<n;)t=t[zo(e[i++])];return i&&i==n?t:r}function Mn(t,e,i){var n=e(t);return Ga(t)?n:ke(n,i(t))}function En(t){return null==t?t===r?"[object Undefined]":"[object Null]":se&&se in Et(t)?function(t){var e=Pt.call(t,se),i=t[se];try{t[se]=r;var n=!0}catch(t){}var o=Nt.call(t);return n&&(e?t[se]=i:delete t[se]),o}(t):function(t){return Nt.call(t)}(t)}function An(t,e){return t>e}function kn(t,e){return null!=t&&Pt.call(t,e)}function Tn(t,e){return null!=t&&e in Et(t)}function Sn(t,e,i){for(var o=i?Ee:Me,a=t[0].length,s=t.length,u=s,l=n(s),h=1/0,c=[];u--;){var f=t[u];u&&e&&(f=Ae(f,Ve(e))),h=vi(f.length,h),l[u]=!i&&(e||a>=120&&f.length>=120)?new Wi(u&&f):r}f=t[0];var p=-1,d=l[0];t:for(;++p<a&&c.length<h;){var g=f[p],y=e?e(g):g;if(g=i||0!==g?g:0,!(d?Ge(d,y):o(c,y,i))){for(u=s;--u;){var v=l[u];if(!(v?Ge(v,y):o(t[u],y,i)))continue t}d&&d.push(y),c.push(g)}}return c}function In(t,e,i){var n=null==(t=ko(t,e=vr(e,t)))?t:t[zo(Jo(e))];return null==n?r:ve(n,t,i)}function Ln(t){return is(t)&&En(t)==g}function On(t,e,i,n,o){return t===e||(null==t||null==e||!is(t)&&!is(e)?t!=t&&e!=e:function(t,e,i,n,o,a){var s=Ga(t),u=Ga(e),l=s?y:fo(t),h=u?y:fo(e),c=(l=l==g?E:l)==E,f=(h=h==g?E:h)==E,p=l==h;if(p&&Za(t)){if(!Za(e))return!1;s=!0,c=!1}if(p&&!c)return a||(a=new Yi),s||hs(t)?Qr(t,e,i,n,o,a):function(t,e,i,n,r,o,a){switch(i){case C:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case O:return!(t.byteLength!=e.byteLength||!o(new Ut(t),new Ut(e)));case v:case m:case M:return Fa(+t,+e);case b:return t.name==e.name&&t.message==e.message;case k:case S:return t==e+"";case x:var s=Qe;case T:var u=1&n;if(s||(s=ii),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;n|=2,a.set(t,e);var h=Qr(s(t),s(e),n,r,o,a);return a.delete(t),h;case I:if(Ni)return Ni.call(t)==Ni.call(e)}return!1}(t,e,l,i,n,o,a);if(!(1&i)){var d=c&&Pt.call(t,"__wrapped__"),_=f&&Pt.call(e,"__wrapped__");if(d||_){var w=d?t.value():t,A=_?e.value():e;return a||(a=new Yi),o(w,A,i,n,a)}}return!!p&&(a||(a=new Yi),function(t,e,i,n,o,a){var s=1&i,u=eo(t),l=u.length;if(l!=eo(e).length&&!s)return!1;for(var h=l;h--;){var c=u[h];if(!(s?c in e:Pt.call(e,c)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var d=!0;a.set(t,e),a.set(e,t);for(var g=s;++h<l;){var y=t[c=u[h]],v=e[c];if(n)var m=s?n(v,y,c,e,t,a):n(y,v,c,t,e,a);if(!(m===r?y===v||o(y,v,i,n,a):m)){d=!1;break}g||(g="constructor"==c)}if(d&&!g){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(d=!1)}return a.delete(t),a.delete(e),d}(t,e,i,n,o,a))}(t,e,i,n,On,o))}function Cn(t,e,i,n){var o=i.length,a=o,s=!n;if(null==t)return!a;for(t=Et(t);o--;){var u=i[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=i[o])[0],h=t[l],c=u[1];if(s&&u[2]){if(h===r&&!(l in t))return!1}else{var f=new Yi;if(n)var p=n(h,c,l,t,e,f);if(!(p===r?On(c,h,3,n,f):p))return!1}}return!0}function Pn(t){return!(!es(t)||(e=t,jt&&jt in e))&&($a(t)?Bt:gt).test(Bo(t));var e}function Rn(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ga(t)?Bn(t[0],t[1]):zn(t):pu(t)}function jn(t){if(!xo(t))return gi(t);var e=[];for(var i in Et(t))Pt.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Nn(t,e){return t<e}function Dn(t,e){var i=-1,r=Ya(t)?n(t.length):[];return cn(t,(function(t,n,o){r[++i]=e(t,n,o)})),r}function zn(t){var e=uo(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(i){return i===t||Cn(i,t,e)}}function Bn(t,e){return bo(t)&&Mo(e)?Eo(zo(t),e):function(i){var n=Ts(i,t);return n===r&&n===e?Ss(i,t):On(e,n,3)}}function Hn(t,e,i,n,o){t!==e&&vn(e,(function(a,s){if(o||(o=new Yi),es(a))!function(t,e,i,n,o,a,s){var u=So(t,i),l=So(e,i),h=s.get(l);if(h)$i(t,i,h);else{var c=a?a(u,l,i+"",t,e,s):r,f=c===r;if(f){var p=Ga(l),d=!p&&Za(l),g=!p&&!d&&hs(l);c=l,p||d||g?Ga(u)?c=u:Ka(u)?c=Tr(u):d?(f=!1,c=wr(l,!0)):g?(f=!1,c=Mr(l,!0)):c=[]:os(l)||qa(l)?(c=u,qa(u)?c=ms(u):es(u)&&!$a(u)||(c=go(l))):f=!1}f&&(s.set(l,c),o(c,l,n,a,s),s.delete(l)),$i(t,i,c)}}(t,e,s,i,Hn,n,o);else{var u=n?n(So(t,s),a,s+"",t,e,o):r;u===r&&(u=a),$i(t,s,u)}}),Ps)}function Fn(t,e){var i=t.length;if(i)return vo(e+=e<0?i:0,i)?t[e]:r}function Un(t,e,i){e=e.length?Ae(e,(function(t){return Ga(t)?function(e){return xn(e,1===t.length?t[0]:t)}:t})):[ru];var n=-1;e=Ae(e,Ve(ao()));var r=Dn(t,(function(t,i,r){var o=Ae(e,(function(e){return e(t)}));return{criteria:o,index:++n,value:t}}));return function(t,e){var n=t.length;for(t.sort((function(t,e){return function(t,e,i){for(var n=-1,r=t.criteria,o=e.criteria,a=r.length,s=i.length;++n<a;){var u=Er(r[n],o[n]);if(u)return n>=s?u:u*("desc"==i[n]?-1:1)}return t.index-e.index}(t,e,i)}));n--;)t[n]=t[n].value;return t}(r)}function Vn(t,e,i){for(var n=-1,r=e.length,o={};++n<r;){var a=e[n],s=xn(t,a);i(s,a)&&Jn(o,vr(a,t),s)}return o}function qn(t,e,i,n){var r=n?Re:Pe,o=-1,a=e.length,s=t;for(t===e&&(e=Tr(e)),i&&(s=Ae(t,Ve(i)));++o<a;)for(var u=0,l=e[o],h=i?i(l):l;(u=r(s,h,u,n))>-1;)s!==t&&ne.call(s,u,1),ne.call(t,u,1);return t}function Gn(t,e){for(var i=t?e.length:0,n=i-1;i--;){var r=e[i];if(i==n||r!==o){var o=r;vo(r)?ne.call(t,r,1):lr(t,r)}}return t}function Wn(t,e){return t+hi(_i()*(e-t+1))}function Yn(t,e){var i="";if(!t||e<1||e>c)return i;do{e%2&&(i+=t),(e=hi(e/2))&&(t+=t)}while(e);return i}function Kn(t,e){return Oo(Ao(t,e,ru),t+"")}function Zn(t){return Zi(Fs(t))}function Xn(t,e){var i=Fs(t);return Ro(i,an(e,0,i.length))}function Jn(t,e,i,n){if(!es(t))return t;for(var o=-1,a=(e=vr(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=zo(e[o]),h=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var c=u[l];(h=n?n(c,l,u):r)===r&&(h=es(c)?c:vo(e[o+1])?[]:{})}Qi(u,l,h),u=u[l]}return t}var $n=Si?function(t,e){return Si.set(t,e),t}:ru,Qn=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:eu(e),writable:!0})}:ru;function tr(t){return Ro(Fs(t))}function er(t,e,i){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(i=i>o?o:i)<0&&(i+=o),o=e>i?0:i-e>>>0,e>>>=0;for(var a=n(o);++r<o;)a[r]=t[r+e];return a}function ir(t,e){var i;return cn(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}function nr(t,e,i){var n=0,r=null==t?n:t.length;if("number"==typeof e&&e==e&&r<=2147483647){for(;n<r;){var o=n+r>>>1,a=t[o];null!==a&&!ls(a)&&(i?a<=e:a<e)?n=o+1:r=o}return r}return rr(t,e,ru,i)}function rr(t,e,i,n){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=i(e))!=e,u=null===e,l=ls(e),h=e===r;o<a;){var c=hi((o+a)/2),f=i(t[c]),p=f!==r,d=null===f,g=f==f,y=ls(f);if(s)var v=n||g;else v=h?g&&(n||p):u?g&&p&&(n||!d):l?g&&p&&!d&&(n||!y):!d&&!y&&(n?f<=e:f<e);v?o=c+1:a=c}return vi(a,4294967294)}function or(t,e){for(var i=-1,n=t.length,r=0,o=[];++i<n;){var a=t[i],s=e?e(a):a;if(!i||!Fa(s,u)){var u=s;o[r++]=0===a?0:a}}return o}function ar(t){return"number"==typeof t?t:ls(t)?f:+t}function sr(t){if("string"==typeof t)return t;if(Ga(t))return Ae(t,sr)+"";if(ls(t))return Di?Di.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function ur(t,e,i){var n=-1,r=Me,o=t.length,a=!0,s=[],u=s;if(i)a=!1,r=Ee;else if(o>=200){var l=e?null:Yr(t);if(l)return ii(l);a=!1,r=Ge,u=new Wi}else u=e?[]:s;t:for(;++n<o;){var h=t[n],c=e?e(h):h;if(h=i||0!==h?h:0,a&&c==c){for(var f=u.length;f--;)if(u[f]===c)continue t;e&&u.push(c),s.push(h)}else r(u,c,i)||(u!==s&&u.push(c),s.push(h))}return s}function lr(t,e){return null==(t=ko(t,e=vr(e,t)))||delete t[zo(Jo(e))]}function hr(t,e,i,n){return Jn(t,e,i(xn(t,e)),n)}function cr(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?er(t,n?0:o,n?o+1:r):er(t,n?o+1:0,n?r:o)}function fr(t,e){var i=t;return i instanceof Ui&&(i=i.value()),Te(e,(function(t,e){return e.func.apply(e.thisArg,ke([t],e.args))}),i)}function pr(t,e,i){var r=t.length;if(r<2)return r?ur(t[0]):[];for(var o=-1,a=n(r);++o<r;)for(var s=t[o],u=-1;++u<r;)u!=o&&(a[o]=hn(a[o]||s,t[u],e,i));return ur(yn(a,1),e,i)}function dr(t,e,i){for(var n=-1,o=t.length,a=e.length,s={};++n<o;){var u=n<a?e[n]:r;i(s,t[n],u)}return s}function gr(t){return Ka(t)?t:[]}function yr(t){return"function"==typeof t?t:ru}function vr(t,e){return Ga(t)?t:bo(t,e)?[t]:Do(bs(t))}var mr=Kn;function br(t,e,i){var n=t.length;return i=i===r?n:i,!e&&i>=n?t:er(t,e,i)}var _r=he||function(t){return oe.clearTimeout(t)};function wr(t,e){if(e)return t.slice();var i=t.length,n=Vt?Vt(i):new t.constructor(i);return t.copy(n),n}function xr(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function Mr(t,e){var i=e?xr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Er(t,e){if(t!==e){var i=t!==r,n=null===t,o=t==t,a=ls(t),s=e!==r,u=null===e,l=e==e,h=ls(e);if(!u&&!h&&!a&&t>e||a&&s&&l&&!u&&!h||n&&s&&l||!i&&l||!o)return 1;if(!n&&!a&&!h&&t<e||h&&i&&o&&!n&&!a||u&&i&&o||!s&&o||!l)return-1}return 0}function Ar(t,e,i,r){for(var o=-1,a=t.length,s=i.length,u=-1,l=e.length,h=yi(a-s,0),c=n(l+h),f=!r;++u<l;)c[u]=e[u];for(;++o<s;)(f||o<a)&&(c[i[o]]=t[o]);for(;h--;)c[u++]=t[o++];return c}function kr(t,e,i,r){for(var o=-1,a=t.length,s=-1,u=i.length,l=-1,h=e.length,c=yi(a-u,0),f=n(c+h),p=!r;++o<c;)f[o]=t[o];for(var d=o;++l<h;)f[d+l]=e[l];for(;++s<u;)(p||o<a)&&(f[d+i[s]]=t[o++]);return f}function Tr(t,e){var i=-1,r=t.length;for(e||(e=n(r));++i<r;)e[i]=t[i];return e}function Sr(t,e,i,n){var o=!i;i||(i={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=n?n(i[u],t[u],u,i,t):r;l===r&&(l=t[u]),o?rn(i,u,l):Qi(i,u,l)}return i}function Ir(t,e){return function(i,n){var r=Ga(i)?me:en,o=e?e():{};return r(i,t,ao(n,2),o)}}function Lr(t){return Kn((function(e,i){var n=-1,o=i.length,a=o>1?i[o-1]:r,s=o>2?i[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&mo(i[0],i[1],s)&&(a=o<3?r:a,o=1),e=Et(e);++n<o;){var u=i[n];u&&t(e,u,n,a)}return e}))}function Or(t,e){return function(i,n){if(null==i)return i;if(!Ya(i))return t(i,n);for(var r=i.length,o=e?r:-1,a=Et(i);(e?o--:++o<r)&&!1!==n(a[o],o,a););return i}}function Cr(t){return function(e,i,n){for(var r=-1,o=Et(e),a=n(e),s=a.length;s--;){var u=a[t?s:++r];if(!1===i(o[u],u,o))break}return e}}function Pr(t){return function(e){var i=$e(e=bs(e))?oi(e):r,n=i?i[0]:e.charAt(0),o=i?br(i,1).join(""):e.slice(1);return n[t]()+o}}function Rr(t){return function(e){return Te($s(qs(e).replace(qt,"")),t,"")}}function jr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Bi(t.prototype),n=t.apply(i,e);return es(n)?n:i}}function Nr(t){return function(e,i,n){var o=Et(e);if(!Ya(e)){var a=ao(i,3);e=Cs(e),i=function(t){return a(o[t],t,o)}}var s=t(e,i,n);return s>-1?o[a?e[s]:s]:r}}function Dr(t){return to((function(e){var i=e.length,n=i,a=Fi.prototype.thru;for(t&&e.reverse();n--;){var s=e[n];if("function"!=typeof s)throw new Tt(o);if(a&&!u&&"wrapper"==ro(s))var u=new Fi([],!0)}for(n=u?n:i;++n<i;){var l=ro(s=e[n]),h="wrapper"==l?no(s):r;u=h&&_o(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[ro(h[0])].apply(u,h[3]):1==s.length&&_o(s)?u[l]():u.thru(s)}return function(){var t=arguments,n=t[0];if(u&&1==t.length&&Ga(n))return u.plant(n).value();for(var r=0,o=i?e[r].apply(this,t):n;++r<i;)o=e[r].call(this,o);return o}}))}function zr(t,e,i,o,a,s,u,h,c,f){var p=e&l,d=1&e,g=2&e,y=24&e,v=512&e,m=g?r:jr(t);return function r(){for(var l=arguments.length,b=n(l),_=l;_--;)b[_]=arguments[_];if(y)var w=oo(r),x=Ke(b,w);if(o&&(b=Ar(b,o,a,y)),s&&(b=kr(b,s,u,y)),l-=x,y&&l<f){var M=ei(b,w);return Gr(t,e,zr,r.placeholder,i,b,M,h,c,f-l)}var E=d?i:this,A=g?E[t]:t;return l=b.length,h?b=To(b,h):v&&l>1&&b.reverse(),p&&c<l&&(b.length=c),this&&this!==oe&&this instanceof r&&(A=m||jr(A)),A.apply(E,b)}}function Br(t,e){return function(i,n){return function(t,e,i,n){return bn(t,(function(t,r,o){e(n,i(t),r,o)})),n}(i,t,e(n),{})}}function Hr(t,e){return function(i,n){var o;if(i===r&&n===r)return e;if(i!==r&&(o=i),n!==r){if(o===r)return n;"string"==typeof i||"string"==typeof n?(i=sr(i),n=sr(n)):(i=ar(i),n=ar(n)),o=t(i,n)}return o}}function Fr(t){return to((function(e){return e=Ae(e,Ve(ao())),Kn((function(i){var n=this;return t(e,(function(t){return ve(t,n,i)}))}))}))}function Ur(t,e){var i=(e=e===r?" ":sr(e)).length;if(i<2)return i?Yn(e,t):e;var n=Yn(e,li(t/ri(e)));return $e(e)?br(oi(n),0,t).join(""):n.slice(0,t)}function Vr(t){return function(e,i,o){return o&&"number"!=typeof o&&mo(e,i,o)&&(i=o=r),e=ds(e),i===r?(i=e,e=0):i=ds(i),function(t,e,i,r){for(var o=-1,a=yi(li((e-t)/(i||1)),0),s=n(a);a--;)s[r?a:++o]=t,t+=i;return s}(e,i,o=o===r?e<i?1:-1:ds(o),t)}}function qr(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=vs(e),i=vs(i)),t(e,i)}}function Gr(t,e,i,n,o,a,s,l,h,c){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?a:r,f?s:r,f?r:a,f?r:s,l,h,c],d=i.apply(r,p);return _o(t)&&Io(d,p),d.placeholder=n,Co(d,t,e)}function Wr(t){var e=Mt[t];return function(t,i){if(t=vs(t),(i=null==i?0:vi(gs(i),292))&&pi(t)){var n=(bs(t)+"e").split("e");return+((n=(bs(e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}var Yr=Ai&&1/ii(new Ai([,-0]))[1]==h?function(t){return new Ai(t)}:lu;function Kr(t){return function(e){var i=fo(e);return i==x?Qe(e):i==T?ni(e):function(t,e){return Ae(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Zr(t,e,i,a,h,c,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new Tt(o);var g=a?a.length:0;if(g||(e&=-97,a=h=r),f=f===r?f:yi(gs(f),0),p=p===r?p:gs(p),g-=h?h.length:0,64&e){var y=a,v=h;a=h=r}var m=d?r:no(t),b=[t,e,i,a,h,y,v,c,f,p];if(m&&function(t,e){var i=t[1],n=e[1],r=i|n,o=r<131,a=n==l&&8==i||n==l&&256==i&&t[7].length<=e[8]||384==n&&e[7].length<=e[8]&&8==i;if(!o&&!a)return t;1&n&&(t[2]=e[2],r|=1&i?0:4);var u=e[3];if(u){var h=t[3];t[3]=h?Ar(h,u,e[4]):u,t[4]=h?ei(t[3],s):e[4]}(u=e[5])&&(h=t[5],t[5]=h?kr(h,u,e[6]):u,t[6]=h?ei(t[5],s):e[6]),(u=e[7])&&(t[7]=u),n&l&&(t[8]=null==t[8]?e[8]:vi(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(b,m),t=b[0],e=b[1],i=b[2],a=b[3],h=b[4],!(p=b[9]=b[9]===r?d?0:t.length:yi(b[9]-g,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,i){var o=jr(t);return function a(){for(var s=arguments.length,u=n(s),l=s,h=oo(a);l--;)u[l]=arguments[l];var c=s<3&&u[0]!==h&&u[s-1]!==h?[]:ei(u,h);return(s-=c.length)<i?Gr(t,e,zr,a.placeholder,r,u,c,r,r,i-s):ve(this&&this!==oe&&this instanceof a?o:t,this,u)}}(t,e,p):e!=u&&33!=e||h.length?zr.apply(r,b):function(t,e,i,r){var o=1&e,a=jr(t);return function e(){for(var s=-1,u=arguments.length,l=-1,h=r.length,c=n(h+u),f=this&&this!==oe&&this instanceof e?a:t;++l<h;)c[l]=r[l];for(;u--;)c[l++]=arguments[++s];return ve(f,o?i:this,c)}}(t,e,i,a);else var _=function(t,e,i){var n=1&e,r=jr(t);return function e(){return(this&&this!==oe&&this instanceof e?r:t).apply(n?i:this,arguments)}}(t,e,i);return Co((m?$n:Io)(_,b),t,e)}function Xr(t,e,i,n){return t===r||Fa(t,Lt[i])&&!Pt.call(n,i)?e:t}function Jr(t,e,i,n,o,a){return es(t)&&es(e)&&(a.set(e,t),Hn(t,e,r,Jr,a),a.delete(e)),t}function $r(t){return os(t)?r:t}function Qr(t,e,i,n,o,a){var s=1&i,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var h=a.get(t),c=a.get(e);if(h&&c)return h==e&&c==t;var f=-1,p=!0,d=2&i?new Wi:r;for(a.set(t,e),a.set(e,t);++f<u;){var g=t[f],y=e[f];if(n)var v=s?n(y,g,f,e,t,a):n(g,y,f,t,e,a);if(v!==r){if(v)continue;p=!1;break}if(d){if(!Ie(e,(function(t,e){if(!Ge(d,e)&&(g===t||o(g,t,i,n,a)))return d.push(e)}))){p=!1;break}}else if(g!==y&&!o(g,y,i,n,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function to(t){return Oo(Ao(t,r,Wo),t+"")}function eo(t){return Mn(t,Cs,ho)}function io(t){return Mn(t,Ps,co)}var no=Si?function(t){return Si.get(t)}:lu;function ro(t){for(var e=t.name+"",i=Ii[e],n=Pt.call(Ii,e)?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function oo(t){return(Pt.call(zi,"placeholder")?zi:t).placeholder}function ao(){var t=zi.iteratee||ou;return t=t===ou?Rn:t,arguments.length?t(arguments[0],arguments[1]):t}function so(t,e){var i,n,r=t.__data__;return("string"==(n=typeof(i=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?r["string"==typeof e?"string":"hash"]:r.map}function uo(t){for(var e=Cs(t),i=e.length;i--;){var n=e[i],r=t[n];e[i]=[n,r,Mo(r)]}return e}function lo(t,e){var i=function(t,e){return null==t?r:t[e]}(t,e);return Pn(i)?i:r}var ho=ci?function(t){return null==t?[]:(t=Et(t),xe(ci(t),(function(e){return te.call(t,e)})))}:yu,co=ci?function(t){for(var e=[];t;)ke(e,ho(t)),t=Wt(t);return e}:yu,fo=En;function po(t,e,i){for(var n=-1,r=(e=vr(e,t)).length,o=!1;++n<r;){var a=zo(e[n]);if(!(o=null!=t&&i(t,a)))break;t=t[a]}return o||++n!=r?o:!!(r=null==t?0:t.length)&&ts(r)&&vo(a,r)&&(Ga(t)||qa(t))}function go(t){return"function"!=typeof t.constructor||xo(t)?{}:Bi(Wt(t))}function yo(t){return Ga(t)||qa(t)||!!(re&&t&&t[re])}function vo(t,e){var i=typeof t;return!!(e=null==e?c:e)&&("number"==i||"symbol"!=i&&vt.test(t))&&t>-1&&t%1==0&&t<e}function mo(t,e,i){if(!es(i))return!1;var n=typeof e;return!!("number"==n?Ya(i)&&vo(e,i.length):"string"==n&&e in i)&&Fa(i[e],t)}function bo(t,e){if(Ga(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!ls(t))||Q.test(t)||!$.test(t)||null!=e&&t in Et(e)}function _o(t){var e=ro(t),i=zi[e];if("function"!=typeof i||!(e in Ui.prototype))return!1;if(t===i)return!0;var n=no(i);return!!n&&t===n[0]}(xi&&fo(new xi(new ArrayBuffer(1)))!=C||Mi&&fo(new Mi)!=x||Ei&&fo(Ei.resolve())!=A||Ai&&fo(new Ai)!=T||ki&&fo(new ki)!=L)&&(fo=function(t){var e=En(t),i=e==E?t.constructor:r,n=i?Bo(i):"";if(n)switch(n){case Li:return C;case Oi:return x;case Ci:return A;case Pi:return T;case Ri:return L}return e});var wo=Ot?$a:vu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)}function Mo(t){return t==t&&!es(t)}function Eo(t,e){return function(i){return null!=i&&i[t]===e&&(e!==r||t in Et(i))}}function Ao(t,e,i){return e=yi(e===r?t.length-1:e,0),function(){for(var r=arguments,o=-1,a=yi(r.length-e,0),s=n(a);++o<a;)s[o]=r[e+o];o=-1;for(var u=n(e+1);++o<e;)u[o]=r[o];return u[e]=i(s),ve(t,this,u)}}function ko(t,e){return e.length<2?t:xn(t,er(e,0,-1))}function To(t,e){for(var i=t.length,n=vi(e.length,i),o=Tr(t);n--;){var a=e[n];t[n]=vo(a,i)?o[a]:r}return t}function So(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Io=Po($n),Lo=ze||function(t,e){return oe.setTimeout(t,e)},Oo=Po(Qn);function Co(t,e,i){var n=e+"";return Oo(t,function(t,e){var i=e.length;if(!i)return t;var n=i-1;return e[n]=(i>1?"& ":"")+e[n],e=e.join(i>2?", ":" "),t.replace(ot,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return be(d,(function(i){var n="_."+i[0];e&i[1]&&!Me(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(at);return e?e[1].split(st):[]}(n),i)))}function Po(t){var e=0,i=0;return function(){var n=mi(),o=16-(n-i);if(i=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function Ro(t,e){var i=-1,n=t.length,o=n-1;for(e=e===r?n:e;++i<e;){var a=Wn(i,o),s=t[a];t[a]=t[i],t[i]=s}return t.length=e,t}var jo,No,Do=(jo=ja((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,i,n,r){e.push(n?r.replace(ht,"$1"):i||t)})),e}),(function(t){return 500===No.size&&No.clear(),t})),No=jo.cache,jo);function zo(t){if("string"==typeof t||ls(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bo(t){if(null!=t){try{return Ct.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ho(t){if(t instanceof Ui)return t.clone();var e=new Fi(t.__wrapped__,t.__chain__);return e.__actions__=Tr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Fo=Kn((function(t,e){return Ka(t)?hn(t,yn(e,1,Ka,!0)):[]})),Uo=Kn((function(t,e){var i=Jo(e);return Ka(i)&&(i=r),Ka(t)?hn(t,yn(e,1,Ka,!0),ao(i,2)):[]})),Vo=Kn((function(t,e){var i=Jo(e);return Ka(i)&&(i=r),Ka(t)?hn(t,yn(e,1,Ka,!0),r,i):[]}));function qo(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:gs(i);return r<0&&(r=yi(n+r,0)),Ce(t,ao(e,3),r)}function Go(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n-1;return i!==r&&(o=gs(i),o=i<0?yi(n+o,0):vi(o,n-1)),Ce(t,ao(e,3),o,!0)}function Wo(t){return null!=t&&t.length?yn(t,1):[]}function Yo(t){return t&&t.length?t[0]:r}var Ko=Kn((function(t){var e=Ae(t,gr);return e.length&&e[0]===t[0]?Sn(e):[]})),Zo=Kn((function(t){var e=Jo(t),i=Ae(t,gr);return e===Jo(i)?e=r:i.pop(),i.length&&i[0]===t[0]?Sn(i,ao(e,2)):[]})),Xo=Kn((function(t){var e=Jo(t),i=Ae(t,gr);return(e="function"==typeof e?e:r)&&i.pop(),i.length&&i[0]===t[0]?Sn(i,r,e):[]}));function Jo(t){var e=null==t?0:t.length;return e?t[e-1]:r}var $o=Kn(Qo);function Qo(t,e){return t&&t.length&&e&&e.length?qn(t,e):t}var ta=to((function(t,e){var i=null==t?0:t.length,n=on(t,e);return Gn(t,Ae(e,(function(t){return vo(t,i)?+t:t})).sort(Er)),n}));function ea(t){return null==t?t:wi.call(t)}var ia=Kn((function(t){return ur(yn(t,1,Ka,!0))})),na=Kn((function(t){var e=Jo(t);return Ka(e)&&(e=r),ur(yn(t,1,Ka,!0),ao(e,2))})),ra=Kn((function(t){var e=Jo(t);return e="function"==typeof e?e:r,ur(yn(t,1,Ka,!0),r,e)}));function oa(t){if(!t||!t.length)return[];var e=0;return t=xe(t,(function(t){if(Ka(t))return e=yi(t.length,e),!0})),Fe(e,(function(e){return Ae(t,De(e))}))}function aa(t,e){if(!t||!t.length)return[];var i=oa(t);return null==e?i:Ae(i,(function(t){return ve(e,r,t)}))}var sa=Kn((function(t,e){return Ka(t)?hn(t,e):[]})),ua=Kn((function(t){return pr(xe(t,Ka))})),la=Kn((function(t){var e=Jo(t);return Ka(e)&&(e=r),pr(xe(t,Ka),ao(e,2))})),ha=Kn((function(t){var e=Jo(t);return e="function"==typeof e?e:r,pr(xe(t,Ka),r,e)})),ca=Kn(oa),fa=Kn((function(t){var e=t.length,i=e>1?t[e-1]:r;return i="function"==typeof i?(t.pop(),i):r,aa(t,i)}));function pa(t){var e=zi(t);return e.__chain__=!0,e}function da(t,e){return e(t)}var ga=to((function(t){var e=t.length,i=e?t[0]:0,n=this.__wrapped__,o=function(e){return on(e,t)};return!(e>1||this.__actions__.length)&&n instanceof Ui&&vo(i)?((n=n.slice(i,+i+(e?1:0))).__actions__.push({func:da,args:[o],thisArg:r}),new Fi(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)})),ya=Ir((function(t,e,i){Pt.call(t,i)?++t[i]:rn(t,i,1)})),va=Nr(qo),ma=Nr(Go);function ba(t,e){return(Ga(t)?be:cn)(t,ao(e,3))}function _a(t,e){return(Ga(t)?_e:fn)(t,ao(e,3))}var wa=Ir((function(t,e,i){Pt.call(t,i)?t[i].push(e):rn(t,i,[e])})),xa=Kn((function(t,e,i){var r=-1,o="function"==typeof e,a=Ya(t)?n(t.length):[];return cn(t,(function(t){a[++r]=o?ve(e,t,i):In(t,e,i)})),a})),Ma=Ir((function(t,e,i){rn(t,i,e)}));function Ea(t,e){return(Ga(t)?Ae:Dn)(t,ao(e,3))}var Aa=Ir((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),ka=Kn((function(t,e){if(null==t)return[];var i=e.length;return i>1&&mo(t,e[0],e[1])?e=[]:i>2&&mo(e[0],e[1],e[2])&&(e=[e[0]]),Un(t,yn(e,1),[])})),Ta=Le||function(){return oe.Date.now()};function Sa(t,e,i){return e=i?r:e,e=t&&null==e?t.length:e,Zr(t,l,r,r,r,r,e)}function Ia(t,e){var i;if("function"!=typeof e)throw new Tt(o);return t=gs(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=r),i}}var La=Kn((function(t,e,i){var n=1;if(i.length){var r=ei(i,oo(La));n|=u}return Zr(t,n,e,i,r)})),Oa=Kn((function(t,e,i){var n=3;if(i.length){var r=ei(i,oo(Oa));n|=u}return Zr(e,n,t,i,r)}));function Ca(t,e,i){var n,a,s,u,l,h,c=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new Tt(o);function g(e){var i=n,o=a;return n=a=r,c=e,u=t.apply(o,i)}function y(t){return c=t,l=Lo(m,e),f?g(t):u}function v(t){var i=t-h;return h===r||i>=e||i<0||p&&t-c>=s}function m(){var t=Ta();if(v(t))return b(t);l=Lo(m,function(t){var i=e-(t-h);return p?vi(i,s-(t-c)):i}(t))}function b(t){return l=r,d&&n?g(t):(n=a=r,u)}function _(){var t=Ta(),i=v(t);if(n=arguments,a=this,h=t,i){if(l===r)return y(h);if(p)return _r(l),l=Lo(m,e),g(h)}return l===r&&(l=Lo(m,e)),u}return e=vs(e)||0,es(i)&&(f=!!i.leading,s=(p="maxWait"in i)?yi(vs(i.maxWait)||0,e):s,d="trailing"in i?!!i.trailing:d),_.cancel=function(){l!==r&&_r(l),c=0,n=h=a=l=r},_.flush=function(){return l===r?u:b(Ta())},_}var Pa=Kn((function(t,e){return ln(t,1,e)})),Ra=Kn((function(t,e,i){return ln(t,vs(e)||0,i)}));function ja(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(o);var i=function(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var a=t.apply(this,n);return i.cache=o.set(r,a)||o,a};return i.cache=new(ja.Cache||Gi),i}function Na(t){if("function"!=typeof t)throw new Tt(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ja.Cache=Gi;var Da=mr((function(t,e){var i=(e=1==e.length&&Ga(e[0])?Ae(e[0],Ve(ao())):Ae(yn(e,1),Ve(ao()))).length;return Kn((function(n){for(var r=-1,o=vi(n.length,i);++r<o;)n[r]=e[r].call(this,n[r]);return ve(t,this,n)}))})),za=Kn((function(t,e){var i=ei(e,oo(za));return Zr(t,u,r,e,i)})),Ba=Kn((function(t,e){var i=ei(e,oo(Ba));return Zr(t,64,r,e,i)})),Ha=to((function(t,e){return Zr(t,256,r,r,r,e)}));function Fa(t,e){return t===e||t!=t&&e!=e}var Ua=qr(An),Va=qr((function(t,e){return t>=e})),qa=Ln(function(){return arguments}())?Ln:function(t){return is(t)&&Pt.call(t,"callee")&&!te.call(t,"callee")},Ga=n.isArray,Wa=ce?Ve(ce):function(t){return is(t)&&En(t)==O};function Ya(t){return null!=t&&ts(t.length)&&!$a(t)}function Ka(t){return is(t)&&Ya(t)}var Za=fi||vu,Xa=fe?Ve(fe):function(t){return is(t)&&En(t)==m};function Ja(t){if(!is(t))return!1;var e=En(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!os(t)}function $a(t){if(!es(t))return!1;var e=En(t);return e==_||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qa(t){return"number"==typeof t&&t==gs(t)}function ts(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function es(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function is(t){return null!=t&&"object"==typeof t}var ns=pe?Ve(pe):function(t){return is(t)&&fo(t)==x};function rs(t){return"number"==typeof t||is(t)&&En(t)==M}function os(t){if(!is(t)||En(t)!=E)return!1;var e=Wt(t);if(null===e)return!0;var i=Pt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Ct.call(i)==Dt}var as=de?Ve(de):function(t){return is(t)&&En(t)==k},ss=ge?Ve(ge):function(t){return is(t)&&fo(t)==T};function us(t){return"string"==typeof t||!Ga(t)&&is(t)&&En(t)==S}function ls(t){return"symbol"==typeof t||is(t)&&En(t)==I}var hs=ye?Ve(ye):function(t){return is(t)&&ts(t.length)&&!!$t[En(t)]},cs=qr(Nn),fs=qr((function(t,e){return t<=e}));function ps(t){if(!t)return[];if(Ya(t))return us(t)?oi(t):Tr(t);if(ae&&t[ae])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[ae]());var e=fo(t);return(e==x?Qe:e==T?ii:Fs)(t)}function ds(t){return t?(t=vs(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function gs(t){var e=ds(t),i=e%1;return e==e?i?e-i:e:0}function ys(t){return t?an(gs(t),0,p):0}function vs(t){if("number"==typeof t)return t;if(ls(t))return f;if(es(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=es(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ue(t);var i=dt.test(t);return i||yt.test(t)?ie(t.slice(2),i?2:8):pt.test(t)?f:+t}function ms(t){return Sr(t,Ps(t))}function bs(t){return null==t?"":sr(t)}var _s=Lr((function(t,e){if(xo(e)||Ya(e))Sr(e,Cs(e),t);else for(var i in e)Pt.call(e,i)&&Qi(t,i,e[i])})),ws=Lr((function(t,e){Sr(e,Ps(e),t)})),xs=Lr((function(t,e,i,n){Sr(e,Ps(e),t,n)})),Ms=Lr((function(t,e,i,n){Sr(e,Cs(e),t,n)})),Es=to(on),As=Kn((function(t,e){t=Et(t);var i=-1,n=e.length,o=n>2?e[2]:r;for(o&&mo(e[0],e[1],o)&&(n=1);++i<n;)for(var a=e[i],s=Ps(a),u=-1,l=s.length;++u<l;){var h=s[u],c=t[h];(c===r||Fa(c,Lt[h])&&!Pt.call(t,h))&&(t[h]=a[h])}return t})),ks=Kn((function(t){return t.push(r,Jr),ve(js,r,t)}));function Ts(t,e,i){var n=null==t?r:xn(t,e);return n===r?i:n}function Ss(t,e){return null!=t&&po(t,e,Tn)}var Is=Br((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),t[e]=i}),eu(ru)),Ls=Br((function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Nt.call(e)),Pt.call(t,e)?t[e].push(i):t[e]=[i]}),ao),Os=Kn(In);function Cs(t){return Ya(t)?Ki(t):jn(t)}function Ps(t){return Ya(t)?Ki(t,!0):function(t){if(!es(t))return function(t){var e=[];if(null!=t)for(var i in Et(t))e.push(i);return e}(t);var e=xo(t),i=[];for(var n in t)("constructor"!=n||!e&&Pt.call(t,n))&&i.push(n);return i}(t)}var Rs=Lr((function(t,e,i){Hn(t,e,i)})),js=Lr((function(t,e,i,n){Hn(t,e,i,n)})),Ns=to((function(t,e){var i={};if(null==t)return i;var n=!1;e=Ae(e,(function(e){return e=vr(e,t),n||(n=e.length>1),e})),Sr(t,io(t),i),n&&(i=sn(i,7,$r));for(var r=e.length;r--;)lr(i,e[r]);return i})),Ds=to((function(t,e){return null==t?{}:function(t,e){return Vn(t,e,(function(e,i){return Ss(t,i)}))}(t,e)}));function zs(t,e){if(null==t)return{};var i=Ae(io(t),(function(t){return[t]}));return e=ao(e),Vn(t,i,(function(t,i){return e(t,i[0])}))}var Bs=Kr(Cs),Hs=Kr(Ps);function Fs(t){return null==t?[]:qe(t,Cs(t))}var Us=Rr((function(t,e,i){return e=e.toLowerCase(),t+(i?Vs(e):e)}));function Vs(t){return Js(bs(t).toLowerCase())}function qs(t){return(t=bs(t))&&t.replace(mt,Ze).replace(Gt,"")}var Gs=Rr((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),Ws=Rr((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),Ys=Pr("toLowerCase"),Ks=Rr((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),Zs=Rr((function(t,e,i){return t+(i?" ":"")+Js(e)})),Xs=Rr((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),Js=Pr("toUpperCase");function $s(t,e,i){return t=bs(t),(e=i?r:e)===r?function(t){return Zt.test(t)}(t)?function(t){return t.match(Yt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var Qs=Kn((function(t,e){try{return ve(t,r,e)}catch(t){return Ja(t)?t:new wt(t)}})),tu=to((function(t,e){return be(e,(function(e){e=zo(e),rn(t,e,La(t[e],t))})),t}));function eu(t){return function(){return t}}var iu=Dr(),nu=Dr(!0);function ru(t){return t}function ou(t){return Rn("function"==typeof t?t:sn(t,1))}var au=Kn((function(t,e){return function(i){return In(i,t,e)}})),su=Kn((function(t,e){return function(i){return In(t,i,e)}}));function uu(t,e,i){var n=Cs(e),r=wn(e,n);null!=i||es(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=wn(e,Cs(e)));var o=!(es(i)&&"chain"in i&&!i.chain),a=$a(t);return be(r,(function(i){var n=e[i];t[i]=n,a&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__),r=i.__actions__=Tr(this.__actions__);return r.push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,ke([this.value()],arguments))})})),t}function lu(){}var hu=Fr(Ae),cu=Fr(we),fu=Fr(Ie);function pu(t){return bo(t)?De(zo(t)):function(t){return function(e){return xn(e,t)}}(t)}var du=Vr(),gu=Vr(!0);function yu(){return[]}function vu(){return!1}var mu,bu=Hr((function(t,e){return t+e}),0),_u=Wr("ceil"),wu=Hr((function(t,e){return t/e}),1),xu=Wr("floor"),Mu=Hr((function(t,e){return t*e}),1),Eu=Wr("round"),Au=Hr((function(t,e){return t-e}),0);return zi.after=function(t,e){if("function"!=typeof e)throw new Tt(o);return t=gs(t),function(){if(--t<1)return e.apply(this,arguments)}},zi.ary=Sa,zi.assign=_s,zi.assignIn=ws,zi.assignInWith=xs,zi.assignWith=Ms,zi.at=Es,zi.before=Ia,zi.bind=La,zi.bindAll=tu,zi.bindKey=Oa,zi.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ga(t)?t:[t]},zi.chain=pa,zi.chunk=function(t,e,i){e=(i?mo(t,e,i):e===r)?1:yi(gs(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=n(li(o/e));a<o;)u[s++]=er(t,a,a+=e);return u},zi.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,r=[];++e<i;){var o=t[e];o&&(r[n++]=o)}return r},zi.concat=function(){var t=arguments.length;if(!t)return[];for(var e=n(t-1),i=arguments[0],r=t;r--;)e[r-1]=arguments[r];return ke(Ga(i)?Tr(i):[i],yn(e,1))},zi.cond=function(t){var e=null==t?0:t.length,i=ao();return t=e?Ae(t,(function(t){if("function"!=typeof t[1])throw new Tt(o);return[i(t[0]),t[1]]})):[],Kn((function(i){for(var n=-1;++n<e;){var r=t[n];if(ve(r[0],this,i))return ve(r[1],this,i)}}))},zi.conforms=function(t){return function(t){var e=Cs(t);return function(i){return un(i,t,e)}}(sn(t,1))},zi.constant=eu,zi.countBy=ya,zi.create=function(t,e){var i=Bi(t);return null==e?i:nn(i,e)},zi.curry=function t(e,i,n){var o=Zr(e,8,r,r,r,r,r,i=n?r:i);return o.placeholder=t.placeholder,o},zi.curryRight=function t(e,i,n){var o=Zr(e,16,r,r,r,r,r,i=n?r:i);return o.placeholder=t.placeholder,o},zi.debounce=Ca,zi.defaults=As,zi.defaultsDeep=ks,zi.defer=Pa,zi.delay=Ra,zi.difference=Fo,zi.differenceBy=Uo,zi.differenceWith=Vo,zi.drop=function(t,e,i){var n=null==t?0:t.length;return n?er(t,(e=i||e===r?1:gs(e))<0?0:e,n):[]},zi.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?er(t,0,(e=n-(e=i||e===r?1:gs(e)))<0?0:e):[]},zi.dropRightWhile=function(t,e){return t&&t.length?cr(t,ao(e,3),!0,!0):[]},zi.dropWhile=function(t,e){return t&&t.length?cr(t,ao(e,3),!0):[]},zi.fill=function(t,e,i,n){var o=null==t?0:t.length;return o?(i&&"number"!=typeof i&&mo(t,e,i)&&(i=0,n=o),function(t,e,i,n){var o=t.length;for((i=gs(i))<0&&(i=-i>o?0:o+i),(n=n===r||n>o?o:gs(n))<0&&(n+=o),n=i>n?0:ys(n);i<n;)t[i++]=e;return t}(t,e,i,n)):[]},zi.filter=function(t,e){return(Ga(t)?xe:gn)(t,ao(e,3))},zi.flatMap=function(t,e){return yn(Ea(t,e),1)},zi.flatMapDeep=function(t,e){return yn(Ea(t,e),h)},zi.flatMapDepth=function(t,e,i){return i=i===r?1:gs(i),yn(Ea(t,e),i)},zi.flatten=Wo,zi.flattenDeep=function(t){return null!=t&&t.length?yn(t,h):[]},zi.flattenDepth=function(t,e){return null!=t&&t.length?yn(t,e=e===r?1:gs(e)):[]},zi.flip=function(t){return Zr(t,512)},zi.flow=iu,zi.flowRight=nu,zi.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var r=t[e];n[r[0]]=r[1]}return n},zi.functions=function(t){return null==t?[]:wn(t,Cs(t))},zi.functionsIn=function(t){return null==t?[]:wn(t,Ps(t))},zi.groupBy=wa,zi.initial=function(t){return null!=t&&t.length?er(t,0,-1):[]},zi.intersection=Ko,zi.intersectionBy=Zo,zi.intersectionWith=Xo,zi.invert=Is,zi.invertBy=Ls,zi.invokeMap=xa,zi.iteratee=ou,zi.keyBy=Ma,zi.keys=Cs,zi.keysIn=Ps,zi.map=Ea,zi.mapKeys=function(t,e){var i={};return e=ao(e,3),bn(t,(function(t,n,r){rn(i,e(t,n,r),t)})),i},zi.mapValues=function(t,e){var i={};return e=ao(e,3),bn(t,(function(t,n,r){rn(i,n,e(t,n,r))})),i},zi.matches=function(t){return zn(sn(t,1))},zi.matchesProperty=function(t,e){return Bn(t,sn(e,1))},zi.memoize=ja,zi.merge=Rs,zi.mergeWith=js,zi.method=au,zi.methodOf=su,zi.mixin=uu,zi.negate=Na,zi.nthArg=function(t){return t=gs(t),Kn((function(e){return Fn(e,t)}))},zi.omit=Ns,zi.omitBy=function(t,e){return zs(t,Na(ao(e)))},zi.once=function(t){return Ia(2,t)},zi.orderBy=function(t,e,i,n){return null==t?[]:(Ga(e)||(e=null==e?[]:[e]),Ga(i=n?r:i)||(i=null==i?[]:[i]),Un(t,e,i))},zi.over=hu,zi.overArgs=Da,zi.overEvery=cu,zi.overSome=fu,zi.partial=za,zi.partialRight=Ba,zi.partition=Aa,zi.pick=Ds,zi.pickBy=zs,zi.property=pu,zi.propertyOf=function(t){return function(e){return null==t?r:xn(t,e)}},zi.pull=$o,zi.pullAll=Qo,zi.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?qn(t,e,ao(i,2)):t},zi.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?qn(t,e,r,i):t},zi.pullAt=ta,zi.range=du,zi.rangeRight=gu,zi.rearg=Ha,zi.reject=function(t,e){return(Ga(t)?xe:gn)(t,Na(ao(e,3)))},zi.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,r=[],o=t.length;for(e=ao(e,3);++n<o;){var a=t[n];e(a,n,t)&&(i.push(a),r.push(n))}return Gn(t,r),i},zi.rest=function(t,e){if("function"!=typeof t)throw new Tt(o);return Kn(t,e=e===r?e:gs(e))},zi.reverse=ea,zi.sampleSize=function(t,e,i){return e=(i?mo(t,e,i):e===r)?1:gs(e),(Ga(t)?Xi:Xn)(t,e)},zi.set=function(t,e,i){return null==t?t:Jn(t,e,i)},zi.setWith=function(t,e,i,n){return n="function"==typeof n?n:r,null==t?t:Jn(t,e,i,n)},zi.shuffle=function(t){return(Ga(t)?Ji:tr)(t)},zi.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&mo(t,e,i)?(e=0,i=n):(e=null==e?0:gs(e),i=i===r?n:gs(i)),er(t,e,i)):[]},zi.sortBy=ka,zi.sortedUniq=function(t){return t&&t.length?or(t):[]},zi.sortedUniqBy=function(t,e){return t&&t.length?or(t,ao(e,2)):[]},zi.split=function(t,e,i){return i&&"number"!=typeof i&&mo(t,e,i)&&(e=i=r),(i=i===r?p:i>>>0)?(t=bs(t))&&("string"==typeof e||null!=e&&!as(e))&&!(e=sr(e))&&$e(t)?br(oi(t),0,i):t.split(e,i):[]},zi.spread=function(t,e){if("function"!=typeof t)throw new Tt(o);return e=null==e?0:yi(gs(e),0),Kn((function(i){var n=i[e],r=br(i,0,e);return n&&ke(r,n),ve(t,this,r)}))},zi.tail=function(t){var e=null==t?0:t.length;return e?er(t,1,e):[]},zi.take=function(t,e,i){return t&&t.length?er(t,0,(e=i||e===r?1:gs(e))<0?0:e):[]},zi.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?er(t,(e=n-(e=i||e===r?1:gs(e)))<0?0:e,n):[]},zi.takeRightWhile=function(t,e){return t&&t.length?cr(t,ao(e,3),!1,!0):[]},zi.takeWhile=function(t,e){return t&&t.length?cr(t,ao(e,3)):[]},zi.tap=function(t,e){return e(t),t},zi.throttle=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Tt(o);return es(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Ca(t,e,{leading:n,maxWait:e,trailing:r})},zi.thru=da,zi.toArray=ps,zi.toPairs=Bs,zi.toPairsIn=Hs,zi.toPath=function(t){return Ga(t)?Ae(t,zo):ls(t)?[t]:Tr(Do(bs(t)))},zi.toPlainObject=ms,zi.transform=function(t,e,i){var n=Ga(t),r=n||Za(t)||hs(t);if(e=ao(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:es(t)&&$a(o)?Bi(Wt(t)):{}}return(r?be:bn)(t,(function(t,n,r){return e(i,t,n,r)})),i},zi.unary=function(t){return Sa(t,1)},zi.union=ia,zi.unionBy=na,zi.unionWith=ra,zi.uniq=function(t){return t&&t.length?ur(t):[]},zi.uniqBy=function(t,e){return t&&t.length?ur(t,ao(e,2)):[]},zi.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?ur(t,r,e):[]},zi.unset=function(t,e){return null==t||lr(t,e)},zi.unzip=oa,zi.unzipWith=aa,zi.update=function(t,e,i){return null==t?t:hr(t,e,yr(i))},zi.updateWith=function(t,e,i,n){return n="function"==typeof n?n:r,null==t?t:hr(t,e,yr(i),n)},zi.values=Fs,zi.valuesIn=function(t){return null==t?[]:qe(t,Ps(t))},zi.without=sa,zi.words=$s,zi.wrap=function(t,e){return za(yr(e),t)},zi.xor=ua,zi.xorBy=la,zi.xorWith=ha,zi.zip=ca,zi.zipObject=function(t,e){return dr(t||[],e||[],Qi)},zi.zipObjectDeep=function(t,e){return dr(t||[],e||[],Jn)},zi.zipWith=fa,zi.entries=Bs,zi.entriesIn=Hs,zi.extend=ws,zi.extendWith=xs,uu(zi,zi),zi.add=bu,zi.attempt=Qs,zi.camelCase=Us,zi.capitalize=Vs,zi.ceil=_u,zi.clamp=function(t,e,i){return i===r&&(i=e,e=r),i!==r&&(i=(i=vs(i))==i?i:0),e!==r&&(e=(e=vs(e))==e?e:0),an(vs(t),e,i)},zi.clone=function(t){return sn(t,4)},zi.cloneDeep=function(t){return sn(t,5)},zi.cloneDeepWith=function(t,e){return sn(t,5,e="function"==typeof e?e:r)},zi.cloneWith=function(t,e){return sn(t,4,e="function"==typeof e?e:r)},zi.conformsTo=function(t,e){return null==e||un(t,e,Cs(e))},zi.deburr=qs,zi.defaultTo=function(t,e){return null==t||t!=t?e:t},zi.divide=wu,zi.endsWith=function(t,e,i){t=bs(t),e=sr(e);var n=t.length,o=i=i===r?n:an(gs(i),0,n);return(i-=e.length)>=0&&t.slice(i,o)==e},zi.eq=Fa,zi.escape=function(t){return(t=bs(t))&&K.test(t)?t.replace(W,Xe):t},zi.escapeRegExp=function(t){return(t=bs(t))&&it.test(t)?t.replace(et,"\\$&"):t},zi.every=function(t,e,i){var n=Ga(t)?we:pn;return i&&mo(t,e,i)&&(e=r),n(t,ao(e,3))},zi.find=va,zi.findIndex=qo,zi.findKey=function(t,e){return Oe(t,ao(e,3),bn)},zi.findLast=ma,zi.findLastIndex=Go,zi.findLastKey=function(t,e){return Oe(t,ao(e,3),_n)},zi.floor=xu,zi.forEach=ba,zi.forEachRight=_a,zi.forIn=function(t,e){return null==t?t:vn(t,ao(e,3),Ps)},zi.forInRight=function(t,e){return null==t?t:mn(t,ao(e,3),Ps)},zi.forOwn=function(t,e){return t&&bn(t,ao(e,3))},zi.forOwnRight=function(t,e){return t&&_n(t,ao(e,3))},zi.get=Ts,zi.gt=Ua,zi.gte=Va,zi.has=function(t,e){return null!=t&&po(t,e,kn)},zi.hasIn=Ss,zi.head=Yo,zi.identity=ru,zi.includes=function(t,e,i,n){t=Ya(t)?t:Fs(t),i=i&&!n?gs(i):0;var r=t.length;return i<0&&(i=yi(r+i,0)),us(t)?i<=r&&t.indexOf(e,i)>-1:!!r&&Pe(t,e,i)>-1},zi.indexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var r=null==i?0:gs(i);return r<0&&(r=yi(n+r,0)),Pe(t,e,r)},zi.inRange=function(t,e,i){return e=ds(e),i===r?(i=e,e=0):i=ds(i),function(t,e,i){return t>=vi(e,i)&&t<yi(e,i)}(t=vs(t),e,i)},zi.invoke=Os,zi.isArguments=qa,zi.isArray=Ga,zi.isArrayBuffer=Wa,zi.isArrayLike=Ya,zi.isArrayLikeObject=Ka,zi.isBoolean=function(t){return!0===t||!1===t||is(t)&&En(t)==v},zi.isBuffer=Za,zi.isDate=Xa,zi.isElement=function(t){return is(t)&&1===t.nodeType&&!os(t)},zi.isEmpty=function(t){if(null==t)return!0;if(Ya(t)&&(Ga(t)||"string"==typeof t||"function"==typeof t.splice||Za(t)||hs(t)||qa(t)))return!t.length;var e=fo(t);if(e==x||e==T)return!t.size;if(xo(t))return!jn(t).length;for(var i in t)if(Pt.call(t,i))return!1;return!0},zi.isEqual=function(t,e){return On(t,e)},zi.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:r)?i(t,e):r;return n===r?On(t,e,r,i):!!n},zi.isError=Ja,zi.isFinite=function(t){return"number"==typeof t&&pi(t)},zi.isFunction=$a,zi.isInteger=Qa,zi.isLength=ts,zi.isMap=ns,zi.isMatch=function(t,e){return t===e||Cn(t,e,uo(e))},zi.isMatchWith=function(t,e,i){return i="function"==typeof i?i:r,Cn(t,e,uo(e),i)},zi.isNaN=function(t){return rs(t)&&t!=+t},zi.isNative=function(t){if(wo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pn(t)},zi.isNil=function(t){return null==t},zi.isNull=function(t){return null===t},zi.isNumber=rs,zi.isObject=es,zi.isObjectLike=is,zi.isPlainObject=os,zi.isRegExp=as,zi.isSafeInteger=function(t){return Qa(t)&&t>=-9007199254740991&&t<=c},zi.isSet=ss,zi.isString=us,zi.isSymbol=ls,zi.isTypedArray=hs,zi.isUndefined=function(t){return t===r},zi.isWeakMap=function(t){return is(t)&&fo(t)==L},zi.isWeakSet=function(t){return is(t)&&"[object WeakSet]"==En(t)},zi.join=function(t,e){return null==t?"":di.call(t,e)},zi.kebabCase=Gs,zi.last=Jo,zi.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var o=n;return i!==r&&(o=(o=gs(i))<0?yi(n+o,0):vi(o,n-1)),e==e?function(t,e,i){for(var n=i+1;n--;)if(t[n]===e)return n;return n}(t,e,o):Ce(t,je,o,!0)},zi.lowerCase=Ws,zi.lowerFirst=Ys,zi.lt=cs,zi.lte=fs,zi.max=function(t){return t&&t.length?dn(t,ru,An):r},zi.maxBy=function(t,e){return t&&t.length?dn(t,ao(e,2),An):r},zi.mean=function(t){return Ne(t,ru)},zi.meanBy=function(t,e){return Ne(t,ao(e,2))},zi.min=function(t){return t&&t.length?dn(t,ru,Nn):r},zi.minBy=function(t,e){return t&&t.length?dn(t,ao(e,2),Nn):r},zi.stubArray=yu,zi.stubFalse=vu,zi.stubObject=function(){return{}},zi.stubString=function(){return""},zi.stubTrue=function(){return!0},zi.multiply=Mu,zi.nth=function(t,e){return t&&t.length?Fn(t,gs(e)):r},zi.noConflict=function(){return oe._===this&&(oe._=zt),this},zi.noop=lu,zi.now=Ta,zi.pad=function(t,e,i){t=bs(t);var n=(e=gs(e))?ri(t):0;if(!e||n>=e)return t;var r=(e-n)/2;return Ur(hi(r),i)+t+Ur(li(r),i)},zi.padEnd=function(t,e,i){t=bs(t);var n=(e=gs(e))?ri(t):0;return e&&n<e?t+Ur(e-n,i):t},zi.padStart=function(t,e,i){t=bs(t);var n=(e=gs(e))?ri(t):0;return e&&n<e?Ur(e-n,i)+t:t},zi.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),bi(bs(t).replace(nt,""),e||0)},zi.random=function(t,e,i){if(i&&"boolean"!=typeof i&&mo(t,e,i)&&(e=i=r),i===r&&("boolean"==typeof e?(i=e,e=r):"boolean"==typeof t&&(i=t,t=r)),t===r&&e===r?(t=0,e=1):(t=ds(t),e===r?(e=t,t=0):e=ds(e)),t>e){var n=t;t=e,e=n}if(i||t%1||e%1){var o=_i();return vi(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Wn(t,e)},zi.reduce=function(t,e,i){var n=Ga(t)?Te:Be,r=arguments.length<3;return n(t,ao(e,4),i,r,cn)},zi.reduceRight=function(t,e,i){var n=Ga(t)?Se:Be,r=arguments.length<3;return n(t,ao(e,4),i,r,fn)},zi.repeat=function(t,e,i){return e=(i?mo(t,e,i):e===r)?1:gs(e),Yn(bs(t),e)},zi.replace=function(){var t=arguments,e=bs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},zi.result=function(t,e,i){var n=-1,o=(e=vr(e,t)).length;for(o||(o=1,t=r);++n<o;){var a=null==t?r:t[zo(e[n])];a===r&&(n=o,a=i),t=$a(a)?a.call(t):a}return t},zi.round=Eu,zi.runInContext=t,zi.sample=function(t){return(Ga(t)?Zi:Zn)(t)},zi.size=function(t){if(null==t)return 0;if(Ya(t))return us(t)?ri(t):t.length;var e=fo(t);return e==x||e==T?t.size:jn(t).length},zi.snakeCase=Ks,zi.some=function(t,e,i){var n=Ga(t)?Ie:ir;return i&&mo(t,e,i)&&(e=r),n(t,ao(e,3))},zi.sortedIndex=function(t,e){return nr(t,e)},zi.sortedIndexBy=function(t,e,i){return rr(t,e,ao(i,2))},zi.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=nr(t,e);if(n<i&&Fa(t[n],e))return n}return-1},zi.sortedLastIndex=function(t,e){return nr(t,e,!0)},zi.sortedLastIndexBy=function(t,e,i){return rr(t,e,ao(i,2),!0)},zi.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=nr(t,e,!0)-1;if(Fa(t[i],e))return i}return-1},zi.startCase=Zs,zi.startsWith=function(t,e,i){return t=bs(t),i=null==i?0:an(gs(i),0,t.length),e=sr(e),t.slice(i,i+e.length)==e},zi.subtract=Au,zi.sum=function(t){return t&&t.length?He(t,ru):0},zi.sumBy=function(t,e){return t&&t.length?He(t,ao(e,2)):0},zi.template=function(t,e,i){var n=zi.templateSettings;i&&mo(t,e,i)&&(e=r),t=bs(t),e=xs({},e,n,Xr);var o,a,s=xs({},e.imports,n.imports,Xr),u=Cs(s),l=qe(s,u),h=0,c=e.interpolate||bt,f="__p += '",p=At((e.escape||bt).source+"|"+c.source+"|"+(c===J?ct:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jt+"]")+"\n";t.replace(p,(function(e,i,n,r,s,u){return n||(n=r),f+=t.slice(h,u).replace(_t,Je),i&&(o=!0,f+="' +\n__e("+i+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),n&&(f+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=u+e.length,e})),f+="';\n";var g=Pt.call(e,"variable")&&e.variable;if(g){if(lt.test(g))throw new wt("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(U,""):f).replace(V,"$1").replace(q,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var y=Qs((function(){return xt(u,d+"return "+f).apply(r,l)}));if(y.source=f,Ja(y))throw y;return y},zi.times=function(t,e){if((t=gs(t))<1||t>c)return[];var i=p,n=vi(t,p);e=ao(e),t-=p;for(var r=Fe(n,e);++i<t;)e(i);return r},zi.toFinite=ds,zi.toInteger=gs,zi.toLength=ys,zi.toLower=function(t){return bs(t).toLowerCase()},zi.toNumber=vs,zi.toSafeInteger=function(t){return t?an(gs(t),-9007199254740991,c):0===t?t:0},zi.toString=bs,zi.toUpper=function(t){return bs(t).toUpperCase()},zi.trim=function(t,e,i){if((t=bs(t))&&(i||e===r))return Ue(t);if(!t||!(e=sr(e)))return t;var n=oi(t),o=oi(e);return br(n,We(n,o),Ye(n,o)+1).join("")},zi.trimEnd=function(t,e,i){if((t=bs(t))&&(i||e===r))return t.slice(0,ai(t)+1);if(!t||!(e=sr(e)))return t;var n=oi(t);return br(n,0,Ye(n,oi(e))+1).join("")},zi.trimStart=function(t,e,i){if((t=bs(t))&&(i||e===r))return t.replace(nt,"");if(!t||!(e=sr(e)))return t;var n=oi(t);return br(n,We(n,oi(e))).join("")},zi.truncate=function(t,e){var i=30,n="...";if(es(e)){var o="separator"in e?e.separator:o;i="length"in e?gs(e.length):i,n="omission"in e?sr(e.omission):n}var a=(t=bs(t)).length;if($e(t)){var s=oi(t);a=s.length}if(i>=a)return t;var u=i-ri(n);if(u<1)return n;var l=s?br(s,0,u).join(""):t.slice(0,u);if(o===r)return l+n;if(s&&(u+=l.length-u),as(o)){if(t.slice(u).search(o)){var h,c=l;for(o.global||(o=At(o.source,bs(ft.exec(o))+"g")),o.lastIndex=0;h=o.exec(c);)var f=h.index;l=l.slice(0,f===r?u:f)}}else if(t.indexOf(sr(o),u)!=u){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+n},zi.unescape=function(t){return(t=bs(t))&&Y.test(t)?t.replace(G,si):t},zi.uniqueId=function(t){var e=++Rt;return bs(t)+e},zi.upperCase=Xs,zi.upperFirst=Js,zi.each=ba,zi.eachRight=_a,zi.first=Yo,uu(zi,(mu={},bn(zi,(function(t,e){Pt.call(zi.prototype,e)||(mu[e]=t)})),mu),{chain:!1}),zi.VERSION="4.17.21",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){zi[t].placeholder=zi})),be(["drop","take"],(function(t,e){Ui.prototype[t]=function(i){i=i===r?1:yi(gs(i),0);var n=this.__filtered__&&!e?new Ui(this):this.clone();return n.__filtered__?n.__takeCount__=vi(i,n.__takeCount__):n.__views__.push({size:vi(i,p),type:t+(n.__dir__<0?"Right":"")}),n},Ui.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;Ui.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ao(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),be(["head","last"],(function(t,e){var i="take"+(e?"Right":"");Ui.prototype[t]=function(){return this[i](1).value()[0]}})),be(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");Ui.prototype[t]=function(){return this.__filtered__?new Ui(this):this[i](1)}})),Ui.prototype.compact=function(){return this.filter(ru)},Ui.prototype.find=function(t){return this.filter(t).head()},Ui.prototype.findLast=function(t){return this.reverse().find(t)},Ui.prototype.invokeMap=Kn((function(t,e){return"function"==typeof t?new Ui(this):this.map((function(i){return In(i,t,e)}))})),Ui.prototype.reject=function(t){return this.filter(Na(ao(t)))},Ui.prototype.slice=function(t,e){t=gs(t);var i=this;return i.__filtered__&&(t>0||e<0)?new Ui(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==r&&(i=(e=gs(e))<0?i.dropRight(-e):i.take(e-t)),i)},Ui.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ui.prototype.toArray=function(){return this.take(p)},bn(Ui.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),o=zi[n?"take"+("last"==e?"Right":""):e],a=n||/^find/.test(e);o&&(zi.prototype[e]=function(){var e=this.__wrapped__,s=n?[1]:arguments,u=e instanceof Ui,l=s[0],h=u||Ga(e),c=function(t){var e=o.apply(zi,ke([t],s));return n&&f?e[0]:e};h&&i&&"function"==typeof l&&1!=l.length&&(u=h=!1);var f=this.__chain__,p=!!this.__actions__.length,d=a&&!f,g=u&&!p;if(!a&&h){e=g?e:new Ui(this);var y=t.apply(e,s);return y.__actions__.push({func:da,args:[c],thisArg:r}),new Fi(y,f)}return d&&g?t.apply(this,s):(y=this.thru(c),d?n?y.value()[0]:y.value():y)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=St[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);zi.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var r=this.value();return e.apply(Ga(r)?r:[],t)}return this[i]((function(i){return e.apply(Ga(i)?i:[],t)}))}})),bn(Ui.prototype,(function(t,e){var i=zi[e];if(i){var n=i.name+"";Pt.call(Ii,n)||(Ii[n]=[]),Ii[n].push({name:e,func:i})}})),Ii[zr(r,2).name]=[{name:"wrapper",func:r}],Ui.prototype.clone=function(){var t=new Ui(this.__wrapped__);return t.__actions__=Tr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Tr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Tr(this.__views__),t},Ui.prototype.reverse=function(){if(this.__filtered__){var t=new Ui(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ui.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Ga(t),n=e<0,r=i?t.length:0,o=function(t,e,i){for(var n=-1,r=i.length;++n<r;){var o=i[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=vi(e,t+a);break;case"takeRight":t=yi(t,e-a)}}return{start:t,end:e}}(0,r,this.__views__),a=o.start,s=o.end,u=s-a,l=n?s:a-1,h=this.__iteratees__,c=h.length,f=0,p=vi(u,this.__takeCount__);if(!i||!n&&r==u&&p==u)return fr(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var g=-1,y=t[l+=e];++g<c;){var v=h[g],m=v.iteratee,b=v.type,_=m(y);if(2==b)y=_;else if(!_){if(1==b)continue t;break t}}d[f++]=y}return d},zi.prototype.at=ga,zi.prototype.chain=function(){return pa(this)},zi.prototype.commit=function(){return new Fi(this.value(),this.__chain__)},zi.prototype.next=function(){this.__values__===r&&(this.__values__=ps(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},zi.prototype.plant=function(t){for(var e,i=this;i instanceof Hi;){var n=Ho(i);n.__index__=0,n.__values__=r,e?o.__wrapped__=n:e=n;var o=n;i=i.__wrapped__}return o.__wrapped__=t,e},zi.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Ui){var e=t;return this.__actions__.length&&(e=new Ui(this)),(e=e.reverse()).__actions__.push({func:da,args:[ea],thisArg:r}),new Fi(e,this.__chain__)}return this.thru(ea)},zi.prototype.toJSON=zi.prototype.valueOf=zi.prototype.value=function(){return fr(this.__wrapped__,this.__actions__)},zi.prototype.first=zi.prototype.head,ae&&(zi.prototype[ae]=function(){return this}),zi}();oe._=ui,(n=function(){return ui}.call(e,i,e,t))===r||(t.exports=n)}.call(this)},2318:(t,e,i)=>{"use strict";var n=i(5717),r=i(3349),o=i(9509).Buffer,a=new Array(16);function s(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function l(t,e,i,n,r,o,a){return u(t+(e&i|~e&n)+r+o|0,a)+e|0}function h(t,e,i,n,r,o,a){return u(t+(e&n|i&~n)+r+o|0,a)+e|0}function c(t,e,i,n,r,o,a){return u(t+(e^i^n)+r+o|0,a)+e|0}function f(t,e,i,n,r,o,a){return u(t+(i^(e|~n))+r+o|0,a)+e|0}n(s,r),s.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,n=this._b,r=this._c,o=this._d;i=l(i,n,r,o,t[0],3614090360,7),o=l(o,i,n,r,t[1],3905402710,12),r=l(r,o,i,n,t[2],606105819,17),n=l(n,r,o,i,t[3],3250441966,22),i=l(i,n,r,o,t[4],4118548399,7),o=l(o,i,n,r,t[5],1200080426,12),r=l(r,o,i,n,t[6],2821735955,17),n=l(n,r,o,i,t[7],4249261313,22),i=l(i,n,r,o,t[8],1770035416,7),o=l(o,i,n,r,t[9],2336552879,12),r=l(r,o,i,n,t[10],4294925233,17),n=l(n,r,o,i,t[11],2304563134,22),i=l(i,n,r,o,t[12],1804603682,7),o=l(o,i,n,r,t[13],4254626195,12),r=l(r,o,i,n,t[14],2792965006,17),i=h(i,n=l(n,r,o,i,t[15],1236535329,22),r,o,t[1],4129170786,5),o=h(o,i,n,r,t[6],3225465664,9),r=h(r,o,i,n,t[11],643717713,14),n=h(n,r,o,i,t[0],3921069994,20),i=h(i,n,r,o,t[5],3593408605,5),o=h(o,i,n,r,t[10],38016083,9),r=h(r,o,i,n,t[15],3634488961,14),n=h(n,r,o,i,t[4],3889429448,20),i=h(i,n,r,o,t[9],568446438,5),o=h(o,i,n,r,t[14],3275163606,9),r=h(r,o,i,n,t[3],4107603335,14),n=h(n,r,o,i,t[8],1163531501,20),i=h(i,n,r,o,t[13],2850285829,5),o=h(o,i,n,r,t[2],4243563512,9),r=h(r,o,i,n,t[7],1735328473,14),i=c(i,n=h(n,r,o,i,t[12],2368359562,20),r,o,t[5],4294588738,4),o=c(o,i,n,r,t[8],2272392833,11),r=c(r,o,i,n,t[11],1839030562,16),n=c(n,r,o,i,t[14],4259657740,23),i=c(i,n,r,o,t[1],2763975236,4),o=c(o,i,n,r,t[4],1272893353,11),r=c(r,o,i,n,t[7],4139469664,16),n=c(n,r,o,i,t[10],3200236656,23),i=c(i,n,r,o,t[13],681279174,4),o=c(o,i,n,r,t[0],3936430074,11),r=c(r,o,i,n,t[3],3572445317,16),n=c(n,r,o,i,t[6],76029189,23),i=c(i,n,r,o,t[9],3654602809,4),o=c(o,i,n,r,t[12],3873151461,11),r=c(r,o,i,n,t[15],530742520,16),i=f(i,n=c(n,r,o,i,t[2],3299628645,23),r,o,t[0],4096336452,6),o=f(o,i,n,r,t[7],1126891415,10),r=f(r,o,i,n,t[14],2878612391,15),n=f(n,r,o,i,t[5],4237533241,21),i=f(i,n,r,o,t[12],1700485571,6),o=f(o,i,n,r,t[3],2399980690,10),r=f(r,o,i,n,t[10],4293915773,15),n=f(n,r,o,i,t[1],2240044497,21),i=f(i,n,r,o,t[8],1873313359,6),o=f(o,i,n,r,t[15],4264355552,10),r=f(r,o,i,n,t[6],2734768916,15),n=f(n,r,o,i,t[13],1309151649,21),i=f(i,n,r,o,t[4],4149444226,6),o=f(o,i,n,r,t[11],3174756917,10),r=f(r,o,i,n,t[2],718787259,15),n=f(n,r,o,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+n|0,this._c=this._c+r|0,this._d=this._d+o|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=o.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},3047:(t,e,i)=>{var n=i(3550),r=i(9931);function o(t){this.rand=t||new r.Rand}t.exports=o,o.create=function(t){return new o(t)},o.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var r=new n(this.rand.generate(i))}while(r.cmp(t)>=0);return r},o.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},o.prototype.test=function(t,e,i){var r=t.bitLength(),o=n.mont(t),a=new n(1).toRed(o);e||(e=Math.max(1,r/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),h=s.toRed(o);e>0;e--){var c=this._randrange(new n(2),s);i&&i(c);var f=c.toRed(o).redPow(l);if(0!==f.cmp(a)&&0!==f.cmp(h)){for(var p=1;p<u;p++){if(0===(f=f.redSqr()).cmp(a))return!1;if(0===f.cmp(h))break}if(p===u)return!1}}return!0},o.prototype.getDivisor=function(t,e){var i=t.bitLength(),r=n.mont(t),o=new n(1).toRed(r);e||(e=Math.max(1,i/48|0));for(var a=t.subn(1),s=0;!a.testn(s);s++);for(var u=t.shrn(s),l=a.toRed(r);e>0;e--){var h=this._randrange(new n(2),a),c=t.gcd(h);if(0!==c.cmpn(1))return c;var f=h.toRed(r).redPow(u);if(0!==f.cmp(o)&&0!==f.cmp(l)){for(var p=1;p<s;p++){if(0===(f=f.redSqr()).cmp(o))return f.fromRed().subn(1).gcd(t);if(0===f.cmp(l))break}if(p===s)return(f=f.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},9746:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},4504:(t,e)=>{"use strict";var i=e;function n(t){return 1===t.length?"0"+t:t}function r(t){for(var e="",i=0;i<t.length;i++)e+=n(t[i].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var n=0;n<t.length;n++)i[n]=0|t[n];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16));else for(n=0;n<t.length;n++){var r=t.charCodeAt(n),o=r>>8,a=255&r;o?i.push(o,a):i.push(a)}return i},i.zero2=n,i.toHex=r,i.encode=function(t,e){return"hex"===e?r(t):t}},2818:(t,e,i)=>{"use strict";var n=i(9809);e.certificate=i(1934);var r=n.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));e.RSAPrivateKey=r;var o=n.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));e.RSAPublicKey=o;var a=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())}));e.PublicKey=a;var s=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),u=n.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())}));e.PrivateKey=u;var l=n.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));e.EncryptedPrivateKey=l;var h=n.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));e.DSAPrivateKey=h,e.DSAparam=n.define("DSAparam",(function(){this.int()}));var c=n.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(f),this.key("publicKey").optional().explicit(1).bitstr())}));e.ECPrivateKey=c;var f=n.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));e.signature=n.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},1934:(t,e,i)=>{"use strict";var n=i(9809),r=n.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),o=n.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),a=n.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),s=n.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())})),u=n.define("RelativeDistinguishedName",(function(){this.setof(o)})),l=n.define("RDNSequence",(function(){this.seqof(u)})),h=n.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),c=n.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),f=n.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=n.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(h),this.key("validity").use(c),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(f).optional())})),d=n.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())}));t.exports=d},7631:(t,e,i)=>{var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=i(3048),s=i(4696),u=i(9509).Buffer;t.exports=function(t,e){var i,l=t.toString(),h=l.match(n);if(h){var c="aes"+h[1],f=u.from(h[2],"hex"),p=u.from(h[3].replace(/[\r\n]/g,""),"base64"),d=a(e,f.slice(0,8),parseInt(h[1],10)).key,g=[],y=s.createDecipheriv(c,d,f);g.push(y.update(p)),g.push(y.final()),i=u.concat(g)}else{var v=l.match(o);i=u.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(r)[1],data:i}}},980:(t,e,i)=>{var n=i(2818),r=i(2562),o=i(7631),a=i(4696),s=i(5632),u=i(9509).Buffer;function l(t){var e;"object"!=typeof t||u.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=u.from(t));var i,l,h=o(t,e),c=h.tag,f=h.data;switch(c){case"CERTIFICATE":l=n.certificate.decode(f,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=n.PublicKey.decode(f,"der")),i=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=n.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":f=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,n=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=r[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,h=t.subjectPrivateKey,c=parseInt(o.split("-")[1],10)/8,f=s.pbkdf2Sync(e,i,n,c,"sha1"),p=a.createDecipheriv(o,f,l),d=[];return d.push(p.update(h)),d.push(p.final()),u.concat(d)}(f=n.EncryptedPrivateKey.decode(f,"der"),e);case"PRIVATE KEY":switch(i=(l=n.PrivateKey.decode(f,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:n.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=n.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return{curve:(f=n.ECPrivateKey.decode(f,"der")).parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+c)}}t.exports=l,l.signature=n.signature},5632:(t,e,i)=>{e.pbkdf2=i(8638),e.pbkdf2Sync=i(1257)},8638:(t,e,i)=>{var n,r,o=i(9509).Buffer,a=i(7357),s=i(2368),u=i(1257),l=i(7777),h=global.crypto&&global.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function p(){return r||(r=global.process&&global.process.nextTick?global.process.nextTick:global.queueMicrotask?global.queueMicrotask:global.setImmediate?global.setImmediate:global.setTimeout)}function d(t,e,i,n,r){return h.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return h.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:r}},t,n<<3)})).then((function(t){return o.from(t)}))}t.exports=function(t,e,i,r,g,y){"function"==typeof g&&(y=g,g=void 0);var v=c[(g=g||"sha1").toLowerCase()];if(v&&"function"==typeof global.Promise){if(a(i,r),t=l(t,s,"Password"),e=l(e,s,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then((function(t){p()((function(){e(null,t)}))}),(function(t){p()((function(){e(t)}))}))}(function(t){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var e=d(n=n||o.alloc(8),n,10,128,t).then((function(){return!0})).catch((function(){return!1}));return f[t]=e,e}(v).then((function(n){return n?d(t,e,i,r,v):u(t,e,i,r,g)})),y)}else p()((function(){var n;try{n=u(t,e,i,r,g)}catch(t){return y(t)}y(null,n)}))}},2368:t=>{var e;e=global.process&&global.process.browser?"utf-8":global.process&&global.process.version?parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=e},7357:t=>{var e=Math.pow(2,30)-1;t.exports=function(t,i){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>e||i!=i)throw new TypeError("Bad key length")}},1257:(t,e,i)=>{var n=i(8028),r=i(9785),o=i(9072),a=i(9509).Buffer,s=i(7357),u=i(2368),l=i(7777),h=a.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,i){var s=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new r).update(t).digest()}:"md5"===t?n:function(e){return o(t).update(e).digest()}}(t),u="sha512"===t||"sha384"===t?128:64;e.length>u?e=s(e):e.length<u&&(e=a.concat([e,h],u));for(var l=a.allocUnsafe(u+c[t]),f=a.allocUnsafe(u+c[t]),p=0;p<u;p++)l[p]=54^e[p],f[p]=92^e[p];var d=a.allocUnsafe(u+i+4);l.copy(d,0,0,u),this.ipad1=d,this.ipad2=l,this.opad=f,this.alg=t,this.blocksize=u,this.hash=s,this.size=c[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,i,n,r){s(i,n);var o=new f(r=r||"sha1",t=l(t,u,"Password"),(e=l(e,u,"Salt")).length),h=a.allocUnsafe(n),p=a.allocUnsafe(e.length+4);e.copy(p,0,0,e.length);for(var d=0,g=c[r],y=Math.ceil(n/g),v=1;v<=y;v++){p.writeUInt32BE(v,e.length);for(var m=o.run(p,o.ipad1),b=m,_=1;_<i;_++){b=o.run(b,o.ipad2);for(var w=0;w<g;w++)m[w]^=b[w]}m.copy(h,d),d+=g}return h}},7777:(t,e,i)=>{var n=i(9509).Buffer;t.exports=function(t,e,i){if(n.isBuffer(t))return t;if("string"==typeof t)return n.from(t,e);if(ArrayBuffer.isView(t))return n.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")}},7900:(t,e,i)=>{e.publicEncrypt=i(6559),e.privateDecrypt=i(6138),e.privateEncrypt=function(t,i){return e.publicEncrypt(t,i,!0)},e.publicDecrypt=function(t,i){return e.privateDecrypt(t,i,!0)}},9199:(t,e,i)=>{var n=i(3482),r=i(9509).Buffer;function o(t){var e=r.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var i,a=r.alloc(0),s=0;a.length<e;)i=o(s++),a=r.concat([a,n("sha1").update(t).update(i).digest()]);return a.slice(0,e)}},6138:(t,e,i)=>{var n=i(980),r=i(9199),o=i(7859),a=i(3550),s=i(3663),u=i(3482),l=i(4818),h=i(9509).Buffer;t.exports=function(t,e,i){var c;c=t.padding?t.padding:i?1:4;var f,p=n(t),d=p.modulus.byteLength();if(e.length>d||new a(e).cmp(p.modulus)>=0)throw new Error("decryption error");f=i?l(new a(e),p):s(e,p);var g=h.alloc(d-f.length);if(f=h.concat([g,f],d),4===c)return function(t,e){var i=t.modulus.byteLength(),n=u("sha1").update(h.alloc(0)).digest(),a=n.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,a+1),l=e.slice(a+1),c=o(s,r(l,a)),f=o(l,r(c,i-a-1));if(function(t,e){t=h.from(t),e=h.from(e);var i=0,n=t.length;t.length!==e.length&&(i++,n=Math.min(t.length,e.length));for(var r=-1;++r<n;)i+=t[r]^e[r];return i}(n,f.slice(0,a)))throw new Error("decryption error");for(var p=a;0===f[p];)p++;if(1!==f[p++])throw new Error("decryption error");return f.slice(p)}(p,f);if(1===c)return function(t,e,i){for(var n=e.slice(0,2),r=2,o=0;0!==e[r++];)if(r>=e.length){o++;break}var a=e.slice(2,r-1);if(("0002"!==n.toString("hex")&&!i||"0001"!==n.toString("hex")&&i)&&o++,a.length<8&&o++,o)throw new Error("decryption error");return e.slice(r)}(0,f,i);if(3===c)return f;throw new Error("unknown padding")}},6559:(t,e,i)=>{var n=i(980),r=i(1798),o=i(3482),a=i(9199),s=i(7859),u=i(3550),l=i(4818),h=i(3663),c=i(9509).Buffer;t.exports=function(t,e,i){var f;f=t.padding?t.padding:i?1:4;var p,d=n(t);if(4===f)p=function(t,e){var i=t.modulus.byteLength(),n=e.length,l=o("sha1").update(c.alloc(0)).digest(),h=l.length,f=2*h;if(n>i-f-2)throw new Error("message too long");var p=c.alloc(i-n-f-2),d=i-h-1,g=r(h),y=s(c.concat([l,p,c.alloc(1,1),e],d),a(g,d)),v=s(g,a(y,h));return new u(c.concat([c.alloc(1),v,y],i))}(d,e);else if(1===f)p=function(t,e,i){var n,o=e.length,a=t.modulus.byteLength();if(o>a-11)throw new Error("message too long");return n=i?c.alloc(a-o-3,255):function(t){for(var e,i=c.allocUnsafe(t),n=0,o=r(2*t),a=0;n<t;)a===o.length&&(o=r(2*t),a=0),(e=o[a++])&&(i[n++]=e);return i}(a-o-3),new u(c.concat([c.from([0,i?1:2]),n,c.alloc(1),e],a))}(d,e,i);else{if(3!==f)throw new Error("unknown padding");if((p=new u(e)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return i?h(p,d):l(p,d)}},4818:(t,e,i)=>{var n=i(3550),r=i(9509).Buffer;t.exports=function(t,e){return r.from(t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed().toArray())}},7859:t=>{t.exports=function(t,e){for(var i=t.length,n=-1;++n<i;)t[n]^=e[n];return t}},1798:(t,e,i)=>{"use strict";var n=65536,r=i(9509).Buffer,o=global.crypto||global.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=r.allocUnsafe(t);if(t>0)if(t>n)for(var a=0;a<t;a+=n)o.getRandomValues(i.slice(a,a+n));else o.getRandomValues(i);return"function"==typeof e?process.nextTick((function(){e(null,i)})):i}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},7963:(t,e,i)=>{"use strict";function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var r=i(9509),o=i(1798),a=r.Buffer,s=r.kMaxLength,u=global.crypto||global.msCrypto,l=Math.pow(2,32)-1;function h(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>l||t<0)throw new TypeError("offset must be a uint32");if(t>s||t>e)throw new RangeError("offset out of range")}function c(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>l||t<0)throw new TypeError("size must be a uint32");if(t+e>i||t>s)throw new RangeError("buffer too small")}function f(t,e,i,n){if(process.browser){var r=t.buffer,a=new Uint8Array(r,e,i);return u.getRandomValues(a),n?void process.nextTick((function(){n(null,t)})):t}if(!n)return o(i).copy(t,e),t;o(i,(function(i,r){if(i)return n(i);r.copy(t,e),n(null,t)}))}u&&u.getRandomValues||!process.browser?(e.randomFill=function(t,e,i,n){if(!(a.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,i=t.length;else if("function"==typeof i)n=i,i=t.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return h(e,t.length),c(i,e,t.length),f(t,e,i,n)},e.randomFillSync=function(t,e,i){if(void 0===e&&(e=0),!(a.isBuffer(t)||t instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return h(e,t.length),void 0===i&&(i=t.length-e),c(i,e,t.length),f(t,e,i)}):(e.randomFill=n,e.randomFillSync=n)},4281:t=>{"use strict";var e={};function i(t,i,n){n||(n=Error);var r=function(t){var e,n;function r(e,n,r){return t.call(this,function(t,e,n){return"string"==typeof i?i:i(t,e,n)}(e,n,r))||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r}(n);r.prototype.name=n.name,r.prototype.code=t,e[t]=r}function n(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,o,a,s,u;if("string"==typeof e&&(o="not ",e.substr(0,o.length)===o)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}(t," argument"))a="The ".concat(t," ").concat(r," ").concat(n(e,"type"));else{var l=("number"!=typeof u&&(u=0),u+".".length>(s=t).length||-1===s.indexOf(".",u)?"argument":"property");a='The "'.concat(t,'" ').concat(l," ").concat(r," ").concat(n(e,"type"))}return a+". Received type ".concat(typeof i)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},6753:(t,e,i)=>{"use strict";var n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=l;var r=i(9481),o=i(4229);i(5717)(l,r);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];l.prototype[u]||(l.prototype[u]=o.prototype[u])}function l(t){if(!(this instanceof l))return new l(t);r.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",h)))}function h(){this._writableState.ended||process.nextTick(c,this)}function c(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},2725:(t,e,i)=>{"use strict";t.exports=r;var n=i(4605);function r(t){if(!(this instanceof r))return new r(t);n.call(this,t)}i(5717)(r,n),r.prototype._transform=function(t,e,i){i(null,t)}},9481:(t,e,i)=>{"use strict";var n;t.exports=E,E.ReadableState=M,i(7187).EventEmitter;var r,o=function(t,e){return t.listeners(e).length},a=i(2503),s=i(8764).Buffer,u=global.Uint8Array||function(){},l=i(4616);r=l&&l.debuglog?l.debuglog("stream"):function(){};var h,c,f,p=i(7327),d=i(1195),g=i(2457).getHighWaterMark,y=i(4281).q,v=y.ERR_INVALID_ARG_TYPE,m=y.ERR_STREAM_PUSH_AFTER_EOF,b=y.ERR_METHOD_NOT_IMPLEMENTED,_=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(5717)(E,a);var w=d.errorOrDestroy,x=["error","close","destroy","pause","resume"];function M(t,e,r){n=n||i(6753),t=t||{},"boolean"!=typeof r&&(r=e instanceof n),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=i(2553).s),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function E(t){if(n=n||i(6753),!(this instanceof E))return new E(t);var e=this instanceof n;this._readableState=new M(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function A(t,e,i,n,o){r("readableAddChunk",e);var a,l=t._readableState;if(null===e)l.reading=!1,function(t,e){if(r("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?I(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,L(t)))}}(t,l);else if(o||(a=function(t,e){var i,n;return n=e,s.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new v("chunk",["string","Buffer","Uint8Array"],e)),i}(l,e)),a)w(t,a);else if(l.objectMode||e&&e.length>0)if("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=function(t){return s.from(t)}(e)),n)l.endEmitted?w(t,new _):k(t,l,e,!0);else if(l.ended)w(t,new m);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!i?(e=l.decoder.write(e),l.objectMode||0!==e.length?k(t,l,e,!1):O(t,l)):k(t,l,e,!1)}else n||(l.reading=!1,O(t,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function k(t,e,i,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,n?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&I(t)),O(t,e)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(t,e){e(t)},E.prototype.push=function(t,e){var i,n=this._readableState;return n.objectMode?i=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=s.from(t,e),e=""),i=!0),A(this,t,e,!1,i)},E.prototype.unshift=function(t){return A(this,t,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){h||(h=i(2553).s);var e=new h(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var T=1073741824;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function I(t){var e=t._readableState;r("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(r("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(L,t))}function L(t){var e=t._readableState;r("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,N(t)}function O(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(C,t,e))}function C(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(r("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function P(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function R(t){r("readable nexttick read 0"),t.read(0)}function j(t,e){r("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(r("flow",e.flowing);e.flowing&&null!==t.read(););}function D(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function z(t){var e=t._readableState;r("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(B,e,t))}function B(t,e){if(r("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function H(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}E.prototype.read=function(t){r("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return r("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?z(this):I(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&z(this),null;var n,o=e.needReadable;return r("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&r("length less than watermark",o=!0),e.ended||e.reading?r("reading or ended",o=!1):o&&(r("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(i,e))),null===(n=t>0?D(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&z(this)),null!==n&&this.emit("data",n),n},E.prototype._read=function(t){w(this,new b("_read()"))},E.prototype.pipe=function(t,e){var i=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t)}n.pipesCount+=1,r("pipe count=%d opts=%j",n.pipesCount,e);var a=e&&!1===e.end||t===process.stdout||t===process.stderr?d:s;function s(){r("onend"),t.end()}n.endEmitted?process.nextTick(a):i.once("end",a),t.on("unpipe",(function e(o,a){r("onunpipe"),o===i&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,r("cleanup"),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("drain",u),t.removeListener("error",c),t.removeListener("unpipe",e),i.removeListener("end",s),i.removeListener("end",d),i.removeListener("data",h),l=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=function(t){return function(){var e=t._readableState;r("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,N(t))}}(i);t.on("drain",u);var l=!1;function h(e){r("ondata");var o=t.write(e);r("dest.write",o),!1===o&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==H(n.pipes,t))&&!l&&(r("false write response, pause",n.awaitDrain),n.awaitDrain++),i.pause())}function c(e){r("onerror",e),d(),t.removeListener("error",c),0===o(t,"error")&&w(t,e)}function f(){t.removeListener("finish",p),d()}function p(){r("onfinish"),t.removeListener("close",f),d()}function d(){r("unpipe"),i.unpipe(t)}return i.on("data",h),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on(e,i)}(t,"error",c),t.once("close",f),t.once("finish",p),t.emit("pipe",i),n.flowing||(r("pipe resume"),i.resume()),t},E.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<r;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=H(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},E.prototype.on=function(t,e){var i=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,r("on readable",n.length,n.reading),n.length?I(this):n.reading||process.nextTick(R,this))),i},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(t,e){var i=a.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(P,this),i},E.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(P,this),e},E.prototype.resume=function(){var t=this._readableState;return t.flowing||(r("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(j,t,e))}(this,t)),t.paused=!1,this},E.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(t){var e=this,i=this._readableState,n=!1;for(var o in t.on("end",(function(){if(r("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(o){r("wrapped data"),i.decoder&&(o=i.decoder.write(o)),i.objectMode&&null==o||(i.objectMode||o&&o.length)&&(e.push(o)||(n=!0,t.pause()))})),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var a=0;a<x.length;a++)t.on(x[a],this.emit.bind(this,x[a]));return this._read=function(e){r("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=i(5850)),c(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),E._fromList=D,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,e){return void 0===f&&(f=i(5167)),f(E,t,e)})},4605:(t,e,i)=>{"use strict";t.exports=h;var n=i(4281).q,r=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=i(6753);function l(t,e){var i=this._transformState;i.transforming=!1;var n=i.writecb;if(null===n)return this.emit("error",new o);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),n(t);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function h(t){if(!(this instanceof h))return new h(t);u.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(e,i){f(t,e,i)}))}function f(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}i(5717)(h,u),h.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},h.prototype._transform=function(t,e,i){i(new r("_transform()"))},h.prototype._write=function(t,e,i){var n=this._transformState;if(n.writecb=i,n.writechunk=t,n.writeencoding=e,!n.transforming){var r=this._readableState;(n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},h.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},h.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},4229:(t,e,i)=>{"use strict";function n(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var n=t.entry;for(t.entry=null;n;){var r=n.callback;e.pendingcb--,r(undefined),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}var r;t.exports=E,E.WritableState=M;var o,a={deprecate:i(4927)},s=i(2503),u=i(8764).Buffer,l=global.Uint8Array||function(){},h=i(1195),c=i(2457).getHighWaterMark,f=i(4281).q,p=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,y=f.ERR_STREAM_CANNOT_PIPE,v=f.ERR_STREAM_DESTROYED,m=f.ERR_STREAM_NULL_VALUES,b=f.ERR_STREAM_WRITE_AFTER_END,_=f.ERR_UNKNOWN_ENCODING,w=h.errorOrDestroy;function x(){}function M(t,e,o){r=r||i(6753),t=t||{},"boolean"!=typeof o&&(o=e instanceof r),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=c(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,n=i.sync,r=i.writecb;if("function"!=typeof r)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,n,r){--e.pendingcb,i?(process.nextTick(r,n),process.nextTick(L,t,e),t._writableState.errorEmitted=!0,w(t,n)):(r(n),t._writableState.errorEmitted=!0,w(t,n),L(t,e))}(t,i,n,e,r);else{var o=S(i)||t.destroyed;o||i.corked||i.bufferProcessing||!i.bufferedRequest||T(t,i),n?process.nextTick(k,t,i,o,r):k(t,i,o,r)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function E(t){var e=this instanceof(r=r||i(6753));if(!e&&!o.call(E,this))return new E(t);this._writableState=new M(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function A(t,e,i,n,r,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new v("write")):i?t._writev(r,e.onwrite):t._write(r,o,e.onwrite),e.sync=!1}function k(t,e,i,n){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),L(t,e)}function T(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,o=new Array(r),a=e.corkedRequestsFree;a.entry=i;for(var s=0,u=!0;i;)o[s]=i,i.isBuf||(u=!1),i=i.next,s+=1;o.allBuffers=u,A(t,e,!0,e.length,o,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new n(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,h=i.encoding,c=i.callback;if(A(t,e,!1,e.objectMode?1:l.length,l,h,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function S(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function I(t,e){t._final((function(i){e.pendingcb--,i&&w(t,i),e.prefinished=!0,t.emit("prefinish"),L(t,e)}))}function L(t,e){var i=S(e);if(i&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(I,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return i}i(5717)(E,s),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===E&&t&&t._writableState instanceof M}})):o=function(t){return t instanceof this},E.prototype.pipe=function(){w(this,new y)},E.prototype.write=function(t,e,i){var n,r=this._writableState,o=!1,a=!r.objectMode&&(n=t,u.isBuffer(n)||n instanceof l);return a&&!u.isBuffer(t)&&(t=function(t){return u.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof i&&(i=x),r.ending?function(t,e){var i=new b;w(t,i),process.nextTick(e,i)}(this,i):(a||function(t,e,i,n){var r;return null===i?r=new m:"string"==typeof i||e.objectMode||(r=new p("chunk",["string","Buffer"],i)),!r||(w(t,r),process.nextTick(n,r),!1)}(this,r,t,i))&&(r.pendingcb++,o=function(t,e,i,n,r,o){if(!i){var a=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=u.from(e,i)),e}(e,n,r);n!==a&&(i=!0,r="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:r,isBuf:i,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else A(t,e,!1,s,n,r,o);return l}(this,r,a,t,e,i)),o},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||T(this,t))},E.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(t,e,i){i(new d("_write()"))},E.prototype._writev=null,E.prototype.end=function(t,e,i){var n=this._writableState;return"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,e,i){e.ending=!0,L(t,e),i&&(e.finished?process.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,n,i),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(t,e){e(t)}},5850:(t,e,i)=>{"use strict";var n;function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=i(8610),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function d(t){var e=t[a];if(null!==e){var i=t[f].read();null!==i&&(t[h]=null,t[a]=null,t[s]=null,e(p(i,!1)))}}function g(t){process.nextTick(d,t)}var y=Object.getPrototypeOf((function(){})),v=Object.setPrototypeOf((r(n={get stream(){return this[f]},next:function(){var t=this,e=this[u];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(e,i){process.nextTick((function(){t[u]?i(t[u]):e(p(void 0,!0))}))}));var i,n=this[h];if(n)i=new Promise(function(t,e){return function(i,n){t.then((function(){e[l]?i(p(void 0,!0)):e[c](i,n)}),n)}}(n,this));else{var r=this[f].read();if(null!==r)return Promise.resolve(p(r,!1));i=new Promise(this[c])}return this[h]=i,i}},Symbol.asyncIterator,(function(){return this})),r(n,"return",(function(){var t=this;return new Promise((function(e,i){t[f].destroy(null,(function(t){t?i(t):e(p(void 0,!0))}))}))})),n),y);t.exports=function(t){var e,i=Object.create(v,(r(e={},f,{value:t,writable:!0}),r(e,a,{value:null,writable:!0}),r(e,s,{value:null,writable:!0}),r(e,u,{value:null,writable:!0}),r(e,l,{value:t._readableState.endEmitted,writable:!0}),r(e,c,{value:function(t,e){var n=i[f].read();n?(i[h]=null,i[a]=null,i[s]=null,t(p(n,!1))):(i[a]=t,i[s]=e)},writable:!0}),e));return i[h]=null,o(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[s];return null!==e&&(i[h]=null,i[a]=null,i[s]=null,e(t)),void(i[u]=t)}var n=i[a];null!==n&&(i[h]=null,i[a]=null,i[s]=null,n(p(void 0,!0))),i[l]=!0})),t.on("readable",g.bind(null,i)),i}},7327:(t,e,i)=>{"use strict";function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=i(8764).Buffer,s=i(2361).inspect,u=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return a.alloc(0);for(var e,i,n,r=a.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,i=r,n=s,a.prototype.copy.call(e,i,n),s+=o.data.length,o=o.next;return r}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,n=e.data;for(t-=n.length;e=e.next;){var r=e.data,o=t>r.length?r.length:t;if(o===r.length?n+=r:n+=r.slice(0,t),0==(t-=o)){o===r.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=r.slice(o));break}++i}return this.length-=i,n}},{key:"_getBuffer",value:function(t){var e=a.allocUnsafe(t),i=this.head,n=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var r=i.data,o=t>r.length?r.length:t;if(r.copy(e,e.length-t,0,o),0==(t-=o)){o===r.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=r.slice(o));break}++n}return this.length-=n,e}},{key:u,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}],i&&o(e.prototype,i),t}()},1195:t=>{"use strict";function e(t,e){n(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,r){var o=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(r?r(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,t)):process.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!r&&t?o._writableState?o._writableState.errorEmitted?process.nextTick(i,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,t)):process.nextTick(e,o,t):r?(process.nextTick(i,o),r(t)):process.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,n=t._writableState;i&&i.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}}},8610:(t,e,i)=>{"use strict";var n=i(4281).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function t(e,i,o){if("function"==typeof i)return t(e,null,i);i||(i={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];t.apply(this,n)}}}(o||r);var a=i.readable||!1!==i.readable&&e.readable,s=i.writable||!1!==i.writable&&e.writable,u=function(){e.writable||h()},l=e._writableState&&e._writableState.finished,h=function(){s=!1,l=!0,a||o.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){a=!1,c=!0,s||o.call(e)},p=function(t){o.call(e,t)},d=function(){var t;return a&&!c?(e._readableState&&e._readableState.ended||(t=new n),o.call(e,t)):s&&!l?(e._writableState&&e._writableState.ended||(t=new n),o.call(e,t)):void 0},g=function(){e.req.on("finish",h)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",h),e.on("abort",d),e.req?g():e.on("request",g)):s&&!e._writableState&&(e.on("end",u),e.on("close",u)),e.on("end",f),e.on("finish",h),!1!==i.error&&e.on("error",p),e.on("close",d),function(){e.removeListener("complete",h),e.removeListener("abort",d),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",h),e.removeListener("end",f),e.removeListener("error",p),e.removeListener("close",d)}}},5167:t=>{t.exports=function(){throw new Error("Readable.from is not available in the browser")}},9946:(t,e,i)=>{"use strict";var n,r=i(4281).q,o=r.ERR_MISSING_ARGS,a=r.ERR_STREAM_DESTROYED;function s(t){if(t)throw t}function u(t,e,r,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===n&&(n=i(8610)),n(t,{readable:e,writable:r},(function(t){if(t)return o(t);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function l(t){t()}function h(t,e){return t.pipe(e)}function c(t){return t.length?"function"!=typeof t[t.length-1]?s:t.pop():s}t.exports=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n,r=c(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var a=e.map((function(t,i){var o=i<e.length-1;return u(t,o,i>0,(function(t){n||(n=t),t&&a.forEach(l),o||(a.forEach(l),r(n))}))}));return e.reduce(h)}},2457:(t,e,i)=>{"use strict";var n=i(4281).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,r){var o=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,i);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(r?i:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},2503:(t,e,i)=>{t.exports=i(7187).EventEmitter},8473:(t,e,i)=>{(e=t.exports=i(9481)).Stream=e,e.Readable=e,e.Writable=i(4229),e.Duplex=i(6753),e.Transform=i(4605),e.PassThrough=i(2725),e.finished=i(8610),e.pipeline=i(9946)},9785:(t,e,i)=>{"use strict";var n=i(8764).Buffer,r=i(5717),o=i(3349),a=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],f=[1352829926,1548603684,1836072691,2053994217,0];function p(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function g(t,e,i,n,r,o,a,s){return d(t+(e^i^n)+o+a|0,s)+r|0}function y(t,e,i,n,r,o,a,s){return d(t+(e&i|~e&n)+o+a|0,s)+r|0}function v(t,e,i,n,r,o,a,s){return d(t+((e|~i)^n)+o+a|0,s)+r|0}function m(t,e,i,n,r,o,a,s){return d(t+(e&n|i&~n)+o+a|0,s)+r|0}function b(t,e,i,n,r,o,a,s){return d(t+(e^(i|~n))+o+a|0,s)+r|0}r(p,o),p.prototype._update=function(){for(var t=a,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,n=0|this._b,r=0|this._c,o=0|this._d,p=0|this._e,_=0|this._a,w=0|this._b,x=0|this._c,M=0|this._d,E=0|this._e,A=0;A<80;A+=1){var k,T;A<16?(k=g(i,n,r,o,p,t[s[A]],c[0],l[A]),T=b(_,w,x,M,E,t[u[A]],f[0],h[A])):A<32?(k=y(i,n,r,o,p,t[s[A]],c[1],l[A]),T=m(_,w,x,M,E,t[u[A]],f[1],h[A])):A<48?(k=v(i,n,r,o,p,t[s[A]],c[2],l[A]),T=v(_,w,x,M,E,t[u[A]],f[2],h[A])):A<64?(k=m(i,n,r,o,p,t[s[A]],c[3],l[A]),T=y(_,w,x,M,E,t[u[A]],f[3],h[A])):(k=b(i,n,r,o,p,t[s[A]],c[4],l[A]),T=g(_,w,x,M,E,t[u[A]],f[4],h[A])),i=p,p=o,o=d(r,10),r=n,n=k,_=E,E=M,M=d(x,10),x=w,w=T}var S=this._b+r+M|0;this._b=this._c+o+E|0,this._c=this._d+p+_|0,this._d=this._e+i+w|0,this._e=this._a+n+x|0,this._a=S},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=n.alloc?n.alloc(20):new n(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},9509:(t,e,i)=>{var n=i(8764),r=n.Buffer;function o(t,e){for(var i in t)e[i]=t[i]}function a(t,e,i){return r(t,e,i)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(r.prototype),o(r,a),a.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,i)},a.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=r(t);return void 0!==e?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},2399:(t,e,i)=>{"use strict";var n,r=i(8764),o=r.Buffer,a={};for(n in r)r.hasOwnProperty(n)&&"SlowBuffer"!==n&&"Buffer"!==n&&(a[n]=r[n]);var s=a.Buffer={};for(n in o)o.hasOwnProperty(n)&&"allocUnsafe"!==n&&"allocUnsafeSlow"!==n&&(s[n]=o[n]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,i){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return o(t,e,i)}),s.alloc||(s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=o(t);return e&&0!==e.length?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n}),!a.kStringMaxLength)try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(t){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a},4189:(t,e,i)=>{var n=i(9509).Buffer;function r(t,e){this._block=n.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}r.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=n.from(t,e));for(var i=this._block,r=this._blockSize,o=t.length,a=this._len,s=0;s<o;){for(var u=a%r,l=Math.min(o-s,r-u),h=0;h<l;h++)i[u+h]=t[s+h];s+=l,(a+=l)%r==0&&this._update(i)}return this._len+=o,this},r.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var n=(4294967295&i)>>>0,r=(i-n)/4294967296;this._block.writeUInt32BE(r,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return t?o.toString(t):o},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=r},9072:(t,e,i)=>{var n=t.exports=function(t){t=t.toLowerCase();var e=n[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};n.sha=i(4448),n.sha1=i(8336),n.sha224=i(8432),n.sha256=i(7499),n.sha384=i(1686),n.sha512=i(7816)},4448:(t,e,i)=>{var n=i(5717),r=i(4189),o=i(9509).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function l(t){return t<<30|t>>>2}function h(t,e,i,n){return 0===t?e&i|~e&n:2===t?e&i|e&n|i&n:e^i^n}n(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,i=this._w,n=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<80;++c)i[c]=i[c-3]^i[c-8]^i[c-14]^i[c-16];for(var f=0;f<80;++f){var p=~~(f/20),d=0|((e=n)<<5|e>>>27)+h(p,r,o,s)+u+i[f]+a[p];u=s,s=o,o=l(r),r=n,n=d}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},8336:(t,e,i)=>{var n=i(5717),r=i(4189),o=i(9509).Buffer,a=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,r.call(this,64,56)}function l(t){return t<<5|t>>>27}function h(t){return t<<30|t>>>2}function c(t,e,i,n){return 0===t?e&i|~e&n:2===t?e&i|e&n|i&n:e^i^n}n(u,r),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,i=this._w,n=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)i[f]=t.readInt32BE(4*f);for(;f<80;++f)i[f]=(e=i[f-3]^i[f-8]^i[f-14]^i[f-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),g=l(n)+c(d,r,o,s)+u+i[p]+a[d]|0;u=s,s=o,o=h(r),r=n,n=g}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=o.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},8432:(t,e,i)=>{var n=i(5717),r=i(7499),o=i(4189),a=i(9509).Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,r),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},7499:(t,e,i)=>{var n=i(5717),r=i(4189),o=i(9509).Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,r.call(this,64,56)}function l(t,e,i){return i^t&(e^i)}function h(t,e,i){return t&e|i&(t|e)}function c(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function f(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}n(u,r),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,i=this._w,n=0|this._a,r=0|this._b,o=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,g=0|this._g,y=0|this._h,v=0;v<16;++v)i[v]=t.readInt32BE(4*v);for(;v<64;++v)i[v]=0|(((e=i[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[v-7]+p(i[v-15])+i[v-16];for(var m=0;m<64;++m){var b=y+f(u)+l(u,d,g)+a[m]+i[m]|0,_=c(n)+h(n,r,o)|0;y=g,g=d,d=u,u=s+b|0,s=o,o=r,r=n,n=b+_|0}this._a=n+this._a|0,this._b=r+this._b|0,this._c=o+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=g+this._g|0,this._h=y+this._h|0},u.prototype._hash=function(){var t=o.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},1686:(t,e,i)=>{var n=i(5717),r=i(7816),o=i(4189),a=i(9509).Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,r),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=a.allocUnsafe(48);function e(e,i,n){t.writeInt32BE(e,n),t.writeInt32BE(i,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},7816:(t,e,i)=>{var n=i(5717),r=i(4189),o=i(9509).Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,r.call(this,128,112)}function l(t,e,i){return i^t&(e^i)}function h(t,e,i){return t&e|i&(t|e)}function c(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function f(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function y(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}n(u,r),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,i=0|this._ah,n=0|this._bh,r=0|this._ch,o=0|this._dh,s=0|this._eh,u=0|this._fh,m=0|this._gh,b=0|this._hh,_=0|this._al,w=0|this._bl,x=0|this._cl,M=0|this._dl,E=0|this._el,A=0|this._fl,k=0|this._gl,T=0|this._hl,S=0;S<32;S+=2)e[S]=t.readInt32BE(4*S),e[S+1]=t.readInt32BE(4*S+4);for(;S<160;S+=2){var I=e[S-30],L=e[S-30+1],O=p(I,L),C=d(L,I),P=g(I=e[S-4],L=e[S-4+1]),R=y(L,I),j=e[S-14],N=e[S-14+1],D=e[S-32],z=e[S-32+1],B=C+N|0,H=O+j+v(B,C)|0;H=(H=H+P+v(B=B+R|0,R)|0)+D+v(B=B+z|0,z)|0,e[S]=H,e[S+1]=B}for(var F=0;F<160;F+=2){H=e[F],B=e[F+1];var U=h(i,n,r),V=h(_,w,x),q=c(i,_),G=c(_,i),W=f(s,E),Y=f(E,s),K=a[F],Z=a[F+1],X=l(s,u,m),J=l(E,A,k),$=T+Y|0,Q=b+W+v($,T)|0;Q=(Q=(Q=Q+X+v($=$+J|0,J)|0)+K+v($=$+Z|0,Z)|0)+H+v($=$+B|0,B)|0;var tt=G+V|0,et=q+U+v(tt,G)|0;b=m,T=k,m=u,k=A,u=s,A=E,s=o+Q+v(E=M+$|0,M)|0,o=r,M=x,r=n,x=w,n=i,w=_,i=Q+et+v(_=$+tt|0,$)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+M|0,this._el=this._el+E|0,this._fl=this._fl+A|0,this._gl=this._gl+k|0,this._hl=this._hl+T|0,this._ah=this._ah+i+v(this._al,_)|0,this._bh=this._bh+n+v(this._bl,w)|0,this._ch=this._ch+r+v(this._cl,x)|0,this._dh=this._dh+o+v(this._dl,M)|0,this._eh=this._eh+s+v(this._el,E)|0,this._fh=this._fh+u+v(this._fl,A)|0,this._gh=this._gh+m+v(this._gl,k)|0,this._hh=this._hh+b+v(this._hl,T)|0},u.prototype._hash=function(){var t=o.allocUnsafe(64);function e(e,i,n){t.writeInt32BE(e,n),t.writeInt32BE(i,n+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},2830:(t,e,i)=>{t.exports=r;var n=i(7187).EventEmitter;function r(){n.call(this)}i(5717)(r,n),r.Readable=i(9481),r.Writable=i(4229),r.Duplex=i(6753),r.Transform=i(4605),r.PassThrough=i(2725),r.finished=i(8610),r.pipeline=i(9946),r.Stream=r,r.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function o(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",o),t._isStdio||e&&!1===e.end||(i.on("end",s),i.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(h(),0===n.listenerCount(this,"error"))throw t}function h(){i.removeListener("data",r),t.removeListener("drain",o),i.removeListener("end",s),i.removeListener("close",u),i.removeListener("error",l),t.removeListener("error",l),i.removeListener("end",h),i.removeListener("close",h),t.removeListener("close",h)}return i.on("error",l),t.on("error",l),i.on("end",h),i.on("close",h),t.on("close",h),t.emit("pipe",i),t}},2553:(t,e,i)=>{"use strict";var n=i(9509).Buffer,r=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=h,this.end=c,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var n=i.charCodeAt(i.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function h(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.s=o,o.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},o.prototype.text=function(t,e){var i=function(t,e,i){var n=e.length-1;if(n<i)return 0;var r=a(e[n]);return r>=0?(r>0&&(t.lastNeed=r-1),r):--n<i||-2===r?0:(r=a(e[n]))>=0?(r>0&&(t.lastNeed=r-2),r):--n<i||-2===r?0:(r=a(e[n]))>=0?(r>0&&(2===r?r=0:t.lastNeed=r-3),r):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var n=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},775:(t,e,i)=>{var n=i(3379),r=i(5789);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},3507:(t,e,i)=>{var n=i(3379),r=i(8222);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},9661:(t,e,i)=>{var n=i(3379),r=i(5024);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},5595:(t,e,i)=>{var n=i(3379),r=i(2753);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},4474:(t,e,i)=>{var n=i(3379),r=i(1210);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},4988:(t,e,i)=>{var n=i(3379),r=i(8654);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.id,r,""]]);n(r,{insert:"head",singleton:!1}),t.exports=r.locals||{}},3379:(t,e,i)=>{"use strict";var n,r=function(){var t={};return function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}t[e]=i}return t[e]}}(),o=[];function a(t){for(var e=-1,i=0;i<o.length;i++)if(o[i].identifier===t){e=i;break}return e}function s(t,e){for(var i={},n=[],r=0;r<t.length;r++){var s=t[r],u=e.base?s[0]+e.base:s[0],l=i[u]||0,h="".concat(u," ").concat(l);i[u]=l+1;var c=a(h),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==c?(o[c].references++,o[c].updater(f)):o.push({identifier:h,updater:g(f,e),references:1}),n.push(h)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=r(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,h=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function c(t,e,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function f(t,e,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var p=null,d=0;function g(t,e){var i,n,r;if(e.singleton){var o=d++;i=p||(p=u(e)),n=c.bind(null,i,o,!1),r=c.bind(null,i,o,!0)}else i=u(e),n=f.bind(null,i,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(i)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<i.length;n++){var r=a(i[n]);o[r].references--}for(var u=s(t,e),l=0;l<i.length;l++){var h=a(i[l]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}i=u}}}},4927:t=>{function e(t){try{if(!global.localStorage)return!1}catch(t){return!1}var e=global.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,i){if(e("noDeprecation"))return t;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),n=!0}return t.apply(this,arguments)}}},9146:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__9146__},6601:()=>{},9214:()=>{},1922:()=>{},2363:()=>{},2361:()=>{},4616:()=>{},4946:t=>{"use strict";t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},5207:t=>{"use strict";t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},1308:t=>{"use strict";t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},9799:t=>{"use strict";t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},8597:t=>{"use strict";t.exports={i8:"6.5.4"}},2562:t=>{"use strict";t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},4147:t=>{"use strict";t.exports={version:"1.1.3"}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),__webpack_require__.p="";var __webpack_exports__=__webpack_require__(4132);return __webpack_exports__})()));
//# sourceMappingURL=index.js.map